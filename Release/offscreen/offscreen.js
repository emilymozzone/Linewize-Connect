/*! For license information please see offscreen.js.LICENSE.txt */
(()=>{var e={376:e=>{var t;self,t=function(){return(()=>{var e={"./node_modules/ably/build/ably-commonjs.js":e=>{var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=42)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return i})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return p})),n.d(t,"__createBinding",(function(){return d})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return g})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__spreadArray",(function(){return v})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return E})),n.d(t,"__asyncValues",(function(){return S})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return O})),n.d(t,"__importDefault",(function(){return C})),n.d(t,"__classPrivateFieldGet",(function(){return R})),n.d(t,"__classPrivateFieldSet",(function(){return M}));var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function p(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var d=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function f(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||d(t,e,n)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function v(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=o[e](t)).value instanceof _?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function E(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,o,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&d(t,e,n);return T(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function M(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.allToUpperCase=t.allToLowerCase=t.encodeBody=t.decodeBody=t.Format=t.promisify=t.trim=t.arrChooseN=t.randomHexString=t.randomString=t.cheapRandStr=t.dataSizeBytes=t.inspectBody=t.inspectError=t.isErrorInfoOrPartialErrorInfo=t.now=t.parseQueryString=t.toQueryString=t.arrPopRandomElement=t.defaultPostHeaders=t.defaultGetHeaders=t.allSame=t.arrEvery=t.arrFilter=t.arrMap=t.safeArrForEach=t.arrForEach=t.forInOwnNonNullProperties=t.valuesArray=t.keysArray=t.arrWithoutValue=t.arrDeleteValue=t.arrIn=t.arrIndexOf=t.arrSubtract=t.arrIntersectOb=t.arrIntersect=t.intersect=t.containsValue=t.inherits=t.prototypicalClone=t.shallowClone=t.isEmptyArg=t.isOnlyPropIn=t.isEmpty=t.isObject=t.ensureArray=t.isArray=t.copy=t.mixin=void 0,t.toBase64=t.matchDerivedChannel=t.shallowEquals=t.getGlobalObject=t.getRetryTime=t.getJitterCoefficient=t.getBackoffCoefficient=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(8)),s=r.__importDefault(n(4)),a=n(11),c=n(31);function u(e){return Math.floor(Math.random()*e.length)}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var o=t[r];if(!o)break;var i=Object.prototype.hasOwnProperty;for(var s in o)i&&!i.call(o,s)||(e[s]=o[s])}return e}function p(e){return null==e}function d(e,t){var n=function(){};n.prototype=e;var r=new n;return t&&l(r,t),r}function f(e,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];-1!=(0,t.arrIndexOf)(n,i)&&r.push(i)}return r}function h(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o in t&&n.push(o)}return n}function g(e,n){var r=(0,t.arrIndexOf)(e,n),o=-1!=r;return o&&e.splice(r,1),o}t.mixin=l,t.copy=function(e){return l({},e)},t.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.ensureArray=function(e){return p(e)?[]:(0,t.isArray)(e)?e:[e]},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isOnlyPropIn=function(e,t){for(var n in e)if(n!==t)return!1;return!0},t.isEmptyArg=p,t.shallowClone=function(e){var t=new Object;for(var n in e)t[n]=e[n];return t},t.prototypicalClone=d,t.inherits=function(e,t){o.default.Config.inherits?o.default.Config.inherits(e,t):(e.super_=t,e.prototype=d(t.prototype,{constructor:e}))},t.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},t.intersect=function(e,n){return(0,t.isArray)(n)?f(e,n):h(e,n)},t.arrIntersect=f,t.arrIntersectOb=h,t.arrSubtract=function(e,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];-1==(0,t.arrIndexOf)(n,i)&&r.push(i)}return r},t.arrIndexOf=Array.prototype.indexOf?function(e,t,n){return e.indexOf(t,n)}:function(e,t,n){n=n||0;for(var r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.arrIn=function(e,n){return-1!==(0,t.arrIndexOf)(e,n)},t.arrDeleteValue=g,t.arrWithoutValue=function(e,t){var n=e.slice();return g(n,t),n},t.keysArray=function(e,t){var n=[];for(var r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(r);return n},t.valuesArray=function(e,t){var n=[];for(var r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(e[r]);return n},t.forInOwnNonNullProperties=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&t(n)},t.arrForEach=Array.prototype.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r,e)},t.safeArrForEach=function(e,n){return(0,t.arrForEach)(e.slice(),n)},t.arrMap=Array.prototype.map?function(e,t){return e.map(t)}:function(e,t){for(var n=[],r=e.length,o=0;o<r;o++)n.push(t(e[o],o,e));return n},t.arrFilter=Array.prototype.filter?function(e,t){return e.filter(t)}:function(e,t){for(var n=[],r=e.length,o=0;o<r;o++)t(e[o])&&n.push(e[o]);return n},t.arrEvery=Array.prototype.every?function(e,t){return e.every(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)if(!t(e[r],r,e))return!1;return!0},t.allSame=function(e,n){if(0===e.length)return!0;var r=e[0][n];return(0,t.arrEvery)(e,(function(e){return e[n]===r}))};var m,y={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function v(e){return e.splice(u(e),1)[0]}function _(e){return Math.min((e+2)/3,2)}function b(){return 1-.2*Math.random()}t.defaultGetHeaders=function(e,t){return{accept:y[t||m.json],"X-Ably-Version":i.default.protocolVersion.toString(),"Ably-Agent":(0,i.getAgentString)(e)}},t.defaultPostHeaders=function(e,t){var n;return{accept:n=y[t||m.json],"content-type":n,"X-Ably-Version":i.default.protocolVersion.toString(),"Ably-Agent":(0,i.getAgentString)(e)}},t.arrPopRandomElement=v,t.toQueryString=function(e){var t=[];if(e)for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""},t.parseQueryString=function(e){for(var t,n=/([^?&=]+)=?([^&]*)/g,r={};t=n.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r},t.now=Date.now||function(){return(new Date).getTime()},t.isErrorInfoOrPartialErrorInfo=function(e){return"object"==typeof e&&null!==e&&("ErrorInfo"==e.constructor.name||"PartialErrorInfo"==e.constructor.name)},t.inspectError=function(e){var t,n;return e instanceof Error||"ErrorInfo"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"PartialErrorInfo"===(null===(n=null==e?void 0:e.constructor)||void 0===n?void 0:n.name)?e.toString():o.default.Config.inspect(e)},t.inspectBody=function(e){return o.default.BufferUtils.isBuffer(e)?e.toString():"string"==typeof e?e:o.default.Config.inspect(e)},t.dataSizeBytes=function(e){if(o.default.BufferUtils.isBuffer(e))return o.default.BufferUtils.byteLength(e);if("string"==typeof e)return o.default.Config.stringByteSize(e);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof e)},t.cheapRandStr=function(){return String(Math.random()).substr(2)},t.randomString=function(e){if(o.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return o.default.Config.getRandomValues(t),o.default.BufferUtils.base64Encode(t)}for(var n=o.default.BufferUtils.base64CharSet,r=Math.round(4*e/3),i="",s=0;s<r;s++)i+=n[u(n)];return i},t.randomHexString=function(e){if(o.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return o.default.Config.getRandomValues(t),o.default.BufferUtils.hexEncode(t)}for(var n=o.default.BufferUtils.hexCharSet,r=2*e,i="",s=0;s<r;s++)i+=n[u(n)];return i},t.arrChooseN=function(e,t){for(var n=Math.min(t,e.length),r=e.slice(),o=[],i=0;i<n;i++)o.push(v(r));return o},t.trim=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.promisify=function(e,t,n){return new Promise((function(o,i){e[t].apply(e,r.__spreadArray(r.__spreadArray([],n,!1),[function(e,t){e?i(e):o(t)}],!1))}))},function(e){e.msgpack="msgpack",e.json="json"}(m=t.Format||(t.Format={})),t.decodeBody=function(e,t){return"msgpack"==t?o.default.Config.msgpack.decode(e):JSON.parse(String(e))},t.encodeBody=function(e,t){return"msgpack"==t?o.default.Config.msgpack.encode(e,!0):JSON.stringify(e)},t.allToLowerCase=function(e){return e.map((function(e){return e&&e.toLowerCase()}))},t.allToUpperCase=function(e){return e.map((function(e){return e&&e.toUpperCase()}))},t.getBackoffCoefficient=_,t.getJitterCoefficient=b,t.getRetryTime=function(e,t){return e*_(t)*b()},t.getGlobalObject=function(){return e||("undefined"!=typeof window?window:self)},t.shallowEquals=function(e,t){return Object.keys(e).every((function(n){return e[n]===t[n]}))&&Object.keys(t).every((function(n){return t[n]===e[n]}))},t.matchDerivedChannel=function(e){var t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new s.default("regex match failed",400,40010);if(t[2])throw new s.default("cannot use a derived option with a ".concat(t[2]," channel"),400,40010);return{qualifierParam:t[3]||"",channelName:t[4]}},t.toBase64=function(e){return o.default.Config.createHmac?Buffer.from(e,"ascii").toString("base64"):(0,a.stringify)((0,c.parse)(e))}}).call(this,n(13))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0).__importDefault(n(3)),i=e||("undefined"!=typeof window?window:self);function s(e,t){return"".concat(e).padStart(t?3:2,"0")}function a(e){return o.default.Config.logTimestamps?function(t){var n=new Date;e(s(n.getHours())+":"+s(n.getMinutes())+":"+s(n.getSeconds())+"."+s(n.getMilliseconds(),1)+" "+t)}:e}!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Major=2]="Major",e[e.Minor=3]="Minor",e[e.Micro=4]="Micro"}(r||(r={}));var c=function(){function e(){e.logLevel=e.LOG_DEFAULT}return e.initLogHandlers=function(){var e=function(){var e,t,n,r;return"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope||"function"==typeof(null===(t=null===(e=null==i?void 0:i.console)||void 0===e?void 0:e.log)||void 0===t?void 0:t.apply)?(n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},r=console.warn?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)}:n):n=r=(null==i?void 0:i.console.log)?function(){Function.prototype.apply.call(console.log,console,arguments)}:function(){},[n,r].map(a)}(),t=e[0],n=e[1];this.logHandler=t,this.logErrorHandler=n},e.logLevel=r.Error,e.LOG_NONE=r.None,e.LOG_ERROR=r.Error,e.LOG_MAJOR=r.Major,e.LOG_MINOR=r.Minor,e.LOG_MICRO=r.Micro,e.LOG_DEFAULT=r.Error,e.LOG_DEBUG=r.Micro,e.logAction=function(t,n,o){e.shouldLog(t)&&(t===r.Error?e.logErrorHandler:e.logHandler)("Ably: "+n+": "+o)},e.deprecated=function(t,n){e.deprecatedWithMsg(t,"Please use '"+n+"' instead.")},e.deprecatedWithMsg=function(t,n){e.shouldLog(r.Error)&&e.logErrorHandler("Ably: Deprecation warning - '"+t+"' is deprecated and will be removed from a future version. "+n)},e.shouldLog=function(t){return t<=e.logLevel},e.setLog=function(t,n){void 0!==t&&(e.logLevel=t),void 0!==n&&(e.logHandler=e.logErrorHandler=n)},e}();t.default=c}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartialErrorInfo=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1));function s(e){var t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+i.inspectError(e.cause)),!e.href||e.message&&e.message.indexOf("help.ably.io")>-1||(t+="; see "+e.href+" "),t+"]"}var a=function(e){function t(n,r,o,i){var s=e.call(this,n)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(s,t.prototype),s.code=r,s.statusCode=o,s.cause=i,s}return r.__extends(t,e),t.prototype.toString=function(){return s(this)},t.fromValues=function(e){var n=e,r=n.message,i=n.code,s=n.statusCode;if("string"!=typeof r||"number"!=typeof i||"number"!=typeof s)throw new Error("ErrorInfo.fromValues(): invalid values: "+o.default.Config.inspect(e));var a=Object.assign(new t(r,i,s),e);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a},t}(Error);t.default=a;var c=function(e){function t(n,r,o,i){var s=e.call(this,n)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(s,t.prototype),s.code=r,s.statusCode=o,s.cause=i,s}return r.__extends(t,e),t.prototype.toString=function(){return s(this)},t}(Error);t.PartialErrorInfo=c},function(e,t,n){var r;e.exports=(r=n(6),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=e[o]<<24-o%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),r.lib.WordArray)},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==t&&t.crypto&&(r=t.crypto),!r)try{r=n(44)}catch(e){}var o=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new u.init(t,e)}}),l=s.enc={},p=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,i);if(c){for(var p=0;p<c;p+=s)this._doProcessBlock(o,p);n=o.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),s=r.__importDefault(n(3));function a(e,t,n){try{t.apply(e,n)}catch(e){i.default.logAction(i.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+e+"; stack = "+(e&&e.stack))}}function c(e,t,n){for(var r,i,s,a=0;a<e.length;a++)if(r=e[a],n&&(r=r[n]),o.isArray(r)){for(;-1!==(i=o.arrIndexOf(r,t));)r.splice(i,1);n&&0===r.length&&delete e[a][n]}else if(o.isObject(r))for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&o.isArray(r[s])&&c([r],t,s)}var u=function(){function e(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return e.prototype.on=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if("function"!=typeof r)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));this.any.push(r)}if(2===t.length){var i=t[0],a=t[1];if("function"!=typeof a)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));if(o.isEmptyArg(i))this.any.push(a);else if(o.isArray(i))i.forEach((function(t){e.on(t,a)}));else{if("string"!=typeof i)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));(this.events[i]||(this.events[i]=[])).push(a)}}},e.prototype.off=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(0==n.length||o.isEmptyArg(n[0])&&o.isEmptyArg(n[1]))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));var i=n[0],a=n[1],u=null,l=null;if(1!==n.length&&a){if("function"!=typeof a)throw new Error("EventEmitter.off(): invalid arguments:"+s.default.Config.inspect(n));l=(e=[i,a])[0],u=e[1]}else"function"==typeof i?u=i:l=i;if(u&&o.isEmptyArg(l))c([this.any,this.events,this.anyOnce,this.eventsOnce],u);else if(o.isArray(l))l.forEach((function(e){t.off(e,u)}));else{if("string"!=typeof l)throw new Error("EventEmitter.off(): invalid arguments:"+s.default.Config.inspect(n));u?c([this.events,this.eventsOnce],u,l):(delete this.events[l],delete this.eventsOnce[l])}},e.prototype.listeners=function(e){if(e){var t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={event:e},i=[];this.anyOnce.length&&(Array.prototype.push.apply(i,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(i,this.any);var s=this.eventsOnce[e];s&&(Array.prototype.push.apply(i,s),delete this.eventsOnce[e]);var c=this.events[e];c&&Array.prototype.push.apply(i,c),o.arrForEach(i,(function(e){a(r,e,t)}))},e.prototype.once=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length;if((0===r||1===r&&"function"!=typeof t[0])&&s.default.Config.Promise){var i=t[0];return new s.default.Config.Promise((function(t){e.once(i,t)}))}var a=t[0],c=t[1];if(1===t.length&&"function"==typeof a)this.anyOnce.push(a);else if(o.isEmptyArg(a)){if("function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));this.anyOnce.push(c)}else if(o.isArray(a)){var u=this,l=function(){var e=Array.prototype.slice.call(arguments);if(o.arrForEach(a,(function(e){u.off(e,l)})),"function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));c.apply(this,e)};o.arrForEach(a,(function(e){u.on(e,l)}))}else{if("string"!=typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));var p=this.eventsOnce[a]||(this.eventsOnce[a]=[]);if(c){if("function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));p.push(c)}}},e.prototype.whenState=function(t,n,r){for(var o=this,i=[],c=3;c<arguments.length;c++)i[c-3]=arguments[c];var u={event:t};if("string"!=typeof t||"string"!=typeof n)throw"whenState requires a valid event String argument";if("function"!=typeof r&&s.default.Config.Promise)return new s.default.Config.Promise((function(r){e.prototype.whenState.apply(o,[t,n,r].concat(i))}));t===n?a(u,r,i):this.once(t,r)},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaults=t.normaliseOptions=t.objectifyOptions=t.getAgentString=t.getHosts=t.getFallbackHosts=t.environmentFallbackHosts=t.getHttpScheme=t.getPort=t.getHost=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),s=r.__importDefault(n(2)),a=r.__importDefault(n(4)),c=n(43),u="ably-js/"+c.version,l={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:c.version,protocolVersion:2,agent:u,getHost:p,getPort:d,getHttpScheme:f,environmentFallbackHosts:h,getFallbackHosts:g,getHosts:m,checkHost:y,objectifyOptions:v,normaliseOptions:_};function p(e,t,n){return n?t==e.restHost&&e.realtimeHost||t||e.realtimeHost:t||e.restHost}function d(e,t){return t||e.tls?e.tlsPort:e.port}function f(e){return e.tls?"https://":"http://"}function h(e){return[e+"-a-fallback.ably-realtime.com",e+"-b-fallback.ably-realtime.com",e+"-c-fallback.ably-realtime.com",e+"-d-fallback.ably-realtime.com",e+"-e-fallback.ably-realtime.com"]}function g(e){var t=e.fallbackHosts,n=void 0!==e.httpMaxRetryCount?e.httpMaxRetryCount:l.httpMaxRetryCount;return t?i.arrChooseN(t,n):[]}function m(e){return[e.restHost].concat(g(e))}function y(e){if("string"!=typeof e)throw new a.default("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new a.default("host must not be zero-length",4e4,400)}function v(e){return"string"==typeof e?-1==e.indexOf(":")?{token:e}:{key:e}:e}function _(e){if(e.host&&(s.default.deprecated("host","restHost"),e.restHost=e.host),e.wsHost&&(s.default.deprecated("wsHost","realtimeHost"),e.realtimeHost=e.wsHost),e.queueEvents&&(s.default.deprecated("queueEvents","queueMessages"),e.queueMessages=e.queueEvents),e.fallbackHostsUseDefault){if(e.fallbackHosts){var t="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions",t),new a.default(t,4e4,400)}if(e.port||e.tlsPort)throw t="fallbackHostsUseDefault cannot be set when port or tlsPort are set",s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions",t),new a.default(t,4e4,400);e.environment?s.default.deprecatedWithMsg("fallbackHostsUseDefault","There is no longer a need to set this when the environment option is also set since the library will now generate the correct fallback hosts using the environment option."):s.default.deprecated("fallbackHostsUseDefault","fallbackHosts: Ably.Defaults.FALLBACK_HOSTS"),e.fallbackHosts=l.FALLBACK_HOSTS}!0===e.recover&&(s.default.deprecated("{recover: true}","{recover: function(lastConnectionDetails, cb) { cb(true); }}"),e.recover=function(e,t){t(!0)}),"function"==typeof e.recover&&!0===e.closeOnUnload&&(s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),e.transports&&i.arrIn(e.transports,"xhr")&&(s.default.deprecated('transports: ["xhr"]','transports: ["xhr_streaming"]'),i.arrDeleteValue(e.transports,"xhr"),e.transports.push("xhr_streaming")),"queueMessages"in e||(e.queueMessages=!0);var n=e.environment&&String(e.environment).toLowerCase()||l.ENVIRONMENT,c=!n||"production"===n;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=c?l.FALLBACK_HOSTS:h(n));var u=e.restHost||(c?l.REST_HOST:n+"-"+l.REST_HOST),p=function(e,t,n){return e.realtimeHost?e.realtimeHost:e.restHost?(s.default.logAction(s.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+e.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+e.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),e.restHost):t?l.REALTIME_HOST:n+"-"+l.REALTIME_HOST}(e,c,n);i.arrForEach((e.fallbackHosts||[]).concat(u,p),y),e.port=e.port||l.PORT,e.tlsPort=e.tlsPort||l.TLS_PORT,"tls"in e||(e.tls=!0);var d=function(e){var t={};for(var n in l.TIMEOUTS)t[n]=e[n]||l.TIMEOUTS[n];return t}(e);e.useBinaryProtocol="useBinaryProtocol"in e?o.default.Config.supportsBinary&&e.useBinaryProtocol:o.default.Config.preferBinary,e.clientId&&((e.headers=e.headers||{})["X-Ably-ClientId"]=o.default.BufferUtils.base64Encode(o.default.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0),e.promises&&!o.default.Config.Promise&&(s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),e.promises=!1);var f=null,g=e.connectivityCheckUrl;if(e.connectivityCheckUrl){var m=e.connectivityCheckUrl.split("?"),v=m[0],_=m[1];f=_?i.parseQueryString(_):{},-1===v.indexOf("://")&&(v="https://"+v),g=v}return r.__assign(r.__assign({},e),{useBinaryProtocol:"useBinaryProtocol"in e?o.default.Config.supportsBinary&&e.useBinaryProtocol:o.default.Config.preferBinary,realtimeHost:p,restHost:u,maxMessageSize:e.maxMessageSize||l.maxMessageSize,timeouts:d,connectivityCheckParams:f,connectivityCheckUrl:g})}t.getHost=p,t.getPort=d,t.getHttpScheme=f,t.environmentFallbackHosts=h,t.getFallbackHosts=g,t.getHosts=m,t.getAgentString=function(e){var t=l.agent;if(e.agents)for(var n in e.agents)t+=" "+n+"/"+e.agents[n];return t},t.objectifyOptions=v,t.normaliseOptions=_,t.default=l,t.getDefaults=function(e){return Object.assign(l,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importDefault(n(2)),s=r.__importDefault(n(4)),a=r.__importStar(n(1));function c(e){var t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=a.dataSizeBytes(e.data)),t}var u=function(){function e(){}return e.prototype.toJSON=function(){var e=this.encoding,t=this.data;return t&&o.default.BufferUtils.isBuffer(t)&&(arguments.length>0?(e=e?e+"/base64":"base64",t=o.default.BufferUtils.base64Encode(t)):t=o.default.BufferUtils.toBuffer(t)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:e,data:t}},e.prototype.toString=function(){var e="[Message";return this.name&&(e+="; name="+this.name),this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.extras&&(e+="; extras ="+JSON.stringify(this.extras)),this.data&&("string"==typeof this.data?e+="; data="+this.data:o.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+o.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+"]"},e.encrypt=function(e,t,n){var r=e.data,i=e.encoding,s=t.channelCipher;i=i?i+"/":"",o.default.BufferUtils.isBuffer(r)||(r=o.default.BufferUtils.utf8Encode(String(r)),i+="utf-8/"),s.encrypt(r,(function(t,r){t?n(t):(e.data=r,e.encoding=i+"cipher+"+s.algorithm,n(null,e))}))},e.encode=function(t,n,r){var i=t.data;if("string"!=typeof i&&!o.default.BufferUtils.isBuffer(i)&&null!=i){if(!a.isObject(i)&&!a.isArray(i))throw new s.default("Data type is unsupported",40013,400);t.data=JSON.stringify(i),t.encoding=t.encoding?t.encoding+"/json":"json"}null!=n&&n.cipher?e.encrypt(t,n,r):r(null,t)},e.encodeArray=function(t,n,r){for(var o=0,i=0;i<t.length;i++)e.encode(t[i],n,(function(e){e?r(e):++o==t.length&&r(null,t)}))},e.decode=function(e,t){var n=function(e){return e&&e.channelOptions?e:{channelOptions:e,plugins:{},baseEncodedPreviousPayload:void 0}}(t),r=e.data,i=e.encoding;if(i){var a=i.split("/"),c=void 0,u=a.length,l=e.data,p="";try{for(;(c=u)>0;){var d=a[--u].match(/([-\w]+)(\+([\w-]+))?/);if(!d)break;switch(p=d[1]){case"base64":l=o.default.BufferUtils.base64Decode(String(l)),c==a.length&&(r=l);continue;case"utf-8":l=o.default.BufferUtils.utf8Decode(l);continue;case"json":l=JSON.parse(l);continue;case"cipher":if(null!=n.channelOptions&&n.channelOptions.cipher&&n.channelOptions.channelCipher){var f=d[3],h=n.channelOptions.channelCipher;if(f!=h.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");l=h.decrypt(l);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!n.plugins||!n.plugins.vcdiff)throw new s.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"==typeof Uint8Array)throw new s.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var g=n.baseEncodedPreviousPayload;"string"==typeof g&&(g=o.default.BufferUtils.utf8Encode(g)),g=o.default.BufferUtils.toBuffer(g),l=o.default.BufferUtils.toBuffer(l),r=l=o.default.BufferUtils.typedArrayToBuffer(n.plugins.vcdiff.decode(l,g))}catch(e){throw new s.default("Vcdiff delta decode failed with "+e,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(e){var m=e;throw new s.default("Error processing the "+p+" encoding, decoder returned ‘"+m.message+"’",m.code||40013,400)}finally{e.encoding=c<=0?null:a.slice(0,c).join("/"),e.data=l}}n.baseEncodedPreviousPayload=r},e.fromResponseBody=function(t,n,r){r&&(t=a.decodeBody(t,r));for(var o=0;o<t.length;o++){var s=t[o]=e.fromValues(t[o]);try{e.decode(s,n)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromResponseBody()",e.toString())}}return t},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t),s=function(e){if(e&&e.cipher){if(!o.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var t=o.default.Crypto.getCipher(e.cipher);return{cipher:t.cipherParams,channelCipher:t.cipher}}return null!=e?e:{}}(null!=n?n:null);try{e.decode(r,s)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromEncoded()",e.toString())}return r},e.fromEncodedArray=function(t,n){return t.map((function(t){return e.fromEncoded(t,n)}))},e.getMessagesSize=function(e){for(var t,n=0,r=0;r<e.length;r++)n+=(t=e[r]).size||(t.size=c(t));return n},e.serialize=a.encodeBody,e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(4)),s=r.__importDefault(n(9)),a=r.__importDefault(n(14)),c={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},u=[];Object.keys(c).forEach((function(e){u[c[e]]=e}));var l={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},p=Object.keys(l);function d(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n].toString());return"[ "+t.join(", ")+" ]"}l.MODE_ALL=l.PRESENCE|l.PUBLISH|l.SUBSCRIBE|l.PRESENCE_SUBSCRIBE;var f="id channel channelSerial connectionId count msgSerial timestamp".split(" "),h=function(){function e(){var e=this;this.hasFlag=function(t){return(e.flags&l[t])>0}}return e.prototype.setFlag=function(e){return this.flags=this.flags|l[e]},e.prototype.getMode=function(){return this.flags&&this.flags&l.MODE_ALL},e.prototype.encodeModesToFlags=function(e){var t=this;e.forEach((function(e){return t.setFlag(e)}))},e.prototype.decodeModesFromFlags=function(){var t=this,n=[];return e.channelModes.forEach((function(e){t.hasFlag(e)&&n.push(e)})),n.length>0?n:void 0},e.fromValues=function(t){return Object.assign(new e,t)},e.Action=c,e.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],e.ActionName=u,e.serialize=o.encodeBody,e.deserialize=function(t,n){var r=o.decodeBody(t,n);return e.fromDeserialized(r)},e.fromDeserialized=function(t){var n=t.error;n&&(t.error=i.default.fromValues(n));var r=t.messages;if(r)for(var o=0;o<r.length;o++)r[o]=s.default.fromValues(r[o]);var c=t.presence;if(c)for(o=0;o<c.length;o++)c[o]=a.default.fromValues(c[o],!0);return Object.assign(new e,t)},e.stringify=function(t){var n,r="[ProtocolMessage";void 0!==t.action&&(r+="; action="+e.ActionName[t.action]||0);for(var c=0;c<f.length;c++)n=f[c],void 0!==t[n]&&(r+="; "+n+"="+t[n]);if(t.messages&&(r+="; messages="+d(s.default.fromValuesArray(t.messages))),t.presence&&(r+="; presence="+d(a.default.fromValuesArray(t.presence))),t.error&&(r+="; error="+i.default.fromValues(t.error).toString()),t.auth&&t.auth.accessToken&&(r+="; token="+t.auth.accessToken),t.flags&&(r+="; flags="+p.filter(t.hasFlag).join(",")),t.params){var u="";o.forInOwnNonNullProperties(t.params,(function(e){u.length>0&&(u+="; "),u+=e+"="+t.params[e]})),u.length>0&&(r+="; params=["+u+"]")}return r+"]"},e}();t.default=h},function(e,t,n){var r,o,i;e.exports=(r=n(6),i=(o=r).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<65;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)}},r.enc.Base64)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(10)),s=r.__importDefault(n(26)),a=r.__importDefault(n(2)),c=r.__importDefault(n(8)),u=r.__importDefault(n(19)),l=r.__importDefault(n(16)),p=r.__importDefault(n(4)),d=r.__importDefault(n(20)),f=r.__importDefault(n(3));function h(e){return function(e){return!!e.code&&!l.default.isTokenErr(e)&&(!!o.arrIn([80015,80017,80030],e.code)||e.code>=4e4&&e.code<5e4)}(e)?[i.default.fromValues({action:i.default.Action.ERROR,error:e})]:[i.default.fromValues({action:i.default.Action.DISCONNECTED,error:e})]}var g=function(e){function t(t,n,r){var o=e.call(this,t,n,r,!0)||this;return o.onAuthUpdated=function(e){o.authParams={access_token:e.token}},o.stream=!("stream"in r)||r.stream,o.sendRequest=null,o.recvRequest=null,o.pendingCallback=null,o.pendingItems=null,o}return r.__extends(t,e),t.prototype.connect=function(){var e=this;a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","starting"),s.default.prototype.connect.call(this);var t=this.params,n=t.options,r=c.default.getHost(n,t.host),i=c.default.getPort(n),u=n.tls?"https://":"http://";this.baseUri=u+r+":"+i+"/comet/";var l=this.baseUri+"connect";a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","uri: "+l),this.auth.getAuthParams((function(t,n){if(t)e.disconnect(t);else if(!e.isDisposed){e.authParams=n;var r=e.params.getConnectParams(n);"stream"in r&&(e.stream=r.stream),a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+o.toQueryString(r));var i=!1,s=e.recvRequest=e.createRequest(l,null,r,null,e.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV);s.on("data",(function(t){e.recvRequest&&(i||(i=!0,e.emit("preconnect")),e.onData(t))})),s.on("complete",(function(t){e.recvRequest||(t=t||new p.default("Request cancelled",80003,400)),e.recvRequest=null,i||t||(i=!0,e.emit("preconnect")),e.onActivity(),t?t.code?e.onData(h(t)):e.disconnect(t):f.default.Config.nextTick((function(){e.recv()}))})),s.exec()}}))},t.prototype.requestClose=function(){a.default.logAction(a.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},t.prototype.requestDisconnect=function(){a.default.logAction(a.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},t.prototype._requestCloseOrDisconnect=function(e){var t=this,n=e?this.closeUri:this.disconnectUri;if(n){var r=this.createRequest(n,null,this.authParams,null,d.default.REQ_SEND);r.on("complete",(function(n){n&&(a.default.logAction(a.default.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+o.inspectError(n)),t.finish("disconnected",n))})),r.exec()}},t.prototype.dispose=function(){var e=this;a.default.logAction(a.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(a.default.logAction(a.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",u.default.disconnected()),f.default.Config.nextTick((function(){e.emit("disposed")})))},t.prototype.onConnect=function(e){var t;if(!this.isDisposed){var n=null===(t=e.connectionDetails)||void 0===t?void 0:t.connectionKey;s.default.prototype.onConnect.call(this,e);var r=this.baseUri+n;a.default.logAction(a.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+r),this.sendUri=r+"/send",this.recvUri=r+"/recv",this.closeUri=r+"/close",this.disconnectUri=r+"/disconnect"}},t.prototype.send=function(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);var t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)},t.prototype.sendAnyPending=function(){var e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))},t.prototype.sendItems=function(e){var t=this,n=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),d.default.REQ_SEND);n.on("complete",(function(e,n){e&&a.default.logAction(a.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+o.inspectError(e)),t.sendRequest=null,e?e.code?t.onData(h(e)):t.disconnect(e):(n&&t.onData(n),t.pendingItems&&f.default.Config.nextTick((function(){t.sendRequest||t.sendAnyPending()})))})),n.exec()},t.prototype.recv=function(){var e=this;if(!this.recvRequest&&this.isConnected){var t=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV_POLL);t.on("data",(function(t){e.onData(t)})),t.on("complete",(function(t){e.recvRequest=null,e.onActivity(),t?t.code?e.onData(h(t)):e.disconnect(t):f.default.Config.nextTick((function(){e.recv()}))})),t.exec()}},t.prototype.onData=function(e){try{var t=this.decodeResponse(e);if(t&&t.length)for(var n=0;n<t.length;n++)this.onProtocolMessage(i.default.fromDeserialized(t[n]))}catch(e){a.default.logAction(a.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+e.stack)}},t.prototype.encodeRequest=function(e){return JSON.stringify(e)},t.prototype.decodeResponse=function(e){return"string"==typeof e?JSON.parse(e):e},t}(s.default);t.default=g},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(2)),i=r.__importDefault(n(3)),s=r.__importDefault(n(9)),a=r.__importStar(n(1));function c(e){return u.Actions.indexOf(e)}var u=function(){function e(){}return e.prototype.isSynthesized=function(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId},e.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}},e.prototype.toJSON=function(){var e=this.data,t=this.encoding;return e&&i.default.BufferUtils.isBuffer(e)&&(arguments.length>0?(t=t?t+"/base64":"base64",e=i.default.BufferUtils.base64Encode(e)):e=i.default.BufferUtils.toBuffer(e)),{id:this.id,clientId:this.clientId,action:c(this.action),data:e,encoding:t}},e.prototype.toString=function(){var e="[PresenceMessage";return e+="; action="+this.action,this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.data&&("string"==typeof this.data?e+="; data="+this.data:i.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+i.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),e+"]"},e.fromResponseBody=function(t,n,r){var i=[];r&&(t=a.decodeBody(t,r));for(var s=0;s<t.length;s++){var c=i[s]=e.fromValues(t[s],!0);try{e.decode(c,n)}catch(e){o.default.logAction(o.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",e.toString())}}return i},e.fromValues=function(t,n){return n&&(t.action=e.Actions[t.action]),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t,!0);try{e.decode(r,null!=n?n:{})}catch(e){o.default.logAction(o.default.LOG_ERROR,"PresenceMessage.fromEncoded()",e.toString())}return r},e.fromEncodedArray=function(t,n){return t.map((function(t){return e.fromEncoded(t,n)}))},e.Actions=["absent","present","enter","leave","update"],e.encode=s.default.encode,e.decode=s.default.decode,e.getMessagesSize=s.default.getMessagesSize,e}();t.default=u},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importStar(n(4)),a=r.__importDefault(n(2)),c=r.__importDefault(n(8)),u=r.__importDefault(n(20)),l=r.__importDefault(n(3));var p=function(){},d=0,f={},h=void 0!==e&&e.XDomainRequest;var g=function(e){function t(t,n,r,i,s,a,c){var u,l,p=e.call(this)||this;return(r=r||{}).rnd=o.cheapRandStr(),h&&(u=(l=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/))&&Number(l[1]))&&10===u&&!r.envelope&&(r.envelope="json"),p.uri=t+o.toQueryString(r),p.headers=n||{},p.body=i,p.method=c?c.toUpperCase():o.isEmptyArg(i)?"GET":"POST",p.requestMode=s,p.timeouts=a,p.timedOut=!1,p.requestComplete=!1,p.id=String(++d),f[p.id]=p,p}return r.__extends(t,e),t.createRequest=function(e,n,r,i,s,a,u){var l=a||c.default.TIMEOUTS;return new t(e,n,o.copy(r),i,s,l,u)},t.prototype.complete=function(e,t,n,r,o){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,n,r,o),this.dispose())},t.prototype.abort=function(){this.dispose()},t.prototype.exec=function(){var e=this,t=this.headers,n=this.requestMode==u.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,r=this.timer=setTimeout((function(){e.timedOut=!0,c.abort()}),n),i=this.method,c=this.xhr=new XMLHttpRequest,p=t.accept,d=this.body,f="text";for(var h in p?0===p.indexOf("application/x-msgpack")&&(f="arraybuffer"):t.accept="application/json",d&&(t["content-type"]||(t["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof d&&(d=JSON.stringify(d)),c.open(i,this.uri,!0),c.responseType=f,"authorization"in t&&(c.withCredentials=!0),t)c.setRequestHeader(h,t[h]);var g,m,y,v=function(t,n,r,o){var i,c=n+" (event type: "+t.type+")";(null===(i=null==e?void 0:e.xhr)||void 0===i?void 0:i.statusText)&&(c+=", current statusText is "+e.xhr.statusText),a.default.logAction(a.default.LOG_ERROR,"Request.on"+t.type+"()",c),e.complete(new s.PartialErrorInfo(c,r,o))};c.onerror=function(e){v(e,"XHR error occurred",null,400)},c.onabort=function(t){e.timedOut?v(t,"Request aborted due to request timeout expiring",null,408):v(t,"Request cancelled",null,400)},c.ontimeout=function(e){v(e,"Request timed out",null,408)};var _=0,b=!1,E=function(){var n;try{var r=function(e){return e.getResponseHeader&&e.getResponseHeader("content-type")}(c);if(r?r.indexOf("application/json")>=0:"text"==c.responseType){var i="arraybuffer"===c.responseType?l.default.BufferUtils.utf8Decode(c.response):String(c.responseText);n=i.length?JSON.parse(i):i,b=!0}else n=c.response;void 0!==n.response?(m=n.statusCode,y=m<400,t=n.headers,n=n.response):t=function(e){for(var t=o.trim(e.getAllResponseHeaders()).split("\r\n"),n={},r=0;r<t.length;r++){var i=t[r].split(":").map(o.trim);n[i[0].toLowerCase()]=i[1]}return n}(c)}catch(t){return void e.complete(new s.PartialErrorInfo("Malformed response body from server: "+t.message,null,400))}if(y||o.isArray(n))e.complete(null,n,t,b,m);else{var a=function(e,t){if(function(e,t){return o.arrIn(o.allToLowerCase(o.keysArray(t)),"x-ably-errorcode")}(0,t))return e.error&&s.default.fromValues(e.error)}(n,t);a||(a=new s.PartialErrorInfo("Error response received from server: "+m+" body was: "+l.default.Config.inspect(n),null,m)),e.complete(a,n,t,b,m)}};function S(){for(var e,t,n=c.responseText,r=n.length-1;_<r&&(e=n.indexOf("\n",_))>-1;)t=n.slice(_,e),_=e+1,w(t)}var w=function(t){try{t=JSON.parse(t)}catch(t){return void e.complete(new s.PartialErrorInfo("Malformed response body from server: "+t.message,null,400))}e.emit("data",t)};c.onreadystatechange=function(){var t=c.readyState;t<3||0!==c.status&&(void 0===m&&(1223===(m=c.status)&&(m=204),clearTimeout(r),y=m<400,204!=m?g=e.requestMode==u.default.REQ_RECV_STREAM&&y&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(c):e.complete(null,null,null,null,m)),3==t&&g?S():4==t&&(g?(S(),e.streamComplete=!0,l.default.Config.nextTick((function(){e.complete()}))):E()))},c.send(d)},t.prototype.dispose=function(){var e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=p,this.xhr=null;var t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete f[this.id]},t}(i.default);t.default=g}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(2)),i=r.__importStar(n(1)),s=r.__importDefault(n(22)),a=r.__importDefault(n(4)),c=r.__importDefault(n(45)),u=n(11),l=r.__importDefault(n(17)),p=r.__importDefault(n(24)),d=r.__importDefault(n(3)),f=Math.pow(2,17);function h(){}function g(e){return i.isErrorInfoOrPartialErrorInfo(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new a.default(i.inspectError(e),e.code||40170,e.statusCode||401)}var m=function(e,t){if(d.default.Config.createHmac){var n=d.default.Config.createHmac("SHA256",t);return n.update(e),n.digest("base64")}return(0,u.stringify)((0,c.default)(e,t))};function y(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));var t=Object.create(null),n=i.keysArray(e,!0);if(!n)return"";n.sort();for(var r=0;r<n.length;r++)t[n[r]]=e[n[r]].sort();return JSON.stringify(t)}function v(e){if(e.authCallback)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){var t="authOptions must include valid authentication parameters";throw o.default.logAction(o.default.LOG_ERROR,"Auth()",t),new Error(t)}o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with supplied token only")}}var _=0,b=function(){function e(e,t){if(this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,function(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}(t)){if(t.key&&!m){var n="client-side token request signing not supported";throw o.default.logAction(o.default.LOG_ERROR,"Auth()",n),new Error(n)}(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(t)&&o.default.logAction(o.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),v(this.authOptions)}else{if(!t.key)throw n="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)",o.default.logAction(o.default.LOG_ERROR,"Auth()",n),new a.default(n,40160,401);o.default.logAction(o.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}return e.prototype.authorize=function(e,t,n){var r,s=this;if("function"!=typeof e||n?"function"!=typeof t||n?r=t:(n=t,r=null):(n=e,r=e=null),!n&&this.client.options.promises)return i.promisify(this,"authorize",arguments);if(r&&r.key&&this.authOptions.key!==r.key)throw new a.default("Unable to update auth options with incompatible key",40102,401);r&&"force"in r&&(o.default.logAction(o.default.LOG_ERROR,"Auth.authorize","Deprecation warning: specifying {force: true} in authOptions is no longer necessary, authorize() now always gets a new token. Please remove this, as in version 1.0 and later, having a non-null authOptions will overwrite stored library authOptions, which may not be what you want"),i.isOnlyPropIn(r,"force")&&(r=null)),this._forceNewToken(e,r,(function(e,t){if(e)return s.client.connection&&e.statusCode===p.default.Forbidden&&s.client.connection.connectionManager.actOnErrorFromAuthorize(e),void(null==n||n(e));s.client.connection?s.client.connection.connectionManager.onAuthUpdated(t,n||h):null==n||n(null,t)}))},e.prototype.authorise=function(e,t,n){o.default.deprecated("Auth.authorise","Auth.authorize"),this.authorize(e,t,n)},e.prototype._forceNewToken=function(e,t,n){var r=this;this.tokenDetails=null,this._saveTokenOptions(e,t),v(this.authOptions),this._ensureValidAuthCredentials(!0,(function(e,t){delete r.tokenParams.timestamp,delete r.authOptions.queryTime,n(e,t)}))},e.prototype.requestToken=function(e,t,n){var r=this;if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return i.promisify(this,"requestToken",arguments);t=t||this.authOptions,e=e||i.copy(this.tokenParams);var s,c=n||h,u=this.client;if(t.authCallback)o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),s=t.authCallback;else if(t.authUrl)o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),s=function(e,n){var s,c=i.mixin({accept:"application/json, text/plain"},t.authHeaders),p=t.authMethod&&"post"===t.authMethod.toLowerCase(),h=t.authUrl.indexOf("?");h>-1&&(s=i.parseQueryString(t.authUrl.slice(h)),t.authUrl=t.authUrl.slice(0,h),p||(t.authParams=i.mixin(s,t.authParams)));var g=i.mixin({},t.authParams||{},e),m=function(e,t,r,s){var c;if(e?o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+i.inspectError(e)):(c=r["content-type"],o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+c+"; body: "+i.inspectBody(t))),e||s)return n(e,t);if(d.default.BufferUtils.isBuffer(t)&&(t=t.toString()),c){var u=c.indexOf("application/json")>-1,l=c.indexOf("text/plain")>-1||c.indexOf("application/jwt")>-1;if(u||l){if(u){if(t.length>f)return void n(new a.default("authUrl response exceeded max permitted length",40170,401));try{t=JSON.parse(t)}catch(e){return void n(new a.default("Unexpected error processing authURL response; err = "+e.message,40170,401))}}n(null,t,c)}else n(new a.default("authUrl responded with unacceptable content-type "+c+", should be either text/plain, application/jwt or application/json",40170,401))}else n(new a.default("authUrl response is missing a content-type header",40170,401))};if(o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+t.authUrl+"; Params: "+JSON.stringify(g)+"; method: "+(p?"POST":"GET")),p){var y=c||{};y["content-type"]="application/x-www-form-urlencoded";var v=i.toQueryString(g).slice(1);r.client.http.doUri(l.default.Post,u,t.authUrl,y,v,s,m)}else r.client.http.doUri(l.default.Get,u,t.authUrl,c||{},null,g,m)};else{if(!t.key)return o.default.logAction(o.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),void c(new a.default("Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)",40171,403));o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),s=function(e,n){r.createTokenRequest(e,t,n)}}"capability"in e&&(e.capability=y(e.capability));var p=!1,m=this.client.options.timeouts.realtimeRequestTimeout,v=setTimeout((function(){p=!0;var e="Token request callback timed out after "+m/1e3+" seconds";o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",e),c(new a.default(e,40170,401))}),m);s(e,(function(e,n,s){if(!p){if(clearTimeout(v),e)return o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+i.inspectError(e)),void c(g(e));if("string"!=typeof n){if("object"!=typeof n){var d="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof n;return o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",d),void c(new a.default(d,40170,401))}var h=JSON.stringify(n).length;if(h>f&&!t.suppressMaxLengthCheck)c(new a.default("Token request/details object exceeded max permitted stringified size (was "+h+" bytes)",40170,401));else if("issued"in n)c(null,n);else{if(!("keyName"in n))return d="Expected token request callback to call back with a token string, token request object, or token details object",o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",d),void c(new a.default(d,40170,401));var m,y,_,b;y=function(e,t,n,r){if(e)return o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+i.inspectError(e)),void c(g(e));r||(t=JSON.parse(t)),o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","token received"),c(null,t)},_="/keys/"+(m=n).keyName+"/requestToken",b=i.defaultPostHeaders(r.client.options),t.requestHeaders&&i.mixin(b,t.requestHeaders),o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+_+"; Token params: "+JSON.stringify(m)),r.client.http.do(l.default.Post,u,(function(e){return u.baseUri(e)+_}),b,JSON.stringify(m),null,y)}}else 0===n.length?c(new a.default("Token string is empty",40170,401)):n.length>f?c(new a.default("Token string exceeded max permitted length (was "+n.length+" bytes)",40170,401)):"undefined"===n||"null"===n?c(new a.default("Token string was literal null/undefined",40170,401)):"{"!==n[0]||s&&s.indexOf("application/jwt")>-1?c(null,{token:n}):c(new a.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401))}}))},e.prototype.createTokenRequest=function(e,t,n){if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return i.promisify(this,"createTokenRequest",arguments);t=t||this.authOptions,e=e||i.copy(this.tokenParams);var r=t.key;if(r){var s=r.split(":"),c=s[0],u=s[1];if(u)if(""!==e.clientId){"capability"in e&&(e.capability=y(e.capability));var l,p=i.mixin({keyName:c},e),d=e.clientId||"",f=e.ttl||"",h=e.capability||"";l=function(){var e=p.nonce||(p.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),t=p.timestamp,r=p.keyName+"\n"+f+"\n"+h+"\n"+d+"\n"+t+"\n"+e+"\n";p.mac=p.mac||m(r,u),o.default.logAction(o.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),n(null,p)},p.timestamp?l():this.getTimestamp(t&&t.queryTime,(function(e,t){e?n(e):(p.timestamp=t,l())}))}else n(new a.default("clientId can’t be an empty string",40012,400));else n(new a.default("Invalid key specified",40101,403))}else n(new a.default("No key specified",40101,403))},e.prototype.getAuthParams=function(e){"basic"==this.method?e(null,{key:this.key}):this._ensureValidAuthCredentials(!1,(function(t,n){if(t)e(t);else{if(!n)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{access_token:n.token})}}))},e.prototype.getAuthHeaders=function(e){"basic"==this.method?e(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,(function(t,n){if(t)e(t);else{if(!n)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{authorization:"Bearer "+i.toBase64(n.token)})}}))},e.prototype.getTimestamp=function(e,t){this.isTimeOffsetSet()||!e&&!this.authOptions.queryTime?t(null,this.getTimestampUsingOffset()):this.client.time(t)},e.prototype.getTimestampUsingOffset=function(){return i.now()+(this.client.serverTimeOffset||0)},e.prototype.isTimeOffsetSet=function(){return null!==this.client.serverTimeOffset},e.prototype._saveBasicOptions=function(e){this.method="basic",this.key=e.key,this.basicKey=i.toBase64(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)},e.prototype._saveTokenOptions=function(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"==typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)},e.prototype._ensureValidAuthCredentials=function(e,t){var n=this,r=this.tokenDetails;if(r){if(this._tokenClientIdMismatch(r.clientId))return void t(new a.default("Mismatch between clientId in token ("+r.clientId+") and current clientId ("+this.clientId+")",40102,403));if(!this.isTimeOffsetSet()||!r.expires||r.expires>=this.getTimestampUsingOffset())return o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+r.expires),void t(null,r);o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=s.default.create())).push(t),null===this.currentTokenRequestId||e){var i=this.currentTokenRequestId=_++;this.requestToken(this.tokenParams,this.authOptions,(function(e,t){if(n.currentTokenRequestId>i)o.default.logAction(o.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");else{n.currentTokenRequestId=null;var r=n.waitingForTokenRequest||h;n.waitingForTokenRequest=null,e?r(e):r(null,n.tokenDetails=t)}}))}},e.prototype._userSetClientId=function(e){if("string"!=typeof e&&null!==e)throw new a.default("clientId must be either a string or null",40012,400);if("*"===e)throw new a.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var t=this._uncheckedSetClientId(e);if(t)throw t},e.prototype._uncheckedSetClientId=function(e){if(this._tokenClientIdMismatch(e)){var t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,n=new a.default(t,40102,401);return o.default.logAction(o.default.LOG_ERROR,"Auth._uncheckedSetClientId()",t),n}return this.clientId=this.tokenParams.clientId=e,null},e.prototype._tokenClientIdMismatch=function(e){return!(!this.clientId||"*"===this.clientId||!e||"*"===e||this.clientId===e)},e.isTokenErr=function(e){return e.code&&e.code>=40140&&e.code<40150},e}();t.default=b},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpPaginatedResponse=t.PaginatedResult=void 0;var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),s=r.__importDefault(n(25)),a=function(){function e(e,t,n,r,o,i){this.rest=e,this.path=t,this.headers=n,this.envelope=null!=r?r:null,this.bodyHandler=o,this.useHttpPaginatedResponse=i||!1}return e.prototype.get=function(e,t){var n=this;s.default.get(this.rest,this.path,this.headers,e,this.envelope,(function(e,r,o,i,s){n.handlePage(e,r,o,i,s,t)}))},e.prototype.delete=function(e,t){var n=this;s.default.delete(this.rest,this.path,this.headers,e,this.envelope,(function(e,r,o,i,s){n.handlePage(e,r,o,i,s,t)}))},e.prototype.post=function(e,t,n){var r=this;s.default.post(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,o,i,s){n&&r.handlePage(e,t,o,i,s,n)}))},e.prototype.put=function(e,t,n){var r=this;s.default.put(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,o,i,s){n&&r.handlePage(e,t,o,i,s,n)}))},e.prototype.patch=function(e,t,n){var r=this;s.default.patch(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,o,i,s){n&&r.handlePage(e,t,o,i,s,n)}))},e.prototype.handlePage=function(e,t,n,r,s,a){if(e&&function(e,t,n){return!(n&&(t||"number"==typeof e.code))}(e,t,this.useHttpPaginatedResponse))return i.default.logAction(i.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+o.inspectError(e)),void(null==a||a(e));var l,p,d;try{l=this.bodyHandler(t,n||{},r)}catch(t){return void(null==a||a(e||t))}n&&(p=n.Link||n.link)&&(d=function(e){"string"==typeof e&&(e=e.split(","));for(var t,n={},r=0;r<e.length;r++){var i=e[r].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(i){var s=(void 0,(t=i[1].match(/^\.\/(\w+)\?(.*)$/))&&t[2]&&o.parseQueryString(t[2]));s&&(n[i[2]]=s)}}return n}(p)),this.useHttpPaginatedResponse?a(null,new u(this,l,n||{},s,d,e)):a(null,new c(this,l,d))},e}(),c=function(){function e(e,t,n){var r=this;this.resource=e,this.items=t;var i=this;n&&("first"in n&&(this.first=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"first",[]);i.get(n.first,e)}),"current"in n&&(this.current=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"current",[]);i.get(n.current,e)}),this.next=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"next",[]);"next"in n?i.get(n.next,e):e(null)},this.hasNext=function(){return"next"in n},this.isLast=function(){var e;return!(null===(e=r.hasNext)||void 0===e?void 0:e.call(r))})}return e.prototype.get=function(e,t){var n=this.resource;s.default.get(n.rest,n.path,n.headers,e,n.envelope,(function(e,r,o,i,s){n.handlePage(e,r,o,i,s,t)}))},e}();t.PaginatedResult=c;var u=function(e){function t(t,n,r,o,i,s){var a=e.call(this,t,n,i)||this;return a.statusCode=o,a.success=o<300&&o>=200,a.headers=r,a.errorCode=s&&s.code,a.errorMessage=s&&s.message,a}return r.__extends(t,e),t.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},t}(c);t.HttpPaginatedResponse=u,t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRetriable=void 0;var r=n(0).__importDefault(n(4)),o={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},i={disconnected:function(){return r.default.fromValues({statusCode:400,code:o.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return r.default.fromValues({statusCode:400,code:o.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return r.default.fromValues({statusCode:400,code:o.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return r.default.fromValues({statusCode:400,code:o.CLOSING,message:"Connection closing"})},closed:function(){return r.default.fromValues({statusCode:400,code:o.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return r.default.fromValues({statusCode:500,code:o.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return r.default.fromValues({statusCode:500,code:o.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};t.isRetriable=function(e){return!e.statusCode||!e.code||e.statusCode>=500||Object.values(o).includes(e.code)},t.default=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.REQ_SEND=0]="REQ_SEND",e[e.REQ_RECV=1]="REQ_RECV",e[e.REQ_RECV_POLL=2]="REQ_RECV_POLL",e[e.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"}(r||(r={})),t.default=r},function(e,t,n){var r;e.exports=(r=n(6),n(5),n(58),n(11),n(40),n(32),n(23),n(27),n(28),n(59),n(60),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(2)),o=function(){function e(e){this.members=e||[]}return e.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=this.members;n<o.length;n++){var i=o[n];if(i)try{i.apply(void 0,e)}catch(e){r.default.logAction(r.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+e+"; stack = "+e.stack)}}},e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.members).push.apply(e,t)},e.create=function(t){var n=new e(t);return Object.assign((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.call.apply(n,e)}),{push:function(e){return n.push(e)}})},e}();t.default=o},function(e,t,n){var r,o,i;e.exports=(o=(r=n(6)).lib.Base,i=r.enc.Utf8,void(r.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,u=0;u<n;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.isSuccessCode=void 0,function(e){e[e.Success=200]="Success",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestTimeout=408]="RequestTimeout",e[e.InternalServerError=500]="InternalServerError"}(r||(r={})),t.isSuccessCode=function(e){return e>=r.Success&&e<r.BadRequest},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),s=r.__importDefault(n(2)),a=r.__importDefault(n(16)),c=r.__importDefault(n(17)),u=n(4);function l(e,t,n,r,o){e.http.supportsAuthHeaders?e.auth.getAuthHeaders((function(e,s){e?r(e):o(i.mixin(s,t),n)})):e.auth.getAuthParams((function(e,s){e?r(e):o(t,i.mixin(s,n))}))}function p(e){var t=[];if(e)for(var n in e)t.push(n+"="+e[n]);return t.join("&")}function d(e,t){return e+(t?"?":"")+p(t)}var f=function(){function e(){}return e.get=function(t,n,r,o,i,s){e.do(c.default.Get,t,n,null,r,o,i,s)},e.delete=function(t,n,r,o,i,s){e.do(c.default.Delete,t,n,null,r,o,i,s)},e.post=function(t,n,r,o,i,s,a){e.do(c.default.Post,t,n,r,o,i,s,a)},e.patch=function(t,n,r,o,i,s,a){e.do(c.default.Patch,t,n,r,o,i,s,a)},e.put=function(t,n,r,o,i,s,a){e.do(c.default.Put,t,n,r,o,i,s,a)},e.do=function(e,t,n,r,c,f,h,g){s.default.shouldLog(s.default.LOG_MICRO)&&(g=function(e,t,n,r){return function(a,c,u,l,f){a?s.default.logAction(s.default.LOG_MICRO,"Resource."+t+"()","Received Error; "+d(n,r)+"; Error: "+i.inspectError(a)):s.default.logAction(s.default.LOG_MICRO,"Resource."+t+"()","Received; "+d(n,r)+"; Headers: "+p(u)+"; StatusCode: "+f+"; Body: "+(o.default.BufferUtils.isBuffer(c)?c.toString():c)),e&&e(a,c,u,l,f)}}(g,e,n,f)),h&&(g=g&&function(e,t){return function(n,r,o,s,a){if(!n||r){if(!s)try{r=i.decodeBody(r,t)}catch(t){return void(i.isErrorInfoOrPartialErrorInfo(t)?e(t):e(new u.PartialErrorInfo(i.inspectError(t),null)))}if(r){var c=r,l=c.statusCode,p=c.response,d=c.headers;if(void 0!==l){if(l<200||l>=300){var f=p&&p.error||n;return f||((f=new Error("Error in unenveloping "+r)).statusCode=l),void e(f,p,d,!0,l)}e(n,p,d,!0,l)}else e(n,r,o,!0,a)}else e(new u.PartialErrorInfo("unenvelope(): Response body is missing",null))}else e(n)}}(g,h),(f=f||{}).envelope=h),l(t,c,f,g,(function c(u,p){var f;if(s.default.shouldLog(s.default.LOG_MICRO)&&s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending; "+d(n,p)),s.default.shouldLog(s.default.LOG_MICRO)){var h=r;if((null===(f=u["content-type"])||void 0===f?void 0:f.indexOf("msgpack"))>0)try{h=o.default.Config.msgpack.decode(r)}catch(t){s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+i.inspectError(t))}s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending; "+d(n,p)+"; Body: "+h)}t.http.do(e,t,n,u,r,p,(function(e,n,r,o,i){e&&a.default.isTokenErr(e)?t.auth.authorize(null,null,(function(e){e?g(e):l(t,r,p,g,c)})):g(e,n,r,o,i)}))}))},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(19)),u=r.__importDefault(n(4)),l=r.__importDefault(n(3)),p=o.default.Action,d=o.default.fromValues({action:p.CLOSE}),f=o.default.fromValues({action:p.DISCONNECT}),h=function(e){function t(t,n,r,o){var i=e.call(this)||this;return o&&(r.format=void 0,r.heartbeats=!0),i.connectionManager=t,t.registerProposedTransport(i),i.auth=n,i.params=r,i.timeouts=r.options.timeouts,i.format=r.format,i.isConnected=!1,i.isFinished=!1,i.isDisposed=!1,i.maxIdleInterval=null,i.idleTimer=null,i.lastActivity=null,i}return r.__extends(t,e),t.prototype.connect=function(){},t.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",c.default.closed())},t.prototype.disconnect=function(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||c.default.disconnected())},t.prototype.fail=function(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||c.default.failed())},t.prototype.finish=function(e,t){var n;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!==(n=this.idleTimer)&&void 0!==n?n:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())},t.prototype.onProtocolMessage=function(e){switch(a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+o.default.stringify(e)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case p.HEARTBEAT:a.default.logAction(a.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case p.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case p.CLOSED:this.onClose(e);break;case p.DISCONNECTED:this.onDisconnect(e);break;case p.ACK:this.emit("ack",e.msgSerial,e.count);break;case p.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case p.SYNC:this.connectionManager.onChannelMessage(e,this);break;case p.ACTIVATE:break;case p.AUTH:this.auth.authorize((function(e){e&&a.default.logAction(a.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+i.inspectError(e))}));break;case p.ERROR:if(a.default.logAction(a.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+l.default.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}this.connectionManager.onChannelMessage(e,this);break;default:this.connectionManager.onChannelMessage(e,this)}},t.prototype.onConnect=function(e){if(this.isConnected=!0,!e.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())},t.prototype.onDisconnect=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onDisconnect()","err = "+i.inspectError(t)),this.finish("disconnected",t)},t.prototype.onFatalError=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onFatalError()","err = "+i.inspectError(t)),this.finish("failed",t)},t.prototype.onClose=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onClose()","err = "+i.inspectError(t)),this.finish("closed",t)},t.prototype.requestClose=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.requestClose()",""),this.send(d)},t.prototype.requestDisconnect=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(f)},t.prototype.ping=function(e){var t={action:o.default.Action.HEARTBEAT};e&&(t.id=e),this.send(o.default.fromValues(t))},t.prototype.dispose=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},t.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=i.now(),this.setIdleTimer(this.maxIdleInterval+100))},t.prototype.setIdleTimer=function(e){var t=this;this.idleTimer||(this.idleTimer=setTimeout((function(){t.onIdleTimerExpire()}),e))},t.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var e=i.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){var n="No activity seen from realtime in "+e+"ms; assuming connection has dropped";a.default.logAction(a.default.LOG_ERROR,"Transport.onIdleTimerExpire()",n),this.disconnect(new u.default(n,80003,408))}else this.setIdleTimer(t+100)},t.tryConnect=function(e,t,n,r,o){var i,s=new e(t,n,r),c=function(e){clearTimeout(i),o({event:this.event,error:e})},l=t.options.timeouts.realtimeRequestTimeout;i=setTimeout((function(){s.off(["preconnect","disconnected","failed"]),s.dispose(),c.call({event:"disconnected"},new u.default("Timeout waiting for transport to indicate itself viable",5e4,500))}),l),s.on(["failed","disconnected"],c),s.on("preconnect",(function(){a.default.logAction(a.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+s),clearTimeout(i),s.off(["failed","disconnected"],c),o(null,s)})),s.connect()},t}(s.default);t.default=h},function(e,t,n){var r,o,i,s,a,c,u,l;e.exports=(l=n(6),n(40),n(23),i=(o=(r=l).lib).Base,s=o.WordArray,c=(a=r.algo).MD5,u=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,o=r.hasher.create(),i=s.create(),a=i.words,c=r.keySize,u=r.iterations;a.length<c;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var l=1;l<u;l++)n=o.finalize(n),o.reset();i.concat(n)}return i.sigBytes=4*c,i}}),r.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},l.EvpKDF)},function(e,t,n){var r,o,i,s,a,c,u,l,p,d,f,h,g,m,y,v,_,b,E;e.exports=(r=n(6),n(27),void(r.lib.Cipher||(o=r,i=o.lib,s=i.Base,a=i.WordArray,c=i.BufferedBlockAlgorithm,u=o.enc,u.Utf8,l=u.Base64,p=o.algo.EvpKDF,d=i.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?E:_}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()}),i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=o.mode={},h=i.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=f.CBC=function(){var e=h.extend();function t(e,t,n){var r,o=this._iv;o?(r=o,this._iv=void 0):r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize;t.call(this,e,n,o),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+o)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,i=e.slice(n,n+o);r.decryptBlock(e,n),t.call(this,e,n,o),this._prevBlock=i}}),e}(),m=(o.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(o);var c=a.create(i,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:g,padding:m}),reset:function(){var e;d.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),y=i.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),y.create({ciphertext:n,salt:t})}},_=i.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),i=o.finalize(t),s=o.cfg;return y.create({ciphertext:i,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(o.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var o=p.create({keySize:t+n}).compute(e,r),i=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,y.create({key:o,iv:i,salt:r})}},E=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:b}),encrypt:function(e,t,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=o.iv;var i=_.encrypt.call(this,e,t,o.key,r);return i.mixIn(o),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=o.iv,_.decrypt.call(this,e,t,o.key,r)}}))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.createRequest=void 0;var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(12)),s=r.__importDefault(n(3)),a=r.__importDefault(n(7)),c=n(4),u=r.__importDefault(n(8)),l=r.__importDefault(n(2)),p=r.__importDefault(n(20)),d=o.getGlobalObject(),f=function(){},h=d._ablyjs_jsonp={};h._=function(e){return h["_"+e]||f};var g=1,m="jsonp";function y(e,t,n,r,i,s,a){return s=s||u.default.TIMEOUTS,new _(void 0,e,t,o.copy(n),r,i,s,a)}t.createRequest=y;var v=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.shortName=m,r.stream=!1,o}return r.__extends(t,e),t.isAvailable=function(){return s.default.Config.jsonpSupported&&s.default.Config.allowComet},t.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},t.prototype.createRequest=function(e,t,n,r,o,i,s){return y(e,t,n,r,o,i=(null==this?void 0:this.timeouts)||i||u.default.TIMEOUTS,s)},t}(i.default),_=function(e){function t(t,n,r,i,s,a,c,u){var l=e.call(this)||this;return void 0===t&&(t=g++),l.id=t,l.uri=n,l.params=i||{},l.params.rnd=o.cheapRandStr(),r&&(r["X-Ably-Version"]&&(l.params.v=r["X-Ably-Version"]),r["X-Ably-Lib"]&&(l.params.lib=r["X-Ably-Lib"])),l.body=s,l.method=u,l.requestMode=a,l.timeouts=c,l.requestComplete=!1,l}return r.__extends(t,e),t.prototype.exec=function(){var e=this,t=this.id,n=this.body,r=this.method,i=this.uri,a=this.params;a.callback="_ablyjs_jsonp._("+t+")",a.envelope="jsonp",n&&(a.body=n),r&&"get"!==r&&(a.method=r);var u=this.script=document.createElement("script"),d=i+o.toQueryString(a);u.src=d,u.src.split("/").slice(-1)[0]!==d.split("/").slice(-1)[0]&&l.default.logAction(l.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),u.async=!0,u.type="text/javascript",u.charset="UTF-8",u.onerror=function(t){e.complete(new c.PartialErrorInfo("JSONP script error (event: "+s.default.Config.inspect(t)+")",null,400))},h["_"+t]=function(t){if(t.statusCode){var n=t.response;if(204==t.statusCode)e.complete(null,null,null,t.statusCode);else if(n)if(t.statusCode<400||o.isArray(n))e.complete(null,n,t.headers,t.statusCode);else{var r=n.error||new c.PartialErrorInfo("Error response received from server",null,t.statusCode);e.complete(r)}else e.complete(new c.PartialErrorInfo("Invalid server response: no envelope detected",null,500))}else e.complete(null,t)};var f=this.requestMode==p.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),f);var g=document.getElementsByTagName("head")[0];g.insertBefore(u,g.firstChild)},t.prototype.complete=function(e,t,n,r){if(n=n||{},!this.requestComplete){this.requestComplete=!0;var o=void 0;t&&(o="string"==typeof t?"text/plain":"application/json",n["content-type"]=o,this.emit("data",t)),this.emit("complete",e,t,n,!0,r),this.dispose()}},t.prototype.abort=function(){this.dispose()},t.prototype.dispose=function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null);var t=this.script;t.parentNode&&t.parentNode.removeChild(t),delete h[this.id],this.emit("disposed")},t}(a.default);t.Request=_,t.default=function(e){return d.JSONPTransport=v,v.isAvailable()&&(e.supportedTransports[m]=v),v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),s=r.__importDefault(n(8)),a=r.__importDefault(n(16)),c=r.__importDefault(n(46)),u=r.__importDefault(n(18)),l=r.__importDefault(n(33)),p=r.__importDefault(n(4)),d=r.__importDefault(n(49)),f=r.__importDefault(n(17)),h=r.__importDefault(n(3)),g=r.__importDefault(n(9)),m=r.__importDefault(n(14)),y=function(){},v=function(){function e(e){if(!e){var t="no options provided";throw i.default.logAction(i.default.LOG_ERROR,"Rest()",t),new Error(t)}var n=s.default.objectifyOptions(e);n.log&&i.default.setLog(n.log.level,n.log.handler),i.default.logAction(i.default.LOG_MICRO,"Rest()","initialized with clientOptions "+h.default.Config.inspect(e));var r=this.options=s.default.normaliseOptions(n);if(r.key){var o=r.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!o)throw t="invalid key parameter",i.default.logAction(i.default.LOG_ERROR,"Rest()",t),new p.default(t,40400,404);r.keyName=o[1],r.keySecret=o[2]}if("clientId"in r){if("string"!=typeof r.clientId&&null!==r.clientId)throw new p.default("clientId must be either a string or null",40012,400);if("*"===r.clientId)throw new p.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}i.default.logAction(i.default.LOG_MINOR,"Rest()","started; version = "+s.default.version),this.baseUri=this.authority=function(e){return s.default.getHttpScheme(r)+e+":"+s.default.getPort(r,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new h.default.Http(r),this.auth=new a.default(this,r),this.channels=new _(this),this.push=new c.default(this)}return e.prototype.stats=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.options.promises)return o.promisify(this,"stats",[e]);t=y}var n=o.defaultGetHeaders(this.options),r=this.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.http.supportsLinkHeaders?void 0:r;this.options.headers&&o.mixin(n,this.options.headers),new u.default(this,"/stats",n,i,(function(e,t,n){for(var r=n?e:JSON.parse(e),o=0;o<r.length;o++)r[o]=d.default.fromValues(r[o]);return r})).get(e,t)},e.prototype.time=function(e,t){var n=this;if(void 0===t)if("function"==typeof e)t=e,e=null;else if(this.options.promises)return o.promisify(this,"time",[e]);var r=t||y,i=o.defaultGetHeaders(this.options);this.options.headers&&o.mixin(i,this.options.headers),this.http.do(f.default.Get,this,(function(e){return n.authority(e)+"/time"}),i,null,e,(function(e,t,i,s){if(e)r(e);else{s||(t=JSON.parse(t));var a=t[0];a?(n.serverTimeOffset=a-o.now(),r(null,a)):r(new p.default("Internal error (unexpected result type from GET /time)",5e4,500))}}))},e.prototype.request=function(e,t,n,r,i,s){var a=this.options.useBinaryProtocol,c=a?h.default.Config.msgpack.encode:JSON.stringify,l=a?h.default.Config.msgpack.decode:JSON.parse,d=a?o.Format.msgpack:o.Format.json,f=this.http.supportsLinkHeaders?void 0:d;n=n||{};var g=e.toLowerCase(),m="get"==g?o.defaultGetHeaders(this.options,d):o.defaultPostHeaders(this.options,d);if(void 0===s){if(this.options.promises)return o.promisify(this,"request",[e,t,n,r,i]);s=y}"string"!=typeof r&&(r=c(r)),this.options.headers&&o.mixin(m,this.options.headers),i&&o.mixin(m,i);var v=new u.default(this,t,m,f,(function(e,t,n){return o.ensureArray(n?e:l(e))}),!0);if(!o.arrIn(h.default.Http.methods,g))throw new p.default("Unsupported method "+g,40500,405);o.arrIn(h.default.Http.methodsWithBody,g)?v[g](n,r,s):v[g](n,s)},e.prototype.setLog=function(e){i.default.setLog(e.level,e.handler)},e.Promise=function(t){return(t=s.default.objectifyOptions(t)).promises=!0,new e(t)},e.Callbacks=e,e.Platform=h.default,e.Message=g.default,e.PresenceMessage=m.default,e}(),_=function(){function e(e){this.rest=e,this.all=Object.create(null)}return e.prototype.get=function(e,t){e=String(e);var n=this.all[e];return n?t&&n.setOptions(t):this.all[e]=n=new l.default(this.rest,e,t),n},e.prototype.release=function(e){delete this.all[String(e)]},e}();t.default=v},function(e,t,n){e.exports=n(6).enc.Utf8},function(e,t,n){var r;e.exports=(r=n(6),function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(a[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++}();var u=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5],p=n[6],d=n[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var h=u[f-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=u[f-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[f]=g+u[f-7]+y+u[f-16]}var v=r&o^r&i^o&i,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&p)+c[f]+u[f];d=p,p=l,l=a,a=s+b|0,s=i,i=o,o=r,r=b+(_+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+p|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importDefault(n(2)),a=r.__importDefault(n(34)),c=r.__importDefault(n(9)),u=r.__importDefault(n(4)),l=r.__importDefault(n(18)),p=r.__importDefault(n(25)),d=r.__importDefault(n(3));function f(){}function h(e){var t=e||{};if(t.cipher){if(!d.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var n=d.default.Crypto.getCipher(t.cipher);t.cipher=n.cipherParams,t.channelCipher=n.cipher}else"cipher"in t&&(t.cipher=void 0,t.channelCipher=null);return t}var g=function(e){function t(t,n,r){var o=e.call(this)||this;return s.default.logAction(s.default.LOG_MINOR,"Channel()","started; name = "+n),o.rest=t,o.name=n,o.basePath="/channels/"+encodeURIComponent(n),o.presence=new a.default(o),o.channelOptions=h(r),o}return r.__extends(t,e),t.prototype.setOptions=function(e){this.channelOptions=h(e)},t.prototype.history=function(e,t){if(s.default.logAction(s.default.LOG_MICRO,"Channel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return o.promisify(this,"history",arguments);t=f}this._history(e,t)},t.prototype._history=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(s,n.options.headers);var a=this.channelOptions;new l.default(n,this.basePath+"/messages",s,i,(function(e,t,n){return c.default.fromResponseBody(e,a,n?void 0:r)})).get(e,t)},t.prototype.publish=function(){var e,t,n=this,r=arguments[0],i=arguments[1],s=arguments[arguments.length-1];if("function"!=typeof s){if(this.rest.options.promises)return o.promisify(this,"publish",arguments);s=f}if("string"==typeof r||null===r)e=[c.default.fromValues({name:r,data:i})],t=arguments[2];else if(o.isObject(r))e=[c.default.fromValues(r)],t=arguments[1];else{if(!o.isArray(r))throw new u.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);e=c.default.fromValuesArray(r),t=arguments[1]}"object"==typeof t&&t||(t={});var a=this.rest,l=a.options,p=l.useBinaryProtocol?o.Format.msgpack:o.Format.json,d=a.options.idempotentRestPublishing,h=o.defaultPostHeaders(a.options,p);if(l.headers&&o.mixin(h,l.headers),d&&function(e){return o.arrEvery(e,(function(e){return!e.id}))}(e)){var g=o.randomString(9);o.arrForEach(e,(function(e,t){e.id=g+":"+t.toString()}))}c.default.encodeArray(e,this.channelOptions,(function(r){if(r)s(r);else{var o=c.default.getMessagesSize(e),i=l.maxMessageSize;o>i?s(new u.default("Maximum size of messages that can be published at once exceeded ( was "+o+" bytes; limit is "+i+" bytes)",40009,400)):n._publish(c.default.serialize(e,p),h,t,s)}}))},t.prototype._publish=function(e,t,n,r){p.default.post(this.rest,this.basePath+"/messages",e,t,n,null,r)},t.prototype.status=function(e){if("function"!=typeof e&&this.rest.options.promises)return o.promisify(this,"status",[]);var t=this.rest.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,n=o.defaultPostHeaders(this.rest.options,t);p.default.get(this.rest,this.basePath,n,{},t,e||f)},t}(i.default);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importDefault(n(2)),a=r.__importDefault(n(18)),c=r.__importDefault(n(14));function u(){}var l=function(e){function t(t){var n=e.call(this)||this;return n.channel=t,n.basePath=t.basePath+"/presence",n}return r.__extends(t,e),t.prototype.get=function(e,t){if(s.default.logAction(s.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return o.promisify(this,"get",arguments);t=u}var n=this.channel.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:r,l=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(l,n.options.headers);var p=this.channel.channelOptions;new a.default(n,this.basePath,l,i,(function(e,t,n){return c.default.fromResponseBody(e,p,n?void 0:r)})).get(e,t)},t.prototype.history=function(e,t){return s.default.logAction(s.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(e,t)},t.prototype._history=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return o.promisify(this,"_history",[e]);t=u}var n=this.channel.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(s,n.options.headers);var l=this.channel.channelOptions;new a.default(n,this.basePath+"/history",s,i,(function(e,t,n){return c.default.fromResponseBody(e,l,n?void 0:r)})).get(e,t)},t}(i.default);t.default=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TransportParams=void 0;var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),s=r.__importStar(n(52)),a=r.__importStar(n(8)),c=r.__importDefault(n(3)),u=r.__importDefault(n(7)),l=r.__importDefault(n(36)),p=r.__importDefault(n(2)),d=r.__importDefault(n(37)),f=r.__importStar(n(19)),h=r.__importStar(n(4)),g=r.__importDefault(n(16)),m=r.__importDefault(n(9)),y=r.__importDefault(n(22)),v=r.__importDefault(n(53)),_=r.__importDefault(n(26)),b=r.__importDefault(n(24)),E=function(){var e;return void 0!==c.default.WebStorage&&(null===(e=c.default.WebStorage)||void 0===e?void 0:e.localSupported)},S=function(){var e;return void 0!==c.default.WebStorage&&(null===(e=c.default.WebStorage)||void 0===e?void 0:e.sessionSupported)},w=o.default.Action,T=function(){},O="ably-transport-preference",C="ably-connection-recovery";function R(e){try{return JSON.parse(e)}catch(e){return null}}var M=function(){function e(e,t,n,r){this.options=e,this.host=t,this.mode=n,this.connectionKey=r,this.format=e.useBinaryProtocol?i.Format.msgpack:i.Format.json}return e.prototype.getConnectParams=function(e){var t=e?i.copy(e):{},n=this.options;switch(this.mode){case"upgrade":t.upgrade=this.connectionKey;break;case"resume":t.resume=this.connectionKey;break;case"recover":var r=R(n.recover);r&&(t.recover=r.connectionKey)}return void 0!==n.clientId&&(t.clientId=n.clientId),!1===n.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=a.default.protocolVersion,t.agent=encodeURIComponent((0,a.getAgentString)(this.options)),void 0!==n.transportParams&&i.mixin(t,n.transportParams),t},e.prototype.toString=function(){var e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+"]"},e}();t.TransportParams=M;var P=function(t){function n(e,r){var o=t.call(this)||this;o.disconnectedRetryCount=0,n.initTransports(),o.realtime=e,o.options=r;var s=r.timeouts,u=s.preferenceConnectTimeout+s.realtimeRequestTimeout;if(o.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:u,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:s.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:s.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:s.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},o.state=o.states.initialized,o.errorReason=null,o.queuedMessages=new l.default,o.msgSerial=0,o.connectionDetails=void 0,o.connectionId=void 0,o.connectionKey=void 0,o.connectionStateTtl=s.connectionStateTtl,o.maxIdleInterval=null,o.transports=i.intersect(r.transports||a.default.defaultTransports,n.supportedTransports),o.baseTransport=i.intersect(a.default.baseTransportOrder,o.transports)[0],o.upgradeTransports=i.intersect(o.transports,a.default.upgradeTransports),o.transportPreference=null,o.httpHosts=a.default.getHosts(r),o.activeProtocol=null,o.proposedTransports=[],o.pendingTransports=[],o.host=null,o.lastAutoReconnectAttempt=null,o.lastActivity=null,o.forceFallbackHost=!1,o.connectCounter=0,p.default.logAction(p.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),p.default.logAction(p.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(r.transports||a.default.defaultTransports)+"]"),p.default.logAction(p.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+o.transports+"]"),p.default.logAction(p.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+o.httpHosts+"]"),!o.transports.length){var d="no requested transports available";throw p.default.logAction(p.default.LOG_ERROR,"realtime.ConnectionManager()",d),new Error(d)}var f=c.default.Config.addEventListener;return f&&(S()&&"function"==typeof r.recover&&f("beforeunload",o.persistConnection.bind(o)),!0===r.closeOnUnload&&f("beforeunload",(function(){p.default.logAction(p.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),o.requestState({state:"closing"})})),f("online",(function(){o.state==o.states.disconnected||o.state==o.states.suspended?(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),o.requestState({state:"connecting"})):o.state==o.states.connecting&&(o.pendingTransports.forEach((function(e){e.off()})),o.disconnectAllTransports(),o.startConnect())})),f("offline",(function(){o.state==o.states.connected&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),o.disconnectAllTransports())}))),o}return r.__extends(n,t),n.initTransports=function(){(0,v.default)(n),i.arrForEach(c.default.Transports,(function(e){e(n)}))},n.prototype.createTransportParams=function(e,t){return new M(this.options,e,t,this.connectionKey)},n.prototype.getTransportParams=function(e){var t=this;!function(e){if(t.connectionKey)e("resume");else if("string"!=typeof t.options.recover){var n,r,o=t.options.recover,i=S()&&(null===(r=null===(n=c.default.WebStorage)||void 0===n?void 0:n.getSession)||void 0===r?void 0:r.call(n,C));if(i&&"function"==typeof o)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),void o(i,(function(n){n?(t.options.recover=i.recoveryKey,e("recover")):e("clean")}));e("clean")}else e("recover")}((function(n){var r=t.createTransportParams(null,n);if("recover"===n){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+t.options.recover);var o=R(t.options.recover);o&&(t.msgSerial=o.msgSerial)}else p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+r.toString());e(r)}))},n.prototype.tryATransport=function(e,t,r){var o=this;p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),_.default.tryConnect(n.supportedTransports[t],this,this.realtime.auth,e,(function(n,i){var s=o.state;return s==o.states.closing||s==o.states.closed||s==o.states.failed?(i&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+s.state+" while we were attempting the transport; closing "+i),i.close()),void r(!0)):n?(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+n.event+", err: "+n.error.toString()),void(!g.default.isTokenErr(n.error)||o.errorReason&&g.default.isTokenErr(o.errorReason)?"failed"===n.event?(o.notifyState({state:"failed",error:n.error}),r(!0)):"disconnected"===n.event&&((0,f.isRetriable)(n.error)?r(!1):(o.notifyState({state:o.states.connecting.failState,error:n.error}),r(!0))):(o.errorReason=n.error,o.realtime.auth._forceNewToken(null,null,(function(n){n?o.actOnErrorFromAuthorize(n):o.tryATransport(e,t,r)}))))):(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),o.setTransportPending(i,e),void r(null,i))}))},n.prototype.setTransportPending=function(e,t){var n=this,r=t.mode;p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+r),i.arrDeleteValue(this.proposedTransports,e),this.pendingTransports.push(e);var o=c.default.Defaults.transportPreferenceOrder[c.default.Defaults.transportPreferenceOrder.length-1];e.once("connected",(function(s,a,u){"upgrade"==r&&n.activeProtocol?e.shortName!==o&&i.arrIn(n.getUpgradePossibilities(),o)&&n.activeProtocol?setTimeout((function(){n.scheduleTransportActivation(s,e,a,u)}),n.options.timeouts.parallelUpgradeDelay):n.scheduleTransportActivation(s,e,a,u):(n.activateTransport(s,e,a,u),c.default.Config.nextTick((function(){n.connectImpl(t)}))),"recover"===r&&n.options.recover&&(n.options.recover=null,n.unpersistConnection())}));var s=this;e.on(["disconnected","closed","failed"],(function(t){s.deactivateTransport(e,this.event,t)})),this.emit("transport.pending",e)},n.prototype.scheduleTransportActivation=function(e,t,n,r){var s,a,u=this,l=this.activeProtocol&&this.activeProtocol.getTransport(),d=function(){t.disconnect(),i.arrDeleteValue(u.pendingTransports,t)};if(this.state!==this.states.connected&&this.state!==this.states.connecting)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void d();if(l&&(s=t,a=l,!(i.arrIndexOf(c.default.Defaults.transportPreferenceOrder,s.shortName)>i.arrIndexOf(c.default.Defaults.transportPreferenceOrder,a.shortName))))return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+" is no better than current active transport "+l.shortName+" - abandoning upgrade"),void d();p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+t);var f=null;if(!t.isConnected)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+"is no longer connected; abandoning upgrade"),void d();if(this.state===this.states.connected)p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,f=this.activeProtocol;else if(this.state!==this.states.connecting)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void d();p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+t);var h=function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+t),t.send(o.default.fromValues({action:w.ACTIVATE})),u.activateTransport(e,t,n,r),u.state===u.states.synchronizing?(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+t),u.state=u.states.connected):p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+u.state.state+", so leaving unchanged"),u.state.sendEvents&&u.sendQueuedMessages()};f?f.onceIdle(h):h()},n.prototype.activateTransport=function(e,t,n,r){var o=this;p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),n&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+n),r&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),this.persistTransportPreference(t);var a=this.state,u=this.states.connected.state;if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+a.state),a.state==this.states.closing.state||a.state==this.states.closed.state||a.state==this.states.failed.state)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(i.arrDeleteValue(this.pendingTransports,t),!t.isConnected)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;var l=this.activeProtocol;this.activeProtocol=new s.default(t),this.host=t.params.host;var f=r.connectionKey;if(f&&this.connectionKey!=f&&this.setConnection(n,r,!!e),this.onConnectionDetailsUpdate(r,t),c.default.Config.nextTick((function(){t.on("connected",(function(e,n,r){o.onConnectionDetailsUpdate(r,t),o.emit("update",new d.default(u,u,null,e))}))})),a.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new d.default(u,u,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),l)if(l.messageQueue.count()>0&&p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+l.transport.shortName+", new one is "+t.shortName+") finishing with "+l.messageQueue.count()+" messages still pending"),l.transport===t){var h="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()",h)}else l.finish();return i.safeArrForEach(this.pendingTransports,(function(e){if(e===t){var n="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+t.shortName+"; stack = "+(new Error).stack;p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()",n),i.arrDeleteValue(o.pendingTransports,t)}else e.disconnect()})),i.safeArrForEach(this.proposedTransports,(function(e){e===t?(p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+t.shortName+"; stack = "+(new Error).stack),i.arrDeleteValue(o.proposedTransports,t)):e.dispose()})),!0},n.prototype.deactivateTransport=function(e,t,n){var r=this.activeProtocol,o=r&&r.getTransport()===e,s=i.arrDeleteValue(this.pendingTransports,e),a=i.arrDeleteValue(this.proposedTransports,e),u=this.noTransportsScheduledForActivation();if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(o?"; was active":s?"; was pending":a?"; was proposed":"")+(u?"":"; another transport is scheduled for activation")),n&&n.message&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+n.message),o&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),c.default.Config.nextTick((function(){r.clearPendingMessages()})),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),o&&u||o&&"failed"===t||"closed"===t||null===r&&s&&0===this.pendingTransports.length){if("disconnected"===t&&n&&n.statusCode>500&&this.httpHosts.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:n,retryImmediately:!0});var l="failed"===t&&g.default.isTokenErr(n)?"disconnected":t;this.notifyState({state:l,error:n})}else o&&"disconnected"===t&&this.state!==this.states.synchronizing&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:n}))},n.prototype.noTransportsScheduledForActivation=function(){return i.isEmpty(this.pendingTransports)||this.pendingTransports.every((function(e){return!e.isConnected}))},n.prototype.setConnection=function(e,t,n){var r=this.connectionId;(r&&r!==e||!r&&n)&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey},n.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},n.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},n.prototype.checkConnectionStateFreshness=function(){if(this.lastActivity&&this.connectionId){var e=i.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},n.prototype.persistConnection=function(){if(S()){var t=this.createRecoveryKey();t&&(n={recoveryKey:t,disconnectedAt:i.now(),location:e.location,clientId:this.realtime.auth.clientId},S()&&(null===(o=null===(r=c.default.WebStorage)||void 0===r?void 0:r.setSession)||void 0===o||o.call(r,C,n)))}var n,r,o},n.prototype.unpersistConnection=function(){var e,t;S()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.removeSession)||void 0===t||t.call(e,C))},n.prototype.getError=function(){return this.errorReason||this.getStateError()},n.prototype.getStateError=function(){var e,t;return null===(t=(e=f.default)[this.state.state])||void 0===t?void 0:t.call(e)},n.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},n.prototype.enactStateChange=function(e){var t="failed"===e.current?p.default.LOG_ERROR:p.default.LOG_MAJOR;p.default.logAction(t,"Connection state",e.current+(e.reason?"; reason: "+e.reason:"")),p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));var n=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(n.terminal||"suspended"===n.state)&&this.clearConnection(),this.emit("connectionstate",e)},n.prototype.startTransitionTimer=function(e){var t=this;p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout((function(){t.transitionTimer&&(t.transitionTimer=null,p.default.logAction(p.default.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),t.notifyState({state:e.failState}))}),e.retryDelay)},n.prototype.cancelTransitionTimer=function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},n.prototype.startSuspendTimer=function(){var e=this;this.suspendTimer||(this.suspendTimer=setTimeout((function(){e.suspendTimer&&(e.suspendTimer=null,p.default.logAction(p.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),e.states.connecting.failState="suspended",e.notifyState({state:"suspended"}))}),this.connectionStateTtl))},n.prototype.checkSuspendTimer=function(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()},n.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},n.prototype.startRetryTimer=function(e){var t=this;this.retryTimer=setTimeout((function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),t.retryTimer=null,t.requestState({state:"connecting"})}),e)},n.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},n.prototype.notifyState=function(e){var t,n,r=this,o=e.state,s="disconnected"===o&&(this.state===this.states.connected||this.state===this.states.synchronizing||e.retryImmediately||this.state===this.states.connecting&&e.error&&g.default.isTokenErr(e.error)&&!(this.errorReason&&g.default.isTokenErr(this.errorReason)));if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+o+(s?"; will retry connection immediately":"")),o!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(e.state),"suspended"!==o&&"connected"!==o||(this.disconnectedRetryCount=0),!this.state.terminal)){var a=this.states[e.state],u=a.retryDelay;"disconnected"===a.state&&(this.disconnectedRetryCount++,u=i.getRetryTime(a.retryDelay,this.disconnectedRetryCount));var l=new d.default(this.state.state,a.state,u,e.error||(null===(n=(t=f.default)[a.state])||void 0===n?void 0:n.call(t)));if(s){var h=function(){r.state===r.states.disconnected&&(r.lastAutoReconnectAttempt=i.now(),r.requestState({state:"connecting"}))},m=this.lastAutoReconnectAttempt&&i.now()-this.lastAutoReconnectAttempt+1;m&&m<1e3?(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+m+"ms ago, waiting another "+(1e3-m)+"ms before trying again"),setTimeout(h,1e3-m)):c.default.Config.nextTick(h)}else"disconnected"!==o&&"suspended"!==o||this.startRetryTimer(u);("disconnected"===o&&!s||"suspended"===o||a.terminal)&&c.default.Config.nextTick((function(){r.disconnectAllTransports()})),"connected"!=o||this.activeProtocol||p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(l),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(o,l.reason),this.failQueuedMessages(l.reason))}},n.prototype.requestState=function(e){var t,n,r=this,o=e.state;if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+o+"; current state: "+this.state.state),o!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(o),!("connecting"==o&&"connected"==this.state.state||"closing"==o&&"closed"==this.state.state))){var i=this.states[o],s=new d.default(this.state.state,i.state,null,e.error||(null===(n=(t=f.default)[i.state])||void 0===n?void 0:n.call(t)));this.enactStateChange(s),"connecting"==o&&c.default.Config.nextTick((function(){r.startConnect()})),"closing"==o&&this.closeImpl()}},n.prototype.startConnect=function(){var e=this;if(this.state===this.states.connecting){var t=this.realtime.auth,n=++this.connectCounter,r=function(){e.checkConnectionStateFreshness(),e.getTransportParams((function(t){if("recover"===t.mode&&t.options.recover){var r=R(t.options.recover);r&&e.realtime.channels.recoverChannels(r.channelSerials)}n===e.connectCounter&&e.connectImpl(t,n)}))};if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===t.method)r();else{var o=function(t){n===e.connectCounter&&(t?e.actOnErrorFromAuthorize(t):r())};this.errorReason&&g.default.isTokenErr(this.errorReason)?t._forceNewToken(null,null,o):t._ensureValidAuthCredentials(!1,o)}}else p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state)},n.prototype.connectImpl=function(e,t){var n=this.state.state;n!==this.states.connecting.state&&n!==this.states.connected.state?p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+n):this.pendingTransports.length?p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):n==this.states.connected.state?this.upgradeIfNeeded(e):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(e,t):this.connectBase(e,t)},n.prototype.connectPreference=function(e,t){var n=this,r=this.getTransportPreference(),o=!1;i.arrIn(this.transports,r)||(this.unpersistTransportPreference(),this.connectImpl(e,t)),p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+r);var s=setTimeout((function(){o=!0,n.state.state!==n.states.connected.state&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+r+" failed; clearing preference and trying from scratch"),n.disconnectAllTransports(),n.unpersistTransportPreference()),n.connectImpl(e,t)}),this.options.timeouts.preferenceConnectTimeout);e.host=this.httpHosts[0],this.tryATransport(e,r,(function(r,a){clearTimeout(s),o&&a?(a.off(),a.disconnect(),i.arrDeleteValue(n.pendingTransports,a)):a||r||(n.unpersistTransportPreference(),n.connectImpl(e,t))}))},n.prototype.connectBase=function(e,t){var n=this,r=function(e){n.notifyState({state:n.states.connecting.failState,error:e})},o=this.httpHosts.slice(),s=function(e,r){t===n.connectCounter&&(r||e||c())};p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var a=o.shift();if(a){e.host=a;var c=function(){o.length?n.realtime.http.checkConnectivity?n.realtime.http.checkConnectivity((function(a,c){t===n.connectCounter&&(a?r(a):c?(e.host=i.arrPopRandomElement(o),n.tryATransport(e,n.baseTransport,s)):r(new h.default("Unable to connect (network unreachable)",80003,404)))})):r(new h.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500)):r(new h.default("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&o.length)return this.forceFallbackHost=!1,void c();this.tryATransport(e,this.baseTransport,s)}else r(new h.default("Unable to connect (no available host)",80003,404))},n.prototype.getUpgradePossibilities=function(){var e=this.activeProtocol.getTransport().shortName,t=i.arrIndexOf(this.upgradeTransports,e);return this.upgradeTransports.slice(t+1)},n.prototype.upgradeIfNeeded=function(e){var t=this,n=this.getUpgradePossibilities();p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+c.default.Config.inspect(n)),n.length&&i.arrForEach(n,(function(n){var r=t.createTransportParams(e.host,"upgrade");t.tryATransport(r,n,T)}))},n.prototype.closeImpl=function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),i.safeArrForEach(this.pendingTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+e),e&&e.close()})),i.safeArrForEach(this.proposedTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.activeProtocol&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},n.prototype.onAuthUpdated=function(e,t){var n,r=this;switch(this.state.state){case"connected":if(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var i=this.activeProtocol.getTransport().params;c.default.Config.nextTick((function(){"connected"===r.state.state&&r.upgradeIfNeeded(i)}))}var s=null===(n=this.activeProtocol)||void 0===n?void 0:n.getTransport();s&&s.onAuthUpdated&&s.onAuthUpdated(e);var a=o.default.fromValues({action:w.AUTH,auth:{accessToken:e.token}});this.send(a);var u=function(){r.off(l),t(null,e)},l=function(e){"failed"===e.current&&(r.off(u),r.off(l),t(e.reason||r.getStateError()))};this.once("connectiondetails",u),this.on("connectionstate",l);break;case"connecting":p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var d=function(n){switch(n.current){case"connected":r.off(d),t(null,e);break;case"failed":case"closed":case"suspended":r.off(d),t(n.reason||r.getStateError())}};this.on("connectionstate",d),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}},n.prototype.disconnectAllTransports=function(e){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(e?" except the active transport":"")),this.connectCounter++,i.safeArrForEach(this.pendingTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+e),e&&e.disconnect()})),this.pendingTransports=[],i.safeArrForEach(this.proposedTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.proposedTransports=[],this.activeProtocol&&!e&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},n.prototype.send=function(e,t,n){n=n||T;var r=this.state;if(r.sendEvents)return p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new s.PendingMessage(e,n));if(!(t&&r.queueEvents||r.forceQueueEvents)){var i="rejecting event, queueEvent was "+t+", state was "+r.state;return p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.send()",i),void n(this.errorReason||new h.default(i,9e4,400))}p.default.shouldLog(p.default.LOG_MICRO)&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+o.default.stringify(e)),this.queue(e,n)},n.prototype.sendImpl=function(e){var t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(e){p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+e.stack)}},n.prototype.queue=function(e,t){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var n=this.queuedMessages.last(),r=this.options.maxMessageSize;n&&!n.sendAttempted&&function(e,t,n){var r;if(e.channel!==t.channel)return!1;if((r=e.action)!==w.PRESENCE&&r!==w.MESSAGE)return!1;if(r!==t.action)return!1;var o=r===w.PRESENCE?"presence":"messages",s=e[o].concat(t[o]);return!(m.default.getMessagesSize(s)>n||!i.allSame(s,"clientId")||!i.arrEvery(s,(function(e){return!e.id}))||(e[o]=s,0))}(n.message,e,r)?(n.merged||(n.callback=y.default.create([n.callback]),n.merged=!0),n.callback.push(t)):this.queuedMessages.push(new s.PendingMessage(e,t))},n.prototype.sendQueuedMessages=function(){var e;for(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)},n.prototype.queuePendingMessages=function(e){e&&e.length&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))},n.prototype.failQueuedMessages=function(e){var t=this.queuedMessages.count();t>0&&(p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+i.inspectError(e)),this.queuedMessages.completeAllMessages(e))},n.prototype.onChannelMessage=function(e,t){var n=this.activeProtocol&&t===this.activeProtocol.getTransport(),r=i.arrIn(this.pendingTransports,t)&&this.state==this.states.synchronizing;n||r||i.arrIndexOf([w.ACK,w.NACK,w.ERROR],e.action)>-1?this.realtime.channels.onChannelMessage(e):p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(e)+"on defunct transport; discarding")},n.prototype.ping=function(e,t){var n=this;if(e){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+e);var r=i.now(),o=i.cheapRandStr(),s=function(n){if(n===o){e.off("heartbeat",s),clearTimeout(a);var c=i.now()-r;t(null,c)}},a=setTimeout((function(){e.off("heartbeat",s),t(new h.default("Timeout waiting for heartbeat response",5e4,500))}),this.options.timeouts.realtimeRequestTimeout);return e.on("heartbeat",s),void e.ping(o)}if("connected"===this.state.state){var u=!1,l=function(){u||(u=!0,c.default.Config.nextTick((function(){n.ping(null,t)})))};this.on("transport.active",l),this.ping(this.activeProtocol.getTransport(),(function(e,r){n.off("transport.active",l),u||(u=!0,t(e,r))}))}else t(new h.default("Unable to ping service; not connected",4e4,400))},n.prototype.abort=function(e){this.activeProtocol.getTransport().fail(e)},n.prototype.registerProposedTransport=function(e){this.proposedTransports.push(e)},n.prototype.getTransportPreference=function(){var e,t;return this.transportPreference||E()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.get)||void 0===t?void 0:t.call(e,O))},n.prototype.persistTransportPreference=function(e){var t,n;i.arrIn(a.default.upgradeTransports,e.shortName)&&(this.transportPreference=e.shortName,E()&&(null===(n=null===(t=c.default.WebStorage)||void 0===t?void 0:t.set)||void 0===n||n.call(t,O,e.shortName)))},n.prototype.unpersistTransportPreference=function(){var e,t;this.transportPreference=null,E()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.remove)||void 0===t||t.call(e,O))},n.prototype.actOnErrorFromAuthorize=function(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===b.default.Forbidden){var t="Client configured authentication provider returned 403; failing the connection";p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new h.default(t,80019,403,e)})}else t="Client configured authentication provider request failed",p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new h.default(t,80019,401,e)})},n.prototype.onConnectionDetailsUpdate=function(e,t){if(e){this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);var n=e.clientId;if(n){var r=this.realtime.auth._uncheckedSetClientId(n);if(r)return p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",r.message),void t.fail(r)}var o=e.connectionStateTtl;o&&(this.connectionStateTtl=o),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}},n.supportedTransports={},n}(u.default);t.default=P}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(7)),i=r.__importDefault(n(2)),s=function(e){function t(){var t=e.call(this)||this;return t.messages=[],t}return r.__extends(t,e),t.prototype.count=function(){return this.messages.length},t.prototype.push=function(e){this.messages.push(e)},t.prototype.shift=function(){return this.messages.shift()},t.prototype.last=function(){return this.messages[this.messages.length-1]},t.prototype.copyAll=function(){return this.messages.slice()},t.prototype.append=function(e){this.messages.push.apply(this.messages,e)},t.prototype.prepend=function(e){this.messages.unshift.apply(this.messages,e)},t.prototype.completeMessages=function(e,t,n){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+e+"; count = "+t),n=n||null;var r=this.messages;if(0===r.length)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var o=r[0];if(o){var s=o.message.msgSerial,a=e+t;if(a>s)for(var c=0,u=r.splice(0,a-s);c<u.length;c++)u[c].callback(n);0==r.length&&this.emit("idle")}},t.prototype.completeAllMessages=function(e){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e)},t.prototype.resetSendAttempted=function(){for(var e=0,t=this.messages;e<t.length;e++)t[e].sendAttempted=!1},t.prototype.clear=function(){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},t}(o.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r){this.previous=e,this.current=t,n&&(this.retryIn=n),r&&(this.reason=r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(10)),i=r.__importDefault(n(7)),s=r.__importStar(n(1)),a=r.__importDefault(n(33)),c=r.__importDefault(n(2)),u=r.__importDefault(n(54)),l=r.__importDefault(n(9)),p=r.__importDefault(n(39)),d=r.__importStar(n(4)),f=r.__importDefault(n(14)),h=r.__importDefault(n(19)),g=o.default.Action,m=function(){},y=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.retryCount=0,o.history=function(e,t){if(c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return s.promisify(this,"history",arguments);t=m}if(e&&e.untilAttach){if("attached"!==this.state)return void t(new d.default("option untilAttach requires the channel to be attached",4e4,400));if(!this.properties.attachSerial)return void t(new d.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));delete e.untilAttach,e.from_serial=this.properties.attachSerial}a.default.prototype._history.call(this,e,t)},o.whenState=function(e,t){return i.default.prototype.whenState.call(o,e,o.state,t)},c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel()","started; name = "+n),o.realtime=t,o.presence=new u.default(o),o.connectionManager=t.connection.connectionManager,o.state="initialized",o.subscriptions=new i.default,o.syncChannelSerial=void 0,o.properties={attachSerial:void 0,channelSerial:void 0},o.setOptions(r),o.errorReason=null,o._requestedFlags=null,o._mode=null,o._attachResume=!1,o._decodingContext={channelOptions:o.channelOptions,plugins:t.options.plugins||{},baseEncodedPreviousPayload:void 0},o._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},o._allChannelChanges=new i.default,o}return r.__extends(t,e),t.prototype.invalidStateError=function(){return new d.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},t.processListenerArgs=function(e){return"function"==typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),null==e[e.length-1]&&e.pop(),e},t.prototype.setOptions=function(e,t){if(!t&&this.rest.options.promises)return s.promisify(this,"setOptions",arguments);var n=t||function(e){e&&c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+e.toString())},r=function(e){if(e&&"params"in e&&!s.isObject(e.params))return new d.default("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!s.isArray(e.modes))return new d.default("options.modes must be an array",4e4,400);for(var t=0;t<e.modes.length;t++){var n=e.modes[t];if(!n||"string"!=typeof n||!s.arrIn(o.default.channelModes,String.prototype.toUpperCase.call(n)))return new d.default("Invalid channel mode: "+n,4e4,400)}}}(e);r?n(r):(a.default.prototype.setOptions.call(this,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],(function(e){switch(this.event){case"update":case"attached":return void(null==n||n(null));default:return void(null==n||n(e.reason))}}))):n())},t.prototype._shouldReattachToSetOptions=function(e){return("attached"===this.state||"attaching"===this.state)&&((null==e?void 0:e.params)||(null==e?void 0:e.modes))},t.prototype.publish=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t.length,i=t[o-1];if("function"!=typeof i){if(this.realtime.options.promises)return s.promisify(this,"publish",arguments);i=m,++o}if(this.connectionManager.activeState()){if(2==o)if(s.isObject(r))r=[l.default.fromValues(r)];else{if(!s.isArray(r))throw new d.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);r=l.default.fromValuesArray(r)}else r=[l.default.fromValues({name:t[0],data:t[1]})];var a=this.realtime.options.maxMessageSize;l.default.encodeArray(r,this.channelOptions,(function(t){if(t)i(t);else{var n=l.default.getMessagesSize(r);n>a?i(new d.default("Maximum size of messages that can be published at once exceeded ( was "+n+" bytes; limit is "+a+" bytes)",40009,400)):e.__publish(r,i)}}))}else i(this.connectionManager.getError())},t.prototype.__publish=function(e,t){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+e.length);var n=this.state;switch(n){case"failed":case"suspended":t(d.default.fromValues(this.invalidStateError()));break;default:c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+n);var r=new o.default;r.action=g.MESSAGE,r.channel=this.name,r.messages=e,this.sendMessage(r,t)}},t.prototype.onEvent=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var t=this.subscriptions,n=0;n<e.length;n++){var r=e[n];t.emit(r.name,r)}},t.prototype.attach=function(e,t){var n;if("function"==typeof e?(t=e,n=null):n=e,!t){if(this.realtime.options.promises)return s.promisify(this,"attach",arguments);t=function(e){e&&c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+e.toString())}}if(n)c.default.deprecated("channel.attach() with flags","channel.setOptions() with channelOptions.params"),this._requestedFlags=n;else if("attached"===this.state)return void t(null,null);this._attach(!1,null,t)},t.prototype._attach=function(e,t,n){n||(n=function(e){e&&c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});var r=this.connectionManager;r.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once((function(e){switch(this.event){case"attached":null==n||n(null,e);break;case"detached":case"suspended":case"failed":null==n||n(e.reason||r.getError()||new d.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==n||n(new d.default("Attach request superseded by a subsequent detach request",9e4,409))}}))):n(r.getError())},t.prototype.attachImpl=function(){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var e=o.default.fromValues({action:g.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?e.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&e.encodeModesToFlags(s.allToUpperCase(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e,m)},t.prototype.detach=function(e){if(!e){if(this.realtime.options.promises)return s.promisify(this,"detach",arguments);e=m}var t=this.connectionManager;if(t.activeState())switch(this.state){case"suspended":this.notifyState("detached"),e();break;case"detached":e();break;case"failed":e(new d.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once((function(n){switch(this.event){case"detached":e();break;case"attached":case"suspended":case"failed":e(n.reason||t.getError()||new d.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":e(new d.default("Detach request superseded by a subsequent attach request",9e4,409))}}))}else e(t.getError())},t.prototype.detachImpl=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var t=o.default.fromValues({action:g.DETACH,channel:this.name});this.sendMessage(t,e||m)},t.prototype.subscribe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.processListenerArgs(e),o=r[0],i=r[1],a=r[2];return!a&&this.realtime.options.promises?s.promisify(this,"subscribe",[o,i]):"failed"!==this.state?(o&&"object"==typeof o&&!Array.isArray(o)?this._subscribeFilter(o,i):this.subscriptions.on(o,i),this.attach(a||m)):void(null==a||a(d.default.fromValues(this.invalidStateError())))},t.prototype._subscribeFilter=function(e,t){var n=function(n){var r,o,i,s,a,c,u={name:n.name,refTimeserial:null===(o=null===(r=n.extras)||void 0===r?void 0:r.ref)||void 0===o?void 0:o.timeserial,refType:null===(s=null===(i=n.extras)||void 0===i?void 0:i.ref)||void 0===s?void 0:s.type,isRef:!!(null===(c=null===(a=n.extras)||void 0===a?void 0:a.ref)||void 0===c?void 0:c.timeserial),clientId:n.clientId};Object.entries(e).find((function(e){var t=e[0],n=e[1];return void 0!==n&&u[t]!==n}))||t(n)};this._addFilteredSubscription(e,t,n),this.subscriptions.on(n)},t.prototype._addFilteredSubscription=function(e,t,n){var r;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(t)){var o=this.filteredSubscriptions.get(t);o.set(e,(null===(r=null==o?void 0:o.get(e))||void 0===r?void 0:r.concat(n))||[n])}else this.filteredSubscriptions.set(t,new Map([[e,[n]]]))},t.prototype._getAndDeleteFilteredSubscriptions=function(e,t){var n=this;if(!this.filteredSubscriptions)return[];if(!t&&e)return Array.from(this.filteredSubscriptions.entries()).map((function(t){var r,o=t[0],i=t[1],s=i.get(e);return i.delete(e),0===i.size&&(null===(r=n.filteredSubscriptions)||void 0===r||r.delete(o)),s})).reduce((function(e,t){var n;return t?(n=e).concat.apply(n,t):e}),[]);if(!t||!this.filteredSubscriptions.has(t))return[];var r=this.filteredSubscriptions.get(t);if(!e){var o=Array.from(r.values()).reduce((function(e,t){return e.concat.apply(e,t)}),[]);return this.filteredSubscriptions.delete(t),o}var i=r.get(e);return r.delete(e),i||[]},t.prototype.unsubscribe=function(){for(var e,n=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=t.processListenerArgs(r),s=i[0],a=i[1];"object"==typeof s&&!a||(null===(e=this.filteredSubscriptions)||void 0===e?void 0:e.has(a))?this._getAndDeleteFilteredSubscriptions(s,a).forEach((function(e){return n.subscriptions.off(e)})):this.subscriptions.off(s,a)},t.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new d.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var e=this.connectionManager;if(!e.activeState())throw e.getError();var t=o.default.fromValues({action:g.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)},t.prototype.sendMessage=function(e,t){this.connectionManager.send(e,this.realtime.options.queueMessages,t)},t.prototype.sendPresence=function(e,t){var n=o.default.fromValues({action:g.PRESENCE,channel:this.name,presence:s.isArray(e)?f.default.fromValuesArray(e):[f.default.fromValues(e)]});this.sendMessage(n,t)},t.prototype.onMessage=function(e){e.action!==g.ATTACHED&&e.action!==g.MESSAGE&&e.action!==g.PRESENCE||this.setChannelSerial(e.channelSerial);var t,n=!1;switch(e.action){case g.ATTACHED:this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};var r=e.decodeModesFromFlags();this.modes=r&&s.allToLowerCase(r)||void 0;var o=e.hasFlag("RESUMED"),i=e.hasFlag("HAS_PRESENCE"),a=e.hasFlag("HAS_BACKLOG");if("attached"===this.state){o||this.presence.onAttached(i);var u=new p.default(this.state,this.state,o,a,e.error);this._allChannelChanges.emit("update",u),o&&!this.channelOptions.updateOnAttached||this.emit("update",u)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",e.error,o,i,a);break;case g.DETACHED:var m=e.error?d.default.fromValues(e.error):new d.default("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",m):"attaching"===this.state?this.notifyState("suspended",m):this.requestState("attaching",m);break;case g.SYNC:if(n=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;case g.PRESENCE:for(var y=e.presence,v=e.id,_=e.connectionId,b=e.timestamp,E=this.channelOptions,S=void 0,w=0;w<y.length;w++)try{S=y[w],f.default.decode(S,E),S.connectionId||(S.connectionId=_),S.timestamp||(S.timestamp=b),S.id||(S.id=v+":"+w)}catch(e){c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString())}this.presence.setPresence(y,n,t);break;case g.MESSAGE:if("attached"!==this.state)return void c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');var T=e.messages,O=T[0],C=T[T.length-1];if(v=e.id,_=e.connectionId,b=e.timestamp,O.extras&&O.extras.delta&&O.extras.delta.from!==this._lastPayload.messageId){var R='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",R),this._startDecodeFailureRecovery(new d.default(R,40018,400));break}for(w=0;w<T.length;w++){R=T[w];try{l.default.decode(R,this._decodingContext)}catch(e){switch(c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString()),e.code){case 40018:return void this._startDecodeFailureRecovery(e);case 40019:case 40021:return void this.notifyState("failed",e)}}R.connectionId||(R.connectionId=_),R.timestamp||(R.timestamp=b),R.id||(R.id=v+":"+w)}this._lastPayload.messageId=C.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(T);break;case g.ERROR:var M=e.error;M&&80016==M.code?this.checkPendingState():this.notifyState("failed",d.default.fromValues(M));break;default:c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+e.action+")"),this.connectionManager.abort(h.default.unknownChannelErr())}},t.prototype._startDecodeFailureRecovery=function(e){var t=this;this._lastPayload.decodeFailureRecoveryInProgress||(c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,(function(){t._lastPayload.decodeFailureRecoveryInProgress=!1})))},t.prototype.onAttached=function(){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},t.prototype.notifyState=function(e,t,n,r,o){if(c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),s.arrIn(["detached","suspended","failed"],e)&&(this.properties.channelSerial=null),e!==this.state){this.presence.actOnChannelState(e,r,t),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);var i=new p.default(this.state,e,n,o,t),a="failed"===e?c.default.LOG_ERROR:c.default.LOG_MAJOR;c.default.logAction(a,'Channel state for channel "'+this.name+'"',e+(t?"; reason: "+t:"")),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,i),this.emit(e,i)}},t.prototype.requestState=function(e,t){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()},t.prototype.checkPendingState=function(){var e=this.connectionManager.state;if(e.sendEvents||e.forceQueueEvents)switch(c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)},t.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":var e=new d.default("Channel attach timed out",90007,408);this.notifyState("suspended",e);break;case"detaching":e=new d.default("Channel detach timed out",90007,408),this.notifyState("attached",e);break;default:this.checkPendingState()}},t.prototype.startStateTimerIfNotRunning=function(){var e=this;this.stateTimer||(this.stateTimer=setTimeout((function(){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),e.stateTimer=null,e.timeoutPendingState()}),this.realtime.options.timeouts.realtimeRequestTimeout))},t.prototype.clearStateTimer=function(){var e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)},t.prototype.startRetryTimer=function(){var e=this;if(!this.retryTimer){this.retryCount++;var t=s.getRetryTime(this.realtime.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout((function(){"suspended"===e.state&&e.connectionManager.state.sendEvents&&(e.retryTimer=null,c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),e.requestState("attaching"))}),t)}},t.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},t.prototype.getReleaseErr=function(){var e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new d.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)},t.prototype.setChannelSerial=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)},t}(a.default);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r,o){this.previous=e,this.current=t,"attached"===t&&(this.resumed=n,this.hasBacklog=r),o&&(this.reason=o)}},function(e,t,n){var r,o,i,s,a,c,u,l;e.exports=(o=(r=l=n(6)).lib,i=o.WordArray,s=o.Hasher,a=r.algo,c=[],u=a.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var p=(r<<5|r>>>27)+a+c[u];p+=u<20?1518500249+(o&i|~o&s):u<40?1859775393+(o^i^s):u<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514,a=s,s=i,i=o<<30|o>>>2,o=r,r=p}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=s._createHelper(u),r.HmacSHA1=s._createHmacHelper(u),l.SHA1)},function(e,t,n){"use strict";function r(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n.charCodeAt(r);if(i<128)e.setUint8(t++,i>>>0&127);else if(i<2048)e.setUint8(t++,i>>>6&31|192),e.setUint8(t++,i>>>0&63|128);else if(i<65536)e.setUint8(t++,i>>>12&15|224),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);else{if(!(i<1114112))throw new Error("bad codepoint "+i);e.setUint8(t++,i>>>18&7|240),e.setUint8(t++,i>>>12&63|128),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128)}}}function o(e,t,n){for(var r="",o=t,i=t+n;o<i;o++){var s=e.getUint8(o);if(128&s)if(192!=(224&s))if(224!=(240&s)){if(240!=(248&s))throw new Error("Invalid byte "+s.toString(16));r+=String.fromCharCode((7&s)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|63&e.getUint8(++o))}else r+=String.fromCharCode((15&s)<<12|(63&e.getUint8(++o))<<6|63&e.getUint8(++o));else r+=String.fromCharCode((15&s)<<6|63&e.getUint8(++o));else r+=String.fromCharCode(s)}return r}function i(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t+=1;else if(o<2048)t+=2;else if(o<65536)t+=3;else{if(!(o<1114112))throw new Error("bad codepoint "+o);t+=4}}return t}Object.defineProperty(t,"__esModule",{value:!0});var s=4294967296,a=1/s,c=function(e,t){var n=this;this.map=function(e){for(var t={},r=0;r<e;r++)t[n.parse()]=n.parse();return t},this.bin=function(e){var t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(n.view.buffer,n.offset,e),0),n.offset+=e,t},this.buf=this.bin,this.str=function(e){var t=o(n.view,n.offset,e);return n.offset+=e,t},this.array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=n.parse();return t},this.ext=function(e){return n.offset+=e,{type:n.view.getInt8(n.offset),data:n.buf(e)}},this.parse=function(){var e,t,r=n.view.getUint8(n.offset);if(!(128&r))return n.offset++,r;if(128==(240&r))return t=15&r,n.offset++,n.map(t);if(144==(240&r))return t=15&r,n.offset++,n.array(t);if(160==(224&r))return t=31&r,n.offset++,n.str(t);if(!(224&~r))return e=n.view.getInt8(n.offset),n.offset++,e;switch(r){case 192:return n.offset++,null;case 193:return void n.offset++;case 194:return n.offset++,!1;case 195:return n.offset++,!0;case 196:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.bin(t);case 197:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.bin(t);case 198:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.bin(t);case 199:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.ext(t);case 200:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.ext(t);case 201:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.ext(t);case 202:return e=n.view.getFloat32(n.offset+1),n.offset+=5,e;case 203:return e=n.view.getFloat64(n.offset+1),n.offset+=9,e;case 204:return e=n.view.getUint8(n.offset+1),n.offset+=2,e;case 205:return e=n.view.getUint16(n.offset+1),n.offset+=3,e;case 206:return e=n.view.getUint32(n.offset+1),n.offset+=5,e;case 207:return e=function(e,t){return t=t||0,e.getUint32(t)*s+e.getUint32(t+4)}(n.view,n.offset+1),n.offset+=9,e;case 208:return e=n.view.getInt8(n.offset+1),n.offset+=2,e;case 209:return e=n.view.getInt16(n.offset+1),n.offset+=3,e;case 210:return e=n.view.getInt32(n.offset+1),n.offset+=5,e;case 211:return e=function(e,t){return t=t||0,e.getInt32(t)*s+e.getUint32(t+4)}(n.view,n.offset+1),n.offset+=9,e;case 212:return t=1,n.offset++,n.ext(t);case 213:return t=2,n.offset++,n.ext(t);case 214:return t=4,n.offset++,n.ext(t);case 215:return t=8,n.offset++,n.ext(t);case 216:return t=16,n.offset++,n.ext(t);case 217:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.str(t);case 218:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.str(t);case 219:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.str(t);case 220:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.array(t);case 221:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.array(t);case 222:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.map(t);case 223:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.map(t)}throw new Error("Unknown type 0x"+r.toString(16))},this.offset=t||0,this.view=e};function u(e,t){return Object.keys(e).filter((function(n){var r=e[n];return!(t&&null==r||"function"==typeof r&&!r.toJSON)}))}function l(e,t,n,o){var s=typeof e;if("string"==typeof e){var c=i(e);if(c<32)return t.setUint8(n,160|c),r(t,n+1,e),1+c;if(c<256)return t.setUint8(n,217),t.setUint8(n+1,c),r(t,n+2,e),2+c;if(c<65536)return t.setUint8(n,218),t.setUint16(n+1,c),r(t,n+3,e),3+c;if(c<4294967296)return t.setUint8(n,219),t.setUint32(n+1,c),r(t,n+5,e),5+c}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var p=e.byteLength;if(p<256)return t.setUint8(n,196),t.setUint8(n+1,p),new Uint8Array(t.buffer).set(new Uint8Array(e),n+2),2+p;if(p<65536)return t.setUint8(n,197),t.setUint16(n+1,p),new Uint8Array(t.buffer).set(new Uint8Array(e),n+3),3+p;if(p<4294967296)return t.setUint8(n,198),t.setUint32(n+1,p),new Uint8Array(t.buffer).set(new Uint8Array(e),n+5),5+p}if("number"==typeof e){if(Math.floor(e)!==e)return t.setUint8(n,203),t.setFloat64(n+1,e),9;if(e>=0){if(e<128)return t.setUint8(n,e),1;if(e<256)return t.setUint8(n,204),t.setUint8(n+1,e),2;if(e<65536)return t.setUint8(n,205),t.setUint16(n+1,e),3;if(e<4294967296)return t.setUint8(n,206),t.setUint32(n+1,e),5;if(e<0x10000000000000000)return t.setUint8(n,207),function(e,t,n){n<0x10000000000000000?(e.setUint32(t,Math.floor(n*a)),e.setInt32(t+4,-1&n)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(t,n+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(n,e),1;if(e>=-128)return t.setUint8(n,208),t.setInt8(n+1,e),2;if(e>=-32768)return t.setUint8(n,209),t.setInt16(n+1,e),3;if(e>=-2147483648)return t.setUint8(n,210),t.setInt32(n+1,e),5;if(e>=-0x8000000000000000)return t.setUint8(n,211),function(e,t,n){n<0x8000000000000000?(e.setInt32(t,Math.floor(n*a)),e.setInt32(t+4,-1&n)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(t,n+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===s)return o?0:(t.setUint8(n,212),t.setUint8(n+1,0),t.setUint8(n+2,0),3);if(null===e)return o?0:(t.setUint8(n,192),1);if("boolean"===s)return t.setUint8(n,e?195:194),1;if("function"==typeof e.toJSON)return l(e.toJSON(),t,n,o);if("object"===s){var d,f=0,h=void 0,g=Array.isArray(e);if((d=g?e.length:(h=u(e,o)).length)<16?(t.setUint8(n,d|(g?144:128)),f=1):d<65536?(t.setUint8(n,g?220:222),t.setUint16(n+1,d),f=3):d<4294967296&&(t.setUint8(n,g?221:223),t.setUint32(n+1,d),f=5),g)for(var m=0;m<d;m++)f+=l(e[m],t,n+f,o);else if(h)for(m=0;m<d;m++){var y=h[m];f+=l(y,t,n+f),f+=l(e[y],t,n+f,o)}return f}if("function"===s)return 0;throw new Error("Unknown type "+s)}function p(e,t){var n=typeof e;if("string"===n){var r=i(e);if(r<32)return 1+r;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var o=e.byteLength;if(o<256)return 2+o;if(o<65536)return 3+o;if(o<4294967296)return 5+o}if("number"==typeof e){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===n)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"==typeof e.toJSON)return p(e.toJSON(),t);if("object"===n){var s,a=0;if(Array.isArray(e)){s=e.length;for(var c=0;c<s;c++)a+=p(e[c],t)}else{var l=u(e,t);for(s=l.length,c=0;c<s;c++){var d=l[c];a+=p(d)+p(e[d],t)}}if(s<16)return 1+a;if(s<65536)return 3+a;if(s<4294967296)return 5+a;throw new Error("Array or object too long 0x"+s.toString(16))}if("function"===n)return 0;throw new Error("Unknown type "+n)}t.default={encode:function(e,t){var n=p(e,t);if(0!==n){var r=new ArrayBuffer(n);return l(e,new DataView(r),0,t),r}},decode:function(e){var t=new DataView(e),n=new c(t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r},inspect:function(e){if(void 0===e)return"undefined";var t,n;if(e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e),!t)return JSON.stringify(e);for(var r=[],o=0;o<e.byteLength;o++){if(o>20){r.push("...");break}var i=t.getUint8(o).toString(16);1===i.length&&(i="0"+i),r.push(i)}return"<"+n+" "+r.join(" ")+">"},utf8Write:r,utf8Read:o,utf8ByteCount:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(30)),i=r.__importDefault(n(50)),s=r.__importDefault(n(3)),a=r.__importDefault(n(55)),c=r.__importDefault(n(57)),u=r.__importDefault(n(62)),l=r.__importDefault(n(64)),p=r.__importDefault(n(68)),d=r.__importDefault(n(2)),f=n(8),h=r.__importDefault(n(65)),g=r.__importDefault(n(66)),m=r.__importDefault(n(41)),y=(0,c.default)(l.default,a.default);s.default.Crypto=y,s.default.BufferUtils=a.default,s.default.Http=u.default,s.default.Config=l.default,s.default.Transports=p.default,s.default.WebStorage=h.default,o.default.Crypto=y,i.default.Crypto=y,d.default.initLogHandlers(),s.default.Defaults=(0,f.getDefaults)(g.default),s.default.Config.agent&&(s.default.Defaults.agent+=" "+s.default.Config.agent),s.default.Config.noUpgrade&&(s.default.Defaults.upgradeTransports=[]),t.default={Rest:o.default,Realtime:i.default,msgpack:m.default}},function(e){e.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.42","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^5.1"},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@types/crypto-js":"^4.0.1","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","async":"ably-forks/async#requirejs","aws-sdk":"^2.1413.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"^2.8.5","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.6.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","null-loader":"^4.0.1","playwright":"^1.10.0","prettier":"^2.5.1","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^4.0.1","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","webpack":"^4.44.2","webpack-cli":"^4.2.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:node:skip-build":"grunt mocha","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","concat":"grunt concat","build":"grunt build:all","build:node":"grunt build:node","build:browser":"grunt build:browser","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')},function(e,t){},function(e,t,n){var r;e.exports=(r=n(6),n(32),n(23),r.HmacSHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(47)),s=r.__importDefault(n(25)),a=r.__importDefault(n(18)),c=r.__importDefault(n(4)),u=r.__importDefault(n(48)),l=function(){},p=function(){function e(e){this.rest=e,this.deviceRegistrations=new d(e),this.channelSubscriptions=new f(e)}return e.prototype.publish=function(e,t,n){var r=this.rest,i=r.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,a=o.defaultPostHeaders(r.options,i),c={},u=o.mixin({recipient:e},t);if("function"!=typeof n){if(this.rest.options.promises)return o.promisify(this,"publish",arguments);n=l}r.options.headers&&o.mixin(a,r.options.headers),r.options.pushFullWait&&o.mixin(c,{fullWait:"true"});var p=o.encodeBody(u,i);s.default.post(r,"/push/publish",p,a,c,null,(function(e){return n(e)}))},e}(),d=function(){function e(e){this.rest=e}return e.prototype.save=function(e,t){var n=this.rest,r=i.default.fromValues(e),a=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,c=o.defaultPostHeaders(n.options,a),u={};if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"save",arguments);t=l}n.options.headers&&o.mixin(c,n.options.headers),n.options.pushFullWait&&o.mixin(u,{fullWait:"true"});var p=o.encodeBody(r,a);s.default.put(n,"/push/deviceRegistrations/"+encodeURIComponent(e.id),p,c,u,null,(function(e,n,r,o){t(e,e?void 0:i.default.fromResponseBody(n,o?void 0:a))}))},e.prototype.get=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,a=o.defaultGetHeaders(n.options,r),u=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"get",arguments);t=l}"string"==typeof u&&u.length?(n.options.headers&&o.mixin(a,n.options.headers),s.default.get(n,"/push/deviceRegistrations/"+encodeURIComponent(u),a,{},null,(function(e,n,o,s){t(e,e?void 0:i.default.fromResponseBody(n,s?void 0:r))}))):t(new c.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,s=this.rest.http.supportsLinkHeaders?void 0:r,c=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"list",arguments);t=l}n.options.headers&&o.mixin(c,n.options.headers),new a.default(n,"/push/deviceRegistrations",c,s,(function(e,t,n){return i.default.fromResponseBody(e,n?void 0:r)})).get(e,t)},e.prototype.remove=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r),a={},u=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"remove",arguments);t=l}"string"==typeof u&&u.length?(n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(a,{fullWait:"true"}),s.default.delete(n,"/push/deviceRegistrations/"+encodeURIComponent(u),i,a,null,(function(e){return t(e)}))):t(new c.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"removeWhere",arguments);t=l}n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),s.default.delete(n,"/push/deviceRegistrations",i,e,null,(function(e){return t(e)}))},e}(),f=function(){function e(t){this.remove=e.prototype.removeWhere,this.rest=t}return e.prototype.save=function(e,t){var n=this.rest,r=u.default.fromValues(e),i=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,a=o.defaultPostHeaders(n.options,i),c={};if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"save",arguments);t=l}n.options.headers&&o.mixin(a,n.options.headers),n.options.pushFullWait&&o.mixin(c,{fullWait:"true"});var p=o.encodeBody(r,i);s.default.post(n,"/push/channelSubscriptions",p,a,c,null,(function(e,n,r,o){t(e,!e&&u.default.fromResponseBody(n,o?void 0:i))}))},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"list",arguments);t=l}n.options.headers&&o.mixin(s,n.options.headers),new a.default(n,"/push/channelSubscriptions",s,i,(function(e,t,n){return u.default.fromResponseBody(e,n?void 0:r)})).get(e,t)},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"removeWhere",arguments);t=l}n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),s.default.delete(n,"/push/channelSubscriptions",i,e,null,(function(e){return t(e)}))},e.prototype.listChannels=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"listChannels",arguments);t=l}n.options.headers&&o.mixin(s,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),new a.default(n,"/push/channels",s,i,(function(e,t,n){for(var i=!n&&r?o.decodeBody(e,r):e,s=0;s<i.length;s++)i[s]=String(i[s]);return i})).get(e,t)},e}();t.default=function(e){this.rest=e,this.admin=new p(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(0),s=i.__importStar(n(1)),a=i.__importDefault(n(4));!function(e){e.Phone="phone",e.Tablet="tablet",e.Desktop="desktop",e.TV="tv",e.Watch="watch",e.Car="car",e.Embedded="embedded",e.Other="other"}(r||(r={})),function(e){e.Android="android",e.IOS="ios",e.Browser="browser"}(o||(o={}));var c=function(){function e(){}return e.prototype.toJSON=function(){var e,t,n;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null===(e=this.push)||void 0===e?void 0:e.recipient,state:null===(t=this.push)||void 0===t?void 0:t.state,error:null===(n=this.push)||void 0===n?void 0:n.error}}},e.prototype.toString=function(){var e,t,n,r,o="[DeviceDetails";return this.id&&(o+="; id="+this.id),this.platform&&(o+="; platform="+this.platform),this.formFactor&&(o+="; formFactor="+this.formFactor),this.clientId&&(o+="; clientId="+this.clientId),this.metadata&&(o+="; metadata="+this.metadata),this.deviceIdentityToken&&(o+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null===(e=this.push)||void 0===e?void 0:e.recipient)&&(o+="; push.recipient="+JSON.stringify(this.push.recipient)),(null===(t=this.push)||void 0===t?void 0:t.state)&&(o+="; push.state="+this.push.state),(null===(n=this.push)||void 0===n?void 0:n.error)&&(o+="; push.error="+JSON.stringify(this.push.error)),(null===(r=this.push)||void 0===r?void 0:r.metadata)&&(o+="; push.metadata="+this.push.metadata),o+"]"},e.fromResponseBody=function(t,n){return n&&(t=s.decodeBody(t,n)),s.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return t.error=t.error&&a.default.fromValues(t.error),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.toRequestBody=s.encodeBody,e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),o=function(){function e(){}return e.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},e.prototype.toString=function(){var e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+"]"},e.fromResponseBody=function(t,n){return n&&(t=r.decodeBody(t,n)),r.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.toRequestBody=r.encodeBody,e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=function(e){this.count=e&&e.count||0,this.data=e&&e.data||0,this.uncompressedData=e&&e.uncompressedData||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},s=function(e){function t(t){var n=e.call(this,t)||this;return t&&t.category&&(n.category={},o.forInOwnNonNullProperties(t.category,(function(e){n.category[e]=new i(t.category[e])}))),n}return r.__extends(t,e),t}(i),a=function(e){this.peak=e&&e.peak||0,this.min=e&&e.min||0,this.mean=e&&e.mean||0,this.opened=e&&e.opened||0,this.refused=e&&e.refused||0},c=function(e){this.succeeded=e&&e.succeeded||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},u=function(e){this.plain=new a(e&&e.plain),this.tls=new a(e&&e.tls),this.all=new a(e&&e.all)},l=function(e){this.messages=new s(e&&e.messages),this.presence=new s(e&&e.presence),this.all=new s(e&&e.all)},p=function(e){this.realtime=new l(e&&e.realtime),this.rest=new l(e&&e.rest),this.webhook=new l(e&&e.webhook),this.sharedQueue=new l(e&&e.sharedQueue),this.externalQueue=new l(e&&e.externalQueue),this.httpEvent=new l(e&&e.httpEvent),this.push=new l(e&&e.push),this.all=new l(e&&e.all)},d=function(e){this.all=new l(e&&e.all),this.inbound=new p(e&&e.inbound),this.outbound=new p(e&&e.outbound)},f=function(e){this.all=new l(e&&e.all),this.producerPaid=new d(e&&e.producerPaid),this.consumerPaid=new d(e&&e.consumerPaid)},h=function(e){this.messages=e&&e.messages||0;var t=e&&e.notifications;this.notifications={invalid:t&&t.invalid||0,attempted:t&&t.attempted||0,successful:t&&t.successful||0,failed:t&&t.failed||0},this.directPublishes=e&&e.directPublishes||0},g=function(e){this.succeeded=e&&e.succeeded||0,this.skipped=e&&e.skipped||0,this.failed=e&&e.failed||0},m=function(e){var t=this;this.delta=void 0,e&&e.delta&&(this.delta={},o.forInOwnNonNullProperties(e.delta,(function(n){t.delta[n]=new g(e.delta[n])})))},y=function(e){function t(t){var n=e.call(this,t)||this;return n.persisted=new l(t&&t.persisted),n.connections=new u(t&&t.connections),n.channels=new a(t&&t.channels),n.apiRequests=new c(t&&t.apiRequests),n.tokenRequests=new c(t&&t.tokenRequests),n.xchgProducer=new f(t&&t.xchgProducer),n.xchgConsumer=new f(t&&t.xchgConsumer),n.push=new h(t&&t.pushStats),n.processed=new m(t&&t.processed),n.inProgress=t&&t.inProgress||void 0,n.unit=t&&t.unit||void 0,n.intervalId=t&&t.intervalId||void 0,n}return r.__extends(t,e),t.fromValues=function(e){return new t(e)},t}(d);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(30)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(51)),u=r.__importDefault(n(38)),l=r.__importDefault(n(8)),p=r.__importDefault(n(4)),d=r.__importDefault(n(10)),f=r.__importDefault(n(35)),h=r.__importDefault(n(3)),g=r.__importDefault(n(9)),m=function(e){function t(t){var n=e.call(this,t)||this;return a.default.logAction(a.default.LOG_MINOR,"Realtime()",""),n.connection=new c.default(n,n.options),n.channels=new y(n),!1!==t.autoConnect&&n.connect(),n}return r.__extends(t,e),t.prototype.connect=function(){a.default.logAction(a.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},t.prototype.close=function(){a.default.logAction(a.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},t.Promise=function(e){return(e=l.default.objectifyOptions(e)).promises=!0,new t(e)},t.Callbacks=t,t.Utils=o,t.ConnectionManager=f.default,t.Platform=h.default,t.ProtocolMessage=d.default,t.Message=g.default,t}(i.default),y=function(e){function t(t){var n=e.call(this)||this;return n.realtime=t,n.all=Object.create(null),t.connection.connectionManager.on("transport.active",(function(){n.onTransportActive()})),n}return r.__extends(t,e),t.prototype.channelSerials=function(){for(var e={},t=0,n=o.keysArray(this.all,!0);t<n.length;t++){var r=n[t],i=this.all[r];i.properties.channelSerial&&(e[r]=i.properties.channelSerial)}return e},t.prototype.recoverChannels=function(e){for(var t=0,n=o.keysArray(e,!0);t<n.length;t++){var r=n[t];this.get(r).properties.channelSerial=e[r]}},t.prototype.onChannelMessage=function(e){var t=e.channel;if(void 0!==t){var n=this.all[t];n?n.onMessage(e):a.default.logAction(a.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+t)}else a.default.logAction(a.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+e.action)},t.prototype.onTransportActive=function(){for(var e in this.all){var t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&t.requestState("attaching")}},t.prototype.propogateConnectionInterruption=function(e,t){var n=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(var i in this.all){var s=this.all[i];o.arrIn(n,s.state)&&s.notifyState(r,t)}},t.prototype.get=function(e,t){e=String(e);var n=this.all[e];if(n){if(t){if(n._shouldReattachToSetOptions(t))throw new p.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);n.setOptions(t)}}else n=this.all[e]=new u.default(this.realtime,e,t);return n},t.prototype.getDerived=function(e,t,n){if(t.filter){var r=o.toBase64(t.filter),i=o.matchDerivedChannel(e);e="[filter=".concat(r).concat(i.qualifierParam,"]").concat(i.channelName)}return this.get(e,n)},t.prototype.release=function(e){e=String(e);var t=this.all[e];if(t){var n=t.getReleaseErr();if(n)throw n;delete this.all[e]}},t}(s.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importDefault(n(35)),a=r.__importDefault(n(2)),c=r.__importDefault(n(37)),u=r.__importDefault(n(3));function l(){}var p=function(e){function t(t,n){var r=e.call(this)||this;return r.whenState=function(e,t){return i.default.prototype.whenState.call(r,e,r.state,t,new c.default(void 0,e))},r.ably=t,r.connectionManager=new s.default(t,n),r.state=r.connectionManager.state.state,r.key=void 0,r.id=void 0,r.errorReason=null,r.connectionManager.on("connectionstate",(function(e){var t=r.state=e.current;u.default.Config.nextTick((function(){r.emit(t,e)}))})),r.connectionManager.on("update",(function(e){u.default.Config.nextTick((function(){r.emit("update",e)}))})),r}return r.__extends(t,e),t.prototype.connect=function(){a.default.logAction(a.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},t.prototype.ping=function(e){if(a.default.logAction(a.default.LOG_MINOR,"Connection.ping()",""),!e){if(this.ably.options.promises)return o.promisify(this,"ping",arguments);e=l}this.connectionManager.ping(null,e)},t.prototype.close=function(){a.default.logAction(a.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(t.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),t.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},t}(i.default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingMessage=void 0;var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(36)),u=r.__importDefault(n(4)),l=o.default.Action;t.PendingMessage=function(e,t){this.message=e,this.callback=t,this.merged=!1;var n=e.action;this.sendAttempted=!1,this.ackRequired=n==l.MESSAGE||n==l.PRESENCE};var p=function(e){function t(t){var n=e.call(this)||this;return n.transport=t,n.messageQueue=new c.default,t.on("ack",(function(e,t){n.onAck(e,t)})),t.on("nack",(function(e,t,r){n.onNack(e,t,r)})),n}return r.__extends(t,e),t.prototype.onAck=function(e,t){a.default.logAction(a.default.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages(e,t)},t.prototype.onNack=function(e,t,n){a.default.logAction(a.default.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+i.inspectError(n)),n||(n=new u.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(e,t,n)},t.prototype.onceIdle=function(e){var t=this.messageQueue;0!==t.count()?t.once("idle",e):e()},t.prototype.send=function(e){e.ackRequired&&this.messageQueue.push(e),a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Protocol.send()","sending msg; "+o.default.stringify(e.message)),e.sendAttempted=!0,this.transport.send(e.message)},t.prototype.getTransport=function(){return this.transport},t.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},t.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},t.prototype.finish=function(){var e=this.transport;this.onceIdle((function(){e.disconnect()}))},t}(s.default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),s=r.__importDefault(n(26)),a=r.__importDefault(n(8)),c=r.__importDefault(n(2)),u=r.__importDefault(n(10)),l=r.__importDefault(n(4)),p="web_socket",d=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.shortName=p,r.heartbeats=o.default.Config.useProtocolHeartbeats,i.wsHost=a.default.getHost(r.options,r.host,!0),i}return r.__extends(t,e),t.isAvailable=function(){return!!o.default.Config.WebSocket},t.prototype.createWebSocket=function(e,t){return this.uri=e+i.toQueryString(t),new o.default.Config.WebSocket(this.uri)},t.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},t.prototype.connect=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),s.default.prototype.connect.call(this);var e=this,t=this.params,n=t.options,r=(n.tls?"wss://":"ws://")+this.wsHost+":"+a.default.getPort(n)+"/";c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+r),this.auth.getAuthParams((function(n,i){if(!e.isDisposed){var s="";for(var a in i)s+=" "+a+": "+i[a]+";";if(c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+s+" err: "+n),n)e.disconnect(n);else{var u=t.getConnectParams(i);try{var l=e.wsConnection=e.createWebSocket(r,u);l.binaryType=o.default.Config.binaryType,l.onopen=function(){e.onWsOpen()},l.onclose=function(t){e.onWsClose(t)},l.onmessage=function(t){e.onWsData(t.data)},l.onerror=function(t){e.onWsError(t)},l.on&&l.on("ping",(function(){e.onActivity()}))}catch(t){c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(t.stack||t.message)),e.disconnect(t)}}}}))},t.prototype.send=function(e){var t=this.wsConnection;if(t)try{t.send(u.default.serialize(e,this.params.format))}catch(e){var n="Exception from ws connection when trying to send: "+i.inspectError(e);c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.send()",n),this.finish("disconnected",new l.default(n,5e4,500))}else c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection")},t.prototype.onWsData=function(e){c.default.logAction(c.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage(u.default.deserialize(e,this.format))}catch(e){c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+e.stack)}},t.prototype.onWsOpen=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},t.prototype.onWsClose=function(e){var t,n;if("object"==typeof e?(n=e.code,t=e.wasClean||1e3===n):t=1e3==(n=e),delete this.wsConnection,t){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var r=new l.default("Websocket closed",80003,400);this.finish("disconnected",r)}else{var o="Unclean disconnection of WebSocket ; code = "+n;r=new l.default(o,80003,400),c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsClose()",o),this.finish("disconnected",r)}this.emit("disposed")},t.prototype.onWsError=function(e){var t=this;c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),o.default.Config.nextTick((function(){t.disconnect(Error(e.message))}))},t.prototype.dispose=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,o.default.Config.nextTick((function(){if(c.default.logAction(c.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()})))},t}(s.default);t.default=function(e){return d.isAvailable()&&(e.supportedTransports[p]=d),d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(34)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(14)),u=r.__importStar(n(4)),l=r.__importDefault(n(38)),p=r.__importDefault(n(22)),d=r.__importDefault(n(39)),f=function(){};function h(e){var t=e.channel.realtime,n=t.auth.clientId;return(!n||"*"===n)&&"connected"===t.connection.state}function g(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;var n=e.parseId(),r=t.parseId();return n.msgSerial===r.msgSerial?n.index>r.index:n.msgSerial>r.msgSerial}var m=function(e){function t(t){var n=e.call(this,t)||this;return n.channel=t,n.syncComplete=!1,n.members=new y(n,(function(e){return e.clientId+":"+e.connectionId})),n._myMembers=new y(n,(function(e){return e.clientId})),n.subscriptions=new s.default,n.pendingPresence=[],n}return r.__extends(t,e),t.prototype.enter=function(e,t){if(h(this))throw new u.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter",t)},t.prototype.update=function(e,t){if(h(this))throw new u.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update",t)},t.prototype.enterClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"enter",n)},t.prototype.updateClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"update",n)},t.prototype._enterOrUpdateClient=function(e,t,n,r,i){var s=this;if(!i)if("function"==typeof n)i=n,n=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"_enterOrUpdateClient",[e,t,n,r]);i=f}var l=this.channel;if(l.connectionManager.activeState()){a.default.logAction(a.default.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+l.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.realtime.auth.clientId));var p=c.default.fromValues({action:r,data:n});e&&(p.id=e),t&&(p.clientId=t),c.default.encode(p,l.channelOptions,(function(e){if(e)i(e);else switch(l.state){case"attached":l.sendPresence(p,i);break;case"initialized":case"detached":l.attach();case"attaching":s.pendingPresence.push({presence:p,callback:i});break;default:(e=new u.PartialErrorInfo("Unable to "+r+" presence channel while in "+l.state+" state",90001)).code=90001,i(e)}}))}else i(l.connectionManager.getError())},t.prototype.leave=function(e,t){if(h(this))throw new u.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e,t)},t.prototype.leaveClient=function(e,t,n){if(!n)if("function"==typeof t)n=t,t=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"leaveClient",[e,t]);n=f}var r=this.channel;if(r.connectionManager.activeState()){a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);var i=c.default.fromValues({action:"leave",data:t});switch(e&&(i.clientId=e),r.state){case"attached":r.sendPresence(i,n);break;case"attaching":this.pendingPresence.push({presence:i,callback:n});break;case"initialized":case"failed":var s=new u.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);null==n||n(s);break;default:null==n||n(r.invalidStateError())}}else null==n||n(r.connectionManager.getError())},t.prototype.get=function(e,t){var n=this,r=Array.prototype.slice.call(arguments);1==r.length&&"function"==typeof r[0]&&r.unshift(null),e=r[0],t=r[1];var i=!e||!("waitForSync"in e)||e.waitForSync;if(!t){if(this.channel.realtime.options.promises)return o.promisify(this,"get",r);t=f}function s(n){t(null,e?n.list(e):n.values())}"suspended"!==this.channel.state?function(e,t,n){switch(e.state){case"attached":case"suspended":n();break;case"initialized":case"detached":case"detaching":case"attaching":e.attach((function(e){e?t(e):n()}));break;default:t(u.default.fromValues(e.invalidStateError()))}}(this.channel,t,(function(){var e=n.members;i?e.waitSync((function(){s(e)})):s(e)})):i?t(u.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):s(this.members)},t.prototype.history=function(e,t){if(a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"history",arguments);t=f}e&&e.untilAttach&&("attached"===this.channel.state?(delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial):t(new u.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),i.default.prototype._history.call(this,e,t)},t.prototype.setPresence=function(e,t,n){var r,o;a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+n);var i=this.members,s=this._myMembers,u=[],l=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),n&&(o=n.match(/^[\w-]+:(.*)$/))&&(r=o[1]));for(var p=0;p<e.length;p++)switch((d=c.default.fromValues(e[p])).action){case"leave":i.remove(d)&&u.push(d),d.connectionId!==l||d.isSynthesized()||s.remove(d);break;case"enter":case"present":case"update":i.put(d)&&u.push(d),d.connectionId===l&&s.put(d)}for(t&&!r&&(i.endSync(),this.channel.syncChannelSerial=null),p=0;p<u.length;p++){var d=u[p];this.subscriptions.emit(d.action,d)}},t.prototype.onAttached=function(e){a.default.logAction(a.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var t=this.pendingPresence,n=t.length;if(n){this.pendingPresence=[];var r=[],o=p.default.create();a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+n+" queued presence messages");for(var i=0;i<n;i++){var s=t[i];r.push(s.presence),o.push(s.callback)}this.channel.sendPresence(r,o)}},t.prototype.actOnChannelState=function(e,t,n){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(n)}},t.prototype.failPendingPresence=function(e){if(this.pendingPresence.length){a.default.logAction(a.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+o.inspectError(e));for(var t=0;t<this.pendingPresence.length;t++)try{this.pendingPresence[t].callback(e)}catch(e){}this.pendingPresence=[]}},t.prototype._clearMyMembers=function(){this._myMembers.clear()},t.prototype._ensureMyMembersPresent=function(){var e=this,t=this._myMembers,n=function(t){if(t){var n="Presence auto-re-enter failed: "+t.toString(),r=new u.default(n,91004,400);a.default.logAction(a.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",n);var o=new d.default(e.channel.state,e.channel.state,!0,!1,r);e.channel.emit("update",o)}};for(var r in t.map){var o=t.map[r];a.default.logAction(a.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+o.clientId+'" into the presence set'),this._enterOrUpdateClient(o.id,o.clientId,o.data,"enter",n)}},t.prototype._synthesizeLeaves=function(e){var t=this.subscriptions;o.arrForEach(e,(function(e){var n=c.default.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:o.now()});t.emit("leave",n)}))},t.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.deprecated("presence.on","presence.subscribe"),this.subscribe.apply(this,e)},t.prototype.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.deprecated("presence.off","presence.unsubscribe"),this.unsubscribe.apply(this,e)},t.prototype.subscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=l.default.processListenerArgs(e),r=n[0],i=n[1],s=n[2],a=this.channel;if(!s){if(this.channel.realtime.options.promises)return o.promisify(this,"subscribe",[r,i]);s=f}"failed"!==a.state?(this.subscriptions.on(r,i),a.attach(s)):s(u.default.fromValues(a.invalidStateError()))},t.prototype.unsubscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=l.default.processListenerArgs(e),r=n[0],o=n[1];this.subscriptions.off(r,o)},t}(i.default),y=function(e){function t(t,n){var r=e.call(this)||this;return r.presence=t,r.map=Object.create(null),r.syncInProgress=!1,r.residualMembers=null,r.memberKey=n,r}return r.__extends(t,e),t.prototype.get=function(e){return this.map[e]},t.prototype.getClient=function(e){var t=this.map,n=[];for(var r in t){var o=t[r];o.clientId==e&&"absent"!=o.action&&n.push(o)}return n},t.prototype.list=function(e){var t=this.map,n=e&&e.clientId,r=e&&e.connectionId,o=[];for(var i in t){var s=t[i];"absent"!==s.action&&(n&&n!=s.clientId||r&&r!=s.connectionId||o.push(s))}return o},t.prototype.put=function(e){"enter"!==e.action&&"update"!==e.action||((e=c.default.fromValues(e)).action="present");var t=this.map,n=this.memberKey(e);this.residualMembers&&delete this.residualMembers[n];var r=t[n];return!(r&&!g(e,r)||(t[n]=e,0))},t.prototype.values=function(){var e=this.map,t=[];for(var n in e){var r=e[n];"absent"!=r.action&&t.push(r)}return t},t.prototype.remove=function(e){var t=this.map,n=this.memberKey(e),r=t[n];return!(r&&!g(e,r)||(this.syncInProgress?((e=c.default.fromValues(e)).action="absent",t[n]=e):delete t[n],0))},t.prototype.startSync=function(){var e=this.map,t=this.syncInProgress;a.default.logAction(a.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=o.copy(e),this.setInProgress(!0))},t.prototype.endSync=function(){var e=this.map,t=this.syncInProgress;if(a.default.logAction(a.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(var n in e)"absent"===e[n].action&&delete e[n];for(var n in this.presence._synthesizeLeaves(o.valuesArray(this.residualMembers)),this.residualMembers)delete e[n];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},t.prototype.waitSync=function(e){var t=this.syncInProgress;a.default.logAction(a.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t?this.once("sync",e):e()},t.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},t.prototype.setInProgress=function(e){a.default.logAction(a.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e},t}(s.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(56),i=n(31),s=n(11),a=r.__importDefault(n(5)),c=r.__importDefault(n(3)),u=function(){function e(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return e.prototype.isWordArray=function(e){return null!=e&&void 0!==e.sigBytes},e.prototype.isArrayBuffer=function(e){return null!=e&&e.constructor===ArrayBuffer},e.prototype.isTypedArray=function(e){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)},e.prototype.uint8ViewToBase64=function(e){for(var t,n,r,o,i="",s=this.base64CharSet,a=e.byteLength,c=a%3,u=a-c,l=0;l<u;l+=3)t=(258048&(o=e[l]<<16|e[l+1]<<8|e[l+2]))>>12,n=(4032&o)>>6,r=63&o,i+=s[(16515072&o)>>18]+s[t]+s[n]+s[r];return 1==c?(t=(3&(o=e[u]))<<4,i+=s[(252&o)>>2]+s[t]+"=="):2==c&&(t=(1008&(o=e[u]<<8|e[u+1]))>>4,n=(15&o)<<2,i+=s[(64512&o)>>10]+s[t]+s[n]+"="),i},e.prototype.base64ToArrayBuffer=function(e){for(var t=null===atob||void 0===atob?void 0:atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++){var i=t.charCodeAt(o);r[o]=i}return r.buffer},e.prototype.isBuffer=function(e){return this.isArrayBuffer(e)||this.isWordArray(e)||this.isTypedArray(e)},e.prototype.toBuffer=function(e){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(e))return new Uint8Array(e);if(this.isTypedArray(e))return new Uint8Array(e.buffer);if(this.isWordArray(e)){for(var t=new ArrayBuffer(e.sigBytes),n=new Uint8Array(t),r=0;r<e.sigBytes;r++)n[r]=e.words[r>>>2]>>>24-r%4*8&255;return n}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},e.prototype.toArrayBuffer=function(e){return this.isArrayBuffer(e)?e:this.toBuffer(e).buffer},e.prototype.toWordArray=function(e){return this.isTypedArray(e)&&(e=e.buffer),this.isWordArray(e)?e:a.default.create(e)},e.prototype.base64Encode=function(e){return this.isWordArray(e)?(0,s.stringify)(e):this.uint8ViewToBase64(this.toBuffer(e))},e.prototype.base64Decode=function(e){return ArrayBuffer&&c.default.Config.atob?this.base64ToArrayBuffer(e):(0,s.parse)(e)},e.prototype.hexEncode=function(e){return(0,o.stringify)(this.toWordArray(e))},e.prototype.hexDecode=function(e){var t=(0,o.parse)(e);return ArrayBuffer?this.toArrayBuffer(t):t},e.prototype.utf8Encode=function(e){return c.default.Config.TextEncoder?(new c.default.Config.TextEncoder).encode(e).buffer:(0,i.parse)(e)},e.prototype.utf8Decode=function(e){if(!this.isBuffer(e))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(e)?(new TextDecoder).decode(e):(e=this.toWordArray(e),(0,i.stringify)(e))},e.prototype.bufferCompare=function(e,t){if(!e)return-1;if(!t)return 1;var n=this.toWordArray(e),r=this.toWordArray(t);n.clamp(),r.clamp();var o=n.sigBytes-r.sigBytes;if(0!=o)return o;for(var i=n.words,s=r.words,a=0;a<i.length;a++)if(0!=(o=i[a]-s[a]))return o;return 0},e.prototype.byteLength=function(e){return this.isArrayBuffer(e)||this.isTypedArray(e)?e.byteLength:this.isWordArray(e)?e.sigBytes:-1},e.prototype.typedArrayToBuffer=function(e){return e.buffer},e}();t.default=new u},function(e,t,n){e.exports=n(6).enc.Hex},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(11),s=n(21),a=n.n(s),c=n(2),u=n.n(c),l=n(4),p=n.n(l);t.default=function(e,t){var n;if(e.getRandomWordArray)n=e.getRandomWordArray;else if("undefined"!=typeof Uint32Array&&e.getRandomValues){var r=new Uint32Array(4);n=function(n,o){var i=n/4,s=4==i?r:new Uint32Array(i);e.getRandomValues(s,(function(e){void 0!==o&&o(e,t.toWordArray(s))}))}}else n=function(e,t){u.a.logAction(u.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var n=e/4,r=new Array(n),i=0;i<n;i++)r[i]=Math.floor(4294967296*Math.random())-2147483648;t(null,o.a.create(r))};var s=[o.a.create([269488144,269488144,269488144,269488144],16),o.a.create([16777216],1),o.a.create([33685504],2),o.a.create([50529024],3),o.a.create([67372036],4),o.a.create([84215045,83886080],5),o.a.create([101058054,101056512],6),o.a.create([117901063,117901056],7),o.a.create([134744072,134744072],8),o.a.create([151587081,151587081,150994944],9),o.a.create([168430090,168430090,168427520],10),o.a.create([185273099,185273099,185273088],11),o.a.create([202116108,202116108,202116108],12),o.a.create([218959117,218959117,218959117,218103808],13),o.a.create([235802126,235802126,235802126,235798528],14),o.a.create([252645135,252645135,252645135,252645135],15),o.a.create([269488144,269488144,269488144,269488144],16)];function c(){}function l(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}function d(e,n,r){this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.cjsAlgorithm=e.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=t.toWordArray(e.key),r&&(this.iv=t.toWordArray(r).clone()),this.blockLengthWords=n}return c.CipherParams=l,c.getDefaultParams=function(e){var n;if("function"!=typeof e&&"string"!=typeof e){if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");n="string"==typeof e.key?Object(i.parse)(e.key.replace("_","/").replace("-","+")):t.toWordArray(e.key);var r=new l;if(r.key=n,r.algorithm=e.algorithm||"aes",r.keyLength=32*n.words.length,r.mode=e.mode||"cbc",e.keyLength&&e.keyLength!==r.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+r.keyLength);return function(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}(r),r}if(u.a.deprecated("Crypto.getDefaultParams(key, callback)","Crypto.getDefaultParams({key: key})"),"function"==typeof e)c.generateRandomKey((function(t){e(null,c.getDefaultParams({key:t}))}));else{if("function"!=typeof arguments[1])throw new Error("Invalid arguments for Crypto.getDefaultParams");arguments[1](null,c.getDefaultParams({key:e}))}},c.generateRandomKey=function(e,t){1==arguments.length&&"function"==typeof e&&(t=e,e=void 0),n((e||256)/8,(function(e,n){void 0!==t&&t(e?p.a.fromValues(e):null,n)}))},c.getCipher=function(e){var t=e instanceof l?e:c.getDefaultParams(e);return{cipherParams:t,cipher:new d(t,4,e.iv)}},d.prototype.encrypt=function(e,r){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.encrypt()","");var o=(e=t.toWordArray(e)).sigBytes,i=function(e){return e+16&-16}(o),c=this,l=function(){c.getIv((function(t,n){if(t)r(t);else{var a=c.encryptCipher.process(e.concat(s[i-o])),u=n.concat(a);r(null,u)}}))};this.encryptCipher?l():this.iv?(this.encryptCipher=a.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),l()):n(16,(function(e,t){e?r(e):(c.encryptCipher=a.a.algo[c.cjsAlgorithm].createEncryptor(c.key,{iv:t}),c.iv=t,l())}))},d.prototype.decrypt=function(e){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.decrypt()",""),e=t.toWordArray(e);var n=this.blockLengthWords,r=e.words,i=o.a.create(r.slice(0,n)),s=o.a.create(r.slice(n)),c=a.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:i}),l=c.process(s),p=c.finalize();return c.reset(),p&&p.sigBytes&&l.concat(p),l},d.prototype.getIv=function(e){if(this.iv){var t=this.iv;return this.iv=null,void e(null,t)}var r=this;n(16,(function(t,n){t?e(t):e(null,r.encryptCipher.process(n))}))},c}},function(e,t,n){var r;e.exports=(r=n(6),function(){var e=r,t=e.lib.WordArray,n=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var s=o(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return t.create(r,2*n)}}}(),r.enc.Utf16)},function(e,t,n){var r,o,i,s;e.exports=(s=n(6),n(28),o=(r=s).lib.CipherParams,i=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return o.create({ciphertext:t})}},s.format.Hex)},function(e,t,n){var r;e.exports=(r=n(6),n(11),n(61),n(27),n(28),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,o=[],i=[],s=[],a=[],c=[],u=[],l=[],p=[],d=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var h=r^r<<1^r<<2^r<<3^r<<4;h=h>>>8^255&h^99,o[n]=h,i[h]=n;var g=e[n],m=e[g],y=e[m],v=257*e[h]^16843008*h;s[n]=v<<24|v>>>8,a[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,u[n]=v,v=16843009*y^65537*m^257*g^16843008*n,l[h]=v<<24|v>>>8,p[h]=v<<16|v>>>16,d[h]=v<<8|v>>>24,f[h]=v,n?(n=g^e[e[e[y^g]]],r^=e[e[r]]):n=r=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],s=0;s<r;s++)s<n?i[s]=t[s]:(u=i[s-1],s%n?n>6&&s%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=h[s/n|0]<<24),i[s]=i[s-n]^u);for(var a=this._invKeySchedule=[],c=0;c<r;c++){if(s=r-c,c%4)var u=i[s];else u=i[s-4];a[c]=c<4||s<=4?u:l[o[u>>>24]]^p[o[u>>>16&255]]^d[o[u>>>8&255]]^f[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,p,d,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,s,a){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],p=e[t+2]^n[2],d=e[t+3]^n[3],f=4,h=1;h<c;h++){var g=r[u>>>24]^o[l>>>16&255]^i[p>>>8&255]^s[255&d]^n[f++],m=r[l>>>24]^o[p>>>16&255]^i[d>>>8&255]^s[255&u]^n[f++],y=r[p>>>24]^o[d>>>16&255]^i[u>>>8&255]^s[255&l]^n[f++],v=r[d>>>24]^o[u>>>16&255]^i[l>>>8&255]^s[255&p]^n[f++];u=g,l=m,p=y,d=v}g=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&d])^n[f++],m=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[d>>>8&255]<<8|a[255&u])^n[f++],y=(a[p>>>24]<<24|a[d>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[f++],v=(a[d>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^n[f++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(g)}(),r.AES)},function(e,t,n){var r;e.exports=(r=n(6),function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],h=e[t+3],g=e[t+4],m=e[t+5],y=e[t+6],v=e[t+7],_=e[t+8],b=e[t+9],E=e[t+10],S=e[t+11],w=e[t+12],T=e[t+13],O=e[t+14],C=e[t+15],R=i[0],M=i[1],P=i[2],k=i[3];R=u(R,M,P,k,s,7,a[0]),k=u(k,R,M,P,c,12,a[1]),P=u(P,k,R,M,f,17,a[2]),M=u(M,P,k,R,h,22,a[3]),R=u(R,M,P,k,g,7,a[4]),k=u(k,R,M,P,m,12,a[5]),P=u(P,k,R,M,y,17,a[6]),M=u(M,P,k,R,v,22,a[7]),R=u(R,M,P,k,_,7,a[8]),k=u(k,R,M,P,b,12,a[9]),P=u(P,k,R,M,E,17,a[10]),M=u(M,P,k,R,S,22,a[11]),R=u(R,M,P,k,w,7,a[12]),k=u(k,R,M,P,T,12,a[13]),P=u(P,k,R,M,O,17,a[14]),R=l(R,M=u(M,P,k,R,C,22,a[15]),P,k,c,5,a[16]),k=l(k,R,M,P,y,9,a[17]),P=l(P,k,R,M,S,14,a[18]),M=l(M,P,k,R,s,20,a[19]),R=l(R,M,P,k,m,5,a[20]),k=l(k,R,M,P,E,9,a[21]),P=l(P,k,R,M,C,14,a[22]),M=l(M,P,k,R,g,20,a[23]),R=l(R,M,P,k,b,5,a[24]),k=l(k,R,M,P,O,9,a[25]),P=l(P,k,R,M,h,14,a[26]),M=l(M,P,k,R,_,20,a[27]),R=l(R,M,P,k,T,5,a[28]),k=l(k,R,M,P,f,9,a[29]),P=l(P,k,R,M,v,14,a[30]),R=p(R,M=l(M,P,k,R,w,20,a[31]),P,k,m,4,a[32]),k=p(k,R,M,P,_,11,a[33]),P=p(P,k,R,M,S,16,a[34]),M=p(M,P,k,R,O,23,a[35]),R=p(R,M,P,k,c,4,a[36]),k=p(k,R,M,P,g,11,a[37]),P=p(P,k,R,M,v,16,a[38]),M=p(M,P,k,R,E,23,a[39]),R=p(R,M,P,k,T,4,a[40]),k=p(k,R,M,P,s,11,a[41]),P=p(P,k,R,M,h,16,a[42]),M=p(M,P,k,R,y,23,a[43]),R=p(R,M,P,k,b,4,a[44]),k=p(k,R,M,P,w,11,a[45]),P=p(P,k,R,M,C,16,a[46]),R=d(R,M=p(M,P,k,R,f,23,a[47]),P,k,s,6,a[48]),k=d(k,R,M,P,v,10,a[49]),P=d(P,k,R,M,O,15,a[50]),M=d(M,P,k,R,m,21,a[51]),R=d(R,M,P,k,w,6,a[52]),k=d(k,R,M,P,h,10,a[53]),P=d(P,k,R,M,E,15,a[54]),M=d(M,P,k,R,c,21,a[55]),R=d(R,M,P,k,_,6,a[56]),k=d(k,R,M,P,C,10,a[57]),P=d(P,k,R,M,y,15,a[58]),M=d(M,P,k,R,T,21,a[59]),R=d(R,M,P,k,g,6,a[60]),k=d(k,R,M,P,S,10,a[61]),P=d(P,k,R,M,f,15,a[62]),M=d(M,P,k,R,b,21,a[63]),i[0]=i[0]+R|0,i[1]=i[1]+M|0,i[2]=i[2]+P|0,i[3]=i[3]+k|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var i=e.floor(r/4294967296),s=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,o,i,s){var a=e+(t&n|~t&r)+o+s;return(a<<i|a>>>32-i)+t}function l(e,t,n,r,o,i,s){var a=e+(t&r|n&~r)+o+s;return(a<<i|a>>>32-i)+t}function p(e,t,n,r,o,i,s){var a=e+(t^n^r)+o+s;return(a<<i|a>>>32-i)+t}function d(e,t,n,r,o,i,s){var a=e+(n^(t|~r))+o+s;return(a<<i|a>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),r.MD5)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=o.__importDefault(n(3)),s=o.__importStar(n(1)),a=o.__importDefault(n(8)),c=n(4),u=o.__importDefault(n(17)),l=o.__importDefault(n(15)),p=o.__importDefault(n(20)),d=o.__importDefault(n(2)),f=n(29),h=o.__importDefault(n(63)),g=n(24);function m(e){var t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}function y(e){var t=e.connection,n=t&&t.connectionManager.host;return n?[n].concat(a.default.getFallbackHosts(e.options)):a.default.getHosts(e.options)}var v=(r=function(){function e(e){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=y,this.options=e||{};var t=this.options.connectivityCheckUrl||a.default.connectivityCheckUrl,n=this.options.connectivityCheckParams,r=!this.options.connectivityCheckUrl;i.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(e,t,n,r,o,i,s){var a=l.default.createRequest(n,r,o,i,p.default.REQ_SEND,t&&t.options.timeouts,e);return a.once("complete",s),a.exec(),a},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+t),this.doUri(u.default.Get,null,t,null,null,n,(function(t,n,o,i,s){var a;a=r?!t&&"yes"==(null==n?void 0:n.replace(/\n/,"")):!t&&(0,g.isSuccessCode)(s),d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+a),e(null,a)}))}):i.default.Config.jsonpSupported?(this.Request=function(e,t,n,r,o,s,a){var c=(0,f.createRequest)(n,r,o,s,p.default.REQ_SEND,t&&t.options.timeouts,e);return c.once("complete",a),i.default.Config.nextTick((function(){c.exec()})),c},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){var t=this,n=a.default.jsonpInternetUpUrl;if(this.checksInProgress)this.checksInProgress.push(e);else{this.checksInProgress=[e],d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+n);var r=new f.Request("isTheInternetUp",n,null,null,null,p.default.REQ_SEND,a.default.TIMEOUTS);r.once("complete",(function(e,n){var r=!e&&n;d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+r);for(var o=0;o<t.checksInProgress.length;o++)t.checksInProgress[o](null,r);t.checksInProgress=null})),i.default.Config.nextTick((function(){r.exec()}))}}):i.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=h.default,this.checkConnectivity=function(e){d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+t),this.doUri(u.default.Get,null,t,null,null,null,(function(t,n){var r=!t&&"yes"==(null==n?void 0:n.replace(/\n/,""));d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+r),e(null,r)}))}):this.Request=function(e,t,n,r,o,i,s){s(new c.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return e.prototype.do=function(e,t,n,r,i,a,u){var l=this,p="function"==typeof n?n:function(e){return t.baseUri(e)+n},d=t._currentFallback;if(d){if(d.validUntil>s.now())return this.Request?void this.Request(e,t,p(d.host),r,a,i,(function(s){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];if(s&&m(s))return t._currentFallback=null,void l.do(e,t,n,r,i,a,u);null==u||u.apply(void 0,o.__spreadArray([s],c,!1))})):void(null==u||u(new c.PartialErrorInfo("Request invoked before assigned to",null,500)));t._currentFallback=null}var f=y(t);if(1!==f.length){var h=function(n,c){var d=n.shift();l.doUri(e,t,p(d),r,i,a,(function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e&&m(e)&&n.length?h(n,!0):(c&&(t._currentFallback={host:d,validUntil:s.now()+t.options.timeouts.fallbackRetryTimeout}),null==u||u.apply(void 0,o.__spreadArray([e],r,!1)))}))};h(f)}else this.doUri(e,t,p(f[0]),r,i,a,u)},e.prototype.doUri=function(e,t,n,r,o,i,s){this.Request?this.Request(e,t,n,r,i,o,s):s(new c.PartialErrorInfo("Request invoked before assigned to",null,500))},e}(),r.methods=[u.default.Get,u.default.Delete,u.default.Post,u.default.Put,u.default.Patch],r.methodsWithoutBody=[u.default.Get,u.default.Delete],r.methodsWithBody=[u.default.Post,u.default.Put,u.default.Patch],r);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(4)),i=r.__importDefault(n(3)),s=r.__importDefault(n(8)),a=r.__importStar(n(1)),c=n(1);t.default=function(e,t,n,r,u,l,p){var d=new Headers(r||{}),f=e?e.toUpperCase():a.isEmptyArg(l)?"GET":"POST",h=new AbortController,g=setTimeout((function(){h.abort(),p(new o.PartialErrorInfo("Request timed out",null,408))}),t?t.options.timeouts.httpRequestTimeout:s.default.TIMEOUTS.httpRequestTimeout),m={method:f,headers:d,body:l};i.default.Config.isWebworker||(m.credentials=d.has("authorization")?"include":"same-origin"),(0,c.getGlobalObject)().fetch(n+"?"+new URLSearchParams(u||{}),m).then((function(e){clearTimeout(g);var t=e.headers.get("Content-Type");(t&&t.indexOf("application/x-msgpack")>-1?e.arrayBuffer():t&&t.indexOf("application/json")>-1?e.json():e.text()).then((function(n){var r=!!t&&-1===t.indexOf("application/x-msgpack");if(e.ok)p(null,n,e.headers,r,e.status);else{var s=function(e,t){if(function(e,t){return!!t.get("x-ably-errorcode")}(0,t))return e.error&&o.default.fromValues(e.error)}(n,e.headers)||new o.PartialErrorInfo("Error response received from server: "+e.status+" body was: "+i.default.Config.inspect(n),null,e.status);p(s,n,e.headers,r,e.status)}}))})).catch((function(e){clearTimeout(g),p(e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(41)),i=r.__importStar(n(1)).getGlobalObject();"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var s,a=i.navigator&&i.navigator.userAgent.toString(),c={agent:"browser",logTimestamps:!0,userAgent:a,currentUrl:i.location&&i.location.href,noUpgrade:a&&!!a.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:i.WebSocket,fetchSupported:!!i.fetch,xhrSupported:i.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:"undefined"!=typeof document,allowComet:(s=i.location,!i.WebSocket||!s||!s.origin||s.origin.indexOf("http")>-1),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:o.default,supportsBinary:!!i.TextDecoder,preferBinary:!1,ArrayBuffer:i.ArrayBuffer,atob:i.atob,nextTick:void 0!==i.setImmediate?i.setImmediate.bind(i):function(e){setTimeout(e,0)},addEventListener:i.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){return i.TextDecoder&&(new i.TextEncoder).encode(e).length||e.length},TextEncoder:i.TextEncoder,TextDecoder:i.TextDecoder,Promise:i.Promise,getRandomValues:function(e){if(void 0!==e)return function(t,n){e.getRandomValues(t),n&&n(null)}}(i.crypto||msCrypto)};t.default=c},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),o="ablyjs-storage-test",i=function(){function t(){try{e.sessionStorage.setItem(o,o),e.sessionStorage.removeItem(o),this.sessionSupported=!0}catch(e){this.sessionSupported=!1}try{e.localStorage.setItem(o,o),e.localStorage.removeItem(o),this.localSupported=!0}catch(e){this.localSupported=!1}}return t.prototype.get=function(e){return this._get(e,!1)},t.prototype.getSession=function(e){return this._get(e,!0)},t.prototype.remove=function(e){return this._remove(e,!1)},t.prototype.removeSession=function(e){return this._remove(e,!0)},t.prototype.set=function(e,t,n){return this._set(e,t,n,!1)},t.prototype.setSession=function(e,t,n){return this._set(e,t,n,!0)},t.prototype._set=function(e,t,n,o){var i={value:t};return n&&(i.expires=r.now()+n),this.storageInterface(o).setItem(e,JSON.stringify(i))},t.prototype._get=function(e,t){if(t&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!t&&!this.localSupported)throw new Error("Local Storage not supported");var n=this.storageInterface(t).getItem(e);if(!n)return null;var o=JSON.parse(n);return o.expires&&o.expires<r.now()?(this.storageInterface(t).removeItem(e),null):o.value},t.prototype._remove=function(e,t){return this.storageInterface(t).removeItem(e)},t.prototype.storageInterface=function(t){return t?e.sessionStorage:e.localStorage},t}();t.default=new i}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(67)),o={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],baseTransportOrder:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],transportPreferenceOrder:[r.default.JsonP,r.default.XhrPolling,r.default.XhrStreaming,r.default.WebSocket],upgradeTransports:[r.default.XhrStreaming,r.default.WebSocket]};t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WebSocket="web_socket",e.Comet="comet",e.XhrStreaming="xhr_streaming",e.XhrPolling="xhr_polling",e.JsonP="jsonp"}(r||(r={})),t.default=r},function(e,t,n){"use strict";n.r(t);var r=n(29),o=n.n(r),i=n(1),s=n(3),a=n.n(s),c=n(12),u=n.n(c),l=n(15),p=n.n(l);t.default=[o.a,function(e){var t="xhr_polling";function n(e,n,r){r.stream=!1,u.a.call(this,e,n,r),this.shortName=t}return i.inherits(n,u.a),n.isAvailable=function(){return a.a.Config.xhrSupported&&a.a.Config.allowComet},n.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,o){return p.a.createRequest(e,t,n,r,o,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n},function(e){var t="xhr_streaming";function n(e,n,r){u.a.call(this,e,n,r),this.shortName=t}return i.inherits(n,u.a),n.isAvailable=function(){return a.a.Config.xhrSupported&&a.a.Config.streamingSupported&&a.a.Config.allowComet},n.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,o){return p.a.createRequest(e,t,n,r,o,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n}]}]).default},e.exports=t()},"./node_modules/ably/promises.js":(e,t,n)=>{"use strict";function r(e){return"string"==typeof e&&(e=-1==e.indexOf(":")?{token:e}:{key:e}),e.promises=!0,e}var o=n("./node_modules/ably/build/ably-commonjs.js"),i=function(e){return new o.Rest(r(e))};Object.assign(i,o.Rest);var s=function(e){return new o.Realtime(r(e))};Object.assign(s,o.Realtime),e.exports={Rest:i,Realtime:s}},"./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js":(e,t,n)=>{"use strict";var r=n("./node_modules/sdp/sdp.js");function o(e,t,n,o,i){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(o?o.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var i=r(e.parameters.apt,n),s=r(t.parameters.apt,o);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!o(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}})),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,o){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(n){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=o?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},l.prototype._gather=function(t,n){var o=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=r.getMediaSections(o._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+l.join("");var p=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",s),p&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,o){var s=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),o&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},l.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);o.transceivers[t].localCapabilities=n})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(o._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var s=o.transceivers[t],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,p=s.localCapabilities,d=s.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||s.rejected)){var f=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);a&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(s.mid,t),"new"===u.state&&u.start(c,f,a?"controlling":"controlled"),"new"===l.state&&l.start(h));var g=i(p,d);o._transceive(s,g.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(o){var l=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!s("setRemoteDescription",o.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+l.signalingState));var p={};l.remoteStreams.forEach((function(e){p[e.id]=e}));var d=[],f=r.splitSections(o.sdp),h=f.shift(),g=r.matchPrefix(h,"a=ice-lite").length>0,m=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=m;var y=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(s,c){var u=r.splitLines(s),f=r.getKind(s),y=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,v=u[0].substr(2).split(" ")[2],_=r.getDirection(s,h),b=r.parseMsid(s),E=r.getMid(s)||r.generateIdentifier();if(y||"application"===f&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))l.transceivers[c]={mid:E,kind:f,protocol:v,rejected:!0};else{var S,w,T,O,C,R,M,P,k;!y&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(f,!0));var I,A,D=r.parseRtpParameters(s);y||(I=r.getIceParameters(s,h),(A=r.getDtlsParameters(s,h)).role="client"),M=r.parseRtpEncodingParameters(s);var L=r.parseRtcpParameters(s),x=r.matchPrefix(s,"a=end-of-candidates",h).length>0,N=r.matchPrefix(s,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!y&&m&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==o.type||y)"answer"!==o.type||y||(w=(S=l.transceivers[c]).iceGatherer,T=S.iceTransport,O=S.dtlsTransport,C=S.rtpReceiver,R=S.sendEncodingParameters,P=S.localCapabilities,l.transceivers[c].recvEncodingParameters=M,l.transceivers[c].remoteCapabilities=D,l.transceivers[c].rtcpParameters=L,N.length&&"new"===T.state&&(!g&&!x||m&&0!==c?N.forEach((function(e){a(S.iceTransport,e)})):T.setRemoteCandidates(N)),m&&0!==c||("new"===T.state&&T.start(w,I,"controlling"),"new"===O.state&&O.start(A)),!i(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,l._transceive(S,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!C||"sendrecv"!==_&&"sendonly"!==_?delete S.rtpReceiver:(k=C.track,b?(p[b.stream]||(p[b.stream]=new e.MediaStream),n(k,p[b.stream]),d.push([k,C,p[b.stream]])):(p.default||(p.default=new e.MediaStream),n(k,p.default),d.push([k,C,p.default]))));else{(S=l.transceivers[c]||l._createTransceiver(f)).mid=E,S.iceGatherer||(S.iceGatherer=l._createIceGatherer(c,m)),N.length&&"new"===S.iceTransport.state&&(!x||m&&0!==c?N.forEach((function(e){a(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(N)),P=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),R=S.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var F,U=!1;"sendrecv"===_||"sendonly"===_?(U=!S.rtpReceiver,C=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,f),U&&(k=C.track,b&&"-"===b.stream||(b?(p[b.stream]||(p[b.stream]=new e.MediaStream,Object.defineProperty(p[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(k,"id",{get:function(){return b.track}}),F=p[b.stream]):(p.default||(p.default=new e.MediaStream),F=p.default)),F&&(n(k,F),S.associatedRemoteMediaStreams.push(F)),d.push([k,C,F]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=P,S.remoteCapabilities=D,S.rtpReceiver=C,S.rtcpParameters=L,S.sendEncodingParameters=R,S.recvEncodingParameters=M,l._transceive(l.transceivers[c],!1,U)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===o.type?"active":"passive"),l._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(p).forEach((function(t){var n=p[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}d.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),d.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,s=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));i>0||s>0;)i>0&&(n._createTransceiver("audio"),i--),s>0&&(n._createTransceiver("video"),s--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(o,i){var s=o.track,a=o.kind,c=o.mid||r.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(i,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];s&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,a)),o.localCapabilities=u,o.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=o(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!n._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){s=u;break}var l=n.transceivers[s];if(!l)return i(c("OperationError","Can not add ICE candidate"));if(l.rejected)return o();var p=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===p.protocol&&(0===p.port||9===p.port))return o();if(p.component&&1!==p.component)return o();if((0===s||s>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,p))return i(c("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(p.type?d:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].rejected||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));f++);o()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var p=["createOffer","createAnswer"];return p.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(p=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},"./node_modules/sdp/sdp.js":e=>{"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],o=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var i=r[o],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var a=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var o=0;return n.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(r+="a=maxptime:"+o+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],o=t.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),s=-1!==o.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var o=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=0===o.length;var i=t.matchPrefix(e,"a=rtcp-mux");return n.mux=i.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(n=o[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),o=t.matchPrefix(e,"a=max-message-size:");o.length>0&&(n=parseInt(o[0].substr(19),10)),isNaN(n)&&(n=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var o=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,o){var i=t.writeRtpDescription(e.kind,n);if(i+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var s="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),i},t.getDirection=function(e,n){for(var r=t.splitLines(e),o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},"./node_modules/webrtc-adapter/src/js/adapter_core.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/webrtc-adapter/src/js/adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window})},"./node_modules/webrtc-adapter/src/js/adapter_factory.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{adapterFactory:()=>u});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js"),i=n("./node_modules/webrtc-adapter/src/js/edge/edge_shim.js"),s=n("./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js"),a=n("./node_modules/webrtc-adapter/src/js/safari/safari_shim.js"),c=n("./node_modules/webrtc-adapter/src/js/common_shim.js");function u(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const n=r.log,u=r.detectBrowser(e),l={browserDetails:u,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(u.browser){case"chrome":if(!o||!o.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),l;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),l;n("adapter.js shimming chrome."),l.browserShim=o,c.shimAddIceCandidateNullOrEmpty(e,u),o.shimGetUserMedia(e,u),o.shimMediaStream(e,u),o.shimPeerConnection(e,u),o.shimOnTrack(e,u),o.shimAddTrackRemoveTrack(e,u),o.shimGetSendersWithDtmf(e,u),o.shimGetStats(e,u),o.shimSenderReceiverGetStats(e,u),o.fixNegotiationNeeded(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),l;n("adapter.js shimming firefox."),l.browserShim=s,c.shimAddIceCandidateNullOrEmpty(e,u),s.shimGetUserMedia(e,u),s.shimPeerConnection(e,u),s.shimOnTrack(e,u),s.shimRemoveStream(e,u),s.shimSenderGetStats(e,u),s.shimReceiverGetStats(e,u),s.shimRTCDataChannel(e,u),s.shimAddTransceiver(e,u),s.shimGetParameters(e,u),s.shimCreateOffer(e,u),s.shimCreateAnswer(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"edge":if(!i||!i.shimPeerConnection||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),l;n("adapter.js shimming edge."),l.browserShim=i,i.shimGetUserMedia(e,u),i.shimGetDisplayMedia(e,u),i.shimPeerConnection(e,u),i.shimReplaceTrack(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),l;n("adapter.js shimming safari."),l.browserShim=a,c.shimAddIceCandidateNullOrEmpty(e,u),a.shimRTCIceServerUrls(e,u),a.shimCreateOfferLegacy(e,u),a.shimCallbacksAPI(e,u),a.shimLocalStreamsAPI(e,u),a.shimRemoteStreamsAPI(e,u),a.shimTrackEventTransceiver(e,u),a.shimGetUserMedia(e,u),a.shimAudioContext(e,u),c.shimRTCIceCandidate(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;default:n("Unsupported browser!")}return l}},"./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o.shimGetUserMedia,shimGetDisplayMedia:()=>i.shimGetDisplayMedia,shimMediaStream:()=>s,shimOnTrack:()=>a,shimGetSendersWithDtmf:()=>c,shimGetStats:()=>u,shimSenderReceiverGetStats:()=>l,shimAddTrackRemoveTrackWithNative:()=>p,shimAddTrackRemoveTrack:()=>d,shimPeerConnection:()=>f,fixNegotiationNeeded:()=>h});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js"),i=n("./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js");function s(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function a(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else r.wrapPeerConnectionEvent(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function c(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function u(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},i=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(i(o(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(i(o(t)))},n])})).then(n,r)}}function l(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>r.filterStats(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),r.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>r.filterStats(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function p(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),o.apply(this,arguments)}}function d(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return p(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=i(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>i(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function f(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function h(e,t){r.wrapPeerConnectionEvent(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},"./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o});const r=n("./node_modules/webrtc-adapter/src/js/utils.js").log;function o(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const o=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",n)]=r.ideal,t.optional.push(e),e={},e[o("max",n)]=r.ideal,t.optional.push(e)):(e[o("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const a=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=s.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=o(e.video),r("chrome: "+JSON.stringify(e)),i(e)}))}e.video=o(e.video)}return r("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}},"./node_modules/webrtc-adapter/src/js/common_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimRTCIceCandidate:()=>s,shimMaxMessageSize:()=>a,shimSendThrowTypeError:()=>c,shimConnectionState:()=>u,removeExtmapAllowMixed:()=>l,shimAddIceCandidateNullOrEmpty:()=>p});var r=n("./node_modules/sdp/sdp.js"),o=n.n(r),i=n("./node_modules/webrtc-adapter/src/js/utils.js");function s(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=o().parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function a(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=o().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=o().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=o().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>i}),this._sctp=s}return n.apply(this,arguments)}}function c(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function u(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function l(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function p(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}},"./node_modules/webrtc-adapter/src/js/edge/edge_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>a.shimGetUserMedia,shimGetDisplayMedia:()=>c.shimGetDisplayMedia,shimPeerConnection:()=>u,shimReplaceTrack:()=>l});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js"),i=n("./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js"),s=n.n(i),a=n("./node_modules/webrtc-adapter/src/js/edge/getusermedia.js"),c=n("./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js");function u(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=s()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,o.filterIceServers)(e.iceServers,t.version),r.log("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function l(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},"./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{filterIceServers:()=>o});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function o(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");const o="string"==typeof t;return o&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=o?t[0]:t,!!t.length}}))}},"./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/edge/getusermedia.js":(e,t,n)=>{"use strict";function r(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}n.r(t),n.d(t,{shimGetUserMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o.shimGetUserMedia,shimGetDisplayMedia:()=>i.shimGetDisplayMedia,shimOnTrack:()=>s,shimPeerConnection:()=>a,shimSenderGetStats:()=>c,shimReceiverGetStats:()=>u,shimRemoveStream:()=>l,shimRTCDataChannel:()=>p,shimAddTransceiver:()=>d,shimGetParameters:()=>f,shimCreateOffer:()=>h,shimCreateAnswer:()=>g});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js"),i=n("./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js");function s(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function a(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!o)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,i)}}function c(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function u(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),r.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function l(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function p(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function d(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function f(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function h(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function g(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}},"./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function o(e,t){const n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,o){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},o&&o.prototype.getSettings){const t=o.prototype.getSettings;o.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(o&&o.prototype.applyConstraints){const t=o.prototype.applyConstraints;o.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}},"./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimLocalStreamsAPI:()=>o,shimRemoteStreamsAPI:()=>i,shimCallbacksAPI:()=>s,shimGetUserMedia:()=>a,shimConstraints:()=>c,shimRTCIceServerUrls:()=>u,shimTrackEventTransceiver:()=>l,shimCreateOfferLegacy:()=>p,shimAudioContext:()=>d});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function o(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function i(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function s(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};let a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function a(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(c(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function c(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function u(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let o=e.iceServers[n];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,t.push(o)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function l(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function p(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function d(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},"./node_modules/webrtc-adapter/src/js/utils.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{extractVersion:()=>i,wrapPeerConnectionEvent:()=>s,disableLog:()=>a,disableWarnings:()=>c,log:()=>u,deprecated:()=>l,detectBrowser:()=>p,compactObject:()=>f,walkStats:()=>h,filterStats:()=>g});let r=!0,o=!0;function i(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function s(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};const i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function c(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function u(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function l(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=i(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=i(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=i(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=i(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(e){return d(e)?Object.keys(e).reduce((function(t,n){const r=d(e[n]),o=r?f(e[n]):e[n],i=r&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[n]:o})}),{}):e}function h(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?h(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{h(e,e.get(t),n)}))})))}function g(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&h(e,n,o)}))})),o}}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{createSignalMessage:()=>t,P2P_CONNECT_MESSAGE:()=>o,P2P_ICE_CANDIDATE_MESSAGE:()=>i,Signaler:()=>s,PeerConnection:()=>a}),n("./node_modules/webrtc-adapter/src/js/adapter_core.js");var e=n("./node_modules/ably/promises.js");function t(e,t){return{timestamp:(new Date).getTime(),receiver:e,...t}}const o="connect",i="candidate";class s{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.token=t,this.client=new e.Realtime.Promise({token:t,autoConnect:!1,idempotentRestPublishing:!0,queueMessages:!1,disconnectedRetryTimeout:3e3,suspendedRetryTimeout:15e3,echoMessages:!1,log:{level:n}}),this.channel=this.channel.bind(this)}channel(e){return this.client.channels.get(e)}}class a{constructor(e,t,n,r){this.connectionId=r,this.signalerChannel=e,this.ice=t,this.isPolite=n,this.pc=null,this.queuedCandidates=[],this.onNegotiationNeeded=null,this.onIceCandidate=null,this.onSignalerMessage=null,this._flushQueuedCandidates=this._flushQueuedCandidates.bind(this),this._pruneIce=this._pruneIce.bind(this),this.close=this.close.bind(this),this.sendReadyMessage=this.sendReadyMessage.bind(this),this._handleConnectMessage=this._handleConnectMessage.bind(this),this._handleCandidateMessage=this._handleCandidateMessage.bind(this),this.makingOffer=!1,this.ignoreOffer=!1,this._pruneIce();const o={...this.ice};Array.isArray(o.iceServers)||(o.iceServers=[o.iceServers]),this.pc=new RTCPeerConnection(o)}connect(e,n){this.remotePeerId=e,this.makingOffer=!1,this.pc.onnegotiationneeded=async()=>{try{this.makingOffer=!0,await this.pc.setLocalDescription(),this.signalerChannel.publish(o,t(e,{description:this.pc.localDescription}))}catch(e){console.error(e)}finally{this.makingOffer=!1}},this.pc.onicecandidate=n=>{let{candidate:r}=n;r&&this.signalerChannel.publish(i,t(e,{candidate:r}))},this.signalerChannel.subscribe(o,this._handleConnectMessage),this.signalerChannel.subscribe(i,this._handleCandidateMessage),n&&this._handleConnectMessage(n)}close(){this.signalerChannel.unsubscribe(this._handleCandidateMessage),this.signalerChannel.unsubscribe(this._handleConnectMessage),this.signalerChannel=null,this.pc.onnegotiationneeded=null,this.pc.onicecandidate=null,this.pc.ontrack=null,this.queuedCandidates=[],this.ice=null,this.pc.close(),this.pc=null}sendReadyMessage(){this.signalerChannel.publish(o,t(this.remotePeerId,{}))}async _handleConnectMessage(e){const n=e.data,r=e.clientId;if(n.receiver!==this.signalerChannel.connectionManager.connectionDetails.clientId)return;if(void 0!==this.remotePeerId&&r!==this.remotePeerId)return;const i=e.data.description,s="offer"===i.type&&(this.makingOffer||"stable"!==this.pc.signalingState);try{if(this.ignoreOffer=!this.isPolite&&s,this.ignoreOffer)return;if(await this.pc.setRemoteDescription(i),this._flushQueuedCandidates(),"offer"===i.type){await this.pc.setLocalDescription();const n=e.clientId;this.signalerChannel.publish(o,t(n,{description:this.pc.localDescription}))}}catch(e){console.error(e)}}async _handleCandidateMessage(e){const t=e.data,n=e.clientId;if(t.receiver===this.signalerChannel.connectionManager.connectionDetails.clientId)if(void 0===this.remotePeerId||n===this.remotePeerId)try{if(!this.pc.remoteDescription)return void this.queuedCandidates.push(t.candidate);try{await this.pc.addIceCandidate(t.candidate)}catch(e){if(!this.ignoreOffer)throw e}}catch(e){console.error(e)}else console.error(`SenderId does not match Remote peer id for ICE candidate: ${n}`)}_flushQueuedCandidates(){this.queuedCandidates.forEach((e=>{this.pc.addIceCandidate(e)})),this.queuedCandidates.length=0}_pruneIce(){const e=this.ice.iceServers.urls,t=[];let n=!1;e.forEach((e=>{if(e.startsWith("stun")&&!n)return n=!0,void t.push(e);(e.startsWith("turn")&&e.endsWith(":80?transport=tcp")||e.startsWith("turns")&&e.endsWith(":443?transport=tcp"))&&t.push(e)})),this.ice.iceServers.urls=t}}})(),r})()},e.exports=t()},198:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.api.models.v1.user_details.User",null,i),o.exportSymbol("proto.api.models.v1.user_details.UserLocation",null,i),o.exportSymbol("proto.api.models.v1.user_details.UserName",null,i),o.exportSymbol("proto.api.models.v1.user_details.UserPhone",null,i),proto.api.models.v1.user_details.User=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.User,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.User.displayName="proto.api.models.v1.user_details.User"),proto.api.models.v1.user_details.UserName=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.UserName,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserName.displayName="proto.api.models.v1.user_details.UserName"),proto.api.models.v1.user_details.UserPhone=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.UserPhone,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserPhone.displayName="proto.api.models.v1.user_details.UserPhone"),proto.api.models.v1.user_details.UserLocation=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.UserLocation,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserLocation.displayName="proto.api.models.v1.user_details.UserLocation"),r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.User.prototype.toObject=function(e){return proto.api.models.v1.user_details.User.toObject(e,this)},proto.api.models.v1.user_details.User.toObject=function(e,t){var n,o={id:r.Message.getFieldWithDefault(t,1,""),username:r.Message.getFieldWithDefault(t,2,""),email:r.Message.getFieldWithDefault(t,3,""),name:(n=t.getName())&&proto.api.models.v1.user_details.UserName.toObject(e,n),date:r.Message.getFieldWithDefault(t,5,""),timezone:r.Message.getFieldWithDefault(t,6,""),trackusage:r.Message.getBooleanFieldWithDefault(t,7,!1),phone:(n=t.getPhone())&&proto.api.models.v1.user_details.UserPhone.toObject(e,n),location:(n=t.getLocation())&&proto.api.models.v1.user_details.UserLocation.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.models.v1.user_details.User.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.User;return proto.api.models.v1.user_details.User.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.User.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setId(n);break;case 2:n=t.readString(),e.setUsername(n);break;case 3:n=t.readString(),e.setEmail(n);break;case 4:n=new proto.api.models.v1.user_details.UserName,t.readMessage(n,proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader),e.setName(n);break;case 5:n=t.readString(),e.setDate(n);break;case 6:n=t.readString(),e.setTimezone(n);break;case 7:n=t.readBool(),e.setTrackusage(n);break;case 8:n=new proto.api.models.v1.user_details.UserPhone,t.readMessage(n,proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader),e.setPhone(n);break;case 9:n=new proto.api.models.v1.user_details.UserLocation,t.readMessage(n,proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader),e.setLocation(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.User.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.User.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.User.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getId()).length>0&&t.writeString(1,n),(n=e.getUsername()).length>0&&t.writeString(2,n),(n=e.getEmail()).length>0&&t.writeString(3,n),null!=(n=e.getName())&&t.writeMessage(4,n,proto.api.models.v1.user_details.UserName.serializeBinaryToWriter),(n=e.getDate()).length>0&&t.writeString(5,n),(n=e.getTimezone()).length>0&&t.writeString(6,n),(n=e.getTrackusage())&&t.writeBool(7,n),null!=(n=e.getPhone())&&t.writeMessage(8,n,proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter),null!=(n=e.getLocation())&&t.writeMessage(9,n,proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter)},proto.api.models.v1.user_details.User.prototype.getId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.User.prototype.setId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.User.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.User.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.models.v1.user_details.User.prototype.getEmail=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.models.v1.user_details.User.prototype.setEmail=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.models.v1.user_details.User.prototype.getName=function(){return r.Message.getWrapperField(this,proto.api.models.v1.user_details.UserName,4)},proto.api.models.v1.user_details.User.prototype.setName=function(e){return r.Message.setWrapperField(this,4,e)},proto.api.models.v1.user_details.User.prototype.clearName=function(){return this.setName(void 0)},proto.api.models.v1.user_details.User.prototype.hasName=function(){return null!=r.Message.getField(this,4)},proto.api.models.v1.user_details.User.prototype.getDate=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.api.models.v1.user_details.User.prototype.setDate=function(e){return r.Message.setProto3StringField(this,5,e)},proto.api.models.v1.user_details.User.prototype.getTimezone=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.api.models.v1.user_details.User.prototype.setTimezone=function(e){return r.Message.setProto3StringField(this,6,e)},proto.api.models.v1.user_details.User.prototype.getTrackusage=function(){return r.Message.getBooleanFieldWithDefault(this,7,!1)},proto.api.models.v1.user_details.User.prototype.setTrackusage=function(e){return r.Message.setProto3BooleanField(this,7,e)},proto.api.models.v1.user_details.User.prototype.getPhone=function(){return r.Message.getWrapperField(this,proto.api.models.v1.user_details.UserPhone,8)},proto.api.models.v1.user_details.User.prototype.setPhone=function(e){return r.Message.setWrapperField(this,8,e)},proto.api.models.v1.user_details.User.prototype.clearPhone=function(){return this.setPhone(void 0)},proto.api.models.v1.user_details.User.prototype.hasPhone=function(){return null!=r.Message.getField(this,8)},proto.api.models.v1.user_details.User.prototype.getLocation=function(){return r.Message.getWrapperField(this,proto.api.models.v1.user_details.UserLocation,9)},proto.api.models.v1.user_details.User.prototype.setLocation=function(e){return r.Message.setWrapperField(this,9,e)},proto.api.models.v1.user_details.User.prototype.clearLocation=function(){return this.setLocation(void 0)},proto.api.models.v1.user_details.User.prototype.hasLocation=function(){return null!=r.Message.getField(this,9)},r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserName.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserName.toObject(e,this)},proto.api.models.v1.user_details.UserName.toObject=function(e,t){var n={firstname:r.Message.getFieldWithDefault(t,1,""),lastname:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.models.v1.user_details.UserName.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.UserName;return proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setFirstname(n);break;case 2:n=t.readString(),e.setLastname(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserName.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.UserName.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserName.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getFirstname()).length>0&&t.writeString(1,n),(n=e.getLastname()).length>0&&t.writeString(2,n)},proto.api.models.v1.user_details.UserName.prototype.getFirstname=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserName.prototype.setFirstname=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserName.prototype.getLastname=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserName.prototype.setLastname=function(e){return r.Message.setProto3StringField(this,2,e)},r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserPhone.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserPhone.toObject(e,this)},proto.api.models.v1.user_details.UserPhone.toObject=function(e,t){var n={countrycode:r.Message.getFieldWithDefault(t,1,""),number:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.models.v1.user_details.UserPhone.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.UserPhone;return proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setCountrycode(n);break;case 2:n=t.readString(),e.setNumber(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserPhone.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getCountrycode()).length>0&&t.writeString(1,n),(n=e.getNumber()).length>0&&t.writeString(2,n)},proto.api.models.v1.user_details.UserPhone.prototype.getCountrycode=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserPhone.prototype.setCountrycode=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserPhone.prototype.getNumber=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserPhone.prototype.setNumber=function(e){return r.Message.setProto3StringField(this,2,e)},r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserLocation.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserLocation.toObject(e,this)},proto.api.models.v1.user_details.UserLocation.toObject=function(e,t){var n={country:r.Message.getFieldWithDefault(t,1,""),suburb:r.Message.getFieldWithDefault(t,2,""),postcode:r.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.models.v1.user_details.UserLocation.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.UserLocation;return proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setCountry(n);break;case 2:n=t.readString(),e.setSuburb(n);break;case 3:n=t.readString(),e.setPostcode(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserLocation.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getCountry()).length>0&&t.writeString(1,n),(n=e.getSuburb()).length>0&&t.writeString(2,n),(n=e.getPostcode()).length>0&&t.writeString(3,n)},proto.api.models.v1.user_details.UserLocation.prototype.getCountry=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserLocation.prototype.setCountry=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserLocation.prototype.getSuburb=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserLocation.prototype.setSuburb=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.models.v1.user_details.UserLocation.prototype.getPostcode=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.models.v1.user_details.UserLocation.prototype.setPostcode=function(e){return r.Message.setProto3StringField(this,3,e)},o.object.extend(t,proto.api.models.v1.user_details)},741:(e,t,n)=>{var r=n(157),o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.api.models.v2.ManagedDeviceState",null,o),proto.api.models.v2.ManagedDeviceState={CREATED:0,ENROLMENT_STARTED:1,ENROLLED:2},r.object.extend(t,proto.api.models.v2)},245:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.api.requests.school_manager.WindowUpdate",null,i),o.exportSymbol("proto.api.requests.school_manager.WindowUpdate.BackgroundTab",null,i),o.exportSymbol("proto.api.requests.school_manager.WindowUpdate.Restricted",null,i),o.exportSymbol("proto.api.requests.school_manager.WindowUpdateRequest",null,i),proto.api.requests.school_manager.WindowUpdateRequest=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.requests.school_manager.WindowUpdateRequest,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdateRequest.displayName="proto.api.requests.school_manager.WindowUpdateRequest"),proto.api.requests.school_manager.WindowUpdate=function(e){r.Message.initialize(this,e,0,-1,proto.api.requests.school_manager.WindowUpdate.repeatedFields_,null)},o.inherits(proto.api.requests.school_manager.WindowUpdate,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.displayName="proto.api.requests.school_manager.WindowUpdate"),proto.api.requests.school_manager.WindowUpdate.BackgroundTab=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.requests.school_manager.WindowUpdate.BackgroundTab,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.BackgroundTab.displayName="proto.api.requests.school_manager.WindowUpdate.BackgroundTab"),proto.api.requests.school_manager.WindowUpdate.Restricted=function(e){r.Message.initialize(this,e,0,-1,proto.api.requests.school_manager.WindowUpdate.Restricted.repeatedFields_,null)},o.inherits(proto.api.requests.school_manager.WindowUpdate.Restricted,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.Restricted.displayName="proto.api.requests.school_manager.WindowUpdate.Restricted"),r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdateRequest.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdateRequest.toObject(e,this)},proto.api.requests.school_manager.WindowUpdateRequest.toObject=function(e,t){var n,o={windowEndpoint:r.Message.getFieldWithDefault(t,1,""),window:(n=t.getWindow())&&proto.api.requests.school_manager.WindowUpdate.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdateRequest;return proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setWindowEndpoint(n);break;case 2:n=new proto.api.requests.school_manager.WindowUpdate,t.readMessage(n,proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader),e.setWindow(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdateRequest.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdateRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdateRequest.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getWindowEndpoint()).length>0&&t.writeString(1,n),null!=(n=e.getWindow())&&t.writeMessage(2,n,proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.getWindowEndpoint=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdateRequest.prototype.setWindowEndpoint=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.getWindow=function(){return r.Message.getWrapperField(this,proto.api.requests.school_manager.WindowUpdate,2)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.setWindow=function(e){return r.Message.setWrapperField(this,2,e)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.clearWindow=function(){return this.setWindow(void 0)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.hasWindow=function(){return null!=r.Message.getField(this,2)},proto.api.requests.school_manager.WindowUpdate.repeatedFields_=[10,12],r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.toObject=function(e,t){var n,o={title:r.Message.getFieldWithDefault(t,1,""),url:r.Message.getFieldWithDefault(t,2,""),favicon:r.Message.getFieldWithDefault(t,3,""),tabId:r.Message.getFieldWithDefault(t,4,""),chromeId:r.Message.getFieldWithDefault(t,5,""),chromeWindowId:r.Message.getFieldWithDefault(t,6,""),action:r.Message.getFieldWithDefault(t,7,""),email:r.Message.getFieldWithDefault(t,8,""),screenshot:r.Message.getFieldWithDefault(t,9,""),backgroundTabsList:r.Message.toObjectList(t.getBackgroundTabsList(),proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject,e),platformType:r.Message.getFieldWithDefault(t,11,""),teacheridsList:null==(n=r.Message.getRepeatedField(t,12))?void 0:n,inFocus:r.Message.getBooleanFieldWithDefault(t,13,!1),restricted:(n=t.getRestricted())&&proto.api.requests.school_manager.WindowUpdate.Restricted.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.requests.school_manager.WindowUpdate.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdate;return proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTitle(n);break;case 2:n=t.readString(),e.setUrl(n);break;case 3:n=t.readString(),e.setFavicon(n);break;case 4:n=t.readString(),e.setTabId(n);break;case 5:n=t.readString(),e.setChromeId(n);break;case 6:n=t.readString(),e.setChromeWindowId(n);break;case 7:n=t.readString(),e.setAction(n);break;case 8:n=t.readString(),e.setEmail(n);break;case 9:n=t.readString(),e.setScreenshot(n);break;case 10:n=new proto.api.requests.school_manager.WindowUpdate.BackgroundTab,t.readMessage(n,proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader),e.addBackgroundTabs(n);break;case 11:n=t.readString(),e.setPlatformType(n);break;case 12:n=t.readString(),e.addTeacherids(n);break;case 13:n=t.readBool(),e.setInFocus(n);break;case 14:n=new proto.api.requests.school_manager.WindowUpdate.Restricted,t.readMessage(n,proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinaryFromReader),e.setRestricted(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getTitle()).length>0&&t.writeString(1,n),(n=e.getUrl()).length>0&&t.writeString(2,n),(n=e.getFavicon()).length>0&&t.writeString(3,n),(n=e.getTabId()).length>0&&t.writeString(4,n),(n=e.getChromeId()).length>0&&t.writeString(5,n),(n=e.getChromeWindowId()).length>0&&t.writeString(6,n),(n=e.getAction()).length>0&&t.writeString(7,n),(n=e.getEmail()).length>0&&t.writeString(8,n),(n=e.getScreenshot()).length>0&&t.writeString(9,n),(n=e.getBackgroundTabsList()).length>0&&t.writeRepeatedMessage(10,n,proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter),(n=e.getPlatformType()).length>0&&t.writeString(11,n),(n=e.getTeacheridsList()).length>0&&t.writeRepeatedString(12,n),(n=e.getInFocus())&&t.writeBool(13,n),null!=(n=e.getRestricted())&&t.writeMessage(14,n,proto.api.requests.school_manager.WindowUpdate.Restricted.serializeBinaryToWriter)},r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject=function(e,t){var n={favicon:r.Message.getFieldWithDefault(t,1,""),taburl:r.Message.getFieldWithDefault(t,2,""),title:r.Message.getFieldWithDefault(t,3,""),tabId:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdate.BackgroundTab;return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setFavicon(n);break;case 2:n=t.readString(),e.setTaburl(n);break;case 3:n=t.readString(),e.setTitle(n);break;case 4:n=t.readString(),e.setTabId(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getFavicon()).length>0&&t.writeString(1,n),(n=e.getTaburl()).length>0&&t.writeString(2,n),(n=e.getTitle()).length>0&&t.writeString(3,n),(n=e.getTabId()).length>0&&t.writeString(4,n)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getFavicon=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setFavicon=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTaburl=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTaburl=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTitle=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTitle=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTabId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTabId=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.requests.school_manager.WindowUpdate.Restricted.repeatedFields_=[1,2],r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.Restricted.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.Restricted.toObject=function(e,t){var n,o={domainsList:null==(n=r.Message.getRepeatedField(t,1))?void 0:n,appsList:null==(n=r.Message.getRepeatedField(t,2))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdate.Restricted;return proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.addDomains(n);break;case 2:n=t.readString(),e.addApps(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.Restricted.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.Restricted.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getDomainsList()).length>0&&t.writeRepeatedString(1,n),(n=e.getAppsList()).length>0&&t.writeRepeatedString(2,n)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.getDomainsList=function(){return r.Message.getRepeatedField(this,1)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.setDomainsList=function(e){return r.Message.setField(this,1,e||[])},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.addDomains=function(e,t){return r.Message.addToRepeatedField(this,1,e,t)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.clearDomainsList=function(){return this.setDomainsList([])},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.getAppsList=function(){return r.Message.getRepeatedField(this,2)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.setAppsList=function(e){return r.Message.setField(this,2,e||[])},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.addApps=function(e,t){return r.Message.addToRepeatedField(this,2,e,t)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.clearAppsList=function(){return this.setAppsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getTitle=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setTitle=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getUrl=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setUrl=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getFavicon=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setFavicon=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getTabId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setTabId=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getChromeId=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setChromeId=function(e){return r.Message.setProto3StringField(this,5,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getChromeWindowId=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setChromeWindowId=function(e){return r.Message.setProto3StringField(this,6,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getAction=function(){return r.Message.getFieldWithDefault(this,7,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setAction=function(e){return r.Message.setProto3StringField(this,7,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getEmail=function(){return r.Message.getFieldWithDefault(this,8,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setEmail=function(e){return r.Message.setProto3StringField(this,8,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getScreenshot=function(){return r.Message.getFieldWithDefault(this,9,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setScreenshot=function(e){return r.Message.setProto3StringField(this,9,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getBackgroundTabsList=function(){return r.Message.getRepeatedWrapperField(this,proto.api.requests.school_manager.WindowUpdate.BackgroundTab,10)},proto.api.requests.school_manager.WindowUpdate.prototype.setBackgroundTabsList=function(e){return r.Message.setRepeatedWrapperField(this,10,e)},proto.api.requests.school_manager.WindowUpdate.prototype.addBackgroundTabs=function(e,t){return r.Message.addToRepeatedWrapperField(this,10,e,proto.api.requests.school_manager.WindowUpdate.BackgroundTab,t)},proto.api.requests.school_manager.WindowUpdate.prototype.clearBackgroundTabsList=function(){return this.setBackgroundTabsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getPlatformType=function(){return r.Message.getFieldWithDefault(this,11,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setPlatformType=function(e){return r.Message.setProto3StringField(this,11,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getTeacheridsList=function(){return r.Message.getRepeatedField(this,12)},proto.api.requests.school_manager.WindowUpdate.prototype.setTeacheridsList=function(e){return r.Message.setField(this,12,e||[])},proto.api.requests.school_manager.WindowUpdate.prototype.addTeacherids=function(e,t){return r.Message.addToRepeatedField(this,12,e,t)},proto.api.requests.school_manager.WindowUpdate.prototype.clearTeacheridsList=function(){return this.setTeacheridsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getInFocus=function(){return r.Message.getBooleanFieldWithDefault(this,13,!1)},proto.api.requests.school_manager.WindowUpdate.prototype.setInFocus=function(e){return r.Message.setProto3BooleanField(this,13,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getRestricted=function(){return r.Message.getWrapperField(this,proto.api.requests.school_manager.WindowUpdate.Restricted,14)},proto.api.requests.school_manager.WindowUpdate.prototype.setRestricted=function(e){return r.Message.setWrapperField(this,14,e)},proto.api.requests.school_manager.WindowUpdate.prototype.clearRestricted=function(){return this.setRestricted(void 0)},proto.api.requests.school_manager.WindowUpdate.prototype.hasRestricted=function(){return null!=r.Message.getField(this,14)},o.object.extend(t,proto.api.requests.school_manager)},776:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.api.responses.school_manager.Event",null,i),o.exportSymbol("proto.api.responses.school_manager.EventHeader",null,i),o.exportSymbol("proto.api.responses.school_manager.EventMessage",null,i),o.exportSymbol("proto.api.responses.school_manager.EventType",null,i),o.exportSymbol("proto.api.responses.school_manager.IceMessage",null,i),o.exportSymbol("proto.api.responses.school_manager.IceServers",null,i),o.exportSymbol("proto.api.responses.school_manager.InitP2PEvent",null,i),proto.api.responses.school_manager.EventMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.EventMessage,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.EventMessage.displayName="proto.api.responses.school_manager.EventMessage"),proto.api.responses.school_manager.Event=function(e){r.Message.initialize(this,e,0,-1,proto.api.responses.school_manager.Event.repeatedFields_,null)},o.inherits(proto.api.responses.school_manager.Event,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.Event.displayName="proto.api.responses.school_manager.Event"),proto.api.responses.school_manager.InitP2PEvent=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.InitP2PEvent,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.InitP2PEvent.displayName="proto.api.responses.school_manager.InitP2PEvent"),proto.api.responses.school_manager.IceServers=function(e){r.Message.initialize(this,e,0,-1,proto.api.responses.school_manager.IceServers.repeatedFields_,null)},o.inherits(proto.api.responses.school_manager.IceServers,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.IceServers.displayName="proto.api.responses.school_manager.IceServers"),proto.api.responses.school_manager.IceMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.IceMessage,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.IceMessage.displayName="proto.api.responses.school_manager.IceMessage"),proto.api.responses.school_manager.EventHeader=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.EventHeader,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.EventHeader.displayName="proto.api.responses.school_manager.EventHeader"),r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.EventMessage.prototype.toObject=function(e){return proto.api.responses.school_manager.EventMessage.toObject(e,this)},proto.api.responses.school_manager.EventMessage.toObject=function(e,t){var n={timestamp:r.Message.getFieldWithDefault(t,1,""),event:r.Message.getFieldWithDefault(t,2,0),value:r.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.EventMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.EventMessage;return proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTimestamp(n);break;case 2:n=t.readEnum(),e.setEvent(n);break;case 3:n=t.readString(),e.setValue(n);break;default:t.skipField()}return e},proto.api.responses.school_manager.EventMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getTimestamp()).length>0&&t.writeString(1,n),0!==(n=e.getEvent())&&t.writeEnum(2,n),(n=e.getValue()).length>0&&t.writeString(3,n)},proto.api.responses.school_manager.EventMessage.prototype.getTimestamp=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.EventMessage.prototype.setTimestamp=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.EventMessage.prototype.getEvent=function(){return r.Message.getFieldWithDefault(this,2,0)},proto.api.responses.school_manager.EventMessage.prototype.setEvent=function(e){return r.Message.setProto3EnumField(this,2,e)},proto.api.responses.school_manager.EventMessage.prototype.getValue=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.school_manager.EventMessage.prototype.setValue=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.school_manager.Event.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.Event.prototype.toObject=function(e){return proto.api.responses.school_manager.Event.toObject(e,this)},proto.api.responses.school_manager.Event.toObject=function(e,t){var n={messagesList:r.Message.toObjectList(t.getMessagesList(),proto.api.responses.school_manager.EventMessage.toObject,e)};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.Event.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.Event;return proto.api.responses.school_manager.Event.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.Event.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.api.responses.school_manager.EventMessage;t.readMessage(n,proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader),e.addMessages(n)}else t.skipField();return e},proto.api.responses.school_manager.Event.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.Event.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.Event.serializeBinaryToWriter=function(e,t){var n;(n=e.getMessagesList()).length>0&&t.writeRepeatedMessage(1,n,proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter)},proto.api.responses.school_manager.Event.prototype.getMessagesList=function(){return r.Message.getRepeatedWrapperField(this,proto.api.responses.school_manager.EventMessage,1)},proto.api.responses.school_manager.Event.prototype.setMessagesList=function(e){return r.Message.setRepeatedWrapperField(this,1,e)},proto.api.responses.school_manager.Event.prototype.addMessages=function(e,t){return r.Message.addToRepeatedWrapperField(this,1,e,proto.api.responses.school_manager.EventMessage,t)},proto.api.responses.school_manager.Event.prototype.clearMessagesList=function(){return this.setMessagesList([])},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.InitP2PEvent.prototype.toObject=function(e){return proto.api.responses.school_manager.InitP2PEvent.toObject(e,this)},proto.api.responses.school_manager.InitP2PEvent.toObject=function(e,t){var n,o={header:(n=t.getHeader())&&proto.api.responses.school_manager.EventHeader.toObject(e,n),channel:r.Message.getFieldWithDefault(t,2,""),signalhost:r.Message.getFieldWithDefault(t,3,""),signaltoken:r.Message.getFieldWithDefault(t,4,""),signalexpiryepochseconds:r.Message.getFloatingPointFieldWithDefault(t,5,0),remotepeerid:r.Message.getFieldWithDefault(t,6,""),ice:(n=t.getIce())&&proto.api.responses.school_manager.IceMessage.toObject(e,n),peeragentid:r.Message.getFieldWithDefault(t,8,"")};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.school_manager.InitP2PEvent.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.InitP2PEvent;return proto.api.responses.school_manager.InitP2PEvent.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.InitP2PEvent.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.api.responses.school_manager.EventHeader;t.readMessage(n,proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader),e.setHeader(n);break;case 2:n=t.readString(),e.setChannel(n);break;case 3:n=t.readString(),e.setSignalhost(n);break;case 4:n=t.readString(),e.setSignaltoken(n);break;case 5:n=t.readFloat(),e.setSignalexpiryepochseconds(n);break;case 6:n=t.readString(),e.setRemotepeerid(n);break;case 7:n=new proto.api.responses.school_manager.IceMessage,t.readMessage(n,proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader),e.setIce(n);break;case 8:n=t.readString(),e.setPeeragentid(n);break;default:t.skipField()}return e},proto.api.responses.school_manager.InitP2PEvent.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.InitP2PEvent.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.InitP2PEvent.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getHeader())&&t.writeMessage(1,n,proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter),(n=e.getChannel()).length>0&&t.writeString(2,n),(n=e.getSignalhost()).length>0&&t.writeString(3,n),(n=e.getSignaltoken()).length>0&&t.writeString(4,n),0!==(n=e.getSignalexpiryepochseconds())&&t.writeFloat(5,n),(n=e.getRemotepeerid()).length>0&&t.writeString(6,n),null!=(n=e.getIce())&&t.writeMessage(7,n,proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter),(n=e.getPeeragentid()).length>0&&t.writeString(8,n)},proto.api.responses.school_manager.InitP2PEvent.prototype.getHeader=function(){return r.Message.getWrapperField(this,proto.api.responses.school_manager.EventHeader,1)},proto.api.responses.school_manager.InitP2PEvent.prototype.setHeader=function(e){return r.Message.setWrapperField(this,1,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.clearHeader=function(){return this.setHeader(void 0)},proto.api.responses.school_manager.InitP2PEvent.prototype.hasHeader=function(){return null!=r.Message.getField(this,1)},proto.api.responses.school_manager.InitP2PEvent.prototype.getChannel=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setChannel=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignalhost=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignalhost=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignaltoken=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignaltoken=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignalexpiryepochseconds=function(){return r.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignalexpiryepochseconds=function(e){return r.Message.setProto3FloatField(this,5,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getRemotepeerid=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setRemotepeerid=function(e){return r.Message.setProto3StringField(this,6,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getIce=function(){return r.Message.getWrapperField(this,proto.api.responses.school_manager.IceMessage,7)},proto.api.responses.school_manager.InitP2PEvent.prototype.setIce=function(e){return r.Message.setWrapperField(this,7,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.clearIce=function(){return this.setIce(void 0)},proto.api.responses.school_manager.InitP2PEvent.prototype.hasIce=function(){return null!=r.Message.getField(this,7)},proto.api.responses.school_manager.InitP2PEvent.prototype.getPeeragentid=function(){return r.Message.getFieldWithDefault(this,8,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setPeeragentid=function(e){return r.Message.setProto3StringField(this,8,e)},proto.api.responses.school_manager.IceServers.repeatedFields_=[3],r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.IceServers.prototype.toObject=function(e){return proto.api.responses.school_manager.IceServers.toObject(e,this)},proto.api.responses.school_manager.IceServers.toObject=function(e,t){var n,o={username:r.Message.getFieldWithDefault(t,1,""),credential:r.Message.getFieldWithDefault(t,2,""),urlsList:null==(n=r.Message.getRepeatedField(t,3))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.school_manager.IceServers.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.IceServers;return proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setCredential(n);break;case 3:n=t.readString(),e.addUrls(n);break;default:t.skipField()}return e},proto.api.responses.school_manager.IceServers.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.IceServers.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.IceServers.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getCredential()).length>0&&t.writeString(2,n),(n=e.getUrlsList()).length>0&&t.writeRepeatedString(3,n)},proto.api.responses.school_manager.IceServers.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.IceServers.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.IceServers.prototype.getCredential=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.school_manager.IceServers.prototype.setCredential=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.school_manager.IceServers.prototype.getUrlsList=function(){return r.Message.getRepeatedField(this,3)},proto.api.responses.school_manager.IceServers.prototype.setUrlsList=function(e){return r.Message.setField(this,3,e||[])},proto.api.responses.school_manager.IceServers.prototype.addUrls=function(e,t){return r.Message.addToRepeatedField(this,3,e,t)},proto.api.responses.school_manager.IceServers.prototype.clearUrlsList=function(){return this.setUrlsList([])},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.IceMessage.prototype.toObject=function(e){return proto.api.responses.school_manager.IceMessage.toObject(e,this)},proto.api.responses.school_manager.IceMessage.toObject=function(e,t){var n,r={iceservers:(n=t.getIceservers())&&proto.api.responses.school_manager.IceServers.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.api.responses.school_manager.IceMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.IceMessage;return proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.api.responses.school_manager.IceServers;t.readMessage(n,proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader),e.setIceservers(n)}else t.skipField();return e},proto.api.responses.school_manager.IceMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getIceservers())&&t.writeMessage(1,n,proto.api.responses.school_manager.IceServers.serializeBinaryToWriter)},proto.api.responses.school_manager.IceMessage.prototype.getIceservers=function(){return r.Message.getWrapperField(this,proto.api.responses.school_manager.IceServers,1)},proto.api.responses.school_manager.IceMessage.prototype.setIceservers=function(e){return r.Message.setWrapperField(this,1,e)},proto.api.responses.school_manager.IceMessage.prototype.clearIceservers=function(){return this.setIceservers(void 0)},proto.api.responses.school_manager.IceMessage.prototype.hasIceservers=function(){return null!=r.Message.getField(this,1)},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.EventHeader.prototype.toObject=function(e){return proto.api.responses.school_manager.EventHeader.toObject(e,this)},proto.api.responses.school_manager.EventHeader.toObject=function(e,t){var n={timestampepochms:r.Message.getFieldWithDefault(t,1,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.EventHeader.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.EventHeader;return proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readString();e.setTimestampepochms(n)}else t.skipField();return e},proto.api.responses.school_manager.EventHeader.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter=function(e,t){var n;(n=e.getTimestampepochms()).length>0&&t.writeString(1,n)},proto.api.responses.school_manager.EventHeader.prototype.getTimestampepochms=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.EventHeader.prototype.setTimestampepochms=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.EventType={MESSAGE:0,OPEN_TAB:1,POLICY_UPDATE:2,CLASS_STARTED:3,INIT_P2P:4,CONFIG_UPDATE:5,CLOSE_TAB:6},o.object.extend(t,proto.api.responses.school_manager)},619:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(741);o.object.extend(proto,s),o.exportSymbol("proto.api.responses.v2.AutoEnrolResponse",null,i),o.exportSymbol("proto.api.responses.v2.AutoEnrolmentDetails",null,i),proto.api.responses.v2.AutoEnrolResponse=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.AutoEnrolResponse,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.AutoEnrolResponse.displayName="proto.api.responses.v2.AutoEnrolResponse"),proto.api.responses.v2.AutoEnrolmentDetails=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.AutoEnrolmentDetails,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.AutoEnrolmentDetails.displayName="proto.api.responses.v2.AutoEnrolmentDetails"),r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.AutoEnrolResponse.prototype.toObject=function(e){return proto.api.responses.v2.AutoEnrolResponse.toObject(e,this)},proto.api.responses.v2.AutoEnrolResponse.toObject=function(e,t){var n,o={id:r.Message.getFieldWithDefault(t,1,""),authtoken:r.Message.getFieldWithDefault(t,2,""),state:r.Message.getFieldWithDefault(t,3,0),mac:r.Message.getFieldWithDefault(t,4,""),providerauth:(n=t.getProviderauth())&&proto.api.responses.v2.AutoEnrolmentDetails.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.v2.AutoEnrolResponse.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.AutoEnrolResponse;return proto.api.responses.v2.AutoEnrolResponse.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.AutoEnrolResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setId(n);break;case 2:n=t.readString(),e.setAuthtoken(n);break;case 3:n=t.readEnum(),e.setState(n);break;case 4:n=t.readString(),e.setMac(n);break;case 5:n=new proto.api.responses.v2.AutoEnrolmentDetails,t.readMessage(n,proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader),e.setProviderauth(n);break;default:t.skipField()}return e},proto.api.responses.v2.AutoEnrolResponse.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.AutoEnrolResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.AutoEnrolResponse.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getId()).length>0&&t.writeString(1,n),(n=e.getAuthtoken()).length>0&&t.writeString(2,n),0!==(n=e.getState())&&t.writeEnum(3,n),(n=e.getMac()).length>0&&t.writeString(4,n),null!=(n=e.getProviderauth())&&t.writeMessage(5,n,proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter)},proto.api.responses.v2.AutoEnrolResponse.prototype.getId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getAuthtoken=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setAuthtoken=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getState=function(){return r.Message.getFieldWithDefault(this,3,0)},proto.api.responses.v2.AutoEnrolResponse.prototype.setState=function(e){return r.Message.setProto3EnumField(this,3,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getMac=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setMac=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getProviderauth=function(){return r.Message.getWrapperField(this,proto.api.responses.v2.AutoEnrolmentDetails,5)},proto.api.responses.v2.AutoEnrolResponse.prototype.setProviderauth=function(e){return r.Message.setWrapperField(this,5,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.clearProviderauth=function(){return this.setProviderauth(void 0)},proto.api.responses.v2.AutoEnrolResponse.prototype.hasProviderauth=function(){return null!=r.Message.getField(this,5)},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.AutoEnrolmentDetails.prototype.toObject=function(e){return proto.api.responses.v2.AutoEnrolmentDetails.toObject(e,this)},proto.api.responses.v2.AutoEnrolmentDetails.toObject=function(e,t){var n={username:r.Message.getFieldWithDefault(t,1,""),providertype:r.Message.getFieldWithDefault(t,2,""),applianceid:r.Message.getFieldWithDefault(t,3,""),region:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.AutoEnrolmentDetails;return proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setProvidertype(n);break;case 3:n=t.readString(),e.setApplianceid(n);break;case 4:n=t.readString(),e.setRegion(n);break;default:t.skipField()}return e},proto.api.responses.v2.AutoEnrolmentDetails.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getProvidertype()).length>0&&t.writeString(2,n),(n=e.getApplianceid()).length>0&&t.writeString(3,n),(n=e.getRegion()).length>0&&t.writeString(4,n)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getProvidertype=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setProvidertype=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getApplianceid=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setApplianceid=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getRegion=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setRegion=function(e){return r.Message.setProto3StringField(this,4,e)},o.object.extend(t,proto.api.responses.v2)},658:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(198);o.object.extend(proto,s);var a=n(741);o.object.extend(proto,a),o.exportSymbol("proto.api.responses.v2.EnrollManagedDeviceResponse",null,i),o.exportSymbol("proto.api.responses.v2.EnrollManagedDeviceResponse.User",null,i),proto.api.responses.v2.EnrollManagedDeviceResponse=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.EnrollManagedDeviceResponse,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.EnrollManagedDeviceResponse.displayName="proto.api.responses.v2.EnrollManagedDeviceResponse"),proto.api.responses.v2.EnrollManagedDeviceResponse.User=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.EnrollManagedDeviceResponse.User,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.EnrollManagedDeviceResponse.User.displayName="proto.api.responses.v2.EnrollManagedDeviceResponse.User"),r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.toObject=function(e){return proto.api.responses.v2.EnrollManagedDeviceResponse.toObject(e,this)},proto.api.responses.v2.EnrollManagedDeviceResponse.toObject=function(e,t){var n,o={authtoken:r.Message.getFieldWithDefault(t,1,""),status:r.Message.getFieldWithDefault(t,2,0),id:r.Message.getFieldWithDefault(t,3,""),user:(n=t.getUser())&&proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject(e,n),region:r.Message.getFieldWithDefault(t,5,"")};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.EnrollManagedDeviceResponse;return proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setAuthtoken(n);break;case 2:n=t.readEnum(),e.setStatus(n);break;case 3:n=t.readString(),e.setId(n);break;case 4:n=new proto.api.responses.v2.EnrollManagedDeviceResponse.User,t.readMessage(n,proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader),e.setUser(n);break;case 5:n=t.readString(),e.setRegion(n);break;default:t.skipField()}return e},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.EnrollManagedDeviceResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.EnrollManagedDeviceResponse.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getAuthtoken()).length>0&&t.writeString(1,n),0!==(n=e.getStatus())&&t.writeEnum(2,n),(n=e.getId()).length>0&&t.writeString(3,n),null!=(n=e.getUser())&&t.writeMessage(4,n,proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter),(n=e.getRegion()).length>0&&t.writeString(5,n)},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.toObject=function(e){return proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject(e,this)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject=function(e,t){var n,o={id:r.Message.getFieldWithDefault(t,1,""),samaccountid:r.Message.getFieldWithDefault(t,2,""),name:(n=t.getName())&&s.UserName.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.EnrollManagedDeviceResponse.User;return proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setId(n);break;case 2:n=t.readString(),e.setSamaccountid(n);break;case 3:n=new s.UserName,t.readMessage(n,s.UserName.deserializeBinaryFromReader),e.setName(n);break;default:t.skipField()}return e},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getId()).length>0&&t.writeString(1,n),(n=e.getSamaccountid()).length>0&&t.writeString(2,n),null!=(n=e.getName())&&t.writeMessage(3,n,s.UserName.serializeBinaryToWriter)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getSamaccountid=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setSamaccountid=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getName=function(){return r.Message.getWrapperField(this,s.UserName,3)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setName=function(e){return r.Message.setWrapperField(this,3,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.clearName=function(){return this.setName(void 0)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.hasName=function(){return null!=r.Message.getField(this,3)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getAuthtoken=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setAuthtoken=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getStatus=function(){return r.Message.getFieldWithDefault(this,2,0)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setStatus=function(e){return r.Message.setProto3EnumField(this,2,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getId=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setId=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getUser=function(){return r.Message.getWrapperField(this,proto.api.responses.v2.EnrollManagedDeviceResponse.User,4)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setUser=function(e){return r.Message.setWrapperField(this,4,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.clearUser=function(){return this.setUser(void 0)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.hasUser=function(){return null!=r.Message.getField(this,4)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getRegion=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setRegion=function(e){return r.Message.setProto3StringField(this,5,e)},o.object.extend(t,proto.api.responses.v2)},326:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(776);o.object.extend(proto,s),o.exportSymbol("proto.classwize.ClasswizeEvent",null,i),proto.classwize.ClasswizeEvent=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.classwize.ClasswizeEvent,r.Message),o.DEBUG&&!COMPILED&&(proto.classwize.ClasswizeEvent.displayName="proto.classwize.ClasswizeEvent"),r.Message.GENERATE_TO_OBJECT&&(proto.classwize.ClasswizeEvent.prototype.toObject=function(e){return proto.classwize.ClasswizeEvent.toObject(e,this)},proto.classwize.ClasswizeEvent.toObject=function(e,t){var n,r={messages:(n=t.getMessages())&&s.EventMessage.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.classwize.ClasswizeEvent.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.classwize.ClasswizeEvent;return proto.classwize.ClasswizeEvent.deserializeBinaryFromReader(n,t)},proto.classwize.ClasswizeEvent.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new s.EventMessage;t.readMessage(n,s.EventMessage.deserializeBinaryFromReader),e.setMessages(n)}else t.skipField();return e},proto.classwize.ClasswizeEvent.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.classwize.ClasswizeEvent.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.classwize.ClasswizeEvent.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getMessages())&&t.writeMessage(1,n,s.EventMessage.serializeBinaryToWriter)},proto.classwize.ClasswizeEvent.prototype.getMessages=function(){return r.Message.getWrapperField(this,s.EventMessage,1)},proto.classwize.ClasswizeEvent.prototype.setMessages=function(e){return r.Message.setWrapperField(this,1,e)},proto.classwize.ClasswizeEvent.prototype.clearMessages=function(){return this.setMessages(void 0)},proto.classwize.ClasswizeEvent.prototype.hasMessages=function(){return null!=r.Message.getField(this,1)},o.object.extend(t,proto.classwize)},71:(e,t,n)=>{var r=n(157),o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),i=n(458);r.object.extend(proto,i);var s=n(326);r.object.extend(proto,s);var a=n(245);r.object.extend(proto,a)},635:(e,t,n)=>{n(71);var r=n(458),o=n(326),i=n(245),s=n(459).grpc,a=function(){function e(){}return e.serviceName="classwize.ClasswizeApi",e}();function c(e,t){this.serviceHost=e,this.options=t||{}}a.ReceiveEvents={methodName:"ReceiveEvents",service:a,requestStream:!1,responseStream:!0,requestType:r.Empty,responseType:o.ClasswizeEvent},a.UpdateTabs={methodName:"UpdateTabs",service:a,requestStream:!1,responseStream:!1,requestType:i.WindowUpdate,responseType:r.Empty},c.prototype.receiveEvents=function(e,t){var n={data:[],end:[],status:[]},r=s.invoke(a.ReceiveEvents,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onMessage:function(e){n.data.forEach((function(t){t(e)}))},onEnd:function(e,t,r){n.status.forEach((function(n){n({code:e,details:t,metadata:r})})),n.end.forEach((function(n){n({code:e,details:t,metadata:r})})),n=null}});return{on:function(e,t){return n[e].push(t),this},cancel:function(){n=null,r.close()}}},c.prototype.updateTabs=function(e,t,n){2===arguments.length&&(n=arguments[1]);var r=s.unary(a.UpdateTabs,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(n)if(e.status!==s.Code.OK){var t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,n(t,null)}else n(null,e.message)}});return{cancel:function(){n=null,r.close()}}},t.T=c},409:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(669);o.object.extend(proto,s),o.exportSymbol("proto.companion.CompanionRegistrationRequest",null,i),o.exportSymbol("proto.companion.CompanionRegistrationResponse",null,i),o.exportSymbol("proto.companion.ConsoleLog",null,i),o.exportSymbol("proto.companion.EnrolmentDetails",null,i),o.exportSymbol("proto.companion.Functionality",null,i),proto.companion.CompanionRegistrationRequest=function(e){r.Message.initialize(this,e,0,-1,proto.companion.CompanionRegistrationRequest.repeatedFields_,null)},o.inherits(proto.companion.CompanionRegistrationRequest,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.CompanionRegistrationRequest.displayName="proto.companion.CompanionRegistrationRequest"),proto.companion.EnrolmentDetails=function(e){r.Message.initialize(this,e,0,-1,proto.companion.EnrolmentDetails.repeatedFields_,null)},o.inherits(proto.companion.EnrolmentDetails,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.EnrolmentDetails.displayName="proto.companion.EnrolmentDetails"),proto.companion.CompanionRegistrationResponse=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.companion.CompanionRegistrationResponse,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.CompanionRegistrationResponse.displayName="proto.companion.CompanionRegistrationResponse"),proto.companion.ConsoleLog=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.companion.ConsoleLog,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.ConsoleLog.displayName="proto.companion.ConsoleLog"),proto.companion.CompanionRegistrationRequest.repeatedFields_=[3],r.Message.GENERATE_TO_OBJECT&&(proto.companion.CompanionRegistrationRequest.prototype.toObject=function(e){return proto.companion.CompanionRegistrationRequest.toObject(e,this)},proto.companion.CompanionRegistrationRequest.toObject=function(e,t){var n,o={name:r.Message.getFieldWithDefault(t,1,""),version:r.Message.getFieldWithDefault(t,2,""),functionalityList:null==(n=r.Message.getRepeatedField(t,3))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.companion.CompanionRegistrationRequest.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.CompanionRegistrationRequest;return proto.companion.CompanionRegistrationRequest.deserializeBinaryFromReader(n,t)},proto.companion.CompanionRegistrationRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setName(n);break;case 2:n=t.readString(),e.setVersion(n);break;case 3:for(var r=t.isDelimited()?t.readPackedEnum():[t.readEnum()],o=0;o<r.length;o++)e.addFunctionality(r[o]);break;default:t.skipField()}return e},proto.companion.CompanionRegistrationRequest.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.CompanionRegistrationRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.CompanionRegistrationRequest.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getName()).length>0&&t.writeString(1,n),(n=e.getVersion()).length>0&&t.writeString(2,n),(n=e.getFunctionalityList()).length>0&&t.writePackedEnum(3,n)},proto.companion.CompanionRegistrationRequest.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.CompanionRegistrationRequest.prototype.setName=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.CompanionRegistrationRequest.prototype.getVersion=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.companion.CompanionRegistrationRequest.prototype.setVersion=function(e){return r.Message.setProto3StringField(this,2,e)},proto.companion.CompanionRegistrationRequest.prototype.getFunctionalityList=function(){return r.Message.getRepeatedField(this,3)},proto.companion.CompanionRegistrationRequest.prototype.setFunctionalityList=function(e){return r.Message.setField(this,3,e||[])},proto.companion.CompanionRegistrationRequest.prototype.addFunctionality=function(e,t){return r.Message.addToRepeatedField(this,3,e,t)},proto.companion.CompanionRegistrationRequest.prototype.clearFunctionalityList=function(){return this.setFunctionalityList([])},proto.companion.EnrolmentDetails.repeatedFields_=[5,7,8,10],r.Message.GENERATE_TO_OBJECT&&(proto.companion.EnrolmentDetails.prototype.toObject=function(e){return proto.companion.EnrolmentDetails.toObject(e,this)},proto.companion.EnrolmentDetails.toObject=function(e,t){var n,o={username:r.Message.getFieldWithDefault(t,1,""),applianceid:r.Message.getFieldWithDefault(t,2,""),region:r.Message.getFieldWithDefault(t,3,""),primaryipaddress:r.Message.getFieldWithDefault(t,4,""),enabledfeaturesList:null==(n=r.Message.getRepeatedField(t,5))?void 0:n,devicetoken:r.Message.getFieldWithDefault(t,6,""),featureflagsList:null==(n=r.Message.getRepeatedField(t,7))?void 0:n,ipaddressesList:null==(n=r.Message.getRepeatedField(t,8))?void 0:n,enrolmentinformation:(n=t.getEnrolmentinformation())&&s.EnrolmentInformation.toObject(e,n),macaddressesList:null==(n=r.Message.getRepeatedField(t,10))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.companion.EnrolmentDetails.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.EnrolmentDetails;return proto.companion.EnrolmentDetails.deserializeBinaryFromReader(n,t)},proto.companion.EnrolmentDetails.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setApplianceid(n);break;case 3:n=t.readString(),e.setRegion(n);break;case 4:n=t.readString(),e.setPrimaryipaddress(n);break;case 5:n=t.readString(),e.addEnabledfeatures(n);break;case 6:n=t.readString(),e.setDevicetoken(n);break;case 7:n=t.readString(),e.addFeatureflags(n);break;case 8:n=t.readString(),e.addIpaddresses(n);break;case 9:n=new s.EnrolmentInformation,t.readMessage(n,s.EnrolmentInformation.deserializeBinaryFromReader),e.setEnrolmentinformation(n);break;case 10:n=t.readString(),e.addMacaddresses(n);break;default:t.skipField()}return e},proto.companion.EnrolmentDetails.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.EnrolmentDetails.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.EnrolmentDetails.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getApplianceid()).length>0&&t.writeString(2,n),(n=e.getRegion()).length>0&&t.writeString(3,n),(n=e.getPrimaryipaddress()).length>0&&t.writeString(4,n),(n=e.getEnabledfeaturesList()).length>0&&t.writeRepeatedString(5,n),(n=e.getDevicetoken()).length>0&&t.writeString(6,n),(n=e.getFeatureflagsList()).length>0&&t.writeRepeatedString(7,n),(n=e.getIpaddressesList()).length>0&&t.writeRepeatedString(8,n),null!=(n=e.getEnrolmentinformation())&&t.writeMessage(9,n,s.EnrolmentInformation.serializeBinaryToWriter),(n=e.getMacaddressesList()).length>0&&t.writeRepeatedString(10,n)},proto.companion.EnrolmentDetails.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.EnrolmentDetails.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.EnrolmentDetails.prototype.getApplianceid=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.companion.EnrolmentDetails.prototype.setApplianceid=function(e){return r.Message.setProto3StringField(this,2,e)},proto.companion.EnrolmentDetails.prototype.getRegion=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.companion.EnrolmentDetails.prototype.setRegion=function(e){return r.Message.setProto3StringField(this,3,e)},proto.companion.EnrolmentDetails.prototype.getPrimaryipaddress=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.companion.EnrolmentDetails.prototype.setPrimaryipaddress=function(e){return r.Message.setProto3StringField(this,4,e)},proto.companion.EnrolmentDetails.prototype.getEnabledfeaturesList=function(){return r.Message.getRepeatedField(this,5)},proto.companion.EnrolmentDetails.prototype.setEnabledfeaturesList=function(e){return r.Message.setField(this,5,e||[])},proto.companion.EnrolmentDetails.prototype.addEnabledfeatures=function(e,t){return r.Message.addToRepeatedField(this,5,e,t)},proto.companion.EnrolmentDetails.prototype.clearEnabledfeaturesList=function(){return this.setEnabledfeaturesList([])},proto.companion.EnrolmentDetails.prototype.getDevicetoken=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.companion.EnrolmentDetails.prototype.setDevicetoken=function(e){return r.Message.setProto3StringField(this,6,e)},proto.companion.EnrolmentDetails.prototype.getFeatureflagsList=function(){return r.Message.getRepeatedField(this,7)},proto.companion.EnrolmentDetails.prototype.setFeatureflagsList=function(e){return r.Message.setField(this,7,e||[])},proto.companion.EnrolmentDetails.prototype.addFeatureflags=function(e,t){return r.Message.addToRepeatedField(this,7,e,t)},proto.companion.EnrolmentDetails.prototype.clearFeatureflagsList=function(){return this.setFeatureflagsList([])},proto.companion.EnrolmentDetails.prototype.getIpaddressesList=function(){return r.Message.getRepeatedField(this,8)},proto.companion.EnrolmentDetails.prototype.setIpaddressesList=function(e){return r.Message.setField(this,8,e||[])},proto.companion.EnrolmentDetails.prototype.addIpaddresses=function(e,t){return r.Message.addToRepeatedField(this,8,e,t)},proto.companion.EnrolmentDetails.prototype.clearIpaddressesList=function(){return this.setIpaddressesList([])},proto.companion.EnrolmentDetails.prototype.getEnrolmentinformation=function(){return r.Message.getWrapperField(this,s.EnrolmentInformation,9)},proto.companion.EnrolmentDetails.prototype.setEnrolmentinformation=function(e){return r.Message.setWrapperField(this,9,e)},proto.companion.EnrolmentDetails.prototype.clearEnrolmentinformation=function(){return this.setEnrolmentinformation(void 0)},proto.companion.EnrolmentDetails.prototype.hasEnrolmentinformation=function(){return null!=r.Message.getField(this,9)},proto.companion.EnrolmentDetails.prototype.getMacaddressesList=function(){return r.Message.getRepeatedField(this,10)},proto.companion.EnrolmentDetails.prototype.setMacaddressesList=function(e){return r.Message.setField(this,10,e||[])},proto.companion.EnrolmentDetails.prototype.addMacaddresses=function(e,t){return r.Message.addToRepeatedField(this,10,e,t)},proto.companion.EnrolmentDetails.prototype.clearMacaddressesList=function(){return this.setMacaddressesList([])},r.Message.GENERATE_TO_OBJECT&&(proto.companion.CompanionRegistrationResponse.prototype.toObject=function(e){return proto.companion.CompanionRegistrationResponse.toObject(e,this)},proto.companion.CompanionRegistrationResponse.toObject=function(e,t){var n,o={version:r.Message.getFieldWithDefault(t,1,""),enrolmentdetails:(n=t.getEnrolmentdetails())&&proto.companion.EnrolmentDetails.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.companion.CompanionRegistrationResponse.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.CompanionRegistrationResponse;return proto.companion.CompanionRegistrationResponse.deserializeBinaryFromReader(n,t)},proto.companion.CompanionRegistrationResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setVersion(n);break;case 2:n=new proto.companion.EnrolmentDetails,t.readMessage(n,proto.companion.EnrolmentDetails.deserializeBinaryFromReader),e.setEnrolmentdetails(n);break;default:t.skipField()}return e},proto.companion.CompanionRegistrationResponse.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.CompanionRegistrationResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.CompanionRegistrationResponse.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getVersion()).length>0&&t.writeString(1,n),null!=(n=e.getEnrolmentdetails())&&t.writeMessage(2,n,proto.companion.EnrolmentDetails.serializeBinaryToWriter)},proto.companion.CompanionRegistrationResponse.prototype.getVersion=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.CompanionRegistrationResponse.prototype.setVersion=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.CompanionRegistrationResponse.prototype.getEnrolmentdetails=function(){return r.Message.getWrapperField(this,proto.companion.EnrolmentDetails,2)},proto.companion.CompanionRegistrationResponse.prototype.setEnrolmentdetails=function(e){return r.Message.setWrapperField(this,2,e)},proto.companion.CompanionRegistrationResponse.prototype.clearEnrolmentdetails=function(){return this.setEnrolmentdetails(void 0)},proto.companion.CompanionRegistrationResponse.prototype.hasEnrolmentdetails=function(){return null!=r.Message.getField(this,2)},r.Message.GENERATE_TO_OBJECT&&(proto.companion.ConsoleLog.prototype.toObject=function(e){return proto.companion.ConsoleLog.toObject(e,this)},proto.companion.ConsoleLog.toObject=function(e,t){var n={log:r.Message.getFieldWithDefault(t,1,""),loglevel:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.companion.ConsoleLog.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.ConsoleLog;return proto.companion.ConsoleLog.deserializeBinaryFromReader(n,t)},proto.companion.ConsoleLog.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setLog(n);break;case 2:n=t.readString(),e.setLoglevel(n);break;default:t.skipField()}return e},proto.companion.ConsoleLog.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.ConsoleLog.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.ConsoleLog.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getLog()).length>0&&t.writeString(1,n),(n=e.getLoglevel()).length>0&&t.writeString(2,n)},proto.companion.ConsoleLog.prototype.getLog=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.ConsoleLog.prototype.setLog=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.ConsoleLog.prototype.getLoglevel=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.companion.ConsoleLog.prototype.setLoglevel=function(e){return r.Message.setProto3StringField(this,2,e)},proto.companion.Functionality={FILTERING:0,REPORTING:1,CLASSWIZE:2},o.object.extend(t,proto.companion)},934:(e,t,n)=>{var r=n(157),o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),i=n(409);r.object.extend(proto,i);var s=n(458);r.object.extend(proto,s)},518:(e,t,n)=>{n(934);var r=n(409),o=n(458),i=n(459).grpc,s=function(){function e(){}return e.serviceName="companion.CompanionApi",e}();function a(e,t){this.serviceHost=e,this.options=t||{}}s.RegisterCompanion={methodName:"RegisterCompanion",service:s,requestStream:!1,responseStream:!0,requestType:r.CompanionRegistrationRequest,responseType:r.CompanionRegistrationResponse},s.ConsoleLogStream={methodName:"ConsoleLogStream",service:s,requestStream:!0,responseStream:!1,requestType:r.ConsoleLog,responseType:o.Empty},a.prototype.registerCompanion=function(e,t){var n={data:[],end:[],status:[]},r=i.invoke(s.RegisterCompanion,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onMessage:function(e){n.data.forEach((function(t){t(e)}))},onEnd:function(e,t,r){n.status.forEach((function(n){n({code:e,details:t,metadata:r})})),n.end.forEach((function(n){n({code:e,details:t,metadata:r})})),n=null}});return{on:function(e,t){return n[e].push(t),this},cancel:function(){n=null,r.close()}}},a.prototype.consoleLogStream=function(e){var t={end:[],status:[]},n=i.client(s.ConsoleLogStream,{host:this.serviceHost,metadata:e,transport:this.options.transport});return n.onEnd((function(e,n,r){t.status.forEach((function(t){t({code:e,details:n,metadata:r})})),t.end.forEach((function(t){t({code:e,details:n,metadata:r})})),t=null})),{on:function(e,n){return t[e].push(n),this},write:function(t){return n.started||n.start(e),n.send(t),this},end:function(){n.finishSend()},cancel:function(){t=null,n.close()}}},t.A=a},669:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(658);o.object.extend(proto,s);var a=n(619);o.object.extend(proto,a),o.exportSymbol("proto.configuration.EnrolmentInformation",null,i),o.exportSymbol("proto.configuration.EnrolmentInformation.UserInformation",null,i),o.exportSymbol("proto.configuration.Properties",null,i),o.exportSymbol("proto.configuration.PropertiesDNSSetting",null,i),o.exportSymbol("proto.configuration.PropertiesManagedDevice",null,i),proto.configuration.Properties=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.Properties,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.Properties.displayName="proto.configuration.Properties"),proto.configuration.EnrolmentInformation=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.EnrolmentInformation,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.EnrolmentInformation.displayName="proto.configuration.EnrolmentInformation"),proto.configuration.EnrolmentInformation.UserInformation=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.EnrolmentInformation.UserInformation,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.EnrolmentInformation.UserInformation.displayName="proto.configuration.EnrolmentInformation.UserInformation"),proto.configuration.PropertiesDNSSetting=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.PropertiesDNSSetting,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.PropertiesDNSSetting.displayName="proto.configuration.PropertiesDNSSetting"),proto.configuration.PropertiesManagedDevice=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.PropertiesManagedDevice,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.PropertiesManagedDevice.displayName="proto.configuration.PropertiesManagedDevice"),r.Message.GENERATE_TO_OBJECT&&(proto.configuration.Properties.prototype.toObject=function(e){return proto.configuration.Properties.toObject(e,this)},proto.configuration.Properties.toObject=function(e,t){var n,o={loggingLevel:r.Message.getFieldWithDefault(t,1,""),deviceToken:r.Message.getFieldWithDefault(t,2,""),deviceId:r.Message.getFieldWithDefault(t,3,""),dnsSettingsMap:(n=t.getDnsSettingsMap())?n.toObject(e,proto.configuration.PropertiesDNSSetting.toObject):[],managedDevice:(n=t.getManagedDevice())&&proto.configuration.PropertiesManagedDevice.toObject(e,n),autoEnrolmentDetails:(n=t.getAutoEnrolmentDetails())&&a.AutoEnrolmentDetails.toObject(e,n),lastSuccessfulEnrollmentUsername:r.Message.getFieldWithDefault(t,13,""),enrolmentInformation:(n=t.getEnrolmentInformation())&&proto.configuration.EnrolmentInformation.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.configuration.Properties.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.Properties;return proto.configuration.Properties.deserializeBinaryFromReader(n,t)},proto.configuration.Properties.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setLoggingLevel(n);break;case 2:n=t.readString(),e.setDeviceToken(n);break;case 3:n=t.readString(),e.setDeviceId(n);break;case 10:n=e.getDnsSettingsMap(),t.readMessage(n,(function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readMessage,proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader,"",new proto.configuration.PropertiesDNSSetting)}));break;case 11:n=new proto.configuration.PropertiesManagedDevice,t.readMessage(n,proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader),e.setManagedDevice(n);break;case 12:n=new a.AutoEnrolmentDetails,t.readMessage(n,a.AutoEnrolmentDetails.deserializeBinaryFromReader),e.setAutoEnrolmentDetails(n);break;case 13:n=t.readString(),e.setLastSuccessfulEnrollmentUsername(n);break;case 14:n=new proto.configuration.EnrolmentInformation,t.readMessage(n,proto.configuration.EnrolmentInformation.deserializeBinaryFromReader),e.setEnrolmentInformation(n);break;default:t.skipField()}return e},proto.configuration.Properties.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.Properties.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.Properties.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getLoggingLevel()).length>0&&t.writeString(1,n),(n=e.getDeviceToken()).length>0&&t.writeString(2,n),(n=e.getDeviceId()).length>0&&t.writeString(3,n),(n=e.getDnsSettingsMap(!0))&&n.getLength()>0&&n.serializeBinary(10,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeMessage,proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter),null!=(n=e.getManagedDevice())&&t.writeMessage(11,n,proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter),null!=(n=e.getAutoEnrolmentDetails())&&t.writeMessage(12,n,a.AutoEnrolmentDetails.serializeBinaryToWriter),(n=e.getLastSuccessfulEnrollmentUsername()).length>0&&t.writeString(13,n),null!=(n=e.getEnrolmentInformation())&&t.writeMessage(14,n,proto.configuration.EnrolmentInformation.serializeBinaryToWriter)},proto.configuration.Properties.prototype.getLoggingLevel=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.Properties.prototype.setLoggingLevel=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.Properties.prototype.getDeviceToken=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.Properties.prototype.setDeviceToken=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.Properties.prototype.getDeviceId=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.configuration.Properties.prototype.setDeviceId=function(e){return r.Message.setProto3StringField(this,3,e)},proto.configuration.Properties.prototype.getDnsSettingsMap=function(e){return r.Message.getMapField(this,10,e,proto.configuration.PropertiesDNSSetting)},proto.configuration.Properties.prototype.clearDnsSettingsMap=function(){return this.getDnsSettingsMap().clear(),this},proto.configuration.Properties.prototype.getManagedDevice=function(){return r.Message.getWrapperField(this,proto.configuration.PropertiesManagedDevice,11)},proto.configuration.Properties.prototype.setManagedDevice=function(e){return r.Message.setWrapperField(this,11,e)},proto.configuration.Properties.prototype.clearManagedDevice=function(){return this.setManagedDevice(void 0)},proto.configuration.Properties.prototype.hasManagedDevice=function(){return null!=r.Message.getField(this,11)},proto.configuration.Properties.prototype.getAutoEnrolmentDetails=function(){return r.Message.getWrapperField(this,a.AutoEnrolmentDetails,12)},proto.configuration.Properties.prototype.setAutoEnrolmentDetails=function(e){return r.Message.setWrapperField(this,12,e)},proto.configuration.Properties.prototype.clearAutoEnrolmentDetails=function(){return this.setAutoEnrolmentDetails(void 0)},proto.configuration.Properties.prototype.hasAutoEnrolmentDetails=function(){return null!=r.Message.getField(this,12)},proto.configuration.Properties.prototype.getLastSuccessfulEnrollmentUsername=function(){return r.Message.getFieldWithDefault(this,13,"")},proto.configuration.Properties.prototype.setLastSuccessfulEnrollmentUsername=function(e){return r.Message.setProto3StringField(this,13,e)},proto.configuration.Properties.prototype.getEnrolmentInformation=function(){return r.Message.getWrapperField(this,proto.configuration.EnrolmentInformation,14)},proto.configuration.Properties.prototype.setEnrolmentInformation=function(e){return r.Message.setWrapperField(this,14,e)},proto.configuration.Properties.prototype.clearEnrolmentInformation=function(){return this.setEnrolmentInformation(void 0)},proto.configuration.Properties.prototype.hasEnrolmentInformation=function(){return null!=r.Message.getField(this,14)},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.EnrolmentInformation.prototype.toObject=function(e){return proto.configuration.EnrolmentInformation.toObject(e,this)},proto.configuration.EnrolmentInformation.toObject=function(e,t){var n,o={provider:r.Message.getFieldWithDefault(t,1,""),apiToken:r.Message.getFieldWithDefault(t,2,""),customerId:r.Message.getFieldWithDefault(t,3,""),tenantId:r.Message.getFieldWithDefault(t,4,""),userInformation:(n=t.getUserInformation())&&proto.configuration.EnrolmentInformation.UserInformation.toObject(e,n),apiRegion:r.Message.getFieldWithDefault(t,6,""),metadataMap:(n=t.getMetadataMap())?n.toObject(e,void 0):[]};return e&&(o.$jspbMessageInstance=t),o}),proto.configuration.EnrolmentInformation.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.EnrolmentInformation;return proto.configuration.EnrolmentInformation.deserializeBinaryFromReader(n,t)},proto.configuration.EnrolmentInformation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setProvider(n);break;case 2:n=t.readString(),e.setApiToken(n);break;case 3:n=t.readString(),e.setCustomerId(n);break;case 4:n=t.readString(),e.setTenantId(n);break;case 5:n=new proto.configuration.EnrolmentInformation.UserInformation,t.readMessage(n,proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader),e.setUserInformation(n);break;case 6:n=t.readString(),e.setApiRegion(n);break;case 10:n=e.getMetadataMap(),t.readMessage(n,(function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readString,null,"","")}));break;default:t.skipField()}return e},proto.configuration.EnrolmentInformation.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.EnrolmentInformation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.EnrolmentInformation.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getProvider()).length>0&&t.writeString(1,n),(n=e.getApiToken()).length>0&&t.writeString(2,n),(n=e.getCustomerId()).length>0&&t.writeString(3,n),null!=(n=r.Message.getField(e,4))&&t.writeString(4,n),null!=(n=e.getUserInformation())&&t.writeMessage(5,n,proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter),null!=(n=r.Message.getField(e,6))&&t.writeString(6,n),(n=e.getMetadataMap(!0))&&n.getLength()>0&&n.serializeBinary(10,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeString)},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.EnrolmentInformation.UserInformation.prototype.toObject=function(e){return proto.configuration.EnrolmentInformation.UserInformation.toObject(e,this)},proto.configuration.EnrolmentInformation.UserInformation.toObject=function(e,t){var n={username:r.Message.getFieldWithDefault(t,1,""),usernameRaw:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.configuration.EnrolmentInformation.UserInformation.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.EnrolmentInformation.UserInformation;return proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader(n,t)},proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setUsernameRaw(n);break;default:t.skipField()}return e},proto.configuration.EnrolmentInformation.UserInformation.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getUsernameRaw()).length>0&&t.writeString(2,n)},proto.configuration.EnrolmentInformation.UserInformation.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.EnrolmentInformation.UserInformation.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.EnrolmentInformation.UserInformation.prototype.getUsernameRaw=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.EnrolmentInformation.UserInformation.prototype.setUsernameRaw=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.EnrolmentInformation.prototype.getProvider=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.EnrolmentInformation.prototype.setProvider=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.EnrolmentInformation.prototype.getApiToken=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.EnrolmentInformation.prototype.setApiToken=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.EnrolmentInformation.prototype.getCustomerId=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.configuration.EnrolmentInformation.prototype.setCustomerId=function(e){return r.Message.setProto3StringField(this,3,e)},proto.configuration.EnrolmentInformation.prototype.getTenantId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.configuration.EnrolmentInformation.prototype.setTenantId=function(e){return r.Message.setField(this,4,e)},proto.configuration.EnrolmentInformation.prototype.clearTenantId=function(){return r.Message.setField(this,4,void 0)},proto.configuration.EnrolmentInformation.prototype.hasTenantId=function(){return null!=r.Message.getField(this,4)},proto.configuration.EnrolmentInformation.prototype.getUserInformation=function(){return r.Message.getWrapperField(this,proto.configuration.EnrolmentInformation.UserInformation,5)},proto.configuration.EnrolmentInformation.prototype.setUserInformation=function(e){return r.Message.setWrapperField(this,5,e)},proto.configuration.EnrolmentInformation.prototype.clearUserInformation=function(){return this.setUserInformation(void 0)},proto.configuration.EnrolmentInformation.prototype.hasUserInformation=function(){return null!=r.Message.getField(this,5)},proto.configuration.EnrolmentInformation.prototype.getApiRegion=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.configuration.EnrolmentInformation.prototype.setApiRegion=function(e){return r.Message.setField(this,6,e)},proto.configuration.EnrolmentInformation.prototype.clearApiRegion=function(){return r.Message.setField(this,6,void 0)},proto.configuration.EnrolmentInformation.prototype.hasApiRegion=function(){return null!=r.Message.getField(this,6)},proto.configuration.EnrolmentInformation.prototype.getMetadataMap=function(e){return r.Message.getMapField(this,10,e,null)},proto.configuration.EnrolmentInformation.prototype.clearMetadataMap=function(){return this.getMetadataMap().clear(),this},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.PropertiesDNSSetting.prototype.toObject=function(e){return proto.configuration.PropertiesDNSSetting.toObject(e,this)},proto.configuration.PropertiesDNSSetting.toObject=function(e,t){var n={pb_static:r.Message.getBooleanFieldWithDefault(t,1,!1),primaryNameServer:r.Message.getFieldWithDefault(t,2,""),secondaryNameServer:r.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.configuration.PropertiesDNSSetting.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.PropertiesDNSSetting;return proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader(n,t)},proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setStatic(n);break;case 2:n=t.readString(),e.setPrimaryNameServer(n);break;case 3:n=t.readString(),e.setSecondaryNameServer(n);break;default:t.skipField()}return e},proto.configuration.PropertiesDNSSetting.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getStatic())&&t.writeBool(1,n),(n=e.getPrimaryNameServer()).length>0&&t.writeString(2,n),(n=e.getSecondaryNameServer()).length>0&&t.writeString(3,n)},proto.configuration.PropertiesDNSSetting.prototype.getStatic=function(){return r.Message.getBooleanFieldWithDefault(this,1,!1)},proto.configuration.PropertiesDNSSetting.prototype.setStatic=function(e){return r.Message.setProto3BooleanField(this,1,e)},proto.configuration.PropertiesDNSSetting.prototype.getPrimaryNameServer=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.PropertiesDNSSetting.prototype.setPrimaryNameServer=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.PropertiesDNSSetting.prototype.getSecondaryNameServer=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.configuration.PropertiesDNSSetting.prototype.setSecondaryNameServer=function(e){return r.Message.setProto3StringField(this,3,e)},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.PropertiesManagedDevice.prototype.toObject=function(e){return proto.configuration.PropertiesManagedDevice.toObject(e,this)},proto.configuration.PropertiesManagedDevice.toObject=function(e,t){var n,o={applianceId:r.Message.getFieldWithDefault(t,1,""),enrollmentDetails:(n=t.getEnrollmentDetails())&&s.EnrollManagedDeviceResponse.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.configuration.PropertiesManagedDevice.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.PropertiesManagedDevice;return proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader(n,t)},proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setApplianceId(n);break;case 2:n=new s.EnrollManagedDeviceResponse,t.readMessage(n,s.EnrollManagedDeviceResponse.deserializeBinaryFromReader),e.setEnrollmentDetails(n);break;default:t.skipField()}return e},proto.configuration.PropertiesManagedDevice.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getApplianceId()).length>0&&t.writeString(1,n),null!=(n=e.getEnrollmentDetails())&&t.writeMessage(2,n,s.EnrollManagedDeviceResponse.serializeBinaryToWriter)},proto.configuration.PropertiesManagedDevice.prototype.getApplianceId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.PropertiesManagedDevice.prototype.setApplianceId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.PropertiesManagedDevice.prototype.getEnrollmentDetails=function(){return r.Message.getWrapperField(this,s.EnrollManagedDeviceResponse,2)},proto.configuration.PropertiesManagedDevice.prototype.setEnrollmentDetails=function(e){return r.Message.setWrapperField(this,2,e)},proto.configuration.PropertiesManagedDevice.prototype.clearEnrollmentDetails=function(){return this.setEnrollmentDetails(void 0)},proto.configuration.PropertiesManagedDevice.prototype.hasEnrollmentDetails=function(){return null!=r.Message.getField(this,2)},o.object.extend(t,proto.configuration)},786:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.reporting.models.Connection",null,i),o.exportSymbol("proto.reporting.models.ConnectionsReport",null,i),proto.reporting.models.ConnectionsReport=function(e){r.Message.initialize(this,e,0,-1,proto.reporting.models.ConnectionsReport.repeatedFields_,null)},o.inherits(proto.reporting.models.ConnectionsReport,r.Message),o.DEBUG&&!COMPILED&&(proto.reporting.models.ConnectionsReport.displayName="proto.reporting.models.ConnectionsReport"),proto.reporting.models.Connection=function(e){r.Message.initialize(this,e,0,-1,proto.reporting.models.Connection.repeatedFields_,null)},o.inherits(proto.reporting.models.Connection,r.Message),o.DEBUG&&!COMPILED&&(proto.reporting.models.Connection.displayName="proto.reporting.models.Connection"),proto.reporting.models.ConnectionsReport.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.reporting.models.ConnectionsReport.prototype.toObject=function(e){return proto.reporting.models.ConnectionsReport.toObject(e,this)},proto.reporting.models.ConnectionsReport.toObject=function(e,t){var n={itemsList:r.Message.toObjectList(t.getItemsList(),proto.reporting.models.Connection.toObject,e)};return e&&(n.$jspbMessageInstance=t),n}),proto.reporting.models.ConnectionsReport.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.reporting.models.ConnectionsReport;return proto.reporting.models.ConnectionsReport.deserializeBinaryFromReader(n,t)},proto.reporting.models.ConnectionsReport.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.reporting.models.Connection;t.readMessage(n,proto.reporting.models.Connection.deserializeBinaryFromReader),e.addItems(n)}else t.skipField();return e},proto.reporting.models.ConnectionsReport.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.reporting.models.ConnectionsReport.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.reporting.models.ConnectionsReport.serializeBinaryToWriter=function(e,t){var n;(n=e.getItemsList()).length>0&&t.writeRepeatedMessage(1,n,proto.reporting.models.Connection.serializeBinaryToWriter)},proto.reporting.models.ConnectionsReport.prototype.getItemsList=function(){return r.Message.getRepeatedWrapperField(this,proto.reporting.models.Connection,1)},proto.reporting.models.ConnectionsReport.prototype.setItemsList=function(e){return r.Message.setRepeatedWrapperField(this,1,e)},proto.reporting.models.ConnectionsReport.prototype.addItems=function(e,t){return r.Message.addToRepeatedWrapperField(this,1,e,proto.reporting.models.Connection,t)},proto.reporting.models.ConnectionsReport.prototype.clearItemsList=function(){return this.setItemsList([])},proto.reporting.models.Connection.repeatedFields_=[8],r.Message.GENERATE_TO_OBJECT&&(proto.reporting.models.Connection.prototype.toObject=function(e){return proto.reporting.models.Connection.toObject(e,this)},proto.reporting.models.Connection.toObject=function(e,t){var n,o={appFilteringDenied:r.Message.getBooleanFieldWithDefault(t,1,!1),categoryid:r.Message.getFieldWithDefault(t,2,""),destip:r.Message.getFieldWithDefault(t,3,""),destport:r.Message.getFieldWithDefault(t,4,0),download:r.Message.getFieldWithDefault(t,5,0),finalConnectionObject:r.Message.getBooleanFieldWithDefault(t,6,!1),httphost:r.Message.getFieldWithDefault(t,7,""),httpRequestUrisList:null==(n=r.Message.getRepeatedField(t,8))?void 0:n,hwaddress:r.Message.getFieldWithDefault(t,9,""),lifetime:r.Message.getFieldWithDefault(t,10,0),noise:r.Message.getBooleanFieldWithDefault(t,11,!1),packets:r.Message.getFieldWithDefault(t,12,0),protocol:r.Message.getFieldWithDefault(t,13,0),sourceip:r.Message.getFieldWithDefault(t,14,""),subcategoryid:r.Message.getFieldWithDefault(t,15,""),tag:r.Message.getFieldWithDefault(t,16,""),time:r.Message.getFieldWithDefault(t,17,0),upload:r.Message.getFieldWithDefault(t,18,0),user:r.Message.getFieldWithDefault(t,19,""),verdictApplicationRule:r.Message.getFieldWithDefault(t,20,""),reportingtype:r.Message.getFieldWithDefault(t,21,""),extensionconnection:r.Message.getBooleanFieldWithDefault(t,22,!1),hostname:r.Message.getFieldWithDefault(t,23,""),id:r.Message.getFieldWithDefault(t,24,""),agent:r.Message.getFieldWithDefault(t,25,""),hardware:r.Message.getFieldWithDefault(t,26,""),companionModeActive:r.Message.getBooleanFieldWithDefault(t,27,!1),teacherid:r.Message.getFieldWithDefault(t,28,""),resourceType:r.Message.getFieldWithDefault(t,29,""),bypassCode:r.Message.getFieldWithDefault(t,30,""),bypassExpiryTime:r.Message.getFieldWithDefault(t,31,0),htmltitle:r.Message.getFieldWithDefault(t,32,""),filterType:r.Message.getFieldWithDefault(t,33,""),agentInsideNetwork:r.Message.getBooleanFieldWithDefault(t,34,!1),debugChromeVerdictIssued:r.Message.getBooleanFieldWithDefault(t,35,!1),debugChromeRequestid:r.Message.getFieldWithDefault(t,36,""),useragent:r.Message.getFieldWithDefault(t,37,""),requestJourneyLog:r.Message.getFieldWithDefault(t,38,"")};return e&&(o.$jspbMessageInstance=t),o}),proto.reporting.models.Connection.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.reporting.models.Connection;return proto.reporting.models.Connection.deserializeBinaryFromReader(n,t)},proto.reporting.models.Connection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setAppFilteringDenied(n);break;case 2:n=t.readString(),e.setCategoryid(n);break;case 3:n=t.readString(),e.setDestip(n);break;case 4:n=t.readInt32(),e.setDestport(n);break;case 5:n=t.readInt64(),e.setDownload(n);break;case 6:n=t.readBool(),e.setFinalConnectionObject(n);break;case 7:n=t.readString(),e.setHttphost(n);break;case 8:n=t.readString(),e.addHttpRequestUris(n);break;case 9:n=t.readString(),e.setHwaddress(n);break;case 10:n=t.readInt32(),e.setLifetime(n);break;case 11:n=t.readBool(),e.setNoise(n);break;case 12:n=t.readInt32(),e.setPackets(n);break;case 13:n=t.readInt32(),e.setProtocol(n);break;case 14:n=t.readString(),e.setSourceip(n);break;case 15:n=t.readString(),e.setSubcategoryid(n);break;case 16:n=t.readString(),e.setTag(n);break;case 17:n=t.readInt32(),e.setTime(n);break;case 18:n=t.readInt64(),e.setUpload(n);break;case 19:n=t.readString(),e.setUser(n);break;case 20:n=t.readString(),e.setVerdictApplicationRule(n);break;case 21:n=t.readString(),e.setReportingtype(n);break;case 22:n=t.readBool(),e.setExtensionconnection(n);break;case 23:n=t.readString(),e.setHostname(n);break;case 24:n=t.readString(),e.setId(n);break;case 25:n=t.readString(),e.setAgent(n);break;case 26:n=t.readString(),e.setHardware(n);break;case 27:n=t.readBool(),e.setCompanionModeActive(n);break;case 28:n=t.readString(),e.setTeacherid(n);break;case 29:n=t.readString(),e.setResourceType(n);break;case 30:n=t.readString(),e.setBypassCode(n);break;case 31:n=t.readInt64(),e.setBypassExpiryTime(n);break;case 32:n=t.readString(),e.setHtmltitle(n);break;case 33:n=t.readString(),e.setFilterType(n);break;case 34:n=t.readBool(),e.setAgentInsideNetwork(n);break;case 35:n=t.readBool(),e.setDebugChromeVerdictIssued(n);break;case 36:n=t.readString(),e.setDebugChromeRequestid(n);break;case 37:n=t.readString(),e.setUseragent(n);break;case 38:n=t.readString(),e.setRequestJourneyLog(n);break;default:t.skipField()}return e},proto.reporting.models.Connection.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.reporting.models.Connection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.reporting.models.Connection.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getAppFilteringDenied())&&t.writeBool(1,n),(n=e.getCategoryid()).length>0&&t.writeString(2,n),(n=e.getDestip()).length>0&&t.writeString(3,n),0!==(n=e.getDestport())&&t.writeInt32(4,n),0!==(n=e.getDownload())&&t.writeInt64(5,n),(n=e.getFinalConnectionObject())&&t.writeBool(6,n),(n=e.getHttphost()).length>0&&t.writeString(7,n),(n=e.getHttpRequestUrisList()).length>0&&t.writeRepeatedString(8,n),(n=e.getHwaddress()).length>0&&t.writeString(9,n),0!==(n=e.getLifetime())&&t.writeInt32(10,n),(n=e.getNoise())&&t.writeBool(11,n),0!==(n=e.getPackets())&&t.writeInt32(12,n),0!==(n=e.getProtocol())&&t.writeInt32(13,n),(n=e.getSourceip()).length>0&&t.writeString(14,n),(n=e.getSubcategoryid()).length>0&&t.writeString(15,n),(n=e.getTag()).length>0&&t.writeString(16,n),0!==(n=e.getTime())&&t.writeInt32(17,n),0!==(n=e.getUpload())&&t.writeInt64(18,n),(n=e.getUser()).length>0&&t.writeString(19,n),(n=e.getVerdictApplicationRule()).length>0&&t.writeString(20,n),(n=e.getReportingtype()).length>0&&t.writeString(21,n),(n=e.getExtensionconnection())&&t.writeBool(22,n),(n=e.getHostname()).length>0&&t.writeString(23,n),(n=e.getId()).length>0&&t.writeString(24,n),(n=e.getAgent()).length>0&&t.writeString(25,n),(n=e.getHardware()).length>0&&t.writeString(26,n),(n=e.getCompanionModeActive())&&t.writeBool(27,n),null!=(n=r.Message.getField(e,28))&&t.writeString(28,n),(n=e.getResourceType()).length>0&&t.writeString(29,n),(n=e.getBypassCode()).length>0&&t.writeString(30,n),0!==(n=e.getBypassExpiryTime())&&t.writeInt64(31,n),(n=e.getHtmltitle()).length>0&&t.writeString(32,n),(n=e.getFilterType()).length>0&&t.writeString(33,n),(n=e.getAgentInsideNetwork())&&t.writeBool(34,n),(n=e.getDebugChromeVerdictIssued())&&t.writeBool(35,n),(n=e.getDebugChromeRequestid()).length>0&&t.writeString(36,n),(n=e.getUseragent()).length>0&&t.writeString(37,n),(n=e.getRequestJourneyLog()).length>0&&t.writeString(38,n)},proto.reporting.models.Connection.prototype.getAppFilteringDenied=function(){return r.Message.getBooleanFieldWithDefault(this,1,!1)},proto.reporting.models.Connection.prototype.setAppFilteringDenied=function(e){return r.Message.setProto3BooleanField(this,1,e)},proto.reporting.models.Connection.prototype.getCategoryid=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.reporting.models.Connection.prototype.setCategoryid=function(e){return r.Message.setProto3StringField(this,2,e)},proto.reporting.models.Connection.prototype.getDestip=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.reporting.models.Connection.prototype.setDestip=function(e){return r.Message.setProto3StringField(this,3,e)},proto.reporting.models.Connection.prototype.getDestport=function(){return r.Message.getFieldWithDefault(this,4,0)},proto.reporting.models.Connection.prototype.setDestport=function(e){return r.Message.setProto3IntField(this,4,e)},proto.reporting.models.Connection.prototype.getDownload=function(){return r.Message.getFieldWithDefault(this,5,0)},proto.reporting.models.Connection.prototype.setDownload=function(e){return r.Message.setProto3IntField(this,5,e)},proto.reporting.models.Connection.prototype.getFinalConnectionObject=function(){return r.Message.getBooleanFieldWithDefault(this,6,!1)},proto.reporting.models.Connection.prototype.setFinalConnectionObject=function(e){return r.Message.setProto3BooleanField(this,6,e)},proto.reporting.models.Connection.prototype.getHttphost=function(){return r.Message.getFieldWithDefault(this,7,"")},proto.reporting.models.Connection.prototype.setHttphost=function(e){return r.Message.setProto3StringField(this,7,e)},proto.reporting.models.Connection.prototype.getHttpRequestUrisList=function(){return r.Message.getRepeatedField(this,8)},proto.reporting.models.Connection.prototype.setHttpRequestUrisList=function(e){return r.Message.setField(this,8,e||[])},proto.reporting.models.Connection.prototype.addHttpRequestUris=function(e,t){return r.Message.addToRepeatedField(this,8,e,t)},proto.reporting.models.Connection.prototype.clearHttpRequestUrisList=function(){return this.setHttpRequestUrisList([])},proto.reporting.models.Connection.prototype.getHwaddress=function(){return r.Message.getFieldWithDefault(this,9,"")},proto.reporting.models.Connection.prototype.setHwaddress=function(e){return r.Message.setProto3StringField(this,9,e)},proto.reporting.models.Connection.prototype.getLifetime=function(){return r.Message.getFieldWithDefault(this,10,0)},proto.reporting.models.Connection.prototype.setLifetime=function(e){return r.Message.setProto3IntField(this,10,e)},proto.reporting.models.Connection.prototype.getNoise=function(){return r.Message.getBooleanFieldWithDefault(this,11,!1)},proto.reporting.models.Connection.prototype.setNoise=function(e){return r.Message.setProto3BooleanField(this,11,e)},proto.reporting.models.Connection.prototype.getPackets=function(){return r.Message.getFieldWithDefault(this,12,0)},proto.reporting.models.Connection.prototype.setPackets=function(e){return r.Message.setProto3IntField(this,12,e)},proto.reporting.models.Connection.prototype.getProtocol=function(){return r.Message.getFieldWithDefault(this,13,0)},proto.reporting.models.Connection.prototype.setProtocol=function(e){return r.Message.setProto3IntField(this,13,e)},proto.reporting.models.Connection.prototype.getSourceip=function(){return r.Message.getFieldWithDefault(this,14,"")},proto.reporting.models.Connection.prototype.setSourceip=function(e){return r.Message.setProto3StringField(this,14,e)},proto.reporting.models.Connection.prototype.getSubcategoryid=function(){return r.Message.getFieldWithDefault(this,15,"")},proto.reporting.models.Connection.prototype.setSubcategoryid=function(e){return r.Message.setProto3StringField(this,15,e)},proto.reporting.models.Connection.prototype.getTag=function(){return r.Message.getFieldWithDefault(this,16,"")},proto.reporting.models.Connection.prototype.setTag=function(e){return r.Message.setProto3StringField(this,16,e)},proto.reporting.models.Connection.prototype.getTime=function(){return r.Message.getFieldWithDefault(this,17,0)},proto.reporting.models.Connection.prototype.setTime=function(e){return r.Message.setProto3IntField(this,17,e)},proto.reporting.models.Connection.prototype.getUpload=function(){return r.Message.getFieldWithDefault(this,18,0)},proto.reporting.models.Connection.prototype.setUpload=function(e){return r.Message.setProto3IntField(this,18,e)},proto.reporting.models.Connection.prototype.getUser=function(){return r.Message.getFieldWithDefault(this,19,"")},proto.reporting.models.Connection.prototype.setUser=function(e){return r.Message.setProto3StringField(this,19,e)},proto.reporting.models.Connection.prototype.getVerdictApplicationRule=function(){return r.Message.getFieldWithDefault(this,20,"")},proto.reporting.models.Connection.prototype.setVerdictApplicationRule=function(e){return r.Message.setProto3StringField(this,20,e)},proto.reporting.models.Connection.prototype.getReportingtype=function(){return r.Message.getFieldWithDefault(this,21,"")},proto.reporting.models.Connection.prototype.setReportingtype=function(e){return r.Message.setProto3StringField(this,21,e)},proto.reporting.models.Connection.prototype.getExtensionconnection=function(){return r.Message.getBooleanFieldWithDefault(this,22,!1)},proto.reporting.models.Connection.prototype.setExtensionconnection=function(e){return r.Message.setProto3BooleanField(this,22,e)},proto.reporting.models.Connection.prototype.getHostname=function(){return r.Message.getFieldWithDefault(this,23,"")},proto.reporting.models.Connection.prototype.setHostname=function(e){return r.Message.setProto3StringField(this,23,e)},proto.reporting.models.Connection.prototype.getId=function(){return r.Message.getFieldWithDefault(this,24,"")},proto.reporting.models.Connection.prototype.setId=function(e){return r.Message.setProto3StringField(this,24,e)},proto.reporting.models.Connection.prototype.getAgent=function(){return r.Message.getFieldWithDefault(this,25,"")},proto.reporting.models.Connection.prototype.setAgent=function(e){return r.Message.setProto3StringField(this,25,e)},proto.reporting.models.Connection.prototype.getHardware=function(){return r.Message.getFieldWithDefault(this,26,"")},proto.reporting.models.Connection.prototype.setHardware=function(e){return r.Message.setProto3StringField(this,26,e)},proto.reporting.models.Connection.prototype.getCompanionModeActive=function(){return r.Message.getBooleanFieldWithDefault(this,27,!1)},proto.reporting.models.Connection.prototype.setCompanionModeActive=function(e){return r.Message.setProto3BooleanField(this,27,e)},proto.reporting.models.Connection.prototype.getTeacherid=function(){return r.Message.getFieldWithDefault(this,28,"")},proto.reporting.models.Connection.prototype.setTeacherid=function(e){return r.Message.setField(this,28,e)},proto.reporting.models.Connection.prototype.clearTeacherid=function(){return r.Message.setField(this,28,void 0)},proto.reporting.models.Connection.prototype.hasTeacherid=function(){return null!=r.Message.getField(this,28)},proto.reporting.models.Connection.prototype.getResourceType=function(){return r.Message.getFieldWithDefault(this,29,"")},proto.reporting.models.Connection.prototype.setResourceType=function(e){return r.Message.setProto3StringField(this,29,e)},proto.reporting.models.Connection.prototype.getBypassCode=function(){return r.Message.getFieldWithDefault(this,30,"")},proto.reporting.models.Connection.prototype.setBypassCode=function(e){return r.Message.setProto3StringField(this,30,e)},proto.reporting.models.Connection.prototype.getBypassExpiryTime=function(){return r.Message.getFieldWithDefault(this,31,0)},proto.reporting.models.Connection.prototype.setBypassExpiryTime=function(e){return r.Message.setProto3IntField(this,31,e)},proto.reporting.models.Connection.prototype.getHtmltitle=function(){return r.Message.getFieldWithDefault(this,32,"")},proto.reporting.models.Connection.prototype.setHtmltitle=function(e){return r.Message.setProto3StringField(this,32,e)},proto.reporting.models.Connection.prototype.getFilterType=function(){return r.Message.getFieldWithDefault(this,33,"")},proto.reporting.models.Connection.prototype.setFilterType=function(e){return r.Message.setProto3StringField(this,33,e)},proto.reporting.models.Connection.prototype.getAgentInsideNetwork=function(){return r.Message.getBooleanFieldWithDefault(this,34,!1)},proto.reporting.models.Connection.prototype.setAgentInsideNetwork=function(e){return r.Message.setProto3BooleanField(this,34,e)},proto.reporting.models.Connection.prototype.getDebugChromeVerdictIssued=function(){return r.Message.getBooleanFieldWithDefault(this,35,!1)},proto.reporting.models.Connection.prototype.setDebugChromeVerdictIssued=function(e){return r.Message.setProto3BooleanField(this,35,e)},proto.reporting.models.Connection.prototype.getDebugChromeRequestid=function(){return r.Message.getFieldWithDefault(this,36,"")},proto.reporting.models.Connection.prototype.setDebugChromeRequestid=function(e){return r.Message.setProto3StringField(this,36,e)},proto.reporting.models.Connection.prototype.getUseragent=function(){return r.Message.getFieldWithDefault(this,37,"")},proto.reporting.models.Connection.prototype.setUseragent=function(e){return r.Message.setProto3StringField(this,37,e)},proto.reporting.models.Connection.prototype.getRequestJourneyLog=function(){return r.Message.getFieldWithDefault(this,38,"")},proto.reporting.models.Connection.prototype.setRequestJourneyLog=function(e){return r.Message.setProto3StringField(this,38,e)},o.object.extend(t,proto.reporting.models)},459:function(e){var t,n;e.exports=(t={418:function(e,t){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var n,o=this;this.headersMap={},e&&("undefined"!=typeof Headers&&e instanceof Headers?r.getHeaderKeys(e).forEach((function(n){r.getHeaderValues(e,n).forEach((function(e){t.splitValues?o.append(n,r.splitHeaderValue(e)):o.append(n,e)}))})):"object"==typeof(n=e)&&"object"==typeof n.headersMap&&"function"==typeof n.forEach?e.forEach((function(e,t){o.append(e,t)})):"undefined"!=typeof Map&&e instanceof Map?e.forEach((function(e,t){o.append(t,e)})):"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];Array.isArray(n)?n.forEach((function(e){o.append(t,e)})):o.append(t,n)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),n=0;n<t.length;n++){var r=t[n],o=r.indexOf(":");if(o>0){var i=r.substring(0,o).trim(),s=r.substring(o+1).trim();this.append(i,s)}}},e.prototype.delete=function(e,t){var n=r.normalizeName(e);if(void 0===t)delete this.headersMap[n];else{var o=this.headersMap[n];if(o){var i=o.indexOf(t);i>=0&&o.splice(i,1),0===o.length&&delete this.headersMap[n]}}},e.prototype.append=function(e,t){var n=this,o=r.normalizeName(e);Array.isArray(this.headersMap[o])||(this.headersMap[o]=[]),Array.isArray(t)?t.forEach((function(e){n.headersMap[o].push(r.normalizeValue(e))})):this.headersMap[o].push(r.normalizeValue(t))},e.prototype.set=function(e,t){var n=r.normalizeName(e);if(Array.isArray(t)){var o=[];t.forEach((function(e){o.push(r.normalizeValue(e))})),this.headersMap[n]=o}else this.headersMap[n]=[r.normalizeValue(t)]},e.prototype.has=function(e,t){var n=this.headersMap[r.normalizeName(e)];if(!Array.isArray(n))return!1;if(void 0!==t){var o=r.normalizeValue(t);return n.indexOf(o)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[r.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(n){e(n,t.headersMap[n])}),this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach((function(t,n){n.forEach((function(n){e.append(t,n)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.BrowserHeaders=r.BrowserHeaders},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var n=e[Symbol.iterator](),r=n.next();!r.done;)t(r.value[0]),r=n.next()},t.iterateHeadersKeys=function(e,t){for(var n=e.keys(),r=n.next();!r.done;)t(r.value),r=n.next()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var n=e;if(n instanceof Headers&&n.getAll)return n.getAll(t);var r=n.get(t);return r&&"string"==typeof r?[r]:r},t.getHeaderKeys=function(e){var t=e,n={},o=[];return t.keys?r.iterateHeadersKeys(t,(function(e){n[e]||(n[e]=!0,o.push(e))})):t.forEach?t.forEach((function(e,t){n[t]||(n[t]=!0,o.push(t))})):r.iterateHeaders(t,(function(e){var t=e[0];n[t]||(n[t]=!0,o.push(t))})),o},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}]))},617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkParser=t.ChunkType=t.encodeASCII=t.decodeASCII=void 0;var r,o=n(65);function i(e){return 9===(t=e)||10===t||13===t||e>=32&&e<=126;var t}function s(e){for(var t=0;t!==e.length;++t)if(!i(e[t]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function a(e){return!(128&~e.getUint8(0))}function c(e){return e.getUint32(1,!1)}function u(e,t,n){return e.byteLength-t>=n}function l(e,t,n){if(e.slice)return e.slice(t,n);var r=e.length;void 0!==n&&(r=n);for(var o=new Uint8Array(r-t),i=0,s=t;s<r;s++)o[i++]=e[s];return o}t.decodeASCII=s,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),n=0;n!==e.length;++n){var r=e.charCodeAt(n);if(!i(r))throw new Error("Metadata contains invalid ASCII");t[n]=r}return t},function(e){e[e.MESSAGE=1]="MESSAGE",e[e.TRAILERS=2]="TRAILERS"}(r=t.ChunkType||(t.ChunkType={}));var p=function(){function e(){this.buffer=null,this.position=0}return e.prototype.parse=function(e,t){if(0===e.length&&t)return[];var n,i=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else{var p=this.buffer.byteLength-this.position,d=new Uint8Array(p+e.byteLength),f=l(this.buffer,this.position);d.set(f,0);var h=new Uint8Array(e);d.set(h,p),this.buffer=d,this.position=0}for(;;){if(!u(this.buffer,this.position,5))return i;var g=l(this.buffer,this.position,this.position+5),m=new DataView(g.buffer,g.byteOffset,g.byteLength),y=c(m);if(!u(this.buffer,this.position,5+y))return i;var v=l(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,a(m))return i.push({chunkType:r.TRAILERS,trailers:(n=v,new o.Metadata(s(n)))}),i;i.push({chunkType:r.MESSAGE,data:v})}},e}();t.ChunkParser=p},8:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.httpStatusToCode=t.Code=void 0,function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(n=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return n.Internal;case 200:return n.OK;case 400:return n.InvalidArgument;case 401:return n.Unauthenticated;case 403:return n.PermissionDenied;case 404:return n.NotFound;case 409:return n.Aborted;case 412:return n.FailedPrecondition;case 429:return n.ResourceExhausted;case 499:return n.Canceled;case 500:default:return n.Unknown;case 501:return n.Unimplemented;case 503:return n.Unavailable;case 504:return n.DeadlineExceeded}}},934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;var r=n(65),o=n(617),i=n(8),s=n(346),a=n(57),c=n(882);t.client=function(e,t){return new u(e,t)};var u=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new o.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport()}return e.prototype.createTransport=function(){var e=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t)},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&s.debug("onHeaders",e,t),this.closed)this.props.debug&&s.debug("grpc.onHeaders received after request was closed - ignoring");else if(0===t);else{this.responseHeaders=e,this.props.debug&&s.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var n=l(e);this.props.debug&&s.debug("onHeaders.gRPCStatus",n);var r=n&&n>=0?n:i.httpStatusToCode(t);this.props.debug&&s.debug("onHeaders.code",r);var o=e.get("grpc-message")||[];if(this.props.debug&&s.debug("onHeaders.gRPCMessage",o),this.rawOnHeaders(e),r!==i.Code.OK){var a=this.decodeGRPCStatus(o[0]);this.rawOnError(r,a,e)}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&s.debug("grpc.onChunk received after request was closed - ignoring");else{var n=[];try{n=this.parser.parse(e)}catch(e){return this.props.debug&&s.debug("onChunk.parsing error",e,e.message),void this.rawOnError(i.Code.Internal,"parsing error: "+e.message)}n.forEach((function(e){if(e.chunkType===o.ChunkType.MESSAGE){var n=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(n)}else e.chunkType===o.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new r.Metadata(e.trailers),t.props.debug&&s.debug("onChunk.trailers",t.responseTrailers)):(t.responseHeaders=new r.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)))}))}},e.prototype.onTransportEnd=function(){if(this.props.debug&&s.debug("grpc.onEnd"),this.closed)this.props.debug&&s.debug("grpc.onEnd received after request was closed - ignoring");else if(void 0!==this.responseTrailers){var e=l(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get("grpc-message"),n=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,n,this.responseTrailers)}else this.rawOnError(i.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(void 0===this.responseHeaders)return void this.rawOnError(i.Code.Unknown,"Response closed without headers");var r=l(this.responseHeaders),o=this.responseHeaders.get("grpc-message");if(this.props.debug&&s.debug("grpc.headers only response ",r,o),null===r)return void this.rawOnEnd(i.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var a=this.decodeGRPCStatus(o[0]);this.rawOnEnd(r,a,this.responseHeaders)}},e.prototype.decodeGRPCStatus=function(e){if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,n){var r=this;this.props.debug&&s.debug("rawOnEnd",e,t,n),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(o){if(!r.closed)try{o(e,t,n)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnHeaders=function(e){this.props.debug&&s.debug("rawOnHeaders",e),this.completed||this.onHeadersCallbacks.forEach((function(t){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.rawOnError=function(e,t,n){var o=this;void 0===n&&(n=new r.Metadata),this.props.debug&&s.debug("rawOnError",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(r){if(!o.closed)try{r(e,t,n)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&s.debug("rawOnMessage",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach((function(n){if(!t.closed)try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e)},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e)},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e)},e.prototype.start=function(e){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var t=new r.Metadata(e||{});t.set("content-type","application/grpc-web+proto"),t.set("x-grpc-web","1"),this.transport.start(t)},e.prototype.send=function(e){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var t=c.frameRequest(e);this.transport.sendMessage(t)},e.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},e.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&s.debug("request.abort aborting request"),this.transport.cancel()},e}();function l(e){var t=e.get("grpc-status")||[];if(t.length>0)try{var n=t[0];return parseInt(n,10)}catch(e){return null}return null}},346:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0,t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e)}},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grpc=void 0;var r,o=n(418),i=n(57),s=n(229),a=n(540),c=n(210),u=n(859),l=n(8),p=n(938),d=n(35),f=n(934);(r=t.grpc||(t.grpc={})).setDefaultTransport=i.setDefaultTransportFactory,r.CrossBrowserHttpTransport=u.CrossBrowserHttpTransport,r.FetchReadableStreamTransport=s.FetchReadableStreamTransport,r.XhrTransport=c.XhrTransport,r.WebsocketTransport=a.WebsocketTransport,r.Code=l.Code,r.Metadata=o.BrowserHeaders,r.client=function(e,t){return f.client(e,t)},r.invoke=p.invoke,r.unary=d.unary},938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=void 0;var r=n(934);t.invoke=function(e,t){if(e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var n=r.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&n.onHeaders(t.onHeaders),t.onMessage&&n.onMessage(t.onMessage),t.onEnd&&n.onEnd(t.onEnd),n.start(t.metadata),n.send(t.request),n.finishSend(),{close:function(){n.close()}}}},65:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(418);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return r.BrowserHeaders}})},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDefaultTransport=t.setDefaultTransportFactory=void 0;var r=n(859),o=function(e){return r.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){o=e},t.makeDefaultTransport=function(e){return o(e)}},229:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.detectFetchSupport=t.FetchReadableStreamTransport=void 0;var o=n(65),i=n(346);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&i.debug("fetchRequest",e),new s(e,t)}(t,e)}};var s=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t}return e.prototype.pump=function(e,t){var n=this;if(this.reader=e,this.cancelled)return this.options.debug&&i.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch((function(e){n.options.debug&&i.debug("Fetch.pump.reader.cancel exception",e)}));this.reader.read().then((function(e){if(e.done)return n.options.onEnd(),t;n.options.onChunk(e.value),n.pump(n.reader,t)})).catch((function(e){n.cancelled?n.options.debug&&i.debug("Fetch.catch - request cancelled"):(n.cancelled=!0,n.options.debug&&i.debug("Fetch.catch",e.message),n.options.onEnd(e))}))},e.prototype.send=function(e){var t=this;fetch(this.options.url,r(r({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:e,signal:this.controller&&this.controller.signal})).then((function(e){if(t.options.debug&&i.debug("Fetch.response",e),t.options.onHeaders(new o.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e)})).catch((function(e){t.cancelled?t.options.debug&&i.debug("Fetch.catch - request cancelled"):(t.cancelled=!0,t.options.debug&&i.debug("Fetch.catch",e.message),t.options.onEnd(e))}))},e.prototype.sendMessage=function(e){this.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e},e.prototype.cancel=function(){var e=this;this.cancelled?this.options.debug&&i.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&i.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&i.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&i.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch((function(t){e.options.debug&&i.debug("Fetch.cancel.reader.cancel exception",t)}))):this.options.debug&&i.debug("Fetch.cancel before reader"))},e}();t.detectFetchSupport=function(){return"undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof Headers}},859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossBrowserHttpTransport=void 0;var r=n(229),o=n(210);t.CrossBrowserHttpTransport=function(e){if(r.detectFetchSupport()){var t={credentials:e.withCredentials?"include":"same-origin"};return r.FetchReadableStreamTransport(t)}return o.XhrTransport({withCredentials:e.withCredentials})}},210:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.MozChunkedArrayBufferXHR=t.XHR=t.XhrTransport=void 0;var i=n(65),s=n(346),a=n(849);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new u(t,e);if(a.detectXHROverrideMimeTypeSupport())return new c(t,e);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var c=function(){function e(e,t){this.options=e,this.init=t}return e.prototype.onProgressEvent=function(){this.options.debug&&s.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=p(e);this.options.onChunk(t)},e.prototype.onLoadEvent=function(){this.options.debug&&s.debug("XHR.onLoadEvent"),this.options.onEnd()},e.prototype.onStateChange=function(){this.options.debug&&s.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new i.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},e.prototype.sendMessage=function(e){this.xhr.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var n=new XMLHttpRequest;this.xhr=n,n.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach((function(e,t){n.setRequestHeader(e,t.join(", "))})),n.withCredentials=Boolean(this.init.withCredentials),n.addEventListener("readystatechange",this.onStateChange.bind(this)),n.addEventListener("progress",this.onProgressEvent.bind(this)),n.addEventListener("loadend",this.onLoadEvent.bind(this)),n.addEventListener("error",(function(e){t.options.debug&&s.debug("XHR.error",e),t.options.onEnd(e.error)}))},e.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},e.prototype.cancel=function(){this.options.debug&&s.debug("XHR.abort"),this.xhr.abort()},e}();t.XHR=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.configureXhr=function(){this.options.debug&&s.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&s.debug("MozXHR.onProgressEvent: ",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e))},t}(c);function l(e,t){var n=e.charCodeAt(t);if(n>=55296&&n<=56319){var r=e.charCodeAt(t+1);r>=56320&&r<=57343&&(n=65536+(n-55296<<10)+(r-56320))}return n}function p(e){for(var t=new Uint8Array(e.length),n=0,r=0;r<e.length;r++){var o=String.prototype.codePointAt?e.codePointAt(r):l(e,r);t[n++]=255&o}return t}t.MozChunkedArrayBufferXHR=u,t.stringToArrayBuffer=p},849:function(e,t){"use strict";var n;function r(e){var t=function(){if(void 0!==n)return n;if(XMLHttpRequest){n=new XMLHttpRequest;try{n.open("GET","https://localhost")}catch(e){}}return n}();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.detectXHROverrideMimeTypeSupport=t.detectMozXHRSupport=t.xhrSupportsResponseType=void 0,t.xhrSupportsResponseType=r,t.detectMozXHRSupport=function(){return"undefined"!=typeof XMLHttpRequest&&r("moz-chunked-arraybuffer")},t.detectXHROverrideMimeTypeSupport=function(){return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketTransport=void 0;var r,o=n(346),i=n(617);!function(e){e[e.FINISH_SEND=1]="FINISH_SEND"}(r||(r={}));var s=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&o.debug("websocketRequest",e);var t,n=function(e){if("https://"===e.substr(0,8))return"wss://"+e.substr(8);if("http://"===e.substr(0,7))return"ws://"+e.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(e.url),a=[];function c(e){if(e===r.FINISH_SEND)t.send(s);else{var n=e,o=new Int8Array(n.byteLength+1);o.set(new Uint8Array([0])),o.set(n,1),t.send(o)}}return{sendMessage:function(e){t&&t.readyState!==t.CONNECTING?c(e):a.push(e)},finishSend:function(){t&&t.readyState!==t.CONNECTING?c(r.FINISH_SEND):a.push(r.FINISH_SEND)},start:function(r){(t=new WebSocket(n,["grpc-websockets"])).binaryType="arraybuffer",t.onopen=function(){var n;e.debug&&o.debug("websocketRequest.onopen"),t.send((n="",r.forEach((function(e,t){n+=e+": "+t.join(", ")+"\r\n"})),i.encodeASCII(n))),a.forEach((function(e){c(e)}))},t.onclose=function(t){e.debug&&o.debug("websocketRequest.onclose",t),e.onEnd()},t.onerror=function(t){e.debug&&o.debug("websocketRequest.onerror",t)},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data))}},cancel:function(){e.debug&&o.debug("websocket.abort"),t.close()}}}(e)}}},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unary=void 0;var r=n(65),o=n(934);t.unary=function(e,t){if(e.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(e.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var n=null,i=null,s=o.client(e,{host:t.host,transport:t.transport,debug:t.debug});return s.onHeaders((function(e){n=e})),s.onMessage((function(e){i=e})),s.onEnd((function(e,o,s){t.onEnd({status:e,statusMessage:o,headers:n||new r.Metadata,message:i,trailers:s})})),s.start(t.metadata),s.send(t.request),s.finishSend(),{close:function(){s.close()}}}},882:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frameRequest=void 0,t.frameRequest=function(e){var t=e.serializeBinary(),n=new ArrayBuffer(t.byteLength+5);return new DataView(n,1,4).setUint32(0,t.length,!1),new Uint8Array(n,5).set(t),new Uint8Array(n)}}},n={},function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,e),o.exports}(607))},526:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),o=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var o=e.getVersionPrecision(t),i=e.getVersionPrecision(n),s=Math.max(o,i),a=0,c=e.map([t,n],(function(t){var n=s-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(a=s-Math.min(o,i)),s-=1;s>=a;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===a)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var o=e[n];if(t(o,n))return o}},e.assign=function(e){for(var t,n,r=e,o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var a=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=i.length;t<n;t+=1)a();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=o,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(91))&&r.__esModule?r:{default:r},i=n(18);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new o.default(e,t)},e.parse=function(e){return new o.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],null&&s(t.prototype,null),n&&s(t,n),e}();t.default=a,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(92)),o=c(n(93)),i=c(n(94)),s=c(n(95)),a=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,o={},i=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(o[t]=s,i+=1):"object"==typeof s&&(n[t]=s,r+=1)})),r>0){var s=Object.keys(n),c=a.default.find(s,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=a.default.find(s,(function(e){return t.isPlatform(e)}));if(l){var p=this.satisfies(n[l]);if(void 0!==p)return p}}if(i>0){var d=Object.keys(o),f=a.default.find(d,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(o[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),o=a.default.getBrowserTypeByAlias(r);return t&&o&&(r=o.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(a.default.compareVersions(o,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(t,e),version:o.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=o.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},n=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=o.default.getMacOSVersionName(t),r={name:i.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=o.default.getAndroidVersionName(t),r={name:i.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:i.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||o.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=o.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=o.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},n=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},n=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},n=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},n=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}})},157:function(e,t,n){var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o="undefined"!=typeof window&&window===this?this:void 0!==n.g&&null!=n.g?n.g:this;function i(){i=function(){},o.Symbol||(o.Symbol=c)}function s(e,t){this.a=e,r(this,"description",{configurable:!0,writable:!0,value:t})}s.prototype.toString=function(){return this.a};var a,c=(a=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new s("jscomp_symbol_"+(t||"")+"_"+a++,t)});function u(){i();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return function(e){return u(),(e={next:e})[o.Symbol.iterator]=function(){return this},e}(function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}(this))}}),u=function(){}}!function(e,t){if(t){var n=o;e=e.split(".");for(var i=0;i<e.length-1;i++){var s=e[i];s in n||(n[s]={}),n=n[s]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.entries",(function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}}));var l=this||self;function p(e,t,n){e=e.split("."),n=n||l,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t}function d(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var h="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),g=Array.prototype.forEach?function(e,t){Array.prototype.forEach.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in r&&t.call(void 0,r[o],o,e)},m=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),o="string"==typeof e?e.split(""):e,i=0;i<n;i++)i in o&&(r[i]=t.call(void 0,o[i],i,e));return r};function y(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}function v(e,t,n,r){var o="Assertion failed";if(n){o+=": "+n;var i=r}else e&&(o+=": "+e,i=t);throw Error(o,i||[])}function _(e,t,n){for(var r=[],o=2;o<arguments.length;++o)r[o-2]=arguments[o];return e||v("",null,t,r),e}function b(e,t){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];throw Error("Failure"+(e?": "+e:""),n)}function E(e,t,n,r){for(var o=[],i=3;i<arguments.length;++i)o[i-3]=arguments[i];e instanceof t||v("Expected instanceof %s but got %s.",[S(t),S(e)],n,o)}function S(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e}function w(e,t){if(this.c=e,this.b=t,this.a={},this.arrClean=!0,0<this.c.length){for(e=0;e<this.c.length;e++){var n=(t=this.c[e])[0];this.a[n.toString()]=new R(n,t[1])}this.arrClean=!0}}function T(e){this.a=0,this.b=e}function O(e,t){return e.b?(t.a||(t.a=new e.b(t.value)),t.a):t.value}function C(e){e=e.a;var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}function R(e,t){this.key=e,this.value=t,this.a=void 0}function M(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192)t+=String.fromCharCode.apply(null,y(e,n,n+8192));return t}p("jspb.Map",w,void 0),w.prototype.g=function(){if(this.arrClean){if(this.b){var e,t=this.a;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e].a;n&&n.g()}}}else{for(this.c.length=0,(t=C(this)).sort(),e=0;e<t.length;e++){var r=this.a[t[e]];(n=r.a)&&n.g(),this.c.push([r.key,r.value])}this.arrClean=!0}return this.c},w.prototype.toArray=w.prototype.g,w.prototype.Mc=function(e,t){for(var n=this.g(),r=[],o=0;o<n.length;o++){var i=this.a[n[o][0].toString()];O(this,i);var s=i.a;s?(_(t),r.push([i.key,t(e,s)])):r.push([i.key,i.value])}return r},w.prototype.toObject=w.prototype.Mc,w.fromObject=function(e,t,n){t=new w([],t);for(var r=0;r<e.length;r++){var o=e[r][0],i=n(e[r][1]);t.set(o,i)}return t},T.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(T.prototype[Symbol.iterator]=function(){return this}),w.prototype.Jb=function(){return C(this).length},w.prototype.getLength=w.prototype.Jb,w.prototype.clear=function(){this.a={},this.arrClean=!1},w.prototype.clear=w.prototype.clear,w.prototype.Cb=function(e){e=e.toString();var t=this.a.hasOwnProperty(e);return delete this.a[e],this.arrClean=!1,t},w.prototype.del=w.prototype.Cb,w.prototype.Eb=function(){var e=[],t=C(this);t.sort();for(var n=0;n<t.length;n++){var r=this.a[t[n]];e.push([r.key,r.value])}return e},w.prototype.getEntryList=w.prototype.Eb,w.prototype.entries=function(){var e=[],t=C(this);t.sort();for(var n=0;n<t.length;n++){var r=this.a[t[n]];e.push([r.key,O(this,r)])}return new T(e)},w.prototype.entries=w.prototype.entries,w.prototype.keys=function(){var e=[],t=C(this);t.sort();for(var n=0;n<t.length;n++)e.push(this.a[t[n]].key);return new T(e)},w.prototype.keys=w.prototype.keys,w.prototype.values=function(){var e=[],t=C(this);t.sort();for(var n=0;n<t.length;n++)e.push(O(this,this.a[t[n]]));return new T(e)},w.prototype.values=w.prototype.values,w.prototype.forEach=function(e,t){var n=C(this);n.sort();for(var r=0;r<n.length;r++){var o=this.a[n[r]];e.call(t,O(this,o),o.key,this)}},w.prototype.forEach=w.prototype.forEach,w.prototype.set=function(e,t){var n=new R(e);return this.b?(n.a=t,n.value=t.g()):n.value=t,this.a[e.toString()]=n,this.arrClean=!1,this},w.prototype.set=w.prototype.set,w.prototype.get=function(e){if(e=this.a[e.toString()])return O(this,e)},w.prototype.get=w.prototype.get,w.prototype.has=function(e){return e.toString()in this.a},w.prototype.has=w.prototype.has,w.prototype.Jc=function(e,t,n,r,o){var i=C(this);i.sort();for(var s=0;s<i.length;s++){var a=this.a[i[s]];t.Va(e),n.call(t,1,a.key),this.b?r.call(t,2,O(this,a),o):r.call(t,2,a.value),t.Ya()}},w.prototype.serializeBinary=w.prototype.Jc,w.deserializeBinary=function(e,t,n,r,o,i,s){for(;t.oa()&&!t.bb();){var a=t.c;1==a?i=n.call(t):2==a&&(e.b?(_(o),s||(s=new e.b),r.call(t,s,o)):s=r.call(t))}_(null!=i),_(null!=s),e.set(i,s)};var P={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},k={"'":"\\'"},I={},A=null;function D(e,t){void 0===t&&(t=0),x(),t=I[t];for(var n=[],r=0;r<e.length;r+=3){var o=e[r],i=r+1<e.length,s=i?e[r+1]:0,a=r+2<e.length,c=a?e[r+2]:0,u=o>>2;o=(3&o)<<4|s>>4,s=(15&s)<<2|c>>6,c&=63,a||(c=64,i||(s=64)),n.push(t[u],t[o],t[s]||"",t[c]||"")}return n.join("")}function L(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),o=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),o=A[n];if(null!=o)return o;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}x();for(var r=0;;){var o=n(-1),i=n(0),s=n(64),a=n(64);if(64===a&&-1===o)break;t(o<<2|i>>4),64!=s&&(t(i<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,(function(e){r[o++]=e})),r.subarray(0,o)}function x(){if(!A){A={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));I[n]=r;for(var o=0;o<r.length;o++){var i=r[o];void 0===A[i]&&(A[i]=o)}}}}p("jspb.ConstBinaryMessage",(function(){}),void 0),p("jspb.BinaryMessage",(function(){}),void 0),p("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0),p("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0),p("jspb.BinaryConstants.FieldTypeToWireType",(function(e){switch(e){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}}),void 0),p("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0),p("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0),p("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0),p("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0),p("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0),p("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0),p("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0),p("jspb.BinaryConstants.TWO_TO_20",1048576,void 0),p("jspb.BinaryConstants.TWO_TO_23",8388608,void 0),p("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0),p("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0),p("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0),p("jspb.BinaryConstants.TWO_TO_63",0x8000000000000000,void 0),p("jspb.BinaryConstants.TWO_TO_64",0x10000000000000000,void 0),p("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var N=0,F=0;function U(e){var t=e>>>0;e=Math.floor((e-t)/4294967296)>>>0,N=t,F=e}function j(e){var t=0>e,n=(e=Math.abs(e))>>>0;e=Math.floor((e-n)/4294967296),e>>>=0,t&&(e=~e>>>0,4294967295<(n=1+(~n>>>0))&&(n=0,4294967295<++e&&(e=0))),N=n,F=e}function B(e){var t=0>e;U(e=2*Math.abs(e)),e=N;var n=F;t&&(0==e?0==n?n=e=4294967295:(n--,e=4294967295):e--),N=e,F=n}function W(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?N=F=0:(F=0,N=2147483648);else if(isNaN(e))F=0,N=2147483647;else if(34028234663852886e22<e)F=0,N=(t<<31|2139095040)>>>0;else if(11754943508222875e-54>e)e=Math.round(e/Math.pow(2,-149)),F=0,N=(t<<31|e)>>>0;else{var n=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-n),16777216<=(e=Math.round(8388608*e))&&++n,F=0,N=(t<<31|n+127<<23|8388607&e)>>>0}}function z(e){var t=0>e?1:0;if(0===(e=t?-e:e))F=0<1/e?0:2147483648,N=0;else if(isNaN(e))F=2147483647,N=4294967295;else if(17976931348623157e292<e)F=(t<<31|2146435072)>>>0,N=0;else if(22250738585072014e-324>e)e/=Math.pow(2,-1074),F=(t<<31|e/4294967296)>>>0,N=e>>>0;else{var n=e,r=0;if(2<=n)for(;2<=n&&1023>r;)r++,n/=2;else for(;1>n&&-1022<r;)n*=2,r--;e*=Math.pow(2,-r),F=(t<<31|r+1023<<20|1048576*e&1048575)>>>0,N=4503599627370496*e>>>0}}function G(e){var t=e.charCodeAt(4),n=e.charCodeAt(5),r=e.charCodeAt(6),o=e.charCodeAt(7);N=e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)>>>0,F=t+(n<<8)+(r<<16)+(o<<24)>>>0}function q(e,t){return 4294967296*t+(e>>>0)}function H(e,t){var n=2147483648&t;return n&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=q(e,t),n?-e:e}function V(e,t,n){var r=t>>31;return n(e<<1^r,(t<<1|e>>>31)^r)}function $(e,t){return Z(e,t,H)}function Z(e,t,n){var r=-(1&e);return n((e>>>1|t<<31)^r,t>>>1^r)}function X(e){var t=2*(e>>31)+1,n=e>>>23&255;return e&=8388607,255==n?e?NaN:1/0*t:0==n?t*Math.pow(2,-149)*e:t*Math.pow(2,n-150)*(e+Math.pow(2,23))}function J(e,t){var n=2*(t>>31)+1,r=t>>>20&2047;return e=4294967296*(1048575&t)+e,2047==r?e?NaN:1/0*n:0==r?n*Math.pow(2,-1074)*e:n*Math.pow(2,r-1075)*(e+4503599627370496)}function K(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)}function Y(e,t){function n(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+q(e,t);var r=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*r+6710656*(t=t>>16&65535),r+=8147497*t,t*=2,1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7),1e7<=r&&(t+=Math.floor(r/1e7),r%=1e7),n(t,0)+n(r,t)+n(e,1)}function Q(e,t){var n=2147483648&t;return n&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=Y(e,t),n?"-"+e:e}function ee(e,t){G(e),e=N;var n=F;return t?Q(e,n):Y(e,n)}function te(e){function t(e,t){for(var n=0;8>n&&(1!==e||0<t);n++)t=e*r[n]+t,r[n]=255&t,t>>>=8}_(0<e.length);var n=!1;"-"===e[0]&&(n=!0,e=e.slice(1));for(var r=[0,0,0,0,0,0,0,0],o=0;o<e.length;o++)t(10,e.charCodeAt(o)-48);return n&&(function(){for(var e=0;8>e;e++)r[e]=255&~r[e]}(),t(1,1)),M(r)}function ne(e){return String.fromCharCode(10>e?48+e:87+e)}function re(e){return 97<=e?e-97+10:e-48}function oe(e,t,n,r,o){var i=0;if(128>r)for(;t<n&&e[t++]==r;)i++,t+=o;else for(;t<n;){for(var s=r;128<s;){if(e[t++]!=(127&s|128))return i;s>>=7}if(e[t++]!=s)break;i++,t+=o}return i}function ie(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?L(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(b("Type not convertible to Uint8Array."),new Uint8Array(0))}function se(e,t,n){this.b=null,this.a=this.c=this.h=0,this.v=!1,e&&this.H(e,t,n)}p("jspb.utils.getSplit64Low",(function(){return N}),void 0),p("jspb.utils.getSplit64High",(function(){return F}),void 0),p("jspb.utils.splitUint64",U,void 0),p("jspb.utils.splitInt64",j,void 0),p("jspb.utils.splitZigzag64",B,void 0),p("jspb.utils.splitFloat32",W,void 0),p("jspb.utils.splitFloat64",z,void 0),p("jspb.utils.splitHash64",G,void 0),p("jspb.utils.joinUint64",q,void 0),p("jspb.utils.joinInt64",H,void 0),p("jspb.utils.toZigzag64",V,void 0),p("jspb.utils.joinZigzag64",$,void 0),p("jspb.utils.fromZigzag64",Z,void 0),p("jspb.utils.joinFloat32",X,void 0),p("jspb.utils.joinFloat64",J,void 0),p("jspb.utils.joinHash64",K,void 0),p("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0),p("jspb.utils.joinUnsignedDecimalString",Y,void 0),p("jspb.utils.joinSignedDecimalString",Q,void 0),p("jspb.utils.hash64ToDecimalString",ee,void 0),p("jspb.utils.hash64ArrayToDecimalStrings",(function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=ee(e[r],t);return n}),void 0),p("jspb.utils.decimalStringToHash64",te,void 0),p("jspb.utils.splitDecimalString",(function(e){G(te(e))}),void 0),p("jspb.utils.hash64ToHexString",(function(e){var t=Array(18);t[0]="0",t[1]="x";for(var n=0;8>n;n++){var r=e.charCodeAt(7-n);t[2*n+2]=ne(r>>4),t[2*n+3]=ne(15&r)}return t.join("")}),void 0),p("jspb.utils.hexStringToHash64",(function(e){_(18==(e=e.toLowerCase()).length),_("0"==e[0]),_("x"==e[1]);for(var t="",n=0;8>n;n++)t=String.fromCharCode(16*re(e.charCodeAt(2*n+2))+re(e.charCodeAt(2*n+3)))+t;return t}),void 0),p("jspb.utils.hash64ToNumber",(function(e,t){G(e),e=N;var n=F;return t?H(e,n):q(e,n)}),void 0),p("jspb.utils.numberToHash64",(function(e){return j(e),K(N,F)}),void 0),p("jspb.utils.countVarints",(function(e,t,n){for(var r=0,o=t;o<n;o++)r+=e[o]>>7;return n-t-r}),void 0),p("jspb.utils.countVarintFields",(function(e,t,n,r){var o=0;if(128>(r*=8))for(;t<n&&e[t++]==r;)for(o++;;){var i=e[t++];if(!(128&i))break}else for(;t<n;){for(i=r;128<i;){if(e[t]!=(127&i|128))return o;t++,i>>=7}if(e[t++]!=i)break;for(o++;128&(i=e[t++]););}return o}),void 0),p("jspb.utils.countFixed32Fields",(function(e,t,n,r){return oe(e,t,n,8*r+5,4)}),void 0),p("jspb.utils.countFixed64Fields",(function(e,t,n,r){return oe(e,t,n,8*r+1,8)}),void 0),p("jspb.utils.countDelimitedFields",(function(e,t,n,r){var o=0;for(r=8*r+2;t<n;){for(var i=r;128<i;){if(e[t++]!=(127&i|128))return o;i>>=7}if(e[t++]!=i)break;o++;for(var s=0,a=1;s+=(127&(i=e[t++]))*a,a*=128,128&i;);t+=s}return o}),void 0),p("jspb.utils.debugBytesToTextFormat",(function(e){var t='"';if(e){e=ie(e);for(var n=0;n<e.length;n++)t+="\\x",16>e[n]&&(t+="0"),t+=e[n].toString(16)}return t+'"'}),void 0),p("jspb.utils.debugScalarToTextFormat",(function(e){if("string"==typeof e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var r,o=e.charAt(n),i=o.charCodeAt(0),s=n+1;(r=P[o])||(31<i&&127>i||((i=o)in k?o=k[i]:i in P?o=k[i]=P[i]:(31<(r=i.charCodeAt(0))&&127>r?o=i:(256>r?(o="\\x",(16>r||256<r)&&(o+="0")):(o="\\u",4096>r&&(o+="0")),o+=r.toString(16).toUpperCase()),o=k[i]=o)),r=o),t[s]=r}t.push('"'),e=t.join("")}else e=e.toString();return e}),void 0),p("jspb.utils.stringToByteArray",(function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");t[n]=r}return t}),void 0),p("jspb.utils.byteSourceToUint8Array",ie,void 0),p("jspb.BinaryDecoder",se,void 0);var ae=[];function ce(e,t,n){if(ae.length){var r=ae.pop();return e&&r.H(e,t,n),r}return new se(e,t,n)}function ue(e,t,n){this.a=ce(e,t,n),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}se.getInstanceCacheLength=function(){return ae.length},se.alloc=ce,se.prototype.Ca=function(){this.clear(),100>ae.length&&ae.push(this)},se.prototype.free=se.prototype.Ca,se.prototype.clone=function(){return ce(this.b,this.h,this.c-this.h)},se.prototype.clone=se.prototype.clone,se.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1},se.prototype.clear=se.prototype.clear,se.prototype.Y=function(){return this.b},se.prototype.getBuffer=se.prototype.Y,se.prototype.H=function(e,t,n){this.b=ie(e),this.h=void 0!==t?t:0,this.c=void 0!==n?this.h+n:this.b.length,this.a=this.h},se.prototype.setBlock=se.prototype.H,se.prototype.Db=function(){return this.c},se.prototype.getEnd=se.prototype.Db,se.prototype.setEnd=function(e){this.c=e},se.prototype.setEnd=se.prototype.setEnd,se.prototype.reset=function(){this.a=this.h},se.prototype.reset=se.prototype.reset,se.prototype.B=function(){return this.a},se.prototype.getCursor=se.prototype.B,se.prototype.Ma=function(e){this.a=e},se.prototype.setCursor=se.prototype.Ma,se.prototype.advance=function(e){this.a+=e,_(this.a<=this.c)},se.prototype.advance=se.prototype.advance,se.prototype.ya=function(){return this.a==this.c},se.prototype.atEnd=se.prototype.ya,se.prototype.Qb=function(){return this.a>this.c},se.prototype.pastEnd=se.prototype.Qb,se.prototype.getError=function(){return this.v||0>this.a||this.a>this.c},se.prototype.getError=se.prototype.getError,se.prototype.w=function(e){for(var t=128,n=0,r=0,o=0;4>o&&128<=t;o++)n|=(127&(t=this.b[this.a++]))<<7*o;if(128<=t&&(n|=(127&(t=this.b[this.a++]))<<28,r|=(127&t)>>4),128<=t)for(o=0;5>o&&128<=t;o++)r|=(127&(t=this.b[this.a++]))<<7*o+3;if(128>t)return e(n>>>0,r>>>0);b("Failed to read varint, encoding is invalid."),this.v=!0},se.prototype.readSplitVarint64=se.prototype.w,se.prototype.ea=function(e){return this.w((function(t,n){return Z(t,n,e)}))},se.prototype.readSplitZigzagVarint64=se.prototype.ea,se.prototype.ta=function(e){var t=this.b,n=this.a;this.a+=8;for(var r=0,o=0,i=n+7;i>=n;i--)r=r<<8|t[i],o=o<<8|t[i+4];return e(r,o)},se.prototype.readSplitFixed64=se.prototype.ta,se.prototype.kb=function(){for(;128&this.b[this.a];)this.a++;this.a++},se.prototype.skipVarint=se.prototype.kb,se.prototype.mb=function(e){for(;128<e;)this.a--,e>>>=7;this.a--},se.prototype.unskipVarint=se.prototype.mb,se.prototype.o=function(){var e=this.b,t=e[this.a],n=127&t;return 128>t?(this.a+=1,_(this.a<=this.c),n):(n|=(127&(t=e[this.a+1]))<<7,128>t?(this.a+=2,_(this.a<=this.c),n):(n|=(127&(t=e[this.a+2]))<<14,128>t?(this.a+=3,_(this.a<=this.c),n):(n|=(127&(t=e[this.a+3]))<<21,128>t?(this.a+=4,_(this.a<=this.c),n):(n|=(15&(t=e[this.a+4]))<<28,128>t?(this.a+=5,_(this.a<=this.c),n>>>0):(this.a+=5,128<=e[this.a++]&&128<=e[this.a++]&&128<=e[this.a++]&&128<=e[this.a++]&&128<=e[this.a++]&&_(!1),_(this.a<=this.c),n)))))},se.prototype.readUnsignedVarint32=se.prototype.o,se.prototype.da=function(){return~~this.o()},se.prototype.readSignedVarint32=se.prototype.da,se.prototype.O=function(){return this.o().toString()},se.prototype.Ea=function(){return this.da().toString()},se.prototype.readSignedVarint32String=se.prototype.Ea,se.prototype.Ia=function(){var e=this.o();return e>>>1^-(1&e)},se.prototype.readZigzagVarint32=se.prototype.Ia,se.prototype.Ga=function(){return this.w(q)},se.prototype.readUnsignedVarint64=se.prototype.Ga,se.prototype.Ha=function(){return this.w(Y)},se.prototype.readUnsignedVarint64String=se.prototype.Ha,se.prototype.sa=function(){return this.w(H)},se.prototype.readSignedVarint64=se.prototype.sa,se.prototype.Fa=function(){return this.w(Q)},se.prototype.readSignedVarint64String=se.prototype.Fa,se.prototype.Ja=function(){return this.w($)},se.prototype.readZigzagVarint64=se.prototype.Ja,se.prototype.fb=function(){return this.ea(K)},se.prototype.readZigzagVarintHash64=se.prototype.fb,se.prototype.Ka=function(){return this.ea(Q)},se.prototype.readZigzagVarint64String=se.prototype.Ka,se.prototype.Gc=function(){var e=this.b[this.a];return this.a+=1,_(this.a<=this.c),e},se.prototype.readUint8=se.prototype.Gc,se.prototype.Ec=function(){var e=this.b[this.a],t=this.b[this.a+1];return this.a+=2,_(this.a<=this.c),e|t<<8},se.prototype.readUint16=se.prototype.Ec,se.prototype.m=function(){var e=this.b[this.a],t=this.b[this.a+1],n=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,_(this.a<=this.c),(e|t<<8|n<<16|r<<24)>>>0},se.prototype.readUint32=se.prototype.m,se.prototype.ga=function(){return q(this.m(),this.m())},se.prototype.readUint64=se.prototype.ga,se.prototype.ha=function(){return Y(this.m(),this.m())},se.prototype.readUint64String=se.prototype.ha,se.prototype.Xb=function(){var e=this.b[this.a];return this.a+=1,_(this.a<=this.c),e<<24>>24},se.prototype.readInt8=se.prototype.Xb,se.prototype.Vb=function(){var e=this.b[this.a],t=this.b[this.a+1];return this.a+=2,_(this.a<=this.c),(e|t<<8)<<16>>16},se.prototype.readInt16=se.prototype.Vb,se.prototype.P=function(){var e=this.b[this.a],t=this.b[this.a+1],n=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,_(this.a<=this.c),e|t<<8|n<<16|r<<24},se.prototype.readInt32=se.prototype.P,se.prototype.ba=function(){return H(this.m(),this.m())},se.prototype.readInt64=se.prototype.ba,se.prototype.ca=function(){return Q(this.m(),this.m())},se.prototype.readInt64String=se.prototype.ca,se.prototype.aa=function(){return X(this.m())},se.prototype.readFloat=se.prototype.aa,se.prototype.Z=function(){return J(this.m(),this.m())},se.prototype.readDouble=se.prototype.Z,se.prototype.pa=function(){return!!this.b[this.a++]},se.prototype.readBool=se.prototype.pa,se.prototype.ra=function(){return this.da()},se.prototype.readEnum=se.prototype.ra,se.prototype.fa=function(e){var t=this.b,n=this.a;e=n+e;for(var r=[],o="";n<e;){var i=t[n++];if(128>i)r.push(i);else{if(192>i)continue;if(224>i){var s=t[n++];r.push((31&i)<<6|63&s)}else if(240>i){s=t[n++];var a=t[n++];r.push((15&i)<<12|(63&s)<<6|63&a)}else 248>i&&(i=(7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++],i-=65536,r.push(55296+(i>>10&1023),56320+(1023&i)))}8192<=r.length&&(o+=String.fromCharCode.apply(null,r),r.length=0)}return o+=M(r),this.a=n,o},se.prototype.readString=se.prototype.fa,se.prototype.Dc=function(){var e=this.o();return this.fa(e)},se.prototype.readStringWithLength=se.prototype.Dc,se.prototype.qa=function(e){if(0>e||this.a+e>this.b.length)return this.v=!0,b("Invalid byte length!"),new Uint8Array(0);var t=this.b.subarray(this.a,this.a+e);return this.a+=e,_(this.a<=this.c),t},se.prototype.readBytes=se.prototype.qa,se.prototype.ia=function(){return this.w(K)},se.prototype.readVarintHash64=se.prototype.ia,se.prototype.$=function(){var e=this.b,t=this.a,n=e[t],r=e[t+1],o=e[t+2],i=e[t+3],s=e[t+4],a=e[t+5],c=e[t+6];return e=e[t+7],this.a+=8,String.fromCharCode(n,r,o,i,s,a,c,e)},se.prototype.readFixedHash64=se.prototype.$,p("jspb.BinaryReader",ue,void 0);var le=[];function pe(e,t,n){if(le.length){var r=le.pop();return e&&r.a.H(e,t,n),r}return new ue(e,t,n)}function de(e,t){_(2==e.b);var n=e.a.o();n=e.a.B()+n;for(var r=[];e.a.B()<n;)r.push(t.call(e.a));return r}function fe(e,t,n,r,o){this.ma=e,this.Ba=t,this.la=n,this.Na=r,this.na=o}function he(e,t,n,r,o,i){this.Za=e,this.za=t,this.Aa=n,this.Wa=r,this.Ab=o,this.Nb=i}function ge(){}ue.clearInstanceCache=function(){le=[]},ue.getInstanceCacheLength=function(){return le.length},ue.alloc=pe,ue.prototype.zb=pe,ue.prototype.alloc=ue.prototype.zb,ue.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>le.length&&le.push(this)},ue.prototype.free=ue.prototype.Ca,ue.prototype.Fb=function(){return this.O},ue.prototype.getFieldCursor=ue.prototype.Fb,ue.prototype.B=function(){return this.a.B()},ue.prototype.getCursor=ue.prototype.B,ue.prototype.Y=function(){return this.a.Y()},ue.prototype.getBuffer=ue.prototype.Y,ue.prototype.Hb=function(){return this.c},ue.prototype.getFieldNumber=ue.prototype.Hb,ue.prototype.Lb=function(){return this.b},ue.prototype.getWireType=ue.prototype.Lb,ue.prototype.Mb=function(){return 2==this.b},ue.prototype.isDelimited=ue.prototype.Mb,ue.prototype.bb=function(){return 4==this.b},ue.prototype.isEndGroup=ue.prototype.bb,ue.prototype.getError=function(){return this.h||this.a.getError()},ue.prototype.getError=ue.prototype.getError,ue.prototype.H=function(e,t,n){this.a.H(e,t,n),this.b=this.c=-1},ue.prototype.setBlock=ue.prototype.H,ue.prototype.reset=function(){this.a.reset(),this.b=this.c=-1},ue.prototype.reset=ue.prototype.reset,ue.prototype.advance=function(e){this.a.advance(e)},ue.prototype.advance=ue.prototype.advance,ue.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return b("Decoder hit an error"),!1;this.O=this.a.B();var e=this.a.o(),t=e>>>3;return 0!=(e&=7)&&5!=e&&1!=e&&2!=e&&3!=e&&4!=e?(b("Invalid wire type: %s (at position %s)",e,this.O),this.h=!0,!1):(this.c=t,this.b=e,!0)},ue.prototype.nextField=ue.prototype.oa,ue.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)},ue.prototype.unskipHeader=ue.prototype.Oa,ue.prototype.Lc=function(){var e=this.c;for(this.Oa();this.oa()&&this.c==e;)this.C();this.a.ya()||this.Oa()},ue.prototype.skipMatchingFields=ue.prototype.Lc,ue.prototype.lb=function(){0!=this.b?(b("Invalid wire type for skipVarintField"),this.C()):this.a.kb()},ue.prototype.skipVarintField=ue.prototype.lb,ue.prototype.gb=function(){if(2!=this.b)b("Invalid wire type for skipDelimitedField"),this.C();else{var e=this.a.o();this.a.advance(e)}},ue.prototype.skipDelimitedField=ue.prototype.gb,ue.prototype.hb=function(){5!=this.b?(b("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)},ue.prototype.skipFixed32Field=ue.prototype.hb,ue.prototype.ib=function(){1!=this.b?(b("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)},ue.prototype.skipFixed64Field=ue.prototype.ib,ue.prototype.jb=function(){for(var e=this.c;;){if(!this.oa()){b("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(4==this.b){this.c!=e&&(b("Unmatched end-group tag"),this.h=!0);break}this.C()}},ue.prototype.skipGroup=ue.prototype.jb,ue.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:b("Invalid wire encoding for field.")}},ue.prototype.skipField=ue.prototype.C,ue.prototype.Hc=function(e,t){null===this.v&&(this.v={}),_(!this.v[e]),this.v[e]=t},ue.prototype.registerReadCallback=ue.prototype.Hc,ue.prototype.Ic=function(e){return _(null!==this.v),_(e=this.v[e]),e(this)},ue.prototype.runReadCallback=ue.prototype.Ic,ue.prototype.Yb=function(e,t){_(2==this.b);var n=this.a.c,r=this.a.o();r=this.a.B()+r,this.a.setEnd(r),t(e,this),this.a.Ma(r),this.a.setEnd(n)},ue.prototype.readMessage=ue.prototype.Yb,ue.prototype.Ub=function(e,t,n){_(3==this.b),_(this.c==e),n(t,this),this.h||4==this.b||(b("Group submessage did not end with an END_GROUP tag"),this.h=!0)},ue.prototype.readGroup=ue.prototype.Ub,ue.prototype.Gb=function(){_(2==this.b);var e=this.a.o(),t=this.a.B(),n=t+e;return e=ce(this.a.Y(),t,e),this.a.Ma(n),e},ue.prototype.getFieldDecoder=ue.prototype.Gb,ue.prototype.P=function(){return _(0==this.b),this.a.da()},ue.prototype.readInt32=ue.prototype.P,ue.prototype.Wb=function(){return _(0==this.b),this.a.Ea()},ue.prototype.readInt32String=ue.prototype.Wb,ue.prototype.ba=function(){return _(0==this.b),this.a.sa()},ue.prototype.readInt64=ue.prototype.ba,ue.prototype.ca=function(){return _(0==this.b),this.a.Fa()},ue.prototype.readInt64String=ue.prototype.ca,ue.prototype.m=function(){return _(0==this.b),this.a.o()},ue.prototype.readUint32=ue.prototype.m,ue.prototype.Fc=function(){return _(0==this.b),this.a.O()},ue.prototype.readUint32String=ue.prototype.Fc,ue.prototype.ga=function(){return _(0==this.b),this.a.Ga()},ue.prototype.readUint64=ue.prototype.ga,ue.prototype.ha=function(){return _(0==this.b),this.a.Ha()},ue.prototype.readUint64String=ue.prototype.ha,ue.prototype.zc=function(){return _(0==this.b),this.a.Ia()},ue.prototype.readSint32=ue.prototype.zc,ue.prototype.Ac=function(){return _(0==this.b),this.a.Ja()},ue.prototype.readSint64=ue.prototype.Ac,ue.prototype.Bc=function(){return _(0==this.b),this.a.Ka()},ue.prototype.readSint64String=ue.prototype.Bc,ue.prototype.Rb=function(){return _(5==this.b),this.a.m()},ue.prototype.readFixed32=ue.prototype.Rb,ue.prototype.Sb=function(){return _(1==this.b),this.a.ga()},ue.prototype.readFixed64=ue.prototype.Sb,ue.prototype.Tb=function(){return _(1==this.b),this.a.ha()},ue.prototype.readFixed64String=ue.prototype.Tb,ue.prototype.vc=function(){return _(5==this.b),this.a.P()},ue.prototype.readSfixed32=ue.prototype.vc,ue.prototype.wc=function(){return _(5==this.b),this.a.P().toString()},ue.prototype.readSfixed32String=ue.prototype.wc,ue.prototype.xc=function(){return _(1==this.b),this.a.ba()},ue.prototype.readSfixed64=ue.prototype.xc,ue.prototype.yc=function(){return _(1==this.b),this.a.ca()},ue.prototype.readSfixed64String=ue.prototype.yc,ue.prototype.aa=function(){return _(5==this.b),this.a.aa()},ue.prototype.readFloat=ue.prototype.aa,ue.prototype.Z=function(){return _(1==this.b),this.a.Z()},ue.prototype.readDouble=ue.prototype.Z,ue.prototype.pa=function(){return _(0==this.b),!!this.a.o()},ue.prototype.readBool=ue.prototype.pa,ue.prototype.ra=function(){return _(0==this.b),this.a.sa()},ue.prototype.readEnum=ue.prototype.ra,ue.prototype.fa=function(){_(2==this.b);var e=this.a.o();return this.a.fa(e)},ue.prototype.readString=ue.prototype.fa,ue.prototype.qa=function(){_(2==this.b);var e=this.a.o();return this.a.qa(e)},ue.prototype.readBytes=ue.prototype.qa,ue.prototype.ia=function(){return _(0==this.b),this.a.ia()},ue.prototype.readVarintHash64=ue.prototype.ia,ue.prototype.Cc=function(){return _(0==this.b),this.a.fb()},ue.prototype.readSintHash64=ue.prototype.Cc,ue.prototype.w=function(e){return _(0==this.b),this.a.w(e)},ue.prototype.readSplitVarint64=ue.prototype.w,ue.prototype.ea=function(e){return _(0==this.b),this.a.w((function(t,n){return Z(t,n,e)}))},ue.prototype.readSplitZigzagVarint64=ue.prototype.ea,ue.prototype.$=function(){return _(1==this.b),this.a.$()},ue.prototype.readFixedHash64=ue.prototype.$,ue.prototype.ta=function(e){return _(1==this.b),this.a.ta(e)},ue.prototype.readSplitFixed64=ue.prototype.ta,ue.prototype.gc=function(){return de(this,this.a.da)},ue.prototype.readPackedInt32=ue.prototype.gc,ue.prototype.hc=function(){return de(this,this.a.Ea)},ue.prototype.readPackedInt32String=ue.prototype.hc,ue.prototype.ic=function(){return de(this,this.a.sa)},ue.prototype.readPackedInt64=ue.prototype.ic,ue.prototype.jc=function(){return de(this,this.a.Fa)},ue.prototype.readPackedInt64String=ue.prototype.jc,ue.prototype.qc=function(){return de(this,this.a.o)},ue.prototype.readPackedUint32=ue.prototype.qc,ue.prototype.rc=function(){return de(this,this.a.O)},ue.prototype.readPackedUint32String=ue.prototype.rc,ue.prototype.sc=function(){return de(this,this.a.Ga)},ue.prototype.readPackedUint64=ue.prototype.sc,ue.prototype.tc=function(){return de(this,this.a.Ha)},ue.prototype.readPackedUint64String=ue.prototype.tc,ue.prototype.nc=function(){return de(this,this.a.Ia)},ue.prototype.readPackedSint32=ue.prototype.nc,ue.prototype.oc=function(){return de(this,this.a.Ja)},ue.prototype.readPackedSint64=ue.prototype.oc,ue.prototype.pc=function(){return de(this,this.a.Ka)},ue.prototype.readPackedSint64String=ue.prototype.pc,ue.prototype.bc=function(){return de(this,this.a.m)},ue.prototype.readPackedFixed32=ue.prototype.bc,ue.prototype.cc=function(){return de(this,this.a.ga)},ue.prototype.readPackedFixed64=ue.prototype.cc,ue.prototype.dc=function(){return de(this,this.a.ha)},ue.prototype.readPackedFixed64String=ue.prototype.dc,ue.prototype.kc=function(){return de(this,this.a.P)},ue.prototype.readPackedSfixed32=ue.prototype.kc,ue.prototype.lc=function(){return de(this,this.a.ba)},ue.prototype.readPackedSfixed64=ue.prototype.lc,ue.prototype.mc=function(){return de(this,this.a.ca)},ue.prototype.readPackedSfixed64String=ue.prototype.mc,ue.prototype.fc=function(){return de(this,this.a.aa)},ue.prototype.readPackedFloat=ue.prototype.fc,ue.prototype.$b=function(){return de(this,this.a.Z)},ue.prototype.readPackedDouble=ue.prototype.$b,ue.prototype.Zb=function(){return de(this,this.a.pa)},ue.prototype.readPackedBool=ue.prototype.Zb,ue.prototype.ac=function(){return de(this,this.a.ra)},ue.prototype.readPackedEnum=ue.prototype.ac,ue.prototype.uc=function(){return de(this,this.a.ia)},ue.prototype.readPackedVarintHash64=ue.prototype.uc,ue.prototype.ec=function(){return de(this,this.a.$)},ue.prototype.readPackedFixedHash64=ue.prototype.ec,p("jspb.ExtensionFieldInfo",fe,void 0),p("jspb.ExtensionFieldBinaryInfo",he,void 0),fe.prototype.F=function(){return!!this.la},fe.prototype.isMessageType=fe.prototype.F,p("jspb.Message",ge,void 0),ge.GENERATE_TO_OBJECT=!0,ge.GENERATE_FROM_OBJECT=!0;var me="function"==typeof Uint8Array;ge.prototype.Ib=function(){return this.b},ge.prototype.getJsPbMessageId=ge.prototype.Ib,ge.initialize=function(e,t,n,r,o,i){if(e.f=null,t||(t=n?[n]:[]),e.b=n?String(n):void 0,e.D=0===n?-1:0,e.u=t,t=-1,!(n=e.u.length)||(t=n-1,null===(n=e.u[t])||"object"!=typeof n||Array.isArray(n)||me&&n instanceof Uint8Array)?-1<r?(e.G=Math.max(r,t+1-e.D),e.i=null):e.G=Number.MAX_VALUE:(e.G=t-e.D,e.i=n),e.a={},o)for(r=0;r<o.length;r++)(t=o[r])<e.G?(t+=e.D,e.u[t]=e.u[t]||ye):(ve(e),e.i[t]=e.i[t]||ye);if(i&&i.length)for(r=0;r<i.length;r++)ke(e,i[r])};var ye=Object.freeze?Object.freeze([]):[];function ve(e){var t=e.G+e.D;e.u[t]||(e.i=e.u[t]={})}function _e(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=t.call(e[o],n,e[o]);return r}function be(e,t){if(t<e.G){t+=e.D;var n=e.u[t];return n===ye?e.u[t]=[]:n}if(e.i)return(n=e.i[t])===ye?e.i[t]=[]:n}function Ee(e,t){return null==(e=be(e,t))?e:+e}function Se(e,t){return null==(e=be(e,t))?e:!!e}function we(e){return null==e||"string"==typeof e?e:me&&e instanceof Uint8Array?D(e):(b("Cannot coerce to b64 string: "+d(e)),null)}function Te(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?L(e):(b("Cannot coerce to Uint8Array: "+d(e)),null)}function Oe(e){if(e&&1<e.length){var t=d(e[0]);g(e,(function(e){d(e)!=t&&b("Inconsistent type in JSPB repeated field array. Got "+d(e)+" expected "+t)}))}}function Ce(e,t,n){return null==(e=be(e,t))?n:e}function Re(e,t,n){return E(e,ge),t<e.G?e.u[t+e.D]=n:(ve(e),e.i[t]=n),e}function Me(e,t,n,r){return E(e,ge),n!==r?Re(e,t,n):t<e.G?e.u[t+e.D]=null:(ve(e),delete e.i[t]),e}function Pe(e,t,n,r){return E(e,ge),(n=ke(e,n))&&n!==t&&void 0!==r&&(e.f&&n in e.f&&(e.f[n]=void 0),Re(e,n,void 0)),Re(e,t,r)}function ke(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o],s=be(e,i);null!=s&&(n=i,r=s,Re(e,i,void 0))}return n?(Re(e,n,r),n):0}function Ie(e,t,n){if(e.f||(e.f={}),!e.f[n]){for(var r=be(e,n),o=[],i=0;i<r.length;i++)o[i]=new t(r[i]);e.f[n]=o}}function Ae(e){if(e.f)for(var t in e.f){var n=e.f[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&n[r].g();else n&&n.g()}}function De(e,t){e=e||{},t=t||{};var n,r={};for(n in e)r[n]=0;for(n in t)r[n]=0;for(n in r)if(!Le(e[n],t[n]))return!1;return!0}function Le(e,t){if(e==t)return!0;if(!f(e)||!f(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(me&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}if(e.constructor===Array){var r=void 0,o=void 0,i=Math.max(e.length,t.length);for(n=0;n<i;n++){var s=e[n],a=t[n];if(s&&s.constructor==Object&&(_(void 0===r),_(n===e.length-1),r=s,s=void 0),a&&a.constructor==Object&&(_(void 0===o),_(n===t.length-1),o=a,a=void 0),!Le(s,a))return!1}return!r&&!o||De(r=r||{},o=o||{})}if(e.constructor===Object)return De(e,t);throw Error("Invalid type in JSPB array")}function xe(e){return new e.constructor(Ne(e.g()))}function Ne(e){if(Array.isArray(e)){for(var t=Array(e.length),n=0;n<e.length;n++){var r=e[n];null!=r&&(t[n]="object"==typeof r?Ne(_(r)):r)}return t}if(me&&e instanceof Uint8Array)return new Uint8Array(e);for(n in t={},e)null!=(r=e[n])&&(t[n]="object"==typeof r?Ne(_(r)):r);return t}ge.toObjectList=_e,ge.toObjectExtension=function(e,t,n,r,o){for(var i in n){var s=n[i],a=r.call(e,s);if(null!=a){for(var c in s.Ba)if(s.Ba.hasOwnProperty(c))break;t[c]=s.Na?s.na?_e(a,s.Na,o):s.Na(o,a):a}}},ge.serializeBinaryExtensions=function(e,t,n,r){for(var o in n){var i=n[o],s=i.Za;if(!i.Aa)throw Error("Message extension present that was generated without binary serialization support");var a=r.call(e,s);if(null!=a)if(s.F()){if(!i.Wa)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");i.Aa.call(t,s.ma,a,i.Wa)}else i.Aa.call(t,s.ma,a)}},ge.readBinaryExtension=function(e,t,n,r,o){var i=n[t.c];if(i){if(n=i.Za,!i.za)throw Error("Deserializing extension whose generated code does not support binary format");if(n.F()){var s=new n.la;i.za.call(t,s,i.Ab)}else s=i.za.call(t);n.na&&!i.Nb?(t=r.call(e,n))?t.push(s):o.call(e,n,[s]):o.call(e,n,s)}else t.C()},ge.getField=be,ge.getRepeatedField=function(e,t){return be(e,t)},ge.getOptionalFloatingPointField=Ee,ge.getBooleanField=Se,ge.getRepeatedFloatingPointField=function(e,t){var n=be(e,t);if(e.a||(e.a={}),!e.a[t]){for(var r=0;r<n.length;r++)n[r]=+n[r];e.a[t]=!0}return n},ge.getRepeatedBooleanField=function(e,t){var n=be(e,t);if(e.a||(e.a={}),!e.a[t]){for(var r=0;r<n.length;r++)n[r]=!!n[r];e.a[t]=!0}return n},ge.bytesAsB64=we,ge.bytesAsU8=Te,ge.bytesListAsB64=function(e){return Oe(e),e.length&&"string"!=typeof e[0]?m(e,we):e},ge.bytesListAsU8=function(e){return Oe(e),!e.length||e[0]instanceof Uint8Array?e:m(e,Te)},ge.getFieldWithDefault=Ce,ge.getBooleanFieldWithDefault=function(e,t,n){return null==(e=Se(e,t))?n:e},ge.getFloatingPointFieldWithDefault=function(e,t,n){return null==(e=Ee(e,t))?n:e},ge.getFieldProto3=Ce,ge.getMapField=function(e,t,n,r){if(e.f||(e.f={}),t in e.f)return e.f[t];var o=be(e,t);if(!o){if(n)return;Re(e,t,o=[])}return e.f[t]=new w(o,r)},ge.setField=Re,ge.setProto3IntField=function(e,t,n){return Me(e,t,n,0)},ge.setProto3FloatField=function(e,t,n){return Me(e,t,n,0)},ge.setProto3BooleanField=function(e,t,n){return Me(e,t,n,!1)},ge.setProto3StringField=function(e,t,n){return Me(e,t,n,"")},ge.setProto3BytesField=function(e,t,n){return Me(e,t,n,"")},ge.setProto3EnumField=function(e,t,n){return Me(e,t,n,0)},ge.setProto3StringIntField=function(e,t,n){return Me(e,t,n,"0")},ge.addToRepeatedField=function(e,t,n,r){return E(e,ge),t=be(e,t),null!=r?t.splice(r,0,n):t.push(n),e},ge.setOneofField=Pe,ge.computeOneofCase=ke,ge.getWrapperField=function(e,t,n,r){if(e.f||(e.f={}),!e.f[n]){var o=be(e,n);(r||o)&&(e.f[n]=new t(o))}return e.f[n]},ge.getRepeatedWrapperField=function(e,t,n){return Ie(e,t,n),(t=e.f[n])==ye&&(t=e.f[n]=[]),t},ge.setWrapperField=function(e,t,n){E(e,ge),e.f||(e.f={});var r=n?n.g():n;return e.f[t]=n,Re(e,t,r)},ge.setOneofWrapperField=function(e,t,n,r){E(e,ge),e.f||(e.f={});var o=r?r.g():r;return e.f[t]=r,Pe(e,t,n,o)},ge.setRepeatedWrapperField=function(e,t,n){E(e,ge),e.f||(e.f={}),n=n||[];for(var r=[],o=0;o<n.length;o++)r[o]=n[o].g();return e.f[t]=n,Re(e,t,r)},ge.addToRepeatedWrapperField=function(e,t,n,r,o){Ie(e,r,t);var i=e.f[t];return i||(i=e.f[t]=[]),n=n||new r,e=be(e,t),null!=o?(i.splice(o,0,n),e.splice(o,0,n.g())):(i.push(n),e.push(n.g())),n},ge.toMap=function(e,t,n,r){for(var o={},i=0;i<e.length;i++)o[t.call(e[i])]=n?n.call(e[i],r,e[i]):e[i];return o},ge.prototype.g=function(){return Ae(this),this.u},ge.prototype.toArray=ge.prototype.g,ge.prototype.toString=function(){return Ae(this),this.u.toString()},ge.prototype.getExtension=function(e){if(this.i){this.f||(this.f={});var t=e.ma;if(e.na){if(e.F())return this.f[t]||(this.f[t]=m(this.i[t]||[],(function(t){return new e.la(t)}))),this.f[t]}else if(e.F())return!this.f[t]&&this.i[t]&&(this.f[t]=new e.la(this.i[t])),this.f[t];return this.i[t]}},ge.prototype.getExtension=ge.prototype.getExtension,ge.prototype.Kc=function(e,t){this.f||(this.f={}),ve(this);var n=e.ma;return e.na?(t=t||[],e.F()?(this.f[n]=t,this.i[n]=m(t,(function(e){return e.g()}))):this.i[n]=t):e.F()?(this.f[n]=t,this.i[n]=t?t.g():t):this.i[n]=t,this},ge.prototype.setExtension=ge.prototype.Kc,ge.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var n=e.g();t=t.g();var r=[],o=0,i=n.length>t.length?n.length:t.length;for(e.b&&(r[0]=e.b,o=1);o<i;o++)Le(n[o],t[o])||(r[o]=t[o]);return new e.constructor(r)},ge.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&Le(e.g(),t.g())},ge.compareExtensions=De,ge.compareFields=Le,ge.prototype.Bb=function(){return xe(this)},ge.prototype.cloneMessage=ge.prototype.Bb,ge.prototype.clone=function(){return xe(this)},ge.prototype.clone=ge.prototype.clone,ge.clone=function(e){return xe(e)},ge.copyInto=function(e,t){E(e,ge),E(t,ge),_(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=xe(e);for(var n=t.g(),r=e.g(),o=n.length=0;o<r.length;o++)n[o]=r[o];t.f=e.f,t.i=e.i},ge.registerMessageType=function(e,t){t.we=e};var Fe={dump:function(e){return E(e,ge,"jspb.Message instance expected"),_(e.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),Fe.X(e)}};function Ue(){this.a=[]}function je(e,t){this.lo=e,this.hi=t}function Be(e,t){var n=65535&e,r=65535&t,o=t>>>16;for(t=n*r+65536*(n*o&65535)+65536*((e>>>=16)*r&65535),n=e*o+(n*o>>>16)+(e*r>>>16);4294967296<=t;)t-=4294967296,n+=1;return new je(t>>>0,n>>>0)}function We(e){for(var t=new je(0,0),n=new je(0,0),r=0;r<e.length;r++){if("0">e[r]||"9"<e[r])return null;n.lo=parseInt(e[r],10),t=t.eb(10).add(n)}return t}function ze(e,t){this.lo=e,this.hi=t}function Ge(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=We(e))?null:(t&&(e=new je(0,0).sub(e)),new ze(e.lo,e.hi))}function qe(){this.c=[],this.b=0,this.a=new Ue,this.h=[]}function He(e,t){var n=e.a.end();e.c.push(n),e.c.push(t),e.b+=n.length+t.length}function Ve(e,t){return Ze(e,t,2),t=e.a.end(),e.c.push(t),e.b+=t.length,t.push(e.b),t}function $e(e,t){var n=t.pop();for(_(0<=(n=e.b+e.a.length()-n));127<n;)t.push(127&n|128),n>>>=7,e.b++;t.push(n),e.b++}function Ze(e,t,n){_(1<=t&&t==Math.floor(t)),e.a.j(8*t+n)}function Xe(e,t,n){null!=n&&(Ze(e,t,0),e.a.j(n))}function Je(e,t,n){null!=n&&(Ze(e,t,0),e.a.M(n))}p("jspb.debug.dump",Fe.dump,void 0),Fe.X=function(e){var t=d(e);if("number"==t||"string"==t||"boolean"==t||"null"==t||"undefined"==t||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array)return e;if("array"==t)return function(e,t,n){for(var r=[],o=2;o<arguments.length;++o)r[o-2]=arguments[o];Array.isArray(e)||v("Expected array but got %s: %s.",[d(e),e],t,r)}(e),m(e,Fe.X);if(e instanceof w){for(var n={},r=(e=e.entries()).next();!r.done;r=e.next())n[r.value[0]]=Fe.X(r.value[1]);return n}E(e,ge,"Only messages expected: "+e);var o={$name:(t=e.constructor).name||t.displayName};for(a in t.prototype){var i=/^get([A-Z]\w*)/.exec(a);if(i&&"getExtension"!=a&&"getJsPbMessageId"!=a){var s="has"+i[1];e[s]&&!e[s]()||(s=e[a](),o[Fe.$a(i[1])]=Fe.X(s))}}if(e.extensionObject_)return o.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",o;for(r in t.extensions)if(/^\d+$/.test(r)){s=t.extensions[r];var a=e.getExtension(s);i=void 0,s=s.Ba;var c=[],u=0;for(i in s)c[u++]=i;i=c[0],null!=a&&(n||(n=o.$extensions={}),n[Fe.$a(i)]=Fe.X(a))}return o},Fe.$a=function(e){return e.replace(/^[A-Z]/,(function(e){return e.toLowerCase()}))},p("jspb.BinaryEncoder",Ue,void 0),Ue.prototype.length=function(){return this.a.length},Ue.prototype.length=Ue.prototype.length,Ue.prototype.end=function(){var e=this.a;return this.a=[],e},Ue.prototype.end=Ue.prototype.end,Ue.prototype.l=function(e,t){for(_(e==Math.floor(e)),_(t==Math.floor(t)),_(0<=e&&4294967296>e),_(0<=t&&4294967296>t);0<t||127<e;)this.a.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.a.push(e)},Ue.prototype.writeSplitVarint64=Ue.prototype.l,Ue.prototype.A=function(e,t){_(e==Math.floor(e)),_(t==Math.floor(t)),_(0<=e&&4294967296>e),_(0<=t&&4294967296>t),this.s(e),this.s(t)},Ue.prototype.writeSplitFixed64=Ue.prototype.A,Ue.prototype.j=function(e){for(_(e==Math.floor(e)),_(0<=e&&4294967296>e);127<e;)this.a.push(127&e|128),e>>>=7;this.a.push(e)},Ue.prototype.writeUnsignedVarint32=Ue.prototype.j,Ue.prototype.M=function(e){if(_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),0<=e)this.j(e);else{for(var t=0;9>t;t++)this.a.push(127&e|128),e>>=7;this.a.push(1)}},Ue.prototype.writeSignedVarint32=Ue.prototype.M,Ue.prototype.va=function(e){_(e==Math.floor(e)),_(0<=e&&0x10000000000000000>e),j(e),this.l(N,F)},Ue.prototype.writeUnsignedVarint64=Ue.prototype.va,Ue.prototype.ua=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=e&&0x8000000000000000>e),j(e),this.l(N,F)},Ue.prototype.writeSignedVarint64=Ue.prototype.ua,Ue.prototype.wa=function(e){_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),this.j((e<<1^e>>31)>>>0)},Ue.prototype.writeZigzagVarint32=Ue.prototype.wa,Ue.prototype.xa=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=e&&0x8000000000000000>e),B(e),this.l(N,F)},Ue.prototype.writeZigzagVarint64=Ue.prototype.xa,Ue.prototype.Ta=function(e){this.W(te(e))},Ue.prototype.writeZigzagVarint64String=Ue.prototype.Ta,Ue.prototype.W=function(e){var t=this;G(e),V(N,F,(function(e,n){t.l(e>>>0,n>>>0)}))},Ue.prototype.writeZigzagVarintHash64=Ue.prototype.W,Ue.prototype.be=function(e){_(e==Math.floor(e)),_(0<=e&&256>e),this.a.push(e>>>0&255)},Ue.prototype.writeUint8=Ue.prototype.be,Ue.prototype.ae=function(e){_(e==Math.floor(e)),_(0<=e&&65536>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255)},Ue.prototype.writeUint16=Ue.prototype.ae,Ue.prototype.s=function(e){_(e==Math.floor(e)),_(0<=e&&4294967296>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255),this.a.push(e>>>16&255),this.a.push(e>>>24&255)},Ue.prototype.writeUint32=Ue.prototype.s,Ue.prototype.V=function(e){_(e==Math.floor(e)),_(0<=e&&0x10000000000000000>e),U(e),this.s(N),this.s(F)},Ue.prototype.writeUint64=Ue.prototype.V,Ue.prototype.Qc=function(e){_(e==Math.floor(e)),_(-128<=e&&128>e),this.a.push(e>>>0&255)},Ue.prototype.writeInt8=Ue.prototype.Qc,Ue.prototype.Pc=function(e){_(e==Math.floor(e)),_(-32768<=e&&32768>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255)},Ue.prototype.writeInt16=Ue.prototype.Pc,Ue.prototype.S=function(e){_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255),this.a.push(e>>>16&255),this.a.push(e>>>24&255)},Ue.prototype.writeInt32=Ue.prototype.S,Ue.prototype.T=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=e&&0x8000000000000000>e),j(e),this.A(N,F)},Ue.prototype.writeInt64=Ue.prototype.T,Ue.prototype.ka=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=+e&&0x8000000000000000>+e),G(te(e)),this.A(N,F)},Ue.prototype.writeInt64String=Ue.prototype.ka,Ue.prototype.L=function(e){_(1/0===e||-1/0===e||isNaN(e)||-34028234663852886e22<=e&&34028234663852886e22>=e),W(e),this.s(N)},Ue.prototype.writeFloat=Ue.prototype.L,Ue.prototype.J=function(e){_(1/0===e||-1/0===e||isNaN(e)||-17976931348623157e292<=e&&17976931348623157e292>=e),z(e),this.s(N),this.s(F)},Ue.prototype.writeDouble=Ue.prototype.J,Ue.prototype.I=function(e){_("boolean"==typeof e||"number"==typeof e),this.a.push(e?1:0)},Ue.prototype.writeBool=Ue.prototype.I,Ue.prototype.R=function(e){_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),this.M(e)},Ue.prototype.writeEnum=Ue.prototype.R,Ue.prototype.ja=function(e){this.a.push.apply(this.a,e)},Ue.prototype.writeBytes=Ue.prototype.ja,Ue.prototype.N=function(e){G(e),this.l(N,F)},Ue.prototype.writeVarintHash64=Ue.prototype.N,Ue.prototype.K=function(e){G(e),this.s(N),this.s(F)},Ue.prototype.writeFixedHash64=Ue.prototype.K,Ue.prototype.U=function(e){var t=this.a.length;!function(e,t,n){for(var r=[],o=2;o<arguments.length;++o)r[o-2]=arguments[o];"string"!=typeof e&&v("Expected string but got %s: %s.",[d(e),e],t,r)}(e);for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(128>r)this.a.push(r);else if(2048>r)this.a.push(r>>6|192),this.a.push(63&r|128);else if(65536>r)if(55296<=r&&56319>=r&&n+1<e.length){var o=e.charCodeAt(n+1);56320<=o&&57343>=o&&(r=1024*(r-55296)+o-56320+65536,this.a.push(r>>18|240),this.a.push(r>>12&63|128),this.a.push(r>>6&63|128),this.a.push(63&r|128),n++)}else this.a.push(r>>12|224),this.a.push(r>>6&63|128),this.a.push(63&r|128)}return this.a.length-t},Ue.prototype.writeString=Ue.prototype.U,p("jspb.arith.UInt64",je,void 0),je.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},je.prototype.cmp=je.prototype.cmp,je.prototype.La=function(){return new je((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},je.prototype.rightShift=je.prototype.La,je.prototype.Da=function(){return new je(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},je.prototype.leftShift=je.prototype.Da,je.prototype.cb=function(){return!!(2147483648&this.hi)},je.prototype.msb=je.prototype.cb,je.prototype.Ob=function(){return!!(1&this.lo)},je.prototype.lsb=je.prototype.Ob,je.prototype.Ua=function(){return 0==this.lo&&0==this.hi},je.prototype.zero=je.prototype.Ua,je.prototype.add=function(e){return new je((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},je.prototype.add=je.prototype.add,je.prototype.sub=function(e){return new je((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},je.prototype.sub=je.prototype.sub,je.mul32x32=Be,je.prototype.eb=function(e){var t=Be(this.lo,e);return(e=Be(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},je.prototype.mul=je.prototype.eb,je.prototype.Xa=function(e){if(0==e)return[];var t=new je(0,0),n=new je(this.lo,this.hi);e=new je(e,0);for(var r=new je(1,0);!e.cb();)e=e.Da(),r=r.Da();for(;!r.Ua();)0>=e.cmp(n)&&(t=t.add(r),n=n.sub(e)),e=e.La(),r=r.La();return[t,n]},je.prototype.div=je.prototype.Xa,je.prototype.toString=function(){for(var e="",t=this;!t.Ua();){var n=(t=t.Xa(10))[0];e=t[1].lo+e,t=n}return""==e&&(e="0"),e},je.prototype.toString=je.prototype.toString,je.fromString=We,je.prototype.clone=function(){return new je(this.lo,this.hi)},je.prototype.clone=je.prototype.clone,p("jspb.arith.Int64",ze,void 0),ze.prototype.add=function(e){return new ze((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},ze.prototype.add=ze.prototype.add,ze.prototype.sub=function(e){return new ze((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},ze.prototype.sub=ze.prototype.sub,ze.prototype.clone=function(){return new ze(this.lo,this.hi)},ze.prototype.clone=ze.prototype.clone,ze.prototype.toString=function(){var e=!!(2147483648&this.hi),t=new je(this.lo,this.hi);return e&&(t=new je(0,0).sub(t)),(e?"-":"")+t.toString()},ze.prototype.toString=ze.prototype.toString,ze.fromString=Ge,p("jspb.BinaryWriter",qe,void 0),qe.prototype.pb=function(e,t,n){He(this,e.subarray(t,n))},qe.prototype.writeSerializedMessage=qe.prototype.pb,qe.prototype.Pb=function(e,t,n){null!=e&&null!=t&&null!=n&&this.pb(e,t,n)},qe.prototype.maybeWriteSerializedMessage=qe.prototype.Pb,qe.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]},qe.prototype.reset=qe.prototype.reset,qe.prototype.ab=function(){_(0==this.h.length);for(var e=new Uint8Array(this.b+this.a.length()),t=this.c,n=t.length,r=0,o=0;o<n;o++){var i=t[o];e.set(i,r),r+=i.length}return t=this.a.end(),e.set(t,r),_((r+=t.length)==e.length),this.c=[e],e},qe.prototype.getResultBuffer=qe.prototype.ab,qe.prototype.Kb=function(e){return D(this.ab(),e)},qe.prototype.getResultBase64String=qe.prototype.Kb,qe.prototype.Va=function(e){this.h.push(Ve(this,e))},qe.prototype.beginSubMessage=qe.prototype.Va,qe.prototype.Ya=function(){_(0<=this.h.length),$e(this,this.h.pop())},qe.prototype.endSubMessage=qe.prototype.Ya,qe.prototype.Nc=function(e,t,n){switch(e){case 1:this.J(t,n);break;case 2:this.L(t,n);break;case 3:this.T(t,n);break;case 4:this.V(t,n);break;case 5:this.S(t,n);break;case 6:this.Qa(t,n);break;case 7:this.Pa(t,n);break;case 8:this.I(t,n);break;case 9:this.U(t,n);break;case 10:b("Group field type not supported in writeAny()");break;case 11:b("Message field type not supported in writeAny()");break;case 12:this.ja(t,n);break;case 13:this.s(t,n);break;case 14:this.R(t,n);break;case 15:this.Ra(t,n);break;case 16:this.Sa(t,n);break;case 17:this.rb(t,n);break;case 18:this.sb(t,n);break;case 30:this.K(t,n);break;case 31:this.N(t,n);break;default:b("Invalid field type in writeAny()")}},qe.prototype.writeAny=qe.prototype.Nc,qe.prototype.S=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),Je(this,e,t))},qe.prototype.writeInt32=qe.prototype.S,qe.prototype.ob=function(e,t){null!=t&&(_(-2147483648<=(t=parseInt(t,10))&&2147483648>t),Je(this,e,t))},qe.prototype.writeInt32String=qe.prototype.ob,qe.prototype.T=function(e,t){null!=t&&(_(-0x8000000000000000<=t&&0x8000000000000000>t),null!=t&&(Ze(this,e,0),this.a.ua(t)))},qe.prototype.writeInt64=qe.prototype.T,qe.prototype.ka=function(e,t){null!=t&&(t=Ge(t),Ze(this,e,0),this.a.l(t.lo,t.hi))},qe.prototype.writeInt64String=qe.prototype.ka,qe.prototype.s=function(e,t){null!=t&&(_(0<=t&&4294967296>t),Xe(this,e,t))},qe.prototype.writeUint32=qe.prototype.s,qe.prototype.ub=function(e,t){null!=t&&(_(0<=(t=parseInt(t,10))&&4294967296>t),Xe(this,e,t))},qe.prototype.writeUint32String=qe.prototype.ub,qe.prototype.V=function(e,t){null!=t&&(_(0<=t&&0x10000000000000000>t),null!=t&&(Ze(this,e,0),this.a.va(t)))},qe.prototype.writeUint64=qe.prototype.V,qe.prototype.vb=function(e,t){null!=t&&(t=We(t),Ze(this,e,0),this.a.l(t.lo,t.hi))},qe.prototype.writeUint64String=qe.prototype.vb,qe.prototype.rb=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),null!=t&&(Ze(this,e,0),this.a.wa(t)))},qe.prototype.writeSint32=qe.prototype.rb,qe.prototype.sb=function(e,t){null!=t&&(_(-0x8000000000000000<=t&&0x8000000000000000>t),null!=t&&(Ze(this,e,0),this.a.xa(t)))},qe.prototype.writeSint64=qe.prototype.sb,qe.prototype.$d=function(e,t){null!=t&&null!=t&&(Ze(this,e,0),this.a.W(t))},qe.prototype.writeSintHash64=qe.prototype.$d,qe.prototype.Zd=function(e,t){null!=t&&null!=t&&(Ze(this,e,0),this.a.Ta(t))},qe.prototype.writeSint64String=qe.prototype.Zd,qe.prototype.Pa=function(e,t){null!=t&&(_(0<=t&&4294967296>t),Ze(this,e,5),this.a.s(t))},qe.prototype.writeFixed32=qe.prototype.Pa,qe.prototype.Qa=function(e,t){null!=t&&(_(0<=t&&0x10000000000000000>t),Ze(this,e,1),this.a.V(t))},qe.prototype.writeFixed64=qe.prototype.Qa,qe.prototype.nb=function(e,t){null!=t&&(t=We(t),Ze(this,e,1),this.a.A(t.lo,t.hi))},qe.prototype.writeFixed64String=qe.prototype.nb,qe.prototype.Ra=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),Ze(this,e,5),this.a.S(t))},qe.prototype.writeSfixed32=qe.prototype.Ra,qe.prototype.Sa=function(e,t){null!=t&&(_(-0x8000000000000000<=t&&0x8000000000000000>t),Ze(this,e,1),this.a.T(t))},qe.prototype.writeSfixed64=qe.prototype.Sa,qe.prototype.qb=function(e,t){null!=t&&(t=Ge(t),Ze(this,e,1),this.a.A(t.lo,t.hi))},qe.prototype.writeSfixed64String=qe.prototype.qb,qe.prototype.L=function(e,t){null!=t&&(Ze(this,e,5),this.a.L(t))},qe.prototype.writeFloat=qe.prototype.L,qe.prototype.J=function(e,t){null!=t&&(Ze(this,e,1),this.a.J(t))},qe.prototype.writeDouble=qe.prototype.J,qe.prototype.I=function(e,t){null!=t&&(_("boolean"==typeof t||"number"==typeof t),Ze(this,e,0),this.a.I(t))},qe.prototype.writeBool=qe.prototype.I,qe.prototype.R=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),Ze(this,e,0),this.a.M(t))},qe.prototype.writeEnum=qe.prototype.R,qe.prototype.U=function(e,t){null!=t&&(e=Ve(this,e),this.a.U(t),$e(this,e))},qe.prototype.writeString=qe.prototype.U,qe.prototype.ja=function(e,t){null!=t&&(t=ie(t),Ze(this,e,2),this.a.j(t.length),He(this,t))},qe.prototype.writeBytes=qe.prototype.ja,qe.prototype.Rc=function(e,t,n){null!=t&&(e=Ve(this,e),n(t,this),$e(this,e))},qe.prototype.writeMessage=qe.prototype.Rc,qe.prototype.Sc=function(e,t,n){null!=t&&(Ze(this,1,3),Ze(this,2,0),this.a.M(e),e=Ve(this,3),n(t,this),$e(this,e),Ze(this,1,4))},qe.prototype.writeMessageSet=qe.prototype.Sc,qe.prototype.Oc=function(e,t,n){null!=t&&(Ze(this,e,3),n(t,this),Ze(this,e,4))},qe.prototype.writeGroup=qe.prototype.Oc,qe.prototype.K=function(e,t){null!=t&&(_(8==t.length),Ze(this,e,1),this.a.K(t))},qe.prototype.writeFixedHash64=qe.prototype.K,qe.prototype.N=function(e,t){null!=t&&(_(8==t.length),Ze(this,e,0),this.a.N(t))},qe.prototype.writeVarintHash64=qe.prototype.N,qe.prototype.A=function(e,t,n){Ze(this,e,1),this.a.A(t,n)},qe.prototype.writeSplitFixed64=qe.prototype.A,qe.prototype.l=function(e,t,n){Ze(this,e,0),this.a.l(t,n)},qe.prototype.writeSplitVarint64=qe.prototype.l,qe.prototype.tb=function(e,t,n){Ze(this,e,0);var r=this.a;V(t,n,(function(e,t){r.l(e>>>0,t>>>0)}))},qe.prototype.writeSplitZigzagVarint64=qe.prototype.tb,qe.prototype.Ed=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)Je(this,e,t[n])},qe.prototype.writeRepeatedInt32=qe.prototype.Ed,qe.prototype.Fd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ob(e,t[n])},qe.prototype.writeRepeatedInt32String=qe.prototype.Fd,qe.prototype.Gd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ze(this,e,0),this.a.ua(r))}},qe.prototype.writeRepeatedInt64=qe.prototype.Gd,qe.prototype.Qd=function(e,t,n,r){if(null!=t)for(var o=0;o<t.length;o++)this.A(e,n(t[o]),r(t[o]))},qe.prototype.writeRepeatedSplitFixed64=qe.prototype.Qd,qe.prototype.Rd=function(e,t,n,r){if(null!=t)for(var o=0;o<t.length;o++)this.l(e,n(t[o]),r(t[o]))},qe.prototype.writeRepeatedSplitVarint64=qe.prototype.Rd,qe.prototype.Sd=function(e,t,n,r){if(null!=t)for(var o=0;o<t.length;o++)this.tb(e,n(t[o]),r(t[o]))},qe.prototype.writeRepeatedSplitZigzagVarint64=qe.prototype.Sd,qe.prototype.Hd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ka(e,t[n])},qe.prototype.writeRepeatedInt64String=qe.prototype.Hd,qe.prototype.Ud=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)Xe(this,e,t[n])},qe.prototype.writeRepeatedUint32=qe.prototype.Ud,qe.prototype.Vd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ub(e,t[n])},qe.prototype.writeRepeatedUint32String=qe.prototype.Vd,qe.prototype.Wd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ze(this,e,0),this.a.va(r))}},qe.prototype.writeRepeatedUint64=qe.prototype.Wd,qe.prototype.Xd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.vb(e,t[n])},qe.prototype.writeRepeatedUint64String=qe.prototype.Xd,qe.prototype.Md=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ze(this,e,0),this.a.wa(r))}},qe.prototype.writeRepeatedSint32=qe.prototype.Md,qe.prototype.Nd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ze(this,e,0),this.a.xa(r))}},qe.prototype.writeRepeatedSint64=qe.prototype.Nd,qe.prototype.Od=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ze(this,e,0),this.a.Ta(r))}},qe.prototype.writeRepeatedSint64String=qe.prototype.Od,qe.prototype.Pd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ze(this,e,0),this.a.W(r))}},qe.prototype.writeRepeatedSintHash64=qe.prototype.Pd,qe.prototype.yd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Pa(e,t[n])},qe.prototype.writeRepeatedFixed32=qe.prototype.yd,qe.prototype.zd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Qa(e,t[n])},qe.prototype.writeRepeatedFixed64=qe.prototype.zd,qe.prototype.Ad=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.nb(e,t[n])},qe.prototype.writeRepeatedFixed64String=qe.prototype.Ad,qe.prototype.Jd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Ra(e,t[n])},qe.prototype.writeRepeatedSfixed32=qe.prototype.Jd,qe.prototype.Kd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Sa(e,t[n])},qe.prototype.writeRepeatedSfixed64=qe.prototype.Kd,qe.prototype.Ld=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.qb(e,t[n])},qe.prototype.writeRepeatedSfixed64String=qe.prototype.Ld,qe.prototype.Cd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.L(e,t[n])},qe.prototype.writeRepeatedFloat=qe.prototype.Cd,qe.prototype.wd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.J(e,t[n])},qe.prototype.writeRepeatedDouble=qe.prototype.wd,qe.prototype.ud=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.I(e,t[n])},qe.prototype.writeRepeatedBool=qe.prototype.ud,qe.prototype.xd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.R(e,t[n])},qe.prototype.writeRepeatedEnum=qe.prototype.xd,qe.prototype.Td=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.U(e,t[n])},qe.prototype.writeRepeatedString=qe.prototype.Td,qe.prototype.vd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ja(e,t[n])},qe.prototype.writeRepeatedBytes=qe.prototype.vd,qe.prototype.Id=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++){var o=Ve(this,e);n(t[r],this),$e(this,o)}},qe.prototype.writeRepeatedMessage=qe.prototype.Id,qe.prototype.Dd=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++)Ze(this,e,3),n(t[r],this),Ze(this,e,4)},qe.prototype.writeRepeatedGroup=qe.prototype.Dd,qe.prototype.Bd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.K(e,t[n])},qe.prototype.writeRepeatedFixedHash64=qe.prototype.Bd,qe.prototype.Yd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.N(e,t[n])},qe.prototype.writeRepeatedVarintHash64=qe.prototype.Yd,qe.prototype.ad=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.M(t[n]);$e(this,e)}},qe.prototype.writePackedInt32=qe.prototype.ad,qe.prototype.bd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.M(parseInt(t[n],10));$e(this,e)}},qe.prototype.writePackedInt32String=qe.prototype.bd,qe.prototype.cd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.ua(t[n]);$e(this,e)}},qe.prototype.writePackedInt64=qe.prototype.cd,qe.prototype.md=function(e,t,n,r){if(null!=t){e=Ve(this,e);for(var o=0;o<t.length;o++)this.a.A(n(t[o]),r(t[o]));$e(this,e)}},qe.prototype.writePackedSplitFixed64=qe.prototype.md,qe.prototype.nd=function(e,t,n,r){if(null!=t){e=Ve(this,e);for(var o=0;o<t.length;o++)this.a.l(n(t[o]),r(t[o]));$e(this,e)}},qe.prototype.writePackedSplitVarint64=qe.prototype.nd,qe.prototype.od=function(e,t,n,r){if(null!=t){e=Ve(this,e);for(var o=this.a,i=0;i<t.length;i++)V(n(t[i]),r(t[i]),(function(e,t){o.l(e>>>0,t>>>0)}));$e(this,e)}},qe.prototype.writePackedSplitZigzagVarint64=qe.prototype.od,qe.prototype.dd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++){var r=Ge(t[n]);this.a.l(r.lo,r.hi)}$e(this,e)}},qe.prototype.writePackedInt64String=qe.prototype.dd,qe.prototype.pd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.j(t[n]);$e(this,e)}},qe.prototype.writePackedUint32=qe.prototype.pd,qe.prototype.qd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.j(parseInt(t[n],10));$e(this,e)}},qe.prototype.writePackedUint32String=qe.prototype.qd,qe.prototype.rd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.va(t[n]);$e(this,e)}},qe.prototype.writePackedUint64=qe.prototype.rd,qe.prototype.sd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++){var r=We(t[n]);this.a.l(r.lo,r.hi)}$e(this,e)}},qe.prototype.writePackedUint64String=qe.prototype.sd,qe.prototype.hd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.wa(t[n]);$e(this,e)}},qe.prototype.writePackedSint32=qe.prototype.hd,qe.prototype.jd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.xa(t[n]);$e(this,e)}},qe.prototype.writePackedSint64=qe.prototype.jd,qe.prototype.kd=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.W(te(t[n]));$e(this,e)}},qe.prototype.writePackedSint64String=qe.prototype.kd,qe.prototype.ld=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.W(t[n]);$e(this,e)}},qe.prototype.writePackedSintHash64=qe.prototype.ld,qe.prototype.Wc=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(4*t.length),e=0;e<t.length;e++)this.a.s(t[e])},qe.prototype.writePackedFixed32=qe.prototype.Wc,qe.prototype.Xc=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.V(t[e])},qe.prototype.writePackedFixed64=qe.prototype.Xc,qe.prototype.Yc=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++){var n=We(t[e]);this.a.A(n.lo,n.hi)}},qe.prototype.writePackedFixed64String=qe.prototype.Yc,qe.prototype.ed=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(4*t.length),e=0;e<t.length;e++)this.a.S(t[e])},qe.prototype.writePackedSfixed32=qe.prototype.ed,qe.prototype.fd=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.T(t[e])},qe.prototype.writePackedSfixed64=qe.prototype.fd,qe.prototype.gd=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.ka(t[e])},qe.prototype.writePackedSfixed64String=qe.prototype.gd,qe.prototype.$c=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(4*t.length),e=0;e<t.length;e++)this.a.L(t[e])},qe.prototype.writePackedFloat=qe.prototype.$c,qe.prototype.Uc=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.J(t[e])},qe.prototype.writePackedDouble=qe.prototype.Uc,qe.prototype.Tc=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(t.length),e=0;e<t.length;e++)this.a.I(t[e])},qe.prototype.writePackedBool=qe.prototype.Tc,qe.prototype.Vc=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.R(t[n]);$e(this,e)}},qe.prototype.writePackedEnum=qe.prototype.Vc,qe.prototype.Zc=function(e,t){if(null!=t&&t.length)for(Ze(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.K(t[e])},qe.prototype.writePackedFixedHash64=qe.prototype.Zc,qe.prototype.td=function(e,t){if(null!=t&&t.length){e=Ve(this,e);for(var n=0;n<t.length;n++)this.a.N(t[n]);$e(this,e)}},qe.prototype.writePackedVarintHash64=qe.prototype.td,t.debug=Fe,t.Map=w,t.Message=ge,t.BinaryReader=ue,t.BinaryWriter=qe,t.ExtensionFieldInfo=fe,t.ExtensionFieldBinaryInfo=he,t.exportSymbol=function(e,t,n){p(e,t,n)},t.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},t.object={extend:function(e,t){for(var n,r,o=1;o<arguments.length;o++){for(n in r=arguments[o])e[n]=r[n];for(var i=0;i<h.length;i++)n=h[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}},t.typeOf=d},458:(e,t,n)=>{var r=n(157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.google.protobuf.Empty",null,i),proto.google.protobuf.Empty=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.google.protobuf.Empty,r.Message),o.DEBUG&&!COMPILED&&(proto.google.protobuf.Empty.displayName="proto.google.protobuf.Empty"),r.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Empty.prototype.toObject=function(e){return proto.google.protobuf.Empty.toObject(e,this)},proto.google.protobuf.Empty.toObject=function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}),proto.google.protobuf.Empty.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.google.protobuf.Empty;return proto.google.protobuf.Empty.deserializeBinaryFromReader(n,t)},proto.google.protobuf.Empty.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.google.protobuf.Empty.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.google.protobuf.Empty.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.Empty.serializeBinaryToWriter=function(e,t){},o.object.extend(t,proto.google.protobuf)},121:function(e,t,n){var r;e=n.nmd(e),function(){var o,i="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=32,u=128,l=1/0,p=9007199254740991,d=NaN,f=4294967295,h=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",_="[object Error]",b="[object Function]",E="[object GeneratorFunction]",S="[object Map]",w="[object Number]",T="[object Object]",O="[object Promise]",C="[object RegExp]",R="[object Set]",M="[object String]",P="[object Symbol]",k="[object WeakMap]",I="[object ArrayBuffer]",A="[object DataView]",D="[object Float32Array]",L="[object Float64Array]",x="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",j="[object Uint8ClampedArray]",B="[object Uint16Array]",W="[object Uint32Array]",z=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,$=RegExp(H.source),Z=RegExp(V.source),X=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,oe=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",we="\\u2700-\\u27bf",Te="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Re="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Me="["+Ee+"]",Pe="["+Re+"]",ke="["+Se+"]",Ie="\\d+",Ae="["+we+"]",De="["+Te+"]",Le="[^"+Ee+Re+Ie+we+Te+Oe+"]",xe="\\ud83c[\\udffb-\\udfff]",Ne="[^"+Ee+"]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+Oe+"]",Be="\\u200d",We="(?:"+De+"|"+Le+")",ze="(?:"+je+"|"+Le+")",Ge="(?:['’](?:d|ll|m|re|s|t|ve))?",qe="(?:['’](?:D|LL|M|RE|S|T|VE))?",He="(?:"+ke+"|"+xe+")?",Ve="["+Ce+"]?",$e=Ve+He+"(?:"+Be+"(?:"+[Ne,Fe,Ue].join("|")+")"+Ve+He+")*",Ze="(?:"+[Ae,Fe,Ue].join("|")+")"+$e,Xe="(?:"+[Ne+ke+"?",ke,Fe,Ue,Me].join("|")+")",Je=RegExp("['’]","g"),Ke=RegExp(ke,"g"),Ye=RegExp(xe+"(?="+xe+")|"+Xe+$e,"g"),Qe=RegExp([je+"?"+De+"+"+Ge+"(?="+[Pe,je,"$"].join("|")+")",ze+"+"+qe+"(?="+[Pe,je+We,"$"].join("|")+")",je+"?"+We+"+"+Ge,je+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,Ze].join("|"),"g"),et=RegExp("["+Be+Ee+Se+Ce+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,ot={};ot[D]=ot[L]=ot[x]=ot[N]=ot[F]=ot[U]=ot[j]=ot[B]=ot[W]=!0,ot[g]=ot[m]=ot[I]=ot[y]=ot[A]=ot[v]=ot[_]=ot[b]=ot[S]=ot[w]=ot[T]=ot[C]=ot[R]=ot[M]=ot[k]=!1;var it={};it[g]=it[m]=it[I]=it[A]=it[y]=it[v]=it[D]=it[L]=it[x]=it[N]=it[F]=it[S]=it[w]=it[T]=it[C]=it[R]=it[M]=it[P]=it[U]=it[j]=it[B]=it[W]=!0,it[_]=it[b]=it[k]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,ct=parseInt,ut="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,lt="object"==typeof self&&self&&self.Object===Object&&self,pt=ut||lt||Function("return this")(),dt=t&&!t.nodeType&&t,ft=dt&&e&&!e.nodeType&&e,ht=ft&&ft.exports===dt,gt=ht&&ut.process,mt=function(){try{return ft&&ft.require&&ft.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),yt=mt&&mt.isArrayBuffer,vt=mt&&mt.isDate,_t=mt&&mt.isMap,bt=mt&&mt.isRegExp,Et=mt&&mt.isSet,St=mt&&mt.isTypedArray;function wt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var s=e[o];t(r,s,n(s),e)}return r}function Ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Mt(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}function Pt(e,t){return!(null==e||!e.length)&&jt(e,t,0)>-1}function kt(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function It(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function At(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Dt(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Lt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Nt=Gt("length");function Ft(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function Ut(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function jt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Ut(e,Wt,n)}function Bt(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function Wt(e){return e!=e}function zt(e,t){var n=null==e?0:e.length;return n?Vt(e,t)/n:d}function Gt(e){return function(t){return null==t?o:t[e]}}function qt(e){return function(t){return null==e?o:e[t]}}function Ht(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function Vt(e,t){for(var n,r=-1,i=e.length;++r<i;){var s=t(e[r]);s!==o&&(n=n===o?s:n+s)}return n}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,dn(e)+1).replace(re,""):e}function Xt(e){return function(t){return e(t)}}function Jt(e,t){return It(t,(function(t){return e[t]}))}function Kt(e,t){return e.has(t)}function Yt(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function Qt(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}var en=qt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tn=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+st[e]}function rn(e){return et.test(e)}function on(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function sn(e,t){return function(n){return e(t(n))}}function an(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,i[o++]=n)}return i}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function ln(e){return rn(e)?function(e){for(var t=Ye.lastIndex=0;Ye.test(e);)++t;return t}(e):Nt(e)}function pn(e){return rn(e)?function(e){return e.match(Ye)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var fn=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function e(t){var n,r=(t=null==t?pt:hn.defaults(pt.Object(),t,hn.pick(pt,nt))).Array,oe=t.Date,Ee=t.Error,Se=t.Function,we=t.Math,Te=t.Object,Oe=t.RegExp,Ce=t.String,Re=t.TypeError,Me=r.prototype,Pe=Se.prototype,ke=Te.prototype,Ie=t["__core-js_shared__"],Ae=Pe.toString,De=ke.hasOwnProperty,Le=0,xe=(n=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ne=ke.toString,Fe=Ae.call(Te),Ue=pt._,je=Oe("^"+Ae.call(De).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=ht?t.Buffer:o,We=t.Symbol,ze=t.Uint8Array,Ge=Be?Be.allocUnsafe:o,qe=sn(Te.getPrototypeOf,Te),He=Te.create,Ve=ke.propertyIsEnumerable,$e=Me.splice,Ze=We?We.isConcatSpreadable:o,Xe=We?We.iterator:o,Ye=We?We.toStringTag:o,et=function(){try{var e=ui(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),st=t.clearTimeout!==pt.clearTimeout&&t.clearTimeout,ut=oe&&oe.now!==pt.Date.now&&oe.now,lt=t.setTimeout!==pt.setTimeout&&t.setTimeout,dt=we.ceil,ft=we.floor,gt=Te.getOwnPropertySymbols,mt=Be?Be.isBuffer:o,Nt=t.isFinite,qt=Me.join,gn=sn(Te.keys,Te),mn=we.max,yn=we.min,vn=oe.now,_n=t.parseInt,bn=we.random,En=Me.reverse,Sn=ui(t,"DataView"),wn=ui(t,"Map"),Tn=ui(t,"Promise"),On=ui(t,"Set"),Cn=ui(t,"WeakMap"),Rn=ui(Te,"create"),Mn=Cn&&new Cn,Pn={},kn=Fi(Sn),In=Fi(wn),An=Fi(Tn),Dn=Fi(On),Ln=Fi(Cn),xn=We?We.prototype:o,Nn=xn?xn.valueOf:o,Fn=xn?xn.toString:o;function Un(e){if(ea(e)&&!Gs(e)&&!(e instanceof zn)){if(e instanceof Wn)return e;if(De.call(e,"__wrapped__"))return Ui(e)}return new Wn(e)}var jn=function(){function e(){}return function(t){if(!Qs(t))return{};if(He)return He(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function Bn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Hn;++t<n;)this.add(e[t])}function $n(e){var t=this.__data__=new qn(e);this.size=t.size}function Zn(e,t){var n=Gs(e),r=!n&&zs(e),o=!n&&!r&&$s(e),i=!n&&!r&&!o&&ca(e),s=n||r||o||i,a=s?$t(e.length,Ce):[],c=a.length;for(var u in e)!t&&!De.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mi(u,c))||a.push(u);return a}function Xn(e){var t=e.length;return t?e[Hr(0,t-1)]:o}function Jn(e,t){return Ai(Ro(e),ir(t,0,e.length))}function Kn(e){return Ai(Ro(e))}function Yn(e,t,n){(n!==o&&!js(e[t],n)||n===o&&!(t in e))&&rr(e,t,n)}function Qn(e,t,n){var r=e[t];De.call(e,t)&&js(r,n)&&(n!==o||t in e)||rr(e,t,n)}function er(e,t){for(var n=e.length;n--;)if(js(e[n][0],t))return n;return-1}function tr(e,t,n,r){return lr(e,(function(e,o,i){t(r,e,n(e),i)})),r}function nr(e,t){return e&&Mo(t,ka(t),e)}function rr(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var n=-1,i=t.length,s=r(i),a=null==e;++n<i;)s[n]=a?o:Oa(e,t[n]);return s}function ir(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function sr(e,t,n,r,i,s){var a,c=1&t,u=2&t,l=4&t;if(n&&(a=i?n(e,r,i,s):n(e)),a!==o)return a;if(!Qs(e))return e;var p=Gs(e);if(p){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return Ro(e,a)}else{var d=di(e),f=d==b||d==E;if($s(e))return Eo(e,c);if(d==T||d==g||f&&!i){if(a=u||f?{}:hi(e),!c)return u?function(e,t){return Mo(e,pi(e),t)}(e,function(e,t){return e&&Mo(t,Ia(t),e)}(a,e)):function(e,t){return Mo(e,li(e),t)}(e,nr(a,e))}else{if(!it[d])return i?e:{};a=function(e,t,n){var r,o=e.constructor;switch(t){case I:return So(e);case y:case v:return new o(+e);case A:return function(e,t){var n=t?So(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case D:case L:case x:case N:case F:case U:case j:case B:case W:return wo(e,n);case S:return new o;case w:case M:return new o(e);case C:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case R:return new o;case P:return r=e,Nn?Te(Nn.call(r)):{}}}(e,d,c)}}s||(s=new $n);var h=s.get(e);if(h)return h;s.set(e,a),ia(e)?e.forEach((function(r){a.add(sr(r,t,n,r,e,s))})):ta(e)&&e.forEach((function(r,o){a.set(o,sr(r,t,n,o,e,s))}));var m=p?o:(l?u?ni:ti:u?Ia:ka)(e);return Ot(m||e,(function(r,o){m&&(r=e[o=r]),Qn(a,o,sr(r,t,n,o,e,s))})),a}function ar(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var i=n[r],s=t[i],a=e[i];if(a===o&&!(i in e)||!s(a))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Re(i);return Mi((function(){e.apply(o,n)}),t)}function ur(e,t,n,r){var o=-1,i=Pt,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;n&&(t=It(t,Xt(n))),r?(i=kt,s=!1):t.length>=200&&(i=Kt,s=!1,t=new Vn(t));e:for(;++o<a;){var l=e[o],p=null==n?l:n(l);if(l=r||0!==l?l:0,s&&p==p){for(var d=u;d--;)if(t[d]===p)continue e;c.push(l)}else i(t,p,r)||c.push(l)}return c}Un.templateSettings={escape:X,evaluate:J,interpolate:K,variable:"",imports:{_:Un}},Un.prototype=Bn.prototype,Un.prototype.constructor=Un,Wn.prototype=jn(Bn.prototype),Wn.prototype.constructor=Wn,zn.prototype=jn(Bn.prototype),zn.prototype.constructor=zn,Gn.prototype.clear=function(){this.__data__=Rn?Rn(null):{},this.size=0},Gn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gn.prototype.get=function(e){var t=this.__data__;if(Rn){var n=t[e];return n===s?o:n}return De.call(t,e)?t[e]:o},Gn.prototype.has=function(e){var t=this.__data__;return Rn?t[e]!==o:De.call(t,e)},Gn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rn&&t===o?s:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=er(t,e);return!(n<0||(n==t.length-1?t.pop():$e.call(t,n,1),--this.size,0))},qn.prototype.get=function(e){var t=this.__data__,n=er(t,e);return n<0?o:t[n][1]},qn.prototype.has=function(e){return er(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=er(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(wn||qn),string:new Gn}},Hn.prototype.delete=function(e){var t=ai(this,e).delete(e);return this.size-=t?1:0,t},Hn.prototype.get=function(e){return ai(this,e).get(e)},Hn.prototype.has=function(e){return ai(this,e).has(e)},Hn.prototype.set=function(e,t){var n=ai(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Vn.prototype.add=Vn.prototype.push=function(e){return this.__data__.set(e,s),this},Vn.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.clear=function(){this.__data__=new qn,this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},$n.prototype.get=function(e){return this.__data__.get(e)},$n.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!wn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(e,t),this.size=n.size,this};var lr=Io(vr),pr=Io(_r,!0);function dr(e,t){var n=!0;return lr(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function fr(e,t,n){for(var r=-1,i=e.length;++r<i;){var s=e[r],a=t(s);if(null!=a&&(c===o?a==a&&!aa(a):n(a,c)))var c=a,u=s}return u}function hr(e,t){var n=[];return lr(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function gr(e,t,n,r,o){var i=-1,s=e.length;for(n||(n=gi),o||(o=[]);++i<s;){var a=e[i];t>0&&n(a)?t>1?gr(a,t-1,n,r,o):At(o,a):r||(o[o.length]=a)}return o}var mr=Ao(),yr=Ao(!0);function vr(e,t){return e&&mr(e,t,ka)}function _r(e,t){return e&&yr(e,t,ka)}function br(e,t){return Mt(t,(function(t){return Js(e[t])}))}function Er(e,t){for(var n=0,r=(t=yo(t,e)).length;null!=e&&n<r;)e=e[Ni(t[n++])];return n&&n==r?e:o}function Sr(e,t,n){var r=t(e);return Gs(e)?r:At(r,n(e))}function wr(e){return null==e?e===o?"[object Undefined]":"[object Null]":Ye&&Ye in Te(e)?function(e){var t=De.call(e,Ye),n=e[Ye];try{e[Ye]=o;var r=!0}catch(e){}var i=Ne.call(e);return r&&(t?e[Ye]=n:delete e[Ye]),i}(e):function(e){return Ne.call(e)}(e)}function Tr(e,t){return e>t}function Or(e,t){return null!=e&&De.call(e,t)}function Cr(e,t){return null!=e&&t in Te(e)}function Rr(e,t,n){for(var i=n?kt:Pt,s=e[0].length,a=e.length,c=a,u=r(a),l=1/0,p=[];c--;){var d=e[c];c&&t&&(d=It(d,Xt(t))),l=yn(d.length,l),u[c]=!n&&(t||s>=120&&d.length>=120)?new Vn(c&&d):o}d=e[0];var f=-1,h=u[0];e:for(;++f<s&&p.length<l;){var g=d[f],m=t?t(g):g;if(g=n||0!==g?g:0,!(h?Kt(h,m):i(p,m,n))){for(c=a;--c;){var y=u[c];if(!(y?Kt(y,m):i(e[c],m,n)))continue e}h&&h.push(m),p.push(g)}}return p}function Mr(e,t,n){var r=null==(e=Oi(e,t=yo(t,e)))?e:e[Ni(Xi(t))];return null==r?o:wt(r,e,n)}function Pr(e){return ea(e)&&wr(e)==g}function kr(e,t,n,r,i){return e===t||(null==e||null==t||!ea(e)&&!ea(t)?e!=e&&t!=t:function(e,t,n,r,i,s){var a=Gs(e),c=Gs(t),u=a?m:di(e),l=c?m:di(t),p=(u=u==g?T:u)==T,d=(l=l==g?T:l)==T,f=u==l;if(f&&$s(e)){if(!$s(t))return!1;a=!0,p=!1}if(f&&!p)return s||(s=new $n),a||ca(e)?Qo(e,t,n,r,i,s):function(e,t,n,r,o,i,s){switch(n){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I:return!(e.byteLength!=t.byteLength||!i(new ze(e),new ze(t)));case y:case v:case w:return js(+e,+t);case _:return e.name==t.name&&e.message==t.message;case C:case M:return e==t+"";case S:var a=on;case R:var c=1&r;if(a||(a=cn),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var l=Qo(a(e),a(t),r,o,i,s);return s.delete(e),l;case P:if(Nn)return Nn.call(e)==Nn.call(t)}return!1}(e,t,u,n,r,i,s);if(!(1&n)){var h=p&&De.call(e,"__wrapped__"),b=d&&De.call(t,"__wrapped__");if(h||b){var E=h?e.value():e,O=b?t.value():t;return s||(s=new $n),i(E,O,n,r,s)}}return!!f&&(s||(s=new $n),function(e,t,n,r,i,s){var a=1&n,c=ti(e),u=c.length;if(u!=ti(t).length&&!a)return!1;for(var l=u;l--;){var p=c[l];if(!(a?p in t:De.call(t,p)))return!1}var d=s.get(e),f=s.get(t);if(d&&f)return d==t&&f==e;var h=!0;s.set(e,t),s.set(t,e);for(var g=a;++l<u;){var m=e[p=c[l]],y=t[p];if(r)var v=a?r(y,m,p,t,e,s):r(m,y,p,e,t,s);if(!(v===o?m===y||i(m,y,n,r,s):v)){h=!1;break}g||(g="constructor"==p)}if(h&&!g){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,n,r,i,s))}(e,t,n,r,kr,i))}function Ir(e,t,n,r){var i=n.length,s=i,a=!r;if(null==e)return!s;for(e=Te(e);i--;){var c=n[i];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){var u=(c=n[i])[0],l=e[u],p=c[1];if(a&&c[2]){if(l===o&&!(u in e))return!1}else{var d=new $n;if(r)var f=r(l,p,u,e,t,d);if(!(f===o?kr(p,l,3,r,d):f))return!1}}return!0}function Ar(e){return!(!Qs(e)||(t=e,xe&&xe in t))&&(Js(e)?je:ge).test(Fi(e));var t}function Dr(e){return"function"==typeof e?e:null==e?nc:"object"==typeof e?Gs(e)?Ur(e[0],e[1]):Fr(e):pc(e)}function Lr(e){if(!Ei(e))return gn(e);var t=[];for(var n in Te(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function xr(e,t){return e<t}function Nr(e,t){var n=-1,o=Hs(e)?r(e.length):[];return lr(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}function Fr(e){var t=ci(e);return 1==t.length&&t[0][2]?wi(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Ur(e,t){return vi(e)&&Si(t)?wi(Ni(e),t):function(n){var r=Oa(n,e);return r===o&&r===t?Ca(n,e):kr(t,r,3)}}function jr(e,t,n,r,i){e!==t&&mr(t,(function(s,a){if(i||(i=new $n),Qs(s))!function(e,t,n,r,i,s,a){var c=Ci(e,n),u=Ci(t,n),l=a.get(u);if(l)Yn(e,n,l);else{var p=s?s(c,u,n+"",e,t,a):o,d=p===o;if(d){var f=Gs(u),h=!f&&$s(u),g=!f&&!h&&ca(u);p=u,f||h||g?Gs(c)?p=c:Vs(c)?p=Ro(c):h?(d=!1,p=Eo(u,!0)):g?(d=!1,p=wo(u,!0)):p=[]:ra(u)||zs(u)?(p=c,zs(c)?p=ma(c):Qs(c)&&!Js(c)||(p=hi(u))):d=!1}d&&(a.set(u,p),i(p,u,r,s,a),a.delete(u)),Yn(e,n,p)}}(e,t,a,n,jr,r,i);else{var c=r?r(Ci(e,a),s,a+"",e,t,i):o;c===o&&(c=s),Yn(e,a,c)}}),Ia)}function Br(e,t){var n=e.length;if(n)return mi(t+=t<0?n:0,n)?e[t]:o}function Wr(e,t,n){t=t.length?It(t,(function(e){return Gs(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[nc];var r=-1;t=It(t,Xt(si()));var o=Nr(e,(function(e,n,o){var i=It(t,(function(t){return t(e)}));return{criteria:i,index:++r,value:e}}));return function(e){var t=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,s=o.length,a=n.length;++r<s;){var c=To(o[r],i[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));t--;)e[t]=e[t].value;return e}(o)}function zr(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var s=t[r],a=Er(e,s);n(a,s)&&Jr(i,yo(s,e),a)}return i}function Gr(e,t,n,r){var o=r?Bt:jt,i=-1,s=t.length,a=e;for(e===t&&(t=Ro(t)),n&&(a=It(e,Xt(n)));++i<s;)for(var c=0,u=t[i],l=n?n(u):u;(c=o(a,l,c,r))>-1;)a!==e&&$e.call(a,c,1),$e.call(e,c,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;mi(o)?$e.call(e,o,1):co(e,o)}}return e}function Hr(e,t){return e+ft(bn()*(t-e+1))}function Vr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function $r(e,t){return Pi(Ti(e,t,nc),e+"")}function Zr(e){return Xn(ja(e))}function Xr(e,t){var n=ja(e);return Ai(n,ir(t,0,n.length))}function Jr(e,t,n,r){if(!Qs(e))return e;for(var i=-1,s=(t=yo(t,e)).length,a=s-1,c=e;null!=c&&++i<s;){var u=Ni(t[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var p=c[u];(l=r?r(p,u,c):o)===o&&(l=Qs(p)?p:mi(t[i+1])?[]:{})}Qn(c,u,l),c=c[u]}return e}var Kr=Mn?function(e,t){return Mn.set(e,t),e}:nc,Yr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Qa(t),writable:!0})}:nc;function Qr(e){return Ai(ja(e))}function eo(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=r(i);++o<i;)s[o]=e[o+t];return s}function to(e,t){var n;return lr(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function no(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,s=e[i];null!==s&&!aa(s)&&(n?s<=t:s<t)?r=i+1:o=i}return o}return ro(e,t,nc,n)}function ro(e,t,n,r){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,c=null===t,u=aa(t),l=t===o;i<s;){var p=ft((i+s)/2),d=n(e[p]),f=d!==o,h=null===d,g=d==d,m=aa(d);if(a)var y=r||g;else y=l?g&&(r||f):c?g&&f&&(r||!h):u?g&&f&&!h&&(r||!m):!h&&!m&&(r?d<=t:d<t);y?i=p+1:s=p}return yn(s,4294967294)}function oo(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!js(a,c)){var c=a;i[o++]=0===s?0:s}}return i}function io(e){return"number"==typeof e?e:aa(e)?d:+e}function so(e){if("string"==typeof e)return e;if(Gs(e))return It(e,so)+"";if(aa(e))return Fn?Fn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ao(e,t,n){var r=-1,o=Pt,i=e.length,s=!0,a=[],c=a;if(n)s=!1,o=kt;else if(i>=200){var u=t?null:$o(e);if(u)return cn(u);s=!1,o=Kt,c=new Vn}else c=t?[]:a;e:for(;++r<i;){var l=e[r],p=t?t(l):l;if(l=n||0!==l?l:0,s&&p==p){for(var d=c.length;d--;)if(c[d]===p)continue e;t&&c.push(p),a.push(l)}else o(c,p,n)||(c!==a&&c.push(p),a.push(l))}return a}function co(e,t){return null==(e=Oi(e,t=yo(t,e)))||delete e[Ni(Xi(t))]}function uo(e,t,n,r){return Jr(e,t,n(Er(e,t)),r)}function lo(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?eo(e,r?0:i,r?i+1:o):eo(e,r?i+1:0,r?o:i)}function po(e,t){var n=e;return n instanceof zn&&(n=n.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,At([e],t.args))}),n)}function fo(e,t,n){var o=e.length;if(o<2)return o?ao(e[0]):[];for(var i=-1,s=r(o);++i<o;)for(var a=e[i],c=-1;++c<o;)c!=i&&(s[i]=ur(s[i]||a,e[c],t,n));return ao(gr(s,1),t,n)}function ho(e,t,n){for(var r=-1,i=e.length,s=t.length,a={};++r<i;){var c=r<s?t[r]:o;n(a,e[r],c)}return a}function go(e){return Vs(e)?e:[]}function mo(e){return"function"==typeof e?e:nc}function yo(e,t){return Gs(e)?e:vi(e,t)?[e]:xi(ya(e))}var vo=$r;function _o(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:eo(e,t,n)}var bo=st||function(e){return pt.clearTimeout(e)};function Eo(e,t){if(t)return e.slice();var n=e.length,r=Ge?Ge(n):new e.constructor(n);return e.copy(r),r}function So(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function wo(e,t){var n=t?So(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function To(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,s=aa(e),a=t!==o,c=null===t,u=t==t,l=aa(t);if(!c&&!l&&!s&&e>t||s&&a&&u&&!c&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!s&&!l&&e<t||l&&n&&i&&!r&&!s||c&&n&&i||!a&&i||!u)return-1}return 0}function Oo(e,t,n,o){for(var i=-1,s=e.length,a=n.length,c=-1,u=t.length,l=mn(s-a,0),p=r(u+l),d=!o;++c<u;)p[c]=t[c];for(;++i<a;)(d||i<s)&&(p[n[i]]=e[i]);for(;l--;)p[c++]=e[i++];return p}function Co(e,t,n,o){for(var i=-1,s=e.length,a=-1,c=n.length,u=-1,l=t.length,p=mn(s-c,0),d=r(p+l),f=!o;++i<p;)d[i]=e[i];for(var h=i;++u<l;)d[h+u]=t[u];for(;++a<c;)(f||i<s)&&(d[h+n[a]]=e[i++]);return d}function Ro(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function Mo(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],u=r?r(n[c],e[c],c,n,e):o;u===o&&(u=e[c]),i?rr(n,c,u):Qn(n,c,u)}return n}function Po(e,t){return function(n,r){var o=Gs(n)?Tt:tr,i=t?t():{};return o(n,e,si(r,2),i)}}function ko(e){return $r((function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:o,a=i>2?n[2]:o;for(s=e.length>3&&"function"==typeof s?(i--,s):o,a&&yi(n[0],n[1],a)&&(s=i<3?o:s,i=1),t=Te(t);++r<i;){var c=n[r];c&&e(t,c,r,s)}return t}))}function Io(e,t){return function(n,r){if(null==n)return n;if(!Hs(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=Te(n);(t?i--:++i<o)&&!1!==r(s[i],i,s););return n}}function Ao(e){return function(t,n,r){for(var o=-1,i=Te(t),s=r(t),a=s.length;a--;){var c=s[e?a:++o];if(!1===n(i[c],c,i))break}return t}}function Do(e){return function(t){var n=rn(t=ya(t))?pn(t):o,r=n?n[0]:t.charAt(0),i=n?_o(n,1).join(""):t.slice(1);return r[e]()+i}}function Lo(e){return function(t){return Dt(Ja(za(t).replace(Je,"")),e,"")}}function xo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jn(e.prototype),r=e.apply(n,t);return Qs(r)?r:n}}function No(e){return function(t,n,r){var i=Te(t);if(!Hs(t)){var s=si(n,3);t=ka(t),n=function(e){return s(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[s?t[a]:a]:o}}function Fo(e){return ei((function(t){var n=t.length,r=n,s=Wn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Re(i);if(s&&!c&&"wrapper"==oi(a))var c=new Wn([],!0)}for(r=c?r:n;++r<n;){var u=oi(a=t[r]),l="wrapper"==u?ri(a):o;c=l&&_i(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[oi(l[0])].apply(c,l[3]):1==a.length&&_i(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Gs(r))return c.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function Uo(e,t,n,i,s,a,c,l,p,d){var f=t&u,h=1&t,g=2&t,m=24&t,y=512&t,v=g?o:xo(e);return function u(){for(var _=arguments.length,b=r(_),E=_;E--;)b[E]=arguments[E];if(m)var S=ii(u),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,S);if(i&&(b=Oo(b,i,s,m)),a&&(b=Co(b,a,c,m)),_-=w,m&&_<d){var T=an(b,S);return Ho(e,t,Uo,u.placeholder,n,b,T,l,p,d-_)}var O=h?n:this,C=g?O[e]:e;return _=b.length,l?b=function(e,t){for(var n=e.length,r=yn(t.length,n),i=Ro(e);r--;){var s=t[r];e[r]=mi(s,n)?i[s]:o}return e}(b,l):y&&_>1&&b.reverse(),f&&p<_&&(b.length=p),this&&this!==pt&&this instanceof u&&(C=v||xo(C)),C.apply(O,b)}}function jo(e,t){return function(n,r){return function(e,t,n,r){return vr(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function Bo(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=so(n),r=so(r)):(n=io(n),r=io(r)),i=e(n,r)}return i}}function Wo(e){return ei((function(t){return t=It(t,Xt(si())),$r((function(n){var r=this;return e(t,(function(e){return wt(e,r,n)}))}))}))}function zo(e,t){var n=(t=t===o?" ":so(t)).length;if(n<2)return n?Vr(t,e):t;var r=Vr(t,dt(e/ln(t)));return rn(t)?_o(pn(r),0,e).join(""):r.slice(0,e)}function Go(e){return function(t,n,i){return i&&"number"!=typeof i&&yi(t,n,i)&&(n=i=o),t=da(t),n===o?(n=t,t=0):n=da(n),function(e,t,n,o){for(var i=-1,s=mn(dt((t-e)/(n||1)),0),a=r(s);s--;)a[o?s:++i]=e,e+=n;return a}(t,n,i=i===o?t<n?1:-1:da(i),e)}}function qo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ga(t),n=ga(n)),e(t,n)}}function Ho(e,t,n,r,i,s,a,u,l,p){var d=8&t;t|=d?c:64,4&(t&=~(d?64:c))||(t&=-4);var f=[e,t,i,d?s:o,d?a:o,d?o:s,d?o:a,u,l,p],h=n.apply(o,f);return _i(e)&&Ri(h,f),h.placeholder=r,ki(h,e,t)}function Vo(e){var t=we[e];return function(e,n){if(e=ga(e),(n=null==n?0:yn(fa(n),292))&&Nt(e)){var r=(ya(e)+"e").split("e");return+((r=(ya(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var $o=On&&1/cn(new On([,-0]))[1]==l?function(e){return new On(e)}:ac;function Zo(e){return function(t){var n=di(t);return n==S?on(t):n==R?un(t):function(e,t){return It(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xo(e,t,n,s,l,p,d,f){var h=2&t;if(!h&&"function"!=typeof e)throw new Re(i);var g=s?s.length:0;if(g||(t&=-97,s=l=o),d=d===o?d:mn(fa(d),0),f=f===o?f:fa(f),g-=l?l.length:0,64&t){var m=s,y=l;s=l=o}var v=h?o:ri(e),_=[e,t,n,s,l,m,y,p,d,f];if(v&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,s=r==u&&8==n||r==u&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!s)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Oo(l,c,t[4]):c,e[4]=l?an(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Co(l,c,t[6]):c,e[6]=l?an(e[5],a):t[6]),(c=t[7])&&(e[7]=c),r&u&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(_,v),e=_[0],t=_[1],n=_[2],s=_[3],l=_[4],!(f=_[9]=_[9]===o?h?0:e.length:mn(_[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var i=xo(e);return function s(){for(var a=arguments.length,c=r(a),u=a,l=ii(s);u--;)c[u]=arguments[u];var p=a<3&&c[0]!==l&&c[a-1]!==l?[]:an(c,l);return(a-=p.length)<n?Ho(e,t,Uo,s.placeholder,o,c,p,o,o,n-a):wt(this&&this!==pt&&this instanceof s?i:e,this,c)}}(e,t,f):t!=c&&33!=t||l.length?Uo.apply(o,_):function(e,t,n,o){var i=1&t,s=xo(e);return function t(){for(var a=-1,c=arguments.length,u=-1,l=o.length,p=r(l+c),d=this&&this!==pt&&this instanceof t?s:e;++u<l;)p[u]=o[u];for(;c--;)p[u++]=arguments[++a];return wt(d,i?n:this,p)}}(e,t,n,s);else var b=function(e,t,n){var r=1&t,o=xo(e);return function t(){return(this&&this!==pt&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return ki((v?Kr:Ri)(b,_),e,t)}function Jo(e,t,n,r){return e===o||js(e,ke[n])&&!De.call(r,n)?t:e}function Ko(e,t,n,r,i,s){return Qs(e)&&Qs(t)&&(s.set(t,e),jr(e,t,o,Ko,s),s.delete(t)),e}function Yo(e){return ra(e)?o:e}function Qo(e,t,n,r,i,s){var a=1&n,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(e),p=s.get(t);if(l&&p)return l==t&&p==e;var d=-1,f=!0,h=2&n?new Vn:o;for(s.set(e,t),s.set(t,e);++d<c;){var g=e[d],m=t[d];if(r)var y=a?r(m,g,d,t,e,s):r(g,m,d,e,t,s);if(y!==o){if(y)continue;f=!1;break}if(h){if(!xt(t,(function(e,t){if(!Kt(h,t)&&(g===e||i(g,e,n,r,s)))return h.push(t)}))){f=!1;break}}else if(g!==m&&!i(g,m,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ei(e){return Pi(Ti(e,o,qi),e+"")}function ti(e){return Sr(e,ka,li)}function ni(e){return Sr(e,Ia,pi)}var ri=Mn?function(e){return Mn.get(e)}:ac;function oi(e){for(var t=e.name+"",n=Pn[t],r=De.call(Pn,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function ii(e){return(De.call(Un,"placeholder")?Un:e).placeholder}function si(){var e=Un.iteratee||rc;return e=e===rc?Dr:e,arguments.length?e(arguments[0],arguments[1]):e}function ai(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ci(e){for(var t=ka(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Si(o)]}return t}function ui(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Ar(n)?n:o}var li=gt?function(e){return null==e?[]:(e=Te(e),Mt(gt(e),(function(t){return Ve.call(e,t)})))}:hc,pi=gt?function(e){for(var t=[];e;)At(t,li(e)),e=qe(e);return t}:hc,di=wr;function fi(e,t,n){for(var r=-1,o=(t=yo(t,e)).length,i=!1;++r<o;){var s=Ni(t[r]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Ys(o)&&mi(s,o)&&(Gs(e)||zs(e))}function hi(e){return"function"!=typeof e.constructor||Ei(e)?{}:jn(qe(e))}function gi(e){return Gs(e)||zs(e)||!!(Ze&&e&&e[Ze])}function mi(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function yi(e,t,n){if(!Qs(n))return!1;var r=typeof t;return!!("number"==r?Hs(n)&&mi(t,n.length):"string"==r&&t in n)&&js(n[t],e)}function vi(e,t){if(Gs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!aa(e))||Q.test(e)||!Y.test(e)||null!=t&&e in Te(t)}function _i(e){var t=oi(e),n=Un[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=ri(n);return!!r&&e===r[0]}(Sn&&di(new Sn(new ArrayBuffer(1)))!=A||wn&&di(new wn)!=S||Tn&&di(Tn.resolve())!=O||On&&di(new On)!=R||Cn&&di(new Cn)!=k)&&(di=function(e){var t=wr(e),n=t==T?e.constructor:o,r=n?Fi(n):"";if(r)switch(r){case kn:return A;case In:return S;case An:return O;case Dn:return R;case Ln:return k}return t});var bi=Ie?Js:gc;function Ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ke)}function Si(e){return e==e&&!Qs(e)}function wi(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in Te(n))}}function Ti(e,t,n){return t=mn(t===o?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=mn(o.length-t,0),a=r(s);++i<s;)a[i]=o[t+i];i=-1;for(var c=r(t+1);++i<t;)c[i]=o[i];return c[t]=n(a),wt(e,this,c)}}function Oi(e,t){return t.length<2?e:Er(e,eo(t,0,-1))}function Ci(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ri=Ii(Kr),Mi=lt||function(e,t){return pt.setTimeout(e,t)},Pi=Ii(Yr);function ki(e,t,n){var r=t+"";return Pi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ot(h,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(ae):[]}(r),n)))}function Ii(e){var t=0,n=0;return function(){var r=vn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Ai(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var s=Hr(n,i),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Di,Li,xi=(Di=Ds((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,r,o){t.push(r?o.replace(le,"$1"):n||e)})),t}),(function(e){return 500===Li.size&&Li.clear(),e})),Li=Di.cache,Di);function Ni(e){if("string"==typeof e||aa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fi(e){if(null!=e){try{return Ae.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ui(e){if(e instanceof zn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ro(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ji=$r((function(e,t){return Vs(e)?ur(e,gr(t,1,Vs,!0)):[]})),Bi=$r((function(e,t){var n=Xi(t);return Vs(n)&&(n=o),Vs(e)?ur(e,gr(t,1,Vs,!0),si(n,2)):[]})),Wi=$r((function(e,t){var n=Xi(t);return Vs(n)&&(n=o),Vs(e)?ur(e,gr(t,1,Vs,!0),o,n):[]}));function zi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:fa(n);return o<0&&(o=mn(r+o,0)),Ut(e,si(t,3),o)}function Gi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=fa(n),i=n<0?mn(r+i,0):yn(i,r-1)),Ut(e,si(t,3),i,!0)}function qi(e){return null!=e&&e.length?gr(e,1):[]}function Hi(e){return e&&e.length?e[0]:o}var Vi=$r((function(e){var t=It(e,go);return t.length&&t[0]===e[0]?Rr(t):[]})),$i=$r((function(e){var t=Xi(e),n=It(e,go);return t===Xi(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Rr(n,si(t,2)):[]})),Zi=$r((function(e){var t=Xi(e),n=It(e,go);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Rr(n,o,t):[]}));function Xi(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Ji=$r(Ki);function Ki(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var Yi=ei((function(e,t){var n=null==e?0:e.length,r=or(e,t);return qr(e,It(t,(function(e){return mi(e,n)?+e:e})).sort(To)),r}));function Qi(e){return null==e?e:En.call(e)}var es=$r((function(e){return ao(gr(e,1,Vs,!0))})),ts=$r((function(e){var t=Xi(e);return Vs(t)&&(t=o),ao(gr(e,1,Vs,!0),si(t,2))})),ns=$r((function(e){var t=Xi(e);return t="function"==typeof t?t:o,ao(gr(e,1,Vs,!0),o,t)}));function rs(e){if(!e||!e.length)return[];var t=0;return e=Mt(e,(function(e){if(Vs(e))return t=mn(e.length,t),!0})),$t(t,(function(t){return It(e,Gt(t))}))}function os(e,t){if(!e||!e.length)return[];var n=rs(e);return null==t?n:It(n,(function(e){return wt(t,o,e)}))}var is=$r((function(e,t){return Vs(e)?ur(e,t):[]})),ss=$r((function(e){return fo(Mt(e,Vs))})),as=$r((function(e){var t=Xi(e);return Vs(t)&&(t=o),fo(Mt(e,Vs),si(t,2))})),cs=$r((function(e){var t=Xi(e);return t="function"==typeof t?t:o,fo(Mt(e,Vs),o,t)})),us=$r(rs),ls=$r((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,os(e,n)}));function ps(e){var t=Un(e);return t.__chain__=!0,t}function ds(e,t){return t(e)}var fs=ei((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof zn&&mi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ds,args:[i],thisArg:o}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)})),hs=Po((function(e,t,n){De.call(e,n)?++e[n]:rr(e,n,1)})),gs=No(zi),ms=No(Gi);function ys(e,t){return(Gs(e)?Ot:lr)(e,si(t,3))}function vs(e,t){return(Gs(e)?Ct:pr)(e,si(t,3))}var _s=Po((function(e,t,n){De.call(e,n)?e[n].push(t):rr(e,n,[t])})),bs=$r((function(e,t,n){var o=-1,i="function"==typeof t,s=Hs(e)?r(e.length):[];return lr(e,(function(e){s[++o]=i?wt(t,e,n):Mr(e,t,n)})),s})),Es=Po((function(e,t,n){rr(e,n,t)}));function Ss(e,t){return(Gs(e)?It:Nr)(e,si(t,3))}var ws=Po((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Ts=$r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&yi(e,t[0],t[1])?t=[]:n>2&&yi(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,gr(t,1),[])})),Os=ut||function(){return pt.Date.now()};function Cs(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,Xo(e,u,o,o,o,o,t)}function Rs(e,t){var n;if("function"!=typeof t)throw new Re(i);return e=fa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Ms=$r((function(e,t,n){var r=1;if(n.length){var o=an(n,ii(Ms));r|=c}return Xo(e,r,t,n,o)})),Ps=$r((function(e,t,n){var r=3;if(n.length){var o=an(n,ii(Ps));r|=c}return Xo(t,r,e,n,o)}));function ks(e,t,n){var r,s,a,c,u,l,p=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new Re(i);function g(t){var n=r,i=s;return r=s=o,p=t,c=e.apply(i,n)}function m(e){var n=e-l;return l===o||n>=t||n<0||f&&e-p>=a}function y(){var e=Os();if(m(e))return v(e);u=Mi(y,function(e){var n=t-(e-l);return f?yn(n,a-(e-p)):n}(e))}function v(e){return u=o,h&&r?g(e):(r=s=o,c)}function _(){var e=Os(),n=m(e);if(r=arguments,s=this,l=e,n){if(u===o)return function(e){return p=e,u=Mi(y,t),d?g(e):c}(l);if(f)return bo(u),u=Mi(y,t),g(l)}return u===o&&(u=Mi(y,t)),c}return t=ga(t)||0,Qs(n)&&(d=!!n.leading,a=(f="maxWait"in n)?mn(ga(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),_.cancel=function(){u!==o&&bo(u),p=0,r=l=s=u=o},_.flush=function(){return u===o?c:v(Os())},_}var Is=$r((function(e,t){return cr(e,1,t)})),As=$r((function(e,t,n){return cr(e,ga(t)||0,n)}));function Ds(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Re(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(Ds.Cache||Hn),n}function Ls(e){if("function"!=typeof e)throw new Re(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ds.Cache=Hn;var xs=vo((function(e,t){var n=(t=1==t.length&&Gs(t[0])?It(t[0],Xt(si())):It(gr(t,1),Xt(si()))).length;return $r((function(r){for(var o=-1,i=yn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return wt(e,this,r)}))})),Ns=$r((function(e,t){var n=an(t,ii(Ns));return Xo(e,c,o,t,n)})),Fs=$r((function(e,t){var n=an(t,ii(Fs));return Xo(e,64,o,t,n)})),Us=ei((function(e,t){return Xo(e,256,o,o,o,t)}));function js(e,t){return e===t||e!=e&&t!=t}var Bs=qo(Tr),Ws=qo((function(e,t){return e>=t})),zs=Pr(function(){return arguments}())?Pr:function(e){return ea(e)&&De.call(e,"callee")&&!Ve.call(e,"callee")},Gs=r.isArray,qs=yt?Xt(yt):function(e){return ea(e)&&wr(e)==I};function Hs(e){return null!=e&&Ys(e.length)&&!Js(e)}function Vs(e){return ea(e)&&Hs(e)}var $s=mt||gc,Zs=vt?Xt(vt):function(e){return ea(e)&&wr(e)==v};function Xs(e){if(!ea(e))return!1;var t=wr(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Js(e){if(!Qs(e))return!1;var t=wr(e);return t==b||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ks(e){return"number"==typeof e&&e==fa(e)}function Ys(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function Qs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ea(e){return null!=e&&"object"==typeof e}var ta=_t?Xt(_t):function(e){return ea(e)&&di(e)==S};function na(e){return"number"==typeof e||ea(e)&&wr(e)==w}function ra(e){if(!ea(e)||wr(e)!=T)return!1;var t=qe(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ae.call(n)==Fe}var oa=bt?Xt(bt):function(e){return ea(e)&&wr(e)==C},ia=Et?Xt(Et):function(e){return ea(e)&&di(e)==R};function sa(e){return"string"==typeof e||!Gs(e)&&ea(e)&&wr(e)==M}function aa(e){return"symbol"==typeof e||ea(e)&&wr(e)==P}var ca=St?Xt(St):function(e){return ea(e)&&Ys(e.length)&&!!ot[wr(e)]},ua=qo(xr),la=qo((function(e,t){return e<=t}));function pa(e){if(!e)return[];if(Hs(e))return sa(e)?pn(e):Ro(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=di(e);return(t==S?on:t==R?cn:ja)(e)}function da(e){return e?(e=ga(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fa(e){var t=da(e),n=t%1;return t==t?n?t-n:t:0}function ha(e){return e?ir(fa(e),0,f):0}function ga(e){if("number"==typeof e)return e;if(aa(e))return d;if(Qs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=he.test(e);return n||me.test(e)?ct(e.slice(2),n?2:8):fe.test(e)?d:+e}function ma(e){return Mo(e,Ia(e))}function ya(e){return null==e?"":so(e)}var va=ko((function(e,t){if(Ei(t)||Hs(t))Mo(t,ka(t),e);else for(var n in t)De.call(t,n)&&Qn(e,n,t[n])})),_a=ko((function(e,t){Mo(t,Ia(t),e)})),ba=ko((function(e,t,n,r){Mo(t,Ia(t),e,r)})),Ea=ko((function(e,t,n,r){Mo(t,ka(t),e,r)})),Sa=ei(or),wa=$r((function(e,t){e=Te(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&yi(t[0],t[1],i)&&(r=1);++n<r;)for(var s=t[n],a=Ia(s),c=-1,u=a.length;++c<u;){var l=a[c],p=e[l];(p===o||js(p,ke[l])&&!De.call(e,l))&&(e[l]=s[l])}return e})),Ta=$r((function(e){return e.push(o,Ko),wt(Da,o,e)}));function Oa(e,t,n){var r=null==e?o:Er(e,t);return r===o?n:r}function Ca(e,t){return null!=e&&fi(e,t,Cr)}var Ra=jo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),e[t]=n}),Qa(nc)),Ma=jo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),si),Pa=$r(Mr);function ka(e){return Hs(e)?Zn(e):Lr(e)}function Ia(e){return Hs(e)?Zn(e,!0):function(e){if(!Qs(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=Ei(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}(e)}var Aa=ko((function(e,t,n){jr(e,t,n)})),Da=ko((function(e,t,n,r){jr(e,t,n,r)})),La=ei((function(e,t){var n={};if(null==e)return n;var r=!1;t=It(t,(function(t){return t=yo(t,e),r||(r=t.length>1),t})),Mo(e,ni(e),n),r&&(n=sr(n,7,Yo));for(var o=t.length;o--;)co(n,t[o]);return n})),xa=ei((function(e,t){return null==e?{}:function(e,t){return zr(e,t,(function(t,n){return Ca(e,n)}))}(e,t)}));function Na(e,t){if(null==e)return{};var n=It(ni(e),(function(e){return[e]}));return t=si(t),zr(e,n,(function(e,n){return t(e,n[0])}))}var Fa=Zo(ka),Ua=Zo(Ia);function ja(e){return null==e?[]:Jt(e,ka(e))}var Ba=Lo((function(e,t,n){return t=t.toLowerCase(),e+(n?Wa(t):t)}));function Wa(e){return Xa(ya(e).toLowerCase())}function za(e){return(e=ya(e))&&e.replace(ve,en).replace(Ke,"")}var Ga=Lo((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),qa=Lo((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ha=Do("toLowerCase"),Va=Lo((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),$a=Lo((function(e,t,n){return e+(n?" ":"")+Xa(t)})),Za=Lo((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xa=Do("toUpperCase");function Ja(e,t,n){return e=ya(e),(t=n?o:t)===o?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Ka=$r((function(e,t){try{return wt(e,o,t)}catch(e){return Xs(e)?e:new Ee(e)}})),Ya=ei((function(e,t){return Ot(t,(function(t){t=Ni(t),rr(e,t,Ms(e[t],e))})),e}));function Qa(e){return function(){return e}}var ec=Fo(),tc=Fo(!0);function nc(e){return e}function rc(e){return Dr("function"==typeof e?e:sr(e,1))}var oc=$r((function(e,t){return function(n){return Mr(n,e,t)}})),ic=$r((function(e,t){return function(n){return Mr(e,n,t)}}));function sc(e,t,n){var r=ka(t),o=br(t,r);null!=n||Qs(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=br(t,ka(t)));var i=!(Qs(n)&&"chain"in n&&!n.chain),s=Js(e);return Ot(o,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=Ro(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,At([this.value()],arguments))})})),e}function ac(){}var cc=Wo(It),uc=Wo(Rt),lc=Wo(xt);function pc(e){return vi(e)?Gt(Ni(e)):function(e){return function(t){return Er(t,e)}}(e)}var dc=Go(),fc=Go(!0);function hc(){return[]}function gc(){return!1}var mc,yc=Bo((function(e,t){return e+t}),0),vc=Vo("ceil"),_c=Bo((function(e,t){return e/t}),1),bc=Vo("floor"),Ec=Bo((function(e,t){return e*t}),1),Sc=Vo("round"),wc=Bo((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Re(i);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Cs,Un.assign=va,Un.assignIn=_a,Un.assignInWith=ba,Un.assignWith=Ea,Un.at=Sa,Un.before=Rs,Un.bind=Ms,Un.bindAll=Ya,Un.bindKey=Ps,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Gs(e)?e:[e]},Un.chain=ps,Un.chunk=function(e,t,n){t=(n?yi(e,t,n):t===o)?1:mn(fa(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,a=0,c=r(dt(i/t));s<i;)c[a++]=eo(e,s,s+=t);return c},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return At(Gs(n)?Ro(n):[n],gr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=si();return e=t?It(e,(function(e){if("function"!=typeof e[1])throw new Re(i);return[n(e[0]),e[1]]})):[],$r((function(n){for(var r=-1;++r<t;){var o=e[r];if(wt(o[0],this,n))return wt(o[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=ka(e);return function(n){return ar(n,e,t)}}(sr(e,1))},Un.constant=Qa,Un.countBy=hs,Un.create=function(e,t){var n=jn(e);return null==t?n:nr(n,t)},Un.curry=function e(t,n,r){var i=Xo(t,8,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Un.curryRight=function e(t,n,r){var i=Xo(t,16,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Un.debounce=ks,Un.defaults=wa,Un.defaultsDeep=Ta,Un.defer=Is,Un.delay=As,Un.difference=ji,Un.differenceBy=Bi,Un.differenceWith=Wi,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?eo(e,(t=n||t===o?1:fa(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?eo(e,0,(t=r-(t=n||t===o?1:fa(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?lo(e,si(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?lo(e,si(t,3),!0):[]},Un.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&yi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=fa(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:fa(r))<0&&(r+=i),r=n>r?0:ha(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Gs(e)?Mt:hr)(e,si(t,3))},Un.flatMap=function(e,t){return gr(Ss(e,t),1)},Un.flatMapDeep=function(e,t){return gr(Ss(e,t),l)},Un.flatMapDepth=function(e,t,n){return n=n===o?1:fa(n),gr(Ss(e,t),n)},Un.flatten=qi,Un.flattenDeep=function(e){return null!=e&&e.length?gr(e,l):[]},Un.flattenDepth=function(e,t){return null!=e&&e.length?gr(e,t=t===o?1:fa(t)):[]},Un.flip=function(e){return Xo(e,512)},Un.flow=ec,Un.flowRight=tc,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Un.functions=function(e){return null==e?[]:br(e,ka(e))},Un.functionsIn=function(e){return null==e?[]:br(e,Ia(e))},Un.groupBy=_s,Un.initial=function(e){return null!=e&&e.length?eo(e,0,-1):[]},Un.intersection=Vi,Un.intersectionBy=$i,Un.intersectionWith=Zi,Un.invert=Ra,Un.invertBy=Ma,Un.invokeMap=bs,Un.iteratee=rc,Un.keyBy=Es,Un.keys=ka,Un.keysIn=Ia,Un.map=Ss,Un.mapKeys=function(e,t){var n={};return t=si(t,3),vr(e,(function(e,r,o){rr(n,t(e,r,o),e)})),n},Un.mapValues=function(e,t){var n={};return t=si(t,3),vr(e,(function(e,r,o){rr(n,r,t(e,r,o))})),n},Un.matches=function(e){return Fr(sr(e,1))},Un.matchesProperty=function(e,t){return Ur(e,sr(t,1))},Un.memoize=Ds,Un.merge=Aa,Un.mergeWith=Da,Un.method=oc,Un.methodOf=ic,Un.mixin=sc,Un.negate=Ls,Un.nthArg=function(e){return e=fa(e),$r((function(t){return Br(t,e)}))},Un.omit=La,Un.omitBy=function(e,t){return Na(e,Ls(si(t)))},Un.once=function(e){return Rs(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Gs(t)||(t=null==t?[]:[t]),Gs(n=r?o:n)||(n=null==n?[]:[n]),Wr(e,t,n))},Un.over=cc,Un.overArgs=xs,Un.overEvery=uc,Un.overSome=lc,Un.partial=Ns,Un.partialRight=Fs,Un.partition=ws,Un.pick=xa,Un.pickBy=Na,Un.property=pc,Un.propertyOf=function(e){return function(t){return null==e?o:Er(e,t)}},Un.pull=Ji,Un.pullAll=Ki,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,si(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,o,n):e},Un.pullAt=Yi,Un.range=dc,Un.rangeRight=fc,Un.rearg=Us,Un.reject=function(e,t){return(Gs(e)?Mt:hr)(e,Ls(si(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=si(t,3);++r<i;){var s=e[r];t(s,r,e)&&(n.push(s),o.push(r))}return qr(e,o),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Re(i);return $r(e,t=t===o?t:fa(t))},Un.reverse=Qi,Un.sampleSize=function(e,t,n){return t=(n?yi(e,t,n):t===o)?1:fa(t),(Gs(e)?Jn:Xr)(e,t)},Un.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Jr(e,t,n,r)},Un.shuffle=function(e){return(Gs(e)?Kn:Qr)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&yi(e,t,n)?(t=0,n=r):(t=null==t?0:fa(t),n=n===o?r:fa(n)),eo(e,t,n)):[]},Un.sortBy=Ts,Un.sortedUniq=function(e){return e&&e.length?oo(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?oo(e,si(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&yi(e,t,n)&&(t=n=o),(n=n===o?f:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=so(t))&&rn(e)?_o(pn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Re(i);return t=null==t?0:mn(fa(t),0),$r((function(n){var r=n[t],o=_o(n,0,t);return r&&At(o,r),wt(e,this,o)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?eo(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?eo(e,0,(t=n||t===o?1:fa(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?eo(e,(t=r-(t=n||t===o?1:fa(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?lo(e,si(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?lo(e,si(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Re(i);return Qs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),ks(e,t,{leading:r,maxWait:t,trailing:o})},Un.thru=ds,Un.toArray=pa,Un.toPairs=Fa,Un.toPairsIn=Ua,Un.toPath=function(e){return Gs(e)?It(e,Ni):aa(e)?[e]:Ro(xi(ya(e)))},Un.toPlainObject=ma,Un.transform=function(e,t,n){var r=Gs(e),o=r||$s(e)||ca(e);if(t=si(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:Qs(e)&&Js(i)?jn(qe(e)):{}}return(o?Ot:vr)(e,(function(e,r,o){return t(n,e,r,o)})),n},Un.unary=function(e){return Cs(e,1)},Un.union=es,Un.unionBy=ts,Un.unionWith=ns,Un.uniq=function(e){return e&&e.length?ao(e):[]},Un.uniqBy=function(e,t){return e&&e.length?ao(e,si(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?ao(e,o,t):[]},Un.unset=function(e,t){return null==e||co(e,t)},Un.unzip=rs,Un.unzipWith=os,Un.update=function(e,t,n){return null==e?e:uo(e,t,mo(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:uo(e,t,mo(n),r)},Un.values=ja,Un.valuesIn=function(e){return null==e?[]:Jt(e,Ia(e))},Un.without=is,Un.words=Ja,Un.wrap=function(e,t){return Ns(mo(t),e)},Un.xor=ss,Un.xorBy=as,Un.xorWith=cs,Un.zip=us,Un.zipObject=function(e,t){return ho(e||[],t||[],Qn)},Un.zipObjectDeep=function(e,t){return ho(e||[],t||[],Jr)},Un.zipWith=ls,Un.entries=Fa,Un.entriesIn=Ua,Un.extend=_a,Un.extendWith=ba,sc(Un,Un),Un.add=yc,Un.attempt=Ka,Un.camelCase=Ba,Un.capitalize=Wa,Un.ceil=vc,Un.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=ga(n))==n?n:0),t!==o&&(t=(t=ga(t))==t?t:0),ir(ga(e),t,n)},Un.clone=function(e){return sr(e,4)},Un.cloneDeep=function(e){return sr(e,5)},Un.cloneDeepWith=function(e,t){return sr(e,5,t="function"==typeof t?t:o)},Un.cloneWith=function(e,t){return sr(e,4,t="function"==typeof t?t:o)},Un.conformsTo=function(e,t){return null==t||ar(e,t,ka(t))},Un.deburr=za,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=_c,Un.endsWith=function(e,t,n){e=ya(e),t=so(t);var r=e.length,i=n=n===o?r:ir(fa(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Un.eq=js,Un.escape=function(e){return(e=ya(e))&&Z.test(e)?e.replace(V,tn):e},Un.escapeRegExp=function(e){return(e=ya(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Un.every=function(e,t,n){var r=Gs(e)?Rt:dr;return n&&yi(e,t,n)&&(t=o),r(e,si(t,3))},Un.find=gs,Un.findIndex=zi,Un.findKey=function(e,t){return Ft(e,si(t,3),vr)},Un.findLast=ms,Un.findLastIndex=Gi,Un.findLastKey=function(e,t){return Ft(e,si(t,3),_r)},Un.floor=bc,Un.forEach=ys,Un.forEachRight=vs,Un.forIn=function(e,t){return null==e?e:mr(e,si(t,3),Ia)},Un.forInRight=function(e,t){return null==e?e:yr(e,si(t,3),Ia)},Un.forOwn=function(e,t){return e&&vr(e,si(t,3))},Un.forOwnRight=function(e,t){return e&&_r(e,si(t,3))},Un.get=Oa,Un.gt=Bs,Un.gte=Ws,Un.has=function(e,t){return null!=e&&fi(e,t,Or)},Un.hasIn=Ca,Un.head=Hi,Un.identity=nc,Un.includes=function(e,t,n,r){e=Hs(e)?e:ja(e),n=n&&!r?fa(n):0;var o=e.length;return n<0&&(n=mn(o+n,0)),sa(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&jt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:fa(n);return o<0&&(o=mn(r+o,0)),jt(e,t,o)},Un.inRange=function(e,t,n){return t=da(t),n===o?(n=t,t=0):n=da(n),function(e,t,n){return e>=yn(t,n)&&e<mn(t,n)}(e=ga(e),t,n)},Un.invoke=Pa,Un.isArguments=zs,Un.isArray=Gs,Un.isArrayBuffer=qs,Un.isArrayLike=Hs,Un.isArrayLikeObject=Vs,Un.isBoolean=function(e){return!0===e||!1===e||ea(e)&&wr(e)==y},Un.isBuffer=$s,Un.isDate=Zs,Un.isElement=function(e){return ea(e)&&1===e.nodeType&&!ra(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Hs(e)&&(Gs(e)||"string"==typeof e||"function"==typeof e.splice||$s(e)||ca(e)||zs(e)))return!e.length;var t=di(e);if(t==S||t==R)return!e.size;if(Ei(e))return!Lr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return kr(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?kr(e,t,o,n):!!r},Un.isError=Xs,Un.isFinite=function(e){return"number"==typeof e&&Nt(e)},Un.isFunction=Js,Un.isInteger=Ks,Un.isLength=Ys,Un.isMap=ta,Un.isMatch=function(e,t){return e===t||Ir(e,t,ci(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Ir(e,t,ci(t),n)},Un.isNaN=function(e){return na(e)&&e!=+e},Un.isNative=function(e){if(bi(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ar(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=na,Un.isObject=Qs,Un.isObjectLike=ea,Un.isPlainObject=ra,Un.isRegExp=oa,Un.isSafeInteger=function(e){return Ks(e)&&e>=-9007199254740991&&e<=p},Un.isSet=ia,Un.isString=sa,Un.isSymbol=aa,Un.isTypedArray=ca,Un.isUndefined=function(e){return e===o},Un.isWeakMap=function(e){return ea(e)&&di(e)==k},Un.isWeakSet=function(e){return ea(e)&&"[object WeakSet]"==wr(e)},Un.join=function(e,t){return null==e?"":qt.call(e,t)},Un.kebabCase=Ga,Un.last=Xi,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=fa(n))<0?mn(r+i,0):yn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Ut(e,Wt,i,!0)},Un.lowerCase=qa,Un.lowerFirst=Ha,Un.lt=ua,Un.lte=la,Un.max=function(e){return e&&e.length?fr(e,nc,Tr):o},Un.maxBy=function(e,t){return e&&e.length?fr(e,si(t,2),Tr):o},Un.mean=function(e){return zt(e,nc)},Un.meanBy=function(e,t){return zt(e,si(t,2))},Un.min=function(e){return e&&e.length?fr(e,nc,xr):o},Un.minBy=function(e,t){return e&&e.length?fr(e,si(t,2),xr):o},Un.stubArray=hc,Un.stubFalse=gc,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Ec,Un.nth=function(e,t){return e&&e.length?Br(e,fa(t)):o},Un.noConflict=function(){return pt._===this&&(pt._=Ue),this},Un.noop=ac,Un.now=Os,Un.pad=function(e,t,n){e=ya(e);var r=(t=fa(t))?ln(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return zo(ft(o),n)+e+zo(dt(o),n)},Un.padEnd=function(e,t,n){e=ya(e);var r=(t=fa(t))?ln(e):0;return t&&r<t?e+zo(t-r,n):e},Un.padStart=function(e,t,n){e=ya(e);var r=(t=fa(t))?ln(e):0;return t&&r<t?zo(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),_n(ya(e).replace(re,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&yi(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=da(e),t===o?(t=e,e=0):t=da(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=bn();return yn(e+i*(t-e+at("1e-"+((i+"").length-1))),t)}return Hr(e,t)},Un.reduce=function(e,t,n){var r=Gs(e)?Dt:Ht,o=arguments.length<3;return r(e,si(t,4),n,o,lr)},Un.reduceRight=function(e,t,n){var r=Gs(e)?Lt:Ht,o=arguments.length<3;return r(e,si(t,4),n,o,pr)},Un.repeat=function(e,t,n){return t=(n?yi(e,t,n):t===o)?1:fa(t),Vr(ya(e),t)},Un.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,i=(t=yo(t,e)).length;for(i||(i=1,e=o);++r<i;){var s=null==e?o:e[Ni(t[r])];s===o&&(r=i,s=n),e=Js(s)?s.call(e):s}return e},Un.round=Sc,Un.runInContext=e,Un.sample=function(e){return(Gs(e)?Xn:Zr)(e)},Un.size=function(e){if(null==e)return 0;if(Hs(e))return sa(e)?ln(e):e.length;var t=di(e);return t==S||t==R?e.size:Lr(e).length},Un.snakeCase=Va,Un.some=function(e,t,n){var r=Gs(e)?xt:to;return n&&yi(e,t,n)&&(t=o),r(e,si(t,3))},Un.sortedIndex=function(e,t){return no(e,t)},Un.sortedIndexBy=function(e,t,n){return ro(e,t,si(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=no(e,t);if(r<n&&js(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return no(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return ro(e,t,si(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=no(e,t,!0)-1;if(js(e[n],t))return n}return-1},Un.startCase=$a,Un.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:ir(fa(n),0,e.length),t=so(t),e.slice(n,n+t.length)==t},Un.subtract=wc,Un.sum=function(e){return e&&e.length?Vt(e,nc):0},Un.sumBy=function(e,t){return e&&e.length?Vt(e,si(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&yi(e,t,n)&&(t=o),e=ya(e),t=ba({},t,r,Jo);var i,s,a=ba({},t.imports,r.imports,Jo),c=ka(a),u=Jt(a,c),l=0,p=t.interpolate||_e,d="__p += '",f=Oe((t.escape||_e).source+"|"+p.source+"|"+(p===K?pe:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),h="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(f,(function(t,n,r,o,a,c){return r||(r=o),d+=e.slice(l,c).replace(be,nn),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var g=De.call(t,"variable")&&t.variable;if(g){if(ue.test(g))throw new Ee("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(z,""):d).replace(G,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Ka((function(){return Se(c,h+"return "+d).apply(o,u)}));if(m.source=d,Xs(m))throw m;return m},Un.times=function(e,t){if((e=fa(e))<1||e>p)return[];var n=f,r=yn(e,f);t=si(t),e-=f;for(var o=$t(r,t);++n<e;)t(n);return o},Un.toFinite=da,Un.toInteger=fa,Un.toLength=ha,Un.toLower=function(e){return ya(e).toLowerCase()},Un.toNumber=ga,Un.toSafeInteger=function(e){return e?ir(fa(e),-9007199254740991,p):0===e?e:0},Un.toString=ya,Un.toUpper=function(e){return ya(e).toUpperCase()},Un.trim=function(e,t,n){if((e=ya(e))&&(n||t===o))return Zt(e);if(!e||!(t=so(t)))return e;var r=pn(e),i=pn(t);return _o(r,Yt(r,i),Qt(r,i)+1).join("")},Un.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===o))return e.slice(0,dn(e)+1);if(!e||!(t=so(t)))return e;var r=pn(e);return _o(r,0,Qt(r,pn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===o))return e.replace(re,"");if(!e||!(t=so(t)))return e;var r=pn(e);return _o(r,Yt(r,pn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(Qs(t)){var i="separator"in t?t.separator:i;n="length"in t?fa(t.length):n,r="omission"in t?so(t.omission):r}var s=(e=ya(e)).length;if(rn(e)){var a=pn(e);s=a.length}if(n>=s)return e;var c=n-ln(r);if(c<1)return r;var u=a?_o(a,0,c).join(""):e.slice(0,c);if(i===o)return u+r;if(a&&(c+=u.length-c),oa(i)){if(e.slice(c).search(i)){var l,p=u;for(i.global||(i=Oe(i.source,ya(de.exec(i))+"g")),i.lastIndex=0;l=i.exec(p);)var d=l.index;u=u.slice(0,d===o?c:d)}}else if(e.indexOf(so(i),c)!=c){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},Un.unescape=function(e){return(e=ya(e))&&$.test(e)?e.replace(H,fn):e},Un.uniqueId=function(e){var t=++Le;return ya(e)+t},Un.upperCase=Za,Un.upperFirst=Xa,Un.each=ys,Un.eachRight=vs,Un.first=Hi,sc(Un,(mc={},vr(Un,(function(e,t){De.call(Un.prototype,t)||(mc[t]=e)})),mc),{chain:!1}),Un.VERSION="4.17.21",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Ot(["drop","take"],(function(e,t){zn.prototype[e]=function(n){n=n===o?1:mn(fa(n),0);var r=this.__filtered__&&!t?new zn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,f),type:e+(r.__dir__<0?"Right":"")}),r},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ot(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:si(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ot(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),Ot(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(nc)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=$r((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Mr(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(Ls(si(e)))},zn.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(f)},vr(zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Un[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);i&&(Un.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,c=t instanceof zn,u=a[0],l=c||Gs(t),p=function(e){var t=i.apply(Un,At([e],a));return r&&d?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,f=!!this.__actions__.length,h=s&&!d,g=c&&!f;if(!s&&l){t=g?t:new zn(this);var m=e.apply(t,a);return m.__actions__.push({func:ds,args:[p],thisArg:o}),new Wn(m,d)}return h&&g?e.apply(this,a):(m=this.thru(p),h?r?m.value()[0]:m.value():m)})})),Ot(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Me[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Gs(o)?o:[],e)}return this[n]((function(n){return t.apply(Gs(n)?n:[],e)}))}})),vr(zn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";De.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[Uo(o,2).name]=[{name:"wrapper",func:o}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Ro(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ro(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ro(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Gs(e),r=t<0,o=n?e.length:0,i=function(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=yn(t,e+s);break;case"takeRight":e=mn(e,t-s)}}return{start:e,end:t}}(0,o,this.__views__),s=i.start,a=i.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,p=l.length,d=0,f=yn(c,this.__takeCount__);if(!n||!r&&o==c&&f==c)return po(e,this.__actions__);var h=[];e:for(;c--&&d<f;){for(var g=-1,m=e[u+=t];++g<p;){var y=l[g],v=y.iteratee,_=y.type,b=v(m);if(2==_)m=b;else if(!b){if(1==_)continue e;break e}}h[d++]=m}return h},Un.prototype.at=fs,Un.prototype.chain=function(){return ps(this)},Un.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===o&&(this.__values__=pa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof Bn;){var r=Ui(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:ds,args:[Qi],thisArg:o}),new Wn(t,this.__chain__)}return this.thru(Qi)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return po(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Xe&&(Un.prototype[Xe]=function(){return this}),Un}();pt._=hn,(r=function(){return hn}.call(t,n,t,e))===o||(e.exports=r)}.call(this)},938:e=>{"use strict";function t(e){return"function"==typeof e}var n=console.error.bind(console);function r(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function o(e){e&&e.logger&&(t(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function i(e,o,i){if(e&&e[o]){if(!i)return n("no wrapper function"),void n((new Error).stack);if(t(e[o])&&t(i)){var s=e[o],a=i(s,o);return r(a,"__original",s),r(a,"__unwrap",(function(){e[o]===a&&r(e,o,s)})),r(a,"__wrapped",!0),r(e,o,a),a}n("original object and wrapper must be functions")}else n("no original function "+o+" to wrap")}function s(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}o.wrap=i,o.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){i(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},o.unwrap=s,o.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t)}))})):n("must provide one or more functions to unwrap on modules")},e.exports=o},950:()=>{"use strict";const e=globalThis;function t(t){return(e.__Zone_symbol_prefix||"__zone_symbol__")+t}function n(){const n=e.performance;function r(e){n&&n.mark&&n.mark(e)}function o(e,t){n&&n.measure&&n.measure(e,t)}r("Zone");class i{static#e=(()=>this.__symbol__=t)();static assertZonePatched(){if(e.Promise!==M.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let e=i.current;for(;e.parent;)e=e.parent;return e}static get current(){return k.zone}static get currentTask(){return I}static __load_patch(n,s){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(M.hasOwnProperty(n)){const r=!0===e[t("forceDuplicateZoneCheck")];if(!a&&r)throw Error("Already loaded patch: "+n)}else if(!e["__Zone_disable_"+n]){const t="Zone:"+n;r(t),M[n]=s(e,i,P),o(t,t)}}get parent(){return this._parent}get name(){return this._name}constructor(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new a(this,this._parent&&this._parent._zoneDelegate,t)}get(e){const t=this.getZoneWith(e);if(t)return t._properties[e]}getZoneWith(e){let t=this;for(;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null}fork(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)}wrap(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);const n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}}run(e,t,n,r){k={parent:k,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{k=k.parent}}runGuarded(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;k={parent:k,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{k=k.parent}}runTask(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");const r=e,{type:o,data:{isPeriodic:i=!1,isRefreshable:s=!1}={}}=e;if(e.state===_&&(o===R||o===C))return;const a=e.state!=S;a&&r._transitionTo(S,E);const c=I;I=r,k={parent:k,zone:this};try{o!=C||!e.data||i||s||(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,r,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{const t=e.state;if(t!==_&&t!==T)if(o==R||i||s&&t===b)a&&r._transitionTo(E,S,b);else{const e=r._zoneDelegates;this._updateTaskCount(r,-1),a&&r._transitionTo(_,S,_),s&&(r._zoneDelegates=e)}k=k.parent,I=c}}scheduleTask(e){if(e.zone&&e.zone!==this){let t=this;for(;t;){if(t===e.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${e.zone.name}`);t=t.parent}}e._transitionTo(b,_);const t=[];e._zoneDelegates=t,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(T,b,_),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===t&&this._updateTaskCount(e,1),e.state==b&&e._transitionTo(E,b),e}scheduleMicroTask(e,t,n,r){return this.scheduleTask(new c(O,e,t,n,r,void 0))}scheduleMacroTask(e,t,n,r,o){return this.scheduleTask(new c(C,e,t,n,r,o))}scheduleEventTask(e,t,n,r,o){return this.scheduleTask(new c(R,e,t,n,r,o))}cancelTask(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");if(e.state===E||e.state===S){e._transitionTo(w,E,S);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(T,w),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(_,w),e.runCount=-1,e}}_updateTaskCount(e,t){const n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(let r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)}}const s={name:"",onHasTask:(e,t,n,r)=>e.hasTask(n,r),onScheduleTask:(e,t,n,r)=>e.scheduleTask(n,r),onInvokeTask:(e,t,n,r,o,i)=>e.invokeTask(n,r,o,i),onCancelTask:(e,t,n,r)=>e.cancelTask(n,r)};class a{get zone(){return this._zone}constructor(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this._zone:t._forkCurrZone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this._zone:t._interceptCurrZone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this._zone:t._invokeCurrZone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this._zone:t._handleErrorCurrZone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this._zone:t._scheduleTaskCurrZone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this._zone:t._invokeTaskCurrZone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this._zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=n&&n.onHasTask,o=t&&t._hasTaskZS;(r||o)&&(this._hasTaskZS=r?n:s,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,n.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this._zone),n.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this._zone),n.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this._zone))}fork(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new i(e,t)}intercept(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t}invoke(e,t,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,o):t.apply(n,r)}handleError(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)}scheduleTask(e,t){let n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t),n||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=O)throw new Error("Task is missing scheduleFn.");m(t)}return n}invokeTask(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)}cancelTask(e,t){let n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n}hasTask(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}}_updateTaskCount(e,t){const n=this._taskCounts,r=n[e],o=n[e]=r+t;if(o<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==o){const t={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};this.hasTask(this._zone,t)}}}class c{constructor(t,n,r,o,i,s){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=t,this.source=n,this.data=o,this.scheduleFn=i,this.cancelFn=s,!r)throw new Error("callback is not defined");this.callback=r;const a=this;t===R&&o&&o.useG?this.invoke=c.invokeTask:this.invoke=function(){return c.invokeTask.call(e,a,this,arguments)}}static invokeTask(e,t,n){e||(e=this),A++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==A&&y(),A--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(_,b)}_transitionTo(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(`${this.type} '${this.source}': can not transition to '${e}', expecting state '${t}'${n?" or '"+n+"'":""}, was '${this._state}'.`);this._state=e,e==_&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const u=t("setTimeout"),l=t("Promise"),p=t("then");let d,f=[],h=!1;function g(t){if(d||e[l]&&(d=e[l].resolve(0)),d){let e=d[p];e||(e=d.then),e.call(d,t)}else e[u](t,0)}function m(e){0===A&&0===f.length&&g(y),e&&f.push(e)}function y(){if(!h){for(h=!0;f.length;){const e=f;f=[];for(let t=0;t<e.length;t++){const n=e[t];try{n.zone.runTask(n,null,null)}catch(e){P.onUnhandledError(e)}}}P.microtaskDrainDone(),h=!1}}const v={name:"NO ZONE"},_="notScheduled",b="scheduling",E="scheduled",S="running",w="canceling",T="unknown",O="microTask",C="macroTask",R="eventTask",M={},P={symbol:t,currentZoneFrame:()=>k,onUnhandledError:D,microtaskDrainDone:D,scheduleMicroTask:m,showUncaughtError:()=>!i[t("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:D,patchMethod:()=>D,bindArguments:()=>[],patchThen:()=>D,patchMacroTask:()=>D,patchEventPrototype:()=>D,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>D,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>D,wrapWithCurrentZone:()=>D,filterProperties:()=>[],attachOriginToPatched:()=>D,_redefineProperty:()=>D,patchCallbacks:()=>D,nativeScheduleMicroTask:g};let k={parent:null,zone:new i(null,null)},I=null,A=0;function D(){}return o("Zone","Zone"),i}const r=Object.getOwnPropertyDescriptor,o=Object.defineProperty,i=Object.getPrototypeOf,s=Object.create,a=Array.prototype.slice,c="addEventListener",u="removeEventListener",l=t(c),p=t(u),d="true",f="false",h=t("");function g(e,t){return Zone.current.wrap(e,t)}function m(e,t,n,r,o){return Zone.current.scheduleMacroTask(e,t,n,r,o)}const y=t,v="undefined"!=typeof window,_=v?window:void 0,b=v&&_||globalThis;function E(e,t){for(let n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=g(e[n],t+"_"+n));return e}function S(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}const w="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,T=!("nw"in b)&&void 0!==b.process&&"[object process]"===b.process.toString(),O=!T&&!w&&!(!v||!_.HTMLElement),C=void 0!==b.process&&"[object process]"===b.process.toString()&&!w&&!(!v||!_.HTMLElement),R={},M=y("enable_beforeunload"),P=function(e){if(!(e=e||b.event))return;let t=R[e.type];t||(t=R[e.type]=y("ON_PROPERTY"+e.type));const n=this||e.target||b,r=n[t];let o;if(O&&n===_&&"error"===e.type){const t=e;o=r&&r.call(this,t.message,t.filename,t.lineno,t.colno,t.error),!0===o&&e.preventDefault()}else o=r&&r.apply(this,arguments),"beforeunload"===e.type&&b[M]&&"string"==typeof o?e.returnValue=o:null==o||o||e.preventDefault();return o};function k(e,t,n){let i=r(e,t);if(!i&&n&&r(n,t)&&(i={enumerable:!0,configurable:!0}),!i||!i.configurable)return;const s=y("on"+t+"patched");if(e.hasOwnProperty(s)&&e[s])return;delete i.writable,delete i.value;const a=i.get,c=i.set,u=t.slice(2);let l=R[u];l||(l=R[u]=y("ON_PROPERTY"+u)),i.set=function(t){let n=this;n||e!==b||(n=b),n&&("function"==typeof n[l]&&n.removeEventListener(u,P),c&&c.call(n,null),n[l]=t,"function"==typeof t&&n.addEventListener(u,P,!1))},i.get=function(){let n=this;if(n||e!==b||(n=b),!n)return null;const r=n[l];if(r)return r;if(a){let e=a.call(this);if(e)return i.set.call(this,e),"function"==typeof n.removeAttribute&&n.removeAttribute(t),e}return null},o(e,t,i),e[s]=!0}function I(e,t,n){if(t)for(let r=0;r<t.length;r++)k(e,"on"+t[r],n);else{const t=[];for(const n in e)"on"==n.slice(0,2)&&t.push(n);for(let r=0;r<t.length;r++)k(e,t[r],n)}}const A=y("originalInstance");function D(e){const t=b[e];if(!t)return;b[y(e)]=t,b[e]=function(){const n=E(arguments,e);switch(n.length){case 0:this[A]=new t;break;case 1:this[A]=new t(n[0]);break;case 2:this[A]=new t(n[0],n[1]);break;case 3:this[A]=new t(n[0],n[1],n[2]);break;case 4:this[A]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},N(b[e],t);const n=new t((function(){}));let r;for(r in n)"XMLHttpRequest"===e&&"responseBlob"===r||function(t){"function"==typeof n[t]?b[e].prototype[t]=function(){return this[A][t].apply(this[A],arguments)}:o(b[e].prototype,t,{set:function(n){"function"==typeof n?(this[A][t]=g(n,e+"."+t),N(this[A][t],n)):this[A][t]=n},get:function(){return this[A][t]}})}(r);for(r in t)"prototype"!==r&&t.hasOwnProperty(r)&&(b[e][r]=t[r])}function L(e,t,n){let o=e;for(;o&&!o.hasOwnProperty(t);)o=i(o);!o&&e[t]&&(o=e);const s=y(t);let a=null;if(o&&(!(a=o[s])||!o.hasOwnProperty(s))&&(a=o[s]=o[t],S(o&&r(o,t)))){const e=n(a,s,t);o[t]=function(){return e(this,arguments)},N(o[t],a)}return a}function x(e,t,n){let r=null;function o(e){const t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},r.apply(t.target,t.args),e}r=L(e,t,(e=>function(t,r){const i=n(t,r);return i.cbIdx>=0&&"function"==typeof r[i.cbIdx]?m(i.name,r[i.cbIdx],i,o):e.apply(t,r)}))}function N(e,t){e[y("OriginalDelegate")]=t}let F=!1,U=!1;function j(){try{const e=_.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}function B(){if(F)return U;F=!0;try{const e=_.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(U=!0)}catch(e){}return U}function W(e){return"function"==typeof e}function z(e){return"number"==typeof e}let G=!1;if("undefined"!=typeof window)try{const e=Object.defineProperty({},"passive",{get:function(){G=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){G=!1}const q={useG:!0},H={},V={},$=new RegExp("^"+h+"(\\w+)(true|false)$"),Z=y("propagationStopped");function X(e,t){const n=(t?t(e):e)+f,r=(t?t(e):e)+d,o=h+n,i=h+r;H[e]={},H[e][f]=o,H[e][d]=i}function J(e,t,n,r){const o=r&&r.add||c,s=r&&r.rm||u,a=r&&r.listeners||"eventListeners",l=r&&r.rmAll||"removeAllListeners",p=y(o),g="."+o+":",m="prependListener",v="."+m+":",_=function(e,t,n){if(e.isRemoved)return;const r=e.callback;let o;"object"==typeof r&&r.handleEvent&&(e.callback=e=>r.handleEvent(e),e.originalDelegate=r);try{e.invoke(e,t,[n])}catch(e){o=e}const i=e.options;if(i&&"object"==typeof i&&i.once){const r=e.originalDelegate?e.originalDelegate:e.callback;t[s].call(t,n.type,r,i)}return o};function b(n,r,o){if(!(r=r||e.event))return;const i=n||r.target||e,s=i[H[r.type][o?d:f]];if(s){const e=[];if(1===s.length){const t=_(s[0],i,r);t&&e.push(t)}else{const t=s.slice();for(let n=0;n<t.length&&(!r||!0!==r[Z]);n++){const o=_(t[n],i,r);o&&e.push(o)}}if(1===e.length)throw e[0];for(let n=0;n<e.length;n++){const r=e[n];t.nativeScheduleMicroTask((()=>{throw r}))}}}const E=function(e){return b(this,e,!1)},S=function(e){return b(this,e,!0)};function w(t,n){if(!t)return!1;let r=!0;n&&void 0!==n.useG&&(r=n.useG);const c=n&&n.vh;let u=!0;n&&void 0!==n.chkDup&&(u=n.chkDup);let _=!1;n&&void 0!==n.rt&&(_=n.rt);let b=t;for(;b&&!b.hasOwnProperty(o);)b=i(b);if(!b&&t[o]&&(b=t),!b)return!1;if(b[p])return!1;const w=n&&n.eventNameToString,O={},C=b[p]=b[o],R=b[y(s)]=b[s],M=b[y(a)]=b[a],P=b[y(l)]=b[l];let k;n&&n.prepend&&(k=b[y(n.prepend)]=b[n.prepend]);const I=r?function(e){if(!O.isExisting)return C.call(O.target,O.eventName,O.capture?S:E,O.options)}:function(e){return C.call(O.target,O.eventName,e.invoke,O.options)},A=r?function(e){if(!e.isRemoved){const t=H[e.eventName];let n;t&&(n=t[e.capture?d:f]);const r=n&&e.target[n];if(r)for(let t=0;t<r.length;t++)if(r[t]===e){r.splice(t,1),e.isRemoved=!0,e.removeAbortListener&&(e.removeAbortListener(),e.removeAbortListener=null),0===r.length&&(e.allRemoved=!0,e.target[n]=null);break}}if(e.allRemoved)return R.call(e.target,e.eventName,e.capture?S:E,e.options)}:function(e){return R.call(e.target,e.eventName,e.invoke,e.options)},D=n&&n.diff?n.diff:function(e,t){const n=typeof t;return"function"===n&&e.callback===t||"object"===n&&e.originalDelegate===t},L=Zone[y("UNPATCHED_EVENTS")],x=e[y("PASSIVE_EVENTS")],F=function(t,o,i,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return function(){const p=this||e;let h=arguments[0];n&&n.transferEventName&&(h=n.transferEventName(h));let g=arguments[1];if(!g)return t.apply(this,arguments);if(T&&"uncaughtException"===h)return t.apply(this,arguments);let m=!1;if("function"!=typeof g){if(!g.handleEvent)return t.apply(this,arguments);m=!0}if(c&&!c(t,g,p,arguments))return;const y=G&&!!x&&-1!==x.indexOf(h),v=function(e){if("object"==typeof e&&null!==e){const t={...e};return e.signal&&(t.signal=e.signal),t}return e}(function(e,t){return!G&&"object"==typeof e&&e?!!e.capture:G&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"==typeof e&&!1!==e.passive?{...e,passive:!0}:e:{passive:!0}:e}(arguments[2],y)),_=v?.signal;if(_?.aborted)return;if(L)for(let e=0;e<L.length;e++)if(h===L[e])return y?t.call(p,h,g,v):t.apply(this,arguments);const b=!!v&&("boolean"==typeof v||v.capture),E=!(!v||"object"!=typeof v)&&v.once,S=Zone.current;let C=H[h];C||(X(h,w),C=H[h]);const R=C[b?d:f];let M,P=p[R],k=!1;if(P){if(k=!0,u)for(let e=0;e<P.length;e++)if(D(P[e],g))return}else P=p[R]=[];const I=p.constructor.name,A=V[I];A&&(M=A[h]),M||(M=I+o+(w?w(h):h)),O.options=v,E&&(O.options.once=!1),O.target=p,O.capture=b,O.eventName=h,O.isExisting=k;const N=r?q:void 0;N&&(N.taskData=O),_&&(O.options.signal=void 0);const F=S.scheduleEventTask(M,g,N,i,s);if(_){O.options.signal=_;const e=()=>F.zone.cancelTask(F);t.call(_,"abort",e,{once:!0}),F.removeAbortListener=()=>_.removeEventListener("abort",e)}return O.target=null,N&&(N.taskData=null),E&&(O.options.once=!0),(G||"boolean"!=typeof F.options)&&(F.options=v),F.target=p,F.capture=b,F.eventName=h,m&&(F.originalDelegate=g),l?P.unshift(F):P.push(F),a?p:void 0}};return b[o]=F(C,g,I,A,_),k&&(b[m]=F(k,v,(function(e){return k.call(O.target,O.eventName,e.invoke,O.options)}),A,_,!0)),b[s]=function(){const t=this||e;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const o=arguments[2],i=!!o&&("boolean"==typeof o||o.capture),s=arguments[1];if(!s)return R.apply(this,arguments);if(c&&!c(R,s,t,arguments))return;const a=H[r];let u;a&&(u=a[i?d:f]);const l=u&&t[u];if(l)for(let e=0;e<l.length;e++){const n=l[e];if(D(n,s))return l.splice(e,1),n.isRemoved=!0,0!==l.length||(n.allRemoved=!0,t[u]=null,i||"string"!=typeof r)||(t[h+"ON_PROPERTY"+r]=null),n.zone.cancelTask(n),_?t:void 0}return R.apply(this,arguments)},b[a]=function(){const t=this||e;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const o=[],i=K(t,w?w(r):r);for(let e=0;e<i.length;e++){const t=i[e];let n=t.originalDelegate?t.originalDelegate:t.callback;o.push(n)}return o},b[l]=function(){const t=this||e;let r=arguments[0];if(r){n&&n.transferEventName&&(r=n.transferEventName(r));const e=H[r];if(e){const n=e[f],o=e[d],i=t[n],a=t[o];if(i){const e=i.slice();for(let t=0;t<e.length;t++){const n=e[t];let o=n.originalDelegate?n.originalDelegate:n.callback;this[s].call(this,r,o,n.options)}}if(a){const e=a.slice();for(let t=0;t<e.length;t++){const n=e[t];let o=n.originalDelegate?n.originalDelegate:n.callback;this[s].call(this,r,o,n.options)}}}}else{const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t],r=$.exec(n);let o=r&&r[1];o&&"removeListener"!==o&&this[l].call(this,o)}this[l].call(this,"removeListener")}if(_)return this},N(b[o],C),N(b[s],R),P&&N(b[l],P),M&&N(b[a],M),!0}let O=[];for(let e=0;e<n.length;e++)O[e]=w(n[e],r);return O}function K(e,t){if(!t){const n=[];for(let r in e){const o=$.exec(r);let i=o&&o[1];if(i&&(!t||i===t)){const t=e[r];if(t)for(let e=0;e<t.length;e++)n.push(t[e])}}return n}let n=H[t];n||(X(t),n=H[t]);const r=e[n[f]],o=e[n[d]];return r?o?r.concat(o):r.slice():o?o.slice():[]}function Y(e,t){const n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",(e=>function(t,n){t[Z]=!0,e&&e.apply(t,n)}))}function Q(e,t){t.patchMethod(e,"queueMicrotask",(e=>function(e,t){Zone.current.scheduleMicroTask("queueMicrotask",t[0])}))}const ee=y("zoneTask");function te(e,t,n,r){let o=null,i=null;n+=r;const s={};function a(t){const n=t.data;n.args[0]=function(){return t.invoke.apply(this,arguments)};const r=o.apply(e,n.args);return z(r)?n.handleId=r:(n.handle=r,n.isRefreshable=W(r.refresh)),t}function c(t){const{handle:n,handleId:r}=t.data;return i.call(e,n??r)}o=L(e,t+=r,(n=>function(o,i){if(W(i[0])){const e={isRefreshable:!1,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?i[1]||0:void 0,args:i},n=i[0];i[0]=function(){try{return n.apply(this,arguments)}finally{const{handle:t,handleId:n,isPeriodic:r,isRefreshable:o}=e;r||o||(n?delete s[n]:t&&(t[ee]=null))}};const o=m(t,i[0],e,a,c);if(!o)return o;const{handleId:u,handle:l,isRefreshable:p,isPeriodic:d}=o.data;if(u)s[u]=o;else if(l&&(l[ee]=o,p&&!d)){const e=l.refresh;l.refresh=function(){const{zone:t,state:n}=o;return"notScheduled"===n?(o._state="scheduled",t._updateTaskCount(o,1)):"running"===n&&(o._state="scheduling"),e.call(this)}}return l??u??o}return n.apply(e,i)})),i=L(e,n,(t=>function(n,r){const o=r[0];let i;z(o)?(i=s[o],delete s[o]):(i=o?.[ee],i?o[ee]=null:i=o),i?.type?i.cancelFn&&i.zone.cancelTask(i):t.apply(e,r)}))}function ne(e,t){if(Zone[t.symbol("patchEventTarget")])return;const{eventNames:n,zoneSymbolEventNames:r,TRUE_STR:o,FALSE_STR:i,ZONE_SYMBOL_PREFIX:s}=t.getGlobalObjects();for(let e=0;e<n.length;e++){const t=n[e],a=s+(t+i),c=s+(t+o);r[t]={},r[t][i]=a,r[t][o]=c}const a=e.EventTarget;return a&&a.prototype?(t.patchEventTarget(e,t,[a&&a.prototype]),!0):void 0}function re(e,t,n){if(!n||0===n.length)return t;const r=n.filter((t=>t.target===e));if(!r||0===r.length)return t;const o=r[0].ignoreProperties;return t.filter((e=>-1===o.indexOf(e)))}function oe(e,t,n,r){e&&I(e,re(e,t,n),r)}function ie(e){return Object.getOwnPropertyNames(e).filter((e=>e.startsWith("on")&&e.length>2)).map((e=>e.substring(2)))}function se(e,t){if(T&&!C)return;if(Zone[e.symbol("patchEvents")])return;const n=t.__Zone_ignore_on_properties;let r=[];if(O){const e=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const t=j()?[{target:e,ignoreProperties:["error"]}]:[];oe(e,ie(e),n?n.concat(t):n,i(e))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let e=0;e<r.length;e++){const o=t[r[e]];o&&o.prototype&&oe(o.prototype,ie(o.prototype),n)}}function ae(e,t,n,r,o){const i=Zone.__symbol__(r);if(t[i])return;const s=t[i]=t[r];t[r]=function(i,a,c){return a&&a.prototype&&o.forEach((function(t){const o=`${n}.${r}::`+t,i=a.prototype;try{if(i.hasOwnProperty(t)){const n=e.ObjectGetOwnPropertyDescriptor(i,t);n&&n.value?(n.value=e.wrapWithCurrentZone(n.value,o),e._redefineProperty(a.prototype,t,n)):i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],o))}else i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],o))}catch{}})),s.call(t,i,a,c)},e.attachOriginToPatched(t[r],s)}const ce=function(){const e=globalThis,r=!0===e[t("forceDuplicateZoneCheck")];if(e.Zone&&(r||"function"!=typeof e.Zone.__symbol__))throw new Error("Zone already loaded.");return e.Zone??=n(),e.Zone}();!function(e){(function(e){e.__load_patch("ZoneAwarePromise",((e,t,n)=>{const r=Object.getOwnPropertyDescriptor,o=Object.defineProperty,i=n.symbol,s=[],a=!1!==e[i("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],c=i("Promise"),u=i("then");n.onUnhandledError=e=>{if(n.showUncaughtError()){const t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},n.microtaskDrainDone=()=>{for(;s.length;){const e=s.shift();try{e.zone.runGuarded((()=>{if(e.throwOriginal)throw e.rejection;throw e}))}catch(e){p(e)}}};const l=i("unhandledPromiseRejectionHandler");function p(e){n.onUnhandledError(e);try{const n=t[l];"function"==typeof n&&n.call(this,e)}catch(e){}}function d(e){return e&&e.then}function f(e){return e}function h(e){return D.reject(e)}const g=i("state"),m=i("value"),y=i("finally"),v=i("parentPromiseValue"),_=i("parentPromiseState"),b=null,E=!0,S=!1;function w(e,t){return n=>{try{R(e,t,n)}catch(t){R(e,!1,t)}}}const T=function(){let e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},O="Promise resolved with itself",C=i("currentTaskTrace");function R(e,r,i){const c=T();if(e===i)throw new TypeError(O);if(e[g]===b){let l=null;try{"object"!=typeof i&&"function"!=typeof i||(l=i&&i.then)}catch(t){return c((()=>{R(e,!1,t)}))(),e}if(r!==S&&i instanceof D&&i.hasOwnProperty(g)&&i.hasOwnProperty(m)&&i[g]!==b)P(i),R(e,i[g],i[m]);else if(r!==S&&"function"==typeof l)try{l.call(i,c(w(e,r)),c(w(e,!1)))}catch(t){c((()=>{R(e,!1,t)}))()}else{e[g]=r;const c=e[m];if(e[m]=i,e[y]===y&&r===E&&(e[g]=e[_],e[m]=e[v]),r===S&&i instanceof Error){const e=t.currentTask&&t.currentTask.data&&t.currentTask.data.__creationTrace__;e&&o(i,C,{configurable:!0,enumerable:!1,writable:!0,value:e})}for(let t=0;t<c.length;)k(e,c[t++],c[t++],c[t++],c[t++]);if(0==c.length&&r==S){e[g]=0;let r=i;try{throw new Error("Uncaught (in promise): "+((u=i)&&u.toString===Object.prototype.toString?(u.constructor&&u.constructor.name||"")+": "+JSON.stringify(u):u?u.toString():Object.prototype.toString.call(u))+(i&&i.stack?"\n"+i.stack:""))}catch(e){r=e}a&&(r.throwOriginal=!0),r.rejection=i,r.promise=e,r.zone=t.current,r.task=t.currentTask,s.push(r),n.scheduleMicroTask()}}}var u;return e}const M=i("rejectionHandledHandler");function P(e){if(0===e[g]){try{const n=t[M];n&&"function"==typeof n&&n.call(this,{rejection:e[m],promise:e})}catch(e){}e[g]=S;for(let t=0;t<s.length;t++)e===s[t].promise&&s.splice(t,1)}}function k(e,t,n,r,o){P(e);const i=e[g],s=i?"function"==typeof r?r:f:"function"==typeof o?o:h;t.scheduleMicroTask("Promise.then",(()=>{try{const r=e[m],o=!!n&&y===n[y];o&&(n[v]=r,n[_]=i);const a=t.run(s,void 0,o&&s!==h&&s!==f?[]:[r]);R(n,!0,a)}catch(e){R(n,!1,e)}}),n)}const I=function(){},A=e.AggregateError;class D{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(e){return e instanceof D?e:R(new this(null),E,e)}static reject(e){return R(new this(null),S,e)}static withResolvers(){const e={};return e.promise=new D(((t,n)=>{e.resolve=t,e.reject=n})),e}static any(e){if(!e||"function"!=typeof e[Symbol.iterator])return Promise.reject(new A([],"All promises were rejected"));const t=[];let n=0;try{for(let r of e)n++,t.push(D.resolve(r))}catch(e){return Promise.reject(new A([],"All promises were rejected"))}if(0===n)return Promise.reject(new A([],"All promises were rejected"));let r=!1;const o=[];return new D(((e,i)=>{for(let s=0;s<t.length;s++)t[s].then((t=>{r||(r=!0,e(t))}),(e=>{o.push(e),n--,0===n&&(r=!0,i(new A(o,"All promises were rejected")))}))}))}static race(e){let t,n,r=new this(((e,r)=>{t=e,n=r}));function o(e){t(e)}function i(e){n(e)}for(let t of e)d(t)||(t=this.resolve(t)),t.then(o,i);return r}static all(e){return D.allWithCallback(e)}static allSettled(e){return(this&&this.prototype instanceof D?this:D).allWithCallback(e,{thenCallback:e=>({status:"fulfilled",value:e}),errorCallback:e=>({status:"rejected",reason:e})})}static allWithCallback(e,t){let n,r,o=new this(((e,t)=>{n=e,r=t})),i=2,s=0;const a=[];for(let o of e){d(o)||(o=this.resolve(o));const e=s;try{o.then((r=>{a[e]=t?t.thenCallback(r):r,i--,0===i&&n(a)}),(o=>{t?(a[e]=t.errorCallback(o),i--,0===i&&n(a)):r(o)}))}catch(e){r(e)}i++,s++}return i-=2,0===i&&n(a),o}constructor(e){const t=this;if(!(t instanceof D))throw new Error("Must be an instanceof Promise.");t[g]=b,t[m]=[];try{const n=T();e&&e(n(w(t,E)),n(w(t,S)))}catch(e){R(t,!1,e)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return D}then(e,n){let r=this.constructor?.[Symbol.species];r&&"function"==typeof r||(r=this.constructor||D);const o=new r(I),i=t.current;return this[g]==b?this[m].push(i,o,e,n):k(this,i,o,e,n),o}catch(e){return this.then(null,e)}finally(e){let n=this.constructor?.[Symbol.species];n&&"function"==typeof n||(n=D);const r=new n(I);r[y]=y;const o=t.current;return this[g]==b?this[m].push(o,r,e,e):k(this,o,r,e,e),r}}D.resolve=D.resolve,D.reject=D.reject,D.race=D.race,D.all=D.all;const x=e[c]=e.Promise;e.Promise=D;const N=i("thenPatched");function F(e){const t=e.prototype,n=r(t,"then");if(n&&(!1===n.writable||!n.configurable))return;const o=t.then;t[u]=o,e.prototype.then=function(e,t){return new D(((e,t)=>{o.call(this,e,t)})).then(e,t)},e[N]=!0}return n.patchThen=F,x&&(F(x),L(e,"fetch",(e=>{return t=e,function(e,n){let r=t.apply(e,n);if(r instanceof D)return r;let o=r.constructor;return o[N]||F(o),r};var t}))),Promise[t.__symbol__("uncaughtPromiseErrors")]=s,D}))})(e),function(e){e.__load_patch("toString",(e=>{const t=Function.prototype.toString,n=y("OriginalDelegate"),r=y("Promise"),o=y("Error"),i=function(){if("function"==typeof this){const i=this[n];if(i)return"function"==typeof i?t.call(i):Object.prototype.toString.call(i);if(this===Promise){const n=e[r];if(n)return t.call(n)}if(this===Error){const n=e[o];if(n)return t.call(n)}}return t.call(this)};i[n]=t,Function.prototype.toString=i;const s=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":s.call(this)}}))}(e),function(e){e.__load_patch("util",((e,t,n)=>{const i=ie(e);n.patchOnProperties=I,n.patchMethod=L,n.bindArguments=E,n.patchMacroTask=x;const l=t.__symbol__("BLACK_LISTED_EVENTS"),p=t.__symbol__("UNPATCHED_EVENTS");e[p]&&(e[l]=e[p]),e[l]&&(t[l]=t[p]=e[l]),n.patchEventPrototype=Y,n.patchEventTarget=J,n.isIEOrEdge=B,n.ObjectDefineProperty=o,n.ObjectGetOwnPropertyDescriptor=r,n.ObjectCreate=s,n.ArraySlice=a,n.patchClass=D,n.wrapWithCurrentZone=g,n.filterProperties=re,n.attachOriginToPatched=N,n._redefineProperty=Object.defineProperty,n.patchCallbacks=ae,n.getGlobalObjects=()=>({globalSources:V,zoneSymbolEventNames:H,eventNames:i,isBrowser:O,isMix:C,isNode:T,TRUE_STR:d,FALSE_STR:f,ZONE_SYMBOL_PREFIX:h,ADD_EVENT_LISTENER_STR:c,REMOVE_EVENT_LISTENER_STR:u})}))}(e)}(ce),function(e){e.__load_patch("legacy",(t=>{const n=t[e.__symbol__("legacyPatch")];n&&n()})),e.__load_patch("timers",(e=>{const t="set",n="clear";te(e,t,n,"Timeout"),te(e,t,n,"Interval"),te(e,t,n,"Immediate")})),e.__load_patch("requestAnimationFrame",(e=>{te(e,"request","cancel","AnimationFrame"),te(e,"mozRequest","mozCancel","AnimationFrame"),te(e,"webkitRequest","webkitCancel","AnimationFrame")})),e.__load_patch("blocking",((e,t)=>{const n=["alert","prompt","confirm"];for(let r=0;r<n.length;r++)L(e,n[r],((n,r,o)=>function(r,i){return t.current.run(n,e,i,o)}))})),e.__load_patch("EventTarget",((e,t,n)=>{!function(e,t){t.patchEventPrototype(e,t)}(e,n),ne(e,n);const r=e.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(e,n,[r.prototype])})),e.__load_patch("MutationObserver",((e,t,n)=>{D("MutationObserver"),D("WebKitMutationObserver")})),e.__load_patch("IntersectionObserver",((e,t,n)=>{D("IntersectionObserver")})),e.__load_patch("FileReader",((e,t,n)=>{D("FileReader")})),e.__load_patch("on_property",((e,t,n)=>{se(n,e)})),e.__load_patch("customElements",((e,t,n)=>{!function(e,t){const{isBrowser:n,isMix:r}=t.getGlobalObjects();(n||r)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(e,n)})),e.__load_patch("XHR",((e,t)=>{!function(e){const c=e.XMLHttpRequest;if(!c)return;const u=c.prototype;let d=u[l],f=u[p];if(!d){const t=e.XMLHttpRequestEventTarget;if(t){const e=t.prototype;d=e[l],f=e[p]}}const h="readystatechange",g="scheduled";function v(e){const r=e.data,s=r.target;s[i]=!1,s[a]=!1;const c=s[o];d||(d=s[l],f=s[p]),c&&f.call(s,h,c);const u=s[o]=()=>{if(s.readyState===s.DONE)if(!r.aborted&&s[i]&&e.state===g){const n=s[t.__symbol__("loadfalse")];if(0!==s.status&&n&&n.length>0){const o=e.invoke;e.invoke=function(){const n=s[t.__symbol__("loadfalse")];for(let t=0;t<n.length;t++)n[t]===e&&n.splice(t,1);r.aborted||e.state!==g||o.call(e)},n.push(e)}else e.invoke()}else r.aborted||!1!==s[i]||(s[a]=!0)};return d.call(s,h,u),s[n]||(s[n]=e),T.apply(s,r.args),s[i]=!0,e}function _(){}function b(e){const t=e.data;return t.aborted=!0,O.apply(t.target,t.args)}const E=L(u,"open",(()=>function(e,t){return e[r]=0==t[2],e[s]=t[1],E.apply(e,t)})),S=y("fetchTaskAborting"),w=y("fetchTaskScheduling"),T=L(u,"send",(()=>function(e,n){if(!0===t.current[w])return T.apply(e,n);if(e[r])return T.apply(e,n);{const t={target:e,url:e[s],isPeriodic:!1,args:n,aborted:!1},r=m("XMLHttpRequest.send",_,t,v,b);e&&!0===e[a]&&!t.aborted&&r.state===g&&r.invoke()}})),O=L(u,"abort",(()=>function(e,r){const o=e[n];if(o&&"string"==typeof o.type){if(null==o.cancelFn||o.data&&o.data.aborted)return;o.zone.cancelTask(o)}else if(!0===t.current[S])return O.apply(e,r)}))}(e);const n=y("xhrTask"),r=y("xhrSync"),o=y("xhrListener"),i=y("xhrScheduled"),s=y("xhrURL"),a=y("xhrErrorBeforeScheduled")})),e.__load_patch("geolocation",(e=>{e.navigator&&e.navigator.geolocation&&function(e,t){const n=e.constructor.name;for(let o=0;o<t.length;o++){const i=t[o],s=e[i];if(s){if(!S(r(e,i)))continue;e[i]=(e=>{const t=function(){return e.apply(this,E(arguments,n+"."+i))};return N(t,e),t})(s)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])})),e.__load_patch("PromiseRejectionEvent",((e,t)=>{function n(t){return function(n){K(e,t).forEach((r=>{const o=e.PromiseRejectionEvent;if(o){const e=new o(t,{promise:n.promise,reason:n.rejection});r.invoke(e)}}))}}e.PromiseRejectionEvent&&(t[y("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[y("rejectionHandledHandler")]=n("rejectionhandled"))})),e.__load_patch("queueMicrotask",((e,t,n)=>{Q(e,n)}))}(ce)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r={};(()=>{"use strict";n.d(r,{T:()=>Nh});const e="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,o="8.40.0",i=globalThis;function s(e,t,n){const r=n||i,s=r.__SENTRY__=r.__SENTRY__||{},a=s[o]=s[o]||{};return a[e]||(a[e]=t())}const a=["debug","info","warn","error","log","assert","trace"],c={};function u(e){if(!("console"in i))return e();const t=i.console,n={},r=Object.keys(c);r.forEach((e=>{const r=c[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const l=s("logger",(function(){let e=!1;const n={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return t?a.forEach((t=>{n[t]=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e&&u((()=>{i.console[t](`Sentry Logger [${t}]:`,...r)}))}})):a.forEach((e=>{n[e]=()=>{}})),n})),p=[];function d(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(r),i=o.findIndex((e=>"Debug"===e.name));if(i>-1){const[e]=o.splice(i,1);o.push(e)}return o}function f(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function h(t,n,r){if(r[n.name])e&&l.log(`Integration skipped because it was already installed: ${n.name}`);else{if(r[n.name]=n,-1===p.indexOf(n.name)&&"function"==typeof n.setupOnce&&(n.setupOnce(),p.push(n.name)),n.setup&&"function"==typeof n.setup&&n.setup(t),"function"==typeof n.preprocessEvent){const e=n.preprocessEvent.bind(n);t.on("preprocessEvent",((n,r)=>e(n,r,t)))}if("function"==typeof n.processEvent){const e=n.processEvent.bind(n),r=Object.assign(((n,r)=>e(n,r,t)),{id:n.name});t.addEventProcessor(r)}e&&l.log(`Integration installed: ${n.name}`)}}const g=Object.prototype.toString;function m(e){switch(g.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return C(e,Error)}}function y(e,t){return g.call(e)===`[object ${t}]`}function v(e){return y(e,"ErrorEvent")}function _(e){return y(e,"DOMError")}function b(e){return y(e,"String")}function E(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function S(e){return null===e||E(e)||"object"!=typeof e&&"function"!=typeof e}function w(e){return y(e,"Object")}function T(e){return"undefined"!=typeof Event&&C(e,Event)}function O(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function C(e,t){try{return e instanceof t}catch(e){return!1}}function R(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const M=i;function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,p=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(u=k(n,l),!("html"===u||i>1&&s+o.length*c+u.length>=p));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function k(e,t){const n=e,r=[];if(!n||!n.tagName)return"";if(M.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(o&&o.length)o.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&b(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const e of i){const t=n.getAttribute(e);t&&r.push(`[${e}="${t}"]`)}return r.join("")}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function A(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{R(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function D(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some((n=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!b(e)&&(y(t,"RegExp")?t.test(e):!!b(t)&&(n?e===t:e.includes(t)))}(e,n,t)))}function L(e,n,r){if(!(n in e))return;const o=e[n],i=r(o);"function"==typeof i&&N(i,o);try{e[n]=i}catch(r){t&&l.log(`Failed to replace method "${n}" in object`,e)}}function x(e,n,r){try{Object.defineProperty(e,n,{value:r,writable:!0,configurable:!0})}catch(r){t&&l.log(`Failed to add non-enumerable property "${n}" to object`,e)}}function N(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,x(e,"__sentry_original__",t)}catch(e){}}function F(e){return e.__sentry_original__}function U(e){if(m(e))return{message:e.message,name:e.name,stack:e.stack,...B(e)};if(T(e)){const t={type:e.type,target:j(e.target),currentTarget:j(e.currentTarget),...B(e)};return"undefined"!=typeof CustomEvent&&C(e,CustomEvent)&&(t.detail=e.detail),t}return e}function j(e){try{return"undefined"!=typeof Element&&C(e,Element)?P(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function B(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function W(e){return z(e,new Map)}function z(e,t){if(function(e){if(!w(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.getOwnPropertyNames(e))void 0!==e[n]&&(r[n]=z(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(z(e,t))})),r}return e}function G(){const e=i,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function q(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function H(e){const{message:t,event_id:n}=e;if(t)return t;const r=q(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function V(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function $(e,t){const n=q(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function Z(e){if(e&&e.__sentry_captured__)return!0;try{x(e,"__sentry_captured__",!0)}catch(e){}return!1}const X=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],J=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"InboundFilters",processEvent(n,r,o){const i=o.getOptions(),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:X],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t,i);return function(t,n){return n.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(t)?(e&&l.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${H(t)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let n;e.message&&t.push(e.message);try{n=e.exception.values[e.exception.values.length-1]}catch(e){}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}(e).some((e=>D(e,t)))}(t,n.ignoreErrors)?(e&&l.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${H(t)}`),!0):function(e){return!e.type&&(!(!e.exception||!e.exception.values||0===e.exception.values.length)&&(!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))))}(t)?(e&&l.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${H(t)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&D(n,t)}(t,n.ignoreTransactions)?(e&&l.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${H(t)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=K(e);return!!n&&D(n,t)}(t,n.denyUrls)?(e&&l.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${H(t)}.\nUrl: ${K(t)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=K(e);return!n||D(n,t)}(t,n.allowUrls)&&(e&&l.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${H(t)}.\nUrl: ${K(t)}`),!0)}(n,s)?null:n}}};function K(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(e){}return e?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(e):null}catch(n){return e&&l.error(`Cannot extract url for event ${H(t)}`),null}}function Y(){return Q(i),i}function Q(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||o,t[o]=t[o]||{}}function ee(){return Date.now()/1e3}const te=function(){const{performance:e}=i;if(!e||!e.now)return ee;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}();let ne;function re(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||te(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:G()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function oe(){return{traceId:G(),spanId:G().substring(16)}}function ie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!t||"object"!=typeof t||n<=0)return t;if(e&&t&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=ie(r[e],t[e],n-1));return r}(()=>{const{performance:e}=i;if(!e||!e.now)return void(ne="none");const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):t;s||c<t?o<=c?(ne="timeOrigin",e.timeOrigin):ne="navigationStart":ne="dateNow"})();const se="_sentrySpan";function ae(e,t){t?x(e,se,t):delete e[se]}function ce(e){return e[se]}class ue{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=oe()}clone(){const e=new ue;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,ae(e,ce(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&re(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,r]=t instanceof le?[t.getScopeData(),t.getRequestSession()]:w(t)?[e,e.requestSession]:[],{tags:o,extra:i,user:s,contexts:a,level:c,fingerprint:u=[],propagationContext:l}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),c&&(this._level=c),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,ae(this,void 0),this._attachments=[],this._propagationContext=oe(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:ee(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ce(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=ie(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:G();if(!this._client)return l.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:G();if(!this._client)return l.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:G();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(l.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const le=ue;class pe{constructor(e,t){let n,r;n=e||new le,r=t||new le,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return O(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}}function de(){const e=Q(Y());return e.stack=e.stack||new pe(s("defaultCurrentScope",(()=>new le)),s("defaultIsolationScope",(()=>new le)))}function fe(e){return de().withScope(e)}function he(e,t){const n=de();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function ge(e){return de().withScope((()=>e(de().getIsolationScope())))}function me(e){const t=Q(e);return t.acs?t.acs:{withIsolationScope:ge,withScope:fe,withSetScope:he,withSetIsolationScope:(e,t)=>ge(t),getCurrentScope:()=>de().getScope(),getIsolationScope:()=>de().getIsolationScope()}}function ye(){return me(Y()).getCurrentScope()}function ve(){return me(Y()).getIsolationScope()}function _e(){return s("globalScope",(()=>new le))}function be(){return ye().getClient()}let Ee;const Se=new WeakMap,we=()=>({name:"FunctionToString",setupOnce(){Ee=Function.prototype.toString;try{Function.prototype.toString=function(){const e=F(this),t=Se.has(be())&&void 0!==e?e:this;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Ee.apply(t,r)}}catch(e){}},setup(e){Se.set(e,!0)}}),Te="?",Oe=/\(error: (.*)\)/,Ce=/captureMessage|captureException/;function Re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=[],i=e.split("\n");for(let e=t;e<i.length;e++){const t=i[e];if(t.length>1024)continue;const s=Oe.test(t)?t.replace(Oe,"$1"):t;if(!s.match(/\S*Error: /)){for(const e of r){const t=e(s);if(t){o.push(t);break}}if(o.length>=50+n)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Me(t).function||"")&&t.pop(),t.reverse(),Ce.test(Me(t).function||"")&&(t.pop(),Ce.test(Me(t).function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||Me(t).filename,function:e.function||Te})))}(o.slice(n))}}function Me(e){return e[e.length-1]||{}}const Pe="<anonymous>";function ke(e){try{return e&&"function"==typeof e&&e.name||Pe}catch(e){return Pe}}function Ie(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}const Ae=()=>{let t;return{name:"Dedupe",processEvent(n){if(n.type)return n;try{if(function(e,t){return!!t&&(!!function(e,t){const n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!Le(e,t)&&!!De(e,t))))}(e,t)||!!function(e,t){const n=xe(t),r=xe(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!Le(e,t)&&!!De(e,t)))}(e,t))}(n,t))return e&&l.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return t=n}}};function De(e,t){let n=Ie(e),r=Ie(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Le(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function xe(e){return e.exception&&e.exception.values&&e.exception.values[0]}const Ne=i;function Fe(){if(!("fetch"in Ne))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Ue(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const je="production";var Be;function We(e){return new Ge((t=>{t(e)}))}function ze(e){return new Ge(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Be||(Be={}));class Ge{constructor(e){Ge.prototype.__init.call(this),Ge.prototype.__init2.call(this),Ge.prototype.__init3.call(this),Ge.prototype.__init4.call(this),this._state=Be.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Ge(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Ge(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Be.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Be.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Be.PENDING&&(O(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Be.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Be.RESOLVED&&e[1](this._value),this._state===Be.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function qe(t,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Ge(((i,s)=>{const a=t[o];if(null===n||"function"!=typeof a)i(n);else{const c=a({...n},r);e&&a.id&&null===c&&l.log(`Event processor "${a.id}" dropped event`),O(c)?c.then((e=>qe(t,e,r,o+1).then(i))).then(null,s):qe(t,c,r,o+1).then(i).then(null,s)}}))}const He=new WeakMap;function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return Ze("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function $e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400;const r=Ve(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?$e(e,t-1,n):r;var o}function Ze(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}();const[i,s]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(R(t))return"[VueViewModel]";if(w(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${ke(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Ze("",u.toJSON(),c-1,r,o)}catch(e){}const l=Array.isArray(t)?[]:{};let p=0;const d=U(t);for(const e in d){if(!Object.prototype.hasOwnProperty.call(d,e))continue;if(p>=r){l[e]="[MaxProperties ~]";break}const t=d[e];l[e]=Ze(e,t,c-1,r,o),p++}return s(t),l}const Xe=/^sentry-/;function Je(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,t)=>{let[n,r]=t;return n&&r&&(e[n]=r),e}),{})}function Ke(e){const t=e._sentryMetrics;if(!t)return;const n={};for(const[,[e,r]]of t)(n[e]||(n[e]=[])).push(W(r));return n}function Ye(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:r}=tt(e);return W({parent_span_id:r,span_id:t,trace_id:n})}function Qe(e){return"number"==typeof e?et(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?et(e.getTime()):te()}function et(e){return e>9999999999?e/1e3:e}function tt(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:o,name:i,endTime:s,parentSpanId:a,status:c}=e;return W({span_id:t,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:Qe(o),timestamp:Qe(s)||void 0,status:nt(c),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:Ke(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function nt(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function rt(e){return e._sentryRootSpan||e}function ot(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o=W({environment:n.environment||je,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",o),o}function it(e){const t=be();if(!t)return{};const n=ot(tt(e).trace_id||"",t),r=rt(e),o=r._frozenDsc;if(o)return o;const i=r.spanContext().traceState,s=i&&i.get("sentry.dsc"),a=s&&function(e){const t=function(e){if(e&&(b(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce(((e,t)=>{const n=Je(t);return Object.entries(n).forEach((t=>{let[n,r]=t;e[n]=r})),e}),{}):Je(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,t)=>{let[n,r]=t;return n.match(Xe)&&(e[n.slice(7)]=r),e}),{});return Object.keys(n).length>0?n:void 0}(s);if(a)return a;const c=tt(r),u=c.data||{},l=u["sentry.sample_rate"];null!=l&&(n.sample_rate=`${l}`);const p=u["sentry.source"],d=c.description;return"url"!==p&&d&&(n.transaction=d),function(){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const e=be(),t=e&&e.getOptions();return!!t&&(t.enableTracing||"tracesSampleRate"in t||"tracesSampler"in t)}()&&(n.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(r))),t.emit("createDsc",n,r),n}function st(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:p,propagationContext:d,transactionName:f,span:h}=t;at(e,"extra",n),at(e,"tags",r),at(e,"user",o),at(e,"contexts",i),e.sdkProcessingMetadata=ie(e.sdkProcessingMetadata,a,2),s&&(e.level=s),f&&(e.transactionName=f),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),p.length&&(e.attachments=[...e.attachments,...p]),e.propagationContext={...e.propagationContext,...d}}function at(e,t,n){e[t]=ie(e[t],n,1)}function ct(e,t,n,r,o,s){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=e,u={...t,event_id:t.event_id||n.event_id||G(),timestamp:t.timestamp||ee()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:je),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=I(e.message,i));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=I(s.value,i));const a=e.request;a&&a.url&&(a.url=I(a.url,i))}(u,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(u,l),o&&o.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=function(e){const t=i._sentryDebugIds;if(!t)return{};let n;const r=He.get(e);return r?n=r:(n=new Map,He.set(e,n)),Object.keys(t).reduce(((r,o)=>{let i;const s=n.get(o);s?i=s:(i=e(o),n.set(o,i));for(let e=i.length-1;e>=0;e--){const n=i[e],s=n&&n.filename;if(n&&s){r[s]=t[o];break}}return r}),{})}(t);try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=n[e.filename])}))}))}catch(e){}}(u,e.stackParser);const p=function(e,t){if(!t)return e;const n=e?e.clone():new le;return n.update(t),n}(r,n.captureContext);n.mechanism&&$(u,n.mechanism);const d=o?o.getEventProcessors():[],f=_e().getScopeData();s&&st(f,s.getScopeData()),p&&st(f,p.getScopeData());const h=[...n.attachments||[],...f.attachments];return h.length&&(n.attachments=h),function(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t,c=W(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=W(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=W(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});const p=W(i);p&&Object.keys(p).length&&(e.contexts={...p,...e.contexts}),s&&(e.level=s),a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:Ye(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:it(t),...e.sdkProcessingMetadata};const n=tt(rt(t)).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}(u,f),qe([...d,...f.eventProcessors],u,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((e=>{let[t,r]=e;n.push({type:"sourcemap",code_file:t,debug_id:r})}))}(e),"number"==typeof a&&a>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Ve(e.data,t,n)}})))},...e.user&&{user:Ve(e.user,t,n)},...e.contexts&&{contexts:Ve(e.contexts,t,n)},...e.extra&&{extra:Ve(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ve(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:Ve(e.data,t,n)}})))),r}(e,a,c):e)))}const ut=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function lt(e,t){return ye().captureException(e,function(e){if(e)return function(e){return e instanceof le||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>ut.includes(e)))}(e)?{captureContext:e}:e}(t))}function pt(e,t){return ye().captureEvent(e,t)}function dt(e){const t=be(),n=ve(),r=ye(),{release:o,environment:s=je}=t&&t.getOptions()||{},{userAgent:a}=i.navigator||{},c=function(e){const t=te(),n={sid:G(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return W({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&re(n,e),n}({release:o,environment:s,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),u=n.getSession();return u&&"ok"===u.status&&re(u,{status:"exited"}),ft(),n.setSession(c),r.setSession(c),c}function ft(){const e=ve(),t=ye(),n=t.getSession()||e.getSession();n&&function(e){let t={};"ok"===e.status&&(t={status:"exited"}),re(e,t)}(n),ht(),e.setSession(),t.setSession()}function ht(){const e=ve(),t=ye(),n=be(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function gt(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?ft():ht()}const mt={},yt={};function vt(e,t){mt[e]=mt[e]||[],mt[e].push(t)}function _t(e,n){if(!yt[e]){yt[e]=!0;try{n()}catch(n){t&&l.error(`Error while instrumenting ${e}`,n)}}}function bt(e,n){const r=e&&mt[e];if(r)for(const o of r)try{o(n)}catch(n){t&&l.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ke(o)}\nError:`,n)}}const Et=i,St=i;let wt;function Tt(e){const t="history";vt(t,e),_t(t,Ot)}function Ot(){if(!function(){const e=Et.chrome,t=e&&e.app&&e.app.runtime,n="history"in Et&&!!Et.history.pushState&&!!Et.history.replaceState;return!t&&n}())return;const e=St.onpopstate;function t(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n.length>2?n[2]:void 0;if(o){const e=wt,t=String(o);wt=t,bt("history",{from:e,to:t})}return e.apply(this,n)}}St.onpopstate=function(){const t=St.location.href,n=wt;if(wt=t,bt("history",{from:n,to:t}),e)try{for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e.apply(this,o)}catch(e){}},L(St.history,"pushState",t),L(St.history,"replaceState",t)}function Ct(e,t,n){return t||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}(e,n)}`}const Rt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Mt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`}function Pt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function kt(e){return[e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]}function It(e,t){const[n,r]=e;return[n,[...r,t]]}function At(e,t){const n=e[1];for(const e of n)if(t(e,e[0].type))return!0;return!1}function Dt(e){return i.__SENTRY__&&i.__SENTRY__.encodePolyfill?i.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function Lt(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"==typeof r?r="string"==typeof e?r+e:[Dt(r),e]:r.push("string"==typeof e?Dt(e):e)}for(const e of n){const[t,n]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Ve(n))}o(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}function xt(e){const t="string"==typeof e.data?Dt(e.data):e.data;return[W({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const Nt={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Ft(e){return Nt[e]}function Ut(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}class jt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const Bt="Not capturing exception because it's already been captured.";class Wt{constructor(n){if(this._options=n,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],n.dsn?this._dsn=function(e){const n="string"==typeof e?function(e){const t=Rt.exec(e);if(!t)return void u((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",i="",s="",a=""]=t.slice(1);let c="",l=a;const p=l.split("/");if(p.length>1&&(c=p.slice(0,-1).join("/"),l=p.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return Pt({host:i,pass:o,path:c,projectId:l,port:s,protocol:n,publicKey:r})}(e):Pt(e);if(n&&function(e){if(!t)return!0;const{port:n,projectId:r,protocol:o}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(l.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(o)?n&&isNaN(parseInt(n,10))&&(l.error(`Invalid Sentry Dsn: Invalid port ${n}`),1):(l.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(l.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(n))return n}(n.dsn):e&&l.warn("No DSN provided, client will not send events."),this._dsn){const e=Ct(this._dsn,n.tunnel,n._metadata?n._metadata.sdk:void 0);this._transport=n.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...n.transportOptions,url:e})}}captureException(t,n,r){const o=G();if(Z(t))return e&&l.log(Bt),o;const i={event_id:o,...n};return this._process(this.eventFromException(t,i).then((e=>this._captureEvent(e,i,r)))),i.event_id}captureMessage(e,t,n,r){const o={event_id:G(),...n},i=E(e)?e:String(e),s=S(e)?this.eventFromMessage(i,t,o):this.eventFromException(e,o);return this._process(s.then((e=>this._captureEvent(e,o,r)))),o.event_id}captureEvent(t,n,r){const o=G();if(n&&n.originalException&&Z(n.originalException))return e&&l.log(Bt),o;const i={event_id:o,...n},s=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,i,s||r)),i.event_id}captureSession(t){"string"!=typeof t.release?e&&l.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),re(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):We(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((e=>{let{name:t}=e;return t.startsWith("Spotlight")})))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];h(this,e,this._integrations),t||f(this,[e])}sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",e,t);let n=function(e,t,n,r){const o=Ut(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const s=function(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Mt(r)},...o&&{trace:W({...o})}}}(e,o,r,t);return delete e.sdkProcessingMetadata,kt(s,[[{type:i},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=It(n,xt(e));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=Ut(n);return kt({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Mt(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const o="number"==typeof r?r:1,i=`${t}:${n}`;e&&l.log(`Recording outcome: "${i}"${o>1?` (${o} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+o}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=this._hooks[e];o&&o.forEach((e=>e(...n)))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,(t=>(e&&l.error("Error while sending envelope:",t),t))):(e&&l.error("Transport disabled"),We({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&h(e,t,n)})),n}(this,e),f(this,e)}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(re(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ge((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ve();const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),ct(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:r,parentSpanId:o,dsc:i}=t;e.contexts={trace:W({trace_id:n,span_id:r,parent_span_id:o}),...e.contexts};const s=i||ot(n,this);e.sdkProcessingMetadata={dynamicSamplingContext:s,...e.sdkProcessingMetadata}}return e}))}_captureEvent(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return this._processEvent(t,n,r).then((e=>e.event_id),(t=>{if(e){const e=t;"log"===e.logLevel?l.log(e.message):l.warn(e)}}))}_processEvent(t,n,r){const o=this.getOptions(),{sampleRate:i}=o,s=Gt(t),a=zt(t),c=t.type||"error",u=`before send for type \`${c}\``,p=void 0===i?void 0:function(t){if("boolean"==typeof t)return Number(t);const n="string"==typeof t?parseFloat(t):t;if(!("number"!=typeof n||isNaN(n)||n<0||n>1))return n;e&&l.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`)}(i);if(a&&"number"==typeof p&&Math.random()>p)return this.recordDroppedEvent("sample_rate","error",t),ze(new jt(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const d="replay_event"===c?"replay":c,f=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,f).then((e=>{if(null===e)throw this.recordDroppedEvent("event_processor",d,t),new jt("An event processor returned `null`, will not send event.","log");if(n.data&&!0===n.data.__sentry__)return e;const r=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t;if(zt(n)&&o)return o(n,r);if(Gt(n)){if(n.spans&&s){const t=[];for(const r of n.spans){const n=s(r);n?t.push(n):e.recordDroppedEvent("before_send","span")}n.spans=t}if(i){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(n,r)}}return n}(this,o,e,n);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(O(e))return e.then((e=>{if(!w(e)&&null!==e)throw new jt(n);return e}),(e=>{throw new jt(`${t} rejected with ${e}`)}));if(!w(e)&&null!==e)throw new jt(n);return e}(r,u)})).then((e=>{if(null===e){if(this.recordDroppedEvent("before_send",d,t),s){const e=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",e)}throw new jt(`${u} returned \`null\`, will not send event.`,"log")}const o=r&&r.getSession();if(!s&&o&&this._updateSessionFromEvent(o,e),s){const t=(e.sdkProcessingMetadata&&e.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(e.spans?e.spans.length:0);t>0&&this.recordDroppedEvent("before_send","span",t)}const i=e.transaction_info;if(s&&i&&e.transaction!==t.transaction){const t="custom";e.transaction_info={...i,source:t}}return this.sendEvent(e,n),e})).then(null,(e=>{if(e instanceof jt)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new jt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((e=>{let[t,n]=e;const[r,o]=t.split(":");return{reason:r,category:o,quantity:n}}))}_flushOutcomes(){e&&l.log("Flushing outcomes...");const t=this._clearOutcomes();if(0===t.length)return void(e&&l.log("No outcomes to send"));if(!this._dsn)return void(e&&l.log("No dsn provided, will not send outcomes"));e&&l.log("Sending outcomes:",t);const n=(r=t,kt((o=this._options.tunnel&&Mt(this._dsn))?{dsn:o}:{},[[{type:"client_report"},{timestamp:ee(),discarded_events:r}]]));var r,o;this.sendEnvelope(n)}}function zt(e){return void 0===e.type}function Gt(e){return"transaction"===e.type}const qt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Ht(e,t){const n=$t(e,t),r={type:Jt(t),value:Kt(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Vt(e,t){return{exception:{values:[Ht(e,t)]}}}function $t(e,t){const n=t.stacktrace||t.stack||"",r=function(e){return e&&Zt.test(e.message)?1:0}(t),o=function(e){return"number"==typeof e.framesToPop?e.framesToPop:0}(t);try{return e(n,r,o)}catch(e){}return[]}const Zt=/Minified React error #\d+;/i;function Xt(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function Jt(e){const t=e&&e.name;return!t&&Xt(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":t}function Kt(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:Xt(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}function Yt(e,t,n,r,o){let i;if(v(t)&&t.error)return Vt(e,t.error);if(_(t)||y(t,"DOMException")){const o=t;if("stack"in t)i=Vt(e,t);else{const t=o.name||(_(o)?"DOMError":"DOMException"),s=o.message?`${t}: ${o.message}`:t;i=Qt(e,s,n,r),V(i,s)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return m(t)?Vt(e,t):w(t)||T(t)?(i=function(e,t,n,r){const o=be(),i=o&&o.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}(t),a={__serialized__:$e(t,i)};if(s)return{exception:{values:[Ht(e,s)]},extra:a};const c={exception:{values:[{type:T(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:en(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=$t(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}(e,t,n,o),$(i,{synthetic:!0}),i):(i=Qt(e,t,n,r),V(i,`${t}`,void 0),$(i,{synthetic:!0}),i)}function Qt(e,t,n,r){const o={};if(r&&n){const r=$t(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(E(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function en(e,t){let{isUnhandledRejection:n}=t;const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;const n=Object.keys(U(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return I(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:I(r,t)}return""}(e),o=n?"promise rejection":"exception";return v(e)?`Event \`ErrorEvent\` captured as ${o} with message \`${e.message}\``:T(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${o}`:`Object captured as ${o} with keys: ${r}`}const tn=i;let nn,rn,on,sn=0;function an(){return sn>0}function cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(F(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{const r=n.map((e=>cn(e,t)));return e.apply(this,r)}catch(e){throw sn++,setTimeout((()=>{sn--})),function(){const e=me(Y());for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(2===n.length){const[t,r]=n;return t?e.withSetScope(t,r):e.withScope(r)}e.withScope(n[0])}((r=>{r.addEventProcessor((e=>(t.mechanism&&(V(e,void 0,void 0),$(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),lt(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}N(n,e),x(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}class un extends Wt{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[t],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"npm";const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:o}))),version:o}),e._metadata=i}(t,"browser",["browser"],tn.SENTRY_SDK_SOURCE||"npm"),super(t),t.sendClientReports&&tn.document&&tn.document.addEventListener("visibilitychange",(()=>{"hidden"===tn.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,r){const o=Yt(e,t,n&&n.syntheticException||void 0,r);return $(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),We(o)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2?arguments[2]:void 0;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=Qt(e,t,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),We(i)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(qt&&l.warn("SDK not enabled, will not capture user feedback."));const t=function(e,t){let{metadata:n,tunnel:r,dsn:o}=t;const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...n&&n.sdk&&{sdk:{name:n.sdk.name,version:n.sdk.version}},...!!r&&!!o&&{dsn:Mt(o)}},s=function(e){return[{type:"user_report"},e]}(e);return kt(i,[s])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}function ln(){if(!St.document)return;const e=bt.bind(null,"dom"),t=pn(e,!0);St.document.addEventListener("click",t,!1),St.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=St[t]&&St[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(L(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){const r=pn(e);s.handler=r,t.call(this,n,r,o)}s.refCount++}catch(e){}return t.call(this,n,r,o)}})),L(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function pn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;x(n,"_sentryCaptured",!0),r&&!r._sentryId&&x(r,"_sentryId",G());const o="keypress"===n.type?"input":n.type;(function(e){if(e.type!==rn)return!1;try{if(!e.target||e.target._sentryId!==on)return!1}catch(e){}return!0})(n)||(e({event:n,name:o,global:t}),rn=n.type,on=r?r._sentryId:void 0),clearTimeout(nn),nn=St.setTimeout((()=>{on=void 0,rn=void 0}),1e3)}}const dn="__sentry_xhr_v3__";function fn(){if(!St.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=1e3*te(),o=b(n[0])?n[0].toUpperCase():void 0,i=function(e){if(b(e))return e;try{return e.toString()}catch(e){}}(n[1]);if(!o||!i)return e.apply(t,n);t[dn]={method:o,url:i,request_headers:{}},"POST"===o&&i.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const s=()=>{const e=t[dn];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}bt("xhr",{endTimestamp:1e3*te(),startTimestamp:r,xhr:t})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(s(),e.apply(t,n))}):t.addEventListener("readystatechange",s),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,i=t[dn];return i&&b(r)&&b(o)&&(i.request_headers[r.toLowerCase()]=o),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[dn];return r?(void 0!==n[0]&&(r.body=n[0]),bt("xhr",{startTimestamp:1e3*te(),xhr:t}),e.apply(t,n)):e.apply(t,n)}})}function hn(){"console"in i&&a.forEach((function(e){e in i.console&&L(i.console,e,(function(t){return c[e]=t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];bt("console",{args:n,level:e});const o=c[e];o&&o.apply(i.console,n)}}))}))}function gn(e,t){return!!e&&"object"==typeof e&&!!e[t]}function mn(e){return"string"==typeof e?e:e?gn(e,"url")?e.url:e.toString?e.toString():"":""}const yn=100;function vn(e,t){const n=be(),r=ve();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=yn}=n.getOptions();if(i<=0)return;const s={timestamp:ee(),...e},a=o?u((()=>o(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,i))}const _n=["fatal","error","warning","log","info","debug"];function bn(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function En(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Sn=function(){const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"Breadcrumbs",setup(n){var r;e.console&&function(e){const t="console";vt(t,e),_t(t,hn)}(function(e){return function(t){if(be()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:(r=t.level,"warn"===r?"warning":_n.includes(r)?r:"log"),message:A(t.args," ")};var r;if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${A(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}vn(n,{input:t.args,level:t.level})}}(n)),e.dom&&(r=function(e,t){return function(n){if(be()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>1024&&(qt&&l.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=1024),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=P(t,{keyAttrs:i,maxStringLength:s}),o=function(e){if(!M.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),vn(a,{event:n.event,name:n.name,global:n.global})}}(n,e.dom),vt("dom",r),_t("dom",ln)),e.xhr&&function(e){vt("xhr",e),_t("xhr",fn)}(function(e){return function(t){if(be()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[dn];if(!n||!r||!o)return;const{method:i,url:s,status_code:a,body:c}=o,u={method:i,url:s,status_code:a},l={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r};vn({category:"xhr",data:u,type:"http",level:bn(a)},l)}}(n)),e.fetch&&function(e){const n="fetch";vt(n,e),_t(n,(()=>function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!function(){if("string"==typeof EdgeRuntime)return!0;if(!Fe())return!1;if(Ue(Ne.fetch))return!0;let e=!1;const n=Ne.document;if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t),t.contentWindow&&t.contentWindow.fetch&&(e=Ue(t.contentWindow.fetch)),n.head.removeChild(t)}catch(e){t&&l.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}()||L(i,"fetch",(function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const{method:s,url:a}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:mn(t),method:gn(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:mn(t),method:gn(t,"method")?String(t.method).toUpperCase():"GET"}}(r),c={args:r,fetchData:{method:s,url:a},startTimestamp:1e3*te()};e||bt("fetch",{...c});const u=(new Error).stack;return t.apply(i,r).then((async t=>(e?e(t):bt("fetch",{...c,endTimestamp:1e3*te(),response:t}),t)),(e=>{throw bt("fetch",{...c,endTimestamp:1e3*te(),error:e}),m(e)&&void 0===e.stack&&(e.stack=u,x(e,"framesToPop",1)),e}))}}))}(void 0,undefined)))}(function(e){return function(t){if(be()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)vn({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r});else{const e=t.response,o={...t.fetchData,status_code:e&&e.status},i={input:t.args,response:e,startTimestamp:n,endTimestamp:r};vn({category:"fetch",data:o,type:"http",level:bn(o.status_code)},i)}}}(n)),e.history&&Tt(function(e){return function(t){if(be()!==e)return;let n=t.from,r=t.to;const o=En(tn.location.href);let i=n?En(n):void 0;const s=En(r);i&&i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),vn({category:"navigation",data:{from:n,to:r}})}}(n)),e.sentry&&n.on("beforeSendEvent",function(e){return function(t){be()===e&&vn({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:H(t)},{event:t})}}(n))}}},wn=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Tn=function(){const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&L(tn,"setTimeout",On),e.setInterval&&L(tn,"setInterval",On),e.requestAnimationFrame&&L(tn,"requestAnimationFrame",Cn),e.XMLHttpRequest&&"XMLHttpRequest"in tn&&L(XMLHttpRequest.prototype,"send",Rn);const t=e.eventTarget;t&&(Array.isArray(t)?t:wn).forEach(Mn)}}};function On(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];return n[0]=cn(o,{mechanism:{data:{function:ke(e)},handled:!1,type:"instrument"}}),e.apply(this,n)}}function Cn(e){return function(t){return e.apply(this,[cn(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ke(e)},handled:!1,type:"instrument"}})])}}function Rn(e){return function(){const t=this;["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in t&&"function"==typeof t[e]&&L(t,e,(function(t){const n={mechanism:{data:{function:e,handler:ke(t)},handled:!1,type:"instrument"}},r=F(t);return r&&(n.mechanism.data.handler=ke(r)),cn(t,n)}))}));for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.apply(this,r)}}function Mn(e){const t=tn,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(L(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=cn(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ke(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,cn(r,{mechanism:{data:{function:"addEventListener",handler:ke(r),target:e},handled:!1,type:"instrument"}}),o])}})),L(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}let Pn=null;function kn(){Pn=i.onerror,i.onerror=function(e,t,n,r,o){return bt("error",{column:r,error:o,line:n,msg:e,url:t}),!(!Pn||Pn.__SENTRY_LOADER__)&&Pn.apply(this,arguments)},i.onerror.__SENTRY_INSTRUMENTED__=!0}let In=null;function An(){In=i.onunhandledrejection,i.onunhandledrejection=function(e){return bt("unhandledrejection",e),!(In&&!In.__SENTRY_LOADER__)||In.apply(this,arguments)},i.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Dn=function(){const e={onerror:!0,onunhandledrejection:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(function(e){!function(){const t="error";vt(t,(t=>{const{stackParser:n,attachStacktrace:r}=xn();if(be()!==e||an())return;const{msg:o,url:i,line:s,column:a,error:c}=t,u=function(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,p=b(t)&&t.length>0?t:function(){try{return M.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:p,function:Te,in_app:!0,lineno:l}),e}(Yt(n,c||o,void 0,r,!1),i,s,a);u.level="error",pt(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})),_t(t,kn)}()}(t),Ln("onerror")),e.onunhandledrejection&&(function(e){!function(){const t="unhandledrejection";vt(t,(t=>{const{stackParser:n,attachStacktrace:r}=xn();if(be()!==e||an())return;const o=function(e){if(S(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),i=S(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Yt(n,o,void 0,r,!0);i.level="error",pt(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})})),_t(t,An)}()}(t),Ln("onunhandledrejection"))}}};function Ln(e){qt&&l.log(`Global Handler attached: ${e}`)}function xn(){const e=be();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function Nn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(!(i.exception&&i.exception.values&&s&&C(s.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var c,u;a&&(i.exception.values=(c=Fn(e,t,o,s.originalException,r,i.exception.values,a,0),u=n,c.map((e=>(e.value&&(e.value=I(e.value,u)),e)))))}function Fn(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(C(r[o],Error)){Un(s,a);const i=e(t,r[o]),u=c.length;jn(i,o,u,a),c=Fn(e,t,n,r[o],o,[i,...c],i,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(C(r,Error)){Un(s,a);const u=e(t,r),l=c.length;jn(u,`errors[${i}]`,l,a),c=Fn(e,t,n,r,o,[u,...c],u,l)}})),c}function Un(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function jn(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const Bn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,o){const i=o.getOptions();Nn(Ht,i.stackParser,i.maxValueLength,n,t,e,r)}}};function Wn(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?Te:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const zn=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Gn=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qn=/\((\S*)(?::(\d+))(?::(\d+))\)/,Hn=[30,e=>{const t=zn.exec(e);if(t){const[,e,n,r]=t;return Wn(e,Te,+n,+r)}const n=Gn.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=qn.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Jn(n[1]||Te,n[2]);return Wn(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],Vn=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$n=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Zn=[50,e=>{const t=Vn.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=$n.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Te;return[n,e]=Jn(n,e),Wn(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Xn=Re(Hn,Zn),Jn=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Te,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Kn="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Yn={};function Qn(e){Yn[e]=void 0}function er(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return ze(new jt("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Ge(((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{We(e).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}(t.bufferSize||64),o={};return{send:function(i){const s=[];if(At(i,((e,n)=>{const r=Ft(n);if(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return function(e,t){return e[t]||e.all||0}(e,t)>n}(o,r)){const o=tr(e,n);t.recordDroppedEvent("ratelimit_backoff",r,o)}else s.push(e)})),0===s.length)return We({});const a=kt(i[0],s),c=e=>{At(a,((n,r)=>{const o=tr(n,r);t.recordDroppedEvent(e,Ft(r),o)}))};return r.add((()=>n({body:Lt(a)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&e&&l.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),o=function(e,t){let{statusCode:n,headers:r}=t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();const i={...e},s=r&&r["x-sentry-rate-limits"],a=r&&r["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,r]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))"metric_bucket"===e&&r&&!r.split(";").includes("custom")||(i[e]=o+a);else i.all=o+a}else a?i.all=o+function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(a,o):429===n&&(i.all=o+6e4);return i}(o,t),t)),(e=>{throw c("network_error"),e})))).then((e=>e),(t=>{if(t instanceof jt)return e&&l.error("Skipped sending event because buffer is full."),c("queue_overflow"),We({});throw t}))},flush:e=>r.drain(e)}}function tr(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function nr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){const t=Yn[e];if(t)return t;let n=St[e];if(Ue(n))return Yn[e]=n.bind(St);const r=St.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(n=o[e]),r.head.removeChild(t)}catch(t){Kn&&l.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?Yn[e]=n.bind(St):n}("fetch"),n=0,r=0;return er(e,(function(o){const i=o.body.length;n+=i,r++;const s={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Qn("fetch"),ze("No fetch implementation available");try{return t(e.url,s).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Qn("fetch"),n-=i,r--,ze(e)}}))}function rr(){const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={defaultIntegrations:[J(),we(),Tn(),Sn(),Dn(),Bn(),Ae(),{name:"HttpContext",preprocessEvent(e){if(!tn.navigator&&!tn.location&&!tn.document)return;const t=e.request&&e.request.url||tn.location&&tn.location.href,{referrer:n}=tn.document||{},{userAgent:r}=tn.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}}],release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:tn.SENTRY_RELEASE&&tn.SENTRY_RELEASE.id?tn.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==e.defaultIntegrations&&delete e.defaultIntegrations,{...t,...e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});if(!t.skipBrowserExtensionCheck&&function(){const e=void 0!==tn.window&&tn;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,r=tn.location&&tn.location.href||"",o=!!n&&tn===tn.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),i=void 0!==e.nw;return!!n&&!o&&!i}())return void u((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));qt&&(Fe()||l.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:(r=t.stackParser||Xn,Array.isArray(r)?Re(...r):r),integrations:d(t),transport:t.transport||nr};var r;const o=function(t,n){!0===n.debug&&(e?l.enable():u((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),ye().update(n.initialScope);const r=new t(n);return function(e){ye().setClient(e)}(r),r.init(),r}(un,n);return t.autoSessionTracking&&(void 0!==tn.document?(dt({ignoreDuration:!0}),gt(),Tt((e=>{let{from:t,to:n}=e;void 0!==t&&t!==n&&(dt({ignoreDuration:!0}),gt())}))):qt&&l.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")),o}var or,ir,sr,ar,cr,ur,lr,pr,dr,fr,hr,gr,mr,yr,vr,_r,br,Er,Sr,wr,Tr,Or,Cr,Rr,Mr,Pr,kr,Ir,Ar,Dr;!function(e){e.FcmMessagesCacheId="lw_updater_fcm_messages_cache_id",e.GeneralCacheId="lw_updater_general_cache_id",e.RegistrationCacheId="lw_updater_registration_cache"}(or||(or={})),function(e){e.DmsDataCacheId="lw_dms_data_cache",e.DmsManagerConfigCacheId="lw_dms_manager_config_cache",e.CheckInDeviceInterval="lw_dms_check_in",e.RetryDMSRegTimeout="lw_retry_dms_registration_timeout",e[e.CheckInDeviceElapsed_ms=3e5]="CheckInDeviceElapsed_ms"}(ir||(ir={})),function(e){e[e.WalledGardenBasedInterval=3e4]="WalledGardenBasedInterval",e[e.DefaultPollingInterval=3e5]="DefaultPollingInterval"}(sr||(sr={})),function(e){e.KeepAliveCacheId="lw_keep_alive_cache_id"}(ar||(ar={})),function(e){e.ContentAware="ca"}(cr||(cr={})),function(e){e.HandleVerdictQueueInterval="lw_handle_verdict_queue_interval",e.EvictOldResponsesInterval="lw_evict_old_responses",e.VerdictRawResponseCacheId="lw_verdict_raw_response_cache",e.FallbackVerdictsCacheId="lw_fallback_verdicts_cache",e.VerdictResponseTimeCacheId="verdict_response_time_cache",e.VerdictYoutubeQueryCacheId="verdict_youtube_query_cache",e.VerdictClientFallback="client_fallback",e.CustomHeaderCacheId="lw_custom_header_cache",e.CustomHeaderCacheCleanIntervalId="lw_custom_header_cache_interval_id",e[e.CustomHeaderCacheCleanInterval=3e5]="CustomHeaderCacheCleanInterval",e[e.CustomHeaderCacheExpireTime=36e5]="CustomHeaderCacheExpireTime"}(ur||(ur={})),function(e){e.PurgeOldVerdictEntries="purge_old_verdict_entries"}(lr||(lr={})),function(e){e.EvictOldResponsesInterval="lw_evict_old_responses",e.VerdictResponseCacheId="lw_verdict_response_cache"}(pr||(pr={})),function(e){e.ConfigurationCacheId="lw_configuration_cache",e[e.ConfigLoadTimeout_ms=1e4]="ConfigLoadTimeout_ms",e[e.ConfigFetchInitialInterval=1e3]="ConfigFetchInitialInterval",e[e.ConfigFetchMaxInterval=3e4]="ConfigFetchMaxInterval",e[e.ConfigFetchMaxElapsedTime=9e4]="ConfigFetchMaxElapsedTime",e[e.ConfigFetchRandomizationFactor=.1]="ConfigFetchRandomizationFactor",e[e.ConfigFetchMultiplier=3]="ConfigFetchMultiplier"}(dr||(dr={})),function(e){e.ChatDataCacheId="lw_chat_data_cache",e.OpenChatTimeout="lw_open_chat_timeout"}(fr||(fr={})),function(e){e.ClassConfigRefreshTimeout="lw_class_config_refresh"}(hr||(hr={})),function(e){e.FocusLockCheckTimeout="lw_tabs_focuslock_check",e.ScreenshotUploadInterval="lw_screenshot_upload_interval",e.TabsDataCacheId="lw_tabs_data_cache"}(gr||(gr={})),function(e){e.PeriodicLoginInterval="lw_periodic_login",e.WhoamiLoginInterval="lw_whoami_login",e.FzboxPollInterval="lw_fzbox_poll",e.PeriodicLogsUploadInterval="lw_periodic_logs_upload_interval",e.MainDataCacheId="lw_main_data_cache",e.DevDataCacheId="lw_dev_data_cache",e.LoadingConfiKey="lw_loading_config_key",e.ConfigUpdateBackoffRetryStateKey="lw_config_update_backoff_retry_state_key",e.RemainingUpdatesKey="lw_remaining_updates_key",e.DevBuildReloadedKey="lw_dev_build_reloaded_key",e[e.ResourceLimitThresholdCheckInterval=72e5]="ResourceLimitThresholdCheckInterval"}(mr||(mr={})),function(e){e.CacheId="lw_companion_cache",e[e.MaxReconnectionAttempts=5]="MaxReconnectionAttempts",e[e.DeltaTimeout=5e3]="DeltaTimeout",e[e.MaxRetryRegistrationInterval_ms=3e4]="MaxRetryRegistrationInterval_ms"}(yr||(yr={})),function(e){e.CacheId="lw_system_config_cache"}(vr||(vr={})),function(e){e.CacheId="lw_delegation_config_cache",e.DelegationChangeScheduleId="lw_delegation_change_schedule_id"}(_r||(_r={})),function(e){e.ALL="all",e.BLOCKED="blocked",e.NONE="none"}(br||(br={})),function(e){e.CacheId="lw_content_aware_config_cache"}(Er||(Er={})),function(e){e.login="LOGIN",e.logout="LOGOUT",e.isLoggedIn="IS_LOGGED_IN",e.resetConfig="RESET-CONFIG",e.UpdateDynamicConfig="UPDATE-CONFIG-ALL"}(Sr||(Sr={})),function(e){e.active="ACTIVE",e.suspended="SUSPENDED"}(wr||(wr={})),function(e){e.PartialFailedCacheId="lw_partial_failed_cache",e.AuthenticationData="lw_authentication_data_cache",e.AuthTokenKey="auth_token"}(Tr||(Tr={})),function(e){e.ConnectionsCacheId="lw_connections_cache",e.ConnectionsUploadInterval="lw_Connections_upload_interval",e.TabsCacheId="lw_tabs_cache",e.UploadInfoCacheId="lw_upload_info_cache",e.mainFrameRequestType="main_frame",e.eventTypeSendHeaders="sendHeaders",e.eventTypeBeforeRequest="beforeRequest",e.eventTypeHeadersReceived="headersReceived",e.eventTypeCompleted="completed"}(Or||(Or={})),function(e){e.LastScreenshotCacheId="last_screenshot_cache"}(Cr||(Cr={})),function(e){e.SchedulesDataCacheId="lw_schedule_manager_data_cache_id"}(Rr||(Rr={})),function(e){e.ConfigUpdate="config_update_with_delay",e.ConfigUpdateBackoffRetry="config_update_backoff_retry",e.CaptureTabAndSend="capture_tab_and_send",e.SendRuntimeMessage="send_runtime_message",e.PrintBlockedMessage="print_blocked_message",e.CreateNewChromeTab="create_new_chrome_tab"}(Mr||(Mr={})),function(e){e.CONFIG_UPDATE="CONFIG_UPDATE",e.OPEN_TAB="OPEN_TAB",e.CLOSE_TAB="CLOSE_TAB",e.MESSAGE="MESSAGE",e.CLASS_STARTED="CLASS_STARTED",e.POLICY_UPDATE="POLICY_UPDATE",e.INIT_P2P="INIT_P2P"}(Pr||(Pr={})),function(e){e.Error="logging__error",e.Warning="logging__warning",e.Message="logging__message",e.Debug="logging__debug"}(kr||(kr={})),function(e){e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.DEBUG="DEBUG"}(Ir||(Ir={})),function(e){e.InitOffscreenDocument="init_offscreen_socument_message",e.RegisterExtension="register_extension_with_native_agent",e.UnregisterExtension="unregister_extension_from_native_agent",e.RegisterClasswizeEventFail="register_extension_with_native_agent_classwize_events_fail",e.RegisterClasswizeEventMessage="register_extension_with_native_agent_classwize_events_Message",e.IsExtensionRegistered="is_extension_registered_with_native_agent",e.CompanionMessage="message_from_native_agent",e.CompanionErrorMessage="error_message_from_native_agent",e.RecoverCompanionStream="recover_companion_stream",e.RetryRegistration="retry_registration_with_native_agent",e.IpAddressChangeRoutine="ip_address_change_routine",e.TabsActivated="tabs_activated_message",e.UrlUpdatedInTab="url_updated_in_tab",e.P2PInitSignaler="p2p_init_signaler_message",e.P2PSetCloseTimeouts="p2p_set_close_timeouts_message",e.P2PGetScreenshot="p2p_get_screenshot_message",e.P2PGetTabs="p2p_get_tabs_message",e.UtilLocalIpUpdated="util_local_ip_updated_message",e.UtilResizeAndCompressImage="util_resize_and_compress_image",e.BroadcastWakeUpCall="cachescheduler_broadcast_wakeup_call",e.BroadcastScheduleTime="schedule-time-ee236fce-1426-4975-9d56-2ce4e8becd02",e.ChatBubbleStatus="chat_status",e.ChatInfo="chat_info",e.ChatGetLastMessage="last_chat_message",e.ChatClearLastMessage="clear_last_chat_message",e.UIGetStatus="ui_get_status",e.UIReloadConfig="ui_reload_config",e.UISendLogs="ui_send_logs",e.UserOverride="user_override",e.UpdaterNewMessage="updater_new_message",e.GetSafeguardVerdict="get_safe_guard_verdict",e.RedirectWebPage="redirect_web_page",e.EventMessage="event_service_message",e.InitAutoAuth="init_auto_auth",e.GetAuthCookie="get_auth_cookie",e.GetAuthToken="get_auth_token",e.UploadLogData="upload_log_data",e.UpdateOffscreenConfig="update_offscreen_config",e.MainConfigUpdated="main_config_updated",e.OffScreenLogMessage="Off_screen_log_message",e.GetManifestInfo="get_manifest_info",e.Token="TOKEN",e.ChatConfigUpdate="CHAT_CONFIG_UPDATE",e.UpdateTotalUnreadCount="UPDATE_TOTAL_UNREAD_COUNT",e.OpenChatClassroom="OPEN_CHAT_CLASSROOM",e.GoogleAuthenticate="GOOGLE_AUTHENTICATE",e.NativeTokenAuthenticate="NATIVE_TOKEN_AUTHENTICATE",e.GetBrowserType="get_browser_type",e.GetBrowserDetails="get_browser_details",e.CheckIfDomainIsBlocked="check_if_domain_is_blocked",e.ExtractFallbackDomains="extract_fallback_domains",e.LogMessage="log_message",e.InitOffscreenOpenTelemetry="init-offscreen-opentelemetry",e.SentryGetUserDetails="sentry-get-user-details",e.ChatLogMessage="chat-log-message",e.ReloadPopUp="reload-popup",e.PopupIsReloading="popup-is-reloading",e.PopupIsNotReloading="popup-is-not-reloading"}(Ar||(Ar={})),function(e){e.companion="companion",e.companionLite="companion_lite",e.proxyFilter="proxy_filter",e.dns_filter="dns_filter",e.classroom="classroom",e.liteModeEnabled="companion-mode-lite-enabled"}(Dr||(Dr={}));const Lr="http://127.0.0.1:5769";var xr,Nr;(Nr=xr||(xr={})).chrome="chrome",Nr.edge="edge";const Fr={dsn:"https://c17cd3300c4e109ad958146b698040aa@o4507960794546176.ingest.us.sentry.io/4507960797102080",tracesSampleRate:1,sampleRate:1,ignoreErrors:["Could not establish connection. Receiving end does not exist."]};const Ur=e=>lt(e),jr=e=>{var t;if(!(e&&e.extensionVersion&&e.extensionName&&e.buildENV))return;const n=null==e?void 0:e.extensionVersion,r=null===(t=null==e?void 0:e.extensionName)||void 0===t?void 0:t.toLowerCase().replace(/ /g,"-");let o="prod";return"development"===(null==e?void 0:e.buildENV)&&(o="local-dev"),`${r}.${o}@${n}`},Br=e=>{var t,n;e.userIdentifier&&e.applianceId&&(n={id:e.userIdentifier},ve().setUser(n),t=e.applianceId,ve().setTag("applianceId",t))};(e=>{const t=jr(e);rr(Object.assign(Object.assign({},Fr),{release:t}))})((()=>{var e;if(void 0===(null===(e=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===e?void 0:e.getManifest))return;const t=chrome.runtime.getManifest();return{extensionVersion:t.version,extensionName:t.name,buildENV:"production"}})()),function(){var e,t,n,r;e=this,t=void 0,r=function*(){chrome.runtime.sendMessage({type:Ar.SentryGetUserDetails},(e=>{e&&Br(e)}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}();var Wr=n(409),zr=n(518),Gr=n(635),qr=n(458),Hr=n(776);const Vr=(e,...t)=>{Jr(kr.Error,e,t)},$r=(e,...t)=>{Jr(kr.Warning,e,t)},Zr=(e,...t)=>{Jr(kr.Message,e,t)},Xr=(e,...t)=>{Jr(kr.Debug,e,t)},Jr=(e,t,...n)=>{Nh.sendMesage({type:Ar.OffScreenLogMessage,logLevel:e,message:t,optionalParams:n})};class Kr{static generate(){return new this}static sendEventToServiceWorker(e,t){Nh.sendMesage({type:Ar.EventMessage,eventType:e,data:t})}}class Yr extends Kr{connect(){Yr.isConnected||Yr.connectToClasswizeStream()}disconnect(e=!1){Yr.keepReconnecting=e,Yr.closeStream()}static connectToClasswizeStream(){Zr("Connecting to Classwize Event Service"),Yr.eventStream=Yr.eventClient.receiveEvents(new qr.Empty),Yr.keepReconnecting=!0,Yr.eventStream.on("data",(e=>{var t;const n=null===(t=e.getMessages())||void 0===t?void 0:t.toObject();if(n){const e=Object.keys(Hr.EventType).find((e=>Hr.EventType[e]===n.event));Yr.handleClasswizeEvent(Pr[e],n)}})).on("end",(e=>{$r(`end: ${e}`),0!=(null==e?void 0:e.code)&&($r("Classwize Event Service stream has been terminated"),Yr.keepReconnecting&&Yr.reconnectToClasswize())})),Yr.isConnected=!0}static reconnectToClasswize(){return e=this,t=void 0,r=function*(){Yr.closeStream(),setTimeout((()=>{1===yc.getActiveEventServiceType()&&Yr.connectToClasswizeStream()}),1e3)},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}static closeStream(){Yr.isConnected&&(Yr.eventStream.cancel(),Yr.isConnected=!1)}static handleClasswizeEvent(e,t){let n={};try{n=JSON.parse(t.value)}catch(e){Ur(e),n={}}Kr.sendEventToServiceWorker(e,n)}}Yr.eventClient=new Gr.T(Lr),Yr.isConnected=!1,Yr.keepReconnecting=!0;const Qr=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e));class eo extends Error{}class to extends eo{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class no extends eo{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class ro extends eo{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class oo extends eo{}class io extends eo{constructor(e){super(`Invalid unit ${e}`)}}class so extends eo{}class ao extends eo{constructor(){super("Zone is an abstract class")}}const co="numeric",uo="short",lo="long",po={year:co,month:co,day:co},fo={year:co,month:uo,day:co},ho={year:co,month:uo,day:co,weekday:uo},go={year:co,month:lo,day:co},mo={year:co,month:lo,day:co,weekday:lo},yo={hour:co,minute:co},vo={hour:co,minute:co,second:co},_o={hour:co,minute:co,second:co,timeZoneName:uo},bo={hour:co,minute:co,second:co,timeZoneName:lo},Eo={hour:co,minute:co,hourCycle:"h23"},So={hour:co,minute:co,second:co,hourCycle:"h23"},wo={hour:co,minute:co,second:co,hourCycle:"h23",timeZoneName:uo},To={hour:co,minute:co,second:co,hourCycle:"h23",timeZoneName:lo},Oo={year:co,month:co,day:co,hour:co,minute:co},Co={year:co,month:co,day:co,hour:co,minute:co,second:co},Ro={year:co,month:uo,day:co,hour:co,minute:co},Mo={year:co,month:uo,day:co,hour:co,minute:co,second:co},Po={year:co,month:uo,day:co,weekday:uo,hour:co,minute:co},ko={year:co,month:lo,day:co,hour:co,minute:co,timeZoneName:uo},Io={year:co,month:lo,day:co,hour:co,minute:co,second:co,timeZoneName:uo},Ao={year:co,month:lo,day:co,weekday:lo,hour:co,minute:co,timeZoneName:lo},Do={year:co,month:lo,day:co,weekday:lo,hour:co,minute:co,second:co,timeZoneName:lo};class Lo{get type(){throw new ao}get name(){throw new ao}get ianaName(){return this.name}get isUniversal(){throw new ao}offsetName(e,t){throw new ao}formatOffset(e,t){throw new ao}offset(e){throw new ao}equals(e){throw new ao}get isValid(){throw new ao}}let xo=null;class No extends Lo{static get instance(){return null===xo&&(xo=new No),xo}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,t){let{format:n,locale:r}=t;return es(e,n,r)}formatOffset(e,t){return os(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let Fo={};const Uo={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let jo={};class Bo extends Lo{static create(e){return jo[e]||(jo[e]=new Bo(e)),jo[e]}static resetCache(){jo={},Fo={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=Bo.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,t){let{format:n,locale:r}=t;return es(e,n,r,this.name)}formatOffset(e,t){return os(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=(r=this.name,Fo[r]||(Fo[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Fo[r]);var r;let[o,i,s,a,c,u,l]=n.formatToParts?function(e,t){const n=e.formatToParts(t),r=[];for(let e=0;e<n.length;e++){const{type:t,value:o}=n[e],i=Uo[t];"era"===t?r[i]=o:Di(i)||(r[i]=parseInt(o,10))}return r}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,o,i,s,a,c,u,l]=r;return[s,o,i,a,c,u,l]}(n,t);"BC"===a&&(o=1-Math.abs(o));let p=+t;const d=p%1e3;return p-=d>=0?d:1e3+d,(Ji({year:o,month:i,day:s,hour:24===c?0:c,minute:u,second:l,millisecond:0})-p)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let Wo={},zo={};function Go(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=JSON.stringify([e,t]);let r=zo[n];return r||(r=new Intl.DateTimeFormat(e,t),zo[n]=r),r}let qo={},Ho={},Vo=null,$o={};function Zo(e,t,n,r){const o=e.listingMode();return"error"===o?null:"en"===o?n(t):r(t)}class Xo{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:o,...i}=n;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=JSON.stringify([e,t]);let r=qo[n];return r||(r=new Intl.NumberFormat(e,t),qo[n]=r),r}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return zi(this.floor?Math.floor(e):Vi(e,3),this.padTo)}}class Jo{constructor(e,t,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&Bo.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||r,this.dtf=Go(t,o)}format(){return this.originalZone?this.formatToParts().map((e=>{let{value:t}=e;return t})).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ko{constructor(e,t,n){this.opts={style:"long",...n},!t&&Ni()&&(this.rtf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{base:n,...r}=t,o=JSON.stringify([e,r]);let i=Ho[o];return i||(i=new Intl.RelativeTimeFormat(e,t),Ho[o]=i),i}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"always",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&i){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${o[e][0]}`;case-1:return n?"yesterday":`last ${o[e][0]}`;case 0:return n?"today":`this ${o[e][0]}`}}const s=Object.is(t,-0)||t<0,a=Math.abs(t),c=1===a,u=o[e],l=r?c?u[1]:u[2]||u[1]:c?o[e][0]:e;return s?`${a} ${l} ago`:`in ${a} ${l}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Yo={firstDay:1,minimalDays:4,weekend:[6,7]};class Qo{static fromOpts(e){return Qo.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=e||yi.defaultLocale,s=i||(o?"en-US":Vo||(Vo=(new Intl.DateTimeFormat).resolvedOptions().locale,Vo)),a=t||yi.defaultNumberingSystem,c=n||yi.defaultOutputCalendar,u=Bi(r)||yi.defaultWeekSettings;return new Qo(s,a,c,u,i)}static resetCache(){Vo=null,zo={},qo={},Ho={}}static fromObject(){let{locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qo.create(e,t,n,r)}constructor(e,t,n,r,o){const[i,s,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,r;try{t=Go(e).resolvedOptions(),r=e}catch(o){const i=e.substring(0,n);t=Go(i).resolvedOptions(),r=i}const{numberingSystem:o,calendar:i}=t;return[r,o,i]}}(e);this.locale=i,this.numberingSystem=t||s||null,this.outputCalendar=n||a||null,this.weekSettings=r,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?Qo.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Bi(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone({...e,defaultToEN:!0})}redefaultToSystem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone({...e,defaultToEN:!1})}months(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Zo(this,e,us,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let n=1;n<=12;n++){const r=uc.utc(2009,n,1);t.push(e(r))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[r][e]}))}weekdays(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Zo(this,e,fs,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let n=1;n<=7;n++){const r=uc.utc(2016,11,13+n);t.push(e(r))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(){return Zo(this,void 0,(()=>hs),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[uc.utc(2016,11,13,9),uc.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return Zo(this,e,vs,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[uc.utc(-40,1,1),uc.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const r=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return r?r.value:null}numberFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Xo(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Jo(e,this.intl,t)}relFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ko(this.intl,this.isEnglish(),e)}listFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=JSON.stringify([e,t]);let r=Wo[n];return r||(r=new Intl.ListFormat(e,t),Wo[n]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Fi()?function(e){let t=$o[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,$o[e]=t}return t}(this.locale):Yo}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let ei=null;class ti extends Lo{static get utcInstance(){return null===ei&&(ei=new ti(0)),ei}static instance(e){return 0===e?ti.utcInstance:new ti(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ti(ts(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${os(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${os(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return os(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class ni extends Lo{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ri(e,t){if(Di(e)||null===e)return t;if(e instanceof Lo)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?No.instance:"utc"===n||"gmt"===n?ti.utcInstance:ti.parseSpecifier(n)||Bo.create(e)}return Li(e)?ti.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new ni(e)}const oi={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},ii={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},si=oi.hanidec.replace(/[\[|\]]/g,"").split("");let ai={};function ci(e){let{numberingSystem:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=t||"latn";return ai[r]||(ai[r]={}),ai[r][n]||(ai[r][n]=new RegExp(`${oi[r]}${n}`)),ai[r][n]}let ui,li=()=>Date.now(),pi="system",di=null,fi=null,hi=null,gi=60,mi=null;class yi{static get now(){return li}static set now(e){li=e}static set defaultZone(e){pi=e}static get defaultZone(){return ri(pi,No.instance)}static get defaultLocale(){return di}static set defaultLocale(e){di=e}static get defaultNumberingSystem(){return fi}static set defaultNumberingSystem(e){fi=e}static get defaultOutputCalendar(){return hi}static set defaultOutputCalendar(e){hi=e}static get defaultWeekSettings(){return mi}static set defaultWeekSettings(e){mi=Bi(e)}static get twoDigitCutoffYear(){return gi}static set twoDigitCutoffYear(e){gi=e%100}static get throwOnInvalid(){return ui}static set throwOnInvalid(e){ui=e}static resetCaches(){Qo.resetCache(),Bo.resetCache(),uc.resetCache(),ai={}}}class vi{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const _i=[0,31,59,90,120,151,181,212,243,273,304,334],bi=[0,31,60,91,121,152,182,213,244,274,305,335];function Ei(e,t){return new vi("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Si(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const o=r.getUTCDay();return 0===o?7:o}function wi(e,t,n){return n+($i(e)?bi:_i)[t-1]}function Ti(e,t){const n=$i(e)?bi:_i,r=n.findIndex((e=>e<t));return{month:r+1,day:t-n[r]}}function Oi(e,t){return(e-t+7)%7+1}function Ci(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const{year:r,month:o,day:i}=e,s=wi(r,o,i),a=Oi(Si(r,o,i),n);let c,u=Math.floor((s-a+14-t)/7);return u<1?(c=r-1,u=Yi(c,t,n)):u>Yi(r,t,n)?(c=r+1,u=1):c=r,{weekYear:c,weekNumber:u,weekday:a,...is(e)}}function Ri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const{weekYear:r,weekNumber:o,weekday:i}=e,s=Oi(Si(r,1,t),n),a=Zi(r);let c,u=7*o+i-s-7+t;u<1?(c=r-1,u+=Zi(c)):u>a?(c=r+1,u-=Zi(r)):c=r;const{month:l,day:p}=Ti(c,u);return{year:c,month:l,day:p,...is(e)}}function Mi(e){const{year:t,month:n,day:r}=e;return{year:t,ordinal:wi(t,n,r),...is(e)}}function Pi(e){const{year:t,ordinal:n}=e,{month:r,day:o}=Ti(t,n);return{year:t,month:r,day:o,...is(e)}}function ki(e,t){if(!Di(e.localWeekday)||!Di(e.localWeekNumber)||!Di(e.localWeekYear)){if(!Di(e.weekday)||!Di(e.weekNumber)||!Di(e.weekYear))throw new oo("Cannot mix locale-based week fields with ISO-based week fields");return Di(e.localWeekday)||(e.weekday=e.localWeekday),Di(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Di(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Ii(e){const t=xi(e.year),n=Wi(e.month,1,12),r=Wi(e.day,1,Xi(e.year,e.month));return t?n?!r&&Ei("day",e.day):Ei("month",e.month):Ei("year",e.year)}function Ai(e){const{hour:t,minute:n,second:r,millisecond:o}=e,i=Wi(t,0,23)||24===t&&0===n&&0===r&&0===o,s=Wi(n,0,59),a=Wi(r,0,59),c=Wi(o,0,999);return i?s?a?!c&&Ei("millisecond",o):Ei("second",r):Ei("minute",n):Ei("hour",t)}function Di(e){return void 0===e}function Li(e){return"number"==typeof e}function xi(e){return"number"==typeof e&&e%1==0}function Ni(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Fi(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Ui(e,t,n){if(0!==e.length)return e.reduce(((e,r)=>{const o=[t(r),r];return e&&n(e[0],o[0])===e[0]?e:o}),null)[1]}function ji(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bi(e){if(null==e)return null;if("object"!=typeof e)throw new so("Week settings must be an object");if(!Wi(e.firstDay,1,7)||!Wi(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!Wi(e,1,7))))throw new so("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Wi(e,t,n){return xi(e)&&e>=t&&e<=n}function zi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t=e<0?"-"+(""+-e).padStart(n,"0"):(""+e).padStart(n,"0"),t}function Gi(e){return Di(e)||null===e||""===e?void 0:parseInt(e,10)}function qi(e){return Di(e)||null===e||""===e?void 0:parseFloat(e)}function Hi(e){if(!Di(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Vi(e,t){const n=10**t;return(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Math.trunc:Math.round)(e*n)/n}function $i(e){return e%4==0&&(e%100!=0||e%400==0)}function Zi(e){return $i(e)?366:365}function Xi(e,t){const n=(r=t-1)-12*Math.floor(r/12)+1;var r;return 2===n?$i(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Ji(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Ki(e,t,n){return-Oi(Si(e,1,t),n)+t-1}function Yi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=Ki(e,t,n),o=Ki(e+1,t,n);return(Zi(e)-r+o)/7}function Qi(e){return e>99?e:e>yi.twoDigitCutoffYear?1900+e:2e3+e}function es(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(i.timeZone=r);const s={timeZoneName:t,...i},a=new Intl.DateTimeFormat(n,s).formatToParts(o).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function ts(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function ns(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new so(`Invalid unit value ${e}`);return t}function rs(e,t){const n={};for(const r in e)if(ji(e,r)){const o=e[r];if(null==o)continue;n[t(r)]=ns(o)}return n}function os(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),o=e>=0?"+":"-";switch(t){case"short":return`${o}${zi(n,2)}:${zi(r,2)}`;case"narrow":return`${o}${n}${r>0?`:${r}`:""}`;case"techie":return`${o}${zi(n,2)}${zi(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function is(e){return function(e){return["hour","minute","second","millisecond"].reduce(((t,n)=>(t[n]=e[n],t)),{})}(e)}const ss=["January","February","March","April","May","June","July","August","September","October","November","December"],as=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cs=["J","F","M","A","M","J","J","A","S","O","N","D"];function us(e){switch(e){case"narrow":return[...cs];case"short":return[...as];case"long":return[...ss];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const ls=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ps=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ds=["M","T","W","T","F","S","S"];function fs(e){switch(e){case"narrow":return[...ds];case"short":return[...ps];case"long":return[...ls];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const hs=["AM","PM"],gs=["Before Christ","Anno Domini"],ms=["BC","AD"],ys=["B","A"];function vs(e){switch(e){case"narrow":return[...ys];case"short":return[...ms];case"long":return[...gs];default:return null}}function _s(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const bs={D:po,DD:fo,DDD:go,DDDD:mo,t:yo,tt:vo,ttt:_o,tttt:bo,T:Eo,TT:So,TTT:wo,TTTT:To,f:Oo,ff:Ro,fff:ko,ffff:Ao,F:Co,FF:Mo,FFF:Io,FFFF:Do};class Es{static create(e){return new Es(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}static parseFormat(e){let t=null,n="",r=!1;const o=[];for(let i=0;i<e.length;i++){const s=e.charAt(i);"'"===s?(n.length>0&&o.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||s===t?n+=s:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=s,t=s)}return n.length>0&&o.push({literal:r||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(e){return bs[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.opts.forceSimple)return zi(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,o=(t,n)=>this.loc.extract(e,t,n),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",s=(t,r)=>n?function(e,t){return us(t)[e.month-1]}(e,t):o(r?{month:t}:{month:t,day:"numeric"},"month"),a=(t,r)=>n?function(e,t){return fs(t)[e.weekday-1]}(e,t):o(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=Es.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return vs(t)[e.year<0?0:1]}(e,t):o({era:t},"era");return _s(Es.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return n?function(e){return hs[e.hour<12?0:1]}(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return r?o({day:"numeric"},"day"):this.num(e.day);case"dd":return r?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return r?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return s("short",!0);case"LLLL":return s("long",!0);case"LLLLL":return s("narrow",!0);case"M":return r?o({month:"numeric"},"month"):this.num(e.month);case"MM":return r?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return s("short",!1);case"MMMM":return s("long",!1);case"MMMMM":return s("narrow",!1);case"y":return r?o({year:"numeric"},"year"):this.num(e.year);case"yy":return r?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=Es.parseFormat(t),o=r.reduce(((e,t)=>{let{literal:n,val:r}=t;return n?e:e.concat(r)}),[]);return _s(r,(e=>t=>{const r=n(t);return r?this.num(e.get(r),t.length):t})(e.shiftTo(...o.map(n).filter((e=>e)))))}}const Ss=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ws(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e+t.source),"");return RegExp(`^${r}$`)}function Ts(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((t,n)=>{let[r,o,i]=t;const[s,a,c]=n(e,i);return[{...r,...s},a||o,c]}),[{},null,1]).slice(0,2)}function Os(e){if(null==e)return[null,null];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const[t,r]of n){const n=t.exec(e);if(n)return r(n)}return[null,null]}function Cs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{const r={};let o;for(o=0;o<t.length;o++)r[t[o]]=Gi(e[n+o]);return[r,null,n+o]}}const Rs=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ms=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Ps=RegExp(`${Ms.source}(?:${Rs.source}?(?:\\[(${Ss.source})\\])?)?`),ks=RegExp(`(?:T${Ps.source})?`),Is=Cs("weekYear","weekNumber","weekDay"),As=Cs("year","ordinal"),Ds=RegExp(`${Ms.source} ?(?:${Rs.source}|(${Ss.source}))?`),Ls=RegExp(`(?: ${Ds.source})?`);function xs(e,t,n){const r=e[t];return Di(r)?n:Gi(r)}function Ns(e,t){return[{hours:xs(e,t,0),minutes:xs(e,t+1,0),seconds:xs(e,t+2,0),milliseconds:Hi(e[t+3])},null,t+4]}function Fs(e,t){const n=!e[t]&&!e[t+1],r=ts(e[t+1],e[t+2]);return[{},n?null:ti.instance(r),t+3]}function Us(e,t){return[{},e[t]?Bo.create(e[t]):null,t+1]}const js=RegExp(`^T?${Ms.source}$`),Bs=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Ws(e){const[t,n,r,o,i,s,a,c,u]=e,l="-"===t[0],p=c&&"-"===c[0],d=function(e){return void 0!==e&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||e&&l)?-e:e};return[{years:d(qi(n)),months:d(qi(r)),weeks:d(qi(o)),days:d(qi(i)),hours:d(qi(s)),minutes:d(qi(a)),seconds:d(qi(c),"-0"===c),milliseconds:d(Hi(u),p)}]}const zs={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Gs(e,t,n,r,o,i,s){const a={year:2===t.length?Qi(Gi(t)):Gi(t),month:as.indexOf(n)+1,day:Gi(r),hour:Gi(o),minute:Gi(i)};return s&&(a.second=Gi(s)),e&&(a.weekday=e.length>3?ls.indexOf(e)+1:ps.indexOf(e)+1),a}const qs=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Hs(e){const[,t,n,r,o,i,s,a,c,u,l,p]=e,d=Gs(t,o,r,n,i,s,a);let f;return f=c?zs[c]:u?0:ts(l,p),[d,new ti(f)]}const Vs=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,$s=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Zs=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Xs(e){const[,t,n,r,o,i,s,a]=e;return[Gs(t,o,r,n,i,s,a),ti.utcInstance]}function Js(e){const[,t,n,r,o,i,s,a]=e;return[Gs(t,a,n,r,o,i,s),ti.utcInstance]}const Ks=ws(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ks),Ys=ws(/(\d{4})-?W(\d\d)(?:-?(\d))?/,ks),Qs=ws(/(\d{4})-?(\d{3})/,ks),ea=ws(Ps),ta=Ts((function(e,t){return[{year:xs(e,t),month:xs(e,t+1,1),day:xs(e,t+2,1)},null,t+3]}),Ns,Fs,Us),na=Ts(Is,Ns,Fs,Us),ra=Ts(As,Ns,Fs,Us),oa=Ts(Ns,Fs,Us),ia=Ts(Ns),sa=ws(/(\d{4})-(\d\d)-(\d\d)/,Ls),aa=ws(Ds),ca=Ts(Ns,Fs,Us),ua="Invalid Duration",la={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},pa={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...la},da={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...la},fa=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ha=fa.slice(0).reverse();function ga(e,t){const n={values:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new va(n)}function ma(e,t){let n=t.milliseconds??0;for(const r of ha.slice(1))t[r]&&(n+=t[r]*e[r].milliseconds);return n}function ya(e,t){const n=ma(e,t)<0?-1:1;fa.reduceRight(((r,o)=>{if(Di(t[o]))return r;if(r){const i=t[r]*n,s=e[o][r],a=Math.floor(i/s);t[o]+=a*n,t[r]-=a*s*n}return o}),null),fa.reduce(((n,r)=>{if(Di(t[r]))return n;if(n){const o=t[n]%1;t[n]-=o,t[r]+=o*e[n][r]}return r}),null)}class va{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?da:pa;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Qo.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return va.fromObject({milliseconds:e},t)}static fromObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||"object"!=typeof e)throw new so("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new va({values:rs(e,va.normalizeUnit),loc:Qo.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Li(e))return va.fromMillis(e);if(va.isDuration(e))return e;if("object"==typeof e)return va.fromObject(e);throw new so(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return Os(e,[Bs,Ws])}(e);return n?va.fromObject(n,t):va.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return Os(e,[js,ia])}(e);return n?va.fromObject(n,t):va.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new so("need to specify a reason the Duration is invalid");const n=e instanceof vi?e:new vi(e,t);if(yi.throwOnInvalid)throw new ro(n);return new va({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new io(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?Es.create(this.loc,n).formatDurationFromString(this,e):ua}toHuman(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return ua;const t=fa.map((t=>{const n=this.values[t];return Di(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Vi(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},uc.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ma(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=va.fromDurationLike(e),n={};for(const e of fa)(ji(t.values,e)||ji(this.values,e))&&(n[e]=t.get(e)+this.get(e));return ga(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=va.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=ns(e(this.values[n],n));return ga(this,{values:t},!0)}get(e){return this[va.normalizeUnit(e)]}set(e){return this.isValid?ga(this,{values:{...this.values,...rs(e,va.normalizeUnit)}}):this}reconfigure(){let{locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ga(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return ya(this.matrix,e),ga(this,{values:e},!0)}rescale(){return this.isValid?ga(this,{values:function(e){const t={};for(const[n,r]of Object.entries(e))0!==r&&(t[n]=r);return t}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!this.isValid)return this;if(0===t.length)return this;t=t.map((e=>va.normalizeUnit(e)));const r={},o={},i=this.toObject();let s;for(const e of fa)if(t.indexOf(e)>=0){s=e;let t=0;for(const n in o)t+=this.matrix[n][e]*o[n],o[n]=0;Li(i[e])&&(t+=i[e]);const n=Math.trunc(t);r[e]=n,o[e]=(1e3*t-1e3*n)/1e3}else Li(i[e])&&(o[e]=i[e]);for(const e in o)0!==o[e]&&(r[s]+=e===s?o[e]:o[e]/this.matrix[s][e]);return ya(this.matrix,r),ga(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return ga(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of fa)if(t=this.values[r],n=e.values[r],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const _a="Invalid Interval";class ba{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new so("need to specify a reason the Interval is invalid");const n=e instanceof vi?e:new vi(e,t);if(yi.throwOnInvalid)throw new no(n);return new ba({invalid:n})}static fromDateTimes(e,t){const n=lc(e),r=lc(t),o=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?ba.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:ba.invalid("missing or invalid end"):ba.invalid("missing or invalid start")}(n,r);return null==o?new ba({start:n,end:r}):o}static after(e,t){const n=va.fromDurationLike(t),r=lc(e);return ba.fromDateTimes(r,r.plus(n))}static before(e,t){const n=va.fromDurationLike(t),r=lc(e);return ba.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let e,o,i,s;try{e=uc.fromISO(n,t),o=e.isValid}catch(r){o=!1}try{i=uc.fromISO(r,t),s=i.isValid}catch(r){s=!1}if(o&&s)return ba.fromDateTimes(e,i);if(o){const n=va.fromISO(r,t);if(n.isValid)return ba.after(e,n)}else if(s){const e=va.fromISO(n,t);if(e.isValid)return ba.before(i,e)}}return ba.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds";return this.isValid?this.toDuration(e).get(e):NaN}count(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds",t=arguments.length>1?arguments[1]:void 0;if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return r=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set(){let{start:e,end:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?ba.fromDateTimes(e||this.s,t||this.e):this}splitAt(){if(!this.isValid)return[];for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.map(lc).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),o=[];let{s:i}=this,s=0;for(;i<this.e;){const e=r[s]||this.e,t=+e>+this.e?this.e:e;o.push(ba.fromDateTimes(i,t)),i=t,s+=1}return o}splitBy(e){const t=va.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:r}=this,o=1;const i=[];for(;r<this.e;){const e=this.start.plus(t.mapUnits((e=>e*o)));n=+e>+this.e?this.e:e,i.push(ba.fromDateTimes(r,n)),r=n,o+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:ba.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return ba.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce(((e,t)=>{let[n,r]=e;return r?r.overlaps(t)||r.abutsStart(t)?[n,r.union(t)]:[n.concat([r]),t]:[n,t]}),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],o=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),i=Array.prototype.concat(...o).sort(((e,t)=>e.time-t.time));for(const e of i)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&r.push(ba.fromDateTimes(t,e.time)),t=null);return ba.merge(r)}difference(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ba.xor([this].concat(t)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:_a}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?Es.create(this.s.loc.clone(t),e).formatInterval(this):_a}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:_a}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:_a}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:_a}toFormat(e){let{separator:t=" – "}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:_a}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):va.invalid(this.invalidReason)}mapEndpoints(e){return ba.fromDateTimes(e(this.s),e(this.e))}}class Ea{static hasDST(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi.defaultZone;const t=uc.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Bo.isValidZone(e)}static normalizeZone(e){return ri(e,yi.defaultZone)}static getStartOfWeek(){let{locale:e=null,locObj:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t||Qo.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek(){let{locale:e=null,locObj:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t||Qo.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays(){let{locale:e=null,locObj:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t||Qo.create(e)).getWeekendDays().slice()}static months(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:o="gregory"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||Qo.create(t,n,o)).months(e)}static monthsFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:o="gregory"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||Qo.create(t,n,o)).months(e,!0)}static weekdays(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||Qo.create(t,n,null)).weekdays(e)}static weekdaysFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||Qo.create(t,n,null)).weekdays(e,!0)}static meridiems(){let{locale:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qo.create(e).meridiems()}static eras(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"short",{locale:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qo.create(t,null,"gregory").eras(e)}static features(){return{relative:Ni(),localeWeek:Fi()}}}function Sa(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(va.fromMillis(r).as("days"))}function wa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return{regex:e,deser:e=>{let[n]=e;return t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(-1!==e[n].search(oi.hanidec))t+=si.indexOf(e[n]);else for(const e in ii){const[n,o]=ii[e];r>=n&&r<=o&&(t+=r-n)}}return parseInt(t,10)}return t}(n))}}}const Ta=`[ ${String.fromCharCode(160)}]`,Oa=new RegExp(Ta,"g");function Ca(e){return e.replace(/\./g,"\\.?").replace(Oa,Ta)}function Ra(e){return e.replace(/\./g,"").replace(Oa," ").toLowerCase()}function Ma(e,t){return null===e?null:{regex:RegExp(e.map(Ca).join("|")),deser:n=>{let[r]=n;return e.findIndex((e=>Ra(r)===Ra(e)))+t}}}function Pa(e,t){return{regex:e,deser:e=>{let[,t,n]=e;return ts(t,n)},groups:t}}function ka(e){return{regex:e,deser:e=>{let[t]=e;return t}}}const Ia={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Aa=null;function Da(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=Na(Es.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}class La{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Da(Es.parseFormat(t),e),this.units=this.tokens.map((t=>function(e,t){const n=ci(t),r=ci(t,"{2}"),o=ci(t,"{3}"),i=ci(t,"{4}"),s=ci(t,"{6}"),a=ci(t,"{1,2}"),c=ci(t,"{1,3}"),u=ci(t,"{1,6}"),l=ci(t,"{1,9}"),p=ci(t,"{2,4}"),d=ci(t,"{4,6}"),f=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:e=>{let[t]=e;return t},literal:!0};var t},h=(h=>{if(e.literal)return f(h);switch(h.val){case"G":return Ma(t.eras("short"),0);case"GG":return Ma(t.eras("long"),0);case"y":return wa(u);case"yy":case"kk":return wa(p,Qi);case"yyyy":case"kkkk":return wa(i);case"yyyyy":return wa(d);case"yyyyyy":return wa(s);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return wa(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return wa(r);case"MMM":return Ma(t.months("short",!0),1);case"MMMM":return Ma(t.months("long",!0),1);case"LLL":return Ma(t.months("short",!1),1);case"LLLL":return Ma(t.months("long",!1),1);case"o":case"S":return wa(c);case"ooo":case"SSS":return wa(o);case"u":return ka(l);case"uu":return ka(a);case"uuu":case"E":case"c":return wa(n);case"a":return Ma(t.meridiems(),0);case"EEE":return Ma(t.weekdays("short",!1),1);case"EEEE":return Ma(t.weekdays("long",!1),1);case"ccc":return Ma(t.weekdays("short",!0),1);case"cccc":return Ma(t.weekdays("long",!0),1);case"Z":case"ZZ":return Pa(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Pa(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return ka(/[a-z_+-/]{1,256}?/i);case" ":return ka(/[^\S\n\r]/);default:return f(h)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return h.token=e,h}(t,e))),this.disqualifyingUnit=this.units.find((e=>e.invalidReason)),!this.disqualifyingUnit){const[e,t]=[`^${(n=this.units).map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,n];this.regex=RegExp(e,"i"),this.handlers=t}var n}explainFromTokens(e){if(this.isValid){const[t,n]=function(e,t,n){const r=e.match(t);if(r){const e={};let t=1;for(const o in n)if(ji(n,o)){const i=n[o],s=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(r.slice(t,t+s))),t+=s}return[r,e]}return[r,{}]}(e,this.regex,this.handlers),[r,o,i]=n?function(e){let t,n=null;return Di(e.z)||(n=Bo.create(e.z)),Di(e.Z)||(n||(n=new ti(e.Z)),t=e.Z),Di(e.q)||(e.M=3*(e.q-1)+1),Di(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Di(e.u)||(e.S=Hi(e.u)),[Object.keys(e).reduce(((t,n)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(t[r]=e[n]),t}),{}),n,t]}(n):[null,null,void 0];if(ji(n,"a")&&ji(n,"H"))throw new oo("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:r,zone:o,specificOffset:i}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function xa(e,t,n){return new La(e,n).explainFromTokens(t)}function Na(e,t){if(!e)return null;const n=Es.create(t,e).dtFormatter((Aa||(Aa=uc.fromMillis(1555555555555)),Aa)),r=n.formatToParts(),o=n.resolvedOptions();return r.map((t=>function(e,t,n){const{type:r,value:o}=e;if("literal"===r){const e=/^\s+$/.test(o);return{literal:!e,val:e?" ":o}}const i=t[r];let s=r;"hour"===r&&(s=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=Ia[s];if("object"==typeof a&&(a=a[i]),a)return{literal:!1,val:a}}(t,e,o)))}const Fa="Invalid DateTime",Ua=864e13;function ja(e){return new vi("unsupported zone",`the zone "${e.name}" is not supported`)}function Ba(e){return null===e.weekData&&(e.weekData=Ci(e.c)),e.weekData}function Wa(e){return null===e.localWeekData&&(e.localWeekData=Ci(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function za(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new uc({...n,...t,old:n})}function Ga(e,t,n){let r=e-60*t*1e3;const o=n.offset(r);if(t===o)return[r,t];r-=60*(o-t)*1e3;const i=n.offset(r);return o===i?[r,o]:[e-60*Math.min(o,i)*1e3,Math.max(o,i)]}function qa(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Ha(e,t,n){return Ga(Ji(e),t,n)}function Va(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),o=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:r,month:o,day:Math.min(e.c.day,Xi(r,o))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},s=va.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Ji(i);let[c,u]=Ga(a,n,e.zone);return 0!==s&&(c+=s,u=e.zone.offset(c)),{ts:c,o:u}}function $a(e,t,n,r,o,i){const{setZone:s,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const r=t||a,o=uc.fromObject(e,{...n,zone:r,specificOffset:i});return s?o:o.setZone(a)}return uc.invalid(new vi("unparsable",`the input "${o}" can't be parsed as ${r}`))}function Za(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.isValid?Es.create(Qo.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Xa(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=zi(e.c.year,n?6:4),t?(r+="-",r+=zi(e.c.month),r+="-",r+=zi(e.c.day)):(r+=zi(e.c.month),r+=zi(e.c.day)),r}function Ja(e,t,n,r,o,i){let s=zi(e.c.hour);return t?(s+=":",s+=zi(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(s+=":")):s+=zi(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(s+=zi(e.c.second),0===e.c.millisecond&&r||(s+=".",s+=zi(e.c.millisecond,3))),o&&(e.isOffsetFixed&&0===e.offset&&!i?s+="Z":e.o<0?(s+="-",s+=zi(Math.trunc(-e.o/60)),s+=":",s+=zi(Math.trunc(-e.o%60))):(s+="+",s+=zi(Math.trunc(e.o/60)),s+=":",s+=zi(Math.trunc(e.o%60)))),i&&(s+="["+e.zone.ianaName+"]"),s}const Ka={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ya={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Qa={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ec=["year","month","day","hour","minute","second","millisecond"],tc=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],nc=["year","ordinal","hour","minute","second","millisecond"];function rc(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new io(e);return t}(e)}}function oc(e,t){const n=ri(t.zone,yi.defaultZone);if(!n.isValid)return uc.invalid(ja(n));const r=Qo.fromObject(t);let o,i;if(Di(e.year))o=yi.now();else{for(const t of ec)Di(e[t])&&(e[t]=Ka[t]);const t=Ii(e)||Ai(e);if(t)return uc.invalid(t);const r=function(e){return cc[e]||(void 0===ac&&(ac=yi.now()),cc[e]=e.offset(ac)),cc[e]}(n);[o,i]=Ha(e,r,n)}return new uc({ts:o,zone:n,loc:r,o:i})}function ic(e,t,n){const r=!!Di(n.round)||n.round,o=(e,o)=>(e=Vi(e,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,o)),i=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return o(i(n.unit),n.unit);for(const e of n.units){const t=i(e);if(Math.abs(t)>=1)return o(t,e)}return o(e>t?-0:0,n.units[n.units.length-1])}function sc(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let ac,cc={};class uc{constructor(e){const t=e.zone||yi.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new vi("invalid input"):null)||(t.isValid?null:ja(t));this.ts=Di(e.ts)?yi.now():e.ts;let r=null,o=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,o]=[e.old.c,e.old.o];else{const i=Li(e.o)&&!e.old?e.o:t.offset(this.ts);r=qa(this.ts,i),n=Number.isNaN(r.year)?new vi("invalid input"):null,r=n?null:r,o=n?null:i}this._zone=t,this.loc=e.loc||Qo.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=o,this.isLuxonDateTime=!0}static now(){return new uc({})}static local(){const[e,t]=sc(arguments),[n,r,o,i,s,a,c]=t;return oc({year:n,month:r,day:o,hour:i,minute:s,second:a,millisecond:c},e)}static utc(){const[e,t]=sc(arguments),[n,r,o,i,s,a,c]=t;return e.zone=ti.utcInstance,oc({year:n,month:r,day:o,hour:i,minute:s,second:a,millisecond:c},e)}static fromJSDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(r=e,"[object Date]"===Object.prototype.toString.call(r)?e.valueOf():NaN);var r;if(Number.isNaN(n))return uc.invalid("invalid input");const o=ri(t.zone,yi.defaultZone);return o.isValid?new uc({ts:n,zone:o,loc:Qo.fromObject(t)}):uc.invalid(ja(o))}static fromMillis(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Li(e))return e<-Ua||e>Ua?uc.invalid("Timestamp out of range"):new uc({ts:e,zone:ri(t.zone,yi.defaultZone),loc:Qo.fromObject(t)});throw new so(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Li(e))return new uc({ts:1e3*e,zone:ri(t.zone,yi.defaultZone),loc:Qo.fromObject(t)});throw new so("fromSeconds requires a numerical input")}static fromObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e||{};const n=ri(t.zone,yi.defaultZone);if(!n.isValid)return uc.invalid(ja(n));const r=Qo.fromObject(t),o=rs(e,rc),{minDaysInFirstWeek:i,startOfWeek:s}=ki(o,r),a=yi.now(),c=Di(t.specificOffset)?n.offset(a):t.specificOffset,u=!Di(o.ordinal),l=!Di(o.year),p=!Di(o.month)||!Di(o.day),d=l||p,f=o.weekYear||o.weekNumber;if((d||u)&&f)throw new oo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&u)throw new oo("Can't mix ordinal dates with month/day");const h=f||o.weekday&&!d;let g,m,y=qa(a,c);h?(g=tc,m=Ya,y=Ci(y,i,s)):u?(g=nc,m=Qa,y=Mi(y)):(g=ec,m=Ka);let v=!1;for(const e of g)Di(o[e])?o[e]=v?m[e]:y[e]:v=!0;const _=h?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=xi(e.weekYear),o=Wi(e.weekNumber,1,Yi(e.weekYear,t,n)),i=Wi(e.weekday,1,7);return r?o?!i&&Ei("weekday",e.weekday):Ei("week",e.weekNumber):Ei("weekYear",e.weekYear)}(o,i,s):u?function(e){const t=xi(e.year),n=Wi(e.ordinal,1,Zi(e.year));return t?!n&&Ei("ordinal",e.ordinal):Ei("year",e.year)}(o):Ii(o),b=_||Ai(o);if(b)return uc.invalid(b);const E=h?Ri(o,i,s):u?Pi(o):o,[S,w]=Ha(E,c,n),T=new uc({ts:S,zone:n,o:w,loc:r});return o.weekday&&d&&e.weekday!==T.weekday?uc.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${T.toISO()}`):T.isValid?T:uc.invalid(T.invalid)}static fromISO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Os(e,[Ks,ta],[Ys,na],[Qs,ra],[ea,oa])}(e);return $a(n,r,t,"ISO 8601",e)}static fromRFC2822(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Os(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[qs,Hs])}(e);return $a(n,r,t,"RFC 2822",e)}static fromHTTP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Os(e,[Vs,Xs],[$s,Xs],[Zs,Js])}(e);return $a(n,r,t,"HTTP",t)}static fromFormat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Di(e)||Di(t))throw new so("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:o=null}=n,i=Qo.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0}),[s,a,c,u]=function(e,t,n){const{result:r,zone:o,specificOffset:i,invalidReason:s}=xa(e,t,n);return[r,o,i,s]}(i,e,t);return u?uc.invalid(u):$a(s,a,n,`format ${t}`,e,c)}static fromString(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return uc.fromFormat(e,t,n)}static fromSQL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Os(e,[sa,ta],[aa,ca])}(e);return $a(n,r,t,"SQL",e)}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new so("need to specify a reason the DateTime is invalid");const n=e instanceof vi?e:new vi(e,t);if(yi.throwOnInvalid)throw new to(n);return new uc({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Na(e,Qo.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Da(Es.parseFormat(e),Qo.fromObject(t)).map((e=>e.val)).join("")}static resetCache(){ac=void 0,cc={}}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ba(this).weekYear:NaN}get weekNumber(){return this.isValid?Ba(this).weekNumber:NaN}get weekday(){return this.isValid?Ba(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Wa(this).weekday:NaN}get localWeekNumber(){return this.isValid?Wa(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Wa(this).weekYear:NaN}get ordinal(){return this.isValid?Mi(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ea.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ea.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ea.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ea.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Ji(this.c),r=this.zone.offset(n-e),o=this.zone.offset(n+e),i=this.zone.offset(n-r*t),s=this.zone.offset(n-o*t);if(i===s)return[this];const a=n-i*t,c=n-s*t,u=qa(a,i),l=qa(c,s);return u.hour===l.hour&&u.minute===l.minute&&u.second===l.second&&u.millisecond===l.millisecond?[za(this,{ts:a}),za(this,{ts:c})]:[this]}get isInLeapYear(){return $i(this.year)}get daysInMonth(){return Xi(this.year,this.month)}get daysInYear(){return this.isValid?Zi(this.year):NaN}get weeksInWeekYear(){return this.isValid?Yi(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Yi(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{locale:t,numberingSystem:n,calendar:r}=Es.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setZone(ti.instance(e),t)}toLocal(){return this.setZone(yi.defaultZone)}setZone(e){let{keepLocalTime:t=!1,keepCalendarTime:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((e=ri(e,yi.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[r]=Ha(n,t,e)}return za(this,{ts:r,zone:e})}return uc.invalid(ja(e))}reconfigure(){let{locale:e,numberingSystem:t,outputCalendar:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return za(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=rs(e,rc),{minDaysInFirstWeek:n,startOfWeek:r}=ki(t,this.loc),o=!Di(t.weekYear)||!Di(t.weekNumber)||!Di(t.weekday),i=!Di(t.ordinal),s=!Di(t.year),a=!Di(t.month)||!Di(t.day),c=s||a,u=t.weekYear||t.weekNumber;if((c||i)&&u)throw new oo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&i)throw new oo("Can't mix ordinal dates with month/day");let l;o?l=Ri({...Ci(this.c,n,r),...t},n,r):Di(t.ordinal)?(l={...this.toObject(),...t},Di(t.day)&&(l.day=Math.min(Xi(l.year,l.month),l.day))):l=Pi({...Mi(this.c),...t});const[p,d]=Ha(l,this.o,this.zone);return za(this,{ts:p,o:d})}plus(e){return this.isValid?za(this,Va(this,va.fromDurationLike(e))):this}minus(e){return this.isValid?za(this,Va(this,va.fromDurationLike(e).negate())):this}startOf(e){let{useLocaleWeeks:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isValid)return this;const n={},r=va.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===r){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?Es.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Fa}toLocaleString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?Es.create(this.loc.clone(t),e).formatDateTime(this):Fa}toLocaleParts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?Es.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO(){let{format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const i="extended"===e;let s=Xa(this,i);return s+="T",s+=Ja(this,i,t,n,r,o),s}toISODate(){let{format:e="extended"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?Xa(this,"extended"===e):null}toISOWeekDate(){return Za(this,"kkkk-'W'WW-c")}toISOTime(){let{suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:o=!1,format:i="extended"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?(r?"T":"")+Ja(this,"extended"===i,t,e,n,o):null}toRFC2822(){return Za(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Za(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xa(this,!0):null}toSQLTime(){let{includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Za(this,r,!0)}toSQL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Fa}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.isValid||!e.isValid)return va.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=(a=t,Array.isArray(a)?a:[a]).map(va.normalizeUnit),i=e.valueOf()>this.valueOf(),s=function(e,t,n,r){let[o,i,s,a]=function(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=Sa(e,t);return(n-n%7)/7}],["days",Sa]],o={},i=e;let s,a;for(const[c,u]of r)n.indexOf(c)>=0&&(s=c,o[c]=u(e,t),a=i.plus(o),a>t?(o[c]--,(e=i.plus(o))>t&&(a=e,o[c]--,e=i.plus(o))):e=a);return[e,o,a,s]}(e,t,n);const c=t-o,u=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===u.length&&(s<t&&(s=o.plus({[a]:1})),s!==o&&(i[a]=(i[a]||0)+c/(s-o)));const l=va.fromObject(i,r);return u.length>0?va.fromMillis(c,r).shiftTo(...u).plus(l):l}(i?this:e,i?e:this,o,r);var a;return i?s.negate():s}diffNow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.diff(uc.now(),e,t)}until(e){return this.isValid?ba.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(t,n)<=r&&r<=o.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const t=e.base||uc.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(r=e.unit,o=void 0),ic(t,this.plus(n),{...e,numeric:"always",units:r,unit:o})}toRelativeCalendar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?ic(e.base||uc.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every(uc.isDateTime))throw new so("min requires all arguments be DateTimes");return Ui(t,(e=>e.valueOf()),Math.min)}static max(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every(uc.isDateTime))throw new so("max requires all arguments be DateTimes");return Ui(t,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{locale:r=null,numberingSystem:o=null}=n;return xa(Qo.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0}),e,t)}static fromStringExplain(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return uc.fromFormatExplain(e,t,n)}static buildFormatParser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{locale:n=null,numberingSystem:r=null}=t,o=Qo.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new La(o,e)}static fromFormatParser(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Di(e)||Di(t))throw new so("fromFormatParser requires an input string and a format parser");const{locale:r=null,numberingSystem:o=null}=n,i=Qo.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0});if(!i.equals(t.locale))throw new so(`fromFormatParser called with a locale of ${i}, but the format parser was created for ${t.locale}`);const{result:s,zone:a,specificOffset:c,invalidReason:u}=t.explainFromTokens(e);return u?uc.invalid(u):$a(s,a,n,`format ${t.format}`,e,c)}static get DATE_SHORT(){return po}static get DATE_MED(){return fo}static get DATE_MED_WITH_WEEKDAY(){return ho}static get DATE_FULL(){return go}static get DATE_HUGE(){return mo}static get TIME_SIMPLE(){return yo}static get TIME_WITH_SECONDS(){return vo}static get TIME_WITH_SHORT_OFFSET(){return _o}static get TIME_WITH_LONG_OFFSET(){return bo}static get TIME_24_SIMPLE(){return Eo}static get TIME_24_WITH_SECONDS(){return So}static get TIME_24_WITH_SHORT_OFFSET(){return wo}static get TIME_24_WITH_LONG_OFFSET(){return To}static get DATETIME_SHORT(){return Oo}static get DATETIME_SHORT_WITH_SECONDS(){return Co}static get DATETIME_MED(){return Ro}static get DATETIME_MED_WITH_SECONDS(){return Mo}static get DATETIME_MED_WITH_WEEKDAY(){return Po}static get DATETIME_FULL(){return ko}static get DATETIME_FULL_WITH_SECONDS(){return Io}static get DATETIME_HUGE(){return Ao}static get DATETIME_HUGE_WITH_SECONDS(){return Do}}function lc(e){if(uc.isDateTime(e))return e;if(e&&e.valueOf&&Li(e.valueOf()))return uc.fromJSDate(e);if(e&&"object"==typeof e)return uc.fromObject(e);throw new so(`Unknown datetime argument: ${e}, of type ${typeof e}`)}n(786),(new Map).set("sun",0).set("mon",1).set("tue",2).set("wed",3).set("thur",4).set("fri",5).set("sat",6);const pc=(new Map).set(7,"sun").set(1,"mon").set(2,"tue").set(3,"wed").set(4,"thur").set(5,"fri").set(6,"sat"),dc=(e,t)=>{let n=t.timeout;const r=((e,t)=>{if(t){const n=uc.now().setZone(e),r=pc.get(n.weekday),o=100*n.hour+n.minute;for(const e of t)if(e.day===r&&o>=e.startTime&&o<e.endTime)return e}return null})(e,t.periods);if(r){const t=uc.now().setZone(e).set({hour:r.endTime/100,minute:r.endTime%100,second:0,millisecond:0}).toUnixInteger();n=Math.max(n,t)}return n},fc=e=>!(null==e?void 0:e.trim().length);class hc{static setServerTimeStamp(e){e<this.lastServerTimeStamp?console.debug("The server timestamp is behind last server time by ",e-this.lastServerTimeStamp," ms"):(this.lastServerTimeStamp=e,this.relativeTimeStart=Date.now())}static now(){const e=Date.now()-this.relativeTimeStart;return this.lastServerTimeStamp+e}}hc.lastServerTimeStamp=Date.now(),hc.relativeTimeStart=Date.now();var gc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class mc extends Kr{connect(){mc.intiateServiceConnection()}disconnect(){mc.disconnectFromEventService()}static disconnectFromEventService(){Zr("Disconnecting from Event V2 Service"),mc.eventService&&(mc.eventService.close(),mc.eventService=void 0)}static intiateServiceConnection(){return gc(this,void 0,void 0,(function*(){const e=Nh.getOffscreenConfig();if(!e)return $r("User config does not exist"),void mc.disconnectFromEventService();const t=e.user,n=e.deviceId,r=e.eventServiceUrl,o=fc(t),i=fc(n),s=fc(r);if(o||i||s)return $r("User details are not valid"),Xr(`Details ==> user: ${t}, device: ${n}, eventServiceUrl: ${r}`),void mc.disconnectFromEventService();const a=`${r}/events/v2/appliance/${n}/recipient/${t}?events=${e.isTeacher?"CONFIG_UPDATE":"CONFIG_UPDATE,OPEN_TAB,CLOSE_TAB,MESSAGE,CLASS_STARTED,POLICY_UPDATE,INIT_P2P"}`;void 0===mc.eventService?(Zr("Connecting to v2 Event Service"),mc.eventService=new EventSource(a,{withCredentials:!0}),mc.eventService.onerror=function(e){var t,n;return gc(this,void 0,void 0,(function*(){Vr("Error with event service",e,`The event source is in ${null!==(n=null===(t=mc.eventService)||void 0===t?void 0:t.readyState)&&void 0!==n?n:"unknown"} state.`),mc.disconnectFromEventService();const r=yield Nh.getAuthCookie();if(!mc.eventServiceRetriedWithExistingAuth&&r){const e=Qr(0,5);Zr(`Retrying with existing auth in ${e} seconds`),setTimeout(mc.retryEventServiceWithExistingAuth,1e3*e)}else if(mc.eventServiceRetriedWithNewAuth)mc.retryEventServiceAfterTimeout();else{let e=0;const t=(new Date).toDateString();mc.lastAuthAttemptDate&&mc.lastAuthAttemptDate===t||(e=Qr(0,5)),mc.lastAuthAttemptDate=t,Zr(`Retrying with new auth in ${e} seconds`),setTimeout(mc.retryEventServiceWithNewAuth,1e3*e)}}))},mc.eventService.onopen=function(){Zr("Connected to event-service"),mc.eventServiceRetriedWithExistingAuth=!1,mc.eventServiceRetriedWithNewAuth=!1,clearTimeout(mc.reauthTimeoutId),mc.eventServiceRetryTimeoutSeconds=1},mc.eventService.addEventListener(Pr.CONFIG_UPDATE,(function(e){mc.handleNewEvent(Pr.CONFIG_UPDATE,e)}),!1),mc.eventService.addEventListener(Pr.OPEN_TAB,(function(e){mc.handleNewEvent(Pr.OPEN_TAB,e)}),!1),mc.eventService.addEventListener(Pr.CLOSE_TAB,(function(e){mc.handleNewEvent(Pr.CLOSE_TAB,e)}),!1),mc.eventService.addEventListener(Pr.MESSAGE,(function(e){mc.handleNewEvent(Pr.MESSAGE,e)}),!1),mc.eventService.addEventListener(Pr.CLASS_STARTED,(function(e){mc.handleNewEvent(Pr.CLASS_STARTED,e)}),!1),mc.eventService.addEventListener(Pr.POLICY_UPDATE,(function(e){setTimeout((()=>{mc.handleNewEvent(Pr.POLICY_UPDATE,e)}),1e3)}),!1),mc.eventService.addEventListener(Pr.INIT_P2P,(function(e){mc.handleNewEvent(Pr.INIT_P2P,e)}),!1)):Zr("aborting connection attempt to event service, already connected")}))}static retryEventServiceWithExistingAuth(){return gc(this,void 0,void 0,(function*(){try{mc.eventServiceRetriedWithExistingAuth=!0,mc.intiateServiceConnection()}catch(e){Ur(e),mc.retryEventServiceAfterTimeout()}}))}static retryEventServiceWithNewAuth(){return gc(this,void 0,void 0,(function*(){try{yield Nh.initAutoAuth();const e=mc.getReauthAllowedTimer();mc.reauthTimeoutId=setTimeout((()=>{mc.eventServiceRetriedWithNewAuth=!1}),1e3*e+mc.getReauthJitterMs()),mc.eventServiceRetriedWithNewAuth=!0,mc.intiateServiceConnection()}catch(e){Ur(e),Vr("Failed to authenticate before retrying to connect to event-service, triggering events retry again after timeout"),mc.retryEventServiceAfterTimeout()}}))}static retryEventServiceAfterTimeout(){$r("v2 Event service connect error; sleeping for "+mc.eventServiceRetryTimeoutSeconds+" seconds"),mc.eventServiceRetryTimeoutSeconds*=2,mc.eventServiceRetryTimeoutSeconds>=64&&(mc.eventServiceRetryTimeoutSeconds=64),setTimeout(mc.intiateServiceConnection,1e3*mc.eventServiceRetryTimeoutSeconds)}static handleNewEvent(e,t){mc.eventServiceRetryTimeoutSeconds=1,Xr("Event Message Received",t);let n={};try{n=JSON.parse(t.data)}catch(e){return n={},Ur(e),void Vr("Error parsing the event data",e)}this.adjustVirtualClock(n),n._virtualTimestamp=hc.now(),n._actualTimestamp=Date.now(),Kr.sendEventToServiceWorker(e,n)}static adjustVirtualClock({header:e={}}={}){const{timestampEpochMs:t}=e;t&&hc.setServerTimeStamp(Number(t))}static getReauthAllowedTimer(){return mc.reauthAllowedTimerSeconds||mc.REAUTH_ALLOWED_TIMER_SECONDS}static getReauthJitterMs(){return Qr(0,9e4)}}mc.REAUTH_ALLOWED_TIMER_SECONDS=600,mc.reauthAllowedTimerSeconds=mc.REAUTH_ALLOWED_TIMER_SECONDS,mc.eventService=void 0,mc.eventServiceRetryTimeoutSeconds=1,mc.eventServiceRetriedWithExistingAuth=!1,mc.eventServiceRetriedWithNewAuth=!1,mc.reauthTimeoutId=void 0,mc.lastAuthAttemptDate=void 0;class yc{static getEventClient(e){switch(yc.activeEventSourceType=e,e){case 0:return yc.eventServiceClient;case 1:return yc.classwizeServiceClient;default:return void Xr(`No event client available for this type: ${e}`)}}static getActiveEventServiceType(){return yc.activeEventSourceType}static reconnectToEventSourceIfneeded(e,t){const n=0===yc.activeEventSourceType&&((null==e?void 0:e.user)!==(null==t?void 0:t.user)||(null==e?void 0:e.deviceId)!==(null==t?void 0:t.deviceId)||(null==e?void 0:e.eventServiceUrl)!==(null==t?void 0:t.eventServiceUrl));yc.setActiveEventServiceClient(yc.getActiveEventServiceType(),n)}static setActiveEventServiceClient(e,t=!1){(yc.getActiveEventServiceType()!==e||t)&&(yc.activeEventClient&&yc.activeEventClient.disconnect(),yc.activeEventClient=yc.getEventClient(e),yc.activeEventClient&&yc.activeEventClient.connect())}}yc.activeEventSourceType=0,yc.eventServiceClient=mc.generate(),yc.classwizeServiceClient=Yr.generate();var vc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class _c{static registerExtension(){return vc(this,void 0,void 0,(function*(){const e=yield Nh.sendMesage({type:Ar.GetManifestInfo});return!!e&&(yield this.registrationHandler(e.name,e.version))}))}static registrationHandler(e,t){return vc(this,void 0,void 0,(function*(){if(this.isConnected)return;const n=new Wr.CompanionRegistrationRequest;return n.setName(e),n.setVersion(t),this.keepReconnecting=!0,this.companionStream=this.companionClient.registerCompanion(n),new Promise((e=>{this.companionStream.on("data",(t=>{var n,r;this.nReconnectionAttempts=0;const o=t.getVersion(),i=null!==(r=null===(n=t.getEnrolmentdetails())||void 0===n?void 0:n.toObject())&&void 0!==r?r:void 0;let s=!1,a=!1;i&&_c.isValidEnrolmentDetails(i)&&(s=!0,a=i.enabledfeaturesList.includes(Dr.companion)),s&&yc.setActiveEventServiceClient(1),Nh.sendMesage({type:Ar.CompanionMessage,nativeAgentVersion:o,enrolmentDetails:i,companionStatus:{companionAvailable:!0,companionEnrolled:s,companionEnabled:a}}),this.isConnected||(this.isConnected=!0,e(!0))})).on("end",(t=>{0!=(null==t?void 0:t.code)&&(Nh.sendMesage({type:Ar.CompanionErrorMessage,status:t,extensionIsRegistered:_c.isConnected}),yc.setActiveEventServiceClient(0),this.keepReconnecting&&this.reconnectToNativeAgent(),this.isConnected||e(!1))}))}))}))}static unregisterExtension(e=!1){this.keepReconnecting=e;const t=_c.isConnected;this.closeStream(),Nh.sendMesage({type:Ar.CompanionErrorMessage,extensionIsRegistered:t}),yc.setActiveEventServiceClient(-1)}static isValidEnrolmentDetails(e){return!!(e&&e.username&&e.applianceid&&e.devicetoken&&e.region&&e.enabledfeaturesList)}static reconnectToNativeAgent(){return vc(this,void 0,void 0,(function*(){this.closeStream(),setTimeout((()=>{this.keepReconnecting&&_c.registerExtension()}),_c.getReconnectionTimeout())}))}static closeStream(){this.isConnected&&(this.companionStream.cancel(),this.isConnected=!1)}static getReconnectionTimeout(){return this.nReconnectionAttempts>=yr.MaxReconnectionAttempts?(this.nReconnectionAttempts=0,yr.MaxRetryRegistrationInterval_ms):(this.nReconnectionAttempts++,this.nReconnectionAttempts*yr.DeltaTimeout)}static connected(){return this.isConnected}static getCompanionClient(){return this.companionClient}}_c.companionClient=new zr.A(Lr),_c.isConnected=!1,_c.keepReconnecting=!0,_c.nReconnectionAttempts=0;var bc=n(376);class Ec{constructor(e,t){this.datachannel=e,this.maxMessageSize=t,this.streamingTab=null,this.lastSendTimeMs=0,this.datachannel.bufferedAmountLowThreshold=Ec.DC_BUFFER_LOW_MARK_BYTES}startStreaming(){clearInterval(this.streamInterval),this.streamInterval=setInterval((()=>{this.datachannel.bufferedAmount<=this.datachannel.bufferedAmountLowThreshold?this.sendScreenshot():Xr(`DEBUG p2p buffer NOT low, skipping screenshot. Buffered: ${(this.datachannel.bufferedAmount/1e3).toFixed(2)}kb, buffer_low_mark: ${(this.datachannel.bufferedAmountLowThreshold/1e3).toFixed(2)}`)}),1e3)}endStreaming(){clearInterval(this.streamInterval)}switchTab(e){this.streamingTab=e}sendScreenshot(){return e=this,t=void 0,r=function*(){if(!this.streamingTab)return;const e=yield Nh.sendMesage({type:Ar.P2PGetScreenshot,streamingTab:this.streamingTab});e&&this.send(e)},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}send(e){const t=Sh.prepareMessage(e);this.lastSendTimeMs?Xr(`DEBUG p2p sending screenshot. Size: ${(t.length/1e3).toFixed(2)}kb, last send (secs): ${((Date.now()-this.lastSendTimeMs)/1e3).toFixed(2)}`):Xr(`DEBUG p2p sending screenshot. Size: ${(t.length/1e3).toFixed(2)}kb`),this.lastSendTimeMs=Date.now(),Sh.send(this.datachannel,t,this.maxMessageSize)}}Ec.DC_BUFFER_LOW_MARK_BYTES=0;class Sc{constructor(e,t,n){this.dataChannel=e,this.remotePeerId=t,this.maxMessageSize=n,this.streamingWindow=null}startStreaming(){clearInterval(this.streamInterval),this.streamInterval=setInterval((()=>{this.sendTabs()}),1e3)}endStreaming(){clearInterval(this.streamInterval)}setWindow(e){this.streamingWindow=e}sendTabs(){return e=this,t=void 0,r=function*(){if(!this.streamingWindow)return;const e=yield Nh.sendMesage({type:Ar.P2PGetTabs});if(!e)return;if(e.restrictedDomainFound)return void Sh.tearDown(this.remotePeerId);const t=Sh.prepareMessage(e);Sh.send(this.dataChannel,t,this.maxMessageSize)},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}}function wc(e){return Symbol.for(e)}var Tc=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},Oc=function(){function e(){}return e.prototype.active=function(){return Tc},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return t.call.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Cc="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},Rc="1.9.0",Mc=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,Pc=function(e){var t=new Set([e]),n=new Set,r=e.match(Mc);if(!r)return function(){return!1};var o=+r[1],i=+r[2],s=+r[3];if(null!=r[4])return function(t){return t===e};function a(e){return n.add(e),!1}function c(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(Mc);if(!r)return a(e);var u=+r[1],l=+r[2],p=+r[3];return null!=r[4]||o!==u?a(e):0===o?i===l&&s<=p?c(e):a(e):i<=l?c(e):a(e)}}(Rc),kc=Rc.split(".")[0],Ic=Symbol.for("opentelemetry.js.api."+kc),Ac=Cc;function Dc(e,t,n,r){var o;void 0===r&&(r=!1);var i=Ac[Ic]=null!==(o=Ac[Ic])&&void 0!==o?o:{version:Rc};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}return i.version!==Rc?(s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Rc),n.error(s.stack||s.message),!1):(i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Rc+"."),!0)}function Lc(e){var t,n,r=null===(t=Ac[Ic])||void 0===t?void 0:t.version;if(r&&Pc(r))return null===(n=Ac[Ic])||void 0===n?void 0:n[e]}function xc(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Rc+".");var n=Ac[Ic];n&&delete n[e]}var Nc,Fc=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uc("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uc("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uc("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uc("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Uc("verbose",this._namespace,e)},e}();function Uc(e,t,n){var r=Lc("diag");if(r)return n.unshift(t),r[e].apply(r,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(Nc||(Nc={}));var jc=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Lc("diag");if(r)return r[e].apply(r,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(t),!1))}}var t=this;t.setLogger=function(e,n){var r,o,i;if(void 0===n&&(n={logLevel:Nc.INFO}),e===t){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=s.stack)&&void 0!==r?r:s.message),!1}"number"==typeof n&&(n={logLevel:n});var a=Lc("diag"),c=function(e,t){function n(n,r){var o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<Nc.NONE?e=Nc.NONE:e>Nc.ALL&&(e=Nc.ALL),t=t||{},{error:n("error",Nc.ERROR),warn:n("warn",Nc.WARN),info:n("info",Nc.INFO),debug:n("debug",Nc.DEBUG),verbose:n("verbose",Nc.VERBOSE)}}(null!==(o=n.logLevel)&&void 0!==o?o:Nc.INFO,e);if(a&&!n.suppressOverrideMessage){var u=null!==(i=(new Error).stack)&&void 0!==i?i:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+u),c.warn("Current logger will overwrite one already registered from "+u)}return Dc("diag",c,t,!0)},t.disable=function(){xc("diag",t)},t.createComponentLogger=function(e){return new Fc(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),Bc="context",Wc=new Oc,zc=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return Dc(Bc,e,jc.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(r=this._getContextManager()).with.apply(r,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e,t,n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return Lc(Bc)||Wc},e.prototype.disable=function(){this._getContextManager().disable(),xc(Bc,jc.instance())},e}(),Gc=zc.getInstance(),qc=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),Hc={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},Vc={set:function(e,t,n){null!=e&&(e[t]=n)}},$c=wc("OpenTelemetry Baggage Key");function Zc(e){return e.getValue($c)||void 0}function Xc(){return Zc(zc.getInstance().active())}function Jc(e,t){return e.setValue($c,t)}function Kc(e){return e.deleteValue($c)}var Yc=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new e(this._entries);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=s.next();!a.done;a=s.next()){var c=a.value;i._entries.delete(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),Qc=Symbol("BaggageEntryMetadata"),eu=jc.instance();function tu(e){return void 0===e&&(e={}),new Yc(new Map(Object.entries(e)))}function nu(e){return"string"!=typeof e&&(eu.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:Qc,toString:function(){return e}}}var ru,ou="propagation",iu=new qc,su=function(){function e(){this.createBaggage=tu,this.getBaggage=Zc,this.getActiveBaggage=Xc,this.setBaggage=Jc,this.deleteBaggage=Kc}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return Dc(ou,e,jc.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=Vc),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=Hc),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){xc(ou,jc.instance())},e.prototype._getGlobalPropagator=function(){return Lc(ou)||iu},e}().getInstance();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(ru||(ru={}));var au="0000000000000000",cu="00000000000000000000000000000000",uu={traceId:cu,spanId:au,traceFlags:ru.NONE},lu=function(){function e(e){void 0===e&&(e=uu),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),pu=wc("OpenTelemetry Context Key SPAN");function du(e){return e.getValue(pu)||void 0}function fu(){return du(zc.getInstance().active())}function hu(e,t){return e.setValue(pu,t)}function gu(e){return e.deleteValue(pu)}function mu(e,t){return hu(e,new lu(t))}function yu(e){var t;return null===(t=du(e))||void 0===t?void 0:t.spanContext()}var vu=/^([0-9a-f]{32})$/i,_u=/^[0-9a-f]{16}$/i;function bu(e){return vu.test(e)&&e!==cu}function Eu(e){return bu(e.traceId)&&(t=e.spanId,_u.test(t)&&t!==au);var t}function Su(e){return new lu(e)}var wu=zc.getInstance(),Tu=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=wu.active()),Boolean(null==t?void 0:t.root))return new lu;var r,o=n&&yu(n);return"object"==typeof(r=o)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&Eu(o)?new lu(o):new lu},e.prototype.startActiveSpan=function(e,t,n,r){var o,i,s;if(!(arguments.length<2)){2===arguments.length?s=t:3===arguments.length?(o=t,s=n):(o=t,i=n,s=r);var a=null!=i?i:wu.active(),c=this.startSpan(e,o,a),u=hu(a,c);return wu.with(u,s,void 0,c)}},e}(),Ou=new Tu,Cu=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Ou},e}(),Ru=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new Tu},e}()),Mu=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!==(r=this.getDelegateTracer(e,t,n))&&void 0!==r?r:new Cu(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:Ru},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}(),Pu="OT_ZONE_CONTEXT",ku=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(e){return e&&e.get(Pu)||Tc},e.prototype._bindFunction=function(e,t){var n=this,r=function(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return n.with(e,(function(){return t.apply(r,o)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r},e.prototype._bindListener=function(e,t){var n=t;return void 0!==n.__ot_listeners||(n.__ot_listeners={},"function"==typeof n.addEventListener&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,e)),"function"==typeof n.removeEventListener&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),t},e.prototype._createZoneName=function(){this._zoneCounter++;var e=Math.random();return this._zoneCounter+"-"+e},e.prototype._createZone=function(e,t){var n;return Zone.current.fork({name:e,properties:(n={},n[Pu]=t,n)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(e,t,n){var r=this;return function(o,i,s){void 0===e.__ot_listeners&&(e.__ot_listeners={});var a=e.__ot_listeners[o];void 0===a&&(a=new WeakMap,e.__ot_listeners[o]=a);var c=r.bind(n,i);return a.set(i,c),t.call(this,o,c,s)}},e.prototype._patchRemoveEventListener=function(e,t){return function(n,r){if(void 0===e.__ot_listeners||void 0===e.__ot_listeners[n])return t.call(this,n,r);var o=e.__ot_listeners[n],i=o.get(r);return o.delete(r),t.call(this,n,i||r)}},e.prototype.active=function(){if(!this._enabled)return Tc;var e=this._getActiveZone();return this._activeContextFromZone(e)||Tc},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):(void 0===(n=t)&&(n={}),"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener&&this._bindListener(e,t),t);var n},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=this._createZoneName();return this._createZone(i,e).run(t,n,r)},e}(),Iu=(n(950),jc.instance()),Au=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var r,o;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),s=i.next();!s.done;s=i.next()){var a=s.value;try{a.inject(e,t,n)}catch(e){Iu.warn("Failed to inject with "+a.constructor.name+". Err: "+e.message)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,r){try{return r.extract(e,t,n)}catch(e){Iu.warn("Failed to inject with "+r.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}(),Du="trace",Lu=function(){function e(){this._proxyTracerProvider=new Mu,this.wrapSpanContext=Su,this.isSpanContextValid=Eu,this.deleteSpan=gu,this.getSpan=du,this.getActiveSpan=fu,this.getSpanContext=yu,this.setSpan=hu,this.setSpanContext=mu}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=Dc(Du,this._proxyTracerProvider,jc.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return Lc(Du)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){xc(Du,jc.instance()),this._proxyTracerProvider=new Mu},e}().getInstance(),xu=wc("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Nu(e){return!0===e.getValue(xu)}var Fu="[_0-9a-z-*/]",Uu=new RegExp("^(?:[a-z]"+Fu+"{0,255}|[a-z0-9]"+Fu+"{0,240}@[a-z]"+Fu+"{0,13})$"),ju=/^[ -~]{0,255}[!-~]$/,Bu=/,|=/,Wu=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),i=n.slice(r+1,t.length);(function(e){return Uu.test(e)})(o)&&function(e){return ju.test(e)&&!Bu.test(e)}(i)&&e.set(o,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),zu="traceparent",Gu="tracestate",qu=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),Hu=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=Lu.getSpanContext(e);if(r&&!Nu(e)&&Eu(r)){var o="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||ru.NONE).toString(16);n.set(t,zu,o),r.traceState&&n.set(t,Gu,r.traceState.serialize())}},e.prototype.extract=function(e,t,n){var r=n.get(t,zu);if(!r)return e;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return e;var i=function(e){var t=qu.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}(o);if(!i)return e;i.isRemote=!0;var s=n.get(t,Gu);if(s){var a=Array.isArray(s)?s.join(","):s;i.traceState=new Wu("string"==typeof a?a:void 0)}return Lu.setSpanContext(e,i)},e.prototype.fields=function(){return[zu,Gu]},e}(),Vu=",",$u="baggage";function Zu(e){var t=e.split(";");if(!(t.length<=0)){var n=t.shift();if(n){var r=n.indexOf("=");if(!(r<=0)){var o,i=decodeURIComponent(n.substring(0,r).trim()),s=decodeURIComponent(n.substring(r+1).trim());return t.length>0&&(o=nu(t.join(";"))),{key:i,value:s,metadata:o}}}}}function Xu(e){return"string"!=typeof e||0===e.length?{}:e.split(Vu).map((function(e){return Zu(e)})).filter((function(e){return void 0!==e&&e.value.length>0})).reduce((function(e,t){return e[t.key]=t.value,e}),{})}var Ju,Ku=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=su.getBaggage(e);if(r&&!Nu(e)){var o=function(e){return e.getAllEntries().map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1],o=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(o+=";"+r.metadata.toString()),o}))}(r).filter((function(e){return e.length<=4096})).slice(0,180),i=function(e){return e.reduce((function(e,t){var n=""+e+(""!==e?Vu:"")+t;return n.length>8192?e:n}),"")}(o);i.length>0&&n.set(t,$u,i)}},e.prototype.extract=function(e,t,n){var r=n.get(t,$u),o=Array.isArray(r)?r.join(Vu):r;if(!o)return e;var i={};return 0===o.length?e:(o.split(Vu).forEach((function(e){var t=Zu(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),i[t.key]=n}})),0===Object.entries(i).length?e:su.setBaggage(e,su.createBaggage(i)))},e.prototype.fields=function(){return[$u]},e}();!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(Ju||(Ju={}));var Yu,Qu=(Yu=function(e,t){return Yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Yu(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Yu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),el=function(){function e(){}return e.prototype.createGauge=function(e,t){return dl},e.prototype.createHistogram=function(e,t){return fl},e.prototype.createCounter=function(e,t){return pl},e.prototype.createUpDownCounter=function(e,t){return hl},e.prototype.createObservableGauge=function(e,t){return ml},e.prototype.createObservableCounter=function(e,t){return gl},e.prototype.createObservableUpDownCounter=function(e,t){return yl},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),tl=function(){},nl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),t.prototype.add=function(e,t){},t}(tl),rl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),t.prototype.add=function(e,t){},t}(tl),ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),t.prototype.record=function(e,t){},t}(tl),il=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),t.prototype.record=function(e,t){},t}(tl),sl=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),al=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),t}(sl),cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),t}(sl),ul=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qu(t,e),t}(sl),ll=new el,pl=new nl,dl=new ol,fl=new il,hl=new rl,gl=new al,ml=new cl,yl=new ul,vl=new(function(){function e(){}return e.prototype.getMeter=function(e,t,n){return ll},e}()),_l="metrics",bl=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return Dc(_l,e,jc.instance())},e.prototype.getMeterProvider=function(){return Lc(_l)||vl},e.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},e.prototype.disable=function(){xc(_l,jc.instance())},e}().getInstance(),El="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},Sl=Symbol.for("io.opentelemetry.js.api.logs"),wl=El,Tl=function(){function e(){}return e.prototype.emit=function(e){},e}(),Ol=new Tl,Cl=new(function(){function e(){}return e.prototype.getLogger=function(e,t,n){return new Tl},e}()),Rl=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.emit=function(e){this._getLogger().emit(e)},e.prototype._getLogger=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Ol},e}(),Ml=function(){function e(){}return e.prototype.getLogger=function(e,t,n){var r;return null!==(r=this.getDelegateLogger(e,t,n))&&void 0!==r?r:new Rl(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:Cl},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateLogger=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getLogger(e,t,n)},e}(),Pl=function(){function e(){this._proxyLoggerProvider=new Ml}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(e){return wl[Sl]?this.getLoggerProvider():(wl[Sl]=(t=e,n=Cl,function(e){return 1===e?t:n}),this._proxyLoggerProvider.setDelegate(e),e);var t,n},e.prototype.getLoggerProvider=function(){var e,t;return null!==(t=null===(e=wl[Sl])||void 0===e?void 0:e.call(wl,1))&&void 0!==t?t:this._proxyLoggerProvider},e.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},e.prototype.disable=function(){delete wl[Sl],this._proxyLoggerProvider=new Ml},e}(),kl=Pl.getInstance(),Il=n(938),Al=function(){return Al=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Al.apply(this,arguments)},Dl=function(){function e(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Il.wrap,this._unwrap=Il.unwrap,this._massWrap=Il.massWrap,this._massUnwrap=Il.massUnwrap,this.setConfig(n),this._diag=Iu.createComponentLogger({namespace:e}),this._tracer=Lu.getTracer(e,t),this._meter=bl.getMeter(e,t),this._logger=kl.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(e.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),e.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),e.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},e.prototype.getModuleDefinitions=function(){var e,t=null!==(e=this.init())&&void 0!==e?e:[];return Array.isArray(t)?t:[t]},e.prototype._updateMetricInstruments=function(){},e.prototype.getConfig=function(){return this._config},e.prototype.setConfig=function(e){this._config=Al({enabled:!0},e)},e.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(e.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),e.prototype._runSpanCustomizationHook=function(e,t,n,r){if(e)try{e(n,r)}catch(e){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},e)}},e}(),Ll=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xl=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o._config.enabled&&o.enable(),o}return Ll(t,e),t}(Dl);function Nl(e,t){return"string"==typeof t?e===t:!!e.match(t)}var Fl,Ul=performance,jl=Math.pow(10,6),Bl=Math.pow(10,9);function Wl(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*jl)]}function zl(e){return t=Wl(function(){var e=Ul.timeOrigin;if("number"!=typeof e){var t=Ul;e=t.timing&&t.timing.fetchStart}return e}()),n=Wl("number"==typeof e?e:Ul.now()),(r=[t[0]+n[0],t[1]+n[1]])[1]>=Bl&&(r[1]-=Bl,r[0]+=1),r;var t,n,r}!function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"}(Fl||(Fl={}));var Gl=performance,ql=Math.pow(10,6),Hl=Math.pow(10,9);function Vl(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*ql)]}function $l(){var e=Gl.timeOrigin;if("number"!=typeof e){var t=Gl;e=t.timing&&t.timing.fetchStart}return e}function Zl(e){if(t=e,Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])return e;var t,n,r,o,i;if("number"==typeof e)return e<$l()?(n=e,r=Vl($l()),o=Vl("number"==typeof n?n:Gl.now()),(i=[r[0]+o[0],r[1]+o[1]])[1]>=Hl&&(i[1]-=Hl,i[0]+=1),i):Vl(e);if(e instanceof Date)return Vl(e.getTime());throw TypeError("Invalid input type")}function Xl(e){return e[0]*Hl+e[1]}var Jl,Kl,Yl="exception.type",Ql="exception.message";function ep(e,t){return t in e}function tp(e,t,n,r){var o=void 0,i=void 0;ep(n,t)&&"number"==typeof n[t]&&(o=n[t]);var s=r||Fl.FETCH_START;if(ep(n,s)&&"number"==typeof n[s]&&(i=n[s]),void 0!==o&&void 0!==i&&o>=i)return e.addEvent(t,o),e}function np(e,t){tp(e,Fl.FETCH_START,t),tp(e,Fl.DOMAIN_LOOKUP_START,t),tp(e,Fl.DOMAIN_LOOKUP_END,t),tp(e,Fl.CONNECT_START,t),ep(t,"name")&&t.name.startsWith("https:")&&tp(e,Fl.SECURE_CONNECTION_START,t),tp(e,Fl.CONNECT_END,t),tp(e,Fl.REQUEST_START,t),tp(e,Fl.RESPONSE_START,t),tp(e,Fl.RESPONSE_END,t);var n=t[Fl.ENCODED_BODY_SIZE];void 0!==n&&e.setAttribute("http.response_content_length",n);var r=t[Fl.DECODED_BODY_SIZE];void 0!==r&&n!==r&&e.setAttribute("http.response_content_length_uncompressed",r)}function rp(){return"undefined"!=typeof location?location.origin:void 0}function op(e){if("function"==typeof URL)return new URL(e,"undefined"!=typeof document?document.baseURI:"undefined"!=typeof location?location.href:void 0);var t=(Jl||(Jl=document.createElement("a")),Jl);return t.href=e,t}!function(e){e.COMPONENT="component",e.HTTP_ERROR_NAME="http.error_name",e.HTTP_STATUS_TEXT="http.status_text"}(Kl||(Kl={}));var ip,sp,ap,cp="0.54.2",up="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},lp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pp="object"==typeof process&&"node"===(null===(ip=process.release)||void 0===ip?void 0:ip.name),dp=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,"@opentelemetry/instrumentation-fetch",cp,t)||this;return n.component="fetch",n.version=cp,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return lp(t,e),t.prototype.init=function(){},t.prototype._addChildSpan=function(e,t){var n=this.tracer.startSpan("CORS Preflight",{startTime:t[Fl.FETCH_START]},Lu.setSpan(Gc.active(),e));this.getConfig().ignoreNetworkEvents||np(n,t),n.end(t[Fl.RESPONSE_END])},t.prototype._addFinalSpanAttributes=function(e,t){var n=op(t.url);e.setAttribute("http.status_code",t.status),null!=t.statusText&&e.setAttribute(Kl.HTTP_STATUS_TEXT,t.statusText),e.setAttribute("http.host",n.host),e.setAttribute("http.scheme",n.protocol.replace(":","")),"undefined"!=typeof navigator&&e.setAttribute("http.user_agent",navigator.userAgent)},t.prototype._addHeaders=function(e,t){if(!function(e,t){var n=t||[];return("string"==typeof n||n instanceof RegExp)&&(n=[n]),op(e).origin===rp()||n.some((function(t){return n=e,"string"==typeof(r=t)?n===r:!!n.match(r);var n,r}))}(t,this.getConfig().propagateTraceHeaderCorsUrls)){var n={};return su.inject(Gc.active(),n),void(Object.keys(n).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}e instanceof Request||e.headers instanceof Headers||e.headers instanceof Map?su.inject(Gc.active(),e.headers,{set:function(e,t,n){return e.set(t,"string"==typeof n?n:String(n))}}):(n={},su.inject(Gc.active(),n),e.headers=Object.assign({},n,e.headers||{}))},t.prototype._clearResources=function(){0===this._tasksCount&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},t.prototype._createSpan=function(e,t){var n;if(void 0===t&&(t={}),!function(e,t){var n,r;if(!t)return!1;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=o.next();!i.done;i=o.next())if(Nl(e,i.value))return!0}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1}(e,this.getConfig().ignoreUrls)){var r=(t.method||"GET").toUpperCase(),o="HTTP "+r;return this.tracer.startSpan(o,{kind:Ju.CLIENT,attributes:(n={},n[Kl.COMPONENT]=this.moduleName,n["http.method"]=r,n["http.url"]=e,n)})}this._diag.debug("ignoring span as url matches ignored url")},t.prototype._findResourceAndAddNetworkEvents=function(e,t,n){var r=t.entries;if(!r.length){if(!performance.getEntriesByType)return;r=performance.getEntriesByType("resource")}var o=function(e,t,n,r,o,i){void 0===o&&(o=new WeakSet);var s=op(e),a=function(e,t,n,r,o,i){var s=Xl(t),a=Xl(n),c=r.filter((function(t){var n=Xl(Zl(t[Fl.FETCH_START])),r=Xl(Zl(t[Fl.RESPONSE_END]));return t.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&t.name===e&&n>=s&&r<=a}));return c.length>0&&(c=c.filter((function(e){return!o.has(e)}))),c}(e=s.toString(),t,n,r,o,i);if(0===a.length)return{mainRequest:void 0};if(1===a.length)return{mainRequest:a[0]};var c=function(e){return e.slice().sort((function(e,t){var n=e[Fl.FETCH_START],r=t[Fl.FETCH_START];return n>r?1:n<r?-1:0}))}(a);if(s.origin!==rp()&&c.length>1){var u=c[0],l=function(e,t,n){for(var r,o=Xl(n),i=Xl(Zl(t)),s=e[1],a=e.length,c=1;c<a;c++){var u=e[c],l=Xl(Zl(u[Fl.FETCH_START])),p=o-Xl(Zl(u[Fl.RESPONSE_END]));l>=i&&(!r||p<r)&&(r=p,s=u)}return s}(c,u[Fl.RESPONSE_END],n),p=u[Fl.RESPONSE_END];return l[Fl.FETCH_START]<p&&(l=u,u=void 0),{corsPreFlightRequest:u,mainRequest:l}}return{mainRequest:a[0]}}(t.spanUrl,t.startTime,n,r,this._usedResources,"fetch");if(o.mainRequest){var i=o.mainRequest;this._markResourceAsUsed(i);var s=o.corsPreFlightRequest;s&&(this._addChildSpan(e,s),this._markResourceAsUsed(s)),this.getConfig().ignoreNetworkEvents||np(e,i)}},t.prototype._markResourceAsUsed=function(e){this._usedResources.add(e)},t.prototype._endSpan=function(e,t,n){var r=this,o=Wl(Date.now()),i=zl();this._addFinalSpanAttributes(e,n),setTimeout((function(){var n;null===(n=t.observer)||void 0===n||n.disconnect(),r._findResourceAndAddNetworkEvents(e,t,i),r._tasksCount--,r._clearResources(),e.end(o)}),300)},t.prototype._patchConstructor=function(){var e=this;return function(t){var n=e;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=this,i=op(e[0]instanceof Request?e[0].url:String(e[0])).href,s=e[0]instanceof Request?e[0]:e[1]||{},a=n._createSpan(i,s);if(!a)return t.apply(this,e);var c=n._prepareSpanData(i);function u(e,t){n._applyAttributesAfterFetch(e,s,t),n._endSpan(e,c,{status:t.status||0,statusText:t.message,url:i})}function l(e,t){n._applyAttributesAfterFetch(e,s,t),t.status>=200&&t.status<400?n._endSpan(e,c,t):n._endSpan(e,c,{status:t.status,statusText:t.statusText,url:i})}function p(e,t,n){try{var r=n.clone(),o=n.clone(),i=r.body;if(i){var s=i.getReader(),a=function(){s.read().then((function(t){t.done?l(e,o):a()}),(function(t){u(e,t)}))};a()}else l(e,n)}finally{t(n)}}function d(e,t,n){try{u(e,n)}finally{t(n)}}return new Promise((function(e,r){return Gc.with(Lu.setSpan(Gc.active(),a),(function(){return n._addHeaders(s,i),n._tasksCount++,t.apply(o,s instanceof Request?[s]:[i,s]).then(p.bind(o,a,e),d.bind(o,a,r))}))}))}}},t.prototype._applyAttributesAfterFetch=function(e,t,n){var r=this,o=this.getConfig().applyCustomAttributesOnSpan;o&&function(e){var t,n;try{n=e()}catch(e){t=e}finally{return function(e){e&&r._diag.error("applyCustomAttributesOnSpan",e)}(t),n}}((function(){return o(e,t,n)}))},t.prototype._prepareSpanData=function(e){var t=zl(),n=[];if("function"!=typeof PerformanceObserver)return{entries:n,startTime:t,spanUrl:e};var r=new PerformanceObserver((function(t){t.getEntries().forEach((function(t){"fetch"===t.initiatorType&&t.name===e&&n.push(t)}))}));return r.observe({entryTypes:["resource"]}),{entries:n,observer:r,startTime:t,spanUrl:e}},t.prototype.enable=function(){var e;pp?this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()"):("function"==typeof(e=fetch)&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped&&(this._unwrap(up,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(up,"fetch",this._patchConstructor()))},t.prototype.disable=function(){pp||(this._unwrap(up,"fetch"),this._usedResources=new WeakSet)},t}(xl),fp="telemetry.sdk.name",hp="telemetry.sdk.language",gp="telemetry.sdk.version",mp=((sp={})["telemetry.sdk.name"]="opentelemetry",sp["process.runtime.name"]="browser",sp["telemetry.sdk.language"]="webjs",sp["telemetry.sdk.version"]="1.21.0",sp),yp=function(){return yp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yp.apply(this,arguments)},vp=function(){function e(e,t){var n,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e}),(function(e){return Iu.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})["service.name"]="unknown_service",t[hp]=mp[hp],t[fp]=mp[fp],t[gp]=mp[gp],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Iu.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var o=yp(yp({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(o);var i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),i=o[0],s=o[1];return yp(yp(yp(yp({},r._syncAttributes),i),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),s)}));return new e(o,i)},e.EMPTY=new e({}),e}();!function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(ap||(ap={}));var _p=["OTEL_SDK_DISABLED"];function bp(e){return _p.indexOf(e)>-1}var Ep=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Sp(e){return Ep.indexOf(e)>-1}var wp=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function Tp(e){return wp.indexOf(e)>-1}var Op=1/0,Cp=128,Rp={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Nc.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Op,OTEL_ATTRIBUTE_COUNT_LIMIT:Cp,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Op,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Cp,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Op,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Cp,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:ap.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function Mp(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}function Pp(e,t,n,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==n[e]){var i=Number(n[e]);isNaN(i)||(t[e]=i<r?r:i>o?o:i)}}function kp(e,t,n,r){void 0===r&&(r=",");var o=n[e];"string"==typeof o&&(t[e]=o.split(r).map((function(e){return e.trim()})))}var Ip={ALL:Nc.ALL,VERBOSE:Nc.VERBOSE,DEBUG:Nc.DEBUG,INFO:Nc.INFO,WARN:Nc.WARN,ERROR:Nc.ERROR,NONE:Nc.NONE};function Ap(e,t,n){var r=n[e];if("string"==typeof r){var o=Ip[r.toUpperCase()];null!=o&&(t[e]=o)}}function Dp(e){var t={};for(var n in Rp){var r=n;if("OTEL_LOG_LEVEL"===r)Ap(r,t,e);else if(bp(r))Mp(r,t,e);else if(Sp(r))Pp(r,t,e);else if(Tp(r))kp(r,t,e);else{var o=e[r];null!=o&&(t[r]=String(o))}}return t}var Lp="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{};function xp(){var e=Dp(Lp);return Object.assign({},Rp,e)}var Np,Fp=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),Up=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new Fp}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([this._that],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}(),jp=wc("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Bp(e){return!0===e.getValue(jp)}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(Np||(Np={}));function Wp(e){try{!function(e){Iu.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach((function(e){if(!t[e]){var r=n[e];r&&(t[e]=String(r))}})),n=Object.getPrototypeOf(n);return t}(e))}(e))}(e)}catch(e){}}var zp,Gp=function(){function e(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=xp();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Up(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Iu.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&ru.SAMPLED&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&Iu.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(Iu.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var r=[],o=0,i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);o<i;o++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var r=setTimeout((function(){n(new Error("Timeout"))}),e._exportTimeoutMillis);Gc.with(Gc.active().setValue(jp,!0),(function(){var o;e._finishedSpans.length<=e._maxExportBatchSize?(o=e._finishedSpans,e._finishedSpans=[]):o=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var i=function(){return e._exporter.export(o,(function(e){var o;clearTimeout(r),e.code===Np.SUCCESS?t():n(null!==(o=e.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))},s=null,a=0,c=o.length;a<c;a++){var u=o[a];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(null!=s||(s=[]),s.push(u.resource.waitForAsyncAttributes()))}null===s?i():Promise.all(s).then(i,(function(e){Wp(e),n(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally((function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(t){e._isExporting=!1,Wp(t)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout((function(){return t()}),this._scheduledDelayMillis),this._timer)}},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),qp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hp=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.onInit(n),r}return qp(t,e),t.prototype.onInit=function(e){var t=this;!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this._pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(Gp);!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(zp||(zp={}));var Vp,$p,Zp=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:bu(t)&&this._accumulate(t)<this._upperBound?zp.RECORD_AND_SAMPLED:zp.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),Xp=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:zp.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),Jp=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:zp.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Kp=function(){function e(e){var t,n,r,o;this._root=e.root,this._root||(Wp(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Jp),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new Jp,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new Xp,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new Jp,this._localParentNotSampled=null!==(o=e.localParentNotSampled)&&void 0!==o?o:new Xp}return e.prototype.shouldSample=function(e,t,n,r,o,i){var s=Lu.getSpanContext(e);return s&&Eu(s)?s.isRemote?s.traceFlags&ru.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,o,i):this._remoteParentNotSampled.shouldSample(e,t,n,r,o,i):s.traceFlags&ru.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,o,i):this._localParentNotSampled.shouldSample(e,t,n,r,o,i):this._root.shouldSample(e,t,n,r,o,i)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Yp=Function.prototype.toString,Qp=Yp.call(Object),ed=(Vp=Object.getPrototypeOf,$p=Object,function(e){return Vp($p(e))}),td=Object.prototype,nd=td.hasOwnProperty,rd=Symbol?Symbol.toStringTag:void 0,od=td.toString;function id(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||"[object Object]"!==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rd&&rd in Object(e)?function(e){var t=nd.call(e,rd),n=e[rd],r=!1;try{e[rd]=void 0,r=!0}catch(e){}var o=od.call(e);return r&&(t?e[rd]=n:delete e[rd]),o}(e):function(e){return od.call(e)}(e)}(e))return!1;var t=ed(e);if(null===t)return!0;var n=nd.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Yp.call(n)===Qp}function sd(e){return ud(e)?e.slice():e}function ad(e,t,n,r){var o;if(void 0===n&&(n=0),!(n>20)){if(n++,dd(e)||dd(t)||ld(t))o=sd(t);else if(ud(e)){if(o=e.slice(),ud(t))for(var i=0,s=t.length;i<s;i++)o.push(sd(t[i]));else if(pd(t))for(i=0,s=(a=Object.keys(t)).length;i<s;i++)o[c=a[i]]=sd(t[c])}else if(pd(e))if(pd(t)){if(!function(e,t){return!(!id(e)||!id(t))}(e,t))return t;var a;for(o=Object.assign({},e),i=0,s=(a=Object.keys(t)).length;i<s;i++){var c,u=t[c=a[i]];if(dd(u))void 0===u?delete o[c]:o[c]=u;else{var l=o[c],p=u;if(cd(e,c,r)||cd(t,c,r))delete o[c];else{if(pd(l)&&pd(p)){var d=r.get(l)||[],f=r.get(p)||[];d.push({obj:e,key:c}),f.push({obj:t,key:c}),r.set(l,d),r.set(p,f)}o[c]=ad(o[c],u,n,r)}}}}else o=t;return o}}function cd(e,t,n){for(var r=n.get(e[t])||[],o=0,i=r.length;o<i;o++){var s=r[o];if(s.key===t&&s.obj===e)return!0}return!1}function ud(e){return Array.isArray(e)}function ld(e){return"function"==typeof e}function pd(e){return!dd(e)&&!ud(e)&&!ld(e)&&"object"==typeof e}function dd(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}var fd=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var r,o;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),s=i.next();!s.done;s=i.next()){var a=s.value;try{a.inject(e,t,n)}catch(e){Iu.warn("Failed to inject with "+a.constructor.name+". Err: "+e.message)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,r){try{return r.extract(e,t,n)}catch(e){Iu.warn("Failed to extract with "+r.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}(),hd="[_0-9a-z-*/]",gd=new RegExp("^(?:[a-z]"+hd+"{0,255}|[a-z0-9]"+hd+"{0,240}@[a-z]"+hd+"{0,13})$"),md=/^[ -~]{0,255}[!-~]$/,yd=/,|=/,vd=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),i=n.slice(r+1,t.length);(function(e){return gd.test(e)})(o)&&function(e){return md.test(e)&&!yd.test(e)}(i)&&e.set(o,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),_d="traceparent",bd="tracestate",Ed=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),Sd=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=Lu.getSpanContext(e);if(r&&!Bp(e)&&Eu(r)){var o="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||ru.NONE).toString(16);n.set(t,_d,o),r.traceState&&n.set(t,bd,r.traceState.serialize())}},e.prototype.extract=function(e,t,n){var r=n.get(t,_d);if(!r)return e;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return e;var i=function(e){var t=Ed.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}(o);if(!i)return e;i.isRemote=!0;var s=n.get(t,bd);if(s){var a=Array.isArray(s)?s.join(","):s;i.traceState=new vd("string"==typeof a?a:void 0)}return Lu.setSpanContext(e,i)},e.prototype.fields=function(){return[_d,bd]},e}(),wd="baggage";var Td,Od,Cd=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=su.getBaggage(e);if(r&&!Bp(e)){var o=function(e){return e.getAllEntries().map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1],o=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(o+=";"+r.metadata.toString()),o}))}(r).filter((function(e){return e.length<=4096})).slice(0,180),i=function(e){return e.reduce((function(e,t){var n=e+(""!==e?",":"")+t;return n.length>8192?e:n}),"")}(o);i.length>0&&n.set(t,wd,i)}},e.prototype.extract=function(e,t,n){var r=n.get(t,wd),o=Array.isArray(r)?r.join(","):r;if(!o)return e;var i={};return 0===o.length?e:(o.split(",").forEach((function(e){var t=function(e){var t=e.split(";");if(!(t.length<=0)){var n=t.shift();if(n){var r=n.indexOf("=");if(!(r<=0)){var o,i=decodeURIComponent(n.substring(0,r).trim()),s=decodeURIComponent(n.substring(r+1).trim());return t.length>0&&(o=nu(t.join(";"))),{key:i,value:s,metadata:o}}}}}(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),i[t.key]=n}})),0===Object.entries(i).length?e:su.setBaggage(e,su.createBaggage(i)))},e.prototype.fields=function(){return[wd]},e}(),Rd="deployment.environment",Md="telemetry.sdk.name",Pd="telemetry.sdk.language",kd="telemetry.sdk.version",Id=((Td={})[Md]="opentelemetry",Td["process.runtime.name"]="browser",Td[Pd]="webjs",Td[kd]="1.27.0",Td),Ad=function(){return Ad=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ad.apply(this,arguments)},Dd=function(){function e(e,t){var n,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e}),(function(e){return Iu.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})["service.name"]="unknown_service",t[Pd]=Id[Pd],t[Md]=Id[Md],t[kd]=Id[kd],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Iu.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var o=Ad(Ad({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(o);var i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),i=o[0],s=o[1];return Ad(Ad(Ad(Ad({},r._syncAttributes),i),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),s)}));return new e(o,i)},e.EMPTY=new e({}),e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Od||(Od={}));var Ld,xd=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nd=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function Fd(e){var t,n,r={};if("object"!=typeof e||null==e)return r;try{for(var o=xd(Object.entries(e)),i=o.next();!i.done;i=o.next()){var s=Nd(i.value,2),a=s[0],c=s[1];Ud(a)?jd(c)?Array.isArray(c)?r[a]=c.slice():r[a]=c:Iu.warn("Invalid attribute value set for key: "+a):Iu.warn("Invalid attribute key: "+a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function Ud(e){return"string"==typeof e&&e.length>0}function jd(e){return null==e||(Array.isArray(e)?function(e){var t,n,r;try{for(var o=xd(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(null!=s){if(!r){if(Bd(s)){r=typeof s;continue}return!1}if(typeof s!==r)return!1}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}(e):Bd(e))}function Bd(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Ld||(Ld={}));var Wd=performance,zd=Math.pow(10,6),Gd=Math.pow(10,9);function qd(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*zd)]}function Hd(){var e=Wd.timeOrigin;if("number"!=typeof e){var t=Wd;e=t.timing&&t.timing.fetchStart}return e}function Vd(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function $d(e){return Vd(e)||"number"==typeof e||e instanceof Date}function Zd(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=Gd&&(n[1]-=Gd,n[0]+=1),n}var Xd=function(){return Xd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xd.apply(this,arguments)},Jd=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Kd=function(){function e(e,t,n,r,o,i,s,a,c,u){void 0===s&&(s=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Ld.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=i,this.kind=o,this.links=s;var l=Date.now();this._performanceStartTime=Wd.now(),this._performanceOffset=l-(this._performanceStartTime+Hd()),this._startTimeProvided=null!=a,this.startTime=this._getTime(null!=a?a:l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=u&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(Iu.warn("Invalid attribute key: "+e),this):jd(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(Iu.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=r.next();!o.done;o=r.next()){var i=Jd(o.value,2),s=i[0],a=i[1];this.setAttribute(s,a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return Iu.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&Iu.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),$d(t)&&($d(n)||(n=t),t=void 0);var r=Fd(t);return this.events.push({name:e,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.addLink=function(e){return this.links.push(e),this},e.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],Jd(e),!1)),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=Xd({},e),null!=this.status.message&&"string"!=typeof e.message&&(Iu.warn("Dropping invalid status.message of type '"+typeof e.message+"', expected 'string'"),delete this.status.message)),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?Iu.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return r<0&&(n-=1,r+=Gd),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(Iu.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Iu.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<Wd.now())return t=e+this._performanceOffset,Zd(qd(Hd()),qd("number"==typeof t?t:Wd.now()));var t;if("number"==typeof e)return qd(e);if(e instanceof Date)return qd(e.getTime());if(Vd(e))return e;if(this._startTimeProvided)return qd(Date.now());var n=Wd.now()-this._performanceStartTime;return Zd(this.startTime,qd(n))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[Ql]=e:e&&(e.code?n[Yl]=e.code.toString():e.name&&(n[Yl]=e.name),e.message&&(n[Ql]=e.message),e.stack&&(n["exception.stacktrace"]=e.stack)),n[Yl]||n[Ql]?this.addEvent("exception",n,t):Iu.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&Iu.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(Iu.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e}(),Yd=xp(),Qd=ap.AlwaysOn;function ef(){var e=xp();return{sampler:tf(Yd),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:e.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:e.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:e.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:e.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:e.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:e.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:e.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:e.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function tf(e){switch(void 0===e&&(e=xp()),e.OTEL_TRACES_SAMPLER){case ap.AlwaysOn:return new Jp;case ap.AlwaysOff:return new Xp;case ap.ParentBasedAlwaysOn:return new Kp({root:new Jp});case ap.ParentBasedAlwaysOff:return new Kp({root:new Xp});case ap.TraceIdRatio:return new Zp(nf(e));case ap.ParentBasedTraceIdRatio:return new Kp({root:new Zp(nf(e))});default:return Iu.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Qd+'".'),new Jp}}function nf(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return Iu.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Iu.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):t<0||t>1?(Iu.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):t}var rf=function(){this.generateTraceId=sf(16),this.generateSpanId=sf(8)},of=Array(32);function sf(e){return function(){for(var t=0;t<2*e;t++)of[t]=Math.floor(16*Math.random())+48,of[t]>=58&&(of[t]+=39);return String.fromCharCode.apply(null,of.slice(0,2*e))}}var af,cf=function(){function e(e,t,n){this._tracerProvider=n;var r,o,i,s,a=(r=t,o={sampler:tf()},i=ef(),(s=Object.assign({},i,o,r)).generalLimits=Object.assign({},i.generalLimits,r.generalLimits||{}),s.spanLimits=Object.assign({},i.spanLimits,r.spanLimits||{}),s);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=t.idGenerator||new rf,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){var r,o,i;void 0===t&&(t={}),void 0===n&&(n=Gc.active()),t.root&&(n=Lu.deleteSpan(n));var s=Lu.getSpan(n);if(Bp(n))return Iu.debug("Instrumentation suppressed, returning Noop Span"),Lu.wrapSpanContext(uu);var a,c,u,l=null==s?void 0:s.spanContext(),p=this._idGenerator.generateSpanId();l&&Lu.isSpanContextValid(l)?(a=l.traceId,c=l.traceState,u=l.spanId):a=this._idGenerator.generateTraceId();var d=null!==(r=t.kind)&&void 0!==r?r:Ju.INTERNAL,f=(null!==(o=t.links)&&void 0!==o?o:[]).map((function(e){return{context:e.context,attributes:Fd(e.attributes)}})),h=Fd(t.attributes),g=this._sampler.shouldSample(n,a,e,d,h,f);c=null!==(i=g.traceState)&&void 0!==i?i:c;var m={traceId:a,spanId:p,traceFlags:g.decision===Od.RECORD_AND_SAMPLED?ru.SAMPLED:ru.NONE,traceState:c};if(g.decision===Od.NOT_RECORD)return Iu.debug("Recording is off, propagating context in a non-recording span"),Lu.wrapSpanContext(m);var y=Fd(Object.assign(h,g.attributes));return new Kd(this,n,e,m,d,u,f,t.startTime,void 0,y)},e.prototype.startActiveSpan=function(e,t,n,r){var o,i,s;if(!(arguments.length<2)){2===arguments.length?s=t:3===arguments.length?(o=t,s=n):(o=t,i=n,s=r);var a=null!=i?i:Gc.active(),c=this.startSpan(e,o,a),u=Lu.setSpan(a,c);return Gc.with(u,s,void 0,c)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),uf=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lf=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var r=uf(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.forceFlush())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(n).then((function(){e()})).catch((function(t){Wp(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var n,r;try{for(var o=uf(this._spanProcessors),i=o.next();!i.done;i=o.next())i.value.onStart(e,t)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var r=uf(this._spanProcessors),o=r.next();!o.done;o=r.next())o.value.onEnd(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var r=uf(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.shutdown())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(n).then((function(){e()}),t)}))},e}(),pf=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}();!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(af||(af={}));var df=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=ad(n,e.shift(),0,r);return n}({},ef(),function(e){var t,n,r,o,i,s,a,c,u,l,p,d,f=Object.assign({},e.spanLimits),h=Dp(Lp);return f.attributeCountLimit=null!==(s=null!==(i=null!==(o=null!==(n=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==n?n:null===(r=e.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==o?o:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==i?i:h.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:Cp,f.attributeValueLengthLimit=null!==(d=null!==(p=null!==(l=null!==(c=null===(a=e.spanLimits)||void 0===a?void 0:a.attributeValueLengthLimit)&&void 0!==c?c:null===(u=e.generalLimits)||void 0===u?void 0:u.attributeValueLengthLimit)&&void 0!==l?l:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:Op,Object.assign({},e,{spanLimits:f})}(e));this.resource=null!==(t=n.resource)&&void 0!==t?t:Dd.empty(),this.resource=Dd.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var o=new Hp(r);this.activeSpanProcessor=o}else this.activeSpanProcessor=new pf}return e.prototype.getTracer=function(e,t,n){var r=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new cf({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return Iu.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new lf(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),Lu.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Gc.setGlobalContextManager(e.contextManager),e.propagator&&su.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(n){var r,o=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+e+" ms")),r=af.timeout}),e);t.forceFlush().then((function(){clearTimeout(o),r!==af.timeout&&(r=af.resolved,n(r))})).catch((function(e){clearTimeout(o),r=af.error,n(e)}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){var r=t.filter((function(e){return e!==af.resolved}));r.length>0?n(r):e()})).catch((function(e){return n([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(xp().OTEL_PROPAGATORS)),n=t.map((function(t){var n=e._getPropagator(t);return n||Iu.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===n.length?void 0:1===t.length?n[0]:new fd({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=xp().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||Iu.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new Sd}],["baggage",function(){return new Cd}]]),e._registeredExporters=new Map,e}(),ff="service.name",hf="service.version",gf=n(121);const mf={enabled:!1,endpoint:{baseUrl:"http://localhost:4318",trace:"/v1/traces",logs:"/v1/logs"},batchProcessor:{batchSize:512,maxQueueSize:2048,scheduledDelayMillis:1e3,exportTimeoutMillis:5e3},sampling:{enabled:!0,rate:1,featuresRate:{screenshots:0}},rateLimitPerHour:Number.MAX_SAFE_INTEGER,region:"dev"};var yf;!function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(yf||(yf={}));var vf=["OTEL_SDK_DISABLED"];function _f(e){return vf.indexOf(e)>-1}var bf=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Ef(e){return bf.indexOf(e)>-1}var Sf=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function wf(e){return Sf.indexOf(e)>-1}var Tf=1/0,Of={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Nc.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Tf,OTEL_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Tf,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Tf,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:yf.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Cf(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}function Rf(e,t,n,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==n[e]){var i=Number(n[e]);isNaN(i)||(t[e]=i<r?r:i>o?o:i)}}function Mf(e,t,n,r){void 0===r&&(r=",");var o=n[e];"string"==typeof o&&(t[e]=o.split(r).map((function(e){return e.trim()})))}var Pf={ALL:Nc.ALL,VERBOSE:Nc.VERBOSE,DEBUG:Nc.DEBUG,INFO:Nc.INFO,WARN:Nc.WARN,ERROR:Nc.ERROR,NONE:Nc.NONE};function kf(e,t,n){var r=n[e];if("string"==typeof r){var o=Pf[r.toUpperCase()];null!=o&&(t[e]=o)}}var If="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{};function Af(){var e=function(e){var t={};for(var n in Of){var r=n;if("OTEL_LOG_LEVEL"===r)kf(r,t,e);else if(_f(r))Cf(r,t,e);else if(Ef(r))Rf(r,t,e);else if(wf(r))Mf(r,t,e);else{var o=e[r];null!=o&&(t[r]=String(o))}}return t}(If);return Object.assign({},Of,e)}function Df(e,t){return Iu.warn("Timeout must be greater than 0",e),t}function Lf(e){return[429,502,503,504].includes(e)}function xf(e){if(null==e)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?1e3*t:-1;var n=new Date(e).getTime()-Date.now();return n>=0?n:0}var Nf,Ff=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),Uf=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new Ff}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([this._that],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}();!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(Nf||(Nf={}));var jf,Bf=function(){function e(e){var t;void 0===e&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),"string"==typeof e.hostname&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Uf(this._shutdown,this),this._concurrencyLimit="number"==typeof e.concurrencyLimit?e.concurrencyLimit:30,this.timeoutMillis="number"==typeof(t=e.timeoutMillis)?t<=0?Df(t,1e4):t:function(){var e,t=Number(null!==(e=Af().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==e?e:Af().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?Df(t,1e4):t}(),this.onInit(e)}return e.prototype.export=function(e,t){this._shutdownOnce.isCalled?t({code:Nf.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?t({code:Nf.FAILED,error:new Error("Concurrent export limit reached")}):this._export(e).then((function(){t({code:Nf.SUCCESS})})).catch((function(e){t({code:Nf.FAILED,error:e})}))},e.prototype._export=function(e){var t=this;return new Promise((function(n,r){try{Iu.debug("items to be sent",e),t.send(e,n,r)}catch(e){r(e)}}))},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then((function(){}))},e.prototype._shutdown=function(){return Iu.debug("shutdown started"),this.onShutdown(),this.forceFlush()},e}(),Wf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zf=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.name="OTLPExporterError",o.data=r,o.code=n,o}return Wf(t,e),t}(Error),Gf=function(){return Gf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gf.apply(this,arguments)},qf={Accept:"application/json","Content-Type":"application/json"},Hf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.beacon=1]="beacon",e[e.xhr=2]="xhr",e[e.fetch=3]="fetch"}(jf||(jf={}));var Vf=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return t.headers||"function"!=typeof navigator.sendBeacon?"function"==typeof XMLHttpRequest?n.sendMethod=jf.xhr:n.sendMethod=jf.fetch:n.sendMethod=jf.beacon,n.sendMethod!==jf.beacon?n._headers=Object.assign({},function(e){void 0===e&&(e={});var t={};return Object.entries(e).forEach((function(e){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),r=n[0],o=n[1];void 0!==o?t[r]=String(o):Iu.warn('Header "'+r+'" has wrong value and will be ignored')})),t}(t.headers),Xu(Af().OTEL_EXPORTER_OTLP_HEADERS)):n._headers={},n}return Hf(t,e),t.prototype.onInit=function(){If.addEventListener("unload",this.shutdown)},t.prototype.onShutdown=function(){If.removeEventListener("unload",this.shutdown)},t.prototype.send=function(e,t,n){var r=this;if(this._shutdownOnce.isCalled)Iu.debug("Shutdown already started. Cannot send objects");else{var o=this.convert(e),i=JSON.stringify(o),s=new Promise((function(e,t){r.sendMethod===jf.xhr?function(e,t,n,r,o,i){var s,a,c=!1,u=setTimeout((function(){if(clearTimeout(s),c=!0,a.readyState===XMLHttpRequest.DONE){var e=new zf("Request Timeout");i(e)}else a.abort()}),r),l=function(r,p){void 0===r&&(r=5),void 0===p&&(p=1e3),(a=new XMLHttpRequest).open("POST",t),Object.entries(Gf(Gf({},qf),n)).forEach((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1];a.setRequestHeader(n,r)})),a.send(e),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE&&!1===c)if(a.status>=200&&a.status<=299)Iu.debug("xhr success",e),o(),clearTimeout(u),clearTimeout(s);else if(a.status&&Lf(a.status)&&r>0){var t;p*=1.5,t=a.getResponseHeader("Retry-After")?xf(a.getResponseHeader("Retry-After")):Math.round(Math.random()*(5e3-p)+p),s=setTimeout((function(){l(r-1,p)}),t)}else{var n=new zf("Failed to export with XHR (status: "+a.status+")",a.status);i(n),clearTimeout(u),clearTimeout(s)}},a.onabort=function(){if(c){var e=new zf("Request Timeout");i(e)}clearTimeout(u),clearTimeout(s)},a.onerror=function(){if(c){var e=new zf("Request Timeout");i(e)}clearTimeout(u),clearTimeout(s)}};l()}(i,r.url,r._headers,r.timeoutMillis,e,t):r.sendMethod===jf.fetch?function(e,t,n,r,o,i){var s,a=new AbortController,c=setTimeout((function(){a.abort(),null==s||s(new zf("Request Timeout"))}),r),u=function(r,o){return void 0===r&&(r=5),void 0===o&&(o=1e3),fetch(t,{method:"POST",headers:Gf(Gf({},qf),n),signal:a.signal,body:e}).then((function(e){return e.status>=200&&e.status<=299?void Iu.debug("Request Success"):e.status&&Lf(e.status)&&r>0?(o*=1.5,t=e.headers.has("Retry-After")?xf(e.headers.get("Retry-After")):Math.round(Math.random()*(5e3-o)+o),new Promise((function(e,n){var i=setTimeout((function(){s=void 0,u(r-1,o).then(e,n)}),t);s=function(e){clearTimeout(i),n(e)}}))):Promise.reject(new zf("Failed to export with fetch: ("+e.status+" "+e.statusText+")",e.status));var t}),(function(e){return"AbortError"===e.name?Promise.reject(new zf("Request Timeout")):Promise.reject(new zf("Request Fail: "+e.name+" "+e.message))}))};u().then((function(){return o()}),(function(e){return i(e)})).finally((function(){return clearTimeout(c)}))}(i,r.url,r._headers,r.timeoutMillis,e,t):r.sendMethod===jf.beacon&&function(e,t,n,r,o){navigator.sendBeacon(t,new Blob([e],{type:"application/json"}))?(Iu.debug("sendBeacon - can send",e),r()):o(new zf("sendBeacon - cannot send "+e))}(i,r.url,0,e,t)})).then(t,n);this._sendingPromises.push(s);var a=function(){var e=r._sendingPromises.indexOf(s);r._sendingPromises.splice(e,1)};s.then(a,a)}},t}(Bf);function $f(e){return Object.keys(e).map((function(t){return Zf(t,e[t])}))}function Zf(e,t){return{key:e,value:Xf(t)}}function Xf(e){var t=typeof e;return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(Xf)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2);return Zf(t[0],t[1])}))}}:{}}function Jf(e,t){var n,r=e.spanContext(),o=e.status;return{traceId:t.encodeSpanContext(r.traceId),spanId:t.encodeSpanContext(r.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:null===(n=r.traceState)||void 0===n?void 0:n.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:$f(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map((function(e){return function(e,t){return{attributes:e.attributes?$f(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t)})),droppedEventsCount:e.droppedEventsCount,status:{code:o.code,message:o.message},links:e.links.map((function(e){return function(e,t){var n;return{attributes:e.attributes?$f(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:null===(n=e.context.traceState)||void 0===n?void 0:n.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t)})),droppedLinksCount:e.droppedLinksCount}}Math.pow(10,6);var Kf=Math.pow(10,9);function Yf(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function Qf(e){for(var t=new Uint8Array(e.length/2),n=0,r=0;r<e.length;r+=2){var o=Yf(e.charCodeAt(r)),i=Yf(e.charCodeAt(r+1));t[n++]=o<<4|i}return t}var eh=BigInt(1e9);function th(e){return BigInt(e[0])*eh+BigInt(e[1])}function nh(e){var t;return t=th(e),{low:Number(BigInt.asUintN(32,t)),high:Number(BigInt.asUintN(32,t>>BigInt(32)))}}var rh="undefined"!=typeof BigInt?function(e){return th(e).toString()}:function(e){return e[0]*Kf+e[1]};function oh(e){return e}function ih(e){if(void 0!==e)return Qf(e)}var sh={encodeHrTime:nh,encodeSpanContext:Qf,encodeOptionalSpanContext:ih},ah=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function ch(e,t){for(var n=function(e){var t,n,r=new Map;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next();!i.done;i=o.next()){var s=i.value,a=r.get(s.resource);a||(a=new Map,r.set(s.resource,a));var c=s.instrumentationLibrary.name+"@"+(s.instrumentationLibrary.version||"")+":"+(s.instrumentationLibrary.schemaUrl||""),u=a.get(c);u||(u=[],a.set(c,u)),u.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e),r=[],o=n.entries(),i=o.next();!i.done;){for(var s=ah(i.value,2),a=s[0],c=[],u=s[1].values(),l=u.next();!l.done;){var p=l.value;if(p.length>0){var d=p[0].instrumentationLibrary,f=d.name,h=d.version,g=d.schemaUrl,m=p.map((function(e){return Jf(e,t)}));c.push({scope:{name:f,version:h},spans:m,schemaUrl:g})}l=u.next()}var y={resource:{attributes:$f(a.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};r.push(y),i=o.next()}return r}var uh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lh="v1/traces",ph="http://localhost:4318/"+lh,dh=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._headers=Object.assign(n._headers,Xu(Af().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return uh(t,e),t.prototype.convert=function(e){return function(e,t){var n=function(e){var t,n;if(void 0===e)return sh;var r=null===(t=e.useLongBits)||void 0===t||t,o=null!==(n=e.useHex)&&void 0!==n&&n;return{encodeHrTime:r?nh:rh,encodeSpanContext:o?oh:Qf,encodeOptionalSpanContext:o?oh:ih}}(t);return{resourceSpans:ch(e,n)}}(e,{useHex:!0,useLongBits:!1})},t.prototype.getDefaultUrl=function(e){return"string"==typeof e.url?e.url:Af().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?function(e){try{var t=new URL(e);return""===t.pathname&&(t.pathname=t.pathname+"/"),t.toString()}catch(t){return Iu.warn("Could not parse export URL: '"+e+"'"),e}}(Af().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):Af().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(t=Af().OTEL_EXPORTER_OTLP_ENDPOINT,n=lh,t.endsWith("/")||(t+="/"),t+n):ph;var t,n},t}(Vf);class fh extends dh{constructor(e,t,n){const r={Authorization:`Agent-Bearer ${e}`};n?n.headers?n.headers=Object.assign(Object.assign({},n.headers),r):n.headers=r:n={headers:r},super(n),this._authTokenRefresh=t}send(e,t,n){const r=Object.create(null,{send:{get:()=>super.send}});r.send.call(this,e,t,(o=>{return i=this,s=void 0,c=function*(){if(401===o.code){let i;try{i=yield this._authTokenRefresh()}catch(e){return console.error("Failed to refresh auth token",e),void n(o)}this._updateAuthHeader(i),r.send.call(this,e,t,n)}else n(o)},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(n,r)}o((c=c.apply(i,s||[])).next())}));var i,s,a,c}))}_updateAuthHeader(e){this.headers.Authorization=`Agent-Bearer ${e}`}}const hh=("undefined"!=typeof globalThis?globalThis:n.g).performance;function gh(){const[e,t]=function(){const e=.001*hh.now();let t=Math.floor(e),n=Math.floor(e%1*1e9);return[t,n]}();return 1e3*e+Math.floor(t/1e6)}function mh(e){return new Promise((t=>setTimeout(t,e)))}class yh{constructor(e){let{bucketSize:t,tokensPerInterval:n,interval:r,parentBucket:o}=e;if(this.bucketSize=t,this.tokensPerInterval=n,"string"==typeof r)switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invalid interval "+r)}else this.interval=r;this.parentBucket=o,this.content=0,this.lastDrip=gh()}async removeTokens(e){if(0===this.bucketSize)return Number.POSITIVE_INFINITY;if(e>this.bucketSize)throw new Error(`Requested tokens ${e} exceeds bucket size ${this.bucketSize}`);this.drip();const t=async()=>{const t=Math.ceil((e-this.content)*(this.interval/this.tokensPerInterval));return await mh(t),this.removeTokens(e)};if(e>this.content)return t();if(null!=this.parentBucket){const n=await this.parentBucket.removeTokens(e);return e>this.content?t():(this.content-=e,Math.min(n,this.content))}return this.content-=e,this.content}tryRemoveTokens(e){return!(this.bucketSize&&(e>this.bucketSize||(this.drip(),e>this.content||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)||(this.content-=e,0))))}drip(){if(0===this.tokensPerInterval){const e=this.content;return this.content=this.bucketSize,this.content>e}const e=gh(),t=Math.max(e-this.lastDrip,0);this.lastDrip=e;const n=t*(this.tokensPerInterval/this.interval),r=this.content;return this.content=Math.min(this.content+n,this.bucketSize),Math.floor(this.content)>Math.floor(r)}}class vh{constructor(e){let{tokensPerInterval:t,interval:n,fireImmediately:r}=e;this.tokenBucket=new yh({bucketSize:t,tokensPerInterval:t,interval:n}),this.tokenBucket.content=t,this.curIntervalStart=gh(),this.tokensThisInterval=0,this.fireImmediately=null!=r&&r}async removeTokens(e){if(e>this.tokenBucket.bucketSize)throw new Error(`Requested tokens ${e} exceeds maximum tokens per interval ${this.tokenBucket.bucketSize}`);const t=gh();if((t<this.curIntervalStart||t-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=t,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)return-1;{const n=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-t);await mh(n);const r=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,r}}const n=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,n}tryRemoveTokens(e){if(e>this.tokenBucket.bucketSize)return!1;const t=gh();if((t<this.curIntervalStart||t-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=t,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;const n=this.tokenBucket.tryRemoveTokens(e);return n&&(this.tokensThisInterval+=e),n}getTokensRemaining(){return this.tokenBucket.drip(),this.tokenBucket.content}}class _h{constructor(e){this.root=e.root,this.rateLimiter=e.rateLimiter}shouldSample(e,t,n,r,o,i){return this.rateLimiter&&!this.rateLimiter.tryRemoveTokens(1)?{decision:zp.NOT_RECORD}:this.root.shouldSample(e,t,n,r,o,i)}toString(){return"CircuitBreakerSampler"}}class bh{constructor(e){this.enabled=e.enabled,this.root=e.root}shouldSample(e,t,n,r,o,i){var s,a;if(!this.enabled)return this.root.shouldSample(e,t,n,r,o,i);const c=null!==(a=null===(s=o["sample.ratio"])||void 0===s?void 0:s.valueOf())&&void 0!==a?a:void 0;return void 0===c?this.root.shouldSample(e,t,n,r,o,i):"number"!=typeof c?(console.warn("Sample ratio attribute value is invalid, must be a number. Not sampling. value:",c),{decision:zp.NOT_RECORD}):c<0||c>1?(console.warn("Sample ratio attribute value is out of range. Not sampling. Must be between 0 and 1 (both inclusive). value:",c),{decision:zp.NOT_RECORD}):new Zp(c).shouldSample(e,t)}toString(){return"SampleRatioAttributeSampler"}}class Eh{static setup(e){var t,n,r,o;const{isDev:i,extensionVersion:s,authToken:a,authTokenRefreshFn:c,env:u}=e;let{config:l}=e;if(this._extensionVersion=s,i&&(console.log("Using dev override config for OpenTelemetry setup. OpenTelemetry enabled:",mf.enabled),l=mf),this._initialized||(this._onceInit(),this._initialized=!0),(0,gf.isEqual)(this._config,l))return;if(!l.enabled)return this._config=l,void this._close();this._close(),console.debug("setting up new OpenTelemetry pipeline");const p=new fh(a,c,{url:l.endpoint.baseUrl+l.endpoint.trace}),d=new Hp(p,{maxExportBatchSize:null===(t=l.batchProcessor)||void 0===t?void 0:t.batchSize,scheduledDelayMillis:null===(n=l.batchProcessor)||void 0===n?void 0:n.scheduledDelayMillis,maxQueueSize:null===(r=l.batchProcessor)||void 0===r?void 0:r.maxQueueSize,exportTimeoutMillis:null===(o=l.batchProcessor)||void 0===o?void 0:o.exportTimeoutMillis}),f=new vh({tokensPerInterval:l.rateLimitPerHour,interval:"hour"}),h=l.sampling.enabled?new Zp(l.sampling.rate):new Xp,g=new _h({rateLimiter:f,root:new Kp({root:new bh({enabled:l.sampling.enabled,root:h})})}),m=new df({sampler:g,resource:new vp({[ff]:"connect-chrome-edu-mv3",[Rd]:"dev",[hf]:s,"qoria.runtime.env":u})});m.addSpanProcessor(d),new dp({ignoreUrls:[new RegExp("/get/verdict")]}).setTracerProvider(m),this._config=l,this._provider=m}static getTracer(e){return this._provider?this._extensionVersion?this._provider.getTracer(e,this._extensionVersion):(console.debug("extensionVersion is not set, returning tracer without version specified"),this._provider.getTracer(e)):(console.debug("returning no-op opentelemetry tracer"),this._noopProvider.getTracer("noop"))}static _onceInit(){const e=new ku;Gc.setGlobalContextManager(e),e.enable(),su.setGlobalPropagator(new Au({propagators:[new Hu,new Ku]}))}static _close(){if(this._provider){const e=this._provider;e.forceFlush().catch((e=>{console.error("Error flushing OpenTelemetry provider",e)})).finally((()=>{e.shutdown().catch((e=>{console.error("Error shutting down OpenTelemetry provider",e)}))})),this._provider=null}}}Eh._noopProvider=new Mu,Eh._provider=null,Eh._config=null,Eh._initialized=!1,Eh._extensionVersion=null;class Sh{static init(){Sh.initialised||(Sh.initialised=!0)}static initSignaler(e,t,n,r,o,i){const s=su.extract(Gc.active(),i),a=Eh.getTracer("P2PManager").startSpan("P2PManager.initSignaler",{attributes:{[this.traceAttr("channel_name")]:t,[this.traceAttr("peer_id")]:r,[this.traceAttr("remote_peer_id")]:n}},s);if(Sh.iceServers=o,!Sh.signalers[t]||["closed","failed"].includes(Sh.signalers[t].client.connection.state)){const n=new bc.Signaler(e);Sh.signalers[t]=n,n.client.connect(),n.client.connection.once("closed",(()=>{a.setStatus({code:Ld.ERROR,message:"signaler client 'closed' event"}),a.end(),delete Sh.signalers[t]})),n.client.connection.once("failed",(e=>{delete Sh.signalers[t],a.setStatus({code:Ld.ERROR,message:"signaler client 'failed' event"}),a.end(),console.error("signaler error",e)})),n.client.connection.on("failed",(e=>{delete Sh.signalers[t],a.setStatus({code:Ld.ERROR,message:"signaler client 'failed' event"}),a.end(),console.error("signaler error",e)}))}else a.addEvent("signaler exists for this session, not creating a new one");const c=Sh.signalers[t].channel(t);c.presence.enter(),Sh.channels[n]=t,c.subscribe(bc.P2P_CONNECT_MESSAGE,(e=>{var t,n;if((null===(t=e.data)||void 0===t?void 0:t.receiver)!==r)return void a.addEvent("p2p 'connect' message received for a different peer , ignoring",{recipient:null===(n=e.data)||void 0===n?void 0:n.receiver});a.addEvent("p2p 'connect' message received");const o=Sh.getMessageSender(e),i=Sh.connect(c,o,e);i.pc.addEventListener("datachannel",(e=>{Sh.receiveDataChannel(e.channel,i,o),a.addEvent("datachannel active"),a.end()}))})),c.subscribe("disconnect",(e=>{var t;if((null===(t=e.data)||void 0===t?void 0:t.receiver)!==r)return;const n=Sh.getMessageSender(e);Sh.disconnect(n),Sh.closeChannelsWithPeer(n)}))}static tearDown(e){return t=this,n=void 0,o=function*(){Sh.disconnect(e),Sh.disconnectSnapshotStreamer(e),Sh.disconnectTabStreamer(e)},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}c((o=o.apply(t,n||[])).next())}));var t,n,r,o}static receiveDataChannel(e,t,n){var r,o,i,s;const a=e.label;"main"===a&&(Sh.streamers[n]=new Ec(e,null!==(o=null===(r=t.pc.sctp)||void 0===r?void 0:r.maxMessageSize)&&void 0!==o?o:0),Sh.streamers[n].startStreaming()),"control"===a&&(e.addEventListener("message",(e=>{const t=JSON.parse(e.data),r=t.windowId,o=t.tabId;Sh.streamers[n]&&Sh.streamers[n].switchTab(o),Sh.tabStreamers[n]&&Sh.tabStreamers[n].setWindow(r)})),Sh.tabStreamers[n]=new Sc(e,n,null!==(s=null===(i=t.pc.sctp)||void 0===i?void 0:i.maxMessageSize)&&void 0!==s?s:0),Sh.tabStreamers[n].startStreaming()),e.addEventListener("close",(()=>{"main"===a&&Sh.disconnectSnapshotStreamer(n),"control"===a&&Sh.disconnectTabStreamer(n),Sh.disconnect(n),Sh.closeChannelsWithPeer(n)}))}static connect(e,t,n){Sh.connections[t]&&Sh.disconnect(t);const r=new bc.PeerConnection(e,Sh.iceServers,!0);return r.connect(t,n),Sh.connections[t]=r,r.pc.addEventListener("connectionstatechange",(()=>{switch(r.pc.connectionState){case"failed":case"closed":Sh.disconnect(t),Sh.disconnectSnapshotStreamer(t),Sh.disconnectTabStreamer(t)}})),r}static close(e){for(const[t,n]of Object.entries(Sh.channels))n===e&&Sh.closeChannelsWithPeer(t)}static disconnect(e){Sh.connections[e]&&(Sh.connections[e].close(),delete Sh.connections[e])}static disconnectTabStreamer(e){Sh.tabStreamers[e]&&(Sh.tabStreamers[e].endStreaming(),delete Sh.tabStreamers[e])}static disconnectSnapshotStreamer(e){Sh.streamers[e]&&(Sh.streamers[e].endStreaming(),delete Sh.streamers[e])}static closeChannelsWithPeer(e){if(Sh.channels[e]){const t=Sh.channels[e],n=Sh.signalers[t].channel(t);n.unsubscribe(),n.detach(),delete Sh.channels[e];const r=[];for(const[e,n]of Object.entries(Sh.channels))n===t&&r.push(e);0===r.length&&Sh.signalers[t]&&"connected"===Sh.signalers[t].client.connection.state&&Sh.signalers[t].client.close()}}static setCloseTimeouts(e,t,n){if(t)for(const r of n){const n=dc(e,r);if(n>Date.now()/1e3){const e=`${t}/${r.group.replace(/[^a-z0-9]/gi,"-")}`;clearTimeout(Sh.closeTimeouts[e]),Sh.closeTimeouts[e]=setTimeout((()=>{Sh.close(e)}),1e3*n-Date.now())}}}static getMessageSender(e){return e.clientId}static prepareMessage(e){const t=JSON.stringify(Object.assign(Object.assign({},e),{timestamp:(new Date).getTime()}));return new Uint8Array([...Sh.encoder.encode(t),Sh.terminatorCharCode,Sh.terminatorCharCode])}static send(e,t,n){let r=0;for(;r<t.length;){const o=Math.min(n,t.length-r),i=new Uint8Array(t.buffer,r,o);e.send(i),r+=o}}static traceAttr(e){return`${Sh.traceAttrNamespace}.${e}`}}Sh.initialised=!1,Sh.encoder=new TextEncoder,Sh.terminatorCharCode="\0".charCodeAt(0),Sh.signalers={},Sh.channels={},Sh.connections={},Sh.streamers={},Sh.tabStreamers={},Sh.closeTimeouts={},Sh.iceServers=void 0,Sh.traceAttrNamespace="qoria.linewize.liveview";class wh{static init(){this.consoleLogStream=new zr.A(Lr).consoleLogStream(),this.initialised=!0}static sendConsoleLogToNativeAgent(e,t){this.initialised||this.init();const n=new Wr.ConsoleLog;n.setLog(e),n.setLoglevel(t),this.consoleLogStream.write(n)}}wh.initialised=!1;class Th{constructor(e){this.nextNode=null,this.data=e,this.nextNode=null,this.deleted=!1}}class Oh{static insertLogData(e){return this.logEntries.insert(e)}static uploadLogData(e,t){var n,r,o,i,s;return r=this,o=void 0,s=function*(){const r=this.getLogs(t),o=e.username,i=e.applianceId,s=e.filename,a=e.uploadUrl;if(0===r.length)return{success:!0,uploadedNumberOfLogs:0};const c=Date.now()/1e3;let u=yield Nh.getAuthCookie();if((null!==(n=null==u?void 0:u.expirationDate)&&void 0!==n?n:0)<=c&&(yield Nh.initAutoAuth(),u=yield Nh.getAuthCookie()),!(i&&o&&r&&s))return Vr("Failed to upload debug logs due to missing properties. "+JSON.stringify({applianceId:!!i,username:!!o,logsToUpload:!!r,remoteFilename:!!s})),{success:!1,uploadedNumberOfLogs:null};try{const e=yield fetch(a,{credentials:"include",method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({appliance_id:i,username:o,logs_to_upload:r,file_name:s})});if(e.ok){const e=this.getLogsSize(t)||0;return Zr(`${e} number of diagnostic logs has been uploaded successfully.`),this.logEntries.clean(),{success:!0,uploadedNumberOfLogs:e}}Vr("Failed to upload log data",{status:e.status,body:yield e.text()})}catch(e){Ur(e),Vr("Fetch threw an exception while uploading log data",e)}return{success:!1,uploadedNumberOfLogs:null}},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,o||[])).next())}))}static storageIsEmpty(){return this.logEntries.empty()}static getLogsSize(e){return null===e?0:this.logEntries.getLogsSize(e)}static getLogEntriesHead(){return this.logEntries.getHeadNode()}static getLogs(e=null){return this.logEntries.toString(e)}static clean(){this.logEntries.clean()}}Oh.logEntries=new class{constructor(){this.head=null,this.tail=null,this.nMaxListEntries=2e3,this.nEntriesToDelete=500,this.linkedListSize=0}insert(e){const t=new Th(e);if(0===this.linkedListSize)this.head=this.tail=t;else if(this.tail){if(this.linkedListSize>=this.nMaxListEntries)for(let e=0;e<this.nEntriesToDelete;e++)this.delete();this.tail.nextNode=t,this.tail=t}return this.linkedListSize++,t}clean(){for(;0!==this.linkedListSize;)this.delete()}empty(){return 0===this.linkedListSize}delete(){if(!this.head)return;if(this.head.deleted=!0,1===this.linkedListSize)return this.head=this.tail=null,void this.linkedListSize--;const e=this.head.nextNode;e&&(this.head=e,this.linkedListSize--)}size(){return this.linkedListSize}getHeadNode(){return this.head}toString(e=null){let t=this.head;null===e||e.deleted||(t=e);let n="";for(;t;)n+=t.data+"\n",t=t.nextNode;return n}getLogsSize(e=null){let t=0,n=e;for(;null!==n;)t++,n=n.nextNode;return t}};class Ch{static processLogMessage(e,t){var n,r,o,i,s,a,c;if(Ch.lastSavedLog=Oh.insertLogData(e),Ch.companionConnected!==_c.connected()&&(Ch.companionConnected=_c.connected(),Ch.companionConnected))for(;null===(n=Ch.lastLogWrittenToFile)||void 0===n?void 0:n.nextNode;){Ch.lastLogWrittenToFile=null!==(o=null===(r=Ch.lastLogWrittenToFile)||void 0===r?void 0:r.nextNode)&&void 0!==o?o:null;const e=null!==(s=null===(i=Ch.lastLogWrittenToFile)||void 0===i?void 0:i.data)&&void 0!==s?s:"";e&&wh.sendConsoleLogToNativeAgent(e,Ir.INFO)}Ch.companionConnected&&(wh.sendConsoleLogToNativeAgent(e,t),Ch.lastLogWrittenToFile=Ch.lastSavedLog),(null===(a=Ch.lastLogWrittenToFile)||void 0===a?void 0:a.deleted)&&(Ch.lastLogWrittenToFile=Oh.getLogEntriesHead()),(null===(c=Ch.lastLogUploaded)||void 0===c?void 0:c.deleted)&&(Ch.lastLogUploaded=Oh.getLogEntriesHead())}static uploadLogData(e){var t,n,r,o,i,s;return r=this,o=void 0,s=function*(){const r=yield Oh.uploadLogData(e,null!==(n=null===(t=Ch.lastLogUploaded)||void 0===t?void 0:t.nextNode)&&void 0!==n?n:null);return Ch.lastLogUploaded=Ch.lastSavedLog,r},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,o||[])).next())}))}}Ch.lastSavedLog=null,Ch.lastLogUploaded=null,Ch.lastLogWrittenToFile=null,Ch.companionConnected=!1;var Rh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Mh{static loadBlockedDomains(){return Rh(this,void 0,void 0,(function*(){if(this.init)return;const e=chrome.runtime.getURL("offscreen/assets/domains.json");try{const t=yield fetch(e);if(t.ok){const e=yield t.json();this.fallbackDomains=new Set(e.domains)}}catch(e){Ur(e),Vr("Fetch threw an exception while retrieving fallback.blocked domains",e)}this.init=!0,this.cachedCallbacks.forEach((e=>{e()})),this.cachedCallbacks=[]}))}static getFallbackDomainNumber(){return Rh(this,void 0,void 0,(function*(){return yield this.waitTillDomainsAreLoaded(),this.fallbackDomains?this.fallbackDomains.size:-1}))}static domainIsBlocked(e){var t;return Rh(this,void 0,void 0,(function*(){return yield this.waitTillDomainsAreLoaded(),null===(t=this.fallbackDomains)||void 0===t?void 0:t.has(e)}))}static waitTillDomainsAreLoaded(){return Rh(this,void 0,void 0,(function*(){return new Promise((e=>{!0===this.init?e():this.cachedCallbacks.push((()=>{e()}))}))}))}}Mh.cachedCallbacks=[],Mh.init=!1;var Ph,kh,Ih,Ah=n(526),Dh=n.n(Ah),Lh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},xh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Nh{static init(e=!1,t){Nh.initialised||(Nh.initialised=!0,Zr("Initiating the offscreen doc..."),Nh.isMv2=e,Nh.registerEventHandlers(),Nh.sendMessageCallback=t,Sh.init(),Mh.loadBlockedDomains())}static getOffscreenConfig(){return Nh.offscreenConfig}static offscreenConfigUpdated(e,t){yc.reconnectToEventSourceIfneeded(e,t),Nh.onConfigUpdateEventHandler&&Nh.onConfigUpdateEventHandler(e,t)}static registerConfigUpdateEventHandler(e){Nh.onConfigUpdateEventHandler=e}static sendLocalIpMessage(e){Nh.sendMesage({type:Ar.UtilLocalIpUpdated,localIpAddress:e})}static registerEventHandlers(){Nh.isMv2||chrome.runtime.onMessage.addListener(((e,t,n)=>Nh.handleMesage(e,n)))}static getUserIP(){Nh.localIpPeerConnection&&"closed"!==Nh.localIpPeerConnection.iceConnectionState||(Nh.localIpPeerConnection&&(Nh.localIpPeerConnection.onicecandidate&&(Nh.localIpPeerConnection.onicecandidate=null),Nh.localIpPeerConnection=void 0),Nh.localIpPeerConnection=(e=>{const t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),n=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;return t.createDataChannel(""),t.createOffer().then((function(r){var o;null===(o=r.sdp)||void 0===o||o.split("\n").forEach((function(t){if(t.indexOf("candidate")<0)return;const r=t.match(n);let o=r?r[0]:"0.0.0.0";o.startsWith("100.115.92")&&(o="10.255.255.254"),e(o)})),null==t||t.setLocalDescription(r)})).catch((function(e){Ur(e)})),t.onicecandidate=function(t){if(t&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.match(n)){const r=t.candidate.candidate.match(n);let o=r?r[0]:"0.0.0.0";o.startsWith("100.115.92")&&(o="10.255.255.254"),e(o)}},t.onsignalingstatechange=()=>{"closed"===t.connectionState&&Nh.getUserIP()},t})(Nh.sendLocalIpMessage)),Nh.routineIPchangeCheck()}static routineIPchangeCheck(){Nh.ipChangeRoutineTimeoutId||(Nh.ipChangeRoutineTimeoutId=setTimeout((()=>{Nh.getUserIP(),Nh.ipChangeRoutineTimeoutId=null}),3e5))}static handleMesage(e,t){let n=!1;switch(e.type){case Ar.InitOffscreenDocument:Nh.init();break;case Ar.InitOffscreenOpenTelemetry:!function(e){Lh(this,void 0,void 0,(function*(){try{const{isDev:t,authToken:n,version:r,config:o}=e,i=()=>Lh(this,void 0,void 0,(function*(){return(yield Nh.getAuthToken(!0))||""}));if(!o)return void Xr("OpenTelemetry offscreen initialization aborted as otel config is missing (expected if in companion mode)");Eh.setup({isDev:t,extensionVersion:r,authToken:n,authTokenRefreshFn:i,env:"offscreen",config:o})}catch(e){Vr("Failed to initialize OpenTelemetry offscreen",null==e?void 0:e.message),Ur(e)}}))}(e.data);break;case Ar.RegisterExtension:_c.registerExtension().then(t),n=!0;break;case Ar.UnregisterExtension:_c.unregisterExtension();break;case Ar.LogMessage:Ch.processLogMessage(e.msg,e.logLevel);break;case Ar.UploadLogData:(()=>{xh(this,void 0,void 0,(function*(){const n=yield Ch.uploadLogData(e.data);t(n)}))})(),n=!0;break;case Ar.IpAddressChangeRoutine:Nh.getUserIP();break;case Ar.UpdateOffscreenConfig:{const t=Nh.offscreenConfig;Nh.offscreenConfig=e.config,Nh.offscreenConfigUpdated(t,e.config);break}case Ar.GetBrowserDetails:t(Dh().getParser(window.navigator.userAgent).getResult());break;case Ar.CheckIfDomainIsBlocked:(()=>{xh(this,void 0,void 0,(function*(){const n=yield Mh.domainIsBlocked(e.domain);t(n)}))})(),n=!0;break;case Ar.ExtractFallbackDomains:(()=>{xh(this,void 0,void 0,(function*(){const e=yield Mh.getFallbackDomainNumber();t(e)}))})(),n=!0;break;case Ar.P2PInitSignaler:Sh.initSignaler(e.signalToken,e.channelName,e.remotePeerId,e.peerId,e.iceServers,e.traceContext);break;case Ar.P2PSetCloseTimeouts:Sh.setCloseTimeouts(e.timezone,e.deviceChannelId,e.activeConfigurations);break;case Ar.UtilResizeAndCompressImage:(()=>{xh(this,void 0,void 0,(function*(){const n=yield(r=e.image,o=e.maxWidth,i=e.compressQuality,new Promise((e=>{const t=new Image;t.onload=function(){const n=o,r=document.createElement("canvas"),s=r.getContext("2d");r.width=t.width,r.height=t.height;const a=t.width>n?n:t.width,c=a*(t.height/t.width);r.width=a,r.height=c,null==s||s.drawImage(t,0,0,a,c),e(i&&i<1?r.toDataURL("image/jpeg",i):r.toDataURL())},t.src=r})));var r,o,i;t({processedImage:n})}))})(),n=!0;break;case Ar.BroadcastScheduleTime:Nh.isMv2&&setTimeout((()=>{Nh.sendMesage({type:Ar.BroadcastWakeUpCall})}),e.timeInMs)}return Nh.isMv2&&!n&&t(),n}static initAutoAuth(){return xh(this,void 0,void 0,(function*(){yield Nh.sendMesage({type:Ar.InitAutoAuth})}))}static getAuthCookie(){return xh(this,void 0,void 0,(function*(){return Nh.sendMesage({type:Ar.GetAuthCookie})}))}static getAuthToken(e=!1){return xh(this,void 0,void 0,(function*(){return Nh.sendMesage({type:Ar.GetAuthToken,refreshToken:e})}))}static sendMesage(e){return xh(this,void 0,void 0,(function*(){return Nh.isMv2?yield new Promise((t=>{Nh.sendMessageCallback&&Nh.sendMessageCallback(e,(e=>t(e)))})):yield chrome.runtime.sendMessage(e)}))}}Nh.initialised=!1,Nh.isMv2=!1,Nh.ipChangeRoutineTimeoutId=null,Nh.registerConfigUpdateEventHandler(((e,t)=>{if((null==t?void 0:t.extensionVersion)===(null==e?void 0:e.extensionVersion)&&(null==t?void 0:t.extensionName)===(null==e?void 0:e.extensionName))return;const n={extensionName:null==t?void 0:t.extensionName,extensionVersion:null==t?void 0:t.extensionVersion,buildENV:"production"},r={userIdentifier:null==t?void 0:t.user,applianceId:null==t?void 0:t.applianceId};(e=>{const t=jr(e),n=e=>(e.release=t,e);var r;_e().addEventProcessor(n),ye().addEventProcessor(n),r=n,ve().addEventProcessor(r)})(n),Br(r)})),(null===(Ph=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===Ph?void 0:Ph.getManifest)&&2===(null===(Ih=null===(kh=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===kh?void 0:kh.getManifest())||void 0===Ih?void 0:Ih.manifest_version)||Nh.init()})()})();