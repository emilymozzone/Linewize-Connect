/*! For license information please see offscreen.js.LICENSE.txt */
(()=>{var e={2376:e=>{var t;self,t=function(){return(()=>{var e={"./node_modules/ably/build/ably-commonjs.js":e=>{var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=42)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return i})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return p})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return g})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__spreadArray",(function(){return v})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return S})),n.d(t,"__asyncDelegator",(function(){return E})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return C})),n.d(t,"__importDefault",(function(){return R})),n.d(t,"__classPrivateFieldGet",(function(){return O})),n.d(t,"__classPrivateFieldSet",(function(){return I}));var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function a(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var p=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function f(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||p(t,e,n)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function v(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=o[e](t)).value instanceof _?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function E(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,o,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&p(t,e,n);return w(t,e),t}function R(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function I(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.allToUpperCase=t.allToLowerCase=t.encodeBody=t.decodeBody=t.Format=t.promisify=t.trim=t.arrChooseN=t.randomHexString=t.randomString=t.cheapRandStr=t.dataSizeBytes=t.inspectBody=t.inspectError=t.isErrorInfoOrPartialErrorInfo=t.now=t.parseQueryString=t.toQueryString=t.arrPopRandomElement=t.defaultPostHeaders=t.defaultGetHeaders=t.allSame=t.arrEvery=t.arrFilter=t.arrMap=t.safeArrForEach=t.arrForEach=t.forInOwnNonNullProperties=t.valuesArray=t.keysArray=t.arrWithoutValue=t.arrDeleteValue=t.arrIn=t.arrIndexOf=t.arrSubtract=t.arrIntersectOb=t.arrIntersect=t.intersect=t.containsValue=t.inherits=t.prototypicalClone=t.shallowClone=t.isEmptyArg=t.isOnlyPropIn=t.isEmpty=t.isObject=t.ensureArray=t.isArray=t.copy=t.mixin=void 0,t.toBase64=t.matchDerivedChannel=t.shallowEquals=t.getGlobalObject=t.getRetryTime=t.getJitterCoefficient=t.getBackoffCoefficient=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(8)),s=r.__importDefault(n(4)),a=n(11),c=n(31);function u(e){return Math.floor(Math.random()*e.length)}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var o=t[r];if(!o)break;var i=Object.prototype.hasOwnProperty;for(var s in o)i&&!i.call(o,s)||(e[s]=o[s])}return e}function d(e){return null==e}function p(e,t){var n=function(){};n.prototype=e;var r=new n;return t&&l(r,t),r}function f(e,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];-1!=(0,t.arrIndexOf)(n,i)&&r.push(i)}return r}function h(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o in t&&n.push(o)}return n}function g(e,n){var r=(0,t.arrIndexOf)(e,n),o=-1!=r;return o&&e.splice(r,1),o}t.mixin=l,t.copy=function(e){return l({},e)},t.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.ensureArray=function(e){return d(e)?[]:(0,t.isArray)(e)?e:[e]},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isOnlyPropIn=function(e,t){for(var n in e)if(n!==t)return!1;return!0},t.isEmptyArg=d,t.shallowClone=function(e){var t=new Object;for(var n in e)t[n]=e[n];return t},t.prototypicalClone=p,t.inherits=function(e,t){o.default.Config.inherits?o.default.Config.inherits(e,t):(e.super_=t,e.prototype=p(t.prototype,{constructor:e}))},t.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},t.intersect=function(e,n){return(0,t.isArray)(n)?f(e,n):h(e,n)},t.arrIntersect=f,t.arrIntersectOb=h,t.arrSubtract=function(e,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];-1==(0,t.arrIndexOf)(n,i)&&r.push(i)}return r},t.arrIndexOf=Array.prototype.indexOf?function(e,t,n){return e.indexOf(t,n)}:function(e,t,n){n=n||0;for(var r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.arrIn=function(e,n){return-1!==(0,t.arrIndexOf)(e,n)},t.arrDeleteValue=g,t.arrWithoutValue=function(e,t){var n=e.slice();return g(n,t),n},t.keysArray=function(e,t){var n=[];for(var r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(r);return n},t.valuesArray=function(e,t){var n=[];for(var r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||n.push(e[r]);return n},t.forInOwnNonNullProperties=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&t(n)},t.arrForEach=Array.prototype.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r,e)},t.safeArrForEach=function(e,n){return(0,t.arrForEach)(e.slice(),n)},t.arrMap=Array.prototype.map?function(e,t){return e.map(t)}:function(e,t){for(var n=[],r=e.length,o=0;o<r;o++)n.push(t(e[o],o,e));return n},t.arrFilter=Array.prototype.filter?function(e,t){return e.filter(t)}:function(e,t){for(var n=[],r=e.length,o=0;o<r;o++)t(e[o])&&n.push(e[o]);return n},t.arrEvery=Array.prototype.every?function(e,t){return e.every(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)if(!t(e[r],r,e))return!1;return!0},t.allSame=function(e,n){if(0===e.length)return!0;var r=e[0][n];return(0,t.arrEvery)(e,(function(e){return e[n]===r}))};var m,y={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function v(e){return e.splice(u(e),1)[0]}function _(e){return Math.min((e+2)/3,2)}function S(){return 1-.2*Math.random()}t.defaultGetHeaders=function(e,t){return{accept:y[t||m.json],"X-Ably-Version":i.default.protocolVersion.toString(),"Ably-Agent":(0,i.getAgentString)(e)}},t.defaultPostHeaders=function(e,t){var n;return{accept:n=y[t||m.json],"content-type":n,"X-Ably-Version":i.default.protocolVersion.toString(),"Ably-Agent":(0,i.getAgentString)(e)}},t.arrPopRandomElement=v,t.toQueryString=function(e){var t=[];if(e)for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""},t.parseQueryString=function(e){for(var t,n=/([^?&=]+)=?([^&]*)/g,r={};t=n.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r},t.now=Date.now||function(){return(new Date).getTime()},t.isErrorInfoOrPartialErrorInfo=function(e){return"object"==typeof e&&null!==e&&("ErrorInfo"==e.constructor.name||"PartialErrorInfo"==e.constructor.name)},t.inspectError=function(e){var t,n;return e instanceof Error||"ErrorInfo"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"PartialErrorInfo"===(null===(n=null==e?void 0:e.constructor)||void 0===n?void 0:n.name)?e.toString():o.default.Config.inspect(e)},t.inspectBody=function(e){return o.default.BufferUtils.isBuffer(e)?e.toString():"string"==typeof e?e:o.default.Config.inspect(e)},t.dataSizeBytes=function(e){if(o.default.BufferUtils.isBuffer(e))return o.default.BufferUtils.byteLength(e);if("string"==typeof e)return o.default.Config.stringByteSize(e);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof e)},t.cheapRandStr=function(){return String(Math.random()).substr(2)},t.randomString=function(e){if(o.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return o.default.Config.getRandomValues(t),o.default.BufferUtils.base64Encode(t)}for(var n=o.default.BufferUtils.base64CharSet,r=Math.round(4*e/3),i="",s=0;s<r;s++)i+=n[u(n)];return i},t.randomHexString=function(e){if(o.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return o.default.Config.getRandomValues(t),o.default.BufferUtils.hexEncode(t)}for(var n=o.default.BufferUtils.hexCharSet,r=2*e,i="",s=0;s<r;s++)i+=n[u(n)];return i},t.arrChooseN=function(e,t){for(var n=Math.min(t,e.length),r=e.slice(),o=[],i=0;i<n;i++)o.push(v(r));return o},t.trim=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.promisify=function(e,t,n){return new Promise((function(o,i){e[t].apply(e,r.__spreadArray(r.__spreadArray([],n,!1),[function(e,t){e?i(e):o(t)}],!1))}))},function(e){e.msgpack="msgpack",e.json="json"}(m=t.Format||(t.Format={})),t.decodeBody=function(e,t){return"msgpack"==t?o.default.Config.msgpack.decode(e):JSON.parse(String(e))},t.encodeBody=function(e,t){return"msgpack"==t?o.default.Config.msgpack.encode(e,!0):JSON.stringify(e)},t.allToLowerCase=function(e){return e.map((function(e){return e&&e.toLowerCase()}))},t.allToUpperCase=function(e){return e.map((function(e){return e&&e.toUpperCase()}))},t.getBackoffCoefficient=_,t.getJitterCoefficient=S,t.getRetryTime=function(e,t){return e*_(t)*S()},t.getGlobalObject=function(){return e||("undefined"!=typeof window?window:self)},t.shallowEquals=function(e,t){return Object.keys(e).every((function(n){return e[n]===t[n]}))&&Object.keys(t).every((function(n){return t[n]===e[n]}))},t.matchDerivedChannel=function(e){var t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new s.default("regex match failed",400,40010);if(t[2])throw new s.default("cannot use a derived option with a ".concat(t[2]," channel"),400,40010);return{qualifierParam:t[3]||"",channelName:t[4]}},t.toBase64=function(e){return o.default.Config.createHmac?Buffer.from(e,"ascii").toString("base64"):(0,a.stringify)((0,c.parse)(e))}}).call(this,n(13))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0).__importDefault(n(3)),i=e||("undefined"!=typeof window?window:self);function s(e,t){return"".concat(e).padStart(t?3:2,"0")}function a(e){return o.default.Config.logTimestamps?function(t){var n=new Date;e(s(n.getHours())+":"+s(n.getMinutes())+":"+s(n.getSeconds())+"."+s(n.getMilliseconds(),1)+" "+t)}:e}!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Major=2]="Major",e[e.Minor=3]="Minor",e[e.Micro=4]="Micro"}(r||(r={}));var c=function(){function e(){e.logLevel=e.LOG_DEFAULT}return e.initLogHandlers=function(){var e=function(){var e,t,n,r;return"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope||"function"==typeof(null===(t=null===(e=null==i?void 0:i.console)||void 0===e?void 0:e.log)||void 0===t?void 0:t.apply)?(n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},r=console.warn?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)}:n):n=r=(null==i?void 0:i.console.log)?function(){Function.prototype.apply.call(console.log,console,arguments)}:function(){},[n,r].map(a)}(),t=e[0],n=e[1];this.logHandler=t,this.logErrorHandler=n},e.logLevel=r.Error,e.LOG_NONE=r.None,e.LOG_ERROR=r.Error,e.LOG_MAJOR=r.Major,e.LOG_MINOR=r.Minor,e.LOG_MICRO=r.Micro,e.LOG_DEFAULT=r.Error,e.LOG_DEBUG=r.Micro,e.logAction=function(t,n,o){e.shouldLog(t)&&(t===r.Error?e.logErrorHandler:e.logHandler)("Ably: "+n+": "+o)},e.deprecated=function(t,n){e.deprecatedWithMsg(t,"Please use '"+n+"' instead.")},e.deprecatedWithMsg=function(t,n){e.shouldLog(r.Error)&&e.logErrorHandler("Ably: Deprecation warning - '"+t+"' is deprecated and will be removed from a future version. "+n)},e.shouldLog=function(t){return t<=e.logLevel},e.setLog=function(t,n){void 0!==t&&(e.logLevel=t),void 0!==n&&(e.logHandler=e.logErrorHandler=n)},e}();t.default=c}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartialErrorInfo=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1));function s(e){var t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+i.inspectError(e.cause)),!e.href||e.message&&e.message.indexOf("help.ably.io")>-1||(t+="; see "+e.href+" "),t+"]"}var a=function(e){function t(n,r,o,i){var s=e.call(this,n)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(s,t.prototype),s.code=r,s.statusCode=o,s.cause=i,s}return r.__extends(t,e),t.prototype.toString=function(){return s(this)},t.fromValues=function(e){var n=e,r=n.message,i=n.code,s=n.statusCode;if("string"!=typeof r||"number"!=typeof i||"number"!=typeof s)throw new Error("ErrorInfo.fromValues(): invalid values: "+o.default.Config.inspect(e));var a=Object.assign(new t(r,i,s),e);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a},t}(Error);t.default=a;var c=function(e){function t(n,r,o,i){var s=e.call(this,n)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(s,t.prototype),s.code=r,s.statusCode=o,s.cause=i,s}return r.__extends(t,e),t.prototype.toString=function(){return s(this)},t}(Error);t.PartialErrorInfo=c},function(e,t,n){var r;e.exports=(r=n(6),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=e[o]<<24-o%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),r.lib.WordArray)},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==t&&t.crypto&&(r=t.crypto),!r)try{r=n(44)}catch(e){}var o=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new u.init(t,e)}}),l=s.enc={},d=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},h=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,i);if(c){for(var d=0;d<c;d+=s)this._doProcessBlock(o,d);n=o.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),s=r.__importDefault(n(3));function a(e,t,n){try{t.apply(e,n)}catch(e){i.default.logAction(i.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+e+"; stack = "+(e&&e.stack))}}function c(e,t,n){for(var r,i,s,a=0;a<e.length;a++)if(r=e[a],n&&(r=r[n]),o.isArray(r)){for(;-1!==(i=o.arrIndexOf(r,t));)r.splice(i,1);n&&0===r.length&&delete e[a][n]}else if(o.isObject(r))for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&o.isArray(r[s])&&c([r],t,s)}var u=function(){function e(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return e.prototype.on=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if("function"!=typeof r)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));this.any.push(r)}if(2===t.length){var i=t[0],a=t[1];if("function"!=typeof a)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));if(o.isEmptyArg(i))this.any.push(a);else if(o.isArray(i))i.forEach((function(t){e.on(t,a)}));else{if("string"!=typeof i)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));(this.events[i]||(this.events[i]=[])).push(a)}}},e.prototype.off=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(0==n.length||o.isEmptyArg(n[0])&&o.isEmptyArg(n[1]))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));var i=n[0],a=n[1],u=null,l=null;if(1!==n.length&&a){if("function"!=typeof a)throw new Error("EventEmitter.off(): invalid arguments:"+s.default.Config.inspect(n));l=(e=[i,a])[0],u=e[1]}else"function"==typeof i?u=i:l=i;if(u&&o.isEmptyArg(l))c([this.any,this.events,this.anyOnce,this.eventsOnce],u);else if(o.isArray(l))l.forEach((function(e){t.off(e,u)}));else{if("string"!=typeof l)throw new Error("EventEmitter.off(): invalid arguments:"+s.default.Config.inspect(n));u?c([this.events,this.eventsOnce],u,l):(delete this.events[l],delete this.eventsOnce[l])}},e.prototype.listeners=function(e){if(e){var t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={event:e},i=[];this.anyOnce.length&&(Array.prototype.push.apply(i,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(i,this.any);var s=this.eventsOnce[e];s&&(Array.prototype.push.apply(i,s),delete this.eventsOnce[e]);var c=this.events[e];c&&Array.prototype.push.apply(i,c),o.arrForEach(i,(function(e){a(r,e,t)}))},e.prototype.once=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length;if((0===r||1===r&&"function"!=typeof t[0])&&s.default.Config.Promise){var i=t[0];return new s.default.Config.Promise((function(t){e.once(i,t)}))}var a=t[0],c=t[1];if(1===t.length&&"function"==typeof a)this.anyOnce.push(a);else if(o.isEmptyArg(a)){if("function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));this.anyOnce.push(c)}else if(o.isArray(a)){var u=this,l=function(){var e=Array.prototype.slice.call(arguments);if(o.arrForEach(a,(function(e){u.off(e,l)})),"function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));c.apply(this,e)};o.arrForEach(a,(function(e){u.on(e,l)}))}else{if("string"!=typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));var d=this.eventsOnce[a]||(this.eventsOnce[a]=[]);if(c){if("function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));d.push(c)}}},e.prototype.whenState=function(t,n,r){for(var o=this,i=[],c=3;c<arguments.length;c++)i[c-3]=arguments[c];var u={event:t};if("string"!=typeof t||"string"!=typeof n)throw"whenState requires a valid event String argument";if("function"!=typeof r&&s.default.Config.Promise)return new s.default.Config.Promise((function(r){e.prototype.whenState.apply(o,[t,n,r].concat(i))}));t===n?a(u,r,i):this.once(t,r)},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaults=t.normaliseOptions=t.objectifyOptions=t.getAgentString=t.getHosts=t.getFallbackHosts=t.environmentFallbackHosts=t.getHttpScheme=t.getPort=t.getHost=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),s=r.__importDefault(n(2)),a=r.__importDefault(n(4)),c=n(43),u="ably-js/"+c.version,l={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:c.version,protocolVersion:2,agent:u,getHost:d,getPort:p,getHttpScheme:f,environmentFallbackHosts:h,getFallbackHosts:g,getHosts:m,checkHost:y,objectifyOptions:v,normaliseOptions:_};function d(e,t,n){return n?t==e.restHost&&e.realtimeHost||t||e.realtimeHost:t||e.restHost}function p(e,t){return t||e.tls?e.tlsPort:e.port}function f(e){return e.tls?"https://":"http://"}function h(e){return[e+"-a-fallback.ably-realtime.com",e+"-b-fallback.ably-realtime.com",e+"-c-fallback.ably-realtime.com",e+"-d-fallback.ably-realtime.com",e+"-e-fallback.ably-realtime.com"]}function g(e){var t=e.fallbackHosts,n=void 0!==e.httpMaxRetryCount?e.httpMaxRetryCount:l.httpMaxRetryCount;return t?i.arrChooseN(t,n):[]}function m(e){return[e.restHost].concat(g(e))}function y(e){if("string"!=typeof e)throw new a.default("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new a.default("host must not be zero-length",4e4,400)}function v(e){return"string"==typeof e?-1==e.indexOf(":")?{token:e}:{key:e}:e}function _(e){if(e.host&&(s.default.deprecated("host","restHost"),e.restHost=e.host),e.wsHost&&(s.default.deprecated("wsHost","realtimeHost"),e.realtimeHost=e.wsHost),e.queueEvents&&(s.default.deprecated("queueEvents","queueMessages"),e.queueMessages=e.queueEvents),e.fallbackHostsUseDefault){if(e.fallbackHosts){var t="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions",t),new a.default(t,4e4,400)}if(e.port||e.tlsPort)throw t="fallbackHostsUseDefault cannot be set when port or tlsPort are set",s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions",t),new a.default(t,4e4,400);e.environment?s.default.deprecatedWithMsg("fallbackHostsUseDefault","There is no longer a need to set this when the environment option is also set since the library will now generate the correct fallback hosts using the environment option."):s.default.deprecated("fallbackHostsUseDefault","fallbackHosts: Ably.Defaults.FALLBACK_HOSTS"),e.fallbackHosts=l.FALLBACK_HOSTS}!0===e.recover&&(s.default.deprecated("{recover: true}","{recover: function(lastConnectionDetails, cb) { cb(true); }}"),e.recover=function(e,t){t(!0)}),"function"==typeof e.recover&&!0===e.closeOnUnload&&(s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),e.transports&&i.arrIn(e.transports,"xhr")&&(s.default.deprecated('transports: ["xhr"]','transports: ["xhr_streaming"]'),i.arrDeleteValue(e.transports,"xhr"),e.transports.push("xhr_streaming")),"queueMessages"in e||(e.queueMessages=!0);var n=e.environment&&String(e.environment).toLowerCase()||l.ENVIRONMENT,c=!n||"production"===n;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=c?l.FALLBACK_HOSTS:h(n));var u=e.restHost||(c?l.REST_HOST:n+"-"+l.REST_HOST),d=function(e,t,n){return e.realtimeHost?e.realtimeHost:e.restHost?(s.default.logAction(s.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+e.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+e.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),e.restHost):t?l.REALTIME_HOST:n+"-"+l.REALTIME_HOST}(e,c,n);i.arrForEach((e.fallbackHosts||[]).concat(u,d),y),e.port=e.port||l.PORT,e.tlsPort=e.tlsPort||l.TLS_PORT,"tls"in e||(e.tls=!0);var p=function(e){var t={};for(var n in l.TIMEOUTS)t[n]=e[n]||l.TIMEOUTS[n];return t}(e);e.useBinaryProtocol="useBinaryProtocol"in e?o.default.Config.supportsBinary&&e.useBinaryProtocol:o.default.Config.preferBinary,e.clientId&&((e.headers=e.headers||{})["X-Ably-ClientId"]=o.default.BufferUtils.base64Encode(o.default.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0),e.promises&&!o.default.Config.Promise&&(s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),e.promises=!1);var f=null,g=e.connectivityCheckUrl;if(e.connectivityCheckUrl){var m=e.connectivityCheckUrl.split("?"),v=m[0],_=m[1];f=_?i.parseQueryString(_):{},-1===v.indexOf("://")&&(v="https://"+v),g=v}return r.__assign(r.__assign({},e),{useBinaryProtocol:"useBinaryProtocol"in e?o.default.Config.supportsBinary&&e.useBinaryProtocol:o.default.Config.preferBinary,realtimeHost:d,restHost:u,maxMessageSize:e.maxMessageSize||l.maxMessageSize,timeouts:p,connectivityCheckParams:f,connectivityCheckUrl:g})}t.getHost=d,t.getPort=p,t.getHttpScheme=f,t.environmentFallbackHosts=h,t.getFallbackHosts=g,t.getHosts=m,t.getAgentString=function(e){var t=l.agent;if(e.agents)for(var n in e.agents)t+=" "+n+"/"+e.agents[n];return t},t.objectifyOptions=v,t.normaliseOptions=_,t.default=l,t.getDefaults=function(e){return Object.assign(l,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importDefault(n(2)),s=r.__importDefault(n(4)),a=r.__importStar(n(1));function c(e){var t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=a.dataSizeBytes(e.data)),t}var u=function(){function e(){}return e.prototype.toJSON=function(){var e=this.encoding,t=this.data;return t&&o.default.BufferUtils.isBuffer(t)&&(arguments.length>0?(e=e?e+"/base64":"base64",t=o.default.BufferUtils.base64Encode(t)):t=o.default.BufferUtils.toBuffer(t)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:e,data:t}},e.prototype.toString=function(){var e="[Message";return this.name&&(e+="; name="+this.name),this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.extras&&(e+="; extras ="+JSON.stringify(this.extras)),this.data&&("string"==typeof this.data?e+="; data="+this.data:o.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+o.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+"]"},e.encrypt=function(e,t,n){var r=e.data,i=e.encoding,s=t.channelCipher;i=i?i+"/":"",o.default.BufferUtils.isBuffer(r)||(r=o.default.BufferUtils.utf8Encode(String(r)),i+="utf-8/"),s.encrypt(r,(function(t,r){t?n(t):(e.data=r,e.encoding=i+"cipher+"+s.algorithm,n(null,e))}))},e.encode=function(t,n,r){var i=t.data;if("string"!=typeof i&&!o.default.BufferUtils.isBuffer(i)&&null!=i){if(!a.isObject(i)&&!a.isArray(i))throw new s.default("Data type is unsupported",40013,400);t.data=JSON.stringify(i),t.encoding=t.encoding?t.encoding+"/json":"json"}null!=n&&n.cipher?e.encrypt(t,n,r):r(null,t)},e.encodeArray=function(t,n,r){for(var o=0,i=0;i<t.length;i++)e.encode(t[i],n,(function(e){e?r(e):++o==t.length&&r(null,t)}))},e.decode=function(e,t){var n=function(e){return e&&e.channelOptions?e:{channelOptions:e,plugins:{},baseEncodedPreviousPayload:void 0}}(t),r=e.data,i=e.encoding;if(i){var a=i.split("/"),c=void 0,u=a.length,l=e.data,d="";try{for(;(c=u)>0;){var p=a[--u].match(/([-\w]+)(\+([\w-]+))?/);if(!p)break;switch(d=p[1]){case"base64":l=o.default.BufferUtils.base64Decode(String(l)),c==a.length&&(r=l);continue;case"utf-8":l=o.default.BufferUtils.utf8Decode(l);continue;case"json":l=JSON.parse(l);continue;case"cipher":if(null!=n.channelOptions&&n.channelOptions.cipher&&n.channelOptions.channelCipher){var f=p[3],h=n.channelOptions.channelCipher;if(f!=h.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");l=h.decrypt(l);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!n.plugins||!n.plugins.vcdiff)throw new s.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"==typeof Uint8Array)throw new s.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var g=n.baseEncodedPreviousPayload;"string"==typeof g&&(g=o.default.BufferUtils.utf8Encode(g)),g=o.default.BufferUtils.toBuffer(g),l=o.default.BufferUtils.toBuffer(l),r=l=o.default.BufferUtils.typedArrayToBuffer(n.plugins.vcdiff.decode(l,g))}catch(e){throw new s.default("Vcdiff delta decode failed with "+e,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(e){var m=e;throw new s.default("Error processing the "+d+" encoding, decoder returned ‘"+m.message+"’",m.code||40013,400)}finally{e.encoding=c<=0?null:a.slice(0,c).join("/"),e.data=l}}n.baseEncodedPreviousPayload=r},e.fromResponseBody=function(t,n,r){r&&(t=a.decodeBody(t,r));for(var o=0;o<t.length;o++){var s=t[o]=e.fromValues(t[o]);try{e.decode(s,n)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromResponseBody()",e.toString())}}return t},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t),s=function(e){if(e&&e.cipher){if(!o.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var t=o.default.Crypto.getCipher(e.cipher);return{cipher:t.cipherParams,channelCipher:t.cipher}}return null!=e?e:{}}(null!=n?n:null);try{e.decode(r,s)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromEncoded()",e.toString())}return r},e.fromEncodedArray=function(t,n){return t.map((function(t){return e.fromEncoded(t,n)}))},e.getMessagesSize=function(e){for(var t,n=0,r=0;r<e.length;r++)n+=(t=e[r]).size||(t.size=c(t));return n},e.serialize=a.encodeBody,e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(4)),s=r.__importDefault(n(9)),a=r.__importDefault(n(14)),c={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},u=[];Object.keys(c).forEach((function(e){u[c[e]]=e}));var l={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},d=Object.keys(l);function p(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n].toString());return"[ "+t.join(", ")+" ]"}l.MODE_ALL=l.PRESENCE|l.PUBLISH|l.SUBSCRIBE|l.PRESENCE_SUBSCRIBE;var f="id channel channelSerial connectionId count msgSerial timestamp".split(" "),h=function(){function e(){var e=this;this.hasFlag=function(t){return(e.flags&l[t])>0}}return e.prototype.setFlag=function(e){return this.flags=this.flags|l[e]},e.prototype.getMode=function(){return this.flags&&this.flags&l.MODE_ALL},e.prototype.encodeModesToFlags=function(e){var t=this;e.forEach((function(e){return t.setFlag(e)}))},e.prototype.decodeModesFromFlags=function(){var t=this,n=[];return e.channelModes.forEach((function(e){t.hasFlag(e)&&n.push(e)})),n.length>0?n:void 0},e.fromValues=function(t){return Object.assign(new e,t)},e.Action=c,e.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],e.ActionName=u,e.serialize=o.encodeBody,e.deserialize=function(t,n){var r=o.decodeBody(t,n);return e.fromDeserialized(r)},e.fromDeserialized=function(t){var n=t.error;n&&(t.error=i.default.fromValues(n));var r=t.messages;if(r)for(var o=0;o<r.length;o++)r[o]=s.default.fromValues(r[o]);var c=t.presence;if(c)for(o=0;o<c.length;o++)c[o]=a.default.fromValues(c[o],!0);return Object.assign(new e,t)},e.stringify=function(t){var n,r="[ProtocolMessage";void 0!==t.action&&(r+="; action="+e.ActionName[t.action]||0);for(var c=0;c<f.length;c++)n=f[c],void 0!==t[n]&&(r+="; "+n+"="+t[n]);if(t.messages&&(r+="; messages="+p(s.default.fromValuesArray(t.messages))),t.presence&&(r+="; presence="+p(a.default.fromValuesArray(t.presence))),t.error&&(r+="; error="+i.default.fromValues(t.error).toString()),t.auth&&t.auth.accessToken&&(r+="; token="+t.auth.accessToken),t.flags&&(r+="; flags="+d.filter(t.hasFlag).join(",")),t.params){var u="";o.forInOwnNonNullProperties(t.params,(function(e){u.length>0&&(u+="; "),u+=e+"="+t.params[e]})),u.length>0&&(r+="; params=["+u+"]")}return r+"]"},e}();t.default=h},function(e,t,n){var r,o,i;e.exports=(r=n(6),i=(o=r).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<65;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)}},r.enc.Base64)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(10)),s=r.__importDefault(n(26)),a=r.__importDefault(n(2)),c=r.__importDefault(n(8)),u=r.__importDefault(n(19)),l=r.__importDefault(n(16)),d=r.__importDefault(n(4)),p=r.__importDefault(n(20)),f=r.__importDefault(n(3));function h(e){return function(e){return!!e.code&&!l.default.isTokenErr(e)&&(!!o.arrIn([80015,80017,80030],e.code)||e.code>=4e4&&e.code<5e4)}(e)?[i.default.fromValues({action:i.default.Action.ERROR,error:e})]:[i.default.fromValues({action:i.default.Action.DISCONNECTED,error:e})]}var g=function(e){function t(t,n,r){var o=e.call(this,t,n,r,!0)||this;return o.onAuthUpdated=function(e){o.authParams={access_token:e.token}},o.stream=!("stream"in r)||r.stream,o.sendRequest=null,o.recvRequest=null,o.pendingCallback=null,o.pendingItems=null,o}return r.__extends(t,e),t.prototype.connect=function(){var e=this;a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","starting"),s.default.prototype.connect.call(this);var t=this.params,n=t.options,r=c.default.getHost(n,t.host),i=c.default.getPort(n),u=n.tls?"https://":"http://";this.baseUri=u+r+":"+i+"/comet/";var l=this.baseUri+"connect";a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","uri: "+l),this.auth.getAuthParams((function(t,n){if(t)e.disconnect(t);else if(!e.isDisposed){e.authParams=n;var r=e.params.getConnectParams(n);"stream"in r&&(e.stream=r.stream),a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+o.toQueryString(r));var i=!1,s=e.recvRequest=e.createRequest(l,null,r,null,e.stream?p.default.REQ_RECV_STREAM:p.default.REQ_RECV);s.on("data",(function(t){e.recvRequest&&(i||(i=!0,e.emit("preconnect")),e.onData(t))})),s.on("complete",(function(t){e.recvRequest||(t=t||new d.default("Request cancelled",80003,400)),e.recvRequest=null,i||t||(i=!0,e.emit("preconnect")),e.onActivity(),t?t.code?e.onData(h(t)):e.disconnect(t):f.default.Config.nextTick((function(){e.recv()}))})),s.exec()}}))},t.prototype.requestClose=function(){a.default.logAction(a.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},t.prototype.requestDisconnect=function(){a.default.logAction(a.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},t.prototype._requestCloseOrDisconnect=function(e){var t=this,n=e?this.closeUri:this.disconnectUri;if(n){var r=this.createRequest(n,null,this.authParams,null,p.default.REQ_SEND);r.on("complete",(function(n){n&&(a.default.logAction(a.default.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+o.inspectError(n)),t.finish("disconnected",n))})),r.exec()}},t.prototype.dispose=function(){var e=this;a.default.logAction(a.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(a.default.logAction(a.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",u.default.disconnected()),f.default.Config.nextTick((function(){e.emit("disposed")})))},t.prototype.onConnect=function(e){var t;if(!this.isDisposed){var n=null===(t=e.connectionDetails)||void 0===t?void 0:t.connectionKey;s.default.prototype.onConnect.call(this,e);var r=this.baseUri+n;a.default.logAction(a.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+r),this.sendUri=r+"/send",this.recvUri=r+"/recv",this.closeUri=r+"/close",this.disconnectUri=r+"/disconnect"}},t.prototype.send=function(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);var t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)},t.prototype.sendAnyPending=function(){var e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))},t.prototype.sendItems=function(e){var t=this,n=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),p.default.REQ_SEND);n.on("complete",(function(e,n){e&&a.default.logAction(a.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+o.inspectError(e)),t.sendRequest=null,e?e.code?t.onData(h(e)):t.disconnect(e):(n&&t.onData(n),t.pendingItems&&f.default.Config.nextTick((function(){t.sendRequest||t.sendAnyPending()})))})),n.exec()},t.prototype.recv=function(){var e=this;if(!this.recvRequest&&this.isConnected){var t=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?p.default.REQ_RECV_STREAM:p.default.REQ_RECV_POLL);t.on("data",(function(t){e.onData(t)})),t.on("complete",(function(t){e.recvRequest=null,e.onActivity(),t?t.code?e.onData(h(t)):e.disconnect(t):f.default.Config.nextTick((function(){e.recv()}))})),t.exec()}},t.prototype.onData=function(e){try{var t=this.decodeResponse(e);if(t&&t.length)for(var n=0;n<t.length;n++)this.onProtocolMessage(i.default.fromDeserialized(t[n]))}catch(e){a.default.logAction(a.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+e.stack)}},t.prototype.encodeRequest=function(e){return JSON.stringify(e)},t.prototype.decodeResponse=function(e){return"string"==typeof e?JSON.parse(e):e},t}(s.default);t.default=g},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(2)),i=r.__importDefault(n(3)),s=r.__importDefault(n(9)),a=r.__importStar(n(1));function c(e){return u.Actions.indexOf(e)}var u=function(){function e(){}return e.prototype.isSynthesized=function(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId},e.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}},e.prototype.toJSON=function(){var e=this.data,t=this.encoding;return e&&i.default.BufferUtils.isBuffer(e)&&(arguments.length>0?(t=t?t+"/base64":"base64",e=i.default.BufferUtils.base64Encode(e)):e=i.default.BufferUtils.toBuffer(e)),{id:this.id,clientId:this.clientId,action:c(this.action),data:e,encoding:t}},e.prototype.toString=function(){var e="[PresenceMessage";return e+="; action="+this.action,this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.data&&("string"==typeof this.data?e+="; data="+this.data:i.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+i.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),e+"]"},e.fromResponseBody=function(t,n,r){var i=[];r&&(t=a.decodeBody(t,r));for(var s=0;s<t.length;s++){var c=i[s]=e.fromValues(t[s],!0);try{e.decode(c,n)}catch(e){o.default.logAction(o.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",e.toString())}}return i},e.fromValues=function(t,n){return n&&(t.action=e.Actions[t.action]),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t,!0);try{e.decode(r,null!=n?n:{})}catch(e){o.default.logAction(o.default.LOG_ERROR,"PresenceMessage.fromEncoded()",e.toString())}return r},e.fromEncodedArray=function(t,n){return t.map((function(t){return e.fromEncoded(t,n)}))},e.Actions=["absent","present","enter","leave","update"],e.encode=s.default.encode,e.decode=s.default.decode,e.getMessagesSize=s.default.getMessagesSize,e}();t.default=u},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importStar(n(4)),a=r.__importDefault(n(2)),c=r.__importDefault(n(8)),u=r.__importDefault(n(20)),l=r.__importDefault(n(3));var d=function(){},p=0,f={},h=void 0!==e&&e.XDomainRequest;var g=function(e){function t(t,n,r,i,s,a,c){var u,l,d=e.call(this)||this;return(r=r||{}).rnd=o.cheapRandStr(),h&&(u=(l=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/))&&Number(l[1]))&&10===u&&!r.envelope&&(r.envelope="json"),d.uri=t+o.toQueryString(r),d.headers=n||{},d.body=i,d.method=c?c.toUpperCase():o.isEmptyArg(i)?"GET":"POST",d.requestMode=s,d.timeouts=a,d.timedOut=!1,d.requestComplete=!1,d.id=String(++p),f[d.id]=d,d}return r.__extends(t,e),t.createRequest=function(e,n,r,i,s,a,u){var l=a||c.default.TIMEOUTS;return new t(e,n,o.copy(r),i,s,l,u)},t.prototype.complete=function(e,t,n,r,o){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,n,r,o),this.dispose())},t.prototype.abort=function(){this.dispose()},t.prototype.exec=function(){var e=this,t=this.headers,n=this.requestMode==u.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,r=this.timer=setTimeout((function(){e.timedOut=!0,c.abort()}),n),i=this.method,c=this.xhr=new XMLHttpRequest,d=t.accept,p=this.body,f="text";for(var h in d?0===d.indexOf("application/x-msgpack")&&(f="arraybuffer"):t.accept="application/json",p&&(t["content-type"]||(t["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof p&&(p=JSON.stringify(p)),c.open(i,this.uri,!0),c.responseType=f,"authorization"in t&&(c.withCredentials=!0),t)c.setRequestHeader(h,t[h]);var g,m,y,v=function(t,n,r,o){var i,c=n+" (event type: "+t.type+")";(null===(i=null==e?void 0:e.xhr)||void 0===i?void 0:i.statusText)&&(c+=", current statusText is "+e.xhr.statusText),a.default.logAction(a.default.LOG_ERROR,"Request.on"+t.type+"()",c),e.complete(new s.PartialErrorInfo(c,r,o))};c.onerror=function(e){v(e,"XHR error occurred",null,400)},c.onabort=function(t){e.timedOut?v(t,"Request aborted due to request timeout expiring",null,408):v(t,"Request cancelled",null,400)},c.ontimeout=function(e){v(e,"Request timed out",null,408)};var _=0,S=!1,E=function(){var n;try{var r=function(e){return e.getResponseHeader&&e.getResponseHeader("content-type")}(c);if(r?r.indexOf("application/json")>=0:"text"==c.responseType){var i="arraybuffer"===c.responseType?l.default.BufferUtils.utf8Decode(c.response):String(c.responseText);n=i.length?JSON.parse(i):i,S=!0}else n=c.response;void 0!==n.response?(m=n.statusCode,y=m<400,t=n.headers,n=n.response):t=function(e){for(var t=o.trim(e.getAllResponseHeaders()).split("\r\n"),n={},r=0;r<t.length;r++){var i=t[r].split(":").map(o.trim);n[i[0].toLowerCase()]=i[1]}return n}(c)}catch(t){return void e.complete(new s.PartialErrorInfo("Malformed response body from server: "+t.message,null,400))}if(y||o.isArray(n))e.complete(null,n,t,S,m);else{var a=function(e,t){if(function(e,t){return o.arrIn(o.allToLowerCase(o.keysArray(t)),"x-ably-errorcode")}(0,t))return e.error&&s.default.fromValues(e.error)}(n,t);a||(a=new s.PartialErrorInfo("Error response received from server: "+m+" body was: "+l.default.Config.inspect(n),null,m)),e.complete(a,n,t,S,m)}};function b(){for(var e,t,n=c.responseText,r=n.length-1;_<r&&(e=n.indexOf("\n",_))>-1;)t=n.slice(_,e),_=e+1,T(t)}var T=function(t){try{t=JSON.parse(t)}catch(t){return void e.complete(new s.PartialErrorInfo("Malformed response body from server: "+t.message,null,400))}e.emit("data",t)};c.onreadystatechange=function(){var t=c.readyState;t<3||0!==c.status&&(void 0===m&&(1223===(m=c.status)&&(m=204),clearTimeout(r),y=m<400,204!=m?g=e.requestMode==u.default.REQ_RECV_STREAM&&y&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(c):e.complete(null,null,null,null,m)),3==t&&g?b():4==t&&(g?(b(),e.streamComplete=!0,l.default.Config.nextTick((function(){e.complete()}))):E()))},c.send(p)},t.prototype.dispose=function(){var e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=d,this.xhr=null;var t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete f[this.id]},t}(i.default);t.default=g}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(2)),i=r.__importStar(n(1)),s=r.__importDefault(n(22)),a=r.__importDefault(n(4)),c=r.__importDefault(n(45)),u=n(11),l=r.__importDefault(n(17)),d=r.__importDefault(n(24)),p=r.__importDefault(n(3)),f=Math.pow(2,17);function h(){}function g(e){return i.isErrorInfoOrPartialErrorInfo(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new a.default(i.inspectError(e),e.code||40170,e.statusCode||401)}var m=function(e,t){if(p.default.Config.createHmac){var n=p.default.Config.createHmac("SHA256",t);return n.update(e),n.digest("base64")}return(0,u.stringify)((0,c.default)(e,t))};function y(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));var t=Object.create(null),n=i.keysArray(e,!0);if(!n)return"";n.sort();for(var r=0;r<n.length;r++)t[n[r]]=e[n[r]].sort();return JSON.stringify(t)}function v(e){if(e.authCallback)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){var t="authOptions must include valid authentication parameters";throw o.default.logAction(o.default.LOG_ERROR,"Auth()",t),new Error(t)}o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with supplied token only")}}var _=0,S=function(){function e(e,t){if(this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,function(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}(t)){if(t.key&&!m){var n="client-side token request signing not supported";throw o.default.logAction(o.default.LOG_ERROR,"Auth()",n),new Error(n)}(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(t)&&o.default.logAction(o.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),v(this.authOptions)}else{if(!t.key)throw n="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)",o.default.logAction(o.default.LOG_ERROR,"Auth()",n),new a.default(n,40160,401);o.default.logAction(o.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}return e.prototype.authorize=function(e,t,n){var r,s=this;if("function"!=typeof e||n?"function"!=typeof t||n?r=t:(n=t,r=null):(n=e,r=e=null),!n&&this.client.options.promises)return i.promisify(this,"authorize",arguments);if(r&&r.key&&this.authOptions.key!==r.key)throw new a.default("Unable to update auth options with incompatible key",40102,401);r&&"force"in r&&(o.default.logAction(o.default.LOG_ERROR,"Auth.authorize","Deprecation warning: specifying {force: true} in authOptions is no longer necessary, authorize() now always gets a new token. Please remove this, as in version 1.0 and later, having a non-null authOptions will overwrite stored library authOptions, which may not be what you want"),i.isOnlyPropIn(r,"force")&&(r=null)),this._forceNewToken(e,r,(function(e,t){if(e)return s.client.connection&&e.statusCode===d.default.Forbidden&&s.client.connection.connectionManager.actOnErrorFromAuthorize(e),void(null==n||n(e));s.client.connection?s.client.connection.connectionManager.onAuthUpdated(t,n||h):null==n||n(null,t)}))},e.prototype.authorise=function(e,t,n){o.default.deprecated("Auth.authorise","Auth.authorize"),this.authorize(e,t,n)},e.prototype._forceNewToken=function(e,t,n){var r=this;this.tokenDetails=null,this._saveTokenOptions(e,t),v(this.authOptions),this._ensureValidAuthCredentials(!0,(function(e,t){delete r.tokenParams.timestamp,delete r.authOptions.queryTime,n(e,t)}))},e.prototype.requestToken=function(e,t,n){var r=this;if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return i.promisify(this,"requestToken",arguments);t=t||this.authOptions,e=e||i.copy(this.tokenParams);var s,c=n||h,u=this.client;if(t.authCallback)o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),s=t.authCallback;else if(t.authUrl)o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),s=function(e,n){var s,c=i.mixin({accept:"application/json, text/plain"},t.authHeaders),d=t.authMethod&&"post"===t.authMethod.toLowerCase(),h=t.authUrl.indexOf("?");h>-1&&(s=i.parseQueryString(t.authUrl.slice(h)),t.authUrl=t.authUrl.slice(0,h),d||(t.authParams=i.mixin(s,t.authParams)));var g=i.mixin({},t.authParams||{},e),m=function(e,t,r,s){var c;if(e?o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+i.inspectError(e)):(c=r["content-type"],o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+c+"; body: "+i.inspectBody(t))),e||s)return n(e,t);if(p.default.BufferUtils.isBuffer(t)&&(t=t.toString()),c){var u=c.indexOf("application/json")>-1,l=c.indexOf("text/plain")>-1||c.indexOf("application/jwt")>-1;if(u||l){if(u){if(t.length>f)return void n(new a.default("authUrl response exceeded max permitted length",40170,401));try{t=JSON.parse(t)}catch(e){return void n(new a.default("Unexpected error processing authURL response; err = "+e.message,40170,401))}}n(null,t,c)}else n(new a.default("authUrl responded with unacceptable content-type "+c+", should be either text/plain, application/jwt or application/json",40170,401))}else n(new a.default("authUrl response is missing a content-type header",40170,401))};if(o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+t.authUrl+"; Params: "+JSON.stringify(g)+"; method: "+(d?"POST":"GET")),d){var y=c||{};y["content-type"]="application/x-www-form-urlencoded";var v=i.toQueryString(g).slice(1);r.client.http.doUri(l.default.Post,u,t.authUrl,y,v,s,m)}else r.client.http.doUri(l.default.Get,u,t.authUrl,c||{},null,g,m)};else{if(!t.key)return o.default.logAction(o.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),void c(new a.default("Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)",40171,403));o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),s=function(e,n){r.createTokenRequest(e,t,n)}}"capability"in e&&(e.capability=y(e.capability));var d=!1,m=this.client.options.timeouts.realtimeRequestTimeout,v=setTimeout((function(){d=!0;var e="Token request callback timed out after "+m/1e3+" seconds";o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",e),c(new a.default(e,40170,401))}),m);s(e,(function(e,n,s){if(!d){if(clearTimeout(v),e)return o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+i.inspectError(e)),void c(g(e));if("string"!=typeof n){if("object"!=typeof n){var p="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof n;return o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",p),void c(new a.default(p,40170,401))}var h=JSON.stringify(n).length;if(h>f&&!t.suppressMaxLengthCheck)c(new a.default("Token request/details object exceeded max permitted stringified size (was "+h+" bytes)",40170,401));else if("issued"in n)c(null,n);else{if(!("keyName"in n))return p="Expected token request callback to call back with a token string, token request object, or token details object",o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",p),void c(new a.default(p,40170,401));var m,y,_,S;y=function(e,t,n,r){if(e)return o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+i.inspectError(e)),void c(g(e));r||(t=JSON.parse(t)),o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","token received"),c(null,t)},_="/keys/"+(m=n).keyName+"/requestToken",S=i.defaultPostHeaders(r.client.options),t.requestHeaders&&i.mixin(S,t.requestHeaders),o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+_+"; Token params: "+JSON.stringify(m)),r.client.http.do(l.default.Post,u,(function(e){return u.baseUri(e)+_}),S,JSON.stringify(m),null,y)}}else 0===n.length?c(new a.default("Token string is empty",40170,401)):n.length>f?c(new a.default("Token string exceeded max permitted length (was "+n.length+" bytes)",40170,401)):"undefined"===n||"null"===n?c(new a.default("Token string was literal null/undefined",40170,401)):"{"!==n[0]||s&&s.indexOf("application/jwt")>-1?c(null,{token:n}):c(new a.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401))}}))},e.prototype.createTokenRequest=function(e,t,n){if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return i.promisify(this,"createTokenRequest",arguments);t=t||this.authOptions,e=e||i.copy(this.tokenParams);var r=t.key;if(r){var s=r.split(":"),c=s[0],u=s[1];if(u)if(""!==e.clientId){"capability"in e&&(e.capability=y(e.capability));var l,d=i.mixin({keyName:c},e),p=e.clientId||"",f=e.ttl||"",h=e.capability||"";l=function(){var e=d.nonce||(d.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),t=d.timestamp,r=d.keyName+"\n"+f+"\n"+h+"\n"+p+"\n"+t+"\n"+e+"\n";d.mac=d.mac||m(r,u),o.default.logAction(o.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),n(null,d)},d.timestamp?l():this.getTimestamp(t&&t.queryTime,(function(e,t){e?n(e):(d.timestamp=t,l())}))}else n(new a.default("clientId can’t be an empty string",40012,400));else n(new a.default("Invalid key specified",40101,403))}else n(new a.default("No key specified",40101,403))},e.prototype.getAuthParams=function(e){"basic"==this.method?e(null,{key:this.key}):this._ensureValidAuthCredentials(!1,(function(t,n){if(t)e(t);else{if(!n)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{access_token:n.token})}}))},e.prototype.getAuthHeaders=function(e){"basic"==this.method?e(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,(function(t,n){if(t)e(t);else{if(!n)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{authorization:"Bearer "+i.toBase64(n.token)})}}))},e.prototype.getTimestamp=function(e,t){this.isTimeOffsetSet()||!e&&!this.authOptions.queryTime?t(null,this.getTimestampUsingOffset()):this.client.time(t)},e.prototype.getTimestampUsingOffset=function(){return i.now()+(this.client.serverTimeOffset||0)},e.prototype.isTimeOffsetSet=function(){return null!==this.client.serverTimeOffset},e.prototype._saveBasicOptions=function(e){this.method="basic",this.key=e.key,this.basicKey=i.toBase64(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)},e.prototype._saveTokenOptions=function(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"==typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)},e.prototype._ensureValidAuthCredentials=function(e,t){var n=this,r=this.tokenDetails;if(r){if(this._tokenClientIdMismatch(r.clientId))return void t(new a.default("Mismatch between clientId in token ("+r.clientId+") and current clientId ("+this.clientId+")",40102,403));if(!this.isTimeOffsetSet()||!r.expires||r.expires>=this.getTimestampUsingOffset())return o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+r.expires),void t(null,r);o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=s.default.create())).push(t),null===this.currentTokenRequestId||e){var i=this.currentTokenRequestId=_++;this.requestToken(this.tokenParams,this.authOptions,(function(e,t){if(n.currentTokenRequestId>i)o.default.logAction(o.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");else{n.currentTokenRequestId=null;var r=n.waitingForTokenRequest||h;n.waitingForTokenRequest=null,e?r(e):r(null,n.tokenDetails=t)}}))}},e.prototype._userSetClientId=function(e){if("string"!=typeof e&&null!==e)throw new a.default("clientId must be either a string or null",40012,400);if("*"===e)throw new a.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var t=this._uncheckedSetClientId(e);if(t)throw t},e.prototype._uncheckedSetClientId=function(e){if(this._tokenClientIdMismatch(e)){var t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,n=new a.default(t,40102,401);return o.default.logAction(o.default.LOG_ERROR,"Auth._uncheckedSetClientId()",t),n}return this.clientId=this.tokenParams.clientId=e,null},e.prototype._tokenClientIdMismatch=function(e){return!(!this.clientId||"*"===this.clientId||!e||"*"===e||this.clientId===e)},e.isTokenErr=function(e){return e.code&&e.code>=40140&&e.code<40150},e}();t.default=S},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpPaginatedResponse=t.PaginatedResult=void 0;var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),s=r.__importDefault(n(25)),a=function(){function e(e,t,n,r,o,i){this.rest=e,this.path=t,this.headers=n,this.envelope=null!=r?r:null,this.bodyHandler=o,this.useHttpPaginatedResponse=i||!1}return e.prototype.get=function(e,t){var n=this;s.default.get(this.rest,this.path,this.headers,e,this.envelope,(function(e,r,o,i,s){n.handlePage(e,r,o,i,s,t)}))},e.prototype.delete=function(e,t){var n=this;s.default.delete(this.rest,this.path,this.headers,e,this.envelope,(function(e,r,o,i,s){n.handlePage(e,r,o,i,s,t)}))},e.prototype.post=function(e,t,n){var r=this;s.default.post(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,o,i,s){n&&r.handlePage(e,t,o,i,s,n)}))},e.prototype.put=function(e,t,n){var r=this;s.default.put(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,o,i,s){n&&r.handlePage(e,t,o,i,s,n)}))},e.prototype.patch=function(e,t,n){var r=this;s.default.patch(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,o,i,s){n&&r.handlePage(e,t,o,i,s,n)}))},e.prototype.handlePage=function(e,t,n,r,s,a){if(e&&function(e,t,n){return!(n&&(t||"number"==typeof e.code))}(e,t,this.useHttpPaginatedResponse))return i.default.logAction(i.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+o.inspectError(e)),void(null==a||a(e));var l,d,p;try{l=this.bodyHandler(t,n||{},r)}catch(t){return void(null==a||a(e||t))}n&&(d=n.Link||n.link)&&(p=function(e){"string"==typeof e&&(e=e.split(","));for(var t,n={},r=0;r<e.length;r++){var i=e[r].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(i){var s=(void 0,(t=i[1].match(/^\.\/(\w+)\?(.*)$/))&&t[2]&&o.parseQueryString(t[2]));s&&(n[i[2]]=s)}}return n}(d)),this.useHttpPaginatedResponse?a(null,new u(this,l,n||{},s,p,e)):a(null,new c(this,l,p))},e}(),c=function(){function e(e,t,n){var r=this;this.resource=e,this.items=t;var i=this;n&&("first"in n&&(this.first=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"first",[]);i.get(n.first,e)}),"current"in n&&(this.current=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"current",[]);i.get(n.current,e)}),this.next=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"next",[]);"next"in n?i.get(n.next,e):e(null)},this.hasNext=function(){return"next"in n},this.isLast=function(){var e;return!(null===(e=r.hasNext)||void 0===e?void 0:e.call(r))})}return e.prototype.get=function(e,t){var n=this.resource;s.default.get(n.rest,n.path,n.headers,e,n.envelope,(function(e,r,o,i,s){n.handlePage(e,r,o,i,s,t)}))},e}();t.PaginatedResult=c;var u=function(e){function t(t,n,r,o,i,s){var a=e.call(this,t,n,i)||this;return a.statusCode=o,a.success=o<300&&o>=200,a.headers=r,a.errorCode=s&&s.code,a.errorMessage=s&&s.message,a}return r.__extends(t,e),t.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},t}(c);t.HttpPaginatedResponse=u,t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRetriable=void 0;var r=n(0).__importDefault(n(4)),o={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},i={disconnected:function(){return r.default.fromValues({statusCode:400,code:o.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return r.default.fromValues({statusCode:400,code:o.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return r.default.fromValues({statusCode:400,code:o.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return r.default.fromValues({statusCode:400,code:o.CLOSING,message:"Connection closing"})},closed:function(){return r.default.fromValues({statusCode:400,code:o.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return r.default.fromValues({statusCode:500,code:o.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return r.default.fromValues({statusCode:500,code:o.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};t.isRetriable=function(e){return!e.statusCode||!e.code||e.statusCode>=500||Object.values(o).includes(e.code)},t.default=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.REQ_SEND=0]="REQ_SEND",e[e.REQ_RECV=1]="REQ_RECV",e[e.REQ_RECV_POLL=2]="REQ_RECV_POLL",e[e.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"}(r||(r={})),t.default=r},function(e,t,n){var r;e.exports=(r=n(6),n(5),n(58),n(11),n(40),n(32),n(23),n(27),n(28),n(59),n(60),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(2)),o=function(){function e(e){this.members=e||[]}return e.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=this.members;n<o.length;n++){var i=o[n];if(i)try{i.apply(void 0,e)}catch(e){r.default.logAction(r.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+e+"; stack = "+e.stack)}}},e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.members).push.apply(e,t)},e.create=function(t){var n=new e(t);return Object.assign((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.call.apply(n,e)}),{push:function(e){return n.push(e)}})},e}();t.default=o},function(e,t,n){var r,o,i;e.exports=(o=(r=n(6)).lib.Base,i=r.enc.Utf8,void(r.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,u=0;u<n;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.isSuccessCode=void 0,function(e){e[e.Success=200]="Success",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestTimeout=408]="RequestTimeout",e[e.InternalServerError=500]="InternalServerError"}(r||(r={})),t.isSuccessCode=function(e){return e>=r.Success&&e<r.BadRequest},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),s=r.__importDefault(n(2)),a=r.__importDefault(n(16)),c=r.__importDefault(n(17)),u=n(4);function l(e,t,n,r,o){e.http.supportsAuthHeaders?e.auth.getAuthHeaders((function(e,s){e?r(e):o(i.mixin(s,t),n)})):e.auth.getAuthParams((function(e,s){e?r(e):o(t,i.mixin(s,n))}))}function d(e){var t=[];if(e)for(var n in e)t.push(n+"="+e[n]);return t.join("&")}function p(e,t){return e+(t?"?":"")+d(t)}var f=function(){function e(){}return e.get=function(t,n,r,o,i,s){e.do(c.default.Get,t,n,null,r,o,i,s)},e.delete=function(t,n,r,o,i,s){e.do(c.default.Delete,t,n,null,r,o,i,s)},e.post=function(t,n,r,o,i,s,a){e.do(c.default.Post,t,n,r,o,i,s,a)},e.patch=function(t,n,r,o,i,s,a){e.do(c.default.Patch,t,n,r,o,i,s,a)},e.put=function(t,n,r,o,i,s,a){e.do(c.default.Put,t,n,r,o,i,s,a)},e.do=function(e,t,n,r,c,f,h,g){s.default.shouldLog(s.default.LOG_MICRO)&&(g=function(e,t,n,r){return function(a,c,u,l,f){a?s.default.logAction(s.default.LOG_MICRO,"Resource."+t+"()","Received Error; "+p(n,r)+"; Error: "+i.inspectError(a)):s.default.logAction(s.default.LOG_MICRO,"Resource."+t+"()","Received; "+p(n,r)+"; Headers: "+d(u)+"; StatusCode: "+f+"; Body: "+(o.default.BufferUtils.isBuffer(c)?c.toString():c)),e&&e(a,c,u,l,f)}}(g,e,n,f)),h&&(g=g&&function(e,t){return function(n,r,o,s,a){if(!n||r){if(!s)try{r=i.decodeBody(r,t)}catch(t){return void(i.isErrorInfoOrPartialErrorInfo(t)?e(t):e(new u.PartialErrorInfo(i.inspectError(t),null)))}if(r){var c=r,l=c.statusCode,d=c.response,p=c.headers;if(void 0!==l){if(l<200||l>=300){var f=d&&d.error||n;return f||((f=new Error("Error in unenveloping "+r)).statusCode=l),void e(f,d,p,!0,l)}e(n,d,p,!0,l)}else e(n,r,o,!0,a)}else e(new u.PartialErrorInfo("unenvelope(): Response body is missing",null))}else e(n)}}(g,h),(f=f||{}).envelope=h),l(t,c,f,g,(function c(u,d){var f;if(s.default.shouldLog(s.default.LOG_MICRO)&&s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending; "+p(n,d)),s.default.shouldLog(s.default.LOG_MICRO)){var h=r;if((null===(f=u["content-type"])||void 0===f?void 0:f.indexOf("msgpack"))>0)try{h=o.default.Config.msgpack.decode(r)}catch(t){s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+i.inspectError(t))}s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending; "+p(n,d)+"; Body: "+h)}t.http.do(e,t,n,u,r,d,(function(e,n,r,o,i){e&&a.default.isTokenErr(e)?t.auth.authorize(null,null,(function(e){e?g(e):l(t,r,d,g,c)})):g(e,n,r,o,i)}))}))},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(19)),u=r.__importDefault(n(4)),l=r.__importDefault(n(3)),d=o.default.Action,p=o.default.fromValues({action:d.CLOSE}),f=o.default.fromValues({action:d.DISCONNECT}),h=function(e){function t(t,n,r,o){var i=e.call(this)||this;return o&&(r.format=void 0,r.heartbeats=!0),i.connectionManager=t,t.registerProposedTransport(i),i.auth=n,i.params=r,i.timeouts=r.options.timeouts,i.format=r.format,i.isConnected=!1,i.isFinished=!1,i.isDisposed=!1,i.maxIdleInterval=null,i.idleTimer=null,i.lastActivity=null,i}return r.__extends(t,e),t.prototype.connect=function(){},t.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",c.default.closed())},t.prototype.disconnect=function(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||c.default.disconnected())},t.prototype.fail=function(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||c.default.failed())},t.prototype.finish=function(e,t){var n;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!==(n=this.idleTimer)&&void 0!==n?n:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())},t.prototype.onProtocolMessage=function(e){switch(a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+o.default.stringify(e)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case d.HEARTBEAT:a.default.logAction(a.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case d.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case d.CLOSED:this.onClose(e);break;case d.DISCONNECTED:this.onDisconnect(e);break;case d.ACK:this.emit("ack",e.msgSerial,e.count);break;case d.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case d.SYNC:this.connectionManager.onChannelMessage(e,this);break;case d.ACTIVATE:break;case d.AUTH:this.auth.authorize((function(e){e&&a.default.logAction(a.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+i.inspectError(e))}));break;case d.ERROR:if(a.default.logAction(a.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+l.default.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}this.connectionManager.onChannelMessage(e,this);break;default:this.connectionManager.onChannelMessage(e,this)}},t.prototype.onConnect=function(e){if(this.isConnected=!0,!e.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())},t.prototype.onDisconnect=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onDisconnect()","err = "+i.inspectError(t)),this.finish("disconnected",t)},t.prototype.onFatalError=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onFatalError()","err = "+i.inspectError(t)),this.finish("failed",t)},t.prototype.onClose=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onClose()","err = "+i.inspectError(t)),this.finish("closed",t)},t.prototype.requestClose=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.requestClose()",""),this.send(p)},t.prototype.requestDisconnect=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(f)},t.prototype.ping=function(e){var t={action:o.default.Action.HEARTBEAT};e&&(t.id=e),this.send(o.default.fromValues(t))},t.prototype.dispose=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},t.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=i.now(),this.setIdleTimer(this.maxIdleInterval+100))},t.prototype.setIdleTimer=function(e){var t=this;this.idleTimer||(this.idleTimer=setTimeout((function(){t.onIdleTimerExpire()}),e))},t.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var e=i.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){var n="No activity seen from realtime in "+e+"ms; assuming connection has dropped";a.default.logAction(a.default.LOG_ERROR,"Transport.onIdleTimerExpire()",n),this.disconnect(new u.default(n,80003,408))}else this.setIdleTimer(t+100)},t.tryConnect=function(e,t,n,r,o){var i,s=new e(t,n,r),c=function(e){clearTimeout(i),o({event:this.event,error:e})},l=t.options.timeouts.realtimeRequestTimeout;i=setTimeout((function(){s.off(["preconnect","disconnected","failed"]),s.dispose(),c.call({event:"disconnected"},new u.default("Timeout waiting for transport to indicate itself viable",5e4,500))}),l),s.on(["failed","disconnected"],c),s.on("preconnect",(function(){a.default.logAction(a.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+s),clearTimeout(i),s.off(["failed","disconnected"],c),o(null,s)})),s.connect()},t}(s.default);t.default=h},function(e,t,n){var r,o,i,s,a,c,u,l;e.exports=(l=n(6),n(40),n(23),i=(o=(r=l).lib).Base,s=o.WordArray,c=(a=r.algo).MD5,u=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,o=r.hasher.create(),i=s.create(),a=i.words,c=r.keySize,u=r.iterations;a.length<c;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var l=1;l<u;l++)n=o.finalize(n),o.reset();i.concat(n)}return i.sigBytes=4*c,i}}),r.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},l.EvpKDF)},function(e,t,n){var r,o,i,s,a,c,u,l,d,p,f,h,g,m,y,v,_,S,E;e.exports=(r=n(6),n(27),void(r.lib.Cipher||(o=r,i=o.lib,s=i.Base,a=i.WordArray,c=i.BufferedBlockAlgorithm,u=o.enc,u.Utf8,l=u.Base64,d=o.algo.EvpKDF,p=i.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?E:_}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()}),i.StreamCipher=p.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=o.mode={},h=i.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=f.CBC=function(){var e=h.extend();function t(e,t,n){var r,o=this._iv;o?(r=o,this._iv=void 0):r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize;t.call(this,e,n,o),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+o)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,i=e.slice(n,n+o);r.decryptBlock(e,n),t.call(this,e,n,o),this._prevBlock=i}}),e}(),m=(o.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(o);var c=a.create(i,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:g,padding:m}),reset:function(){var e;p.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),y=i.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),y.create({ciphertext:n,salt:t})}},_=i.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),i=o.finalize(t),s=o.cfg;return y.create({ciphertext:i,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),S=(o.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var o=d.create({keySize:t+n}).compute(e,r),i=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,y.create({key:o,iv:i,salt:r})}},E=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:S}),encrypt:function(e,t,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=o.iv;var i=_.encrypt.call(this,e,t,o.key,r);return i.mixIn(o),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=o.iv,_.decrypt.call(this,e,t,o.key,r)}}))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.createRequest=void 0;var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(12)),s=r.__importDefault(n(3)),a=r.__importDefault(n(7)),c=n(4),u=r.__importDefault(n(8)),l=r.__importDefault(n(2)),d=r.__importDefault(n(20)),p=o.getGlobalObject(),f=function(){},h=p._ablyjs_jsonp={};h._=function(e){return h["_"+e]||f};var g=1,m="jsonp";function y(e,t,n,r,i,s,a){return s=s||u.default.TIMEOUTS,new _(void 0,e,t,o.copy(n),r,i,s,a)}t.createRequest=y;var v=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.shortName=m,r.stream=!1,o}return r.__extends(t,e),t.isAvailable=function(){return s.default.Config.jsonpSupported&&s.default.Config.allowComet},t.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},t.prototype.createRequest=function(e,t,n,r,o,i,s){return y(e,t,n,r,o,i=(null==this?void 0:this.timeouts)||i||u.default.TIMEOUTS,s)},t}(i.default),_=function(e){function t(t,n,r,i,s,a,c,u){var l=e.call(this)||this;return void 0===t&&(t=g++),l.id=t,l.uri=n,l.params=i||{},l.params.rnd=o.cheapRandStr(),r&&(r["X-Ably-Version"]&&(l.params.v=r["X-Ably-Version"]),r["X-Ably-Lib"]&&(l.params.lib=r["X-Ably-Lib"])),l.body=s,l.method=u,l.requestMode=a,l.timeouts=c,l.requestComplete=!1,l}return r.__extends(t,e),t.prototype.exec=function(){var e=this,t=this.id,n=this.body,r=this.method,i=this.uri,a=this.params;a.callback="_ablyjs_jsonp._("+t+")",a.envelope="jsonp",n&&(a.body=n),r&&"get"!==r&&(a.method=r);var u=this.script=document.createElement("script"),p=i+o.toQueryString(a);u.src=p,u.src.split("/").slice(-1)[0]!==p.split("/").slice(-1)[0]&&l.default.logAction(l.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),u.async=!0,u.type="text/javascript",u.charset="UTF-8",u.onerror=function(t){e.complete(new c.PartialErrorInfo("JSONP script error (event: "+s.default.Config.inspect(t)+")",null,400))},h["_"+t]=function(t){if(t.statusCode){var n=t.response;if(204==t.statusCode)e.complete(null,null,null,t.statusCode);else if(n)if(t.statusCode<400||o.isArray(n))e.complete(null,n,t.headers,t.statusCode);else{var r=n.error||new c.PartialErrorInfo("Error response received from server",null,t.statusCode);e.complete(r)}else e.complete(new c.PartialErrorInfo("Invalid server response: no envelope detected",null,500))}else e.complete(null,t)};var f=this.requestMode==d.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),f);var g=document.getElementsByTagName("head")[0];g.insertBefore(u,g.firstChild)},t.prototype.complete=function(e,t,n,r){if(n=n||{},!this.requestComplete){this.requestComplete=!0;var o=void 0;t&&(o="string"==typeof t?"text/plain":"application/json",n["content-type"]=o,this.emit("data",t)),this.emit("complete",e,t,n,!0,r),this.dispose()}},t.prototype.abort=function(){this.dispose()},t.prototype.dispose=function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null);var t=this.script;t.parentNode&&t.parentNode.removeChild(t),delete h[this.id],this.emit("disposed")},t}(a.default);t.Request=_,t.default=function(e){return p.JSONPTransport=v,v.isAvailable()&&(e.supportedTransports[m]=v),v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),s=r.__importDefault(n(8)),a=r.__importDefault(n(16)),c=r.__importDefault(n(46)),u=r.__importDefault(n(18)),l=r.__importDefault(n(33)),d=r.__importDefault(n(4)),p=r.__importDefault(n(49)),f=r.__importDefault(n(17)),h=r.__importDefault(n(3)),g=r.__importDefault(n(9)),m=r.__importDefault(n(14)),y=function(){},v=function(){function e(e){if(!e){var t="no options provided";throw i.default.logAction(i.default.LOG_ERROR,"Rest()",t),new Error(t)}var n=s.default.objectifyOptions(e);n.log&&i.default.setLog(n.log.level,n.log.handler),i.default.logAction(i.default.LOG_MICRO,"Rest()","initialized with clientOptions "+h.default.Config.inspect(e));var r=this.options=s.default.normaliseOptions(n);if(r.key){var o=r.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!o)throw t="invalid key parameter",i.default.logAction(i.default.LOG_ERROR,"Rest()",t),new d.default(t,40400,404);r.keyName=o[1],r.keySecret=o[2]}if("clientId"in r){if("string"!=typeof r.clientId&&null!==r.clientId)throw new d.default("clientId must be either a string or null",40012,400);if("*"===r.clientId)throw new d.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}i.default.logAction(i.default.LOG_MINOR,"Rest()","started; version = "+s.default.version),this.baseUri=this.authority=function(e){return s.default.getHttpScheme(r)+e+":"+s.default.getPort(r,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new h.default.Http(r),this.auth=new a.default(this,r),this.channels=new _(this),this.push=new c.default(this)}return e.prototype.stats=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.options.promises)return o.promisify(this,"stats",[e]);t=y}var n=o.defaultGetHeaders(this.options),r=this.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.http.supportsLinkHeaders?void 0:r;this.options.headers&&o.mixin(n,this.options.headers),new u.default(this,"/stats",n,i,(function(e,t,n){for(var r=n?e:JSON.parse(e),o=0;o<r.length;o++)r[o]=p.default.fromValues(r[o]);return r})).get(e,t)},e.prototype.time=function(e,t){var n=this;if(void 0===t)if("function"==typeof e)t=e,e=null;else if(this.options.promises)return o.promisify(this,"time",[e]);var r=t||y,i=o.defaultGetHeaders(this.options);this.options.headers&&o.mixin(i,this.options.headers),this.http.do(f.default.Get,this,(function(e){return n.authority(e)+"/time"}),i,null,e,(function(e,t,i,s){if(e)r(e);else{s||(t=JSON.parse(t));var a=t[0];a?(n.serverTimeOffset=a-o.now(),r(null,a)):r(new d.default("Internal error (unexpected result type from GET /time)",5e4,500))}}))},e.prototype.request=function(e,t,n,r,i,s){var a=this.options.useBinaryProtocol,c=a?h.default.Config.msgpack.encode:JSON.stringify,l=a?h.default.Config.msgpack.decode:JSON.parse,p=a?o.Format.msgpack:o.Format.json,f=this.http.supportsLinkHeaders?void 0:p;n=n||{};var g=e.toLowerCase(),m="get"==g?o.defaultGetHeaders(this.options,p):o.defaultPostHeaders(this.options,p);if(void 0===s){if(this.options.promises)return o.promisify(this,"request",[e,t,n,r,i]);s=y}"string"!=typeof r&&(r=c(r)),this.options.headers&&o.mixin(m,this.options.headers),i&&o.mixin(m,i);var v=new u.default(this,t,m,f,(function(e,t,n){return o.ensureArray(n?e:l(e))}),!0);if(!o.arrIn(h.default.Http.methods,g))throw new d.default("Unsupported method "+g,40500,405);o.arrIn(h.default.Http.methodsWithBody,g)?v[g](n,r,s):v[g](n,s)},e.prototype.setLog=function(e){i.default.setLog(e.level,e.handler)},e.Promise=function(t){return(t=s.default.objectifyOptions(t)).promises=!0,new e(t)},e.Callbacks=e,e.Platform=h.default,e.Message=g.default,e.PresenceMessage=m.default,e}(),_=function(){function e(e){this.rest=e,this.all=Object.create(null)}return e.prototype.get=function(e,t){e=String(e);var n=this.all[e];return n?t&&n.setOptions(t):this.all[e]=n=new l.default(this.rest,e,t),n},e.prototype.release=function(e){delete this.all[String(e)]},e}();t.default=v},function(e,t,n){e.exports=n(6).enc.Utf8},function(e,t,n){var r;e.exports=(r=n(6),function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(a[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++}();var u=[],l=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5],d=n[6],p=n[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var h=u[f-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=u[f-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[f]=g+u[f-7]+y+u[f-16]}var v=r&o^r&i^o&i,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),S=p+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&d)+c[f]+u[f];p=d,d=l,l=a,a=s+S|0,s=i,i=o,o=r,r=S+(_+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importDefault(n(2)),a=r.__importDefault(n(34)),c=r.__importDefault(n(9)),u=r.__importDefault(n(4)),l=r.__importDefault(n(18)),d=r.__importDefault(n(25)),p=r.__importDefault(n(3));function f(){}function h(e){var t=e||{};if(t.cipher){if(!p.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var n=p.default.Crypto.getCipher(t.cipher);t.cipher=n.cipherParams,t.channelCipher=n.cipher}else"cipher"in t&&(t.cipher=void 0,t.channelCipher=null);return t}var g=function(e){function t(t,n,r){var o=e.call(this)||this;return s.default.logAction(s.default.LOG_MINOR,"Channel()","started; name = "+n),o.rest=t,o.name=n,o.basePath="/channels/"+encodeURIComponent(n),o.presence=new a.default(o),o.channelOptions=h(r),o}return r.__extends(t,e),t.prototype.setOptions=function(e){this.channelOptions=h(e)},t.prototype.history=function(e,t){if(s.default.logAction(s.default.LOG_MICRO,"Channel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return o.promisify(this,"history",arguments);t=f}this._history(e,t)},t.prototype._history=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(s,n.options.headers);var a=this.channelOptions;new l.default(n,this.basePath+"/messages",s,i,(function(e,t,n){return c.default.fromResponseBody(e,a,n?void 0:r)})).get(e,t)},t.prototype.publish=function(){var e,t,n=this,r=arguments[0],i=arguments[1],s=arguments[arguments.length-1];if("function"!=typeof s){if(this.rest.options.promises)return o.promisify(this,"publish",arguments);s=f}if("string"==typeof r||null===r)e=[c.default.fromValues({name:r,data:i})],t=arguments[2];else if(o.isObject(r))e=[c.default.fromValues(r)],t=arguments[1];else{if(!o.isArray(r))throw new u.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);e=c.default.fromValuesArray(r),t=arguments[1]}"object"==typeof t&&t||(t={});var a=this.rest,l=a.options,d=l.useBinaryProtocol?o.Format.msgpack:o.Format.json,p=a.options.idempotentRestPublishing,h=o.defaultPostHeaders(a.options,d);if(l.headers&&o.mixin(h,l.headers),p&&function(e){return o.arrEvery(e,(function(e){return!e.id}))}(e)){var g=o.randomString(9);o.arrForEach(e,(function(e,t){e.id=g+":"+t.toString()}))}c.default.encodeArray(e,this.channelOptions,(function(r){if(r)s(r);else{var o=c.default.getMessagesSize(e),i=l.maxMessageSize;o>i?s(new u.default("Maximum size of messages that can be published at once exceeded ( was "+o+" bytes; limit is "+i+" bytes)",40009,400)):n._publish(c.default.serialize(e,d),h,t,s)}}))},t.prototype._publish=function(e,t,n,r){d.default.post(this.rest,this.basePath+"/messages",e,t,n,null,r)},t.prototype.status=function(e){if("function"!=typeof e&&this.rest.options.promises)return o.promisify(this,"status",[]);var t=this.rest.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,n=o.defaultPostHeaders(this.rest.options,t);d.default.get(this.rest,this.basePath,n,{},t,e||f)},t}(i.default);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importDefault(n(2)),a=r.__importDefault(n(18)),c=r.__importDefault(n(14));function u(){}var l=function(e){function t(t){var n=e.call(this)||this;return n.channel=t,n.basePath=t.basePath+"/presence",n}return r.__extends(t,e),t.prototype.get=function(e,t){if(s.default.logAction(s.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return o.promisify(this,"get",arguments);t=u}var n=this.channel.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:r,l=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(l,n.options.headers);var d=this.channel.channelOptions;new a.default(n,this.basePath,l,i,(function(e,t,n){return c.default.fromResponseBody(e,d,n?void 0:r)})).get(e,t)},t.prototype.history=function(e,t){return s.default.logAction(s.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(e,t)},t.prototype._history=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return o.promisify(this,"_history",[e]);t=u}var n=this.channel.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(s,n.options.headers);var l=this.channel.channelOptions;new a.default(n,this.basePath+"/history",s,i,(function(e,t,n){return c.default.fromResponseBody(e,l,n?void 0:r)})).get(e,t)},t}(i.default);t.default=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TransportParams=void 0;var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),s=r.__importStar(n(52)),a=r.__importStar(n(8)),c=r.__importDefault(n(3)),u=r.__importDefault(n(7)),l=r.__importDefault(n(36)),d=r.__importDefault(n(2)),p=r.__importDefault(n(37)),f=r.__importStar(n(19)),h=r.__importStar(n(4)),g=r.__importDefault(n(16)),m=r.__importDefault(n(9)),y=r.__importDefault(n(22)),v=r.__importDefault(n(53)),_=r.__importDefault(n(26)),S=r.__importDefault(n(24)),E=function(){var e;return void 0!==c.default.WebStorage&&(null===(e=c.default.WebStorage)||void 0===e?void 0:e.localSupported)},b=function(){var e;return void 0!==c.default.WebStorage&&(null===(e=c.default.WebStorage)||void 0===e?void 0:e.sessionSupported)},T=o.default.Action,w=function(){},C="ably-transport-preference",R="ably-connection-recovery";function O(e){try{return JSON.parse(e)}catch(e){return null}}var I=function(){function e(e,t,n,r){this.options=e,this.host=t,this.mode=n,this.connectionKey=r,this.format=e.useBinaryProtocol?i.Format.msgpack:i.Format.json}return e.prototype.getConnectParams=function(e){var t=e?i.copy(e):{},n=this.options;switch(this.mode){case"upgrade":t.upgrade=this.connectionKey;break;case"resume":t.resume=this.connectionKey;break;case"recover":var r=O(n.recover);r&&(t.recover=r.connectionKey)}return void 0!==n.clientId&&(t.clientId=n.clientId),!1===n.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=a.default.protocolVersion,t.agent=encodeURIComponent((0,a.getAgentString)(this.options)),void 0!==n.transportParams&&i.mixin(t,n.transportParams),t},e.prototype.toString=function(){var e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+"]"},e}();t.TransportParams=I;var M=function(t){function n(e,r){var o=t.call(this)||this;o.disconnectedRetryCount=0,n.initTransports(),o.realtime=e,o.options=r;var s=r.timeouts,u=s.preferenceConnectTimeout+s.realtimeRequestTimeout;if(o.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:u,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:s.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:s.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:s.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},o.state=o.states.initialized,o.errorReason=null,o.queuedMessages=new l.default,o.msgSerial=0,o.connectionDetails=void 0,o.connectionId=void 0,o.connectionKey=void 0,o.connectionStateTtl=s.connectionStateTtl,o.maxIdleInterval=null,o.transports=i.intersect(r.transports||a.default.defaultTransports,n.supportedTransports),o.baseTransport=i.intersect(a.default.baseTransportOrder,o.transports)[0],o.upgradeTransports=i.intersect(o.transports,a.default.upgradeTransports),o.transportPreference=null,o.httpHosts=a.default.getHosts(r),o.activeProtocol=null,o.proposedTransports=[],o.pendingTransports=[],o.host=null,o.lastAutoReconnectAttempt=null,o.lastActivity=null,o.forceFallbackHost=!1,o.connectCounter=0,d.default.logAction(d.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),d.default.logAction(d.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(r.transports||a.default.defaultTransports)+"]"),d.default.logAction(d.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+o.transports+"]"),d.default.logAction(d.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+o.httpHosts+"]"),!o.transports.length){var p="no requested transports available";throw d.default.logAction(d.default.LOG_ERROR,"realtime.ConnectionManager()",p),new Error(p)}var f=c.default.Config.addEventListener;return f&&(b()&&"function"==typeof r.recover&&f("beforeunload",o.persistConnection.bind(o)),!0===r.closeOnUnload&&f("beforeunload",(function(){d.default.logAction(d.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),o.requestState({state:"closing"})})),f("online",(function(){o.state==o.states.disconnected||o.state==o.states.suspended?(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),o.requestState({state:"connecting"})):o.state==o.states.connecting&&(o.pendingTransports.forEach((function(e){e.off()})),o.disconnectAllTransports(),o.startConnect())})),f("offline",(function(){o.state==o.states.connected&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),o.disconnectAllTransports())}))),o}return r.__extends(n,t),n.initTransports=function(){(0,v.default)(n),i.arrForEach(c.default.Transports,(function(e){e(n)}))},n.prototype.createTransportParams=function(e,t){return new I(this.options,e,t,this.connectionKey)},n.prototype.getTransportParams=function(e){var t=this;!function(e){if(t.connectionKey)e("resume");else if("string"!=typeof t.options.recover){var n,r,o=t.options.recover,i=b()&&(null===(r=null===(n=c.default.WebStorage)||void 0===n?void 0:n.getSession)||void 0===r?void 0:r.call(n,R));if(i&&"function"==typeof o)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),void o(i,(function(n){n?(t.options.recover=i.recoveryKey,e("recover")):e("clean")}));e("clean")}else e("recover")}((function(n){var r=t.createTransportParams(null,n);if("recover"===n){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+t.options.recover);var o=O(t.options.recover);o&&(t.msgSerial=o.msgSerial)}else d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+r.toString());e(r)}))},n.prototype.tryATransport=function(e,t,r){var o=this;d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),_.default.tryConnect(n.supportedTransports[t],this,this.realtime.auth,e,(function(n,i){var s=o.state;return s==o.states.closing||s==o.states.closed||s==o.states.failed?(i&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+s.state+" while we were attempting the transport; closing "+i),i.close()),void r(!0)):n?(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+n.event+", err: "+n.error.toString()),void(!g.default.isTokenErr(n.error)||o.errorReason&&g.default.isTokenErr(o.errorReason)?"failed"===n.event?(o.notifyState({state:"failed",error:n.error}),r(!0)):"disconnected"===n.event&&((0,f.isRetriable)(n.error)?r(!1):(o.notifyState({state:o.states.connecting.failState,error:n.error}),r(!0))):(o.errorReason=n.error,o.realtime.auth._forceNewToken(null,null,(function(n){n?o.actOnErrorFromAuthorize(n):o.tryATransport(e,t,r)}))))):(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),o.setTransportPending(i,e),void r(null,i))}))},n.prototype.setTransportPending=function(e,t){var n=this,r=t.mode;d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+r),i.arrDeleteValue(this.proposedTransports,e),this.pendingTransports.push(e);var o=c.default.Defaults.transportPreferenceOrder[c.default.Defaults.transportPreferenceOrder.length-1];e.once("connected",(function(s,a,u){"upgrade"==r&&n.activeProtocol?e.shortName!==o&&i.arrIn(n.getUpgradePossibilities(),o)&&n.activeProtocol?setTimeout((function(){n.scheduleTransportActivation(s,e,a,u)}),n.options.timeouts.parallelUpgradeDelay):n.scheduleTransportActivation(s,e,a,u):(n.activateTransport(s,e,a,u),c.default.Config.nextTick((function(){n.connectImpl(t)}))),"recover"===r&&n.options.recover&&(n.options.recover=null,n.unpersistConnection())}));var s=this;e.on(["disconnected","closed","failed"],(function(t){s.deactivateTransport(e,this.event,t)})),this.emit("transport.pending",e)},n.prototype.scheduleTransportActivation=function(e,t,n,r){var s,a,u=this,l=this.activeProtocol&&this.activeProtocol.getTransport(),p=function(){t.disconnect(),i.arrDeleteValue(u.pendingTransports,t)};if(this.state!==this.states.connected&&this.state!==this.states.connecting)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void p();if(l&&(s=t,a=l,!(i.arrIndexOf(c.default.Defaults.transportPreferenceOrder,s.shortName)>i.arrIndexOf(c.default.Defaults.transportPreferenceOrder,a.shortName))))return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+" is no better than current active transport "+l.shortName+" - abandoning upgrade"),void p();d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+t);var f=null;if(!t.isConnected)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+"is no longer connected; abandoning upgrade"),void p();if(this.state===this.states.connected)d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,f=this.activeProtocol;else if(this.state!==this.states.connecting)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void p();d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+t);var h=function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+t),t.send(o.default.fromValues({action:T.ACTIVATE})),u.activateTransport(e,t,n,r),u.state===u.states.synchronizing?(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+t),u.state=u.states.connected):d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+u.state.state+", so leaving unchanged"),u.state.sendEvents&&u.sendQueuedMessages()};f?f.onceIdle(h):h()},n.prototype.activateTransport=function(e,t,n,r){var o=this;d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),n&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+n),r&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),this.persistTransportPreference(t);var a=this.state,u=this.states.connected.state;if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+a.state),a.state==this.states.closing.state||a.state==this.states.closed.state||a.state==this.states.failed.state)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(i.arrDeleteValue(this.pendingTransports,t),!t.isConnected)return d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;var l=this.activeProtocol;this.activeProtocol=new s.default(t),this.host=t.params.host;var f=r.connectionKey;if(f&&this.connectionKey!=f&&this.setConnection(n,r,!!e),this.onConnectionDetailsUpdate(r,t),c.default.Config.nextTick((function(){t.on("connected",(function(e,n,r){o.onConnectionDetailsUpdate(r,t),o.emit("update",new p.default(u,u,null,e))}))})),a.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new p.default(u,u,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),l)if(l.messageQueue.count()>0&&d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+l.transport.shortName+", new one is "+t.shortName+") finishing with "+l.messageQueue.count()+" messages still pending"),l.transport===t){var h="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()",h)}else l.finish();return i.safeArrForEach(this.pendingTransports,(function(e){if(e===t){var n="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+t.shortName+"; stack = "+(new Error).stack;d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()",n),i.arrDeleteValue(o.pendingTransports,t)}else e.disconnect()})),i.safeArrForEach(this.proposedTransports,(function(e){e===t?(d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+t.shortName+"; stack = "+(new Error).stack),i.arrDeleteValue(o.proposedTransports,t)):e.dispose()})),!0},n.prototype.deactivateTransport=function(e,t,n){var r=this.activeProtocol,o=r&&r.getTransport()===e,s=i.arrDeleteValue(this.pendingTransports,e),a=i.arrDeleteValue(this.proposedTransports,e),u=this.noTransportsScheduledForActivation();if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(o?"; was active":s?"; was pending":a?"; was proposed":"")+(u?"":"; another transport is scheduled for activation")),n&&n.message&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+n.message),o&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),c.default.Config.nextTick((function(){r.clearPendingMessages()})),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),o&&u||o&&"failed"===t||"closed"===t||null===r&&s&&0===this.pendingTransports.length){if("disconnected"===t&&n&&n.statusCode>500&&this.httpHosts.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:n,retryImmediately:!0});var l="failed"===t&&g.default.isTokenErr(n)?"disconnected":t;this.notifyState({state:l,error:n})}else o&&"disconnected"===t&&this.state!==this.states.synchronizing&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:n}))},n.prototype.noTransportsScheduledForActivation=function(){return i.isEmpty(this.pendingTransports)||this.pendingTransports.every((function(e){return!e.isConnected}))},n.prototype.setConnection=function(e,t,n){var r=this.connectionId;(r&&r!==e||!r&&n)&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey},n.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},n.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},n.prototype.checkConnectionStateFreshness=function(){if(this.lastActivity&&this.connectionId){var e=i.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},n.prototype.persistConnection=function(){if(b()){var t=this.createRecoveryKey();t&&(n={recoveryKey:t,disconnectedAt:i.now(),location:e.location,clientId:this.realtime.auth.clientId},b()&&(null===(o=null===(r=c.default.WebStorage)||void 0===r?void 0:r.setSession)||void 0===o||o.call(r,R,n)))}var n,r,o},n.prototype.unpersistConnection=function(){var e,t;b()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.removeSession)||void 0===t||t.call(e,R))},n.prototype.getError=function(){return this.errorReason||this.getStateError()},n.prototype.getStateError=function(){var e,t;return null===(t=(e=f.default)[this.state.state])||void 0===t?void 0:t.call(e)},n.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},n.prototype.enactStateChange=function(e){var t="failed"===e.current?d.default.LOG_ERROR:d.default.LOG_MAJOR;d.default.logAction(t,"Connection state",e.current+(e.reason?"; reason: "+e.reason:"")),d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));var n=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(n.terminal||"suspended"===n.state)&&this.clearConnection(),this.emit("connectionstate",e)},n.prototype.startTransitionTimer=function(e){var t=this;d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout((function(){t.transitionTimer&&(t.transitionTimer=null,d.default.logAction(d.default.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),t.notifyState({state:e.failState}))}),e.retryDelay)},n.prototype.cancelTransitionTimer=function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},n.prototype.startSuspendTimer=function(){var e=this;this.suspendTimer||(this.suspendTimer=setTimeout((function(){e.suspendTimer&&(e.suspendTimer=null,d.default.logAction(d.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),e.states.connecting.failState="suspended",e.notifyState({state:"suspended"}))}),this.connectionStateTtl))},n.prototype.checkSuspendTimer=function(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()},n.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},n.prototype.startRetryTimer=function(e){var t=this;this.retryTimer=setTimeout((function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),t.retryTimer=null,t.requestState({state:"connecting"})}),e)},n.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},n.prototype.notifyState=function(e){var t,n,r=this,o=e.state,s="disconnected"===o&&(this.state===this.states.connected||this.state===this.states.synchronizing||e.retryImmediately||this.state===this.states.connecting&&e.error&&g.default.isTokenErr(e.error)&&!(this.errorReason&&g.default.isTokenErr(this.errorReason)));if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+o+(s?"; will retry connection immediately":"")),o!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(e.state),"suspended"!==o&&"connected"!==o||(this.disconnectedRetryCount=0),!this.state.terminal)){var a=this.states[e.state],u=a.retryDelay;"disconnected"===a.state&&(this.disconnectedRetryCount++,u=i.getRetryTime(a.retryDelay,this.disconnectedRetryCount));var l=new p.default(this.state.state,a.state,u,e.error||(null===(n=(t=f.default)[a.state])||void 0===n?void 0:n.call(t)));if(s){var h=function(){r.state===r.states.disconnected&&(r.lastAutoReconnectAttempt=i.now(),r.requestState({state:"connecting"}))},m=this.lastAutoReconnectAttempt&&i.now()-this.lastAutoReconnectAttempt+1;m&&m<1e3?(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+m+"ms ago, waiting another "+(1e3-m)+"ms before trying again"),setTimeout(h,1e3-m)):c.default.Config.nextTick(h)}else"disconnected"!==o&&"suspended"!==o||this.startRetryTimer(u);("disconnected"===o&&!s||"suspended"===o||a.terminal)&&c.default.Config.nextTick((function(){r.disconnectAllTransports()})),"connected"!=o||this.activeProtocol||d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(l),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(o,l.reason),this.failQueuedMessages(l.reason))}},n.prototype.requestState=function(e){var t,n,r=this,o=e.state;if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+o+"; current state: "+this.state.state),o!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(o),!("connecting"==o&&"connected"==this.state.state||"closing"==o&&"closed"==this.state.state))){var i=this.states[o],s=new p.default(this.state.state,i.state,null,e.error||(null===(n=(t=f.default)[i.state])||void 0===n?void 0:n.call(t)));this.enactStateChange(s),"connecting"==o&&c.default.Config.nextTick((function(){r.startConnect()})),"closing"==o&&this.closeImpl()}},n.prototype.startConnect=function(){var e=this;if(this.state===this.states.connecting){var t=this.realtime.auth,n=++this.connectCounter,r=function(){e.checkConnectionStateFreshness(),e.getTransportParams((function(t){if("recover"===t.mode&&t.options.recover){var r=O(t.options.recover);r&&e.realtime.channels.recoverChannels(r.channelSerials)}n===e.connectCounter&&e.connectImpl(t,n)}))};if(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===t.method)r();else{var o=function(t){n===e.connectCounter&&(t?e.actOnErrorFromAuthorize(t):r())};this.errorReason&&g.default.isTokenErr(this.errorReason)?t._forceNewToken(null,null,o):t._ensureValidAuthCredentials(!1,o)}}else d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state)},n.prototype.connectImpl=function(e,t){var n=this.state.state;n!==this.states.connecting.state&&n!==this.states.connected.state?d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+n):this.pendingTransports.length?d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):n==this.states.connected.state?this.upgradeIfNeeded(e):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(e,t):this.connectBase(e,t)},n.prototype.connectPreference=function(e,t){var n=this,r=this.getTransportPreference(),o=!1;i.arrIn(this.transports,r)||(this.unpersistTransportPreference(),this.connectImpl(e,t)),d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+r);var s=setTimeout((function(){o=!0,n.state.state!==n.states.connected.state&&(d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+r+" failed; clearing preference and trying from scratch"),n.disconnectAllTransports(),n.unpersistTransportPreference()),n.connectImpl(e,t)}),this.options.timeouts.preferenceConnectTimeout);e.host=this.httpHosts[0],this.tryATransport(e,r,(function(r,a){clearTimeout(s),o&&a?(a.off(),a.disconnect(),i.arrDeleteValue(n.pendingTransports,a)):a||r||(n.unpersistTransportPreference(),n.connectImpl(e,t))}))},n.prototype.connectBase=function(e,t){var n=this,r=function(e){n.notifyState({state:n.states.connecting.failState,error:e})},o=this.httpHosts.slice(),s=function(e,r){t===n.connectCounter&&(r||e||c())};d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var a=o.shift();if(a){e.host=a;var c=function(){o.length?n.realtime.http.checkConnectivity?n.realtime.http.checkConnectivity((function(a,c){t===n.connectCounter&&(a?r(a):c?(e.host=i.arrPopRandomElement(o),n.tryATransport(e,n.baseTransport,s)):r(new h.default("Unable to connect (network unreachable)",80003,404)))})):r(new h.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500)):r(new h.default("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&o.length)return this.forceFallbackHost=!1,void c();this.tryATransport(e,this.baseTransport,s)}else r(new h.default("Unable to connect (no available host)",80003,404))},n.prototype.getUpgradePossibilities=function(){var e=this.activeProtocol.getTransport().shortName,t=i.arrIndexOf(this.upgradeTransports,e);return this.upgradeTransports.slice(t+1)},n.prototype.upgradeIfNeeded=function(e){var t=this,n=this.getUpgradePossibilities();d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+c.default.Config.inspect(n)),n.length&&i.arrForEach(n,(function(n){var r=t.createTransportParams(e.host,"upgrade");t.tryATransport(r,n,w)}))},n.prototype.closeImpl=function(){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),i.safeArrForEach(this.pendingTransports,(function(e){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+e),e&&e.close()})),i.safeArrForEach(this.proposedTransports,(function(e){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.activeProtocol&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},n.prototype.onAuthUpdated=function(e,t){var n,r=this;switch(this.state.state){case"connected":if(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var i=this.activeProtocol.getTransport().params;c.default.Config.nextTick((function(){"connected"===r.state.state&&r.upgradeIfNeeded(i)}))}var s=null===(n=this.activeProtocol)||void 0===n?void 0:n.getTransport();s&&s.onAuthUpdated&&s.onAuthUpdated(e);var a=o.default.fromValues({action:T.AUTH,auth:{accessToken:e.token}});this.send(a);var u=function(){r.off(l),t(null,e)},l=function(e){"failed"===e.current&&(r.off(u),r.off(l),t(e.reason||r.getStateError()))};this.once("connectiondetails",u),this.on("connectionstate",l);break;case"connecting":d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var p=function(n){switch(n.current){case"connected":r.off(p),t(null,e);break;case"failed":case"closed":case"suspended":r.off(p),t(n.reason||r.getStateError())}};this.on("connectionstate",p),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}},n.prototype.disconnectAllTransports=function(e){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(e?" except the active transport":"")),this.connectCounter++,i.safeArrForEach(this.pendingTransports,(function(e){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+e),e&&e.disconnect()})),this.pendingTransports=[],i.safeArrForEach(this.proposedTransports,(function(e){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.proposedTransports=[],this.activeProtocol&&!e&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},n.prototype.send=function(e,t,n){n=n||w;var r=this.state;if(r.sendEvents)return d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new s.PendingMessage(e,n));if(!(t&&r.queueEvents||r.forceQueueEvents)){var i="rejecting event, queueEvent was "+t+", state was "+r.state;return d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.send()",i),void n(this.errorReason||new h.default(i,9e4,400))}d.default.shouldLog(d.default.LOG_MICRO)&&d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+o.default.stringify(e)),this.queue(e,n)},n.prototype.sendImpl=function(e){var t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(e){d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+e.stack)}},n.prototype.queue=function(e,t){d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var n=this.queuedMessages.last(),r=this.options.maxMessageSize;n&&!n.sendAttempted&&function(e,t,n){var r;if(e.channel!==t.channel)return!1;if((r=e.action)!==T.PRESENCE&&r!==T.MESSAGE)return!1;if(r!==t.action)return!1;var o=r===T.PRESENCE?"presence":"messages",s=e[o].concat(t[o]);return!(m.default.getMessagesSize(s)>n||!i.allSame(s,"clientId")||!i.arrEvery(s,(function(e){return!e.id}))||(e[o]=s,0))}(n.message,e,r)?(n.merged||(n.callback=y.default.create([n.callback]),n.merged=!0),n.callback.push(t)):this.queuedMessages.push(new s.PendingMessage(e,t))},n.prototype.sendQueuedMessages=function(){var e;for(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)},n.prototype.queuePendingMessages=function(e){e&&e.length&&(d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))},n.prototype.failQueuedMessages=function(e){var t=this.queuedMessages.count();t>0&&(d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+i.inspectError(e)),this.queuedMessages.completeAllMessages(e))},n.prototype.onChannelMessage=function(e,t){var n=this.activeProtocol&&t===this.activeProtocol.getTransport(),r=i.arrIn(this.pendingTransports,t)&&this.state==this.states.synchronizing;n||r||i.arrIndexOf([T.ACK,T.NACK,T.ERROR],e.action)>-1?this.realtime.channels.onChannelMessage(e):d.default.logAction(d.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(e)+"on defunct transport; discarding")},n.prototype.ping=function(e,t){var n=this;if(e){d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+e);var r=i.now(),o=i.cheapRandStr(),s=function(n){if(n===o){e.off("heartbeat",s),clearTimeout(a);var c=i.now()-r;t(null,c)}},a=setTimeout((function(){e.off("heartbeat",s),t(new h.default("Timeout waiting for heartbeat response",5e4,500))}),this.options.timeouts.realtimeRequestTimeout);return e.on("heartbeat",s),void e.ping(o)}if("connected"===this.state.state){var u=!1,l=function(){u||(u=!0,c.default.Config.nextTick((function(){n.ping(null,t)})))};this.on("transport.active",l),this.ping(this.activeProtocol.getTransport(),(function(e,r){n.off("transport.active",l),u||(u=!0,t(e,r))}))}else t(new h.default("Unable to ping service; not connected",4e4,400))},n.prototype.abort=function(e){this.activeProtocol.getTransport().fail(e)},n.prototype.registerProposedTransport=function(e){this.proposedTransports.push(e)},n.prototype.getTransportPreference=function(){var e,t;return this.transportPreference||E()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.get)||void 0===t?void 0:t.call(e,C))},n.prototype.persistTransportPreference=function(e){var t,n;i.arrIn(a.default.upgradeTransports,e.shortName)&&(this.transportPreference=e.shortName,E()&&(null===(n=null===(t=c.default.WebStorage)||void 0===t?void 0:t.set)||void 0===n||n.call(t,C,e.shortName)))},n.prototype.unpersistTransportPreference=function(){var e,t;this.transportPreference=null,E()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.remove)||void 0===t||t.call(e,C))},n.prototype.actOnErrorFromAuthorize=function(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===S.default.Forbidden){var t="Client configured authentication provider returned 403; failing the connection";d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new h.default(t,80019,403,e)})}else t="Client configured authentication provider request failed",d.default.logAction(d.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new h.default(t,80019,401,e)})},n.prototype.onConnectionDetailsUpdate=function(e,t){if(e){this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);var n=e.clientId;if(n){var r=this.realtime.auth._uncheckedSetClientId(n);if(r)return d.default.logAction(d.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",r.message),void t.fail(r)}var o=e.connectionStateTtl;o&&(this.connectionStateTtl=o),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}},n.supportedTransports={},n}(u.default);t.default=M}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(7)),i=r.__importDefault(n(2)),s=function(e){function t(){var t=e.call(this)||this;return t.messages=[],t}return r.__extends(t,e),t.prototype.count=function(){return this.messages.length},t.prototype.push=function(e){this.messages.push(e)},t.prototype.shift=function(){return this.messages.shift()},t.prototype.last=function(){return this.messages[this.messages.length-1]},t.prototype.copyAll=function(){return this.messages.slice()},t.prototype.append=function(e){this.messages.push.apply(this.messages,e)},t.prototype.prepend=function(e){this.messages.unshift.apply(this.messages,e)},t.prototype.completeMessages=function(e,t,n){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+e+"; count = "+t),n=n||null;var r=this.messages;if(0===r.length)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var o=r[0];if(o){var s=o.message.msgSerial,a=e+t;if(a>s)for(var c=0,u=r.splice(0,a-s);c<u.length;c++)u[c].callback(n);0==r.length&&this.emit("idle")}},t.prototype.completeAllMessages=function(e){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e)},t.prototype.resetSendAttempted=function(){for(var e=0,t=this.messages;e<t.length;e++)t[e].sendAttempted=!1},t.prototype.clear=function(){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},t}(o.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r){this.previous=e,this.current=t,n&&(this.retryIn=n),r&&(this.reason=r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(10)),i=r.__importDefault(n(7)),s=r.__importStar(n(1)),a=r.__importDefault(n(33)),c=r.__importDefault(n(2)),u=r.__importDefault(n(54)),l=r.__importDefault(n(9)),d=r.__importDefault(n(39)),p=r.__importStar(n(4)),f=r.__importDefault(n(14)),h=r.__importDefault(n(19)),g=o.default.Action,m=function(){},y=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.retryCount=0,o.history=function(e,t){if(c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return s.promisify(this,"history",arguments);t=m}if(e&&e.untilAttach){if("attached"!==this.state)return void t(new p.default("option untilAttach requires the channel to be attached",4e4,400));if(!this.properties.attachSerial)return void t(new p.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));delete e.untilAttach,e.from_serial=this.properties.attachSerial}a.default.prototype._history.call(this,e,t)},o.whenState=function(e,t){return i.default.prototype.whenState.call(o,e,o.state,t)},c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel()","started; name = "+n),o.realtime=t,o.presence=new u.default(o),o.connectionManager=t.connection.connectionManager,o.state="initialized",o.subscriptions=new i.default,o.syncChannelSerial=void 0,o.properties={attachSerial:void 0,channelSerial:void 0},o.setOptions(r),o.errorReason=null,o._requestedFlags=null,o._mode=null,o._attachResume=!1,o._decodingContext={channelOptions:o.channelOptions,plugins:t.options.plugins||{},baseEncodedPreviousPayload:void 0},o._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},o._allChannelChanges=new i.default,o}return r.__extends(t,e),t.prototype.invalidStateError=function(){return new p.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},t.processListenerArgs=function(e){return"function"==typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),null==e[e.length-1]&&e.pop(),e},t.prototype.setOptions=function(e,t){if(!t&&this.rest.options.promises)return s.promisify(this,"setOptions",arguments);var n=t||function(e){e&&c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+e.toString())},r=function(e){if(e&&"params"in e&&!s.isObject(e.params))return new p.default("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!s.isArray(e.modes))return new p.default("options.modes must be an array",4e4,400);for(var t=0;t<e.modes.length;t++){var n=e.modes[t];if(!n||"string"!=typeof n||!s.arrIn(o.default.channelModes,String.prototype.toUpperCase.call(n)))return new p.default("Invalid channel mode: "+n,4e4,400)}}}(e);r?n(r):(a.default.prototype.setOptions.call(this,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],(function(e){switch(this.event){case"update":case"attached":return void(null==n||n(null));default:return void(null==n||n(e.reason))}}))):n())},t.prototype._shouldReattachToSetOptions=function(e){return("attached"===this.state||"attaching"===this.state)&&((null==e?void 0:e.params)||(null==e?void 0:e.modes))},t.prototype.publish=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t.length,i=t[o-1];if("function"!=typeof i){if(this.realtime.options.promises)return s.promisify(this,"publish",arguments);i=m,++o}if(this.connectionManager.activeState()){if(2==o)if(s.isObject(r))r=[l.default.fromValues(r)];else{if(!s.isArray(r))throw new p.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);r=l.default.fromValuesArray(r)}else r=[l.default.fromValues({name:t[0],data:t[1]})];var a=this.realtime.options.maxMessageSize;l.default.encodeArray(r,this.channelOptions,(function(t){if(t)i(t);else{var n=l.default.getMessagesSize(r);n>a?i(new p.default("Maximum size of messages that can be published at once exceeded ( was "+n+" bytes; limit is "+a+" bytes)",40009,400)):e.__publish(r,i)}}))}else i(this.connectionManager.getError())},t.prototype.__publish=function(e,t){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+e.length);var n=this.state;switch(n){case"failed":case"suspended":t(p.default.fromValues(this.invalidStateError()));break;default:c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+n);var r=new o.default;r.action=g.MESSAGE,r.channel=this.name,r.messages=e,this.sendMessage(r,t)}},t.prototype.onEvent=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var t=this.subscriptions,n=0;n<e.length;n++){var r=e[n];t.emit(r.name,r)}},t.prototype.attach=function(e,t){var n;if("function"==typeof e?(t=e,n=null):n=e,!t){if(this.realtime.options.promises)return s.promisify(this,"attach",arguments);t=function(e){e&&c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+e.toString())}}if(n)c.default.deprecated("channel.attach() with flags","channel.setOptions() with channelOptions.params"),this._requestedFlags=n;else if("attached"===this.state)return void t(null,null);this._attach(!1,null,t)},t.prototype._attach=function(e,t,n){n||(n=function(e){e&&c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});var r=this.connectionManager;r.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once((function(e){switch(this.event){case"attached":null==n||n(null,e);break;case"detached":case"suspended":case"failed":null==n||n(e.reason||r.getError()||new p.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==n||n(new p.default("Attach request superseded by a subsequent detach request",9e4,409))}}))):n(r.getError())},t.prototype.attachImpl=function(){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var e=o.default.fromValues({action:g.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?e.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&e.encodeModesToFlags(s.allToUpperCase(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e,m)},t.prototype.detach=function(e){if(!e){if(this.realtime.options.promises)return s.promisify(this,"detach",arguments);e=m}var t=this.connectionManager;if(t.activeState())switch(this.state){case"suspended":this.notifyState("detached"),e();break;case"detached":e();break;case"failed":e(new p.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once((function(n){switch(this.event){case"detached":e();break;case"attached":case"suspended":case"failed":e(n.reason||t.getError()||new p.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":e(new p.default("Detach request superseded by a subsequent attach request",9e4,409))}}))}else e(t.getError())},t.prototype.detachImpl=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var t=o.default.fromValues({action:g.DETACH,channel:this.name});this.sendMessage(t,e||m)},t.prototype.subscribe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.processListenerArgs(e),o=r[0],i=r[1],a=r[2];return!a&&this.realtime.options.promises?s.promisify(this,"subscribe",[o,i]):"failed"!==this.state?(o&&"object"==typeof o&&!Array.isArray(o)?this._subscribeFilter(o,i):this.subscriptions.on(o,i),this.attach(a||m)):void(null==a||a(p.default.fromValues(this.invalidStateError())))},t.prototype._subscribeFilter=function(e,t){var n=function(n){var r,o,i,s,a,c,u={name:n.name,refTimeserial:null===(o=null===(r=n.extras)||void 0===r?void 0:r.ref)||void 0===o?void 0:o.timeserial,refType:null===(s=null===(i=n.extras)||void 0===i?void 0:i.ref)||void 0===s?void 0:s.type,isRef:!!(null===(c=null===(a=n.extras)||void 0===a?void 0:a.ref)||void 0===c?void 0:c.timeserial),clientId:n.clientId};Object.entries(e).find((function(e){var t=e[0],n=e[1];return void 0!==n&&u[t]!==n}))||t(n)};this._addFilteredSubscription(e,t,n),this.subscriptions.on(n)},t.prototype._addFilteredSubscription=function(e,t,n){var r;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(t)){var o=this.filteredSubscriptions.get(t);o.set(e,(null===(r=null==o?void 0:o.get(e))||void 0===r?void 0:r.concat(n))||[n])}else this.filteredSubscriptions.set(t,new Map([[e,[n]]]))},t.prototype._getAndDeleteFilteredSubscriptions=function(e,t){var n=this;if(!this.filteredSubscriptions)return[];if(!t&&e)return Array.from(this.filteredSubscriptions.entries()).map((function(t){var r,o=t[0],i=t[1],s=i.get(e);return i.delete(e),0===i.size&&(null===(r=n.filteredSubscriptions)||void 0===r||r.delete(o)),s})).reduce((function(e,t){var n;return t?(n=e).concat.apply(n,t):e}),[]);if(!t||!this.filteredSubscriptions.has(t))return[];var r=this.filteredSubscriptions.get(t);if(!e){var o=Array.from(r.values()).reduce((function(e,t){return e.concat.apply(e,t)}),[]);return this.filteredSubscriptions.delete(t),o}var i=r.get(e);return r.delete(e),i||[]},t.prototype.unsubscribe=function(){for(var e,n=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=t.processListenerArgs(r),s=i[0],a=i[1];"object"==typeof s&&!a||(null===(e=this.filteredSubscriptions)||void 0===e?void 0:e.has(a))?this._getAndDeleteFilteredSubscriptions(s,a).forEach((function(e){return n.subscriptions.off(e)})):this.subscriptions.off(s,a)},t.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new p.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var e=this.connectionManager;if(!e.activeState())throw e.getError();var t=o.default.fromValues({action:g.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)},t.prototype.sendMessage=function(e,t){this.connectionManager.send(e,this.realtime.options.queueMessages,t)},t.prototype.sendPresence=function(e,t){var n=o.default.fromValues({action:g.PRESENCE,channel:this.name,presence:s.isArray(e)?f.default.fromValuesArray(e):[f.default.fromValues(e)]});this.sendMessage(n,t)},t.prototype.onMessage=function(e){e.action!==g.ATTACHED&&e.action!==g.MESSAGE&&e.action!==g.PRESENCE||this.setChannelSerial(e.channelSerial);var t,n=!1;switch(e.action){case g.ATTACHED:this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};var r=e.decodeModesFromFlags();this.modes=r&&s.allToLowerCase(r)||void 0;var o=e.hasFlag("RESUMED"),i=e.hasFlag("HAS_PRESENCE"),a=e.hasFlag("HAS_BACKLOG");if("attached"===this.state){o||this.presence.onAttached(i);var u=new d.default(this.state,this.state,o,a,e.error);this._allChannelChanges.emit("update",u),o&&!this.channelOptions.updateOnAttached||this.emit("update",u)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",e.error,o,i,a);break;case g.DETACHED:var m=e.error?p.default.fromValues(e.error):new p.default("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",m):"attaching"===this.state?this.notifyState("suspended",m):this.requestState("attaching",m);break;case g.SYNC:if(n=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;case g.PRESENCE:for(var y=e.presence,v=e.id,_=e.connectionId,S=e.timestamp,E=this.channelOptions,b=void 0,T=0;T<y.length;T++)try{b=y[T],f.default.decode(b,E),b.connectionId||(b.connectionId=_),b.timestamp||(b.timestamp=S),b.id||(b.id=v+":"+T)}catch(e){c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString())}this.presence.setPresence(y,n,t);break;case g.MESSAGE:if("attached"!==this.state)return void c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');var w=e.messages,C=w[0],R=w[w.length-1];if(v=e.id,_=e.connectionId,S=e.timestamp,C.extras&&C.extras.delta&&C.extras.delta.from!==this._lastPayload.messageId){var O='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",O),this._startDecodeFailureRecovery(new p.default(O,40018,400));break}for(T=0;T<w.length;T++){O=w[T];try{l.default.decode(O,this._decodingContext)}catch(e){switch(c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString()),e.code){case 40018:return void this._startDecodeFailureRecovery(e);case 40019:case 40021:return void this.notifyState("failed",e)}}O.connectionId||(O.connectionId=_),O.timestamp||(O.timestamp=S),O.id||(O.id=v+":"+T)}this._lastPayload.messageId=R.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(w);break;case g.ERROR:var I=e.error;I&&80016==I.code?this.checkPendingState():this.notifyState("failed",p.default.fromValues(I));break;default:c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+e.action+")"),this.connectionManager.abort(h.default.unknownChannelErr())}},t.prototype._startDecodeFailureRecovery=function(e){var t=this;this._lastPayload.decodeFailureRecoveryInProgress||(c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,(function(){t._lastPayload.decodeFailureRecoveryInProgress=!1})))},t.prototype.onAttached=function(){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},t.prototype.notifyState=function(e,t,n,r,o){if(c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),s.arrIn(["detached","suspended","failed"],e)&&(this.properties.channelSerial=null),e!==this.state){this.presence.actOnChannelState(e,r,t),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);var i=new d.default(this.state,e,n,o,t),a="failed"===e?c.default.LOG_ERROR:c.default.LOG_MAJOR;c.default.logAction(a,'Channel state for channel "'+this.name+'"',e+(t?"; reason: "+t:"")),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,i),this.emit(e,i)}},t.prototype.requestState=function(e,t){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()},t.prototype.checkPendingState=function(){var e=this.connectionManager.state;if(e.sendEvents||e.forceQueueEvents)switch(c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)},t.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":var e=new p.default("Channel attach timed out",90007,408);this.notifyState("suspended",e);break;case"detaching":e=new p.default("Channel detach timed out",90007,408),this.notifyState("attached",e);break;default:this.checkPendingState()}},t.prototype.startStateTimerIfNotRunning=function(){var e=this;this.stateTimer||(this.stateTimer=setTimeout((function(){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),e.stateTimer=null,e.timeoutPendingState()}),this.realtime.options.timeouts.realtimeRequestTimeout))},t.prototype.clearStateTimer=function(){var e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)},t.prototype.startRetryTimer=function(){var e=this;if(!this.retryTimer){this.retryCount++;var t=s.getRetryTime(this.realtime.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout((function(){"suspended"===e.state&&e.connectionManager.state.sendEvents&&(e.retryTimer=null,c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),e.requestState("attaching"))}),t)}},t.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},t.prototype.getReleaseErr=function(){var e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new p.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)},t.prototype.setChannelSerial=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)},t}(a.default);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r,o){this.previous=e,this.current=t,"attached"===t&&(this.resumed=n,this.hasBacklog=r),o&&(this.reason=o)}},function(e,t,n){var r,o,i,s,a,c,u,l;e.exports=(o=(r=l=n(6)).lib,i=o.WordArray,s=o.Hasher,a=r.algo,c=[],u=a.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var d=(r<<5|r>>>27)+a+c[u];d+=u<20?1518500249+(o&i|~o&s):u<40?1859775393+(o^i^s):u<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514,a=s,s=i,i=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=s._createHelper(u),r.HmacSHA1=s._createHmacHelper(u),l.SHA1)},function(e,t,n){"use strict";function r(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n.charCodeAt(r);if(i<128)e.setUint8(t++,i>>>0&127);else if(i<2048)e.setUint8(t++,i>>>6&31|192),e.setUint8(t++,i>>>0&63|128);else if(i<65536)e.setUint8(t++,i>>>12&15|224),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);else{if(!(i<1114112))throw new Error("bad codepoint "+i);e.setUint8(t++,i>>>18&7|240),e.setUint8(t++,i>>>12&63|128),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128)}}}function o(e,t,n){for(var r="",o=t,i=t+n;o<i;o++){var s=e.getUint8(o);if(128&s)if(192!=(224&s))if(224!=(240&s)){if(240!=(248&s))throw new Error("Invalid byte "+s.toString(16));r+=String.fromCharCode((7&s)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|63&e.getUint8(++o))}else r+=String.fromCharCode((15&s)<<12|(63&e.getUint8(++o))<<6|63&e.getUint8(++o));else r+=String.fromCharCode((15&s)<<6|63&e.getUint8(++o));else r+=String.fromCharCode(s)}return r}function i(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t+=1;else if(o<2048)t+=2;else if(o<65536)t+=3;else{if(!(o<1114112))throw new Error("bad codepoint "+o);t+=4}}return t}Object.defineProperty(t,"__esModule",{value:!0});var s=4294967296,a=1/s,c=function(e,t){var n=this;this.map=function(e){for(var t={},r=0;r<e;r++)t[n.parse()]=n.parse();return t},this.bin=function(e){var t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(n.view.buffer,n.offset,e),0),n.offset+=e,t},this.buf=this.bin,this.str=function(e){var t=o(n.view,n.offset,e);return n.offset+=e,t},this.array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=n.parse();return t},this.ext=function(e){return n.offset+=e,{type:n.view.getInt8(n.offset),data:n.buf(e)}},this.parse=function(){var e,t,r=n.view.getUint8(n.offset);if(!(128&r))return n.offset++,r;if(128==(240&r))return t=15&r,n.offset++,n.map(t);if(144==(240&r))return t=15&r,n.offset++,n.array(t);if(160==(224&r))return t=31&r,n.offset++,n.str(t);if(!(224&~r))return e=n.view.getInt8(n.offset),n.offset++,e;switch(r){case 192:return n.offset++,null;case 193:return void n.offset++;case 194:return n.offset++,!1;case 195:return n.offset++,!0;case 196:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.bin(t);case 197:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.bin(t);case 198:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.bin(t);case 199:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.ext(t);case 200:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.ext(t);case 201:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.ext(t);case 202:return e=n.view.getFloat32(n.offset+1),n.offset+=5,e;case 203:return e=n.view.getFloat64(n.offset+1),n.offset+=9,e;case 204:return e=n.view.getUint8(n.offset+1),n.offset+=2,e;case 205:return e=n.view.getUint16(n.offset+1),n.offset+=3,e;case 206:return e=n.view.getUint32(n.offset+1),n.offset+=5,e;case 207:return e=function(e,t){return t=t||0,e.getUint32(t)*s+e.getUint32(t+4)}(n.view,n.offset+1),n.offset+=9,e;case 208:return e=n.view.getInt8(n.offset+1),n.offset+=2,e;case 209:return e=n.view.getInt16(n.offset+1),n.offset+=3,e;case 210:return e=n.view.getInt32(n.offset+1),n.offset+=5,e;case 211:return e=function(e,t){return t=t||0,e.getInt32(t)*s+e.getUint32(t+4)}(n.view,n.offset+1),n.offset+=9,e;case 212:return t=1,n.offset++,n.ext(t);case 213:return t=2,n.offset++,n.ext(t);case 214:return t=4,n.offset++,n.ext(t);case 215:return t=8,n.offset++,n.ext(t);case 216:return t=16,n.offset++,n.ext(t);case 217:return t=n.view.getUint8(n.offset+1),n.offset+=2,n.str(t);case 218:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.str(t);case 219:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.str(t);case 220:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.array(t);case 221:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.array(t);case 222:return t=n.view.getUint16(n.offset+1),n.offset+=3,n.map(t);case 223:return t=n.view.getUint32(n.offset+1),n.offset+=5,n.map(t)}throw new Error("Unknown type 0x"+r.toString(16))},this.offset=t||0,this.view=e};function u(e,t){return Object.keys(e).filter((function(n){var r=e[n];return!(t&&null==r||"function"==typeof r&&!r.toJSON)}))}function l(e,t,n,o){var s=typeof e;if("string"==typeof e){var c=i(e);if(c<32)return t.setUint8(n,160|c),r(t,n+1,e),1+c;if(c<256)return t.setUint8(n,217),t.setUint8(n+1,c),r(t,n+2,e),2+c;if(c<65536)return t.setUint8(n,218),t.setUint16(n+1,c),r(t,n+3,e),3+c;if(c<4294967296)return t.setUint8(n,219),t.setUint32(n+1,c),r(t,n+5,e),5+c}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var d=e.byteLength;if(d<256)return t.setUint8(n,196),t.setUint8(n+1,d),new Uint8Array(t.buffer).set(new Uint8Array(e),n+2),2+d;if(d<65536)return t.setUint8(n,197),t.setUint16(n+1,d),new Uint8Array(t.buffer).set(new Uint8Array(e),n+3),3+d;if(d<4294967296)return t.setUint8(n,198),t.setUint32(n+1,d),new Uint8Array(t.buffer).set(new Uint8Array(e),n+5),5+d}if("number"==typeof e){if(Math.floor(e)!==e)return t.setUint8(n,203),t.setFloat64(n+1,e),9;if(e>=0){if(e<128)return t.setUint8(n,e),1;if(e<256)return t.setUint8(n,204),t.setUint8(n+1,e),2;if(e<65536)return t.setUint8(n,205),t.setUint16(n+1,e),3;if(e<4294967296)return t.setUint8(n,206),t.setUint32(n+1,e),5;if(e<0x10000000000000000)return t.setUint8(n,207),function(e,t,n){n<0x10000000000000000?(e.setUint32(t,Math.floor(n*a)),e.setInt32(t+4,-1&n)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(t,n+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(n,e),1;if(e>=-128)return t.setUint8(n,208),t.setInt8(n+1,e),2;if(e>=-32768)return t.setUint8(n,209),t.setInt16(n+1,e),3;if(e>=-2147483648)return t.setUint8(n,210),t.setInt32(n+1,e),5;if(e>=-0x8000000000000000)return t.setUint8(n,211),function(e,t,n){n<0x8000000000000000?(e.setInt32(t,Math.floor(n*a)),e.setInt32(t+4,-1&n)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(t,n+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===s)return o?0:(t.setUint8(n,212),t.setUint8(n+1,0),t.setUint8(n+2,0),3);if(null===e)return o?0:(t.setUint8(n,192),1);if("boolean"===s)return t.setUint8(n,e?195:194),1;if("function"==typeof e.toJSON)return l(e.toJSON(),t,n,o);if("object"===s){var p,f=0,h=void 0,g=Array.isArray(e);if((p=g?e.length:(h=u(e,o)).length)<16?(t.setUint8(n,p|(g?144:128)),f=1):p<65536?(t.setUint8(n,g?220:222),t.setUint16(n+1,p),f=3):p<4294967296&&(t.setUint8(n,g?221:223),t.setUint32(n+1,p),f=5),g)for(var m=0;m<p;m++)f+=l(e[m],t,n+f,o);else if(h)for(m=0;m<p;m++){var y=h[m];f+=l(y,t,n+f),f+=l(e[y],t,n+f,o)}return f}if("function"===s)return 0;throw new Error("Unknown type "+s)}function d(e,t){var n=typeof e;if("string"===n){var r=i(e);if(r<32)return 1+r;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var o=e.byteLength;if(o<256)return 2+o;if(o<65536)return 3+o;if(o<4294967296)return 5+o}if("number"==typeof e){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===n)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"==typeof e.toJSON)return d(e.toJSON(),t);if("object"===n){var s,a=0;if(Array.isArray(e)){s=e.length;for(var c=0;c<s;c++)a+=d(e[c],t)}else{var l=u(e,t);for(s=l.length,c=0;c<s;c++){var p=l[c];a+=d(p)+d(e[p],t)}}if(s<16)return 1+a;if(s<65536)return 3+a;if(s<4294967296)return 5+a;throw new Error("Array or object too long 0x"+s.toString(16))}if("function"===n)return 0;throw new Error("Unknown type "+n)}t.default={encode:function(e,t){var n=d(e,t);if(0!==n){var r=new ArrayBuffer(n);return l(e,new DataView(r),0,t),r}},decode:function(e){var t=new DataView(e),n=new c(t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r},inspect:function(e){if(void 0===e)return"undefined";var t,n;if(e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e),!t)return JSON.stringify(e);for(var r=[],o=0;o<e.byteLength;o++){if(o>20){r.push("...");break}var i=t.getUint8(o).toString(16);1===i.length&&(i="0"+i),r.push(i)}return"<"+n+" "+r.join(" ")+">"},utf8Write:r,utf8Read:o,utf8ByteCount:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(30)),i=r.__importDefault(n(50)),s=r.__importDefault(n(3)),a=r.__importDefault(n(55)),c=r.__importDefault(n(57)),u=r.__importDefault(n(62)),l=r.__importDefault(n(64)),d=r.__importDefault(n(68)),p=r.__importDefault(n(2)),f=n(8),h=r.__importDefault(n(65)),g=r.__importDefault(n(66)),m=r.__importDefault(n(41)),y=(0,c.default)(l.default,a.default);s.default.Crypto=y,s.default.BufferUtils=a.default,s.default.Http=u.default,s.default.Config=l.default,s.default.Transports=d.default,s.default.WebStorage=h.default,o.default.Crypto=y,i.default.Crypto=y,p.default.initLogHandlers(),s.default.Defaults=(0,f.getDefaults)(g.default),s.default.Config.agent&&(s.default.Defaults.agent+=" "+s.default.Config.agent),s.default.Config.noUpgrade&&(s.default.Defaults.upgradeTransports=[]),t.default={Rest:o.default,Realtime:i.default,msgpack:m.default}},function(e){e.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.42","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^5.1"},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@types/crypto-js":"^4.0.1","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","async":"ably-forks/async#requirejs","aws-sdk":"^2.1413.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"^2.8.5","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.6.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","null-loader":"^4.0.1","playwright":"^1.10.0","prettier":"^2.5.1","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^4.0.1","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","webpack":"^4.44.2","webpack-cli":"^4.2.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:node:skip-build":"grunt mocha","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","concat":"grunt concat","build":"grunt build:all","build:node":"grunt build:node","build:browser":"grunt build:browser","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')},function(e,t){},function(e,t,n){var r;e.exports=(r=n(6),n(32),n(23),r.HmacSHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(47)),s=r.__importDefault(n(25)),a=r.__importDefault(n(18)),c=r.__importDefault(n(4)),u=r.__importDefault(n(48)),l=function(){},d=function(){function e(e){this.rest=e,this.deviceRegistrations=new p(e),this.channelSubscriptions=new f(e)}return e.prototype.publish=function(e,t,n){var r=this.rest,i=r.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,a=o.defaultPostHeaders(r.options,i),c={},u=o.mixin({recipient:e},t);if("function"!=typeof n){if(this.rest.options.promises)return o.promisify(this,"publish",arguments);n=l}r.options.headers&&o.mixin(a,r.options.headers),r.options.pushFullWait&&o.mixin(c,{fullWait:"true"});var d=o.encodeBody(u,i);s.default.post(r,"/push/publish",d,a,c,null,(function(e){return n(e)}))},e}(),p=function(){function e(e){this.rest=e}return e.prototype.save=function(e,t){var n=this.rest,r=i.default.fromValues(e),a=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,c=o.defaultPostHeaders(n.options,a),u={};if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"save",arguments);t=l}n.options.headers&&o.mixin(c,n.options.headers),n.options.pushFullWait&&o.mixin(u,{fullWait:"true"});var d=o.encodeBody(r,a);s.default.put(n,"/push/deviceRegistrations/"+encodeURIComponent(e.id),d,c,u,null,(function(e,n,r,o){t(e,e?void 0:i.default.fromResponseBody(n,o?void 0:a))}))},e.prototype.get=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,a=o.defaultGetHeaders(n.options,r),u=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"get",arguments);t=l}"string"==typeof u&&u.length?(n.options.headers&&o.mixin(a,n.options.headers),s.default.get(n,"/push/deviceRegistrations/"+encodeURIComponent(u),a,{},null,(function(e,n,o,s){t(e,e?void 0:i.default.fromResponseBody(n,s?void 0:r))}))):t(new c.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,s=this.rest.http.supportsLinkHeaders?void 0:r,c=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"list",arguments);t=l}n.options.headers&&o.mixin(c,n.options.headers),new a.default(n,"/push/deviceRegistrations",c,s,(function(e,t,n){return i.default.fromResponseBody(e,n?void 0:r)})).get(e,t)},e.prototype.remove=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r),a={},u=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"remove",arguments);t=l}"string"==typeof u&&u.length?(n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(a,{fullWait:"true"}),s.default.delete(n,"/push/deviceRegistrations/"+encodeURIComponent(u),i,a,null,(function(e){return t(e)}))):t(new c.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"removeWhere",arguments);t=l}n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),s.default.delete(n,"/push/deviceRegistrations",i,e,null,(function(e){return t(e)}))},e}(),f=function(){function e(t){this.remove=e.prototype.removeWhere,this.rest=t}return e.prototype.save=function(e,t){var n=this.rest,r=u.default.fromValues(e),i=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,a=o.defaultPostHeaders(n.options,i),c={};if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"save",arguments);t=l}n.options.headers&&o.mixin(a,n.options.headers),n.options.pushFullWait&&o.mixin(c,{fullWait:"true"});var d=o.encodeBody(r,i);s.default.post(n,"/push/channelSubscriptions",d,a,c,null,(function(e,n,r,o){t(e,!e&&u.default.fromResponseBody(n,o?void 0:i))}))},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"list",arguments);t=l}n.options.headers&&o.mixin(s,n.options.headers),new a.default(n,"/push/channelSubscriptions",s,i,(function(e,t,n){return u.default.fromResponseBody(e,n?void 0:r)})).get(e,t)},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"removeWhere",arguments);t=l}n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),s.default.delete(n,"/push/channelSubscriptions",i,e,null,(function(e){return t(e)}))},e.prototype.listChannels=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,s=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"listChannels",arguments);t=l}n.options.headers&&o.mixin(s,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),new a.default(n,"/push/channels",s,i,(function(e,t,n){for(var i=!n&&r?o.decodeBody(e,r):e,s=0;s<i.length;s++)i[s]=String(i[s]);return i})).get(e,t)},e}();t.default=function(e){this.rest=e,this.admin=new d(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(0),s=i.__importStar(n(1)),a=i.__importDefault(n(4));!function(e){e.Phone="phone",e.Tablet="tablet",e.Desktop="desktop",e.TV="tv",e.Watch="watch",e.Car="car",e.Embedded="embedded",e.Other="other"}(r||(r={})),function(e){e.Android="android",e.IOS="ios",e.Browser="browser"}(o||(o={}));var c=function(){function e(){}return e.prototype.toJSON=function(){var e,t,n;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null===(e=this.push)||void 0===e?void 0:e.recipient,state:null===(t=this.push)||void 0===t?void 0:t.state,error:null===(n=this.push)||void 0===n?void 0:n.error}}},e.prototype.toString=function(){var e,t,n,r,o="[DeviceDetails";return this.id&&(o+="; id="+this.id),this.platform&&(o+="; platform="+this.platform),this.formFactor&&(o+="; formFactor="+this.formFactor),this.clientId&&(o+="; clientId="+this.clientId),this.metadata&&(o+="; metadata="+this.metadata),this.deviceIdentityToken&&(o+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null===(e=this.push)||void 0===e?void 0:e.recipient)&&(o+="; push.recipient="+JSON.stringify(this.push.recipient)),(null===(t=this.push)||void 0===t?void 0:t.state)&&(o+="; push.state="+this.push.state),(null===(n=this.push)||void 0===n?void 0:n.error)&&(o+="; push.error="+JSON.stringify(this.push.error)),(null===(r=this.push)||void 0===r?void 0:r.metadata)&&(o+="; push.metadata="+this.push.metadata),o+"]"},e.fromResponseBody=function(t,n){return n&&(t=s.decodeBody(t,n)),s.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return t.error=t.error&&a.default.fromValues(t.error),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.toRequestBody=s.encodeBody,e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),o=function(){function e(){}return e.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},e.prototype.toString=function(){var e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+"]"},e.fromResponseBody=function(t,n){return n&&(t=r.decodeBody(t,n)),r.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=new Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.toRequestBody=r.encodeBody,e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=function(e){this.count=e&&e.count||0,this.data=e&&e.data||0,this.uncompressedData=e&&e.uncompressedData||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},s=function(e){function t(t){var n=e.call(this,t)||this;return t&&t.category&&(n.category={},o.forInOwnNonNullProperties(t.category,(function(e){n.category[e]=new i(t.category[e])}))),n}return r.__extends(t,e),t}(i),a=function(e){this.peak=e&&e.peak||0,this.min=e&&e.min||0,this.mean=e&&e.mean||0,this.opened=e&&e.opened||0,this.refused=e&&e.refused||0},c=function(e){this.succeeded=e&&e.succeeded||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},u=function(e){this.plain=new a(e&&e.plain),this.tls=new a(e&&e.tls),this.all=new a(e&&e.all)},l=function(e){this.messages=new s(e&&e.messages),this.presence=new s(e&&e.presence),this.all=new s(e&&e.all)},d=function(e){this.realtime=new l(e&&e.realtime),this.rest=new l(e&&e.rest),this.webhook=new l(e&&e.webhook),this.sharedQueue=new l(e&&e.sharedQueue),this.externalQueue=new l(e&&e.externalQueue),this.httpEvent=new l(e&&e.httpEvent),this.push=new l(e&&e.push),this.all=new l(e&&e.all)},p=function(e){this.all=new l(e&&e.all),this.inbound=new d(e&&e.inbound),this.outbound=new d(e&&e.outbound)},f=function(e){this.all=new l(e&&e.all),this.producerPaid=new p(e&&e.producerPaid),this.consumerPaid=new p(e&&e.consumerPaid)},h=function(e){this.messages=e&&e.messages||0;var t=e&&e.notifications;this.notifications={invalid:t&&t.invalid||0,attempted:t&&t.attempted||0,successful:t&&t.successful||0,failed:t&&t.failed||0},this.directPublishes=e&&e.directPublishes||0},g=function(e){this.succeeded=e&&e.succeeded||0,this.skipped=e&&e.skipped||0,this.failed=e&&e.failed||0},m=function(e){var t=this;this.delta=void 0,e&&e.delta&&(this.delta={},o.forInOwnNonNullProperties(e.delta,(function(n){t.delta[n]=new g(e.delta[n])})))},y=function(e){function t(t){var n=e.call(this,t)||this;return n.persisted=new l(t&&t.persisted),n.connections=new u(t&&t.connections),n.channels=new a(t&&t.channels),n.apiRequests=new c(t&&t.apiRequests),n.tokenRequests=new c(t&&t.tokenRequests),n.xchgProducer=new f(t&&t.xchgProducer),n.xchgConsumer=new f(t&&t.xchgConsumer),n.push=new h(t&&t.pushStats),n.processed=new m(t&&t.processed),n.inProgress=t&&t.inProgress||void 0,n.unit=t&&t.unit||void 0,n.intervalId=t&&t.intervalId||void 0,n}return r.__extends(t,e),t.fromValues=function(e){return new t(e)},t}(p);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(30)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(51)),u=r.__importDefault(n(38)),l=r.__importDefault(n(8)),d=r.__importDefault(n(4)),p=r.__importDefault(n(10)),f=r.__importDefault(n(35)),h=r.__importDefault(n(3)),g=r.__importDefault(n(9)),m=function(e){function t(t){var n=e.call(this,t)||this;return a.default.logAction(a.default.LOG_MINOR,"Realtime()",""),n.connection=new c.default(n,n.options),n.channels=new y(n),!1!==t.autoConnect&&n.connect(),n}return r.__extends(t,e),t.prototype.connect=function(){a.default.logAction(a.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},t.prototype.close=function(){a.default.logAction(a.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},t.Promise=function(e){return(e=l.default.objectifyOptions(e)).promises=!0,new t(e)},t.Callbacks=t,t.Utils=o,t.ConnectionManager=f.default,t.Platform=h.default,t.ProtocolMessage=p.default,t.Message=g.default,t}(i.default),y=function(e){function t(t){var n=e.call(this)||this;return n.realtime=t,n.all=Object.create(null),t.connection.connectionManager.on("transport.active",(function(){n.onTransportActive()})),n}return r.__extends(t,e),t.prototype.channelSerials=function(){for(var e={},t=0,n=o.keysArray(this.all,!0);t<n.length;t++){var r=n[t],i=this.all[r];i.properties.channelSerial&&(e[r]=i.properties.channelSerial)}return e},t.prototype.recoverChannels=function(e){for(var t=0,n=o.keysArray(e,!0);t<n.length;t++){var r=n[t];this.get(r).properties.channelSerial=e[r]}},t.prototype.onChannelMessage=function(e){var t=e.channel;if(void 0!==t){var n=this.all[t];n?n.onMessage(e):a.default.logAction(a.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+t)}else a.default.logAction(a.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+e.action)},t.prototype.onTransportActive=function(){for(var e in this.all){var t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&t.requestState("attaching")}},t.prototype.propogateConnectionInterruption=function(e,t){var n=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(var i in this.all){var s=this.all[i];o.arrIn(n,s.state)&&s.notifyState(r,t)}},t.prototype.get=function(e,t){e=String(e);var n=this.all[e];if(n){if(t){if(n._shouldReattachToSetOptions(t))throw new d.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);n.setOptions(t)}}else n=this.all[e]=new u.default(this.realtime,e,t);return n},t.prototype.getDerived=function(e,t,n){if(t.filter){var r=o.toBase64(t.filter),i=o.matchDerivedChannel(e);e="[filter=".concat(r).concat(i.qualifierParam,"]").concat(i.channelName)}return this.get(e,n)},t.prototype.release=function(e){e=String(e);var t=this.all[e];if(t){var n=t.getReleaseErr();if(n)throw n;delete this.all[e]}},t}(s.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),s=r.__importDefault(n(35)),a=r.__importDefault(n(2)),c=r.__importDefault(n(37)),u=r.__importDefault(n(3));function l(){}var d=function(e){function t(t,n){var r=e.call(this)||this;return r.whenState=function(e,t){return i.default.prototype.whenState.call(r,e,r.state,t,new c.default(void 0,e))},r.ably=t,r.connectionManager=new s.default(t,n),r.state=r.connectionManager.state.state,r.key=void 0,r.id=void 0,r.errorReason=null,r.connectionManager.on("connectionstate",(function(e){var t=r.state=e.current;u.default.Config.nextTick((function(){r.emit(t,e)}))})),r.connectionManager.on("update",(function(e){u.default.Config.nextTick((function(){r.emit("update",e)}))})),r}return r.__extends(t,e),t.prototype.connect=function(){a.default.logAction(a.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},t.prototype.ping=function(e){if(a.default.logAction(a.default.LOG_MINOR,"Connection.ping()",""),!e){if(this.ably.options.promises)return o.promisify(this,"ping",arguments);e=l}this.connectionManager.ping(null,e)},t.prototype.close=function(){a.default.logAction(a.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(t.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),t.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},t}(i.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingMessage=void 0;var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(36)),u=r.__importDefault(n(4)),l=o.default.Action;t.PendingMessage=function(e,t){this.message=e,this.callback=t,this.merged=!1;var n=e.action;this.sendAttempted=!1,this.ackRequired=n==l.MESSAGE||n==l.PRESENCE};var d=function(e){function t(t){var n=e.call(this)||this;return n.transport=t,n.messageQueue=new c.default,t.on("ack",(function(e,t){n.onAck(e,t)})),t.on("nack",(function(e,t,r){n.onNack(e,t,r)})),n}return r.__extends(t,e),t.prototype.onAck=function(e,t){a.default.logAction(a.default.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages(e,t)},t.prototype.onNack=function(e,t,n){a.default.logAction(a.default.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+i.inspectError(n)),n||(n=new u.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(e,t,n)},t.prototype.onceIdle=function(e){var t=this.messageQueue;0!==t.count()?t.once("idle",e):e()},t.prototype.send=function(e){e.ackRequired&&this.messageQueue.push(e),a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Protocol.send()","sending msg; "+o.default.stringify(e.message)),e.sendAttempted=!0,this.transport.send(e.message)},t.prototype.getTransport=function(){return this.transport},t.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},t.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},t.prototype.finish=function(){var e=this.transport;this.onceIdle((function(){e.disconnect()}))},t}(s.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),s=r.__importDefault(n(26)),a=r.__importDefault(n(8)),c=r.__importDefault(n(2)),u=r.__importDefault(n(10)),l=r.__importDefault(n(4)),d="web_socket",p=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.shortName=d,r.heartbeats=o.default.Config.useProtocolHeartbeats,i.wsHost=a.default.getHost(r.options,r.host,!0),i}return r.__extends(t,e),t.isAvailable=function(){return!!o.default.Config.WebSocket},t.prototype.createWebSocket=function(e,t){return this.uri=e+i.toQueryString(t),new o.default.Config.WebSocket(this.uri)},t.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},t.prototype.connect=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),s.default.prototype.connect.call(this);var e=this,t=this.params,n=t.options,r=(n.tls?"wss://":"ws://")+this.wsHost+":"+a.default.getPort(n)+"/";c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+r),this.auth.getAuthParams((function(n,i){if(!e.isDisposed){var s="";for(var a in i)s+=" "+a+": "+i[a]+";";if(c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+s+" err: "+n),n)e.disconnect(n);else{var u=t.getConnectParams(i);try{var l=e.wsConnection=e.createWebSocket(r,u);l.binaryType=o.default.Config.binaryType,l.onopen=function(){e.onWsOpen()},l.onclose=function(t){e.onWsClose(t)},l.onmessage=function(t){e.onWsData(t.data)},l.onerror=function(t){e.onWsError(t)},l.on&&l.on("ping",(function(){e.onActivity()}))}catch(t){c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(t.stack||t.message)),e.disconnect(t)}}}}))},t.prototype.send=function(e){var t=this.wsConnection;if(t)try{t.send(u.default.serialize(e,this.params.format))}catch(e){var n="Exception from ws connection when trying to send: "+i.inspectError(e);c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.send()",n),this.finish("disconnected",new l.default(n,5e4,500))}else c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection")},t.prototype.onWsData=function(e){c.default.logAction(c.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage(u.default.deserialize(e,this.format))}catch(e){c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+e.stack)}},t.prototype.onWsOpen=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},t.prototype.onWsClose=function(e){var t,n;if("object"==typeof e?(n=e.code,t=e.wasClean||1e3===n):t=1e3==(n=e),delete this.wsConnection,t){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var r=new l.default("Websocket closed",80003,400);this.finish("disconnected",r)}else{var o="Unclean disconnection of WebSocket ; code = "+n;r=new l.default(o,80003,400),c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsClose()",o),this.finish("disconnected",r)}this.emit("disposed")},t.prototype.onWsError=function(e){var t=this;c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),o.default.Config.nextTick((function(){t.disconnect(Error(e.message))}))},t.prototype.dispose=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,o.default.Config.nextTick((function(){if(c.default.logAction(c.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()})))},t}(s.default);t.default=function(e){return p.isAvailable()&&(e.supportedTransports[d]=p),p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(34)),s=r.__importDefault(n(7)),a=r.__importDefault(n(2)),c=r.__importDefault(n(14)),u=r.__importStar(n(4)),l=r.__importDefault(n(38)),d=r.__importDefault(n(22)),p=r.__importDefault(n(39)),f=function(){};function h(e){var t=e.channel.realtime,n=t.auth.clientId;return(!n||"*"===n)&&"connected"===t.connection.state}function g(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;var n=e.parseId(),r=t.parseId();return n.msgSerial===r.msgSerial?n.index>r.index:n.msgSerial>r.msgSerial}var m=function(e){function t(t){var n=e.call(this,t)||this;return n.channel=t,n.syncComplete=!1,n.members=new y(n,(function(e){return e.clientId+":"+e.connectionId})),n._myMembers=new y(n,(function(e){return e.clientId})),n.subscriptions=new s.default,n.pendingPresence=[],n}return r.__extends(t,e),t.prototype.enter=function(e,t){if(h(this))throw new u.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter",t)},t.prototype.update=function(e,t){if(h(this))throw new u.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update",t)},t.prototype.enterClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"enter",n)},t.prototype.updateClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"update",n)},t.prototype._enterOrUpdateClient=function(e,t,n,r,i){var s=this;if(!i)if("function"==typeof n)i=n,n=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"_enterOrUpdateClient",[e,t,n,r]);i=f}var l=this.channel;if(l.connectionManager.activeState()){a.default.logAction(a.default.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+l.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.realtime.auth.clientId));var d=c.default.fromValues({action:r,data:n});e&&(d.id=e),t&&(d.clientId=t),c.default.encode(d,l.channelOptions,(function(e){if(e)i(e);else switch(l.state){case"attached":l.sendPresence(d,i);break;case"initialized":case"detached":l.attach();case"attaching":s.pendingPresence.push({presence:d,callback:i});break;default:(e=new u.PartialErrorInfo("Unable to "+r+" presence channel while in "+l.state+" state",90001)).code=90001,i(e)}}))}else i(l.connectionManager.getError())},t.prototype.leave=function(e,t){if(h(this))throw new u.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e,t)},t.prototype.leaveClient=function(e,t,n){if(!n)if("function"==typeof t)n=t,t=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"leaveClient",[e,t]);n=f}var r=this.channel;if(r.connectionManager.activeState()){a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);var i=c.default.fromValues({action:"leave",data:t});switch(e&&(i.clientId=e),r.state){case"attached":r.sendPresence(i,n);break;case"attaching":this.pendingPresence.push({presence:i,callback:n});break;case"initialized":case"failed":var s=new u.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);null==n||n(s);break;default:null==n||n(r.invalidStateError())}}else null==n||n(r.connectionManager.getError())},t.prototype.get=function(e,t){var n=this,r=Array.prototype.slice.call(arguments);1==r.length&&"function"==typeof r[0]&&r.unshift(null),e=r[0],t=r[1];var i=!e||!("waitForSync"in e)||e.waitForSync;if(!t){if(this.channel.realtime.options.promises)return o.promisify(this,"get",r);t=f}function s(n){t(null,e?n.list(e):n.values())}"suspended"!==this.channel.state?function(e,t,n){switch(e.state){case"attached":case"suspended":n();break;case"initialized":case"detached":case"detaching":case"attaching":e.attach((function(e){e?t(e):n()}));break;default:t(u.default.fromValues(e.invalidStateError()))}}(this.channel,t,(function(){var e=n.members;i?e.waitSync((function(){s(e)})):s(e)})):i?t(u.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):s(this.members)},t.prototype.history=function(e,t){if(a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"history",arguments);t=f}e&&e.untilAttach&&("attached"===this.channel.state?(delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial):t(new u.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),i.default.prototype._history.call(this,e,t)},t.prototype.setPresence=function(e,t,n){var r,o;a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+n);var i=this.members,s=this._myMembers,u=[],l=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),n&&(o=n.match(/^[\w-]+:(.*)$/))&&(r=o[1]));for(var d=0;d<e.length;d++)switch((p=c.default.fromValues(e[d])).action){case"leave":i.remove(p)&&u.push(p),p.connectionId!==l||p.isSynthesized()||s.remove(p);break;case"enter":case"present":case"update":i.put(p)&&u.push(p),p.connectionId===l&&s.put(p)}for(t&&!r&&(i.endSync(),this.channel.syncChannelSerial=null),d=0;d<u.length;d++){var p=u[d];this.subscriptions.emit(p.action,p)}},t.prototype.onAttached=function(e){a.default.logAction(a.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var t=this.pendingPresence,n=t.length;if(n){this.pendingPresence=[];var r=[],o=d.default.create();a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+n+" queued presence messages");for(var i=0;i<n;i++){var s=t[i];r.push(s.presence),o.push(s.callback)}this.channel.sendPresence(r,o)}},t.prototype.actOnChannelState=function(e,t,n){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(n)}},t.prototype.failPendingPresence=function(e){if(this.pendingPresence.length){a.default.logAction(a.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+o.inspectError(e));for(var t=0;t<this.pendingPresence.length;t++)try{this.pendingPresence[t].callback(e)}catch(e){}this.pendingPresence=[]}},t.prototype._clearMyMembers=function(){this._myMembers.clear()},t.prototype._ensureMyMembersPresent=function(){var e=this,t=this._myMembers,n=function(t){if(t){var n="Presence auto-re-enter failed: "+t.toString(),r=new u.default(n,91004,400);a.default.logAction(a.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",n);var o=new p.default(e.channel.state,e.channel.state,!0,!1,r);e.channel.emit("update",o)}};for(var r in t.map){var o=t.map[r];a.default.logAction(a.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+o.clientId+'" into the presence set'),this._enterOrUpdateClient(o.id,o.clientId,o.data,"enter",n)}},t.prototype._synthesizeLeaves=function(e){var t=this.subscriptions;o.arrForEach(e,(function(e){var n=c.default.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:o.now()});t.emit("leave",n)}))},t.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.deprecated("presence.on","presence.subscribe"),this.subscribe.apply(this,e)},t.prototype.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.deprecated("presence.off","presence.unsubscribe"),this.unsubscribe.apply(this,e)},t.prototype.subscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=l.default.processListenerArgs(e),r=n[0],i=n[1],s=n[2],a=this.channel;if(!s){if(this.channel.realtime.options.promises)return o.promisify(this,"subscribe",[r,i]);s=f}"failed"!==a.state?(this.subscriptions.on(r,i),a.attach(s)):s(u.default.fromValues(a.invalidStateError()))},t.prototype.unsubscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=l.default.processListenerArgs(e),r=n[0],o=n[1];this.subscriptions.off(r,o)},t}(i.default),y=function(e){function t(t,n){var r=e.call(this)||this;return r.presence=t,r.map=Object.create(null),r.syncInProgress=!1,r.residualMembers=null,r.memberKey=n,r}return r.__extends(t,e),t.prototype.get=function(e){return this.map[e]},t.prototype.getClient=function(e){var t=this.map,n=[];for(var r in t){var o=t[r];o.clientId==e&&"absent"!=o.action&&n.push(o)}return n},t.prototype.list=function(e){var t=this.map,n=e&&e.clientId,r=e&&e.connectionId,o=[];for(var i in t){var s=t[i];"absent"!==s.action&&(n&&n!=s.clientId||r&&r!=s.connectionId||o.push(s))}return o},t.prototype.put=function(e){"enter"!==e.action&&"update"!==e.action||((e=c.default.fromValues(e)).action="present");var t=this.map,n=this.memberKey(e);this.residualMembers&&delete this.residualMembers[n];var r=t[n];return!(r&&!g(e,r)||(t[n]=e,0))},t.prototype.values=function(){var e=this.map,t=[];for(var n in e){var r=e[n];"absent"!=r.action&&t.push(r)}return t},t.prototype.remove=function(e){var t=this.map,n=this.memberKey(e),r=t[n];return!(r&&!g(e,r)||(this.syncInProgress?((e=c.default.fromValues(e)).action="absent",t[n]=e):delete t[n],0))},t.prototype.startSync=function(){var e=this.map,t=this.syncInProgress;a.default.logAction(a.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=o.copy(e),this.setInProgress(!0))},t.prototype.endSync=function(){var e=this.map,t=this.syncInProgress;if(a.default.logAction(a.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(var n in e)"absent"===e[n].action&&delete e[n];for(var n in this.presence._synthesizeLeaves(o.valuesArray(this.residualMembers)),this.residualMembers)delete e[n];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},t.prototype.waitSync=function(e){var t=this.syncInProgress;a.default.logAction(a.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t?this.once("sync",e):e()},t.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},t.prototype.setInProgress=function(e){a.default.logAction(a.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e},t}(s.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(56),i=n(31),s=n(11),a=r.__importDefault(n(5)),c=r.__importDefault(n(3)),u=function(){function e(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return e.prototype.isWordArray=function(e){return null!=e&&void 0!==e.sigBytes},e.prototype.isArrayBuffer=function(e){return null!=e&&e.constructor===ArrayBuffer},e.prototype.isTypedArray=function(e){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)},e.prototype.uint8ViewToBase64=function(e){for(var t,n,r,o,i="",s=this.base64CharSet,a=e.byteLength,c=a%3,u=a-c,l=0;l<u;l+=3)t=(258048&(o=e[l]<<16|e[l+1]<<8|e[l+2]))>>12,n=(4032&o)>>6,r=63&o,i+=s[(16515072&o)>>18]+s[t]+s[n]+s[r];return 1==c?(t=(3&(o=e[u]))<<4,i+=s[(252&o)>>2]+s[t]+"=="):2==c&&(t=(1008&(o=e[u]<<8|e[u+1]))>>4,n=(15&o)<<2,i+=s[(64512&o)>>10]+s[t]+s[n]+"="),i},e.prototype.base64ToArrayBuffer=function(e){for(var t=null===atob||void 0===atob?void 0:atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++){var i=t.charCodeAt(o);r[o]=i}return r.buffer},e.prototype.isBuffer=function(e){return this.isArrayBuffer(e)||this.isWordArray(e)||this.isTypedArray(e)},e.prototype.toBuffer=function(e){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(e))return new Uint8Array(e);if(this.isTypedArray(e))return new Uint8Array(e.buffer);if(this.isWordArray(e)){for(var t=new ArrayBuffer(e.sigBytes),n=new Uint8Array(t),r=0;r<e.sigBytes;r++)n[r]=e.words[r>>>2]>>>24-r%4*8&255;return n}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},e.prototype.toArrayBuffer=function(e){return this.isArrayBuffer(e)?e:this.toBuffer(e).buffer},e.prototype.toWordArray=function(e){return this.isTypedArray(e)&&(e=e.buffer),this.isWordArray(e)?e:a.default.create(e)},e.prototype.base64Encode=function(e){return this.isWordArray(e)?(0,s.stringify)(e):this.uint8ViewToBase64(this.toBuffer(e))},e.prototype.base64Decode=function(e){return ArrayBuffer&&c.default.Config.atob?this.base64ToArrayBuffer(e):(0,s.parse)(e)},e.prototype.hexEncode=function(e){return(0,o.stringify)(this.toWordArray(e))},e.prototype.hexDecode=function(e){var t=(0,o.parse)(e);return ArrayBuffer?this.toArrayBuffer(t):t},e.prototype.utf8Encode=function(e){return c.default.Config.TextEncoder?(new c.default.Config.TextEncoder).encode(e).buffer:(0,i.parse)(e)},e.prototype.utf8Decode=function(e){if(!this.isBuffer(e))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(e)?(new TextDecoder).decode(e):(e=this.toWordArray(e),(0,i.stringify)(e))},e.prototype.bufferCompare=function(e,t){if(!e)return-1;if(!t)return 1;var n=this.toWordArray(e),r=this.toWordArray(t);n.clamp(),r.clamp();var o=n.sigBytes-r.sigBytes;if(0!=o)return o;for(var i=n.words,s=r.words,a=0;a<i.length;a++)if(0!=(o=i[a]-s[a]))return o;return 0},e.prototype.byteLength=function(e){return this.isArrayBuffer(e)||this.isTypedArray(e)?e.byteLength:this.isWordArray(e)?e.sigBytes:-1},e.prototype.typedArrayToBuffer=function(e){return e.buffer},e}();t.default=new u},function(e,t,n){e.exports=n(6).enc.Hex},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(11),s=n(21),a=n.n(s),c=n(2),u=n.n(c),l=n(4),d=n.n(l);t.default=function(e,t){var n;if(e.getRandomWordArray)n=e.getRandomWordArray;else if("undefined"!=typeof Uint32Array&&e.getRandomValues){var r=new Uint32Array(4);n=function(n,o){var i=n/4,s=4==i?r:new Uint32Array(i);e.getRandomValues(s,(function(e){void 0!==o&&o(e,t.toWordArray(s))}))}}else n=function(e,t){u.a.logAction(u.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var n=e/4,r=new Array(n),i=0;i<n;i++)r[i]=Math.floor(4294967296*Math.random())-2147483648;t(null,o.a.create(r))};var s=[o.a.create([269488144,269488144,269488144,269488144],16),o.a.create([16777216],1),o.a.create([33685504],2),o.a.create([50529024],3),o.a.create([67372036],4),o.a.create([84215045,83886080],5),o.a.create([101058054,101056512],6),o.a.create([117901063,117901056],7),o.a.create([134744072,134744072],8),o.a.create([151587081,151587081,150994944],9),o.a.create([168430090,168430090,168427520],10),o.a.create([185273099,185273099,185273088],11),o.a.create([202116108,202116108,202116108],12),o.a.create([218959117,218959117,218959117,218103808],13),o.a.create([235802126,235802126,235802126,235798528],14),o.a.create([252645135,252645135,252645135,252645135],15),o.a.create([269488144,269488144,269488144,269488144],16)];function c(){}function l(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}function p(e,n,r){this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.cjsAlgorithm=e.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=t.toWordArray(e.key),r&&(this.iv=t.toWordArray(r).clone()),this.blockLengthWords=n}return c.CipherParams=l,c.getDefaultParams=function(e){var n;if("function"!=typeof e&&"string"!=typeof e){if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");n="string"==typeof e.key?Object(i.parse)(e.key.replace("_","/").replace("-","+")):t.toWordArray(e.key);var r=new l;if(r.key=n,r.algorithm=e.algorithm||"aes",r.keyLength=32*n.words.length,r.mode=e.mode||"cbc",e.keyLength&&e.keyLength!==r.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+r.keyLength);return function(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}(r),r}if(u.a.deprecated("Crypto.getDefaultParams(key, callback)","Crypto.getDefaultParams({key: key})"),"function"==typeof e)c.generateRandomKey((function(t){e(null,c.getDefaultParams({key:t}))}));else{if("function"!=typeof arguments[1])throw new Error("Invalid arguments for Crypto.getDefaultParams");arguments[1](null,c.getDefaultParams({key:e}))}},c.generateRandomKey=function(e,t){1==arguments.length&&"function"==typeof e&&(t=e,e=void 0),n((e||256)/8,(function(e,n){void 0!==t&&t(e?d.a.fromValues(e):null,n)}))},c.getCipher=function(e){var t=e instanceof l?e:c.getDefaultParams(e);return{cipherParams:t,cipher:new p(t,4,e.iv)}},p.prototype.encrypt=function(e,r){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.encrypt()","");var o=(e=t.toWordArray(e)).sigBytes,i=function(e){return e+16&-16}(o),c=this,l=function(){c.getIv((function(t,n){if(t)r(t);else{var a=c.encryptCipher.process(e.concat(s[i-o])),u=n.concat(a);r(null,u)}}))};this.encryptCipher?l():this.iv?(this.encryptCipher=a.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),l()):n(16,(function(e,t){e?r(e):(c.encryptCipher=a.a.algo[c.cjsAlgorithm].createEncryptor(c.key,{iv:t}),c.iv=t,l())}))},p.prototype.decrypt=function(e){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.decrypt()",""),e=t.toWordArray(e);var n=this.blockLengthWords,r=e.words,i=o.a.create(r.slice(0,n)),s=o.a.create(r.slice(n)),c=a.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:i}),l=c.process(s),d=c.finalize();return c.reset(),d&&d.sigBytes&&l.concat(d),l},p.prototype.getIv=function(e){if(this.iv){var t=this.iv;return this.iv=null,void e(null,t)}var r=this;n(16,(function(t,n){t?e(t):e(null,r.encryptCipher.process(n))}))},c}},function(e,t,n){var r;e.exports=(r=n(6),function(){var e=r,t=e.lib.WordArray,n=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var s=o(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return t.create(r,2*n)}}}(),r.enc.Utf16)},function(e,t,n){var r,o,i,s;e.exports=(s=n(6),n(28),o=(r=s).lib.CipherParams,i=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return o.create({ciphertext:t})}},s.format.Hex)},function(e,t,n){var r;e.exports=(r=n(6),n(11),n(61),n(27),n(28),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,o=[],i=[],s=[],a=[],c=[],u=[],l=[],d=[],p=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var h=r^r<<1^r<<2^r<<3^r<<4;h=h>>>8^255&h^99,o[n]=h,i[h]=n;var g=e[n],m=e[g],y=e[m],v=257*e[h]^16843008*h;s[n]=v<<24|v>>>8,a[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,u[n]=v,v=16843009*y^65537*m^257*g^16843008*n,l[h]=v<<24|v>>>8,d[h]=v<<16|v>>>16,p[h]=v<<8|v>>>24,f[h]=v,n?(n=g^e[e[e[y^g]]],r^=e[e[r]]):n=r=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],s=0;s<r;s++)s<n?i[s]=t[s]:(u=i[s-1],s%n?n>6&&s%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=h[s/n|0]<<24),i[s]=i[s-n]^u);for(var a=this._invKeySchedule=[],c=0;c<r;c++){if(s=r-c,c%4)var u=i[s];else u=i[s-4];a[c]=c<4||s<=4?u:l[o[u>>>24]]^d[o[u>>>16&255]]^p[o[u>>>8&255]]^f[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,d,p,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,s,a){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],d=e[t+2]^n[2],p=e[t+3]^n[3],f=4,h=1;h<c;h++){var g=r[u>>>24]^o[l>>>16&255]^i[d>>>8&255]^s[255&p]^n[f++],m=r[l>>>24]^o[d>>>16&255]^i[p>>>8&255]^s[255&u]^n[f++],y=r[d>>>24]^o[p>>>16&255]^i[u>>>8&255]^s[255&l]^n[f++],v=r[p>>>24]^o[u>>>16&255]^i[l>>>8&255]^s[255&d]^n[f++];u=g,l=m,d=y,p=v}g=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&p])^n[f++],m=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[p>>>8&255]<<8|a[255&u])^n[f++],y=(a[d>>>24]<<24|a[p>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[f++],v=(a[p>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^n[f++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(g)}(),r.AES)},function(e,t,n){var r;e.exports=(r=n(6),function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],h=e[t+3],g=e[t+4],m=e[t+5],y=e[t+6],v=e[t+7],_=e[t+8],S=e[t+9],E=e[t+10],b=e[t+11],T=e[t+12],w=e[t+13],C=e[t+14],R=e[t+15],O=i[0],I=i[1],M=i[2],A=i[3];O=u(O,I,M,A,s,7,a[0]),A=u(A,O,I,M,c,12,a[1]),M=u(M,A,O,I,f,17,a[2]),I=u(I,M,A,O,h,22,a[3]),O=u(O,I,M,A,g,7,a[4]),A=u(A,O,I,M,m,12,a[5]),M=u(M,A,O,I,y,17,a[6]),I=u(I,M,A,O,v,22,a[7]),O=u(O,I,M,A,_,7,a[8]),A=u(A,O,I,M,S,12,a[9]),M=u(M,A,O,I,E,17,a[10]),I=u(I,M,A,O,b,22,a[11]),O=u(O,I,M,A,T,7,a[12]),A=u(A,O,I,M,w,12,a[13]),M=u(M,A,O,I,C,17,a[14]),O=l(O,I=u(I,M,A,O,R,22,a[15]),M,A,c,5,a[16]),A=l(A,O,I,M,y,9,a[17]),M=l(M,A,O,I,b,14,a[18]),I=l(I,M,A,O,s,20,a[19]),O=l(O,I,M,A,m,5,a[20]),A=l(A,O,I,M,E,9,a[21]),M=l(M,A,O,I,R,14,a[22]),I=l(I,M,A,O,g,20,a[23]),O=l(O,I,M,A,S,5,a[24]),A=l(A,O,I,M,C,9,a[25]),M=l(M,A,O,I,h,14,a[26]),I=l(I,M,A,O,_,20,a[27]),O=l(O,I,M,A,w,5,a[28]),A=l(A,O,I,M,f,9,a[29]),M=l(M,A,O,I,v,14,a[30]),O=d(O,I=l(I,M,A,O,T,20,a[31]),M,A,m,4,a[32]),A=d(A,O,I,M,_,11,a[33]),M=d(M,A,O,I,b,16,a[34]),I=d(I,M,A,O,C,23,a[35]),O=d(O,I,M,A,c,4,a[36]),A=d(A,O,I,M,g,11,a[37]),M=d(M,A,O,I,v,16,a[38]),I=d(I,M,A,O,E,23,a[39]),O=d(O,I,M,A,w,4,a[40]),A=d(A,O,I,M,s,11,a[41]),M=d(M,A,O,I,h,16,a[42]),I=d(I,M,A,O,y,23,a[43]),O=d(O,I,M,A,S,4,a[44]),A=d(A,O,I,M,T,11,a[45]),M=d(M,A,O,I,R,16,a[46]),O=p(O,I=d(I,M,A,O,f,23,a[47]),M,A,s,6,a[48]),A=p(A,O,I,M,v,10,a[49]),M=p(M,A,O,I,C,15,a[50]),I=p(I,M,A,O,m,21,a[51]),O=p(O,I,M,A,T,6,a[52]),A=p(A,O,I,M,h,10,a[53]),M=p(M,A,O,I,E,15,a[54]),I=p(I,M,A,O,c,21,a[55]),O=p(O,I,M,A,_,6,a[56]),A=p(A,O,I,M,R,10,a[57]),M=p(M,A,O,I,y,15,a[58]),I=p(I,M,A,O,w,21,a[59]),O=p(O,I,M,A,g,6,a[60]),A=p(A,O,I,M,b,10,a[61]),M=p(M,A,O,I,f,15,a[62]),I=p(I,M,A,O,S,21,a[63]),i[0]=i[0]+O|0,i[1]=i[1]+I|0,i[2]=i[2]+M|0,i[3]=i[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var i=e.floor(r/4294967296),s=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,o,i,s){var a=e+(t&n|~t&r)+o+s;return(a<<i|a>>>32-i)+t}function l(e,t,n,r,o,i,s){var a=e+(t&r|n&~r)+o+s;return(a<<i|a>>>32-i)+t}function d(e,t,n,r,o,i,s){var a=e+(t^n^r)+o+s;return(a<<i|a>>>32-i)+t}function p(e,t,n,r,o,i,s){var a=e+(n^(t|~r))+o+s;return(a<<i|a>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),r.MD5)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=o.__importDefault(n(3)),s=o.__importStar(n(1)),a=o.__importDefault(n(8)),c=n(4),u=o.__importDefault(n(17)),l=o.__importDefault(n(15)),d=o.__importDefault(n(20)),p=o.__importDefault(n(2)),f=n(29),h=o.__importDefault(n(63)),g=n(24);function m(e){var t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}function y(e){var t=e.connection,n=t&&t.connectionManager.host;return n?[n].concat(a.default.getFallbackHosts(e.options)):a.default.getHosts(e.options)}var v=(r=function(){function e(e){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=y,this.options=e||{};var t=this.options.connectivityCheckUrl||a.default.connectivityCheckUrl,n=this.options.connectivityCheckParams,r=!this.options.connectivityCheckUrl;i.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(e,t,n,r,o,i,s){var a=l.default.createRequest(n,r,o,i,d.default.REQ_SEND,t&&t.options.timeouts,e);return a.once("complete",s),a.exec(),a},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){p.default.logAction(p.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+t),this.doUri(u.default.Get,null,t,null,null,n,(function(t,n,o,i,s){var a;a=r?!t&&"yes"==(null==n?void 0:n.replace(/\n/,"")):!t&&(0,g.isSuccessCode)(s),p.default.logAction(p.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+a),e(null,a)}))}):i.default.Config.jsonpSupported?(this.Request=function(e,t,n,r,o,s,a){var c=(0,f.createRequest)(n,r,o,s,d.default.REQ_SEND,t&&t.options.timeouts,e);return c.once("complete",a),i.default.Config.nextTick((function(){c.exec()})),c},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){var t=this,n=a.default.jsonpInternetUpUrl;if(this.checksInProgress)this.checksInProgress.push(e);else{this.checksInProgress=[e],p.default.logAction(p.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+n);var r=new f.Request("isTheInternetUp",n,null,null,null,d.default.REQ_SEND,a.default.TIMEOUTS);r.once("complete",(function(e,n){var r=!e&&n;p.default.logAction(p.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+r);for(var o=0;o<t.checksInProgress.length;o++)t.checksInProgress[o](null,r);t.checksInProgress=null})),i.default.Config.nextTick((function(){r.exec()}))}}):i.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=h.default,this.checkConnectivity=function(e){p.default.logAction(p.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+t),this.doUri(u.default.Get,null,t,null,null,null,(function(t,n){var r=!t&&"yes"==(null==n?void 0:n.replace(/\n/,""));p.default.logAction(p.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+r),e(null,r)}))}):this.Request=function(e,t,n,r,o,i,s){s(new c.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return e.prototype.do=function(e,t,n,r,i,a,u){var l=this,d="function"==typeof n?n:function(e){return t.baseUri(e)+n},p=t._currentFallback;if(p){if(p.validUntil>s.now())return this.Request?void this.Request(e,t,d(p.host),r,a,i,(function(s){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(s&&m(s))return t._currentFallback=null,void l.do(e,t,n,r,i,a,u);null==u||u.apply(void 0,o.__spreadArray([s],c,!1))})):void(null==u||u(new c.PartialErrorInfo("Request invoked before assigned to",null,500)));t._currentFallback=null}var f=y(t);if(1!==f.length){var h=function(n,c){var p=n.shift();l.doUri(e,t,d(p),r,i,a,(function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e&&m(e)&&n.length?h(n,!0):(c&&(t._currentFallback={host:p,validUntil:s.now()+t.options.timeouts.fallbackRetryTimeout}),null==u||u.apply(void 0,o.__spreadArray([e],r,!1)))}))};h(f)}else this.doUri(e,t,d(f[0]),r,i,a,u)},e.prototype.doUri=function(e,t,n,r,o,i,s){this.Request?this.Request(e,t,n,r,i,o,s):s(new c.PartialErrorInfo("Request invoked before assigned to",null,500))},e}(),r.methods=[u.default.Get,u.default.Delete,u.default.Post,u.default.Put,u.default.Patch],r.methodsWithoutBody=[u.default.Get,u.default.Delete],r.methodsWithBody=[u.default.Post,u.default.Put,u.default.Patch],r);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(4)),i=r.__importDefault(n(3)),s=r.__importDefault(n(8)),a=r.__importStar(n(1)),c=n(1);t.default=function(e,t,n,r,u,l,d){var p=new Headers(r||{}),f=e?e.toUpperCase():a.isEmptyArg(l)?"GET":"POST",h=new AbortController,g=setTimeout((function(){h.abort(),d(new o.PartialErrorInfo("Request timed out",null,408))}),t?t.options.timeouts.httpRequestTimeout:s.default.TIMEOUTS.httpRequestTimeout),m={method:f,headers:p,body:l};i.default.Config.isWebworker||(m.credentials=p.has("authorization")?"include":"same-origin"),(0,c.getGlobalObject)().fetch(n+"?"+new URLSearchParams(u||{}),m).then((function(e){clearTimeout(g);var t=e.headers.get("Content-Type");(t&&t.indexOf("application/x-msgpack")>-1?e.arrayBuffer():t&&t.indexOf("application/json")>-1?e.json():e.text()).then((function(n){var r=!!t&&-1===t.indexOf("application/x-msgpack");if(e.ok)d(null,n,e.headers,r,e.status);else{var s=function(e,t){if(function(e,t){return!!t.get("x-ably-errorcode")}(0,t))return e.error&&o.default.fromValues(e.error)}(n,e.headers)||new o.PartialErrorInfo("Error response received from server: "+e.status+" body was: "+i.default.Config.inspect(n),null,e.status);d(s,n,e.headers,r,e.status)}}))})).catch((function(e){clearTimeout(g),d(e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(41)),i=r.__importStar(n(1)).getGlobalObject();"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var s,a=i.navigator&&i.navigator.userAgent.toString(),c={agent:"browser",logTimestamps:!0,userAgent:a,currentUrl:i.location&&i.location.href,noUpgrade:a&&!!a.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:i.WebSocket,fetchSupported:!!i.fetch,xhrSupported:i.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:"undefined"!=typeof document,allowComet:(s=i.location,!i.WebSocket||!s||!s.origin||s.origin.indexOf("http")>-1),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:o.default,supportsBinary:!!i.TextDecoder,preferBinary:!1,ArrayBuffer:i.ArrayBuffer,atob:i.atob,nextTick:void 0!==i.setImmediate?i.setImmediate.bind(i):function(e){setTimeout(e,0)},addEventListener:i.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){return i.TextDecoder&&(new i.TextEncoder).encode(e).length||e.length},TextEncoder:i.TextEncoder,TextDecoder:i.TextDecoder,Promise:i.Promise,getRandomValues:function(e){if(void 0!==e)return function(t,n){e.getRandomValues(t),n&&n(null)}}(i.crypto||msCrypto)};t.default=c},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),o="ablyjs-storage-test",i=function(){function t(){try{e.sessionStorage.setItem(o,o),e.sessionStorage.removeItem(o),this.sessionSupported=!0}catch(e){this.sessionSupported=!1}try{e.localStorage.setItem(o,o),e.localStorage.removeItem(o),this.localSupported=!0}catch(e){this.localSupported=!1}}return t.prototype.get=function(e){return this._get(e,!1)},t.prototype.getSession=function(e){return this._get(e,!0)},t.prototype.remove=function(e){return this._remove(e,!1)},t.prototype.removeSession=function(e){return this._remove(e,!0)},t.prototype.set=function(e,t,n){return this._set(e,t,n,!1)},t.prototype.setSession=function(e,t,n){return this._set(e,t,n,!0)},t.prototype._set=function(e,t,n,o){var i={value:t};return n&&(i.expires=r.now()+n),this.storageInterface(o).setItem(e,JSON.stringify(i))},t.prototype._get=function(e,t){if(t&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!t&&!this.localSupported)throw new Error("Local Storage not supported");var n=this.storageInterface(t).getItem(e);if(!n)return null;var o=JSON.parse(n);return o.expires&&o.expires<r.now()?(this.storageInterface(t).removeItem(e),null):o.value},t.prototype._remove=function(e,t){return this.storageInterface(t).removeItem(e)},t.prototype.storageInterface=function(t){return t?e.sessionStorage:e.localStorage},t}();t.default=new i}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(67)),o={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],baseTransportOrder:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],transportPreferenceOrder:[r.default.JsonP,r.default.XhrPolling,r.default.XhrStreaming,r.default.WebSocket],upgradeTransports:[r.default.XhrStreaming,r.default.WebSocket]};t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WebSocket="web_socket",e.Comet="comet",e.XhrStreaming="xhr_streaming",e.XhrPolling="xhr_polling",e.JsonP="jsonp"}(r||(r={})),t.default=r},function(e,t,n){"use strict";n.r(t);var r=n(29),o=n.n(r),i=n(1),s=n(3),a=n.n(s),c=n(12),u=n.n(c),l=n(15),d=n.n(l);t.default=[o.a,function(e){var t="xhr_polling";function n(e,n,r){r.stream=!1,u.a.call(this,e,n,r),this.shortName=t}return i.inherits(n,u.a),n.isAvailable=function(){return a.a.Config.xhrSupported&&a.a.Config.allowComet},n.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,o){return d.a.createRequest(e,t,n,r,o,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n},function(e){var t="xhr_streaming";function n(e,n,r){u.a.call(this,e,n,r),this.shortName=t}return i.inherits(n,u.a),n.isAvailable=function(){return a.a.Config.xhrSupported&&a.a.Config.streamingSupported&&a.a.Config.allowComet},n.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,o){return d.a.createRequest(e,t,n,r,o,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n}]}]).default},e.exports=t()},"./node_modules/ably/promises.js":(e,t,n)=>{"use strict";function r(e){return"string"==typeof e&&(e=-1==e.indexOf(":")?{token:e}:{key:e}),e.promises=!0,e}var o=n("./node_modules/ably/build/ably-commonjs.js"),i=function(e){return new o.Rest(r(e))};Object.assign(i,o.Rest);var s=function(e){return new o.Realtime(r(e))};Object.assign(s,o.Realtime),e.exports={Rest:i,Realtime:s}},"./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js":(e,t,n)=>{"use strict";var r=n("./node_modules/sdp/sdp.js");function o(e,t,n,o,i){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(o?o.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var i=r(e.parameters.apt,n),s=r(t.parameters.apt,o);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!o(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}})),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,o){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(n){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=o?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},l.prototype._gather=function(t,n){var o=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=r.getMediaSections(o._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+l.join("");var d=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",s),d&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,o){var s=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),o&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},l.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);o.transceivers[t].localCapabilities=n})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(o._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var s=o.transceivers[t],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,d=s.localCapabilities,p=s.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||s.rejected)){var f=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);a&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(s.mid,t),"new"===u.state&&u.start(c,f,a?"controlling":"controlled"),"new"===l.state&&l.start(h));var g=i(d,p);o._transceive(s,g.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(o){var l=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!s("setRemoteDescription",o.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var p=[],f=r.splitSections(o.sdp),h=f.shift(),g=r.matchPrefix(h,"a=ice-lite").length>0,m=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=m;var y=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(s,c){var u=r.splitLines(s),f=r.getKind(s),y=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,v=u[0].substr(2).split(" ")[2],_=r.getDirection(s,h),S=r.parseMsid(s),E=r.getMid(s)||r.generateIdentifier();if(y||"application"===f&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))l.transceivers[c]={mid:E,kind:f,protocol:v,rejected:!0};else{var b,T,w,C,R,O,I,M,A;!y&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(f,!0));var k,P,D=r.parseRtpParameters(s);y||(k=r.getIceParameters(s,h),(P=r.getDtlsParameters(s,h)).role="client"),I=r.parseRtpEncodingParameters(s);var N=r.parseRtcpParameters(s),L=r.matchPrefix(s,"a=end-of-candidates",h).length>0,x=r.matchPrefix(s,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!y&&m&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==o.type||y)"answer"!==o.type||y||(T=(b=l.transceivers[c]).iceGatherer,w=b.iceTransport,C=b.dtlsTransport,R=b.rtpReceiver,O=b.sendEncodingParameters,M=b.localCapabilities,l.transceivers[c].recvEncodingParameters=I,l.transceivers[c].remoteCapabilities=D,l.transceivers[c].rtcpParameters=N,x.length&&"new"===w.state&&(!g&&!L||m&&0!==c?x.forEach((function(e){a(b.iceTransport,e)})):w.setRemoteCandidates(x)),m&&0!==c||("new"===w.state&&w.start(T,k,"controlling"),"new"===C.state&&C.start(P)),!i(b.localCapabilities,b.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,l._transceive(b,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!R||"sendrecv"!==_&&"sendonly"!==_?delete b.rtpReceiver:(A=R.track,S?(d[S.stream]||(d[S.stream]=new e.MediaStream),n(A,d[S.stream]),p.push([A,R,d[S.stream]])):(d.default||(d.default=new e.MediaStream),n(A,d.default),p.push([A,R,d.default]))));else{(b=l.transceivers[c]||l._createTransceiver(f)).mid=E,b.iceGatherer||(b.iceGatherer=l._createIceGatherer(c,m)),x.length&&"new"===b.iceTransport.state&&(!L||m&&0!==c?x.forEach((function(e){a(b.iceTransport,e)})):b.iceTransport.setRemoteCandidates(x)),M=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(M.codecs=M.codecs.filter((function(e){return"rtx"!==e.name}))),O=b.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var U,F=!1;"sendrecv"===_||"sendonly"===_?(F=!b.rtpReceiver,R=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,f),F&&(A=R.track,S&&"-"===S.stream||(S?(d[S.stream]||(d[S.stream]=new e.MediaStream,Object.defineProperty(d[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(A,"id",{get:function(){return S.track}}),U=d[S.stream]):(d.default||(d.default=new e.MediaStream),U=d.default)),U&&(n(A,U),b.associatedRemoteMediaStreams.push(U)),p.push([A,R,U]))):b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===b.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),b.associatedRemoteMediaStreams=[]),b.localCapabilities=M,b.remoteCapabilities=D,b.rtpReceiver=R,b.rtcpParameters=N,b.sendEncodingParameters=O,b.recvEncodingParameters=I,l._transceive(l.transceivers[c],!1,F)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===o.type?"active":"passive"),l._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}p.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),p.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,s=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));i>0||s>0;)i>0&&(n._createTransceiver("audio"),i--),s>0&&(n._createTransceiver("video"),s--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(o,i){var s=o.track,a=o.kind,c=o.mid||r.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(i,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];s&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,a)),o.localCapabilities=u,o.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=o(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!n._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){s=u;break}var l=n.transceivers[s];if(!l)return i(c("OperationError","Can not add ICE candidate"));if(l.rejected)return o();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return o();if(d.component&&1!==d.component)return o();if((0===s||s>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,d))return i(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(d.type?p:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].rejected||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));f++);o()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},"./node_modules/sdp/sdp.js":e=>{"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],o=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var i=r[o],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var a=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var o=0;return n.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(r+="a=maxptime:"+o+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],o=t.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),s=-1!==o.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var o=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=0===o.length;var i=t.matchPrefix(e,"a=rtcp-mux");return n.mux=i.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(n=o[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),o=t.matchPrefix(e,"a=max-message-size:");o.length>0&&(n=parseInt(o[0].substr(19),10)),isNaN(n)&&(n=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var o=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,o){var i=t.writeRtpDescription(e.kind,n);if(i+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var s="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),i},t.getDirection=function(e,n){for(var r=t.splitLines(e),o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},"./node_modules/webrtc-adapter/src/js/adapter_core.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/webrtc-adapter/src/js/adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window})},"./node_modules/webrtc-adapter/src/js/adapter_factory.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{adapterFactory:()=>u});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js"),i=n("./node_modules/webrtc-adapter/src/js/edge/edge_shim.js"),s=n("./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js"),a=n("./node_modules/webrtc-adapter/src/js/safari/safari_shim.js"),c=n("./node_modules/webrtc-adapter/src/js/common_shim.js");function u(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const n=r.log,u=r.detectBrowser(e),l={browserDetails:u,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(u.browser){case"chrome":if(!o||!o.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),l;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),l;n("adapter.js shimming chrome."),l.browserShim=o,c.shimAddIceCandidateNullOrEmpty(e,u),o.shimGetUserMedia(e,u),o.shimMediaStream(e,u),o.shimPeerConnection(e,u),o.shimOnTrack(e,u),o.shimAddTrackRemoveTrack(e,u),o.shimGetSendersWithDtmf(e,u),o.shimGetStats(e,u),o.shimSenderReceiverGetStats(e,u),o.fixNegotiationNeeded(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),l;n("adapter.js shimming firefox."),l.browserShim=s,c.shimAddIceCandidateNullOrEmpty(e,u),s.shimGetUserMedia(e,u),s.shimPeerConnection(e,u),s.shimOnTrack(e,u),s.shimRemoveStream(e,u),s.shimSenderGetStats(e,u),s.shimReceiverGetStats(e,u),s.shimRTCDataChannel(e,u),s.shimAddTransceiver(e,u),s.shimGetParameters(e,u),s.shimCreateOffer(e,u),s.shimCreateAnswer(e,u),c.shimRTCIceCandidate(e,u),c.shimConnectionState(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"edge":if(!i||!i.shimPeerConnection||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),l;n("adapter.js shimming edge."),l.browserShim=i,i.shimGetUserMedia(e,u),i.shimGetDisplayMedia(e,u),i.shimPeerConnection(e,u),i.shimReplaceTrack(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),l;n("adapter.js shimming safari."),l.browserShim=a,c.shimAddIceCandidateNullOrEmpty(e,u),a.shimRTCIceServerUrls(e,u),a.shimCreateOfferLegacy(e,u),a.shimCallbacksAPI(e,u),a.shimLocalStreamsAPI(e,u),a.shimRemoteStreamsAPI(e,u),a.shimTrackEventTransceiver(e,u),a.shimGetUserMedia(e,u),a.shimAudioContext(e,u),c.shimRTCIceCandidate(e,u),c.shimMaxMessageSize(e,u),c.shimSendThrowTypeError(e,u),c.removeExtmapAllowMixed(e,u);break;default:n("Unsupported browser!")}return l}},"./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o.shimGetUserMedia,shimGetDisplayMedia:()=>i.shimGetDisplayMedia,shimMediaStream:()=>s,shimOnTrack:()=>a,shimGetSendersWithDtmf:()=>c,shimGetStats:()=>u,shimSenderReceiverGetStats:()=>l,shimAddTrackRemoveTrackWithNative:()=>d,shimAddTrackRemoveTrack:()=>p,shimPeerConnection:()=>f,fixNegotiationNeeded:()=>h});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js"),i=n("./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js");function s(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function a(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else r.wrapPeerConnectionEvent(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function c(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function u(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},i=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(i(o(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(i(o(t)))},n])})).then(n,r)}}function l(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>r.filterStats(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),r.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>r.filterStats(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function d(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),o.apply(this,arguments)}}function p(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return d(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=i(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>i(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function f(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function h(e,t){r.wrapPeerConnectionEvent(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},"./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o});const r=n("./node_modules/webrtc-adapter/src/js/utils.js").log;function o(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const o=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",n)]=r.ideal,t.optional.push(e),e={},e[o("max",n)]=r.ideal,t.optional.push(e)):(e[o("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const a=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=s.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=o(e.video),r("chrome: "+JSON.stringify(e)),i(e)}))}e.video=o(e.video)}return r("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}},"./node_modules/webrtc-adapter/src/js/common_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimRTCIceCandidate:()=>s,shimMaxMessageSize:()=>a,shimSendThrowTypeError:()=>c,shimConnectionState:()=>u,removeExtmapAllowMixed:()=>l,shimAddIceCandidateNullOrEmpty:()=>d});var r=n("./node_modules/sdp/sdp.js"),o=n.n(r),i=n("./node_modules/webrtc-adapter/src/js/utils.js");function s(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=o().parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function a(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=o().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=o().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=o().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>i}),this._sctp=s}return n.apply(this,arguments)}}function c(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function u(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function l(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function d(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}},"./node_modules/webrtc-adapter/src/js/edge/edge_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>a.shimGetUserMedia,shimGetDisplayMedia:()=>c.shimGetDisplayMedia,shimPeerConnection:()=>u,shimReplaceTrack:()=>l});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js"),i=n("./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js"),s=n.n(i),a=n("./node_modules/webrtc-adapter/src/js/edge/getusermedia.js"),c=n("./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js");function u(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=s()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,o.filterIceServers)(e.iceServers,t.version),r.log("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function l(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},"./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{filterIceServers:()=>o});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function o(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");const o="string"==typeof t;return o&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=o?t[0]:t,!!t.length}}))}},"./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/edge/getusermedia.js":(e,t,n)=>{"use strict";function r(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}n.r(t),n.d(t,{shimGetUserMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o.shimGetUserMedia,shimGetDisplayMedia:()=>i.shimGetDisplayMedia,shimOnTrack:()=>s,shimPeerConnection:()=>a,shimSenderGetStats:()=>c,shimReceiverGetStats:()=>u,shimRemoveStream:()=>l,shimRTCDataChannel:()=>d,shimAddTransceiver:()=>p,shimGetParameters:()=>f,shimCreateOffer:()=>h,shimCreateAnswer:()=>g});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),o=n("./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js"),i=n("./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js");function s(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function a(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!o)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,i)}}function c(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function u(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),r.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function l(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function d(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function p(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function f(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function h(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function g(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}},"./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>o});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function o(e,t){const n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,o){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},o&&o.prototype.getSettings){const t=o.prototype.getSettings;o.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(o&&o.prototype.applyConstraints){const t=o.prototype.applyConstraints;o.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}},"./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimLocalStreamsAPI:()=>o,shimRemoteStreamsAPI:()=>i,shimCallbacksAPI:()=>s,shimGetUserMedia:()=>a,shimConstraints:()=>c,shimRTCIceServerUrls:()=>u,shimTrackEventTransceiver:()=>l,shimCreateOfferLegacy:()=>d,shimAudioContext:()=>p});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function o(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function i(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function s(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};let a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function a(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(c(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function c(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function u(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let o=e.iceServers[n];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,t.push(o)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function l(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function d(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function p(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},"./node_modules/webrtc-adapter/src/js/utils.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{extractVersion:()=>i,wrapPeerConnectionEvent:()=>s,disableLog:()=>a,disableWarnings:()=>c,log:()=>u,deprecated:()=>l,detectBrowser:()=>d,compactObject:()=>f,walkStats:()=>h,filterStats:()=>g});let r=!0,o=!0;function i(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function s(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};const i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function c(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function u(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function l(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")}function d(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=i(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=i(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=i(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=i(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function p(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(e){return p(e)?Object.keys(e).reduce((function(t,n){const r=p(e[n]),o=r?f(e[n]):e[n],i=r&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[n]:o})}),{}):e}function h(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?h(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{h(e,e.get(t),n)}))})))}function g(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&h(e,n,o)}))})),o}}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{createSignalMessage:()=>t,P2P_CONNECT_MESSAGE:()=>o,P2P_ICE_CANDIDATE_MESSAGE:()=>i,Signaler:()=>s,PeerConnection:()=>a}),n("./node_modules/webrtc-adapter/src/js/adapter_core.js");var e=n("./node_modules/ably/promises.js");function t(e,t){return{timestamp:(new Date).getTime(),receiver:e,...t}}const o="connect",i="candidate";class s{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.token=t,this.client=new e.Realtime.Promise({token:t,autoConnect:!1,idempotentRestPublishing:!0,queueMessages:!1,disconnectedRetryTimeout:3e3,suspendedRetryTimeout:15e3,echoMessages:!1,log:{level:n}}),this.channel=this.channel.bind(this)}channel(e){return this.client.channels.get(e)}}class a{constructor(e,t,n,r){this.connectionId=r,this.signalerChannel=e,this.ice=t,this.isPolite=n,this.pc=null,this.queuedCandidates=[],this.onNegotiationNeeded=null,this.onIceCandidate=null,this.onSignalerMessage=null,this._flushQueuedCandidates=this._flushQueuedCandidates.bind(this),this._pruneIce=this._pruneIce.bind(this),this.close=this.close.bind(this),this.sendReadyMessage=this.sendReadyMessage.bind(this),this._handleConnectMessage=this._handleConnectMessage.bind(this),this._handleCandidateMessage=this._handleCandidateMessage.bind(this),this.makingOffer=!1,this.ignoreOffer=!1,this._pruneIce();const o={...this.ice};Array.isArray(o.iceServers)||(o.iceServers=[o.iceServers]),this.pc=new RTCPeerConnection(o)}connect(e,n){this.remotePeerId=e,this.makingOffer=!1,this.pc.onnegotiationneeded=async()=>{try{this.makingOffer=!0,await this.pc.setLocalDescription(),this.signalerChannel.publish(o,t(e,{description:this.pc.localDescription}))}catch(e){console.error(e)}finally{this.makingOffer=!1}},this.pc.onicecandidate=n=>{let{candidate:r}=n;r&&this.signalerChannel.publish(i,t(e,{candidate:r}))},this.signalerChannel.subscribe(o,this._handleConnectMessage),this.signalerChannel.subscribe(i,this._handleCandidateMessage),n&&this._handleConnectMessage(n)}close(){this.signalerChannel.unsubscribe(this._handleCandidateMessage),this.signalerChannel.unsubscribe(this._handleConnectMessage),this.signalerChannel=null,this.pc.onnegotiationneeded=null,this.pc.onicecandidate=null,this.pc.ontrack=null,this.queuedCandidates=[],this.ice=null,this.pc.close(),this.pc=null}sendReadyMessage(){this.signalerChannel.publish(o,t(this.remotePeerId,{}))}async _handleConnectMessage(e){const n=e.data,r=e.clientId;if(n.receiver!==this.signalerChannel.connectionManager.connectionDetails.clientId)return;if(void 0!==this.remotePeerId&&r!==this.remotePeerId)return;const i=e.data.description,s="offer"===i.type&&(this.makingOffer||"stable"!==this.pc.signalingState);try{if(this.ignoreOffer=!this.isPolite&&s,this.ignoreOffer)return;if(await this.pc.setRemoteDescription(i),this._flushQueuedCandidates(),"offer"===i.type){await this.pc.setLocalDescription();const n=e.clientId;this.signalerChannel.publish(o,t(n,{description:this.pc.localDescription}))}}catch(e){console.error(e)}}async _handleCandidateMessage(e){const t=e.data,n=e.clientId;if(t.receiver===this.signalerChannel.connectionManager.connectionDetails.clientId)if(void 0===this.remotePeerId||n===this.remotePeerId)try{if(!this.pc.remoteDescription)return void this.queuedCandidates.push(t.candidate);try{await this.pc.addIceCandidate(t.candidate)}catch(e){if(!this.ignoreOffer)throw e}}catch(e){console.error(e)}else console.error(`SenderId does not match Remote peer id for ICE candidate: ${n}`)}_flushQueuedCandidates(){this.queuedCandidates.forEach((e=>{this.pc.addIceCandidate(e)})),this.queuedCandidates.length=0}_pruneIce(){const e=this.ice.iceServers.urls,t=[];let n=!1;e.forEach((e=>{if(e.startsWith("stun")&&!n)return n=!0,void t.push(e);(e.startsWith("turn")&&e.endsWith(":80?transport=tcp")||e.startsWith("turns")&&e.endsWith(":443?transport=tcp"))&&t.push(e)})),this.ice.iceServers.urls=t}}})(),r})()},e.exports=t()},7198:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.api.models.v1.user_details.User",null,i),o.exportSymbol("proto.api.models.v1.user_details.UserLocation",null,i),o.exportSymbol("proto.api.models.v1.user_details.UserName",null,i),o.exportSymbol("proto.api.models.v1.user_details.UserPhone",null,i),proto.api.models.v1.user_details.User=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.User,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.User.displayName="proto.api.models.v1.user_details.User"),proto.api.models.v1.user_details.UserName=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.UserName,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserName.displayName="proto.api.models.v1.user_details.UserName"),proto.api.models.v1.user_details.UserPhone=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.UserPhone,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserPhone.displayName="proto.api.models.v1.user_details.UserPhone"),proto.api.models.v1.user_details.UserLocation=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.models.v1.user_details.UserLocation,r.Message),o.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserLocation.displayName="proto.api.models.v1.user_details.UserLocation"),r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.User.prototype.toObject=function(e){return proto.api.models.v1.user_details.User.toObject(e,this)},proto.api.models.v1.user_details.User.toObject=function(e,t){var n,o={id:r.Message.getFieldWithDefault(t,1,""),username:r.Message.getFieldWithDefault(t,2,""),email:r.Message.getFieldWithDefault(t,3,""),name:(n=t.getName())&&proto.api.models.v1.user_details.UserName.toObject(e,n),date:r.Message.getFieldWithDefault(t,5,""),timezone:r.Message.getFieldWithDefault(t,6,""),trackusage:r.Message.getBooleanFieldWithDefault(t,7,!1),phone:(n=t.getPhone())&&proto.api.models.v1.user_details.UserPhone.toObject(e,n),location:(n=t.getLocation())&&proto.api.models.v1.user_details.UserLocation.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.models.v1.user_details.User.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.User;return proto.api.models.v1.user_details.User.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.User.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setId(n);break;case 2:n=t.readString(),e.setUsername(n);break;case 3:n=t.readString(),e.setEmail(n);break;case 4:n=new proto.api.models.v1.user_details.UserName,t.readMessage(n,proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader),e.setName(n);break;case 5:n=t.readString(),e.setDate(n);break;case 6:n=t.readString(),e.setTimezone(n);break;case 7:n=t.readBool(),e.setTrackusage(n);break;case 8:n=new proto.api.models.v1.user_details.UserPhone,t.readMessage(n,proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader),e.setPhone(n);break;case 9:n=new proto.api.models.v1.user_details.UserLocation,t.readMessage(n,proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader),e.setLocation(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.User.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.User.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.User.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getId()).length>0&&t.writeString(1,n),(n=e.getUsername()).length>0&&t.writeString(2,n),(n=e.getEmail()).length>0&&t.writeString(3,n),null!=(n=e.getName())&&t.writeMessage(4,n,proto.api.models.v1.user_details.UserName.serializeBinaryToWriter),(n=e.getDate()).length>0&&t.writeString(5,n),(n=e.getTimezone()).length>0&&t.writeString(6,n),(n=e.getTrackusage())&&t.writeBool(7,n),null!=(n=e.getPhone())&&t.writeMessage(8,n,proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter),null!=(n=e.getLocation())&&t.writeMessage(9,n,proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter)},proto.api.models.v1.user_details.User.prototype.getId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.User.prototype.setId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.User.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.User.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.models.v1.user_details.User.prototype.getEmail=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.models.v1.user_details.User.prototype.setEmail=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.models.v1.user_details.User.prototype.getName=function(){return r.Message.getWrapperField(this,proto.api.models.v1.user_details.UserName,4)},proto.api.models.v1.user_details.User.prototype.setName=function(e){return r.Message.setWrapperField(this,4,e)},proto.api.models.v1.user_details.User.prototype.clearName=function(){return this.setName(void 0)},proto.api.models.v1.user_details.User.prototype.hasName=function(){return null!=r.Message.getField(this,4)},proto.api.models.v1.user_details.User.prototype.getDate=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.api.models.v1.user_details.User.prototype.setDate=function(e){return r.Message.setProto3StringField(this,5,e)},proto.api.models.v1.user_details.User.prototype.getTimezone=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.api.models.v1.user_details.User.prototype.setTimezone=function(e){return r.Message.setProto3StringField(this,6,e)},proto.api.models.v1.user_details.User.prototype.getTrackusage=function(){return r.Message.getBooleanFieldWithDefault(this,7,!1)},proto.api.models.v1.user_details.User.prototype.setTrackusage=function(e){return r.Message.setProto3BooleanField(this,7,e)},proto.api.models.v1.user_details.User.prototype.getPhone=function(){return r.Message.getWrapperField(this,proto.api.models.v1.user_details.UserPhone,8)},proto.api.models.v1.user_details.User.prototype.setPhone=function(e){return r.Message.setWrapperField(this,8,e)},proto.api.models.v1.user_details.User.prototype.clearPhone=function(){return this.setPhone(void 0)},proto.api.models.v1.user_details.User.prototype.hasPhone=function(){return null!=r.Message.getField(this,8)},proto.api.models.v1.user_details.User.prototype.getLocation=function(){return r.Message.getWrapperField(this,proto.api.models.v1.user_details.UserLocation,9)},proto.api.models.v1.user_details.User.prototype.setLocation=function(e){return r.Message.setWrapperField(this,9,e)},proto.api.models.v1.user_details.User.prototype.clearLocation=function(){return this.setLocation(void 0)},proto.api.models.v1.user_details.User.prototype.hasLocation=function(){return null!=r.Message.getField(this,9)},r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserName.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserName.toObject(e,this)},proto.api.models.v1.user_details.UserName.toObject=function(e,t){var n={firstname:r.Message.getFieldWithDefault(t,1,""),lastname:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.models.v1.user_details.UserName.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.UserName;return proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setFirstname(n);break;case 2:n=t.readString(),e.setLastname(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserName.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.UserName.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserName.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getFirstname()).length>0&&t.writeString(1,n),(n=e.getLastname()).length>0&&t.writeString(2,n)},proto.api.models.v1.user_details.UserName.prototype.getFirstname=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserName.prototype.setFirstname=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserName.prototype.getLastname=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserName.prototype.setLastname=function(e){return r.Message.setProto3StringField(this,2,e)},r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserPhone.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserPhone.toObject(e,this)},proto.api.models.v1.user_details.UserPhone.toObject=function(e,t){var n={countrycode:r.Message.getFieldWithDefault(t,1,""),number:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.models.v1.user_details.UserPhone.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.UserPhone;return proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setCountrycode(n);break;case 2:n=t.readString(),e.setNumber(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserPhone.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getCountrycode()).length>0&&t.writeString(1,n),(n=e.getNumber()).length>0&&t.writeString(2,n)},proto.api.models.v1.user_details.UserPhone.prototype.getCountrycode=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserPhone.prototype.setCountrycode=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserPhone.prototype.getNumber=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserPhone.prototype.setNumber=function(e){return r.Message.setProto3StringField(this,2,e)},r.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserLocation.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserLocation.toObject(e,this)},proto.api.models.v1.user_details.UserLocation.toObject=function(e,t){var n={country:r.Message.getFieldWithDefault(t,1,""),suburb:r.Message.getFieldWithDefault(t,2,""),postcode:r.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.models.v1.user_details.UserLocation.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.models.v1.user_details.UserLocation;return proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader(n,t)},proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setCountry(n);break;case 2:n=t.readString(),e.setSuburb(n);break;case 3:n=t.readString(),e.setPostcode(n);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserLocation.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getCountry()).length>0&&t.writeString(1,n),(n=e.getSuburb()).length>0&&t.writeString(2,n),(n=e.getPostcode()).length>0&&t.writeString(3,n)},proto.api.models.v1.user_details.UserLocation.prototype.getCountry=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserLocation.prototype.setCountry=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserLocation.prototype.getSuburb=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserLocation.prototype.setSuburb=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.models.v1.user_details.UserLocation.prototype.getPostcode=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.models.v1.user_details.UserLocation.prototype.setPostcode=function(e){return r.Message.setProto3StringField(this,3,e)},o.object.extend(t,proto.api.models.v1.user_details)},7741:(e,t,n)=>{var r=n(3157),o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.api.models.v2.ManagedDeviceState",null,o),proto.api.models.v2.ManagedDeviceState={CREATED:0,ENROLMENT_STARTED:1,ENROLLED:2},r.object.extend(t,proto.api.models.v2)},245:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.api.requests.school_manager.WindowUpdate",null,i),o.exportSymbol("proto.api.requests.school_manager.WindowUpdate.BackgroundTab",null,i),o.exportSymbol("proto.api.requests.school_manager.WindowUpdate.Restricted",null,i),o.exportSymbol("proto.api.requests.school_manager.WindowUpdateRequest",null,i),proto.api.requests.school_manager.WindowUpdateRequest=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.requests.school_manager.WindowUpdateRequest,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdateRequest.displayName="proto.api.requests.school_manager.WindowUpdateRequest"),proto.api.requests.school_manager.WindowUpdate=function(e){r.Message.initialize(this,e,0,-1,proto.api.requests.school_manager.WindowUpdate.repeatedFields_,null)},o.inherits(proto.api.requests.school_manager.WindowUpdate,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.displayName="proto.api.requests.school_manager.WindowUpdate"),proto.api.requests.school_manager.WindowUpdate.BackgroundTab=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.requests.school_manager.WindowUpdate.BackgroundTab,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.BackgroundTab.displayName="proto.api.requests.school_manager.WindowUpdate.BackgroundTab"),proto.api.requests.school_manager.WindowUpdate.Restricted=function(e){r.Message.initialize(this,e,0,-1,proto.api.requests.school_manager.WindowUpdate.Restricted.repeatedFields_,null)},o.inherits(proto.api.requests.school_manager.WindowUpdate.Restricted,r.Message),o.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.Restricted.displayName="proto.api.requests.school_manager.WindowUpdate.Restricted"),r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdateRequest.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdateRequest.toObject(e,this)},proto.api.requests.school_manager.WindowUpdateRequest.toObject=function(e,t){var n,o={windowEndpoint:r.Message.getFieldWithDefault(t,1,""),window:(n=t.getWindow())&&proto.api.requests.school_manager.WindowUpdate.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdateRequest;return proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setWindowEndpoint(n);break;case 2:n=new proto.api.requests.school_manager.WindowUpdate,t.readMessage(n,proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader),e.setWindow(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdateRequest.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdateRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdateRequest.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getWindowEndpoint()).length>0&&t.writeString(1,n),null!=(n=e.getWindow())&&t.writeMessage(2,n,proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.getWindowEndpoint=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdateRequest.prototype.setWindowEndpoint=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.getWindow=function(){return r.Message.getWrapperField(this,proto.api.requests.school_manager.WindowUpdate,2)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.setWindow=function(e){return r.Message.setWrapperField(this,2,e)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.clearWindow=function(){return this.setWindow(void 0)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.hasWindow=function(){return null!=r.Message.getField(this,2)},proto.api.requests.school_manager.WindowUpdate.repeatedFields_=[10,12],r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.toObject=function(e,t){var n,o={title:r.Message.getFieldWithDefault(t,1,""),url:r.Message.getFieldWithDefault(t,2,""),favicon:r.Message.getFieldWithDefault(t,3,""),tabId:r.Message.getFieldWithDefault(t,4,""),chromeId:r.Message.getFieldWithDefault(t,5,""),chromeWindowId:r.Message.getFieldWithDefault(t,6,""),action:r.Message.getFieldWithDefault(t,7,""),email:r.Message.getFieldWithDefault(t,8,""),screenshot:r.Message.getFieldWithDefault(t,9,""),backgroundTabsList:r.Message.toObjectList(t.getBackgroundTabsList(),proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject,e),platformType:r.Message.getFieldWithDefault(t,11,""),teacheridsList:null==(n=r.Message.getRepeatedField(t,12))?void 0:n,inFocus:r.Message.getBooleanFieldWithDefault(t,13,!1),restricted:(n=t.getRestricted())&&proto.api.requests.school_manager.WindowUpdate.Restricted.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.requests.school_manager.WindowUpdate.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdate;return proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTitle(n);break;case 2:n=t.readString(),e.setUrl(n);break;case 3:n=t.readString(),e.setFavicon(n);break;case 4:n=t.readString(),e.setTabId(n);break;case 5:n=t.readString(),e.setChromeId(n);break;case 6:n=t.readString(),e.setChromeWindowId(n);break;case 7:n=t.readString(),e.setAction(n);break;case 8:n=t.readString(),e.setEmail(n);break;case 9:n=t.readString(),e.setScreenshot(n);break;case 10:n=new proto.api.requests.school_manager.WindowUpdate.BackgroundTab,t.readMessage(n,proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader),e.addBackgroundTabs(n);break;case 11:n=t.readString(),e.setPlatformType(n);break;case 12:n=t.readString(),e.addTeacherids(n);break;case 13:n=t.readBool(),e.setInFocus(n);break;case 14:n=new proto.api.requests.school_manager.WindowUpdate.Restricted,t.readMessage(n,proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinaryFromReader),e.setRestricted(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getTitle()).length>0&&t.writeString(1,n),(n=e.getUrl()).length>0&&t.writeString(2,n),(n=e.getFavicon()).length>0&&t.writeString(3,n),(n=e.getTabId()).length>0&&t.writeString(4,n),(n=e.getChromeId()).length>0&&t.writeString(5,n),(n=e.getChromeWindowId()).length>0&&t.writeString(6,n),(n=e.getAction()).length>0&&t.writeString(7,n),(n=e.getEmail()).length>0&&t.writeString(8,n),(n=e.getScreenshot()).length>0&&t.writeString(9,n),(n=e.getBackgroundTabsList()).length>0&&t.writeRepeatedMessage(10,n,proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter),(n=e.getPlatformType()).length>0&&t.writeString(11,n),(n=e.getTeacheridsList()).length>0&&t.writeRepeatedString(12,n),(n=e.getInFocus())&&t.writeBool(13,n),null!=(n=e.getRestricted())&&t.writeMessage(14,n,proto.api.requests.school_manager.WindowUpdate.Restricted.serializeBinaryToWriter)},r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject=function(e,t){var n={favicon:r.Message.getFieldWithDefault(t,1,""),taburl:r.Message.getFieldWithDefault(t,2,""),title:r.Message.getFieldWithDefault(t,3,""),tabId:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdate.BackgroundTab;return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setFavicon(n);break;case 2:n=t.readString(),e.setTaburl(n);break;case 3:n=t.readString(),e.setTitle(n);break;case 4:n=t.readString(),e.setTabId(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getFavicon()).length>0&&t.writeString(1,n),(n=e.getTaburl()).length>0&&t.writeString(2,n),(n=e.getTitle()).length>0&&t.writeString(3,n),(n=e.getTabId()).length>0&&t.writeString(4,n)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getFavicon=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setFavicon=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTaburl=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTaburl=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTitle=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTitle=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTabId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTabId=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.requests.school_manager.WindowUpdate.Restricted.repeatedFields_=[1,2],r.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.Restricted.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.Restricted.toObject=function(e,t){var n,o={domainsList:null==(n=r.Message.getRepeatedField(t,1))?void 0:n,appsList:null==(n=r.Message.getRepeatedField(t,2))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.requests.school_manager.WindowUpdate.Restricted;return proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinaryFromReader(n,t)},proto.api.requests.school_manager.WindowUpdate.Restricted.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.addDomains(n);break;case 2:n=t.readString(),e.addApps(n);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.Restricted.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.Restricted.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getDomainsList()).length>0&&t.writeRepeatedString(1,n),(n=e.getAppsList()).length>0&&t.writeRepeatedString(2,n)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.getDomainsList=function(){return r.Message.getRepeatedField(this,1)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.setDomainsList=function(e){return r.Message.setField(this,1,e||[])},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.addDomains=function(e,t){return r.Message.addToRepeatedField(this,1,e,t)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.clearDomainsList=function(){return this.setDomainsList([])},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.getAppsList=function(){return r.Message.getRepeatedField(this,2)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.setAppsList=function(e){return r.Message.setField(this,2,e||[])},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.addApps=function(e,t){return r.Message.addToRepeatedField(this,2,e,t)},proto.api.requests.school_manager.WindowUpdate.Restricted.prototype.clearAppsList=function(){return this.setAppsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getTitle=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setTitle=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getUrl=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setUrl=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getFavicon=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setFavicon=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getTabId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setTabId=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getChromeId=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setChromeId=function(e){return r.Message.setProto3StringField(this,5,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getChromeWindowId=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setChromeWindowId=function(e){return r.Message.setProto3StringField(this,6,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getAction=function(){return r.Message.getFieldWithDefault(this,7,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setAction=function(e){return r.Message.setProto3StringField(this,7,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getEmail=function(){return r.Message.getFieldWithDefault(this,8,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setEmail=function(e){return r.Message.setProto3StringField(this,8,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getScreenshot=function(){return r.Message.getFieldWithDefault(this,9,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setScreenshot=function(e){return r.Message.setProto3StringField(this,9,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getBackgroundTabsList=function(){return r.Message.getRepeatedWrapperField(this,proto.api.requests.school_manager.WindowUpdate.BackgroundTab,10)},proto.api.requests.school_manager.WindowUpdate.prototype.setBackgroundTabsList=function(e){return r.Message.setRepeatedWrapperField(this,10,e)},proto.api.requests.school_manager.WindowUpdate.prototype.addBackgroundTabs=function(e,t){return r.Message.addToRepeatedWrapperField(this,10,e,proto.api.requests.school_manager.WindowUpdate.BackgroundTab,t)},proto.api.requests.school_manager.WindowUpdate.prototype.clearBackgroundTabsList=function(){return this.setBackgroundTabsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getPlatformType=function(){return r.Message.getFieldWithDefault(this,11,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setPlatformType=function(e){return r.Message.setProto3StringField(this,11,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getTeacheridsList=function(){return r.Message.getRepeatedField(this,12)},proto.api.requests.school_manager.WindowUpdate.prototype.setTeacheridsList=function(e){return r.Message.setField(this,12,e||[])},proto.api.requests.school_manager.WindowUpdate.prototype.addTeacherids=function(e,t){return r.Message.addToRepeatedField(this,12,e,t)},proto.api.requests.school_manager.WindowUpdate.prototype.clearTeacheridsList=function(){return this.setTeacheridsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getInFocus=function(){return r.Message.getBooleanFieldWithDefault(this,13,!1)},proto.api.requests.school_manager.WindowUpdate.prototype.setInFocus=function(e){return r.Message.setProto3BooleanField(this,13,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getRestricted=function(){return r.Message.getWrapperField(this,proto.api.requests.school_manager.WindowUpdate.Restricted,14)},proto.api.requests.school_manager.WindowUpdate.prototype.setRestricted=function(e){return r.Message.setWrapperField(this,14,e)},proto.api.requests.school_manager.WindowUpdate.prototype.clearRestricted=function(){return this.setRestricted(void 0)},proto.api.requests.school_manager.WindowUpdate.prototype.hasRestricted=function(){return null!=r.Message.getField(this,14)},o.object.extend(t,proto.api.requests.school_manager)},8776:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.api.responses.school_manager.Event",null,i),o.exportSymbol("proto.api.responses.school_manager.EventHeader",null,i),o.exportSymbol("proto.api.responses.school_manager.EventMessage",null,i),o.exportSymbol("proto.api.responses.school_manager.EventType",null,i),o.exportSymbol("proto.api.responses.school_manager.IceMessage",null,i),o.exportSymbol("proto.api.responses.school_manager.IceServers",null,i),o.exportSymbol("proto.api.responses.school_manager.InitP2PEvent",null,i),proto.api.responses.school_manager.EventMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.EventMessage,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.EventMessage.displayName="proto.api.responses.school_manager.EventMessage"),proto.api.responses.school_manager.Event=function(e){r.Message.initialize(this,e,0,-1,proto.api.responses.school_manager.Event.repeatedFields_,null)},o.inherits(proto.api.responses.school_manager.Event,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.Event.displayName="proto.api.responses.school_manager.Event"),proto.api.responses.school_manager.InitP2PEvent=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.InitP2PEvent,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.InitP2PEvent.displayName="proto.api.responses.school_manager.InitP2PEvent"),proto.api.responses.school_manager.IceServers=function(e){r.Message.initialize(this,e,0,-1,proto.api.responses.school_manager.IceServers.repeatedFields_,null)},o.inherits(proto.api.responses.school_manager.IceServers,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.IceServers.displayName="proto.api.responses.school_manager.IceServers"),proto.api.responses.school_manager.IceMessage=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.IceMessage,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.IceMessage.displayName="proto.api.responses.school_manager.IceMessage"),proto.api.responses.school_manager.EventHeader=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.school_manager.EventHeader,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.EventHeader.displayName="proto.api.responses.school_manager.EventHeader"),r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.EventMessage.prototype.toObject=function(e){return proto.api.responses.school_manager.EventMessage.toObject(e,this)},proto.api.responses.school_manager.EventMessage.toObject=function(e,t){var n={timestamp:r.Message.getFieldWithDefault(t,1,""),event:r.Message.getFieldWithDefault(t,2,0),value:r.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.EventMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.EventMessage;return proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTimestamp(n);break;case 2:n=t.readEnum(),e.setEvent(n);break;case 3:n=t.readString(),e.setValue(n);break;default:t.skipField()}return e},proto.api.responses.school_manager.EventMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getTimestamp()).length>0&&t.writeString(1,n),0!==(n=e.getEvent())&&t.writeEnum(2,n),(n=e.getValue()).length>0&&t.writeString(3,n)},proto.api.responses.school_manager.EventMessage.prototype.getTimestamp=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.EventMessage.prototype.setTimestamp=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.EventMessage.prototype.getEvent=function(){return r.Message.getFieldWithDefault(this,2,0)},proto.api.responses.school_manager.EventMessage.prototype.setEvent=function(e){return r.Message.setProto3EnumField(this,2,e)},proto.api.responses.school_manager.EventMessage.prototype.getValue=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.school_manager.EventMessage.prototype.setValue=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.school_manager.Event.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.Event.prototype.toObject=function(e){return proto.api.responses.school_manager.Event.toObject(e,this)},proto.api.responses.school_manager.Event.toObject=function(e,t){var n={messagesList:r.Message.toObjectList(t.getMessagesList(),proto.api.responses.school_manager.EventMessage.toObject,e)};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.Event.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.Event;return proto.api.responses.school_manager.Event.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.Event.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.api.responses.school_manager.EventMessage;t.readMessage(n,proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader),e.addMessages(n)}else t.skipField();return e},proto.api.responses.school_manager.Event.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.Event.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.Event.serializeBinaryToWriter=function(e,t){var n;(n=e.getMessagesList()).length>0&&t.writeRepeatedMessage(1,n,proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter)},proto.api.responses.school_manager.Event.prototype.getMessagesList=function(){return r.Message.getRepeatedWrapperField(this,proto.api.responses.school_manager.EventMessage,1)},proto.api.responses.school_manager.Event.prototype.setMessagesList=function(e){return r.Message.setRepeatedWrapperField(this,1,e)},proto.api.responses.school_manager.Event.prototype.addMessages=function(e,t){return r.Message.addToRepeatedWrapperField(this,1,e,proto.api.responses.school_manager.EventMessage,t)},proto.api.responses.school_manager.Event.prototype.clearMessagesList=function(){return this.setMessagesList([])},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.InitP2PEvent.prototype.toObject=function(e){return proto.api.responses.school_manager.InitP2PEvent.toObject(e,this)},proto.api.responses.school_manager.InitP2PEvent.toObject=function(e,t){var n,o={header:(n=t.getHeader())&&proto.api.responses.school_manager.EventHeader.toObject(e,n),channel:r.Message.getFieldWithDefault(t,2,""),signalhost:r.Message.getFieldWithDefault(t,3,""),signaltoken:r.Message.getFieldWithDefault(t,4,""),signalexpiryepochseconds:r.Message.getFloatingPointFieldWithDefault(t,5,0),remotepeerid:r.Message.getFieldWithDefault(t,6,""),ice:(n=t.getIce())&&proto.api.responses.school_manager.IceMessage.toObject(e,n),peeragentid:r.Message.getFieldWithDefault(t,8,"")};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.school_manager.InitP2PEvent.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.InitP2PEvent;return proto.api.responses.school_manager.InitP2PEvent.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.InitP2PEvent.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new proto.api.responses.school_manager.EventHeader;t.readMessage(n,proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader),e.setHeader(n);break;case 2:n=t.readString(),e.setChannel(n);break;case 3:n=t.readString(),e.setSignalhost(n);break;case 4:n=t.readString(),e.setSignaltoken(n);break;case 5:n=t.readFloat(),e.setSignalexpiryepochseconds(n);break;case 6:n=t.readString(),e.setRemotepeerid(n);break;case 7:n=new proto.api.responses.school_manager.IceMessage,t.readMessage(n,proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader),e.setIce(n);break;case 8:n=t.readString(),e.setPeeragentid(n);break;default:t.skipField()}return e},proto.api.responses.school_manager.InitP2PEvent.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.InitP2PEvent.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.InitP2PEvent.serializeBinaryToWriter=function(e,t){var n=void 0;null!=(n=e.getHeader())&&t.writeMessage(1,n,proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter),(n=e.getChannel()).length>0&&t.writeString(2,n),(n=e.getSignalhost()).length>0&&t.writeString(3,n),(n=e.getSignaltoken()).length>0&&t.writeString(4,n),0!==(n=e.getSignalexpiryepochseconds())&&t.writeFloat(5,n),(n=e.getRemotepeerid()).length>0&&t.writeString(6,n),null!=(n=e.getIce())&&t.writeMessage(7,n,proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter),(n=e.getPeeragentid()).length>0&&t.writeString(8,n)},proto.api.responses.school_manager.InitP2PEvent.prototype.getHeader=function(){return r.Message.getWrapperField(this,proto.api.responses.school_manager.EventHeader,1)},proto.api.responses.school_manager.InitP2PEvent.prototype.setHeader=function(e){return r.Message.setWrapperField(this,1,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.clearHeader=function(){return this.setHeader(void 0)},proto.api.responses.school_manager.InitP2PEvent.prototype.hasHeader=function(){return null!=r.Message.getField(this,1)},proto.api.responses.school_manager.InitP2PEvent.prototype.getChannel=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setChannel=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignalhost=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignalhost=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignaltoken=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignaltoken=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignalexpiryepochseconds=function(){return r.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignalexpiryepochseconds=function(e){return r.Message.setProto3FloatField(this,5,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getRemotepeerid=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setRemotepeerid=function(e){return r.Message.setProto3StringField(this,6,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getIce=function(){return r.Message.getWrapperField(this,proto.api.responses.school_manager.IceMessage,7)},proto.api.responses.school_manager.InitP2PEvent.prototype.setIce=function(e){return r.Message.setWrapperField(this,7,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.clearIce=function(){return this.setIce(void 0)},proto.api.responses.school_manager.InitP2PEvent.prototype.hasIce=function(){return null!=r.Message.getField(this,7)},proto.api.responses.school_manager.InitP2PEvent.prototype.getPeeragentid=function(){return r.Message.getFieldWithDefault(this,8,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setPeeragentid=function(e){return r.Message.setProto3StringField(this,8,e)},proto.api.responses.school_manager.IceServers.repeatedFields_=[3],r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.IceServers.prototype.toObject=function(e){return proto.api.responses.school_manager.IceServers.toObject(e,this)},proto.api.responses.school_manager.IceServers.toObject=function(e,t){var n,o={username:r.Message.getFieldWithDefault(t,1,""),credential:r.Message.getFieldWithDefault(t,2,""),urlsList:null==(n=r.Message.getRepeatedField(t,3))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.school_manager.IceServers.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.IceServers;return proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setCredential(n);break;case 3:n=t.readString(),e.addUrls(n);break;default:t.skipField()}return e},proto.api.responses.school_manager.IceServers.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.IceServers.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.IceServers.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getCredential()).length>0&&t.writeString(2,n),(n=e.getUrlsList()).length>0&&t.writeRepeatedString(3,n)},proto.api.responses.school_manager.IceServers.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.IceServers.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.IceServers.prototype.getCredential=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.school_manager.IceServers.prototype.setCredential=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.school_manager.IceServers.prototype.getUrlsList=function(){return r.Message.getRepeatedField(this,3)},proto.api.responses.school_manager.IceServers.prototype.setUrlsList=function(e){return r.Message.setField(this,3,e||[])},proto.api.responses.school_manager.IceServers.prototype.addUrls=function(e,t){return r.Message.addToRepeatedField(this,3,e,t)},proto.api.responses.school_manager.IceServers.prototype.clearUrlsList=function(){return this.setUrlsList([])},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.IceMessage.prototype.toObject=function(e){return proto.api.responses.school_manager.IceMessage.toObject(e,this)},proto.api.responses.school_manager.IceMessage.toObject=function(e,t){var n,r={iceservers:(n=t.getIceservers())&&proto.api.responses.school_manager.IceServers.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.api.responses.school_manager.IceMessage.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.IceMessage;return proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.api.responses.school_manager.IceServers;t.readMessage(n,proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader),e.setIceservers(n)}else t.skipField();return e},proto.api.responses.school_manager.IceMessage.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getIceservers())&&t.writeMessage(1,n,proto.api.responses.school_manager.IceServers.serializeBinaryToWriter)},proto.api.responses.school_manager.IceMessage.prototype.getIceservers=function(){return r.Message.getWrapperField(this,proto.api.responses.school_manager.IceServers,1)},proto.api.responses.school_manager.IceMessage.prototype.setIceservers=function(e){return r.Message.setWrapperField(this,1,e)},proto.api.responses.school_manager.IceMessage.prototype.clearIceservers=function(){return this.setIceservers(void 0)},proto.api.responses.school_manager.IceMessage.prototype.hasIceservers=function(){return null!=r.Message.getField(this,1)},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.EventHeader.prototype.toObject=function(e){return proto.api.responses.school_manager.EventHeader.toObject(e,this)},proto.api.responses.school_manager.EventHeader.toObject=function(e,t){var n={timestampepochms:r.Message.getFieldWithDefault(t,1,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.EventHeader.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.school_manager.EventHeader;return proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader(n,t)},proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readString();e.setTimestampepochms(n)}else t.skipField();return e},proto.api.responses.school_manager.EventHeader.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter=function(e,t){var n;(n=e.getTimestampepochms()).length>0&&t.writeString(1,n)},proto.api.responses.school_manager.EventHeader.prototype.getTimestampepochms=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.EventHeader.prototype.setTimestampepochms=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.EventType={MESSAGE:0,OPEN_TAB:1,POLICY_UPDATE:2,CLASS_STARTED:3,INIT_P2P:4,CONFIG_UPDATE:5,CLOSE_TAB:6},o.object.extend(t,proto.api.responses.school_manager)},619:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(7741);o.object.extend(proto,s),o.exportSymbol("proto.api.responses.v2.AutoEnrolResponse",null,i),o.exportSymbol("proto.api.responses.v2.AutoEnrolmentDetails",null,i),proto.api.responses.v2.AutoEnrolResponse=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.AutoEnrolResponse,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.AutoEnrolResponse.displayName="proto.api.responses.v2.AutoEnrolResponse"),proto.api.responses.v2.AutoEnrolmentDetails=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.AutoEnrolmentDetails,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.AutoEnrolmentDetails.displayName="proto.api.responses.v2.AutoEnrolmentDetails"),r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.AutoEnrolResponse.prototype.toObject=function(e){return proto.api.responses.v2.AutoEnrolResponse.toObject(e,this)},proto.api.responses.v2.AutoEnrolResponse.toObject=function(e,t){var n,o={id:r.Message.getFieldWithDefault(t,1,""),authtoken:r.Message.getFieldWithDefault(t,2,""),state:r.Message.getFieldWithDefault(t,3,0),mac:r.Message.getFieldWithDefault(t,4,""),providerauth:(n=t.getProviderauth())&&proto.api.responses.v2.AutoEnrolmentDetails.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.v2.AutoEnrolResponse.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.AutoEnrolResponse;return proto.api.responses.v2.AutoEnrolResponse.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.AutoEnrolResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setId(n);break;case 2:n=t.readString(),e.setAuthtoken(n);break;case 3:n=t.readEnum(),e.setState(n);break;case 4:n=t.readString(),e.setMac(n);break;case 5:n=new proto.api.responses.v2.AutoEnrolmentDetails,t.readMessage(n,proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader),e.setProviderauth(n);break;default:t.skipField()}return e},proto.api.responses.v2.AutoEnrolResponse.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.AutoEnrolResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.AutoEnrolResponse.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getId()).length>0&&t.writeString(1,n),(n=e.getAuthtoken()).length>0&&t.writeString(2,n),0!==(n=e.getState())&&t.writeEnum(3,n),(n=e.getMac()).length>0&&t.writeString(4,n),null!=(n=e.getProviderauth())&&t.writeMessage(5,n,proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter)},proto.api.responses.v2.AutoEnrolResponse.prototype.getId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getAuthtoken=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setAuthtoken=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getState=function(){return r.Message.getFieldWithDefault(this,3,0)},proto.api.responses.v2.AutoEnrolResponse.prototype.setState=function(e){return r.Message.setProto3EnumField(this,3,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getMac=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setMac=function(e){return r.Message.setProto3StringField(this,4,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getProviderauth=function(){return r.Message.getWrapperField(this,proto.api.responses.v2.AutoEnrolmentDetails,5)},proto.api.responses.v2.AutoEnrolResponse.prototype.setProviderauth=function(e){return r.Message.setWrapperField(this,5,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.clearProviderauth=function(){return this.setProviderauth(void 0)},proto.api.responses.v2.AutoEnrolResponse.prototype.hasProviderauth=function(){return null!=r.Message.getField(this,5)},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.AutoEnrolmentDetails.prototype.toObject=function(e){return proto.api.responses.v2.AutoEnrolmentDetails.toObject(e,this)},proto.api.responses.v2.AutoEnrolmentDetails.toObject=function(e,t){var n={username:r.Message.getFieldWithDefault(t,1,""),providertype:r.Message.getFieldWithDefault(t,2,""),applianceid:r.Message.getFieldWithDefault(t,3,""),region:r.Message.getFieldWithDefault(t,4,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.AutoEnrolmentDetails;return proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setProvidertype(n);break;case 3:n=t.readString(),e.setApplianceid(n);break;case 4:n=t.readString(),e.setRegion(n);break;default:t.skipField()}return e},proto.api.responses.v2.AutoEnrolmentDetails.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getProvidertype()).length>0&&t.writeString(2,n),(n=e.getApplianceid()).length>0&&t.writeString(3,n),(n=e.getRegion()).length>0&&t.writeString(4,n)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getProvidertype=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setProvidertype=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getApplianceid=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setApplianceid=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getRegion=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setRegion=function(e){return r.Message.setProto3StringField(this,4,e)},o.object.extend(t,proto.api.responses.v2)},2658:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(7198);o.object.extend(proto,s);var a=n(7741);o.object.extend(proto,a),o.exportSymbol("proto.api.responses.v2.EnrollManagedDeviceResponse",null,i),o.exportSymbol("proto.api.responses.v2.EnrollManagedDeviceResponse.User",null,i),proto.api.responses.v2.EnrollManagedDeviceResponse=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.EnrollManagedDeviceResponse,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.EnrollManagedDeviceResponse.displayName="proto.api.responses.v2.EnrollManagedDeviceResponse"),proto.api.responses.v2.EnrollManagedDeviceResponse.User=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.api.responses.v2.EnrollManagedDeviceResponse.User,r.Message),o.DEBUG&&!COMPILED&&(proto.api.responses.v2.EnrollManagedDeviceResponse.User.displayName="proto.api.responses.v2.EnrollManagedDeviceResponse.User"),r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.toObject=function(e){return proto.api.responses.v2.EnrollManagedDeviceResponse.toObject(e,this)},proto.api.responses.v2.EnrollManagedDeviceResponse.toObject=function(e,t){var n,o={authtoken:r.Message.getFieldWithDefault(t,1,""),status:r.Message.getFieldWithDefault(t,2,0),id:r.Message.getFieldWithDefault(t,3,""),user:(n=t.getUser())&&proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject(e,n),region:r.Message.getFieldWithDefault(t,5,"")};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.EnrollManagedDeviceResponse;return proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setAuthtoken(n);break;case 2:n=t.readEnum(),e.setStatus(n);break;case 3:n=t.readString(),e.setId(n);break;case 4:n=new proto.api.responses.v2.EnrollManagedDeviceResponse.User,t.readMessage(n,proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader),e.setUser(n);break;case 5:n=t.readString(),e.setRegion(n);break;default:t.skipField()}return e},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.EnrollManagedDeviceResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.EnrollManagedDeviceResponse.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getAuthtoken()).length>0&&t.writeString(1,n),0!==(n=e.getStatus())&&t.writeEnum(2,n),(n=e.getId()).length>0&&t.writeString(3,n),null!=(n=e.getUser())&&t.writeMessage(4,n,proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter),(n=e.getRegion()).length>0&&t.writeString(5,n)},r.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.toObject=function(e){return proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject(e,this)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject=function(e,t){var n,o={id:r.Message.getFieldWithDefault(t,1,""),samaccountid:r.Message.getFieldWithDefault(t,2,""),name:(n=t.getName())&&s.UserName.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.api.responses.v2.EnrollManagedDeviceResponse.User;return proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader(n,t)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setId(n);break;case 2:n=t.readString(),e.setSamaccountid(n);break;case 3:n=new s.UserName,t.readMessage(n,s.UserName.deserializeBinaryFromReader),e.setName(n);break;default:t.skipField()}return e},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getId()).length>0&&t.writeString(1,n),(n=e.getSamaccountid()).length>0&&t.writeString(2,n),null!=(n=e.getName())&&t.writeMessage(3,n,s.UserName.serializeBinaryToWriter)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getSamaccountid=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setSamaccountid=function(e){return r.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getName=function(){return r.Message.getWrapperField(this,s.UserName,3)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setName=function(e){return r.Message.setWrapperField(this,3,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.clearName=function(){return this.setName(void 0)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.hasName=function(){return null!=r.Message.getField(this,3)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getAuthtoken=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setAuthtoken=function(e){return r.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getStatus=function(){return r.Message.getFieldWithDefault(this,2,0)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setStatus=function(e){return r.Message.setProto3EnumField(this,2,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getId=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setId=function(e){return r.Message.setProto3StringField(this,3,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getUser=function(){return r.Message.getWrapperField(this,proto.api.responses.v2.EnrollManagedDeviceResponse.User,4)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setUser=function(e){return r.Message.setWrapperField(this,4,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.clearUser=function(){return this.setUser(void 0)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.hasUser=function(){return null!=r.Message.getField(this,4)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getRegion=function(){return r.Message.getFieldWithDefault(this,5,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setRegion=function(e){return r.Message.setProto3StringField(this,5,e)},o.object.extend(t,proto.api.responses.v2)},8326:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(8776);o.object.extend(proto,s),o.exportSymbol("proto.classwize.ClasswizeEvent",null,i),proto.classwize.ClasswizeEvent=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.classwize.ClasswizeEvent,r.Message),o.DEBUG&&!COMPILED&&(proto.classwize.ClasswizeEvent.displayName="proto.classwize.ClasswizeEvent"),r.Message.GENERATE_TO_OBJECT&&(proto.classwize.ClasswizeEvent.prototype.toObject=function(e){return proto.classwize.ClasswizeEvent.toObject(e,this)},proto.classwize.ClasswizeEvent.toObject=function(e,t){var n,r={messages:(n=t.getMessages())&&s.EventMessage.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}),proto.classwize.ClasswizeEvent.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.classwize.ClasswizeEvent;return proto.classwize.ClasswizeEvent.deserializeBinaryFromReader(n,t)},proto.classwize.ClasswizeEvent.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new s.EventMessage;t.readMessage(n,s.EventMessage.deserializeBinaryFromReader),e.setMessages(n)}else t.skipField();return e},proto.classwize.ClasswizeEvent.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.classwize.ClasswizeEvent.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.classwize.ClasswizeEvent.serializeBinaryToWriter=function(e,t){var n;null!=(n=e.getMessages())&&t.writeMessage(1,n,s.EventMessage.serializeBinaryToWriter)},proto.classwize.ClasswizeEvent.prototype.getMessages=function(){return r.Message.getWrapperField(this,s.EventMessage,1)},proto.classwize.ClasswizeEvent.prototype.setMessages=function(e){return r.Message.setWrapperField(this,1,e)},proto.classwize.ClasswizeEvent.prototype.clearMessages=function(){return this.setMessages(void 0)},proto.classwize.ClasswizeEvent.prototype.hasMessages=function(){return null!=r.Message.getField(this,1)},o.object.extend(t,proto.classwize)},1071:(e,t,n)=>{var r=n(3157),o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),i=n(1458);r.object.extend(proto,i);var s=n(8326);r.object.extend(proto,s);var a=n(245);r.object.extend(proto,a)},5635:(e,t,n)=>{n(1071);var r=n(1458),o=n(8326),i=n(245),s=n(459).grpc,a=function(){function e(){}return e.serviceName="classwize.ClasswizeApi",e}();function c(e,t){this.serviceHost=e,this.options=t||{}}a.ReceiveEvents={methodName:"ReceiveEvents",service:a,requestStream:!1,responseStream:!0,requestType:r.Empty,responseType:o.ClasswizeEvent},a.UpdateTabs={methodName:"UpdateTabs",service:a,requestStream:!1,responseStream:!1,requestType:i.WindowUpdate,responseType:r.Empty},t.ClasswizeApi=a,c.prototype.receiveEvents=function(e,t){var n={data:[],end:[],status:[]},r=s.invoke(a.ReceiveEvents,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onMessage:function(e){n.data.forEach((function(t){t(e)}))},onEnd:function(e,t,r){n.status.forEach((function(n){n({code:e,details:t,metadata:r})})),n.end.forEach((function(n){n({code:e,details:t,metadata:r})})),n=null}});return{on:function(e,t){return n[e].push(t),this},cancel:function(){n=null,r.close()}}},c.prototype.updateTabs=function(e,t,n){2===arguments.length&&(n=arguments[1]);var r=s.unary(a.UpdateTabs,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(n)if(e.status!==s.Code.OK){var t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,n(t,null)}else n(null,e.message)}});return{cancel:function(){n=null,r.close()}}},t.ClasswizeApiClient=c},409:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(6669);o.object.extend(proto,s),o.exportSymbol("proto.companion.CompanionRegistrationRequest",null,i),o.exportSymbol("proto.companion.CompanionRegistrationResponse",null,i),o.exportSymbol("proto.companion.ConsoleLog",null,i),o.exportSymbol("proto.companion.EnrolmentDetails",null,i),o.exportSymbol("proto.companion.Functionality",null,i),proto.companion.CompanionRegistrationRequest=function(e){r.Message.initialize(this,e,0,-1,proto.companion.CompanionRegistrationRequest.repeatedFields_,null)},o.inherits(proto.companion.CompanionRegistrationRequest,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.CompanionRegistrationRequest.displayName="proto.companion.CompanionRegistrationRequest"),proto.companion.EnrolmentDetails=function(e){r.Message.initialize(this,e,0,-1,proto.companion.EnrolmentDetails.repeatedFields_,null)},o.inherits(proto.companion.EnrolmentDetails,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.EnrolmentDetails.displayName="proto.companion.EnrolmentDetails"),proto.companion.CompanionRegistrationResponse=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.companion.CompanionRegistrationResponse,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.CompanionRegistrationResponse.displayName="proto.companion.CompanionRegistrationResponse"),proto.companion.ConsoleLog=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.companion.ConsoleLog,r.Message),o.DEBUG&&!COMPILED&&(proto.companion.ConsoleLog.displayName="proto.companion.ConsoleLog"),proto.companion.CompanionRegistrationRequest.repeatedFields_=[3],r.Message.GENERATE_TO_OBJECT&&(proto.companion.CompanionRegistrationRequest.prototype.toObject=function(e){return proto.companion.CompanionRegistrationRequest.toObject(e,this)},proto.companion.CompanionRegistrationRequest.toObject=function(e,t){var n,o={name:r.Message.getFieldWithDefault(t,1,""),version:r.Message.getFieldWithDefault(t,2,""),functionalityList:null==(n=r.Message.getRepeatedField(t,3))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.companion.CompanionRegistrationRequest.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.CompanionRegistrationRequest;return proto.companion.CompanionRegistrationRequest.deserializeBinaryFromReader(n,t)},proto.companion.CompanionRegistrationRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setName(n);break;case 2:n=t.readString(),e.setVersion(n);break;case 3:for(var r=t.isDelimited()?t.readPackedEnum():[t.readEnum()],o=0;o<r.length;o++)e.addFunctionality(r[o]);break;default:t.skipField()}return e},proto.companion.CompanionRegistrationRequest.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.CompanionRegistrationRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.CompanionRegistrationRequest.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getName()).length>0&&t.writeString(1,n),(n=e.getVersion()).length>0&&t.writeString(2,n),(n=e.getFunctionalityList()).length>0&&t.writePackedEnum(3,n)},proto.companion.CompanionRegistrationRequest.prototype.getName=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.CompanionRegistrationRequest.prototype.setName=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.CompanionRegistrationRequest.prototype.getVersion=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.companion.CompanionRegistrationRequest.prototype.setVersion=function(e){return r.Message.setProto3StringField(this,2,e)},proto.companion.CompanionRegistrationRequest.prototype.getFunctionalityList=function(){return r.Message.getRepeatedField(this,3)},proto.companion.CompanionRegistrationRequest.prototype.setFunctionalityList=function(e){return r.Message.setField(this,3,e||[])},proto.companion.CompanionRegistrationRequest.prototype.addFunctionality=function(e,t){return r.Message.addToRepeatedField(this,3,e,t)},proto.companion.CompanionRegistrationRequest.prototype.clearFunctionalityList=function(){return this.setFunctionalityList([])},proto.companion.EnrolmentDetails.repeatedFields_=[5,7,8,10],r.Message.GENERATE_TO_OBJECT&&(proto.companion.EnrolmentDetails.prototype.toObject=function(e){return proto.companion.EnrolmentDetails.toObject(e,this)},proto.companion.EnrolmentDetails.toObject=function(e,t){var n,o={username:r.Message.getFieldWithDefault(t,1,""),applianceid:r.Message.getFieldWithDefault(t,2,""),region:r.Message.getFieldWithDefault(t,3,""),primaryipaddress:r.Message.getFieldWithDefault(t,4,""),enabledfeaturesList:null==(n=r.Message.getRepeatedField(t,5))?void 0:n,devicetoken:r.Message.getFieldWithDefault(t,6,""),featureflagsList:null==(n=r.Message.getRepeatedField(t,7))?void 0:n,ipaddressesList:null==(n=r.Message.getRepeatedField(t,8))?void 0:n,enrolmentinformation:(n=t.getEnrolmentinformation())&&s.EnrolmentInformation.toObject(e,n),macaddressesList:null==(n=r.Message.getRepeatedField(t,10))?void 0:n};return e&&(o.$jspbMessageInstance=t),o}),proto.companion.EnrolmentDetails.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.EnrolmentDetails;return proto.companion.EnrolmentDetails.deserializeBinaryFromReader(n,t)},proto.companion.EnrolmentDetails.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setApplianceid(n);break;case 3:n=t.readString(),e.setRegion(n);break;case 4:n=t.readString(),e.setPrimaryipaddress(n);break;case 5:n=t.readString(),e.addEnabledfeatures(n);break;case 6:n=t.readString(),e.setDevicetoken(n);break;case 7:n=t.readString(),e.addFeatureflags(n);break;case 8:n=t.readString(),e.addIpaddresses(n);break;case 9:n=new s.EnrolmentInformation,t.readMessage(n,s.EnrolmentInformation.deserializeBinaryFromReader),e.setEnrolmentinformation(n);break;case 10:n=t.readString(),e.addMacaddresses(n);break;default:t.skipField()}return e},proto.companion.EnrolmentDetails.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.EnrolmentDetails.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.EnrolmentDetails.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getApplianceid()).length>0&&t.writeString(2,n),(n=e.getRegion()).length>0&&t.writeString(3,n),(n=e.getPrimaryipaddress()).length>0&&t.writeString(4,n),(n=e.getEnabledfeaturesList()).length>0&&t.writeRepeatedString(5,n),(n=e.getDevicetoken()).length>0&&t.writeString(6,n),(n=e.getFeatureflagsList()).length>0&&t.writeRepeatedString(7,n),(n=e.getIpaddressesList()).length>0&&t.writeRepeatedString(8,n),null!=(n=e.getEnrolmentinformation())&&t.writeMessage(9,n,s.EnrolmentInformation.serializeBinaryToWriter),(n=e.getMacaddressesList()).length>0&&t.writeRepeatedString(10,n)},proto.companion.EnrolmentDetails.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.EnrolmentDetails.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.EnrolmentDetails.prototype.getApplianceid=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.companion.EnrolmentDetails.prototype.setApplianceid=function(e){return r.Message.setProto3StringField(this,2,e)},proto.companion.EnrolmentDetails.prototype.getRegion=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.companion.EnrolmentDetails.prototype.setRegion=function(e){return r.Message.setProto3StringField(this,3,e)},proto.companion.EnrolmentDetails.prototype.getPrimaryipaddress=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.companion.EnrolmentDetails.prototype.setPrimaryipaddress=function(e){return r.Message.setProto3StringField(this,4,e)},proto.companion.EnrolmentDetails.prototype.getEnabledfeaturesList=function(){return r.Message.getRepeatedField(this,5)},proto.companion.EnrolmentDetails.prototype.setEnabledfeaturesList=function(e){return r.Message.setField(this,5,e||[])},proto.companion.EnrolmentDetails.prototype.addEnabledfeatures=function(e,t){return r.Message.addToRepeatedField(this,5,e,t)},proto.companion.EnrolmentDetails.prototype.clearEnabledfeaturesList=function(){return this.setEnabledfeaturesList([])},proto.companion.EnrolmentDetails.prototype.getDevicetoken=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.companion.EnrolmentDetails.prototype.setDevicetoken=function(e){return r.Message.setProto3StringField(this,6,e)},proto.companion.EnrolmentDetails.prototype.getFeatureflagsList=function(){return r.Message.getRepeatedField(this,7)},proto.companion.EnrolmentDetails.prototype.setFeatureflagsList=function(e){return r.Message.setField(this,7,e||[])},proto.companion.EnrolmentDetails.prototype.addFeatureflags=function(e,t){return r.Message.addToRepeatedField(this,7,e,t)},proto.companion.EnrolmentDetails.prototype.clearFeatureflagsList=function(){return this.setFeatureflagsList([])},proto.companion.EnrolmentDetails.prototype.getIpaddressesList=function(){return r.Message.getRepeatedField(this,8)},proto.companion.EnrolmentDetails.prototype.setIpaddressesList=function(e){return r.Message.setField(this,8,e||[])},proto.companion.EnrolmentDetails.prototype.addIpaddresses=function(e,t){return r.Message.addToRepeatedField(this,8,e,t)},proto.companion.EnrolmentDetails.prototype.clearIpaddressesList=function(){return this.setIpaddressesList([])},proto.companion.EnrolmentDetails.prototype.getEnrolmentinformation=function(){return r.Message.getWrapperField(this,s.EnrolmentInformation,9)},proto.companion.EnrolmentDetails.prototype.setEnrolmentinformation=function(e){return r.Message.setWrapperField(this,9,e)},proto.companion.EnrolmentDetails.prototype.clearEnrolmentinformation=function(){return this.setEnrolmentinformation(void 0)},proto.companion.EnrolmentDetails.prototype.hasEnrolmentinformation=function(){return null!=r.Message.getField(this,9)},proto.companion.EnrolmentDetails.prototype.getMacaddressesList=function(){return r.Message.getRepeatedField(this,10)},proto.companion.EnrolmentDetails.prototype.setMacaddressesList=function(e){return r.Message.setField(this,10,e||[])},proto.companion.EnrolmentDetails.prototype.addMacaddresses=function(e,t){return r.Message.addToRepeatedField(this,10,e,t)},proto.companion.EnrolmentDetails.prototype.clearMacaddressesList=function(){return this.setMacaddressesList([])},r.Message.GENERATE_TO_OBJECT&&(proto.companion.CompanionRegistrationResponse.prototype.toObject=function(e){return proto.companion.CompanionRegistrationResponse.toObject(e,this)},proto.companion.CompanionRegistrationResponse.toObject=function(e,t){var n,o={version:r.Message.getFieldWithDefault(t,1,""),enrolmentdetails:(n=t.getEnrolmentdetails())&&proto.companion.EnrolmentDetails.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.companion.CompanionRegistrationResponse.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.CompanionRegistrationResponse;return proto.companion.CompanionRegistrationResponse.deserializeBinaryFromReader(n,t)},proto.companion.CompanionRegistrationResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setVersion(n);break;case 2:n=new proto.companion.EnrolmentDetails,t.readMessage(n,proto.companion.EnrolmentDetails.deserializeBinaryFromReader),e.setEnrolmentdetails(n);break;default:t.skipField()}return e},proto.companion.CompanionRegistrationResponse.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.CompanionRegistrationResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.CompanionRegistrationResponse.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getVersion()).length>0&&t.writeString(1,n),null!=(n=e.getEnrolmentdetails())&&t.writeMessage(2,n,proto.companion.EnrolmentDetails.serializeBinaryToWriter)},proto.companion.CompanionRegistrationResponse.prototype.getVersion=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.CompanionRegistrationResponse.prototype.setVersion=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.CompanionRegistrationResponse.prototype.getEnrolmentdetails=function(){return r.Message.getWrapperField(this,proto.companion.EnrolmentDetails,2)},proto.companion.CompanionRegistrationResponse.prototype.setEnrolmentdetails=function(e){return r.Message.setWrapperField(this,2,e)},proto.companion.CompanionRegistrationResponse.prototype.clearEnrolmentdetails=function(){return this.setEnrolmentdetails(void 0)},proto.companion.CompanionRegistrationResponse.prototype.hasEnrolmentdetails=function(){return null!=r.Message.getField(this,2)},r.Message.GENERATE_TO_OBJECT&&(proto.companion.ConsoleLog.prototype.toObject=function(e){return proto.companion.ConsoleLog.toObject(e,this)},proto.companion.ConsoleLog.toObject=function(e,t){var n={log:r.Message.getFieldWithDefault(t,1,""),loglevel:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.companion.ConsoleLog.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.companion.ConsoleLog;return proto.companion.ConsoleLog.deserializeBinaryFromReader(n,t)},proto.companion.ConsoleLog.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setLog(n);break;case 2:n=t.readString(),e.setLoglevel(n);break;default:t.skipField()}return e},proto.companion.ConsoleLog.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.companion.ConsoleLog.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.ConsoleLog.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getLog()).length>0&&t.writeString(1,n),(n=e.getLoglevel()).length>0&&t.writeString(2,n)},proto.companion.ConsoleLog.prototype.getLog=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.companion.ConsoleLog.prototype.setLog=function(e){return r.Message.setProto3StringField(this,1,e)},proto.companion.ConsoleLog.prototype.getLoglevel=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.companion.ConsoleLog.prototype.setLoglevel=function(e){return r.Message.setProto3StringField(this,2,e)},proto.companion.Functionality={FILTERING:0,REPORTING:1,CLASSWIZE:2},o.object.extend(t,proto.companion)},3934:(e,t,n)=>{var r=n(3157),o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==o&&o||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),i=n(409);r.object.extend(proto,i);var s=n(1458);r.object.extend(proto,s)},7518:(e,t,n)=>{n(3934);var r=n(409),o=n(1458),i=n(459).grpc,s=function(){function e(){}return e.serviceName="companion.CompanionApi",e}();function a(e,t){this.serviceHost=e,this.options=t||{}}s.RegisterCompanion={methodName:"RegisterCompanion",service:s,requestStream:!1,responseStream:!0,requestType:r.CompanionRegistrationRequest,responseType:r.CompanionRegistrationResponse},s.ConsoleLogStream={methodName:"ConsoleLogStream",service:s,requestStream:!0,responseStream:!1,requestType:r.ConsoleLog,responseType:o.Empty},t.CompanionApi=s,a.prototype.registerCompanion=function(e,t){var n={data:[],end:[],status:[]},r=i.invoke(s.RegisterCompanion,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onMessage:function(e){n.data.forEach((function(t){t(e)}))},onEnd:function(e,t,r){n.status.forEach((function(n){n({code:e,details:t,metadata:r})})),n.end.forEach((function(n){n({code:e,details:t,metadata:r})})),n=null}});return{on:function(e,t){return n[e].push(t),this},cancel:function(){n=null,r.close()}}},a.prototype.consoleLogStream=function(e){var t={end:[],status:[]},n=i.client(s.ConsoleLogStream,{host:this.serviceHost,metadata:e,transport:this.options.transport});return n.onEnd((function(e,n,r){t.status.forEach((function(t){t({code:e,details:n,metadata:r})})),t.end.forEach((function(t){t({code:e,details:n,metadata:r})})),t=null})),{on:function(e,n){return t[e].push(n),this},write:function(t){return n.started||n.start(e),n.send(t),this},end:function(){n.finishSend()},cancel:function(){t=null,n.close()}}},t.CompanionApiClient=a},6669:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=n(2658);o.object.extend(proto,s);var a=n(619);o.object.extend(proto,a),o.exportSymbol("proto.configuration.EnrolmentInformation",null,i),o.exportSymbol("proto.configuration.EnrolmentInformation.UserInformation",null,i),o.exportSymbol("proto.configuration.Properties",null,i),o.exportSymbol("proto.configuration.PropertiesDNSSetting",null,i),o.exportSymbol("proto.configuration.PropertiesManagedDevice",null,i),proto.configuration.Properties=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.Properties,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.Properties.displayName="proto.configuration.Properties"),proto.configuration.EnrolmentInformation=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.EnrolmentInformation,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.EnrolmentInformation.displayName="proto.configuration.EnrolmentInformation"),proto.configuration.EnrolmentInformation.UserInformation=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.EnrolmentInformation.UserInformation,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.EnrolmentInformation.UserInformation.displayName="proto.configuration.EnrolmentInformation.UserInformation"),proto.configuration.PropertiesDNSSetting=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.PropertiesDNSSetting,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.PropertiesDNSSetting.displayName="proto.configuration.PropertiesDNSSetting"),proto.configuration.PropertiesManagedDevice=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.configuration.PropertiesManagedDevice,r.Message),o.DEBUG&&!COMPILED&&(proto.configuration.PropertiesManagedDevice.displayName="proto.configuration.PropertiesManagedDevice"),r.Message.GENERATE_TO_OBJECT&&(proto.configuration.Properties.prototype.toObject=function(e){return proto.configuration.Properties.toObject(e,this)},proto.configuration.Properties.toObject=function(e,t){var n,o={loggingLevel:r.Message.getFieldWithDefault(t,1,""),deviceToken:r.Message.getFieldWithDefault(t,2,""),deviceId:r.Message.getFieldWithDefault(t,3,""),dnsSettingsMap:(n=t.getDnsSettingsMap())?n.toObject(e,proto.configuration.PropertiesDNSSetting.toObject):[],managedDevice:(n=t.getManagedDevice())&&proto.configuration.PropertiesManagedDevice.toObject(e,n),autoEnrolmentDetails:(n=t.getAutoEnrolmentDetails())&&a.AutoEnrolmentDetails.toObject(e,n),lastSuccessfulEnrollmentUsername:r.Message.getFieldWithDefault(t,13,""),enrolmentInformation:(n=t.getEnrolmentInformation())&&proto.configuration.EnrolmentInformation.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.configuration.Properties.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.Properties;return proto.configuration.Properties.deserializeBinaryFromReader(n,t)},proto.configuration.Properties.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setLoggingLevel(n);break;case 2:n=t.readString(),e.setDeviceToken(n);break;case 3:n=t.readString(),e.setDeviceId(n);break;case 10:n=e.getDnsSettingsMap(),t.readMessage(n,(function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readMessage,proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader,"",new proto.configuration.PropertiesDNSSetting)}));break;case 11:n=new proto.configuration.PropertiesManagedDevice,t.readMessage(n,proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader),e.setManagedDevice(n);break;case 12:n=new a.AutoEnrolmentDetails,t.readMessage(n,a.AutoEnrolmentDetails.deserializeBinaryFromReader),e.setAutoEnrolmentDetails(n);break;case 13:n=t.readString(),e.setLastSuccessfulEnrollmentUsername(n);break;case 14:n=new proto.configuration.EnrolmentInformation,t.readMessage(n,proto.configuration.EnrolmentInformation.deserializeBinaryFromReader),e.setEnrolmentInformation(n);break;default:t.skipField()}return e},proto.configuration.Properties.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.Properties.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.Properties.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getLoggingLevel()).length>0&&t.writeString(1,n),(n=e.getDeviceToken()).length>0&&t.writeString(2,n),(n=e.getDeviceId()).length>0&&t.writeString(3,n),(n=e.getDnsSettingsMap(!0))&&n.getLength()>0&&n.serializeBinary(10,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeMessage,proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter),null!=(n=e.getManagedDevice())&&t.writeMessage(11,n,proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter),null!=(n=e.getAutoEnrolmentDetails())&&t.writeMessage(12,n,a.AutoEnrolmentDetails.serializeBinaryToWriter),(n=e.getLastSuccessfulEnrollmentUsername()).length>0&&t.writeString(13,n),null!=(n=e.getEnrolmentInformation())&&t.writeMessage(14,n,proto.configuration.EnrolmentInformation.serializeBinaryToWriter)},proto.configuration.Properties.prototype.getLoggingLevel=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.Properties.prototype.setLoggingLevel=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.Properties.prototype.getDeviceToken=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.Properties.prototype.setDeviceToken=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.Properties.prototype.getDeviceId=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.configuration.Properties.prototype.setDeviceId=function(e){return r.Message.setProto3StringField(this,3,e)},proto.configuration.Properties.prototype.getDnsSettingsMap=function(e){return r.Message.getMapField(this,10,e,proto.configuration.PropertiesDNSSetting)},proto.configuration.Properties.prototype.clearDnsSettingsMap=function(){return this.getDnsSettingsMap().clear(),this},proto.configuration.Properties.prototype.getManagedDevice=function(){return r.Message.getWrapperField(this,proto.configuration.PropertiesManagedDevice,11)},proto.configuration.Properties.prototype.setManagedDevice=function(e){return r.Message.setWrapperField(this,11,e)},proto.configuration.Properties.prototype.clearManagedDevice=function(){return this.setManagedDevice(void 0)},proto.configuration.Properties.prototype.hasManagedDevice=function(){return null!=r.Message.getField(this,11)},proto.configuration.Properties.prototype.getAutoEnrolmentDetails=function(){return r.Message.getWrapperField(this,a.AutoEnrolmentDetails,12)},proto.configuration.Properties.prototype.setAutoEnrolmentDetails=function(e){return r.Message.setWrapperField(this,12,e)},proto.configuration.Properties.prototype.clearAutoEnrolmentDetails=function(){return this.setAutoEnrolmentDetails(void 0)},proto.configuration.Properties.prototype.hasAutoEnrolmentDetails=function(){return null!=r.Message.getField(this,12)},proto.configuration.Properties.prototype.getLastSuccessfulEnrollmentUsername=function(){return r.Message.getFieldWithDefault(this,13,"")},proto.configuration.Properties.prototype.setLastSuccessfulEnrollmentUsername=function(e){return r.Message.setProto3StringField(this,13,e)},proto.configuration.Properties.prototype.getEnrolmentInformation=function(){return r.Message.getWrapperField(this,proto.configuration.EnrolmentInformation,14)},proto.configuration.Properties.prototype.setEnrolmentInformation=function(e){return r.Message.setWrapperField(this,14,e)},proto.configuration.Properties.prototype.clearEnrolmentInformation=function(){return this.setEnrolmentInformation(void 0)},proto.configuration.Properties.prototype.hasEnrolmentInformation=function(){return null!=r.Message.getField(this,14)},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.EnrolmentInformation.prototype.toObject=function(e){return proto.configuration.EnrolmentInformation.toObject(e,this)},proto.configuration.EnrolmentInformation.toObject=function(e,t){var n,o={provider:r.Message.getFieldWithDefault(t,1,""),apiToken:r.Message.getFieldWithDefault(t,2,""),customerId:r.Message.getFieldWithDefault(t,3,""),tenantId:r.Message.getFieldWithDefault(t,4,""),userInformation:(n=t.getUserInformation())&&proto.configuration.EnrolmentInformation.UserInformation.toObject(e,n),apiRegion:r.Message.getFieldWithDefault(t,6,""),metadataMap:(n=t.getMetadataMap())?n.toObject(e,void 0):[]};return e&&(o.$jspbMessageInstance=t),o}),proto.configuration.EnrolmentInformation.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.EnrolmentInformation;return proto.configuration.EnrolmentInformation.deserializeBinaryFromReader(n,t)},proto.configuration.EnrolmentInformation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setProvider(n);break;case 2:n=t.readString(),e.setApiToken(n);break;case 3:n=t.readString(),e.setCustomerId(n);break;case 4:n=t.readString(),e.setTenantId(n);break;case 5:n=new proto.configuration.EnrolmentInformation.UserInformation,t.readMessage(n,proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader),e.setUserInformation(n);break;case 6:n=t.readString(),e.setApiRegion(n);break;case 10:n=e.getMetadataMap(),t.readMessage(n,(function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readString,r.BinaryReader.prototype.readString,null,"","")}));break;default:t.skipField()}return e},proto.configuration.EnrolmentInformation.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.EnrolmentInformation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.EnrolmentInformation.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getProvider()).length>0&&t.writeString(1,n),(n=e.getApiToken()).length>0&&t.writeString(2,n),(n=e.getCustomerId()).length>0&&t.writeString(3,n),null!=(n=r.Message.getField(e,4))&&t.writeString(4,n),null!=(n=e.getUserInformation())&&t.writeMessage(5,n,proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter),null!=(n=r.Message.getField(e,6))&&t.writeString(6,n),(n=e.getMetadataMap(!0))&&n.getLength()>0&&n.serializeBinary(10,t,r.BinaryWriter.prototype.writeString,r.BinaryWriter.prototype.writeString)},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.EnrolmentInformation.UserInformation.prototype.toObject=function(e){return proto.configuration.EnrolmentInformation.UserInformation.toObject(e,this)},proto.configuration.EnrolmentInformation.UserInformation.toObject=function(e,t){var n={username:r.Message.getFieldWithDefault(t,1,""),usernameRaw:r.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.configuration.EnrolmentInformation.UserInformation.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.EnrolmentInformation.UserInformation;return proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader(n,t)},proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUsername(n);break;case 2:n=t.readString(),e.setUsernameRaw(n);break;default:t.skipField()}return e},proto.configuration.EnrolmentInformation.UserInformation.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getUsername()).length>0&&t.writeString(1,n),(n=e.getUsernameRaw()).length>0&&t.writeString(2,n)},proto.configuration.EnrolmentInformation.UserInformation.prototype.getUsername=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.EnrolmentInformation.UserInformation.prototype.setUsername=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.EnrolmentInformation.UserInformation.prototype.getUsernameRaw=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.EnrolmentInformation.UserInformation.prototype.setUsernameRaw=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.EnrolmentInformation.prototype.getProvider=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.EnrolmentInformation.prototype.setProvider=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.EnrolmentInformation.prototype.getApiToken=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.EnrolmentInformation.prototype.setApiToken=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.EnrolmentInformation.prototype.getCustomerId=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.configuration.EnrolmentInformation.prototype.setCustomerId=function(e){return r.Message.setProto3StringField(this,3,e)},proto.configuration.EnrolmentInformation.prototype.getTenantId=function(){return r.Message.getFieldWithDefault(this,4,"")},proto.configuration.EnrolmentInformation.prototype.setTenantId=function(e){return r.Message.setField(this,4,e)},proto.configuration.EnrolmentInformation.prototype.clearTenantId=function(){return r.Message.setField(this,4,void 0)},proto.configuration.EnrolmentInformation.prototype.hasTenantId=function(){return null!=r.Message.getField(this,4)},proto.configuration.EnrolmentInformation.prototype.getUserInformation=function(){return r.Message.getWrapperField(this,proto.configuration.EnrolmentInformation.UserInformation,5)},proto.configuration.EnrolmentInformation.prototype.setUserInformation=function(e){return r.Message.setWrapperField(this,5,e)},proto.configuration.EnrolmentInformation.prototype.clearUserInformation=function(){return this.setUserInformation(void 0)},proto.configuration.EnrolmentInformation.prototype.hasUserInformation=function(){return null!=r.Message.getField(this,5)},proto.configuration.EnrolmentInformation.prototype.getApiRegion=function(){return r.Message.getFieldWithDefault(this,6,"")},proto.configuration.EnrolmentInformation.prototype.setApiRegion=function(e){return r.Message.setField(this,6,e)},proto.configuration.EnrolmentInformation.prototype.clearApiRegion=function(){return r.Message.setField(this,6,void 0)},proto.configuration.EnrolmentInformation.prototype.hasApiRegion=function(){return null!=r.Message.getField(this,6)},proto.configuration.EnrolmentInformation.prototype.getMetadataMap=function(e){return r.Message.getMapField(this,10,e,null)},proto.configuration.EnrolmentInformation.prototype.clearMetadataMap=function(){return this.getMetadataMap().clear(),this},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.PropertiesDNSSetting.prototype.toObject=function(e){return proto.configuration.PropertiesDNSSetting.toObject(e,this)},proto.configuration.PropertiesDNSSetting.toObject=function(e,t){var n={pb_static:r.Message.getBooleanFieldWithDefault(t,1,!1),primaryNameServer:r.Message.getFieldWithDefault(t,2,""),secondaryNameServer:r.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.configuration.PropertiesDNSSetting.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.PropertiesDNSSetting;return proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader(n,t)},proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setStatic(n);break;case 2:n=t.readString(),e.setPrimaryNameServer(n);break;case 3:n=t.readString(),e.setSecondaryNameServer(n);break;default:t.skipField()}return e},proto.configuration.PropertiesDNSSetting.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getStatic())&&t.writeBool(1,n),(n=e.getPrimaryNameServer()).length>0&&t.writeString(2,n),(n=e.getSecondaryNameServer()).length>0&&t.writeString(3,n)},proto.configuration.PropertiesDNSSetting.prototype.getStatic=function(){return r.Message.getBooleanFieldWithDefault(this,1,!1)},proto.configuration.PropertiesDNSSetting.prototype.setStatic=function(e){return r.Message.setProto3BooleanField(this,1,e)},proto.configuration.PropertiesDNSSetting.prototype.getPrimaryNameServer=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.configuration.PropertiesDNSSetting.prototype.setPrimaryNameServer=function(e){return r.Message.setProto3StringField(this,2,e)},proto.configuration.PropertiesDNSSetting.prototype.getSecondaryNameServer=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.configuration.PropertiesDNSSetting.prototype.setSecondaryNameServer=function(e){return r.Message.setProto3StringField(this,3,e)},r.Message.GENERATE_TO_OBJECT&&(proto.configuration.PropertiesManagedDevice.prototype.toObject=function(e){return proto.configuration.PropertiesManagedDevice.toObject(e,this)},proto.configuration.PropertiesManagedDevice.toObject=function(e,t){var n,o={applianceId:r.Message.getFieldWithDefault(t,1,""),enrollmentDetails:(n=t.getEnrollmentDetails())&&s.EnrollManagedDeviceResponse.toObject(e,n)};return e&&(o.$jspbMessageInstance=t),o}),proto.configuration.PropertiesManagedDevice.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.configuration.PropertiesManagedDevice;return proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader(n,t)},proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setApplianceId(n);break;case 2:n=new s.EnrollManagedDeviceResponse,t.readMessage(n,s.EnrollManagedDeviceResponse.deserializeBinaryFromReader),e.setEnrollmentDetails(n);break;default:t.skipField()}return e},proto.configuration.PropertiesManagedDevice.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getApplianceId()).length>0&&t.writeString(1,n),null!=(n=e.getEnrollmentDetails())&&t.writeMessage(2,n,s.EnrollManagedDeviceResponse.serializeBinaryToWriter)},proto.configuration.PropertiesManagedDevice.prototype.getApplianceId=function(){return r.Message.getFieldWithDefault(this,1,"")},proto.configuration.PropertiesManagedDevice.prototype.setApplianceId=function(e){return r.Message.setProto3StringField(this,1,e)},proto.configuration.PropertiesManagedDevice.prototype.getEnrollmentDetails=function(){return r.Message.getWrapperField(this,s.EnrollManagedDeviceResponse,2)},proto.configuration.PropertiesManagedDevice.prototype.setEnrollmentDetails=function(e){return r.Message.setWrapperField(this,2,e)},proto.configuration.PropertiesManagedDevice.prototype.clearEnrollmentDetails=function(){return this.setEnrollmentDetails(void 0)},proto.configuration.PropertiesManagedDevice.prototype.hasEnrollmentDetails=function(){return null!=r.Message.getField(this,2)},o.object.extend(t,proto.configuration)},786:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.reporting.models.Connection",null,i),o.exportSymbol("proto.reporting.models.ConnectionsReport",null,i),proto.reporting.models.ConnectionsReport=function(e){r.Message.initialize(this,e,0,-1,proto.reporting.models.ConnectionsReport.repeatedFields_,null)},o.inherits(proto.reporting.models.ConnectionsReport,r.Message),o.DEBUG&&!COMPILED&&(proto.reporting.models.ConnectionsReport.displayName="proto.reporting.models.ConnectionsReport"),proto.reporting.models.Connection=function(e){r.Message.initialize(this,e,0,-1,proto.reporting.models.Connection.repeatedFields_,null)},o.inherits(proto.reporting.models.Connection,r.Message),o.DEBUG&&!COMPILED&&(proto.reporting.models.Connection.displayName="proto.reporting.models.Connection"),proto.reporting.models.ConnectionsReport.repeatedFields_=[1],r.Message.GENERATE_TO_OBJECT&&(proto.reporting.models.ConnectionsReport.prototype.toObject=function(e){return proto.reporting.models.ConnectionsReport.toObject(e,this)},proto.reporting.models.ConnectionsReport.toObject=function(e,t){var n={itemsList:r.Message.toObjectList(t.getItemsList(),proto.reporting.models.Connection.toObject,e)};return e&&(n.$jspbMessageInstance=t),n}),proto.reporting.models.ConnectionsReport.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.reporting.models.ConnectionsReport;return proto.reporting.models.ConnectionsReport.deserializeBinaryFromReader(n,t)},proto.reporting.models.ConnectionsReport.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new proto.reporting.models.Connection;t.readMessage(n,proto.reporting.models.Connection.deserializeBinaryFromReader),e.addItems(n)}else t.skipField();return e},proto.reporting.models.ConnectionsReport.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.reporting.models.ConnectionsReport.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.reporting.models.ConnectionsReport.serializeBinaryToWriter=function(e,t){var n;(n=e.getItemsList()).length>0&&t.writeRepeatedMessage(1,n,proto.reporting.models.Connection.serializeBinaryToWriter)},proto.reporting.models.ConnectionsReport.prototype.getItemsList=function(){return r.Message.getRepeatedWrapperField(this,proto.reporting.models.Connection,1)},proto.reporting.models.ConnectionsReport.prototype.setItemsList=function(e){return r.Message.setRepeatedWrapperField(this,1,e)},proto.reporting.models.ConnectionsReport.prototype.addItems=function(e,t){return r.Message.addToRepeatedWrapperField(this,1,e,proto.reporting.models.Connection,t)},proto.reporting.models.ConnectionsReport.prototype.clearItemsList=function(){return this.setItemsList([])},proto.reporting.models.Connection.repeatedFields_=[8],r.Message.GENERATE_TO_OBJECT&&(proto.reporting.models.Connection.prototype.toObject=function(e){return proto.reporting.models.Connection.toObject(e,this)},proto.reporting.models.Connection.toObject=function(e,t){var n,o={appFilteringDenied:r.Message.getBooleanFieldWithDefault(t,1,!1),categoryid:r.Message.getFieldWithDefault(t,2,""),destip:r.Message.getFieldWithDefault(t,3,""),destport:r.Message.getFieldWithDefault(t,4,0),download:r.Message.getFieldWithDefault(t,5,0),finalConnectionObject:r.Message.getBooleanFieldWithDefault(t,6,!1),httphost:r.Message.getFieldWithDefault(t,7,""),httpRequestUrisList:null==(n=r.Message.getRepeatedField(t,8))?void 0:n,hwaddress:r.Message.getFieldWithDefault(t,9,""),lifetime:r.Message.getFieldWithDefault(t,10,0),noise:r.Message.getBooleanFieldWithDefault(t,11,!1),packets:r.Message.getFieldWithDefault(t,12,0),protocol:r.Message.getFieldWithDefault(t,13,0),sourceip:r.Message.getFieldWithDefault(t,14,""),subcategoryid:r.Message.getFieldWithDefault(t,15,""),tag:r.Message.getFieldWithDefault(t,16,""),time:r.Message.getFieldWithDefault(t,17,0),upload:r.Message.getFieldWithDefault(t,18,0),user:r.Message.getFieldWithDefault(t,19,""),verdictApplicationRule:r.Message.getFieldWithDefault(t,20,""),reportingtype:r.Message.getFieldWithDefault(t,21,""),extensionconnection:r.Message.getBooleanFieldWithDefault(t,22,!1),hostname:r.Message.getFieldWithDefault(t,23,""),id:r.Message.getFieldWithDefault(t,24,""),agent:r.Message.getFieldWithDefault(t,25,""),hardware:r.Message.getFieldWithDefault(t,26,""),companionModeActive:r.Message.getBooleanFieldWithDefault(t,27,!1),teacherid:r.Message.getFieldWithDefault(t,28,""),resourceType:r.Message.getFieldWithDefault(t,29,""),bypassCode:r.Message.getFieldWithDefault(t,30,""),bypassExpiryTime:r.Message.getFieldWithDefault(t,31,0),htmltitle:r.Message.getFieldWithDefault(t,32,""),filterType:r.Message.getFieldWithDefault(t,33,""),agentInsideNetwork:r.Message.getBooleanFieldWithDefault(t,34,!1),debugChromeVerdictIssued:r.Message.getBooleanFieldWithDefault(t,35,!1),debugChromeRequestid:r.Message.getFieldWithDefault(t,36,""),useragent:r.Message.getFieldWithDefault(t,37,"")};return e&&(o.$jspbMessageInstance=t),o}),proto.reporting.models.Connection.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.reporting.models.Connection;return proto.reporting.models.Connection.deserializeBinaryFromReader(n,t)},proto.reporting.models.Connection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setAppFilteringDenied(n);break;case 2:n=t.readString(),e.setCategoryid(n);break;case 3:n=t.readString(),e.setDestip(n);break;case 4:n=t.readInt32(),e.setDestport(n);break;case 5:n=t.readInt64(),e.setDownload(n);break;case 6:n=t.readBool(),e.setFinalConnectionObject(n);break;case 7:n=t.readString(),e.setHttphost(n);break;case 8:n=t.readString(),e.addHttpRequestUris(n);break;case 9:n=t.readString(),e.setHwaddress(n);break;case 10:n=t.readInt32(),e.setLifetime(n);break;case 11:n=t.readBool(),e.setNoise(n);break;case 12:n=t.readInt32(),e.setPackets(n);break;case 13:n=t.readInt32(),e.setProtocol(n);break;case 14:n=t.readString(),e.setSourceip(n);break;case 15:n=t.readString(),e.setSubcategoryid(n);break;case 16:n=t.readString(),e.setTag(n);break;case 17:n=t.readInt32(),e.setTime(n);break;case 18:n=t.readInt64(),e.setUpload(n);break;case 19:n=t.readString(),e.setUser(n);break;case 20:n=t.readString(),e.setVerdictApplicationRule(n);break;case 21:n=t.readString(),e.setReportingtype(n);break;case 22:n=t.readBool(),e.setExtensionconnection(n);break;case 23:n=t.readString(),e.setHostname(n);break;case 24:n=t.readString(),e.setId(n);break;case 25:n=t.readString(),e.setAgent(n);break;case 26:n=t.readString(),e.setHardware(n);break;case 27:n=t.readBool(),e.setCompanionModeActive(n);break;case 28:n=t.readString(),e.setTeacherid(n);break;case 29:n=t.readString(),e.setResourceType(n);break;case 30:n=t.readString(),e.setBypassCode(n);break;case 31:n=t.readInt64(),e.setBypassExpiryTime(n);break;case 32:n=t.readString(),e.setHtmltitle(n);break;case 33:n=t.readString(),e.setFilterType(n);break;case 34:n=t.readBool(),e.setAgentInsideNetwork(n);break;case 35:n=t.readBool(),e.setDebugChromeVerdictIssued(n);break;case 36:n=t.readString(),e.setDebugChromeRequestid(n);break;case 37:n=t.readString(),e.setUseragent(n);break;default:t.skipField()}return e},proto.reporting.models.Connection.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.reporting.models.Connection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.reporting.models.Connection.serializeBinaryToWriter=function(e,t){var n=void 0;(n=e.getAppFilteringDenied())&&t.writeBool(1,n),(n=e.getCategoryid()).length>0&&t.writeString(2,n),(n=e.getDestip()).length>0&&t.writeString(3,n),0!==(n=e.getDestport())&&t.writeInt32(4,n),0!==(n=e.getDownload())&&t.writeInt64(5,n),(n=e.getFinalConnectionObject())&&t.writeBool(6,n),(n=e.getHttphost()).length>0&&t.writeString(7,n),(n=e.getHttpRequestUrisList()).length>0&&t.writeRepeatedString(8,n),(n=e.getHwaddress()).length>0&&t.writeString(9,n),0!==(n=e.getLifetime())&&t.writeInt32(10,n),(n=e.getNoise())&&t.writeBool(11,n),0!==(n=e.getPackets())&&t.writeInt32(12,n),0!==(n=e.getProtocol())&&t.writeInt32(13,n),(n=e.getSourceip()).length>0&&t.writeString(14,n),(n=e.getSubcategoryid()).length>0&&t.writeString(15,n),(n=e.getTag()).length>0&&t.writeString(16,n),0!==(n=e.getTime())&&t.writeInt32(17,n),0!==(n=e.getUpload())&&t.writeInt64(18,n),(n=e.getUser()).length>0&&t.writeString(19,n),(n=e.getVerdictApplicationRule()).length>0&&t.writeString(20,n),(n=e.getReportingtype()).length>0&&t.writeString(21,n),(n=e.getExtensionconnection())&&t.writeBool(22,n),(n=e.getHostname()).length>0&&t.writeString(23,n),(n=e.getId()).length>0&&t.writeString(24,n),(n=e.getAgent()).length>0&&t.writeString(25,n),(n=e.getHardware()).length>0&&t.writeString(26,n),(n=e.getCompanionModeActive())&&t.writeBool(27,n),null!=(n=r.Message.getField(e,28))&&t.writeString(28,n),(n=e.getResourceType()).length>0&&t.writeString(29,n),(n=e.getBypassCode()).length>0&&t.writeString(30,n),0!==(n=e.getBypassExpiryTime())&&t.writeInt64(31,n),(n=e.getHtmltitle()).length>0&&t.writeString(32,n),(n=e.getFilterType()).length>0&&t.writeString(33,n),(n=e.getAgentInsideNetwork())&&t.writeBool(34,n),(n=e.getDebugChromeVerdictIssued())&&t.writeBool(35,n),(n=e.getDebugChromeRequestid()).length>0&&t.writeString(36,n),(n=e.getUseragent()).length>0&&t.writeString(37,n)},proto.reporting.models.Connection.prototype.getAppFilteringDenied=function(){return r.Message.getBooleanFieldWithDefault(this,1,!1)},proto.reporting.models.Connection.prototype.setAppFilteringDenied=function(e){return r.Message.setProto3BooleanField(this,1,e)},proto.reporting.models.Connection.prototype.getCategoryid=function(){return r.Message.getFieldWithDefault(this,2,"")},proto.reporting.models.Connection.prototype.setCategoryid=function(e){return r.Message.setProto3StringField(this,2,e)},proto.reporting.models.Connection.prototype.getDestip=function(){return r.Message.getFieldWithDefault(this,3,"")},proto.reporting.models.Connection.prototype.setDestip=function(e){return r.Message.setProto3StringField(this,3,e)},proto.reporting.models.Connection.prototype.getDestport=function(){return r.Message.getFieldWithDefault(this,4,0)},proto.reporting.models.Connection.prototype.setDestport=function(e){return r.Message.setProto3IntField(this,4,e)},proto.reporting.models.Connection.prototype.getDownload=function(){return r.Message.getFieldWithDefault(this,5,0)},proto.reporting.models.Connection.prototype.setDownload=function(e){return r.Message.setProto3IntField(this,5,e)},proto.reporting.models.Connection.prototype.getFinalConnectionObject=function(){return r.Message.getBooleanFieldWithDefault(this,6,!1)},proto.reporting.models.Connection.prototype.setFinalConnectionObject=function(e){return r.Message.setProto3BooleanField(this,6,e)},proto.reporting.models.Connection.prototype.getHttphost=function(){return r.Message.getFieldWithDefault(this,7,"")},proto.reporting.models.Connection.prototype.setHttphost=function(e){return r.Message.setProto3StringField(this,7,e)},proto.reporting.models.Connection.prototype.getHttpRequestUrisList=function(){return r.Message.getRepeatedField(this,8)},proto.reporting.models.Connection.prototype.setHttpRequestUrisList=function(e){return r.Message.setField(this,8,e||[])},proto.reporting.models.Connection.prototype.addHttpRequestUris=function(e,t){return r.Message.addToRepeatedField(this,8,e,t)},proto.reporting.models.Connection.prototype.clearHttpRequestUrisList=function(){return this.setHttpRequestUrisList([])},proto.reporting.models.Connection.prototype.getHwaddress=function(){return r.Message.getFieldWithDefault(this,9,"")},proto.reporting.models.Connection.prototype.setHwaddress=function(e){return r.Message.setProto3StringField(this,9,e)},proto.reporting.models.Connection.prototype.getLifetime=function(){return r.Message.getFieldWithDefault(this,10,0)},proto.reporting.models.Connection.prototype.setLifetime=function(e){return r.Message.setProto3IntField(this,10,e)},proto.reporting.models.Connection.prototype.getNoise=function(){return r.Message.getBooleanFieldWithDefault(this,11,!1)},proto.reporting.models.Connection.prototype.setNoise=function(e){return r.Message.setProto3BooleanField(this,11,e)},proto.reporting.models.Connection.prototype.getPackets=function(){return r.Message.getFieldWithDefault(this,12,0)},proto.reporting.models.Connection.prototype.setPackets=function(e){return r.Message.setProto3IntField(this,12,e)},proto.reporting.models.Connection.prototype.getProtocol=function(){return r.Message.getFieldWithDefault(this,13,0)},proto.reporting.models.Connection.prototype.setProtocol=function(e){return r.Message.setProto3IntField(this,13,e)},proto.reporting.models.Connection.prototype.getSourceip=function(){return r.Message.getFieldWithDefault(this,14,"")},proto.reporting.models.Connection.prototype.setSourceip=function(e){return r.Message.setProto3StringField(this,14,e)},proto.reporting.models.Connection.prototype.getSubcategoryid=function(){return r.Message.getFieldWithDefault(this,15,"")},proto.reporting.models.Connection.prototype.setSubcategoryid=function(e){return r.Message.setProto3StringField(this,15,e)},proto.reporting.models.Connection.prototype.getTag=function(){return r.Message.getFieldWithDefault(this,16,"")},proto.reporting.models.Connection.prototype.setTag=function(e){return r.Message.setProto3StringField(this,16,e)},proto.reporting.models.Connection.prototype.getTime=function(){return r.Message.getFieldWithDefault(this,17,0)},proto.reporting.models.Connection.prototype.setTime=function(e){return r.Message.setProto3IntField(this,17,e)},proto.reporting.models.Connection.prototype.getUpload=function(){return r.Message.getFieldWithDefault(this,18,0)},proto.reporting.models.Connection.prototype.setUpload=function(e){return r.Message.setProto3IntField(this,18,e)},proto.reporting.models.Connection.prototype.getUser=function(){return r.Message.getFieldWithDefault(this,19,"")},proto.reporting.models.Connection.prototype.setUser=function(e){return r.Message.setProto3StringField(this,19,e)},proto.reporting.models.Connection.prototype.getVerdictApplicationRule=function(){return r.Message.getFieldWithDefault(this,20,"")},proto.reporting.models.Connection.prototype.setVerdictApplicationRule=function(e){return r.Message.setProto3StringField(this,20,e)},proto.reporting.models.Connection.prototype.getReportingtype=function(){return r.Message.getFieldWithDefault(this,21,"")},proto.reporting.models.Connection.prototype.setReportingtype=function(e){return r.Message.setProto3StringField(this,21,e)},proto.reporting.models.Connection.prototype.getExtensionconnection=function(){return r.Message.getBooleanFieldWithDefault(this,22,!1)},proto.reporting.models.Connection.prototype.setExtensionconnection=function(e){return r.Message.setProto3BooleanField(this,22,e)},proto.reporting.models.Connection.prototype.getHostname=function(){return r.Message.getFieldWithDefault(this,23,"")},proto.reporting.models.Connection.prototype.setHostname=function(e){return r.Message.setProto3StringField(this,23,e)},proto.reporting.models.Connection.prototype.getId=function(){return r.Message.getFieldWithDefault(this,24,"")},proto.reporting.models.Connection.prototype.setId=function(e){return r.Message.setProto3StringField(this,24,e)},proto.reporting.models.Connection.prototype.getAgent=function(){return r.Message.getFieldWithDefault(this,25,"")},proto.reporting.models.Connection.prototype.setAgent=function(e){return r.Message.setProto3StringField(this,25,e)},proto.reporting.models.Connection.prototype.getHardware=function(){return r.Message.getFieldWithDefault(this,26,"")},proto.reporting.models.Connection.prototype.setHardware=function(e){return r.Message.setProto3StringField(this,26,e)},proto.reporting.models.Connection.prototype.getCompanionModeActive=function(){return r.Message.getBooleanFieldWithDefault(this,27,!1)},proto.reporting.models.Connection.prototype.setCompanionModeActive=function(e){return r.Message.setProto3BooleanField(this,27,e)},proto.reporting.models.Connection.prototype.getTeacherid=function(){return r.Message.getFieldWithDefault(this,28,"")},proto.reporting.models.Connection.prototype.setTeacherid=function(e){return r.Message.setField(this,28,e)},proto.reporting.models.Connection.prototype.clearTeacherid=function(){return r.Message.setField(this,28,void 0)},proto.reporting.models.Connection.prototype.hasTeacherid=function(){return null!=r.Message.getField(this,28)},proto.reporting.models.Connection.prototype.getResourceType=function(){return r.Message.getFieldWithDefault(this,29,"")},proto.reporting.models.Connection.prototype.setResourceType=function(e){return r.Message.setProto3StringField(this,29,e)},proto.reporting.models.Connection.prototype.getBypassCode=function(){return r.Message.getFieldWithDefault(this,30,"")},proto.reporting.models.Connection.prototype.setBypassCode=function(e){return r.Message.setProto3StringField(this,30,e)},proto.reporting.models.Connection.prototype.getBypassExpiryTime=function(){return r.Message.getFieldWithDefault(this,31,0)},proto.reporting.models.Connection.prototype.setBypassExpiryTime=function(e){return r.Message.setProto3IntField(this,31,e)},proto.reporting.models.Connection.prototype.getHtmltitle=function(){return r.Message.getFieldWithDefault(this,32,"")},proto.reporting.models.Connection.prototype.setHtmltitle=function(e){return r.Message.setProto3StringField(this,32,e)},proto.reporting.models.Connection.prototype.getFilterType=function(){return r.Message.getFieldWithDefault(this,33,"")},proto.reporting.models.Connection.prototype.setFilterType=function(e){return r.Message.setProto3StringField(this,33,e)},proto.reporting.models.Connection.prototype.getAgentInsideNetwork=function(){return r.Message.getBooleanFieldWithDefault(this,34,!1)},proto.reporting.models.Connection.prototype.setAgentInsideNetwork=function(e){return r.Message.setProto3BooleanField(this,34,e)},proto.reporting.models.Connection.prototype.getDebugChromeVerdictIssued=function(){return r.Message.getBooleanFieldWithDefault(this,35,!1)},proto.reporting.models.Connection.prototype.setDebugChromeVerdictIssued=function(e){return r.Message.setProto3BooleanField(this,35,e)},proto.reporting.models.Connection.prototype.getDebugChromeRequestid=function(){return r.Message.getFieldWithDefault(this,36,"")},proto.reporting.models.Connection.prototype.setDebugChromeRequestid=function(e){return r.Message.setProto3StringField(this,36,e)},proto.reporting.models.Connection.prototype.getUseragent=function(){return r.Message.getFieldWithDefault(this,37,"")},proto.reporting.models.Connection.prototype.setUseragent=function(e){return r.Message.setProto3StringField(this,37,e)},o.object.extend(t,proto.reporting.models)},459:function(e){var t,n;e.exports=(t={418:function(e,t){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var n,o=this;this.headersMap={},e&&("undefined"!=typeof Headers&&e instanceof Headers?r.getHeaderKeys(e).forEach((function(n){r.getHeaderValues(e,n).forEach((function(e){t.splitValues?o.append(n,r.splitHeaderValue(e)):o.append(n,e)}))})):"object"==typeof(n=e)&&"object"==typeof n.headersMap&&"function"==typeof n.forEach?e.forEach((function(e,t){o.append(e,t)})):"undefined"!=typeof Map&&e instanceof Map?e.forEach((function(e,t){o.append(t,e)})):"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];Array.isArray(n)?n.forEach((function(e){o.append(t,e)})):o.append(t,n)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),n=0;n<t.length;n++){var r=t[n],o=r.indexOf(":");if(o>0){var i=r.substring(0,o).trim(),s=r.substring(o+1).trim();this.append(i,s)}}},e.prototype.delete=function(e,t){var n=r.normalizeName(e);if(void 0===t)delete this.headersMap[n];else{var o=this.headersMap[n];if(o){var i=o.indexOf(t);i>=0&&o.splice(i,1),0===o.length&&delete this.headersMap[n]}}},e.prototype.append=function(e,t){var n=this,o=r.normalizeName(e);Array.isArray(this.headersMap[o])||(this.headersMap[o]=[]),Array.isArray(t)?t.forEach((function(e){n.headersMap[o].push(r.normalizeValue(e))})):this.headersMap[o].push(r.normalizeValue(t))},e.prototype.set=function(e,t){var n=r.normalizeName(e);if(Array.isArray(t)){var o=[];t.forEach((function(e){o.push(r.normalizeValue(e))})),this.headersMap[n]=o}else this.headersMap[n]=[r.normalizeValue(t)]},e.prototype.has=function(e,t){var n=this.headersMap[r.normalizeName(e)];if(!Array.isArray(n))return!1;if(void 0!==t){var o=r.normalizeValue(t);return n.indexOf(o)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[r.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(n){e(n,t.headersMap[n])}),this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach((function(t,n){n.forEach((function(n){e.append(t,n)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.BrowserHeaders=r.BrowserHeaders},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var n=e[Symbol.iterator](),r=n.next();!r.done;)t(r.value[0]),r=n.next()},t.iterateHeadersKeys=function(e,t){for(var n=e.keys(),r=n.next();!r.done;)t(r.value),r=n.next()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var n=e;if(n instanceof Headers&&n.getAll)return n.getAll(t);var r=n.get(t);return r&&"string"==typeof r?[r]:r},t.getHeaderKeys=function(e){var t=e,n={},o=[];return t.keys?r.iterateHeadersKeys(t,(function(e){n[e]||(n[e]=!0,o.push(e))})):t.forEach?t.forEach((function(e,t){n[t]||(n[t]=!0,o.push(t))})):r.iterateHeaders(t,(function(e){var t=e[0];n[t]||(n[t]=!0,o.push(t))})),o},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}]))},617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkParser=t.ChunkType=t.encodeASCII=t.decodeASCII=void 0;var r,o=n(65);function i(e){return 9===(t=e)||10===t||13===t||e>=32&&e<=126;var t}function s(e){for(var t=0;t!==e.length;++t)if(!i(e[t]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function a(e){return!(128&~e.getUint8(0))}function c(e){return e.getUint32(1,!1)}function u(e,t,n){return e.byteLength-t>=n}function l(e,t,n){if(e.slice)return e.slice(t,n);var r=e.length;void 0!==n&&(r=n);for(var o=new Uint8Array(r-t),i=0,s=t;s<r;s++)o[i++]=e[s];return o}t.decodeASCII=s,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),n=0;n!==e.length;++n){var r=e.charCodeAt(n);if(!i(r))throw new Error("Metadata contains invalid ASCII");t[n]=r}return t},function(e){e[e.MESSAGE=1]="MESSAGE",e[e.TRAILERS=2]="TRAILERS"}(r=t.ChunkType||(t.ChunkType={}));var d=function(){function e(){this.buffer=null,this.position=0}return e.prototype.parse=function(e,t){if(0===e.length&&t)return[];var n,i=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else{var d=this.buffer.byteLength-this.position,p=new Uint8Array(d+e.byteLength),f=l(this.buffer,this.position);p.set(f,0);var h=new Uint8Array(e);p.set(h,d),this.buffer=p,this.position=0}for(;;){if(!u(this.buffer,this.position,5))return i;var g=l(this.buffer,this.position,this.position+5),m=new DataView(g.buffer,g.byteOffset,g.byteLength),y=c(m);if(!u(this.buffer,this.position,5+y))return i;var v=l(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,a(m))return i.push({chunkType:r.TRAILERS,trailers:(n=v,new o.Metadata(s(n)))}),i;i.push({chunkType:r.MESSAGE,data:v})}},e}();t.ChunkParser=d},8:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.httpStatusToCode=t.Code=void 0,function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(n=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return n.Internal;case 200:return n.OK;case 400:return n.InvalidArgument;case 401:return n.Unauthenticated;case 403:return n.PermissionDenied;case 404:return n.NotFound;case 409:return n.Aborted;case 412:return n.FailedPrecondition;case 429:return n.ResourceExhausted;case 499:return n.Canceled;case 500:default:return n.Unknown;case 501:return n.Unimplemented;case 503:return n.Unavailable;case 504:return n.DeadlineExceeded}}},934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;var r=n(65),o=n(617),i=n(8),s=n(346),a=n(57),c=n(882);t.client=function(e,t){return new u(e,t)};var u=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new o.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport()}return e.prototype.createTransport=function(){var e=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t)},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&s.debug("onHeaders",e,t),this.closed)this.props.debug&&s.debug("grpc.onHeaders received after request was closed - ignoring");else if(0===t);else{this.responseHeaders=e,this.props.debug&&s.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var n=l(e);this.props.debug&&s.debug("onHeaders.gRPCStatus",n);var r=n&&n>=0?n:i.httpStatusToCode(t);this.props.debug&&s.debug("onHeaders.code",r);var o=e.get("grpc-message")||[];if(this.props.debug&&s.debug("onHeaders.gRPCMessage",o),this.rawOnHeaders(e),r!==i.Code.OK){var a=this.decodeGRPCStatus(o[0]);this.rawOnError(r,a,e)}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&s.debug("grpc.onChunk received after request was closed - ignoring");else{var n=[];try{n=this.parser.parse(e)}catch(e){return this.props.debug&&s.debug("onChunk.parsing error",e,e.message),void this.rawOnError(i.Code.Internal,"parsing error: "+e.message)}n.forEach((function(e){if(e.chunkType===o.ChunkType.MESSAGE){var n=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(n)}else e.chunkType===o.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new r.Metadata(e.trailers),t.props.debug&&s.debug("onChunk.trailers",t.responseTrailers)):(t.responseHeaders=new r.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)))}))}},e.prototype.onTransportEnd=function(){if(this.props.debug&&s.debug("grpc.onEnd"),this.closed)this.props.debug&&s.debug("grpc.onEnd received after request was closed - ignoring");else if(void 0!==this.responseTrailers){var e=l(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get("grpc-message"),n=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,n,this.responseTrailers)}else this.rawOnError(i.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(void 0===this.responseHeaders)return void this.rawOnError(i.Code.Unknown,"Response closed without headers");var r=l(this.responseHeaders),o=this.responseHeaders.get("grpc-message");if(this.props.debug&&s.debug("grpc.headers only response ",r,o),null===r)return void this.rawOnEnd(i.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var a=this.decodeGRPCStatus(o[0]);this.rawOnEnd(r,a,this.responseHeaders)}},e.prototype.decodeGRPCStatus=function(e){if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,n){var r=this;this.props.debug&&s.debug("rawOnEnd",e,t,n),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(o){if(!r.closed)try{o(e,t,n)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnHeaders=function(e){this.props.debug&&s.debug("rawOnHeaders",e),this.completed||this.onHeadersCallbacks.forEach((function(t){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.rawOnError=function(e,t,n){var o=this;void 0===n&&(n=new r.Metadata),this.props.debug&&s.debug("rawOnError",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(r){if(!o.closed)try{r(e,t,n)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&s.debug("rawOnMessage",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach((function(n){if(!t.closed)try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e)},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e)},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e)},e.prototype.start=function(e){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var t=new r.Metadata(e||{});t.set("content-type","application/grpc-web+proto"),t.set("x-grpc-web","1"),this.transport.start(t)},e.prototype.send=function(e){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var t=c.frameRequest(e);this.transport.sendMessage(t)},e.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},e.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&s.debug("request.abort aborting request"),this.transport.cancel()},e}();function l(e){var t=e.get("grpc-status")||[];if(t.length>0)try{var n=t[0];return parseInt(n,10)}catch(e){return null}return null}},346:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0,t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e)}},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grpc=void 0;var r,o=n(418),i=n(57),s=n(229),a=n(540),c=n(210),u=n(859),l=n(8),d=n(938),p=n(35),f=n(934);(r=t.grpc||(t.grpc={})).setDefaultTransport=i.setDefaultTransportFactory,r.CrossBrowserHttpTransport=u.CrossBrowserHttpTransport,r.FetchReadableStreamTransport=s.FetchReadableStreamTransport,r.XhrTransport=c.XhrTransport,r.WebsocketTransport=a.WebsocketTransport,r.Code=l.Code,r.Metadata=o.BrowserHeaders,r.client=function(e,t){return f.client(e,t)},r.invoke=d.invoke,r.unary=p.unary},938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=void 0;var r=n(934);t.invoke=function(e,t){if(e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var n=r.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&n.onHeaders(t.onHeaders),t.onMessage&&n.onMessage(t.onMessage),t.onEnd&&n.onEnd(t.onEnd),n.start(t.metadata),n.send(t.request),n.finishSend(),{close:function(){n.close()}}}},65:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(418);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return r.BrowserHeaders}})},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDefaultTransport=t.setDefaultTransportFactory=void 0;var r=n(859),o=function(e){return r.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){o=e},t.makeDefaultTransport=function(e){return o(e)}},229:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.detectFetchSupport=t.FetchReadableStreamTransport=void 0;var o=n(65),i=n(346);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&i.debug("fetchRequest",e),new s(e,t)}(t,e)}};var s=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t}return e.prototype.pump=function(e,t){var n=this;if(this.reader=e,this.cancelled)return this.options.debug&&i.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch((function(e){n.options.debug&&i.debug("Fetch.pump.reader.cancel exception",e)}));this.reader.read().then((function(e){if(e.done)return n.options.onEnd(),t;n.options.onChunk(e.value),n.pump(n.reader,t)})).catch((function(e){n.cancelled?n.options.debug&&i.debug("Fetch.catch - request cancelled"):(n.cancelled=!0,n.options.debug&&i.debug("Fetch.catch",e.message),n.options.onEnd(e))}))},e.prototype.send=function(e){var t=this;fetch(this.options.url,r(r({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:e,signal:this.controller&&this.controller.signal})).then((function(e){if(t.options.debug&&i.debug("Fetch.response",e),t.options.onHeaders(new o.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e)})).catch((function(e){t.cancelled?t.options.debug&&i.debug("Fetch.catch - request cancelled"):(t.cancelled=!0,t.options.debug&&i.debug("Fetch.catch",e.message),t.options.onEnd(e))}))},e.prototype.sendMessage=function(e){this.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e},e.prototype.cancel=function(){var e=this;this.cancelled?this.options.debug&&i.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&i.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&i.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&i.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch((function(t){e.options.debug&&i.debug("Fetch.cancel.reader.cancel exception",t)}))):this.options.debug&&i.debug("Fetch.cancel before reader"))},e}();t.detectFetchSupport=function(){return"undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof Headers}},859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossBrowserHttpTransport=void 0;var r=n(229),o=n(210);t.CrossBrowserHttpTransport=function(e){if(r.detectFetchSupport()){var t={credentials:e.withCredentials?"include":"same-origin"};return r.FetchReadableStreamTransport(t)}return o.XhrTransport({withCredentials:e.withCredentials})}},210:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.MozChunkedArrayBufferXHR=t.XHR=t.XhrTransport=void 0;var i=n(65),s=n(346),a=n(849);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new u(t,e);if(a.detectXHROverrideMimeTypeSupport())return new c(t,e);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var c=function(){function e(e,t){this.options=e,this.init=t}return e.prototype.onProgressEvent=function(){this.options.debug&&s.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=d(e);this.options.onChunk(t)},e.prototype.onLoadEvent=function(){this.options.debug&&s.debug("XHR.onLoadEvent"),this.options.onEnd()},e.prototype.onStateChange=function(){this.options.debug&&s.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new i.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},e.prototype.sendMessage=function(e){this.xhr.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var n=new XMLHttpRequest;this.xhr=n,n.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach((function(e,t){n.setRequestHeader(e,t.join(", "))})),n.withCredentials=Boolean(this.init.withCredentials),n.addEventListener("readystatechange",this.onStateChange.bind(this)),n.addEventListener("progress",this.onProgressEvent.bind(this)),n.addEventListener("loadend",this.onLoadEvent.bind(this)),n.addEventListener("error",(function(e){t.options.debug&&s.debug("XHR.error",e),t.options.onEnd(e.error)}))},e.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},e.prototype.cancel=function(){this.options.debug&&s.debug("XHR.abort"),this.xhr.abort()},e}();t.XHR=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.configureXhr=function(){this.options.debug&&s.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&s.debug("MozXHR.onProgressEvent: ",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e))},t}(c);function l(e,t){var n=e.charCodeAt(t);if(n>=55296&&n<=56319){var r=e.charCodeAt(t+1);r>=56320&&r<=57343&&(n=65536+(n-55296<<10)+(r-56320))}return n}function d(e){for(var t=new Uint8Array(e.length),n=0,r=0;r<e.length;r++){var o=String.prototype.codePointAt?e.codePointAt(r):l(e,r);t[n++]=255&o}return t}t.MozChunkedArrayBufferXHR=u,t.stringToArrayBuffer=d},849:function(e,t){"use strict";var n;function r(e){var t=function(){if(void 0!==n)return n;if(XMLHttpRequest){n=new XMLHttpRequest;try{n.open("GET","https://localhost")}catch(e){}}return n}();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.detectXHROverrideMimeTypeSupport=t.detectMozXHRSupport=t.xhrSupportsResponseType=void 0,t.xhrSupportsResponseType=r,t.detectMozXHRSupport=function(){return"undefined"!=typeof XMLHttpRequest&&r("moz-chunked-arraybuffer")},t.detectXHROverrideMimeTypeSupport=function(){return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketTransport=void 0;var r,o=n(346),i=n(617);!function(e){e[e.FINISH_SEND=1]="FINISH_SEND"}(r||(r={}));var s=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&o.debug("websocketRequest",e);var t,n=function(e){if("https://"===e.substr(0,8))return"wss://"+e.substr(8);if("http://"===e.substr(0,7))return"ws://"+e.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(e.url),a=[];function c(e){if(e===r.FINISH_SEND)t.send(s);else{var n=e,o=new Int8Array(n.byteLength+1);o.set(new Uint8Array([0])),o.set(n,1),t.send(o)}}return{sendMessage:function(e){t&&t.readyState!==t.CONNECTING?c(e):a.push(e)},finishSend:function(){t&&t.readyState!==t.CONNECTING?c(r.FINISH_SEND):a.push(r.FINISH_SEND)},start:function(r){(t=new WebSocket(n,["grpc-websockets"])).binaryType="arraybuffer",t.onopen=function(){var n;e.debug&&o.debug("websocketRequest.onopen"),t.send((n="",r.forEach((function(e,t){n+=e+": "+t.join(", ")+"\r\n"})),i.encodeASCII(n))),a.forEach((function(e){c(e)}))},t.onclose=function(t){e.debug&&o.debug("websocketRequest.onclose",t),e.onEnd()},t.onerror=function(t){e.debug&&o.debug("websocketRequest.onerror",t)},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data))}},cancel:function(){e.debug&&o.debug("websocket.abort"),t.close()}}}(e)}}},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unary=void 0;var r=n(65),o=n(934);t.unary=function(e,t){if(e.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(e.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var n=null,i=null,s=o.client(e,{host:t.host,transport:t.transport,debug:t.debug});return s.onHeaders((function(e){n=e})),s.onMessage((function(e){i=e})),s.onEnd((function(e,o,s){t.onEnd({status:e,statusMessage:o,headers:n||new r.Metadata,message:i,trailers:s})})),s.start(t.metadata),s.send(t.request),s.finishSend(),{close:function(){s.close()}}}},882:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frameRequest=void 0,t.frameRequest=function(e){var t=e.serializeBinary(),n=new ArrayBuffer(t.byteLength+5);return new DataView(n,1,4).setUint32(0,t.length,!1),new Uint8Array(n,5).set(t),new Uint8Array(n)}}},n={},function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,e),o.exports}(607))},2896:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,P:()=>r});var r=function(){function e(){}return e.prototype.emit=function(e){},e}(),o=new r},4822:(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{NOOP_LOGGER:()=>o.G,NOOP_LOGGER_PROVIDER:()=>s,NoopLogger:()=>o.P,NoopLoggerProvider:()=>i,SeverityNumber:()=>r,logs:()=>l}),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TRACE=1]="TRACE",e[e.TRACE2=2]="TRACE2",e[e.TRACE3=3]="TRACE3",e[e.TRACE4=4]="TRACE4",e[e.DEBUG=5]="DEBUG",e[e.DEBUG2=6]="DEBUG2",e[e.DEBUG3=7]="DEBUG3",e[e.DEBUG4=8]="DEBUG4",e[e.INFO=9]="INFO",e[e.INFO2=10]="INFO2",e[e.INFO3=11]="INFO3",e[e.INFO4=12]="INFO4",e[e.WARN=13]="WARN",e[e.WARN2=14]="WARN2",e[e.WARN3=15]="WARN3",e[e.WARN4=16]="WARN4",e[e.ERROR=17]="ERROR",e[e.ERROR2=18]="ERROR2",e[e.ERROR3=19]="ERROR3",e[e.ERROR4=20]="ERROR4",e[e.FATAL=21]="FATAL",e[e.FATAL2=22]="FATAL2",e[e.FATAL3=23]="FATAL3",e[e.FATAL4=24]="FATAL4"}(r||(r={}));var o=n(2896),i=function(){function e(){}return e.prototype.getLogger=function(e,t,n){return new o.P},e}(),s=new i,a="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},c=Symbol.for("io.opentelemetry.js.api.logs"),u=a,l=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(e){return u[c]?this.getLoggerProvider():(u[c]=(t=e,n=s,function(e){return 1===e?t:n}),e);var t,n},e.prototype.getLoggerProvider=function(){var e,t;return null!==(t=null===(e=u[c])||void 0===e?void 0:e.call(u,1))&&void 0!==t?t:s},e.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},e.prototype.disable=function(){delete u[c]},e}().getInstance()},7753:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var r=n(5499),o=function(){function e(){}return e.prototype.active=function(){return r.l},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return t.call.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),i=n(9120),s=n(6392),a="context",c=new o,u=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,i.$G)(a,e,s.K.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(r=this._getContextManager()).with.apply(r,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e,t,n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,i.mS)(a)||c},e.prototype.disable=function(){this._getContextManager().disable(),(0,i.kv)(a,s.K.instance())},e}()},6392:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var r=n(9120),o=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i("verbose",this._namespace,e)},e}();function i(e,t,n){var o=(0,r.mS)("diag");if(o)return n.unshift(t),o[e].apply(o,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(n),!1))}var s=n(7907),a=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=(0,r.mS)("diag");if(o)return o[e].apply(o,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(t),!1))}}var t=this;t.setLogger=function(e,n){var o,i,a;if(void 0===n&&(n={logLevel:s.u.INFO}),e===t){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(o=c.stack)&&void 0!==o?o:c.message),!1}"number"==typeof n&&(n={logLevel:n});var u=(0,r.mS)("diag"),l=function(e,t){function n(n,r){var o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<s.u.NONE?e=s.u.NONE:e>s.u.ALL&&(e=s.u.ALL),t=t||{},{error:n("error",s.u.ERROR),warn:n("warn",s.u.WARN),info:n("info",s.u.INFO),debug:n("debug",s.u.DEBUG),verbose:n("verbose",s.u.VERBOSE)}}(null!==(i=n.logLevel)&&void 0!==i?i:s.u.INFO,e);if(u&&!n.suppressOverrideMessage){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),l.warn("Current logger will overwrite one already registered from "+d)}return(0,r.$G)("diag",l,t,!0)},t.disable=function(){(0,r.kv)("diag",t)},t.createComponentLogger=function(e){return new o(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},2400:(e,t,n)=>{"use strict";n.d(t,{B:()=>c,L:()=>a});var r=n(6392),o=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new e(this._entries);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=s.next();!a.done;a=s.next()){var c=a.value;i._entries.delete(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),i=Symbol("BaggageEntryMetadata"),s=r.K.instance();function a(e){return void 0===e&&(e={}),new o(new Map(Object.entries(e)))}function c(e){return"string"!=typeof e&&(s.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:i,toString:function(){return e}}}},6982:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var r=n(7753)._.getInstance()},5499:(e,t,n)=>{"use strict";function r(e){return Symbol.for(e)}n.d(t,{l:()=>o,n:()=>r});var o=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}},5988:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var r=n(6392).K.instance()},7907:(e,t,n)=>{"use strict";var r;n.d(t,{u:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r||(r={}))},5360:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DiagConsoleLogger:()=>c,DiagLogLevel:()=>u.u,INVALID_SPANID:()=>z.w9,INVALID_SPAN_CONTEXT:()=>z.dM,INVALID_TRACEID:()=>z.RH,ProxyTracer:()=>k.y,ProxyTracerProvider:()=>P.n,ROOT_CONTEXT:()=>s.l,SamplingDecision:()=>D.i,SpanKind:()=>N.v,SpanStatusCode:()=>L.s,TraceFlags:()=>x.X,ValueType:()=>o,baggageEntryMetadataFromString:()=>i.B,context:()=>V._,createContextKey:()=>s.n,createNoopMeter:()=>M,createTraceState:()=>G,default:()=>ee,defaultTextMapGetter:()=>A.q,defaultTextMapSetter:()=>A.U,diag:()=>q.s,isSpanContextValid:()=>H.YA,isValidSpanId:()=>H.wN,isValidTraceId:()=>H.hX,metrics:()=>X,propagation:()=>Z.$,trace:()=>Q.u});var r,o,i=n(2400),s=n(5499),a=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],c=function(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var t=0;t<a.length;t++)this[a[t].n]=e(a[t].c)},u=n(7907),l=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(){function e(){}return e.prototype.createGauge=function(e,t){return T},e.prototype.createHistogram=function(e,t){return w},e.prototype.createCounter=function(e,t){return b},e.prototype.createUpDownCounter=function(e,t){return C},e.prototype.createObservableGauge=function(e,t){return O},e.prototype.createObservableCounter=function(e,t){return R},e.prototype.createObservableUpDownCounter=function(e,t){return I},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),p=function(){},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.add=function(e,t){},t}(p),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.add=function(e,t){},t}(p),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.record=function(e,t){},t}(p),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.record=function(e,t){},t}(p),y=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(y),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(y),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(y),E=new d,b=new f,T=new g,w=new m,C=new h,R=new v,O=new _,I=new S;function M(){return E}!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(o||(o={}));var A=n(6043),k=n(2735),P=n(7357),D=n(9364),N=n(4569),L=n(2626),x=n(1199),U="[_0-9a-z-*/]",F=new RegExp("^(?:[a-z]"+U+"{0,255}|[a-z0-9]"+U+"{0,240}@[a-z]"+U+"{0,13})$"),B=/^[ -~]{0,255}[!-~]$/,j=/,|=/,W=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),i=n.slice(r+1,t.length);(function(e){return F.test(e)})(o)&&function(e){return B.test(e)&&!j.test(e)}(i)&&e.set(o,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function G(e){return new W(e)}var H=n(9905),z=n(2102),V=n(6982),q=n(5988),$=new(function(){function e(){}return e.prototype.getMeter=function(e,t,n){return E},e}()),Y=n(9120),K=n(6392),J="metrics",X=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return(0,Y.$G)(J,e,K.K.instance())},e.prototype.getMeterProvider=function(){return(0,Y.mS)(J)||$},e.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},e.prototype.disable=function(){(0,Y.kv)(J,K.K.instance())},e}().getInstance(),Z=n(9039),Q=n(8442);const ee={context:V._,diag:q.s,metrics:X,propagation:Z.$,trace:Q.u}},9120:(e,t,n)=>{"use strict";n.d(t,{mS:()=>d,$G:()=>l,kv:()=>p});var r="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},o="1.9.0",i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,s=function(e){var t=new Set([e]),n=new Set,r=e.match(i);if(!r)return function(){return!1};var o=+r[1],s=+r[2],a=+r[3];if(null!=r[4])return function(t){return t===e};function c(e){return n.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(i);if(!r)return c(e);var l=+r[1],d=+r[2],p=+r[3];return null!=r[4]||o!==l?c(e):0===o?s===d&&a<=p?u(e):c(e):s<=d?u(e):c(e)}}(o),a=o.split(".")[0],c=Symbol.for("opentelemetry.js.api."+a),u=r;function l(e,t,n,r){var i;void 0===r&&(r=!1);var s=u[c]=null!==(i=u[c])&&void 0!==i?i:{version:o};if(!r&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}return s.version!==o?(a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+o),n.error(a.stack||a.message),!1):(s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+o+"."),!0)}function d(e){var t,n,r=null===(t=u[c])||void 0===t?void 0:t.version;if(r&&s(r))return null===(n=u[c])||void 0===n?void 0:n[e]}function p(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+o+".");var n=u[c];n&&delete n[e]}},9039:(e,t,n)=>{"use strict";n.d(t,{$:()=>y});var r=n(9120),o=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),i=n(6043),s=n(7753),a=(0,n(5499).n)("OpenTelemetry Baggage Key");function c(e){return e.getValue(a)||void 0}function u(){return c(s._.getInstance().active())}function l(e,t){return e.setValue(a,t)}function d(e){return e.deleteValue(a)}var p=n(2400),f=n(6392),h="propagation",g=new o,m=function(){function e(){this.createBaggage=p.L,this.getBaggage=c,this.getActiveBaggage=u,this.setBaggage=l,this.deleteBaggage=d}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,r.$G)(h,e,f.K.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=i.U),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=i.q),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,r.kv)(h,f.K.instance())},e.prototype._getGlobalPropagator=function(){return(0,r.mS)(h)||g},e}(),y=m.getInstance()},6043:(e,t,n)=>{"use strict";n.d(t,{U:()=>o,q:()=>r});var r={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},o={set:function(e,t,n){null!=e&&(e[t]=n)}}},8442:(e,t,n)=>{"use strict";n.d(t,{u:()=>u});var r=n(9120),o=n(7357),i=n(9905),s=n(9781),a=n(6392),c="trace",u=function(){function e(){this._proxyTracerProvider=new o.n,this.wrapSpanContext=i.IP,this.isSpanContextValid=i.YA,this.deleteSpan=s.EW,this.getSpan=s.fU,this.getActiveSpan=s.Bk,this.getSpanContext=s.w8,this.setSpan=s.Bx,this.setSpanContext=s.g_}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,r.$G)(c,this._proxyTracerProvider,a.K.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,r.mS)(c)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,r.kv)(c,a.K.instance()),this._proxyTracerProvider=new o.n},e}().getInstance()},338:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(2102),o=function(){function e(e){void 0===e&&(e=r.dM),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}()},7369:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});var r=n(7753),o=n(9781),i=n(338),s=n(9905),a=r._.getInstance(),c=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=a.active()),Boolean(null==t?void 0:t.root))return new i.d;var r,c=n&&(0,o.w8)(n);return"object"==typeof(r=c)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&(0,s.YA)(c)?new i.d(c):new i.d},e.prototype.startActiveSpan=function(e,t,n,r){var i,s,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(i=t,c=n):(i=t,s=n,c=r);var u=null!=s?s:a.active(),l=this.startSpan(e,i,u),d=(0,o.Bx)(u,l);return a.with(d,c,void 0,l)}},e}()},2735:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=new(n(7369).o),o=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):r},e}()},7357:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var r=n(2735),o=n(7369),i=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new o.o},e}()),s=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var o;return null!==(o=this.getDelegateTracer(e,t,n))&&void 0!==o?o:new r.y(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:i},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}()},9364:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>r}),function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r||(r={}))},9781:(e,t,n)=>{"use strict";n.d(t,{Bk:()=>c,Bx:()=>u,EW:()=>l,fU:()=>a,g_:()=>d,w8:()=>p});var r=n(5499),o=n(338),i=n(7753),s=(0,r.n)("OpenTelemetry Context Key SPAN");function a(e){return e.getValue(s)||void 0}function c(){return a(i._.getInstance().active())}function u(e,t){return e.setValue(s,t)}function l(e){return e.deleteValue(s)}function d(e,t){return u(e,new o.d(t))}function p(e){var t;return null===(t=a(e))||void 0===t?void 0:t.spanContext()}},2102:(e,t,n)=>{"use strict";n.d(t,{RH:()=>i,dM:()=>s,w9:()=>o});var r=n(1199),o="0000000000000000",i="00000000000000000000000000000000",s={traceId:i,spanId:o,traceFlags:r.X.NONE}},4569:(e,t,n)=>{"use strict";var r;n.d(t,{v:()=>r}),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(r||(r={}))},9905:(e,t,n)=>{"use strict";n.d(t,{IP:()=>l,YA:()=>u,hX:()=>a,wN:()=>c});var r=n(2102),o=n(338),i=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function a(e){return i.test(e)&&e!==r.RH}function c(e){return s.test(e)&&e!==r.w9}function u(e){return a(e.traceId)&&c(e.spanId)}function l(e){return new o.d(e)}},2626:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}))},1199:(e,t,n)=>{"use strict";var r;n.d(t,{X:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r||(r={}))},8264:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ZoneContextManager:()=>i});var r=n(5499),o="OT_ZONE_CONTEXT",i=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(e){return e&&e.get(o)||r.l},e.prototype._bindFunction=function(e,t){var n=this,r=function(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return n.with(e,(function(){return t.apply(r,o)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r},e.prototype._bindListener=function(e,t){var n=t;return void 0!==n.__ot_listeners||(n.__ot_listeners={},"function"==typeof n.addEventListener&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,e)),"function"==typeof n.removeEventListener&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),t},e.prototype._createZoneName=function(){this._zoneCounter++;var e=Math.random();return this._zoneCounter+"-"+e},e.prototype._createZone=function(e,t){var n;return Zone.current.fork({name:e,properties:(n={},n[o]=t,n)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(e,t,n){var r=this;return function(o,i,s){void 0===e.__ot_listeners&&(e.__ot_listeners={});var a=e.__ot_listeners[o];void 0===a&&(a=new WeakMap,e.__ot_listeners[o]=a);var c=r.bind(n,i);return a.set(i,c),t.call(this,o,c,s)}},e.prototype._patchRemoveEventListener=function(e,t){return function(n,r){if(void 0===e.__ot_listeners||void 0===e.__ot_listeners[n])return t.call(this,n,r);var o=e.__ot_listeners[n],i=o.get(r);return o.delete(r),t.call(this,n,i||r)}},e.prototype.active=function(){if(!this._enabled)return r.l;var e=this._getActiveZone();return this._activeContextFromZone(e)||r.l},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):(void 0===(n=t)&&(n={}),"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener&&this._bindListener(e,t),t);var n},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=this._createZoneName();return this._createZone(i,e).run(t,n,r)},e}();n(3950)},9094:(e,t,n)=>{"use strict";var r;n.d(t,{V:()=>r}),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(r||(r={}))},9601:(e,t,n)=>{"use strict";n.d(t,{EC:()=>i,KV:()=>c,QC:()=>a,hN:()=>o,kI:()=>u,r_:()=>s,un:()=>r});var r="=",o=";",i=",",s="baggage",a=180,c=4096,u=8192},9893:(e,t,n)=>{"use strict";n.d(t,{L7:()=>s,Qd:()=>c,hD:()=>u,pX:()=>a});var r=n(2400),o=n(9601),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function s(e){return e.reduce((function(e,t){var n=""+e+(""!==e?o.EC:"")+t;return n.length>o.kI?e:n}),"")}function a(e){return e.getAllEntries().map((function(e){var t=i(e,2),n=t[0],r=t[1],s=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(s+=o.hN+r.metadata.toString()),s}))}function c(e){var t=e.split(o.hN);if(!(t.length<=0)){var n=t.shift();if(n){var i=n.indexOf(o.un);if(!(i<=0)){var s,a=decodeURIComponent(n.substring(0,i).trim()),c=decodeURIComponent(n.substring(i+1).trim());return t.length>0&&(s=(0,r.B)(t.join(o.hN))),{key:a,value:c,metadata:s}}}}}function u(e){return"string"!=typeof e||0===e.length?{}:e.split(o.EC).map((function(e){return c(e)})).filter((function(e){return void 0!==e&&e.value.length>0})).reduce((function(e,t){return e[t.key]=t.value,e}),{})}},3698:(e,t,n)=>{"use strict";n.d(t,{L:()=>s,m:()=>c});var r=n(5988),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function s(e){var t,n,s={};if("object"!=typeof e||null==e)return s;try{for(var u=o(Object.entries(e)),l=u.next();!l.done;l=u.next()){var d=i(l.value,2),p=d[0],f=d[1];a(p)?c(f)?Array.isArray(f)?s[p]=f.slice():s[p]=f:r.s.warn("Invalid attribute value set for key: "+p):r.s.warn("Invalid attribute key: "+p)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s}function a(e){return"string"==typeof e&&e.length>0}function c(e){return null==e||(Array.isArray(e)?function(e){var t,n,r;try{for(var i=o(e),s=i.next();!s.done;s=i.next()){var a=s.value;if(null!=a){if(!r){if(u(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}(e):u(e))}function u(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}},7292:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var r=n(5988),o=function(e){r.s.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},n=e;null!==n;)Object.getOwnPropertyNames(n).forEach((function(e){if(!t[e]){var r=n[e];r&&(t[e]=String(r))}})),n=Object.getPrototypeOf(n);return t}(e))}(e))};function i(e){try{o(e)}catch(e){}}},4530:(e,t,n)=>{"use strict";n.d(t,{Ir:()=>h,KJ:()=>u,VL:()=>f,W5:()=>l,_5:()=>c,lg:()=>s,mw:()=>g,u5:()=>d,uc:()=>a,w_:()=>p});var r=n(2648),o=Math.pow(10,6),i=Math.pow(10,9);function s(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*o)]}function a(){var e=r.u.timeOrigin;if("number"!=typeof e){var t=r.u;e=t.timing&&t.timing.fetchStart}return e}function c(e){return g(s(a()),s("number"==typeof e?e:r.u.now()))}function u(e){if(f(e))return e;if("number"==typeof e)return e<a()?c(e):s(e);if(e instanceof Date)return s(e.getTime());throw TypeError("Invalid input type")}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1];return r<0&&(n-=1,r+=i),[n,r]}function d(e){return e[0]*i+e[1]}function p(e){return 1e6*e[0]+e[1]/1e3}function f(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function h(e){return f(e)||"number"==typeof e||e instanceof Date}function g(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=i&&(n[1]-=i,n[0]+=1),n}},7037:(e,t,n)=>{"use strict";n.d(t,{mM:()=>i});var r=n(6982),o=n(3331),i={_export:function(e,t){return new Promise((function(n){r._.with((0,o.M1)(r._.active()),(function(){e.export(t,(function(e){n(e)}))}))}))}}},5999:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(30),o=n(6975);function i(){var e=(0,r.Nq)(o.X);return Object.assign({},r.Uz,e)}},6975:(e,t,n)=>{"use strict";n.d(t,{X:()=>r});var r="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{}},2648:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var r=performance},2604:(e,t,n)=>{"use strict";function r(e){}n.d(t,{K:()=>r})},3331:(e,t,n)=>{"use strict";n.d(t,{M1:()=>o,Zf:()=>i});var r=(0,n(5499).n)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function o(e){return e.setValue(r,!0)}function i(e){return!0===e.getValue(r)}},9464:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),o=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new r}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([this._that],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(n),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}()},30:(e,t,n)=>{"use strict";n.d(t,{Nq:()=>E,Uz:()=>g,aE:()=>f,fv:()=>h,wn:()=>b});var r=n(7907),o=n(458),i=n(6975),s=",",a=["OTEL_SDK_DISABLED"];function c(e){return a.indexOf(e)>-1}var u=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function l(e){return u.indexOf(e)>-1}var d=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function p(e){return d.indexOf(e)>-1}var f=1/0,h=128,g={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:r.u.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:f,OTEL_ATTRIBUTE_COUNT_LIMIT:h,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:f,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:h,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:f,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:h,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:o.R.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function m(e,t,n){if(void 0!==n[e]){var r=String(n[e]);t[e]="true"===r.toLowerCase()}}function y(e,t,n,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==n[e]){var i=Number(n[e]);isNaN(i)||(t[e]=i<r?r:i>o?o:i)}}function v(e,t,n,r){void 0===r&&(r=s);var o=n[e];"string"==typeof o&&(t[e]=o.split(r).map((function(e){return e.trim()})))}var _={ALL:r.u.ALL,VERBOSE:r.u.VERBOSE,DEBUG:r.u.DEBUG,INFO:r.u.INFO,WARN:r.u.WARN,ERROR:r.u.ERROR,NONE:r.u.NONE};function S(e,t,n){var r=n[e];if("string"==typeof r){var o=_[r.toUpperCase()];null!=o&&(t[e]=o)}}function E(e){var t={};for(var n in g){var r=n;if("OTEL_LOG_LEVEL"===r)S(r,t,e);else if(c(r))m(r,t,e);else if(l(r))y(r,t,e);else if(p(r))v(r,t,e);else{var o=e[r];null!=o&&(t[r]=String(o))}}return t}function b(){return"undefined"!=typeof process&&process&&process.env?E(process.env):E(i.X)}},6387:(e,t,n)=>{"use strict";n.d(t,{h:()=>y});var r,o,i="[object Object]",s="[object Null]",a="[object Undefined]",c=Function.prototype.toString,u=c.call(Object),l=(r=Object.getPrototypeOf,o=Object,function(e){return r(o(e))}),d=Object.prototype,p=d.hasOwnProperty,f=Symbol?Symbol.toStringTag:void 0,h=d.toString;function g(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||function(e){return null==e?void 0===e?a:s:f&&f in Object(e)?function(e){var t=p.call(e,f),n=e[f],r=!1;try{e[f]=void 0,r=!0}catch(e){}var o=h.call(e);return r&&(t?e[f]=n:delete e[f]),o}(e):function(e){return h.call(e)}(e)}(e)!==i)return!1;var t=l(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)===u}var m=20;function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=_(n,e.shift(),0,r);return n}function v(e){return E(e)?e.slice():e}function _(e,t,n,r){var o;if(void 0===n&&(n=0),!(n>m)){if(n++,w(e)||w(t)||b(t))o=v(t);else if(E(e)){if(o=e.slice(),E(t))for(var i=0,s=t.length;i<s;i++)o.push(v(t[i]));else if(T(t))for(i=0,s=(a=Object.keys(t)).length;i<s;i++)o[c=a[i]]=v(t[c])}else if(T(e))if(T(t)){if(!function(e,t){return!(!g(e)||!g(t))}(e,t))return t;var a;for(o=Object.assign({},e),i=0,s=(a=Object.keys(t)).length;i<s;i++){var c,u=t[c=a[i]];if(w(u))void 0===u?delete o[c]:o[c]=u;else{var l=o[c],d=u;if(S(e,c,r)||S(t,c,r))delete o[c];else{if(T(l)&&T(d)){var p=r.get(l)||[],f=r.get(d)||[];p.push({obj:e,key:c}),f.push({obj:t,key:c}),r.set(l,p),r.set(d,f)}o[c]=_(o[c],u,n,r)}}}}else o=t;return o}}function S(e,t,n){for(var r=n.get(e[t])||[],o=0,i=r.length;o<i;o++){var s=r[o];if(s.key===t&&s.obj===e)return!0}return!1}function E(e){return Array.isArray(e)}function b(e){return"function"==typeof e}function T(e){return!w(e)&&!E(e)&&!b(e)&&"object"==typeof e}function w(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}},458:(e,t,n)=>{"use strict";var r;n.d(t,{R:()=>r}),function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(r||(r={}))},2445:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OTLPLogExporter:()=>m});var r=n(4912),o=n(5999),i=n(9893),s=n(9356),a=n(6180),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function u(e,t){var n=function(e){var t,n,r=new Map;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next();!i.done;i=o.next()){var s=i.value,a=s.resource,c=s.instrumentationScope,u=c.name,l=c.version,d=void 0===l?"":l,p=c.schemaUrl,f=void 0===p?"":p,h=r.get(a);h||(h=new Map,r.set(a,h));var g=u+"@"+d+":"+f,m=h.get(g);m||(m=[],h.set(g,m)),m.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e);return Array.from(n,(function(e){var n=c(e,2),r=n[0],o=n[1];return{resource:{attributes:(0,a.Zs)(r.attributes),droppedAttributesCount:0},scopeLogs:Array.from(o,(function(e){var n=c(e,2)[1],r=n[0].instrumentationScope,o=r.name,i=r.version,s=r.schemaUrl;return{scope:{name:o,version:i},logRecords:n.map((function(e){return function(e,t){var n,r,o,i;return{timeUnixNano:t.encodeHrTime(e.hrTime),observedTimeUnixNano:t.encodeHrTime(e.hrTimeObserved),severityNumber:e.severityNumber,severityText:e.severityText,body:(0,a.Ff)(e.body),attributes:(i=e.attributes,Object.keys(i).map((function(e){return(0,a.EB)(e,i[e])}))),droppedAttributesCount:e.droppedAttributesCount,flags:null===(n=e.spanContext)||void 0===n?void 0:n.traceFlags,traceId:t.encodeOptionalSpanContext(null===(r=e.spanContext)||void 0===r?void 0:r.traceId),spanId:t.encodeOptionalSpanContext(null===(o=e.spanContext)||void 0===o?void 0:o.spanId)}}(e,t)})),schemaUrl:s}})),schemaUrl:void 0}}))}var l,d=n(369),p="v1/logs",f="http://localhost:4318/"+p,h=(l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},l(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},m=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,g({timeoutMillis:(0,o._)().OTEL_EXPORTER_OTLP_LOGS_TIMEOUT},t))||this;return n._headers=g(g({},n._headers),i.hD((0,o._)().OTEL_EXPORTER_OTLP_LOGS_HEADERS)),n}return h(t,e),t.prototype.convert=function(e){return function(e){return{resourceLogs:u(e,(0,s.Az)({useHex:!0,useLongBits:!1}))}}(e)},t.prototype.getDefaultUrl=function(e){return function(e){return"string"==typeof e.url?e.url:(0,o._)().OTEL_EXPORTER_OTLP_LOGS_ENDPOINT.length>0?(0,d.u3)((0,o._)().OTEL_EXPORTER_OTLP_LOGS_ENDPOINT):(0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,d.Ir)((0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT,p):f}(e)},t}(r.A)},6683:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OTLPTraceExporter:()=>m});var r=n(9893),o=n(5999),i=n(369),s=n(4912),a=n(6180);function c(e,t){var n,r=e.spanContext(),o=e.status;return{traceId:t.encodeSpanContext(r.traceId),spanId:t.encodeSpanContext(r.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:null===(n=r.traceState)||void 0===n?void 0:n.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:(0,a.Zs)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map((function(e){return function(e,t){return{attributes:e.attributes?(0,a.Zs)(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t)})),droppedEventsCount:e.droppedEventsCount,status:{code:o.code,message:o.message},links:e.links.map((function(e){return function(e,t){var n;return{attributes:e.attributes?(0,a.Zs)(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:null===(n=e.context.traceState)||void 0===n?void 0:n.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t)})),droppedLinksCount:e.droppedLinksCount}}var u=n(9356),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function d(e,t){for(var n=function(e){var t,n,r=new Map;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next();!i.done;i=o.next()){var s=i.value,a=r.get(s.resource);a||(a=new Map,r.set(s.resource,a));var c=s.instrumentationLibrary.name+"@"+(s.instrumentationLibrary.version||"")+":"+(s.instrumentationLibrary.schemaUrl||""),u=a.get(c);u||(u=[],a.set(c,u)),u.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e),r=[],o=n.entries(),i=o.next();!i.done;){for(var s=l(i.value,2),u=s[0],d=[],p=s[1].values(),f=p.next();!f.done;){var h=f.value;if(h.length>0){var g=h[0].instrumentationLibrary,m=g.name,y=g.version,v=g.schemaUrl,_=h.map((function(e){return c(e,t)}));d.push({scope:{name:m,version:y},spans:_,schemaUrl:v})}f=p.next()}var S={resource:{attributes:(0,a.Zs)(u.attributes),droppedAttributesCount:0},scopeSpans:d,schemaUrl:void 0};r.push(S),i=o.next()}return r}var p,f=(p=function(e,t){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},p(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h="v1/traces",g="http://localhost:4318/"+h,m=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._headers=Object.assign(n._headers,r.hD((0,o._)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return f(t,e),t.prototype.convert=function(e){return function(e){return{resourceSpans:d(e,(0,u.Az)({useHex:!0,useLongBits:!1}))}}(e)},t.prototype.getDefaultUrl=function(e){return"string"==typeof e.url?e.url:(0,o._)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,i.u3)((0,o._)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,i.Ir)((0,o._)().OTEL_EXPORTER_OTLP_ENDPOINT,h):g},t}(s.A)},4912:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r,o=n(5988),i=n(9464),s=n(9094),a=n(369),c=function(){function e(e){void 0===e&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),"string"==typeof e.hostname&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new i.I(this._shutdown,this),this._concurrencyLimit="number"==typeof e.concurrencyLimit?e.concurrencyLimit:30,this.timeoutMillis=(0,a.rH)(e.timeoutMillis),this.onInit(e)}return e.prototype.export=function(e,t){this._shutdownOnce.isCalled?t({code:s.V.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?t({code:s.V.FAILED,error:new Error("Concurrent export limit reached")}):this._export(e).then((function(){t({code:s.V.SUCCESS})})).catch((function(e){t({code:s.V.FAILED,error:e})}))},e.prototype._export=function(e){var t=this;return new Promise((function(n,r){try{o.s.debug("items to be sent",e),t.send(e,n,r)}catch(e){r(e)}}))},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then((function(){}))},e.prototype._shutdown=function(){return o.s.debug("shutdown started"),this.onShutdown(),this.forceFlush()},e}(),u=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.name="OTLPExporterError",o.data=r,o.code=n,o}return u(t,e),t}(Error),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)},p=n(9893),f=n(5999),h=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._useXHR=!1,n._useXHR=!!t.headers||"function"!=typeof navigator.sendBeacon,n._useXHR?n._headers=Object.assign({},(0,a.QG)(t.headers),p.hD((0,f._)().OTEL_EXPORTER_OTLP_HEADERS)):n._headers={},n}return h(t,e),t.prototype.onInit=function(){},t.prototype.onShutdown=function(){},t.prototype.send=function(e,t,n){var r=this;if(this._shutdownOnce.isCalled)o.s.debug("Shutdown already started. Cannot send objects");else{var i=this.convert(e),s=JSON.stringify(i),c=new Promise((function(e,t){r._useXHR?function(e,t,n,r,i,s){var c,u,p=!1,f=setTimeout((function(){if(clearTimeout(c),p=!0,u.readyState===XMLHttpRequest.DONE){var e=new l("Request Timeout");s(e)}else u.abort()}),r),h=function(r,g){void 0===r&&(r=a.J9),void 0===g&&(g=a.Tj),(u=new XMLHttpRequest).open("POST",t),Object.entries(d(d({},{Accept:"application/json","Content-Type":"application/json"}),n)).forEach((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1];u.setRequestHeader(n,r)})),u.send(e),u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE&&!1===p)if(u.status>=200&&u.status<=299)o.s.debug("xhr success",e),i(),clearTimeout(f),clearTimeout(c);else if(u.status&&(0,a.$q)(u.status)&&r>0){var t;g=a.Q5*g,t=u.getResponseHeader("Retry-After")?(0,a.u6)(u.getResponseHeader("Retry-After")):Math.round(Math.random()*(a.Rr-g)+g),c=setTimeout((function(){h(r-1,g)}),t)}else{var n=new l("Failed to export with XHR (status: "+u.status+")",u.status);s(n),clearTimeout(f),clearTimeout(c)}},u.onabort=function(){if(p){var e=new l("Request Timeout");s(e)}clearTimeout(f),clearTimeout(c)},u.onerror=function(){if(p){var e=new l("Request Timeout");s(e)}clearTimeout(f),clearTimeout(c)}};h()}(s,r.url,r._headers,r.timeoutMillis,e,t):function(e,t,n,r,i){navigator.sendBeacon(t,new Blob([e],{type:"application/json"}))?(o.s.debug("sendBeacon - can send",e),r()):i(new l("sendBeacon - cannot send "+e))}(s,r.url,0,e,t)})).then(t,n);this._sendingPromises.push(c);var u=function(){var e=r._sendingPromises.indexOf(c);r._sendingPromises.splice(e,1)};c.then(u,u)}},t}(c)},369:(e,t,n)=>{"use strict";n.d(t,{$q:()=>m,Ir:()=>p,J9:()=>a,Q5:()=>l,QG:()=>d,Rr:()=>u,Tj:()=>c,rH:()=>h,u3:()=>f,u6:()=>y});var r=n(5988),o=n(5999),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=1e4,a=5,c=1e3,u=5e3,l=1.5;function d(e){void 0===e&&(e={});var t={};return Object.entries(e).forEach((function(e){var n=i(e,2),o=n[0],s=n[1];void 0!==s?t[o]=String(s):r.s.warn('Header "'+o+'" has wrong value and will be ignored')})),t}function p(e,t){return e.endsWith("/")||(e+="/"),e+t}function f(e){try{var t=new URL(e);return""===t.pathname&&(t.pathname=t.pathname+"/"),t.toString()}catch(t){return r.s.warn("Could not parse export URL: '"+e+"'"),e}}function h(e){return"number"==typeof e?e<=0?g(e,s):e:(n=Number(null!==(t=(0,o._)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==t?t:(0,o._)().OTEL_EXPORTER_OTLP_TIMEOUT))<=0?g(n,s):n;var t,n}function g(e,t){return r.s.warn("Timeout must be greater than 0",e),t}function m(e){return[429,502,503,504].includes(e)}function y(e){if(null==e)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?1e3*t:-1;var n=new Date(e).getTime()-Date.now();return n>=0?n:0}},9356:(e,t,n)=>{"use strict";n.d(t,{Az:()=>p});var r=n(4530);function o(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function i(e){for(var t=new Uint8Array(e.length/2),n=0,r=0;r<e.length;r+=2){var i=o(e.charCodeAt(r)),s=o(e.charCodeAt(r+1));t[n++]=i<<4|s}return t}function s(e){var t=BigInt(1e9);return BigInt(e[0])*t+BigInt(e[1])}function a(e){var t;return t=s(e),{low:Number(BigInt.asUintN(32,t)),high:Number(BigInt.asUintN(32,t>>BigInt(32)))}}var c="undefined"!=typeof BigInt?function(e){return s(e).toString()}:r.u5;function u(e){return e}function l(e){if(void 0!==e)return i(e)}var d={encodeHrTime:a,encodeSpanContext:i,encodeOptionalSpanContext:l};function p(e){var t,n;if(void 0===e)return d;var r=null===(t=e.useLongBits)||void 0===t||t,o=null!==(n=e.useHex)&&void 0!==n&&n;return{encodeHrTime:r?a:c,encodeSpanContext:o?u:i,encodeOptionalSpanContext:o?u:l}}},6180:(e,t,n)=>{"use strict";n.d(t,{EB:()=>i,Ff:()=>s,Zs:()=>o});var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function o(e){return Object.keys(e).map((function(t){return i(t,e[t])}))}function i(e,t){return{key:e,value:s(t)}}function s(e){var t=typeof e;return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(s)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map((function(e){var t=r(e,2);return i(t[0],t[1])}))}}:{}}},1922:(e,t,n)=>{"use strict";n.d(t,{F:()=>u});var r,o=n(5988),i=n(1347),s=((r={})[i._2.TELEMETRY_SDK_NAME]="opentelemetry",r[i._2.PROCESS_RUNTIME_NAME]="browser",r[i._2.TELEMETRY_SDK_LANGUAGE]=i.wP.WEBJS,r[i._2.TELEMETRY_SDK_VERSION]="1.22.0",r),a=n(549),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},u=function(){function e(e,t){var n,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==t?void 0:t.then((function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e}),(function(e){return o.s.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[i._2.SERVICE_NAME]=(0,a.m)(),t[i._2.TELEMETRY_SDK_LANGUAGE]=s[i._2.TELEMETRY_SDK_LANGUAGE],t[i._2.TELEMETRY_SDK_NAME]=s[i._2.TELEMETRY_SDK_NAME],t[i._2.TELEMETRY_SDK_VERSION]=s[i._2.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&o.s.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.merge=function(t){var n,r=this;if(!t)return this;var o=c(c({},this._syncAttributes),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(o);var i=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var n,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),i=o[0],s=o[1];return c(c(c(c({},r._syncAttributes),i),null!==(n=t._syncAttributes)&&void 0!==n?n:t.attributes),s)}));return new e(o,i)},e.EMPTY=new e({}),e}()},8990:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Resource:()=>r.F,browserDetector:()=>y,browserDetectorSync:()=>m,defaultServiceName:()=>o.m,detectResources:()=>w,detectResourcesSync:()=>C,envDetector:()=>E,envDetectorSync:()=>S,hostDetector:()=>a,hostDetectorSync:()=>u,osDetector:()=>c,osDetectorSync:()=>l,processDetector:()=>d,processDetectorSync:()=>p});var r=n(1922),o=n(549),i=new(function(){function e(){}return e.prototype.detect=function(){return new r.F({})},e}()),s=new(function(){function e(){}return e.prototype.detect=function(){return Promise.resolve(i.detect())},e}()),a=s,c=s,u=i,l=i,d=s,p=s,f=n(1347),h=n(5988),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},m=new(function(){function e(){}return e.prototype.detect=function(e){var t;if("undefined"==typeof navigator)return r.F.empty();var n=((t={})[f._2.PROCESS_RUNTIME_NAME]="browser",t[f._2.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",t[f._2.PROCESS_RUNTIME_VERSION]=navigator.userAgent,t);return this._getResourceAttributes(n,e)},e.prototype._getResourceAttributes=function(e,t){return""===e[f._2.PROCESS_RUNTIME_VERSION]?(h.s.debug("BrowserDetector failed: Unable to find required browser resources. "),r.F.empty()):new r.F(g({},e))},e}()),y=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(m.detect(e))},e}()),v=n(5999),_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},S=new(function(){function e(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return e.prototype.detect=function(e){var t={},n=(0,v._)(),o=n.OTEL_RESOURCE_ATTRIBUTES,i=n.OTEL_SERVICE_NAME;if(o)try{var s=this._parseResourceAttributes(o);Object.assign(t,s)}catch(e){h.s.debug("EnvDetector failed: "+e.message)}return i&&(t[f._2.SERVICE_NAME]=i),new r.F(t)},e.prototype._parseResourceAttributes=function(e){var t,n;if(!e)return{};var r={},o=e.split(this._COMMA_SEPARATOR,-1);try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),s=i.next();!s.done;s=i.next()){var a=s.value.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2===a.length){var c=_(a,2),u=c[0],l=c[1];if(u=u.trim(),l=l.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(u))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(l))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);r[u]=decodeURIComponent(l)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype._isValid=function(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)},e.prototype._isBaggageOctetString=function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<33||44===n||59===n||92===n||n>126)return!1}return!0},e.prototype._isValidAndNotEmpty=function(e){return e.length>0&&this._isValid(e)},e}()),E=new(function(){function e(){}return e.prototype.detect=function(e){return Promise.resolve(S.detect(e))},e}()),b=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},w=function(e){return void 0===e&&(e={}),b(void 0,void 0,void 0,(function(){var t;return T(this,(function(n){switch(n.label){case 0:return[4,Promise.all((e.detectors||[]).map((function(t){return b(void 0,void 0,void 0,(function(){var n,o;return T(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.detect(e)];case 1:return n=i.sent(),h.s.debug(t.constructor.name+" found resource.",n),[2,n];case 2:return o=i.sent(),h.s.debug(t.constructor.name+" failed: "+o.message),[2,r.F.empty()];case 3:return[2]}}))}))})))];case 1:return t=n.sent(),R(t),[2,t.reduce((function(e,t){return e.merge(t)}),r.F.empty())]}}))}))},C=function(e){var t;void 0===e&&(e={});var n=(null!==(t=e.detectors)&&void 0!==t?t:[]).map((function(t){try{var n,o=t.detect(e);return n=null!==(i=o)&&"object"==typeof i&&"function"==typeof i.then?new r.F({},b(void 0,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,o];case 1:return[2,e.sent().attributes]}}))}))):o,n.waitForAsyncAttributes?n.waitForAsyncAttributes().then((function(){return h.s.debug(t.constructor.name+" found resource.",n)})):h.s.debug(t.constructor.name+" found resource.",n),n}catch(e){return h.s.error(t.constructor.name+" failed: "+e.message),r.F.empty()}var i})),o=n.reduce((function(e,t){return e.merge(t)}),r.F.empty());return o.waitForAsyncAttributes&&o.waitForAsyncAttributes().then((function(){R(n)})),o},R=function(e){e.forEach((function(e){if(Object.keys(e.attributes).length>0){var t=JSON.stringify(e.attributes,null,4);h.s.verbose(t)}}))}},549:(e,t,n)=>{"use strict";function r(){return"unknown_service"}n.d(t,{m:()=>r})},2679:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BatchLogRecordProcessor:()=>F,ConsoleLogRecordExporter:()=>A,InMemoryLogRecordExporter:()=>N,LogRecord:()=>g,LoggerProvider:()=>I,NoopLogRecordProcessor:()=>R,SimpleLogRecordProcessor:()=>D});var r,o=n(5988),i=n(2896),s=n(1922),a=n(6387),c=n(9464),u=n(6982),l=n(8442),d=n(9905),p=n(4530),f=n(3698),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},g=function(){function e(e,t,n){this.attributes={},this.totalAttributesCount=0,this._isReadonly=!1;var r=n.timestamp,o=n.observedTimestamp,i=n.severityNumber,s=n.severityText,a=n.body,c=n.attributes,u=void 0===c?{}:c,f=n.context,h=Date.now();if(this.hrTime=(0,p.KJ)(null!=r?r:h),this.hrTimeObserved=(0,p.KJ)(null!=o?o:h),f){var g=l.u.getSpanContext(f);g&&d.YA(g)&&(this.spanContext=g)}this.severityNumber=i,this.severityText=s,this.body=a,this.resource=e.resource,this.instrumentationScope=t,this._logRecordLimits=e.logRecordLimits,this.setAttributes(u)}return Object.defineProperty(e.prototype,"severityText",{get:function(){return this._severityText},set:function(e){this._isLogRecordReadonly()||(this._severityText=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"severityNumber",{get:function(){return this._severityNumber},set:function(e){this._isLogRecordReadonly()||(this._severityNumber=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},set:function(e){this._isLogRecordReadonly()||(this._body=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this.totalAttributesCount-Object.keys(this.attributes).length},enumerable:!1,configurable:!0}),e.prototype.setAttribute=function(e,t){return this._isLogRecordReadonly()||null===t?this:0===e.length?(o.s.warn("Invalid attribute key: "+e),this):(0,f.m)(t)||"object"==typeof t&&!Array.isArray(t)&&Object.keys(t).length>0?(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||((0,f.m)(t)?this.attributes[e]=this._truncateToSize(t):this.attributes[e]=t),this):(o.s.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=r.next();!o.done;o=r.next()){var i=h(o.value,2),s=i[0],a=i[1];this.setAttribute(s,a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.setBody=function(e){return this.body=e,this},e.prototype.setSeverityNumber=function(e){return this.severityNumber=e,this},e.prototype.setSeverityText=function(e){return this.severityText=e,this},e.prototype._makeReadonly=function(){this._isReadonly=!0},e.prototype._truncateToSize=function(e){var t=this,n=this._logRecordLimits.attributeValueLengthLimit;return n<=0?(o.s.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substring(0,t)},e.prototype._isLogRecordReadonly=function(){return this._isReadonly&&o.s.warn("Can not execute the operation on emitted log record"),this._isReadonly},e}(),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},y=function(){function e(e,t){this.instrumentationScope=e,this._sharedState=t}return e.prototype.emit=function(e){var t=e.context||u._.active(),n=new g(this._sharedState,this.instrumentationScope,m({context:t},e));this._sharedState.activeProcessor.onEmit(n,t),n._makeReadonly()},e}(),v=n(5999),_=n(30),S=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return S(t,e),t}(Error);function b(e,t){var n,r=new Promise((function(e,r){n=setTimeout((function(){r(new E("Operation timed out."))}),t)}));return Promise.race([e,r]).then((function(e){return clearTimeout(n),e}),(function(e){throw clearTimeout(n),e}))}var T=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},C=function(){function e(e,t){this.processors=e,this.forceFlushTimeoutMillis=t}return e.prototype.forceFlush=function(){return T(this,void 0,void 0,(function(){var e;return w(this,(function(t){switch(t.label){case 0:return e=this.forceFlushTimeoutMillis,[4,Promise.all(this.processors.map((function(t){return b(t.forceFlush(),e)})))];case 1:return t.sent(),[2]}}))}))},e.prototype.onEmit=function(e,t){this.processors.forEach((function(n){return n.onEmit(e,t)}))},e.prototype.shutdown=function(){return T(this,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this.processors.map((function(e){return e.shutdown()})))];case 1:return e.sent(),[2]}}))}))},e}(),R=function(){function e(){}return e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onEmit=function(e,t){},e.prototype.shutdown=function(){return Promise.resolve()},e}(),O=function(e,t,n){this.resource=e,this.forceFlushTimeoutMillis=t,this.logRecordLimits=n,this.loggers=new Map,this.registeredLogRecordProcessors=[],this.activeProcessor=new R},I=function(){function e(e){void 0===e&&(e={});var t=(0,a.h)({},{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:(0,v._)().OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,v._)().OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT},includeTraceContext:!0},e),n=t.resource,r=void 0===n?s.F.default():n,o=t.logRecordLimits,i=t.forceFlushTimeoutMillis;this._sharedState=new O(r,i,function(e){var t,n,r,o,i,s,a=(0,_.wn)();return{attributeCountLimit:null!==(r=null!==(n=null!==(t=e.attributeCountLimit)&&void 0!==t?t:a.OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT)&&void 0!==n?n:a.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==r?r:_.fv,attributeValueLengthLimit:null!==(s=null!==(i=null!==(o=e.attributeValueLengthLimit)&&void 0!==o?o:a.OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==i?i:a.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==s?s:_.aE}}(o)),this._shutdownOnce=new c.I(this._shutdown,this)}return e.prototype.getLogger=function(e,t,n){if(this._shutdownOnce.isCalled)return o.s.warn("A shutdown LoggerProvider cannot provide a Logger"),i.G;e||o.s.warn("Logger requested without instrumentation scope name.");var r=e||"unknown",s=r+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._sharedState.loggers.has(s)||this._sharedState.loggers.set(s,new y({name:r,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._sharedState)),this._sharedState.loggers.get(s)},e.prototype.addLogRecordProcessor=function(e){0===this._sharedState.registeredLogRecordProcessors.length&&this._sharedState.activeProcessor.shutdown().catch((function(e){return o.s.error("Error while trying to shutdown current log record processor",e)})),this._sharedState.registeredLogRecordProcessors.push(e),this._sharedState.activeProcessor=new C(this._sharedState.registeredLogRecordProcessors,this._sharedState.forceFlushTimeoutMillis)},e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?(o.s.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()},e.prototype.shutdown=function(){return this._shutdownOnce.isCalled?(o.s.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._sharedState.activeProcessor.shutdown()},e}(),M=n(9094),A=function(){function e(){}return e.prototype.export=function(e,t){this._sendLogRecords(e,t)},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype._exportInfo=function(e){var t,n,r;return{timestamp:(0,p.w_)(e.hrTime),traceId:null===(t=e.spanContext)||void 0===t?void 0:t.traceId,spanId:null===(n=e.spanContext)||void 0===n?void 0:n.spanId,traceFlags:null===(r=e.spanContext)||void 0===r?void 0:r.traceFlags,severityText:e.severityText,severityNumber:e.severityNumber,body:e.body,attributes:e.attributes}},e.prototype._sendLogRecords=function(e,t){var n,r;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next();!i.done;i=o.next()){var s=i.value;console.dir(this._exportInfo(s),{depth:3})}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}null==t||t({code:M.V.SUCCESS})},e}(),k=n(7037),P=n(7292),D=function(){function e(e){this._exporter=e,this._shutdownOnce=new c.I(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.onEmit=function(e){var t,n,r=this;if(!this._shutdownOnce.isCalled){var o=function(){return k.mM._export(r._exporter,[e]).then((function(e){var t;e.code!==M.V.SUCCESS&&(0,P.s)(null!==(t=e.error)&&void 0!==t?t:new Error("SimpleLogRecordProcessor: log record export failed (status "+e+")"))})).catch(P.s)};if(e.resource.asyncAttributesPending){var i=null===(n=(t=e.resource).waitForAsyncAttributes)||void 0===n?void 0:n.call(t).then((function(){return r._unresolvedExports.delete(i),o()}),P.s);null!=i&&this._unresolvedExports.add(i)}else o()}},e.prototype.forceFlush=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}(),N=function(){function e(){this._finishedLogRecords=[],this._stopped=!1}return e.prototype.export=function(e,t){var n;if(this._stopped)return t({code:M.V.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedLogRecords).push.apply(n,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e),!1)),t({code:M.V.SUCCESS})},e.prototype.shutdown=function(){return this._stopped=!0,this.reset(),Promise.resolve()},e.prototype.getFinishedLogRecords=function(){return this._finishedLogRecords},e.prototype.reset=function(){this._finishedLogRecords=[]},e}(),L=n(2604),x=function(){function e(e,t){var n,r,i,s;this._exporter=e,this._finishedLogRecords=[];var a=(0,v._)();this._maxExportBatchSize=null!==(n=null==t?void 0:t.maxExportBatchSize)&&void 0!==n?n:a.OTEL_BLRP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=null!==(r=null==t?void 0:t.maxQueueSize)&&void 0!==r?r:a.OTEL_BLRP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=null!==(i=null==t?void 0:t.scheduledDelayMillis)&&void 0!==i?i:a.OTEL_BLRP_SCHEDULE_DELAY,this._exportTimeoutMillis=null!==(s=null==t?void 0:t.exportTimeoutMillis)&&void 0!==s?s:a.OTEL_BLRP_EXPORT_TIMEOUT,this._shutdownOnce=new c.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(o.s.warn("BatchLogRecordProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.onEmit=function(e){this._shutdownOnce.isCalled||this._addToBuffer(e)},e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return this.onShutdown(),[4,this._flushAll()];case 1:return e.sent(),[4,this._exporter.shutdown()];case 2:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype._addToBuffer=function(e){this._finishedLogRecords.length>=this._maxQueueSize||(this._finishedLogRecords.push(e),this._maybeStartTimer())},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var r=[],o=Math.ceil(e._finishedLogRecords.length/e._maxExportBatchSize),i=0;i<o;i++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedLogRecords.length?Promise.resolve():new Promise((function(t,n){b(e._export(e._finishedLogRecords.splice(0,e._maxExportBatchSize)),e._exportTimeoutMillis).then((function(){return t()})).catch(n)}))},e.prototype._maybeStartTimer=function(){var e=this;void 0===this._timer&&(this._timer=setTimeout((function(){e._flushOneBatch().then((function(){e._finishedLogRecords.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(e){(0,P.s)(e)}))}),this._scheduledDelayMillis),(0,L.K)(this._timer))},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e.prototype._export=function(e){var t=this,n=function(){return k.mM._export(t._exporter,e).then((function(e){var t;e.code!==M.V.SUCCESS&&(0,P.s)(null!==(t=e.error)&&void 0!==t?t:new Error("BatchLogRecordProcessor: log record export failed (status "+e+")"))})).catch(P.s)},r=e.map((function(e){return e.resource})).filter((function(e){return e.asyncAttributesPending}));return 0===r.length?n():Promise.all(r.map((function(e){var t;return null===(t=e.waitForAsyncAttributes)||void 0===t?void 0:t.call(e)}))).then(n,P.s)},e}(),U=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._onInit(n),r}return U(t,e),t.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t.prototype._onInit=function(e){var t=this;!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this._pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t}(x)},9827:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlwaysOffSampler:()=>E,AlwaysOnSampler:()=>b,BasicTracerProvider:()=>le,BatchSpanProcessor:()=>ue,ConsoleSpanExporter:()=>de,ForceFlushState:()=>U,InMemorySpanExporter:()=>pe,NoopSpanProcessor:()=>re,ParentBasedSampler:()=>C,RandomIdGenerator:()=>D,SamplingDecision:()=>r,SimpleSpanProcessor:()=>he,Span:()=>v,TraceIdRatioBasedSampler:()=>R,Tracer:()=>F});var r,o=n(6982),i=n(8442),s=n(5988),a=n(2102),c=n(4569),u=n(9364),l=n(1199),d=n(3331),p=n(3698),f=n(2626),h=n(2648),g=n(4530),m=n(1868),y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},v=function(){function e(e,t,n,r,o,i,s,a,c,u){void 0===s&&(s=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:f.s.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=i,this.kind=o,this.links=s;var l=Date.now();this._performanceStartTime=h.u.now(),this._performanceOffset=l-(this._performanceStartTime+(0,g.uc)()),this._startTimeProvided=null!=a,this.startTime=this._getTime(null!=a?a:l),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=u&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(s.s.warn("Invalid attribute key: "+e),this):(0,p.m)(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(s.s.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),o=r.next();!o.done;o=r.next()){var i=y(o.value,2),s=i[0],a=i[1];this.setAttribute(s,a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return s.s.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&s.s.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,g.Ir)(t)&&((0,g.Ir)(n)||(n=t),t=void 0);var r=(0,p.L)(t);return this.events.push({name:e,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?s.s.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=(0,g.W5)(this.startTime,this.endTime),this._duration[0]<0&&(s.s.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&s.s.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<h.u.now())return(0,g._5)(e+this._performanceOffset);if("number"==typeof e)return(0,g.lg)(e);if(e instanceof Date)return(0,g.lg)(e.getTime());if((0,g.VL)(e))return e;if(this._startTimeProvided)return(0,g.lg)(Date.now());var t=h.u.now()-this._performanceStartTime;return(0,g.mw)(this.startTime,(0,g.lg)(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var n={};"string"==typeof e?n[m.IXq.EXCEPTION_MESSAGE]=e:e&&(e.code?n[m.IXq.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[m.IXq.EXCEPTION_TYPE]=e.name),e.message&&(n[m.IXq.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[m.IXq.EXCEPTION_STACKTRACE]=e.stack)),n[m.IXq.EXCEPTION_TYPE]||n[m.IXq.EXCEPTION_MESSAGE]?this.addEvent("exception",n,t):s.s.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&s.s.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(s.s.warn("Attribute value limit must be positive, got "+n),e):"string"==typeof e?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,n):e})):e},e}(),_=n(5999),S=n(458);!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r||(r={}));var E=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:r.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),b=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:r.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),T=n(9905),w=n(7292),C=function(){function e(e){var t,n,r,o;this._root=e.root,this._root||((0,w.s)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new b),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new b,this._remoteParentNotSampled=null!==(n=e.remoteParentNotSampled)&&void 0!==n?n:new E,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new b,this._localParentNotSampled=null!==(o=e.localParentNotSampled)&&void 0!==o?o:new E}return e.prototype.shouldSample=function(e,t,n,r,o,s){var a=i.u.getSpanContext(e);return a&&(0,T.YA)(a)?a.isRemote?a.traceFlags&l.X.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,r,o,s):this._remoteParentNotSampled.shouldSample(e,t,n,r,o,s):a.traceFlags&l.X.SAMPLED?this._localParentSampled.shouldSample(e,t,n,r,o,s):this._localParentNotSampled.shouldSample(e,t,n,r,o,s):this._root.shouldSample(e,t,n,r,o,s)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),R=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:(0,T.hX)(t)&&this._accumulate(t)<this._upperBound?r.RECORD_AND_SAMPLED:r.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),O=(0,_._)(),I=S.R.AlwaysOn;function M(){return{sampler:A(O),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,_._)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,_._)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,_._)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,_._)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,_._)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,_._)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,_._)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,_._)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function A(e){switch(void 0===e&&(e=(0,_._)()),e.OTEL_TRACES_SAMPLER){case S.R.AlwaysOn:return new b;case S.R.AlwaysOff:return new E;case S.R.ParentBasedAlwaysOn:return new C({root:new b});case S.R.ParentBasedAlwaysOff:return new C({root:new E});case S.R.TraceIdRatio:return new R(k(e));case S.R.ParentBasedTraceIdRatio:return new C({root:new R(k(e))});default:return s.s.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+I+'".'),new b}}function k(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return s.s.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(s.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):t<0||t>1?(s.s.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):t}var P=n(30),D=function(){this.generateTraceId=L(16),this.generateSpanId=L(8)},N=Array(32);function L(e){return function(){for(var t=0;t<2*e;t++)N[t]=Math.floor(16*Math.random())+48,N[t]>=58&&(N[t]+=39);return String.fromCharCode.apply(null,N.slice(0,2*e))}}var x,U,F=function(){function e(e,t,n){this._tracerProvider=n;var r,o,i,s,a=(r=t,o={sampler:A()},i=M(),(s=Object.assign({},i,o,r)).generalLimits=Object.assign({},i.generalLimits,r.generalLimits||{}),s.spanLimits=Object.assign({},i.spanLimits,r.spanLimits||{}),s);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=t.idGenerator||new D,this.resource=n.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,n){var r,f,h;void 0===t&&(t={}),void 0===n&&(n=o._.active()),t.root&&(n=i.u.deleteSpan(n));var g=i.u.getSpan(n);if((0,d.Zf)(n))return s.s.debug("Instrumentation suppressed, returning Noop Span"),i.u.wrapSpanContext(a.dM);var m,y,_,S=null==g?void 0:g.spanContext(),E=this._idGenerator.generateSpanId();S&&i.u.isSpanContextValid(S)?(m=S.traceId,y=S.traceState,_=S.spanId):m=this._idGenerator.generateTraceId();var b=null!==(r=t.kind)&&void 0!==r?r:c.v.INTERNAL,T=(null!==(f=t.links)&&void 0!==f?f:[]).map((function(e){return{context:e.context,attributes:(0,p.L)(e.attributes)}})),w=(0,p.L)(t.attributes),C=this._sampler.shouldSample(n,m,e,b,w,T);y=null!==(h=C.traceState)&&void 0!==h?h:y;var R={traceId:m,spanId:E,traceFlags:C.decision===u.i.RECORD_AND_SAMPLED?l.X.SAMPLED:l.X.NONE,traceState:y};if(C.decision===u.i.NOT_RECORD)return s.s.debug("Recording is off, propagating context in a non-recording span"),i.u.wrapSpanContext(R);var O=(0,p.L)(Object.assign(w,C.attributes));return new v(this,n,e,R,b,_,T,t.startTime,void 0,O)},e.prototype.startActiveSpan=function(e,t,n,r){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=n):(s=t,a=n,c=r);var u=null!=a?a:o._.active(),l=this.startSpan(e,s,u),d=i.u.setSpan(u,l);return o._.with(d,c,void 0,l)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),B=n(9039),j=n(6387),W=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,n){var r,o;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),a=i.next();!a.done;a=i.next()){var c=a.value;try{c.inject(e,t,n)}catch(e){s.s.warn("Failed to inject with "+c.constructor.name+". Err: "+e.message)}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,n){return this._propagators.reduce((function(e,r){try{return r.extract(e,t,n)}catch(e){s.s.warn("Failed to inject with "+r.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}(),G="[_0-9a-z-*/]",H=new RegExp("^(?:[a-z]"+G+"{0,255}|[a-z0-9]"+G+"{0,240}@[a-z]"+G+"{0,13})$"),z=/^[ -~]{0,255}[!-~]$/,V=/,|=/,q=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,n){return t.push(n+"="+e.get(n)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var n=t.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),i=n.slice(r+1,t.length);(function(e){return H.test(e)})(o)&&function(e){return z.test(e)&&!V.test(e)}(i)&&e.set(o,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),$="traceparent",Y="tracestate",K=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),J=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=i.u.getSpanContext(e);if(r&&!(0,d.Zf)(e)&&(0,T.YA)(r)){var o="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||l.X.NONE).toString(16);n.set(t,$,o),r.traceState&&n.set(t,Y,r.traceState.serialize())}},e.prototype.extract=function(e,t,n){var r=n.get(t,$);if(!r)return e;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return e;var s=function(e){var t=K.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}(o);if(!s)return e;s.isRemote=!0;var a=n.get(t,Y);if(a){var c=Array.isArray(a)?a.join(","):a;s.traceState=new q("string"==typeof c?c:void 0)}return i.u.setSpanContext(e,s)},e.prototype.fields=function(){return[$,Y]},e}(),X=n(9601),Z=n(9893),Q=function(){function e(){}return e.prototype.inject=function(e,t,n){var r=B.$.getBaggage(e);if(r&&!(0,d.Zf)(e)){var o=(0,Z.pX)(r).filter((function(e){return e.length<=X.KV})).slice(0,X.QC),i=(0,Z.L7)(o);i.length>0&&n.set(t,X.r_,i)}},e.prototype.extract=function(e,t,n){var r=n.get(t,X.r_),o=Array.isArray(r)?r.join(X.EC):r;if(!o)return e;var i={};return 0===o.length?e:(o.split(X.EC).forEach((function(e){var t=(0,Z.Qd)(e);if(t){var n={value:t.value};t.metadata&&(n.metadata=t.metadata),i[t.key]=n}})),0===Object.entries(i).length?e:B.$.setBaggage(e,B.$.createBaggage(i)))},e.prototype.fields=function(){return[X.r_]},e}(),ee=n(1922),te=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ne=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,n=[];try{for(var r=te(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.forceFlush())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(n).then((function(){e()})).catch((function(t){(0,w.s)(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var n,r;try{for(var o=te(this._spanProcessors),i=o.next();!i.done;i=o.next())i.value.onStart(e,t)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(e){var t,n;try{for(var r=te(this._spanProcessors),o=r.next();!o.done;o=r.next())o.value.onEnd(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,n=[];try{for(var r=te(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.shutdown())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(n).then((function(){e()}),t)}))},e}(),re=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),oe=n(9464),ie=n(9094),se=n(2604),ae=function(){function e(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=(0,_._)();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new oe.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(s.s.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&l.X.SAMPLED&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&s.s.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(s.s.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,n){for(var r=[],o=0,i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);o<i;o++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(n)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,n){var r=setTimeout((function(){n(new Error("Timeout"))}),e._exportTimeoutMillis);o._.with((0,d.M1)(o._.active()),(function(){var o=e._finishedSpans.splice(0,e._maxExportBatchSize),i=function(){return e._exporter.export(o,(function(e){var o;clearTimeout(r),e.code===ie.V.SUCCESS?t():n(null!==(o=e.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))},s=o.map((function(e){return e.resource})).filter((function(e){return e.asyncAttributesPending}));0===s.length?i():Promise.all(s.map((function(e){var t;return null===(t=e.waitForAsyncAttributes)||void 0===t?void 0:t.call(e)}))).then(i,(function(e){(0,w.s)(e),n(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally((function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(t){e._isExporting=!1,(0,w.s)(t)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout((function(){return t()}),this._scheduledDelayMillis),(0,se.K)(this._timer))}},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),ce=(x=function(e,t){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},x(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ue=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.onInit(n),r}return ce(t,e),t.prototype.onInit=function(e){var t=this;!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this._pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(ae);!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(U||(U={}));var le=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=(0,j.h)({},M(),function(e){var t,n,r,o,i,s,a,c,u,l,d,p,f=Object.assign({},e.spanLimits),h=(0,P.wn)();return f.attributeCountLimit=null!==(s=null!==(i=null!==(o=null!==(n=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==n?n:null===(r=e.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==o?o:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==i?i:h.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:P.fv,f.attributeValueLengthLimit=null!==(p=null!==(d=null!==(l=null!==(c=null===(a=e.spanLimits)||void 0===a?void 0:a.attributeValueLengthLimit)&&void 0!==c?c:null===(u=e.generalLimits)||void 0===u?void 0:u.attributeValueLengthLimit)&&void 0!==l?l:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:P.aE,Object.assign({},e,{spanLimits:f})}(e));this.resource=null!==(t=n.resource)&&void 0!==t?t:ee.F.empty(),this.resource=ee.F.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var o=new ue(r);this.activeSpanProcessor=o}else this.activeSpanProcessor=new re}return e.prototype.getTracer=function(e,t,n){var r=e+"@"+(t||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new F({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return s.s.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new ne(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),i.u.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&o._.setGlobalContextManager(e.contextManager),e.propagator&&B.$.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(n){var r,o=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+e+" ms")),r=U.timeout}),e);t.forceFlush().then((function(){clearTimeout(o),r!==U.timeout&&(r=U.resolved,n(r))})).catch((function(e){clearTimeout(o),r=U.error,n(e)}))}))}));return new Promise((function(e,n){Promise.all(t).then((function(t){var r=t.filter((function(e){return e!==U.resolved}));r.length>0?n(r):e()})).catch((function(e){return n([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set((0,_._)().OTEL_PROPAGATORS)),n=t.map((function(t){var n=e._getPropagator(t);return n||s.s.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),n})).reduce((function(e,t){return t&&e.push(t),e}),[]);return 0===n.length?void 0:1===t.length?n[0]:new W({propagators:n})},e.prototype._buildExporterFromEnv=function(){var e=(0,_._)().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||s.s.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new J}],["baggage",function(){return new Q}]]),e._registeredExporters=new Map,e}(),de=function(){function e(){}return e.prototype.export=function(e,t){return this._sendSpans(e,t)},e.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype._exportInfo=function(e){var t;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:null===(t=e.spanContext().traceState)||void 0===t?void 0:t.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,g.w_)(e.startTime),duration:(0,g.w_)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},e.prototype._sendSpans=function(e,t){var n,r;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next();!i.done;i=o.next()){var s=i.value;console.dir(this._exportInfo(s),{depth:3})}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}if(t)return t({code:ie.V.SUCCESS})},e}(),pe=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(e,t){var n;if(this._stopped)return t({code:ie.V.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e),!1)),setTimeout((function(){return t({code:ie.V.SUCCESS})}),0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}(),fe=n(7037),he=function(){function e(e){this._exporter=e,this._shutdownOnce=new oe.I(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){return e=this,t=void 0,r=function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){var t,n,r=this;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&l.X.SAMPLED){var o=function(){return fe.mM._export(r._exporter,[e]).then((function(e){var t;e.code!==ie.V.SUCCESS&&(0,w.s)(null!==(t=e.error)&&void 0!==t?t:new Error("SimpleSpanProcessor: span export failed (status "+e+")"))})).catch((function(e){(0,w.s)(e)}))};if(e.resource.asyncAttributesPending){var i=null===(n=(t=e.resource).waitForAsyncAttributes)||void 0===n?void 0:n.call(t).then((function(){return null!=i&&r._unresolvedExports.delete(i),o()}),(function(e){return(0,w.s)(e)}));null!=i&&this._unresolvedExports.add(i)}else o()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}()},8712:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AWSECSLAUNCHTYPEVALUES_EC2:()=>o.Jn,AWSECSLAUNCHTYPEVALUES_FARGATE:()=>o.Fz,AwsEcsLaunchtypeValues:()=>o.AS,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:()=>o.WE,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:()=>o.op,CLOUDPLATFORMVALUES_AWS_EC2:()=>o.WC,CLOUDPLATFORMVALUES_AWS_ECS:()=>o.p7,CLOUDPLATFORMVALUES_AWS_EKS:()=>o.Vx,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:()=>o.Vf,CLOUDPLATFORMVALUES_AWS_LAMBDA:()=>o.JO,CLOUDPLATFORMVALUES_AZURE_AKS:()=>o.Vm,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:()=>o.L6,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:()=>o.oH,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:()=>o.$R,CLOUDPLATFORMVALUES_AZURE_VM:()=>o.zF,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:()=>o.$T,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:()=>o.a1,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:()=>o.qB,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:()=>o.Tg,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:()=>o.qN,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:()=>o.Eh,CLOUDPROVIDERVALUES_AWS:()=>o.Xm,CLOUDPROVIDERVALUES_AZURE:()=>o.BY,CLOUDPROVIDERVALUES_GCP:()=>o.ov,CloudPlatformValues:()=>o.ns,CloudProviderValues:()=>o.jV,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:()=>r.Bh9,DBCASSANDRACONSISTENCYLEVELVALUES_ANY:()=>r.Eo2,DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:()=>r.$8v,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:()=>r.slN,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:()=>r.VMk,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:()=>r.g9x,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:()=>r.G49,DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:()=>r.vhy,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:()=>r.OSW,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:()=>r.O2W,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:()=>r.WJJ,DBSYSTEMVALUES_ADABAS:()=>r.nWK,DBSYSTEMVALUES_CACHE:()=>r.V02,DBSYSTEMVALUES_CASSANDRA:()=>r.Rk0,DBSYSTEMVALUES_CLOUDSCAPE:()=>r.CQB,DBSYSTEMVALUES_COCKROACHDB:()=>r.y__,DBSYSTEMVALUES_COLDFUSION:()=>r.TKU,DBSYSTEMVALUES_COSMOSDB:()=>r.zmF,DBSYSTEMVALUES_COUCHBASE:()=>r.oBD,DBSYSTEMVALUES_COUCHDB:()=>r.hV,DBSYSTEMVALUES_DB2:()=>r.xhJ,DBSYSTEMVALUES_DERBY:()=>r.XTF,DBSYSTEMVALUES_DYNAMODB:()=>r.poY,DBSYSTEMVALUES_EDB:()=>r.ynC,DBSYSTEMVALUES_ELASTICSEARCH:()=>r.Ylk,DBSYSTEMVALUES_FILEMAKER:()=>r.Xdf,DBSYSTEMVALUES_FIREBIRD:()=>r.IOi,DBSYSTEMVALUES_FIRSTSQL:()=>r.$wW,DBSYSTEMVALUES_GEODE:()=>r.N4Y,DBSYSTEMVALUES_H2:()=>r.JZz,DBSYSTEMVALUES_HANADB:()=>r.Dzx,DBSYSTEMVALUES_HBASE:()=>r.Spc,DBSYSTEMVALUES_HIVE:()=>r.nwz,DBSYSTEMVALUES_HSQLDB:()=>r.pfp,DBSYSTEMVALUES_INFORMIX:()=>r.L5D,DBSYSTEMVALUES_INGRES:()=>r.L2R,DBSYSTEMVALUES_INSTANTDB:()=>r.K2_,DBSYSTEMVALUES_INTERBASE:()=>r.y6V,DBSYSTEMVALUES_MARIADB:()=>r.ngE,DBSYSTEMVALUES_MAXDB:()=>r.XER,DBSYSTEMVALUES_MEMCACHED:()=>r.Oe4,DBSYSTEMVALUES_MONGODB:()=>r.X36,DBSYSTEMVALUES_MSSQL:()=>r.Vp5,DBSYSTEMVALUES_MYSQL:()=>r.bfK,DBSYSTEMVALUES_NEO4J:()=>r.BJ_,DBSYSTEMVALUES_NETEZZA:()=>r.irN,DBSYSTEMVALUES_ORACLE:()=>r.PU4,DBSYSTEMVALUES_OTHER_SQL:()=>r.Wb_,DBSYSTEMVALUES_PERVASIVE:()=>r.mc2,DBSYSTEMVALUES_POINTBASE:()=>r.Y$v,DBSYSTEMVALUES_POSTGRESQL:()=>r.jCw,DBSYSTEMVALUES_PROGRESS:()=>r.KjL,DBSYSTEMVALUES_REDIS:()=>r.W_f,DBSYSTEMVALUES_REDSHIFT:()=>r.MpS,DBSYSTEMVALUES_SQLITE:()=>r.vl2,DBSYSTEMVALUES_SYBASE:()=>r.K0$,DBSYSTEMVALUES_TERADATA:()=>r.Xuz,DBSYSTEMVALUES_VERTICA:()=>r.lcm,DbCassandraConsistencyLevelValues:()=>r.Nxd,DbSystemValues:()=>r.Q5s,FAASDOCUMENTOPERATIONVALUES_DELETE:()=>r.mlL,FAASDOCUMENTOPERATIONVALUES_EDIT:()=>r.VEl,FAASDOCUMENTOPERATIONVALUES_INSERT:()=>r.oF4,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:()=>r.y3W,FAASINVOKEDPROVIDERVALUES_AWS:()=>r.Tl5,FAASINVOKEDPROVIDERVALUES_AZURE:()=>r.d3j,FAASINVOKEDPROVIDERVALUES_GCP:()=>r.kOl,FAASTRIGGERVALUES_DATASOURCE:()=>r.uZf,FAASTRIGGERVALUES_HTTP:()=>r.v8K,FAASTRIGGERVALUES_OTHER:()=>r.ToY,FAASTRIGGERVALUES_PUBSUB:()=>r.CK9,FAASTRIGGERVALUES_TIMER:()=>r.IxL,FaasDocumentOperationValues:()=>r.Ijl,FaasInvokedProviderValues:()=>r.zI8,FaasTriggerValues:()=>r.iPC,HOSTARCHVALUES_AMD64:()=>o.so,HOSTARCHVALUES_ARM32:()=>o.hi,HOSTARCHVALUES_ARM64:()=>o.UQ,HOSTARCHVALUES_IA64:()=>o.av,HOSTARCHVALUES_PPC32:()=>o.OZ,HOSTARCHVALUES_PPC64:()=>o.DL,HOSTARCHVALUES_X86:()=>o.ig,HTTPFLAVORVALUES_HTTP_1_0:()=>r.dbJ,HTTPFLAVORVALUES_HTTP_1_1:()=>r.kPW,HTTPFLAVORVALUES_HTTP_2_0:()=>r.gGD,HTTPFLAVORVALUES_QUIC:()=>r.iFX,HTTPFLAVORVALUES_SPDY:()=>r.QhH,HostArchValues:()=>o.Cg,HttpFlavorValues:()=>r.dNH,MESSAGETYPEVALUES_RECEIVED:()=>r.sr7,MESSAGETYPEVALUES_SENT:()=>r.bZN,MESSAGINGDESTINATIONKINDVALUES_QUEUE:()=>r.npt,MESSAGINGDESTINATIONKINDVALUES_TOPIC:()=>r.HXm,MESSAGINGOPERATIONVALUES_PROCESS:()=>r.AVC,MESSAGINGOPERATIONVALUES_RECEIVE:()=>r.mO,MessageTypeValues:()=>r.Ywq,MessagingDestinationKindValues:()=>r.b7t,MessagingOperationValues:()=>r.Qgf,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:()=>r.i9b,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:()=>r.mN_,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:()=>r.Q_6,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:()=>r.EPu,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:()=>r.uzh,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:()=>r.Bez,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:()=>r.uwh,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:()=>r.Rpt,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:()=>r.AdO,NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:()=>r.hu9,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:()=>r.x0j,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:()=>r.hze,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:()=>r.kgK,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:()=>r.rBh,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:()=>r.IMI,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:()=>r.wYf,NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:()=>r.bWQ,NETHOSTCONNECTIONSUBTYPEVALUES_NR:()=>r.JPM,NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:()=>r.ddb,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:()=>r._28,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:()=>r.yIV,NETHOSTCONNECTIONTYPEVALUES_CELL:()=>r.j7z,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:()=>r.D3U,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:()=>r.Vur,NETHOSTCONNECTIONTYPEVALUES_WIFI:()=>r.CGC,NETHOSTCONNECTIONTYPEVALUES_WIRED:()=>r.c1V,NETTRANSPORTVALUES_INPROC:()=>r.JjG,NETTRANSPORTVALUES_IP:()=>r.fN3,NETTRANSPORTVALUES_IP_TCP:()=>r.x85,NETTRANSPORTVALUES_IP_UDP:()=>r.ZUK,NETTRANSPORTVALUES_OTHER:()=>r.EUV,NETTRANSPORTVALUES_PIPE:()=>r.cjY,NETTRANSPORTVALUES_UNIX:()=>r.GR7,NetHostConnectionSubtypeValues:()=>r.cAF,NetHostConnectionTypeValues:()=>r.KSs,NetTransportValues:()=>r.z4S,OSTYPEVALUES_AIX:()=>o.cJ,OSTYPEVALUES_DARWIN:()=>o.JW,OSTYPEVALUES_DRAGONFLYBSD:()=>o.tD,OSTYPEVALUES_FREEBSD:()=>o.xG,OSTYPEVALUES_HPUX:()=>o.BT,OSTYPEVALUES_LINUX:()=>o.Yh,OSTYPEVALUES_NETBSD:()=>o.sS,OSTYPEVALUES_OPENBSD:()=>o.h7,OSTYPEVALUES_SOLARIS:()=>o.l9,OSTYPEVALUES_WINDOWS:()=>o.xR,OSTYPEVALUES_Z_OS:()=>o.Pi,OsTypeValues:()=>o.h0,RPCGRPCSTATUSCODEVALUES_ABORTED:()=>r.$5b,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:()=>r.TiO,RPCGRPCSTATUSCODEVALUES_CANCELLED:()=>r.Ryq,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:()=>r.ueJ,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:()=>r.wAY,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:()=>r._pX,RPCGRPCSTATUSCODEVALUES_INTERNAL:()=>r.dXK,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:()=>r.njt,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:()=>r.ay9,RPCGRPCSTATUSCODEVALUES_OK:()=>r.wJ,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:()=>r.GY$,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:()=>r.nXs,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:()=>r.KNN,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:()=>r._Q_,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:()=>r.gFG,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:()=>r.p1q,RPCGRPCSTATUSCODEVALUES_UNKNOWN:()=>r.ch2,RpcGrpcStatusCodeValues:()=>r.f3T,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:()=>r.wpU,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:()=>r.fhG,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:()=>r.tGA,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:()=>r.byW,SEMATTRS_AWS_DYNAMODB_COUNT:()=>r.F7w,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:()=>r.Wif,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:()=>r.TVZ,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:()=>r.Ouu,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:()=>r.gUJ,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:()=>r.Wx7,SEMATTRS_AWS_DYNAMODB_LIMIT:()=>r.La$,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:()=>r.ti,SEMATTRS_AWS_DYNAMODB_PROJECTION:()=>r.frU,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:()=>r.a4d,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:()=>r.p30,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:()=>r.sxk,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:()=>r.r0m,SEMATTRS_AWS_DYNAMODB_SEGMENT:()=>r.F0K,SEMATTRS_AWS_DYNAMODB_SELECT:()=>r.u4L,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:()=>r.mGg,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:()=>r.Ta3,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:()=>r.DBy,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:()=>r.TCh,SEMATTRS_CODE_FILEPATH:()=>r.cvh,SEMATTRS_CODE_FUNCTION:()=>r.jrL,SEMATTRS_CODE_LINENO:()=>r.usz,SEMATTRS_CODE_NAMESPACE:()=>r.klU,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:()=>r.Qt9,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:()=>r.DNX,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:()=>r.xq_,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:()=>r._iR,SEMATTRS_DB_CASSANDRA_KEYSPACE:()=>r.Unu,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:()=>r.Itx,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:()=>r.NlD,SEMATTRS_DB_CASSANDRA_TABLE:()=>r.zri,SEMATTRS_DB_CONNECTION_STRING:()=>r.cd9,SEMATTRS_DB_HBASE_NAMESPACE:()=>r.bd4,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:()=>r.qGX,SEMATTRS_DB_MONGODB_COLLECTION:()=>r.NlA,SEMATTRS_DB_MSSQL_INSTANCE_NAME:()=>r.Eh5,SEMATTRS_DB_NAME:()=>r.Rt6,SEMATTRS_DB_OPERATION:()=>r.l60,SEMATTRS_DB_REDIS_DATABASE_INDEX:()=>r.wy2,SEMATTRS_DB_SQL_TABLE:()=>r.pHC,SEMATTRS_DB_STATEMENT:()=>r.FoJ,SEMATTRS_DB_SYSTEM:()=>r.V0Q,SEMATTRS_DB_USER:()=>r.N9D,SEMATTRS_ENDUSER_ID:()=>r.RHQ,SEMATTRS_ENDUSER_ROLE:()=>r.cSi,SEMATTRS_ENDUSER_SCOPE:()=>r.MWE,SEMATTRS_EXCEPTION_ESCAPED:()=>r.GKr,SEMATTRS_EXCEPTION_MESSAGE:()=>r.aP6,SEMATTRS_EXCEPTION_STACKTRACE:()=>r.ipG,SEMATTRS_EXCEPTION_TYPE:()=>r.P4J,SEMATTRS_FAAS_COLDSTART:()=>r.TRX,SEMATTRS_FAAS_CRON:()=>r.HVV,SEMATTRS_FAAS_DOCUMENT_COLLECTION:()=>r.LxM,SEMATTRS_FAAS_DOCUMENT_NAME:()=>r.aTe,SEMATTRS_FAAS_DOCUMENT_OPERATION:()=>r.abe,SEMATTRS_FAAS_DOCUMENT_TIME:()=>r.aKn,SEMATTRS_FAAS_EXECUTION:()=>r.dsp,SEMATTRS_FAAS_INVOKED_NAME:()=>r.PIi,SEMATTRS_FAAS_INVOKED_PROVIDER:()=>r.XNY,SEMATTRS_FAAS_INVOKED_REGION:()=>r.imY,SEMATTRS_FAAS_TIME:()=>r.cFk,SEMATTRS_FAAS_TRIGGER:()=>r.bes,SEMATTRS_HTTP_CLIENT_IP:()=>r.nS0,SEMATTRS_HTTP_FLAVOR:()=>r.o8O,SEMATTRS_HTTP_HOST:()=>r.Qv9,SEMATTRS_HTTP_METHOD:()=>r.vof,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:()=>r.OdI,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:()=>r.Plv,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:()=>r.crS,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:()=>r.XyR,SEMATTRS_HTTP_ROUTE:()=>r.tto,SEMATTRS_HTTP_SCHEME:()=>r.zPu,SEMATTRS_HTTP_SERVER_NAME:()=>r.H35,SEMATTRS_HTTP_STATUS_CODE:()=>r.W_O,SEMATTRS_HTTP_TARGET:()=>r.fub,SEMATTRS_HTTP_URL:()=>r.vSt,SEMATTRS_HTTP_USER_AGENT:()=>r.Nz$,SEMATTRS_MESSAGE_COMPRESSED_SIZE:()=>r.U5o,SEMATTRS_MESSAGE_ID:()=>r.Gsd,SEMATTRS_MESSAGE_TYPE:()=>r.$58,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:()=>r.LfK,SEMATTRS_MESSAGING_CONSUMER_ID:()=>r.w54,SEMATTRS_MESSAGING_CONVERSATION_ID:()=>r.nN_,SEMATTRS_MESSAGING_DESTINATION:()=>r.Yjy,SEMATTRS_MESSAGING_DESTINATION_KIND:()=>r.lDI,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:()=>r.cZl,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:()=>r.rsL,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:()=>r.yRs,SEMATTRS_MESSAGING_KAFKA_PARTITION:()=>r.tNm,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:()=>r.E__,SEMATTRS_MESSAGING_MESSAGE_ID:()=>r.XH7,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:()=>r.CdG,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:()=>r._Zr,SEMATTRS_MESSAGING_OPERATION:()=>r.zpg,SEMATTRS_MESSAGING_PROTOCOL:()=>r._af,SEMATTRS_MESSAGING_PROTOCOL_VERSION:()=>r.DA0,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:()=>r.Zl1,SEMATTRS_MESSAGING_SYSTEM:()=>r.zBy,SEMATTRS_MESSAGING_TEMP_DESTINATION:()=>r.JK9,SEMATTRS_MESSAGING_URL:()=>r.t8j,SEMATTRS_NET_HOST_CARRIER_ICC:()=>r.wgx,SEMATTRS_NET_HOST_CARRIER_MCC:()=>r.cA3,SEMATTRS_NET_HOST_CARRIER_MNC:()=>r.hXS,SEMATTRS_NET_HOST_CARRIER_NAME:()=>r.ynP,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:()=>r.Ltc,SEMATTRS_NET_HOST_CONNECTION_TYPE:()=>r.PfM,SEMATTRS_NET_HOST_IP:()=>r.j$y,SEMATTRS_NET_HOST_NAME:()=>r.h70,SEMATTRS_NET_HOST_PORT:()=>r.Puv,SEMATTRS_NET_PEER_IP:()=>r.RvY,SEMATTRS_NET_PEER_NAME:()=>r.nvt,SEMATTRS_NET_PEER_PORT:()=>r.ZUg,SEMATTRS_NET_TRANSPORT:()=>r.Ac3,SEMATTRS_PEER_SERVICE:()=>r.RyT,SEMATTRS_RPC_GRPC_STATUS_CODE:()=>r.C2y,SEMATTRS_RPC_JSONRPC_ERROR_CODE:()=>r.Zwr,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:()=>r.z_u,SEMATTRS_RPC_JSONRPC_REQUEST_ID:()=>r.yew,SEMATTRS_RPC_JSONRPC_VERSION:()=>r.ZSz,SEMATTRS_RPC_METHOD:()=>r.Y3v,SEMATTRS_RPC_SERVICE:()=>r.GOV,SEMATTRS_RPC_SYSTEM:()=>r.sLO,SEMATTRS_THREAD_ID:()=>r.lpz,SEMATTRS_THREAD_NAME:()=>r.taz,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:()=>o.VH,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:()=>o.SV,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:()=>o.SA,SEMRESATTRS_AWS_ECS_TASK_ARN:()=>o.yB,SEMRESATTRS_AWS_ECS_TASK_FAMILY:()=>o.Zf,SEMRESATTRS_AWS_ECS_TASK_REVISION:()=>o.MK,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:()=>o.v0,SEMRESATTRS_AWS_LOG_GROUP_ARNS:()=>o.an,SEMRESATTRS_AWS_LOG_GROUP_NAMES:()=>o.qF,SEMRESATTRS_AWS_LOG_STREAM_ARNS:()=>o.ZZ,SEMRESATTRS_AWS_LOG_STREAM_NAMES:()=>o.Dn,SEMRESATTRS_CLOUD_ACCOUNT_ID:()=>o.E3,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:()=>o.xC,SEMRESATTRS_CLOUD_PLATFORM:()=>o.Iq,SEMRESATTRS_CLOUD_PROVIDER:()=>o.mA,SEMRESATTRS_CLOUD_REGION:()=>o.Nw,SEMRESATTRS_CONTAINER_ID:()=>o.ux,SEMRESATTRS_CONTAINER_IMAGE_NAME:()=>o.uB,SEMRESATTRS_CONTAINER_IMAGE_TAG:()=>o.RB,SEMRESATTRS_CONTAINER_NAME:()=>o.aA,SEMRESATTRS_CONTAINER_RUNTIME:()=>o.PZ,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:()=>o.I2,SEMRESATTRS_DEVICE_ID:()=>o.tn,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:()=>o.BF,SEMRESATTRS_DEVICE_MODEL_NAME:()=>o.Bt,SEMRESATTRS_FAAS_ID:()=>o.Mm,SEMRESATTRS_FAAS_INSTANCE:()=>o.uu,SEMRESATTRS_FAAS_MAX_MEMORY:()=>o.PO,SEMRESATTRS_FAAS_NAME:()=>o.Uf,SEMRESATTRS_FAAS_VERSION:()=>o.lO,SEMRESATTRS_HOST_ARCH:()=>o.yT,SEMRESATTRS_HOST_ID:()=>o.zs,SEMRESATTRS_HOST_IMAGE_ID:()=>o.HP,SEMRESATTRS_HOST_IMAGE_NAME:()=>o.be,SEMRESATTRS_HOST_IMAGE_VERSION:()=>o.g9,SEMRESATTRS_HOST_NAME:()=>o.RK,SEMRESATTRS_HOST_TYPE:()=>o.kE,SEMRESATTRS_K8S_CLUSTER_NAME:()=>o.IG,SEMRESATTRS_K8S_CONTAINER_NAME:()=>o.Pb,SEMRESATTRS_K8S_CRONJOB_NAME:()=>o.Vy,SEMRESATTRS_K8S_CRONJOB_UID:()=>o.gT,SEMRESATTRS_K8S_DAEMONSET_NAME:()=>o.Su,SEMRESATTRS_K8S_DAEMONSET_UID:()=>o.rK,SEMRESATTRS_K8S_DEPLOYMENT_NAME:()=>o.do,SEMRESATTRS_K8S_DEPLOYMENT_UID:()=>o.k7,SEMRESATTRS_K8S_JOB_NAME:()=>o.z3,SEMRESATTRS_K8S_JOB_UID:()=>o.mc,SEMRESATTRS_K8S_NAMESPACE_NAME:()=>o.Tl,SEMRESATTRS_K8S_NODE_NAME:()=>o.Ky,SEMRESATTRS_K8S_NODE_UID:()=>o.pV,SEMRESATTRS_K8S_POD_NAME:()=>o.TH,SEMRESATTRS_K8S_POD_UID:()=>o.gJ,SEMRESATTRS_K8S_REPLICASET_NAME:()=>o.kv,SEMRESATTRS_K8S_REPLICASET_UID:()=>o.PU,SEMRESATTRS_K8S_STATEFULSET_NAME:()=>o.kn,SEMRESATTRS_K8S_STATEFULSET_UID:()=>o.f8,SEMRESATTRS_OS_DESCRIPTION:()=>o.ik,SEMRESATTRS_OS_NAME:()=>o.hQ,SEMRESATTRS_OS_TYPE:()=>o.ko,SEMRESATTRS_OS_VERSION:()=>o.AC,SEMRESATTRS_PROCESS_COMMAND:()=>o.Cn,SEMRESATTRS_PROCESS_COMMAND_ARGS:()=>o.U2,SEMRESATTRS_PROCESS_COMMAND_LINE:()=>o.x2,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:()=>o.fP,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:()=>o.xQ,SEMRESATTRS_PROCESS_OWNER:()=>o.Yb,SEMRESATTRS_PROCESS_PID:()=>o.ky,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:()=>o.C3,SEMRESATTRS_PROCESS_RUNTIME_NAME:()=>o.lb,SEMRESATTRS_PROCESS_RUNTIME_VERSION:()=>o.cV,SEMRESATTRS_SERVICE_INSTANCE_ID:()=>o.PL,SEMRESATTRS_SERVICE_NAME:()=>o.AV,SEMRESATTRS_SERVICE_NAMESPACE:()=>o.ar,SEMRESATTRS_SERVICE_VERSION:()=>o.xs,SEMRESATTRS_TELEMETRY_AUTO_VERSION:()=>o.nA,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:()=>o.Pl,SEMRESATTRS_TELEMETRY_SDK_NAME:()=>o.$L,SEMRESATTRS_TELEMETRY_SDK_VERSION:()=>o.y$,SEMRESATTRS_WEBENGINE_DESCRIPTION:()=>o.U1,SEMRESATTRS_WEBENGINE_NAME:()=>o.HF,SEMRESATTRS_WEBENGINE_VERSION:()=>o.WN,SemanticAttributes:()=>r.IXq,SemanticResourceAttributes:()=>o._2,TELEMETRYSDKLANGUAGEVALUES_CPP:()=>o.S5,TELEMETRYSDKLANGUAGEVALUES_DOTNET:()=>o.XE,TELEMETRYSDKLANGUAGEVALUES_ERLANG:()=>o.o2,TELEMETRYSDKLANGUAGEVALUES_GO:()=>o.HE,TELEMETRYSDKLANGUAGEVALUES_JAVA:()=>o.du,TELEMETRYSDKLANGUAGEVALUES_NODEJS:()=>o.wE,TELEMETRYSDKLANGUAGEVALUES_PHP:()=>o.tP,TELEMETRYSDKLANGUAGEVALUES_PYTHON:()=>o.$c,TELEMETRYSDKLANGUAGEVALUES_RUBY:()=>o.jN,TELEMETRYSDKLANGUAGEVALUES_WEBJS:()=>o.uh,TelemetrySdkLanguageValues:()=>o.wP});var r=n(1868),o=n(1347)},9764:(e,t,n)=>{"use strict";function r(e){for(var t={},n=e.length,r=0;r<n;r++){var o=e[r];o&&(t[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return t}n.d(t,{O:()=>r})},1347:(e,t,n)=>{"use strict";n.d(t,{$L:()=>Xt,$R:()=>jn,$T:()=>qn,$c:()=>Yr,AC:()=>xt,AS:()=>Xn,AV:()=>$t,BF:()=>et,BT:()=>Mr,BY:()=>ln,Bt:()=>tt,C3:()=>qt,Cg:()=>dr,Cn:()=>jt,DL:()=>ur,Dn:()=>Ve,E3:()=>Pe,Eh:()=>cn,Fz:()=>Jn,HE:()=>zr,HF:()=>tn,HP:()=>pt,I2:()=>Ze,IG:()=>ht,Iq:()=>Le,JO:()=>Ln,JW:()=>wr,Jn:()=>Kn,Ky:()=>gt,L6:()=>Wn,MK:()=>We,Mm:()=>rt,Nw:()=>De,OZ:()=>cr,PL:()=>Kt,PO:()=>st,PU:()=>Et,PZ:()=>Ke,Pb:()=>St,Pi:()=>Pr,Pl:()=>Zt,RB:()=>Xe,RK:()=>ct,S5:()=>Wr,SA:()=>Fe,SV:()=>xe,Su:()=>It,TH:()=>_t,Tg:()=>Gn,Tl:()=>yt,U1:()=>rn,U2:()=>Gt,UQ:()=>sr,Uf:()=>nt,VH:()=>Ue,Vf:()=>xn,Vm:()=>Bn,Vx:()=>Nn,Vy:()=>Pt,WC:()=>Pn,WE:()=>An,WN:()=>nn,XE:()=>Gr,Xm:()=>un,Yb:()=>Ht,Yh:()=>Tr,ZZ:()=>qe,Zf:()=>je,_2:()=>on,a1:()=>Vn,aA:()=>$e,an:()=>ze,ar:()=>Yt,av:()=>ar,be:()=>dt,cJ:()=>Ar,cV:()=>Vt,do:()=>wt,du:()=>Vr,f8:()=>Ct,fP:()=>Ft,g9:()=>ft,gJ:()=>vt,gT:()=>kt,h0:()=>Dr,h7:()=>Or,hQ:()=>Lt,hi:()=>ir,ig:()=>lr,ik:()=>Nt,jN:()=>Kr,jV:()=>pn,k7:()=>Tt,kE:()=>ut,kn:()=>Rt,ko:()=>Dt,kv:()=>bt,ky:()=>Ut,l9:()=>kr,lO:()=>ot,lb:()=>zt,mA:()=>ke,mc:()=>Mt,nA:()=>en,ns:()=>$n,o2:()=>Hr,oH:()=>Fn,op:()=>kn,ov:()=>dn,p7:()=>Dn,pV:()=>mt,qB:()=>Hn,qF:()=>He,qN:()=>zn,rK:()=>Ot,sS:()=>Rr,so:()=>or,tD:()=>Ir,tP:()=>$r,tn:()=>Qe,uB:()=>Je,uh:()=>Jr,uu:()=>it,ux:()=>Ye,v0:()=>Ge,wE:()=>qr,wP:()=>Xr,x2:()=>Wt,xC:()=>Ne,xG:()=>Cr,xQ:()=>Bt,xR:()=>br,xs:()=>Jt,y$:()=>Qt,yB:()=>Be,yT:()=>lt,z3:()=>At,zF:()=>Un,zs:()=>at});var r=n(9764),o="cloud.provider",i="cloud.account.id",s="cloud.region",a="cloud.availability_zone",c="cloud.platform",u="aws.ecs.container.arn",l="aws.ecs.cluster.arn",d="aws.ecs.launchtype",p="aws.ecs.task.arn",f="aws.ecs.task.family",h="aws.ecs.task.revision",g="aws.eks.cluster.arn",m="aws.log.group.names",y="aws.log.group.arns",v="aws.log.stream.names",_="aws.log.stream.arns",S="container.name",E="container.id",b="container.runtime",T="container.image.name",w="container.image.tag",C="deployment.environment",R="device.id",O="device.model.identifier",I="device.model.name",M="faas.name",A="faas.id",k="faas.version",P="faas.instance",D="faas.max_memory",N="host.id",L="host.name",x="host.type",U="host.arch",F="host.image.name",B="host.image.id",j="host.image.version",W="k8s.cluster.name",G="k8s.node.name",H="k8s.node.uid",z="k8s.namespace.name",V="k8s.pod.uid",q="k8s.pod.name",$="k8s.container.name",Y="k8s.replicaset.uid",K="k8s.replicaset.name",J="k8s.deployment.uid",X="k8s.deployment.name",Z="k8s.statefulset.uid",Q="k8s.statefulset.name",ee="k8s.daemonset.uid",te="k8s.daemonset.name",ne="k8s.job.uid",re="k8s.job.name",oe="k8s.cronjob.uid",ie="k8s.cronjob.name",se="os.type",ae="os.description",ce="os.name",ue="os.version",le="process.pid",de="process.executable.name",pe="process.executable.path",fe="process.command",he="process.command_line",ge="process.command_args",me="process.owner",ye="process.runtime.name",ve="process.runtime.version",_e="process.runtime.description",Se="service.name",Ee="service.namespace",be="service.instance.id",Te="service.version",we="telemetry.sdk.name",Ce="telemetry.sdk.language",Re="telemetry.sdk.version",Oe="telemetry.auto.version",Ie="webengine.name",Me="webengine.version",Ae="webengine.description",ke=o,Pe=i,De=s,Ne=a,Le=c,xe=u,Ue=l,Fe=d,Be=p,je=f,We=h,Ge=g,He=m,ze=y,Ve=v,qe=_,$e=S,Ye=E,Ke=b,Je=T,Xe=w,Ze=C,Qe=R,et=O,tt=I,nt=M,rt=A,ot=k,it=P,st=D,at=N,ct=L,ut=x,lt=U,dt=F,pt=B,ft=j,ht=W,gt=G,mt=H,yt=z,vt=V,_t=q,St=$,Et=Y,bt=K,Tt=J,wt=X,Ct=Z,Rt=Q,Ot=ee,It=te,Mt=ne,At=re,kt=oe,Pt=ie,Dt=se,Nt=ae,Lt=ce,xt=ue,Ut=le,Ft=de,Bt=pe,jt=fe,Wt=he,Gt=ge,Ht=me,zt=ye,Vt=ve,qt=_e,$t=Se,Yt=Ee,Kt=be,Jt=Te,Xt=we,Zt=Ce,Qt=Re,en=Oe,tn=Ie,nn=Me,rn=Ae,on=(0,r.O)([o,i,s,a,c,u,l,d,p,f,h,g,m,y,v,_,S,E,b,T,w,C,R,O,I,M,A,k,P,D,N,L,x,U,F,B,j,W,G,H,z,V,q,$,Y,K,J,X,Z,Q,ee,te,ne,re,oe,ie,se,ae,ce,ue,le,de,pe,fe,he,ge,me,ye,ve,_e,Se,Ee,be,Te,we,Ce,Re,Oe,Ie,Me,Ae]),sn="alibaba_cloud",an="azure",cn=sn,un="aws",ln=an,dn="gcp",pn=(0,r.O)([sn,"aws",an,"gcp"]),fn="alibaba_cloud_ecs",hn="alibaba_cloud_fc",gn="aws_ec2",mn="aws_ecs",yn="aws_eks",vn="aws_lambda",_n="aws_elastic_beanstalk",Sn="azure_vm",En="azure_container_instances",bn="azure_aks",Tn="azure_functions",wn="azure_app_service",Cn="gcp_compute_engine",Rn="gcp_cloud_run",On="gcp_kubernetes_engine",In="gcp_cloud_functions",Mn="gcp_app_engine",An=fn,kn=hn,Pn=gn,Dn=mn,Nn=yn,Ln=vn,xn=_n,Un=Sn,Fn=En,Bn=bn,jn=Tn,Wn=wn,Gn=Cn,Hn=Rn,zn=On,Vn=In,qn=Mn,$n=(0,r.O)([fn,hn,gn,mn,yn,vn,_n,Sn,En,bn,Tn,wn,Cn,Rn,On,In,Mn]),Yn="fargate",Kn="ec2",Jn=Yn,Xn=(0,r.O)(["ec2",Yn]),Zn="amd64",Qn="arm32",er="arm64",tr="ia64",nr="ppc32",rr="ppc64",or=Zn,ir=Qn,sr=er,ar=tr,cr=nr,ur=rr,lr="x86",dr=(0,r.O)([Zn,Qn,er,tr,nr,rr,"x86"]),pr="windows",fr="linux",hr="darwin",gr="freebsd",mr="netbsd",yr="openbsd",vr="dragonflybsd",_r="hpux",Sr="solaris",Er="z_os",br=pr,Tr=fr,wr=hr,Cr=gr,Rr=mr,Or=yr,Ir=vr,Mr=_r,Ar="aix",kr=Sr,Pr=Er,Dr=(0,r.O)([pr,fr,hr,gr,mr,yr,vr,_r,"aix",Sr,Er]),Nr="dotnet",Lr="erlang",xr="java",Ur="nodejs",Fr="python",Br="ruby",jr="webjs",Wr="cpp",Gr=Nr,Hr=Lr,zr="go",Vr=xr,qr=Ur,$r="php",Yr=Fr,Kr=Br,Jr=jr,Xr=(0,r.O)(["cpp",Nr,Lr,"go",xr,Ur,"php",Fr,Br,jr])},1868:(e,t,n)=>{"use strict";n.d(t,{$58:()=>Wr,$5b:()=>sc,$8v:()=>Bi,$wW:()=>Xo,AVC:()=>Ya,Ac3:()=>cn,AdO:()=>Ca,BJ_:()=>Ci,Bez:()=>ga,Bh9:()=>Fi,C2y:()=>xr,CGC:()=>js,CK9:()=>rs,CQB:()=>Vo,CdG:()=>wr,D3U:()=>Hs,DA0:()=>_r,DBy:()=>ur,DNX:()=>jt,Dzx:()=>Ko,EPu:()=>Ta,EUV:()=>Ds,E__:()=>Pr,Eh5:()=>Pt,Eo2:()=>qi,F0K:()=>cr,F7w:()=>lr,FoJ:()=>At,G49:()=>Gi,GKr:()=>Yt,GOV:()=>Nr,GR7:()=>As,GY$:()=>ac,Gsd:()=>Gr,H35:()=>Hn,HVV:()=>nn,HXm:()=>Ha,IMI:()=>Oa,IOi:()=>ti,IXq:()=>Vr,Ijl:()=>fs,Itx:()=>Nt,IxL:()=>os,JK9:()=>yr,JPM:()=>Ia,JZz:()=>gi,JjG:()=>Ps,K0$:()=>pi,K2_:()=>ii,KNN:()=>oc,KSs:()=>Vs,KjL:()=>$o,L2R:()=>Jo,L5D:()=>oi,La$:()=>Qn,LfK:()=>zr,Ltc:()=>mn,LxM:()=>Xt,MWE:()=>wn,MpS:()=>Ho,N4Y:()=>Ri,N9D:()=>Ot,NlA:()=>Ht,NlD:()=>Ft,Nxd:()=>Ki,Nz$:()=>Fn,O2W:()=>zi,OSW:()=>$i,OdI:()=>Bn,Oe4:()=>Ii,Ouu:()=>fr,P4J:()=>Vt,PIi:()=>on,PU4:()=>jo,PfM:()=>gn,Plv:()=>jn,Puv:()=>fn,Q5s:()=>Ai,Q_6:()=>da,Qgf:()=>Ka,QhH:()=>Ua,Qt9:()=>Lt,Qv9:()=>Nn,RHQ:()=>bn,Rk0:()=>yi,Rpt:()=>la,Rt6:()=>Mt,RvY:()=>un,RyT:()=>En,Ryq:()=>Xa,Spc:()=>vi,TCh:()=>wt,TKU:()=>mi,TRX:()=>rn,TVZ:()=>rr,Ta3:()=>qn,TiO:()=>nc,Tl5:()=>ys,ToY:()=>is,U5o:()=>Hr,Unu:()=>Dt,V02:()=>Qo,V0Q:()=>Ct,VEl:()=>ds,VMk:()=>Wi,Vp5:()=>Fo,Vur:()=>zs,WJJ:()=>Hi,W_O:()=>xn,W_f:()=>Si,Wb_:()=>Uo,Wif:()=>ir,Wx7:()=>Yn,X36:()=>_i,XER:()=>Yo,XH7:()=>Er,XNY:()=>sn,XTF:()=>ni,Xdf:()=>ri,Xuz:()=>fi,XyR:()=>Gn,Y$v:()=>li,Y3v:()=>Lr,Yjy:()=>gr,Ylk:()=>Oi,Ywq:()=>vc,ZSz:()=>Ur,ZUK:()=>Is,ZUg:()=>ln,Zl1:()=>Or,Zwr:()=>Br,_28:()=>Ra,_Q_:()=>pc,_Zr:()=>Tr,_af:()=>vr,_iR:()=>Ut,_pX:()=>ic,a4d:()=>Kn,aKn:()=>Qt,aP6:()=>qt,aTe:()=>en,abe:()=>Zt,ay9:()=>tc,b7t:()=>za,bWQ:()=>Aa,bZN:()=>mc,bd4:()=>Wt,bes:()=>Kt,bfK:()=>Bo,byW:()=>$n,c1V:()=>Ws,cA3:()=>vn,cAF:()=>ka,cFk:()=>tn,cSi:()=>Tn,cZl:()=>Ar,cd9:()=>Rt,ch2:()=>Za,cjY:()=>ks,crS:()=>Wn,cvh:()=>Mn,d3j:()=>vs,dNH:()=>Ba,dXK:()=>uc,dbJ:()=>Na,ddb:()=>Ma,dsp:()=>Jt,f3T:()=>fc,fN3:()=>Ms,fhG:()=>pr,frU:()=>Zn,fub:()=>Dn,g9x:()=>Yi,gFG:()=>lc,gGD:()=>xa,gUJ:()=>tr,h70:()=>hn,hV:()=>bi,hXS:()=>_n,hu9:()=>ya,hze:()=>wa,i9b:()=>fa,iFX:()=>Fa,iPC:()=>ss,imY:()=>an,ipG:()=>$t,irN:()=>ci,j$y:()=>pn,j7z:()=>Gs,jCw:()=>Go,jrL:()=>On,kOl:()=>_s,kPW:()=>La,kgK:()=>va,klU:()=>In,l60:()=>kt,lDI:()=>mr,lcm:()=>hi,lpz:()=>Cn,mGg:()=>sr,mN_:()=>ma,mO:()=>$a,mc2:()=>ui,mlL:()=>ps,nN_:()=>br,nS0:()=>Vn,nWK:()=>ei,nXs:()=>rc,ngE:()=>ai,njt:()=>Qa,npt:()=>Ga,nvt:()=>dn,nwz:()=>zo,o8O:()=>Un,oBD:()=>Ei,oF4:()=>ls,p1q:()=>cc,p30:()=>Jn,pHC:()=>zt,pfp:()=>qo,poY:()=>wi,qGX:()=>It,r0m:()=>ar,rBh:()=>Sa,rsL:()=>Mr,sLO:()=>Dr,slN:()=>Vi,sr7:()=>yc,sxk:()=>dr,t8j:()=>Sr,tGA:()=>Xn,tNm:()=>kr,taz:()=>Rn,ti:()=>or,tto:()=>zn,u4L:()=>nr,uZf:()=>ts,ueJ:()=>dc,usz:()=>An,uwh:()=>Ea,uzh:()=>ha,v8K:()=>ns,vSt:()=>Pn,vhy:()=>ji,vl2:()=>di,vof:()=>kn,w54:()=>Rr,wAY:()=>ec,wJ:()=>Ja,wYf:()=>ba,wgx:()=>Sn,wpU:()=>er,wy2:()=>Gt,x0j:()=>_a,x85:()=>Os,xhJ:()=>Wo,xq_:()=>Bt,y3W:()=>ms,y6V:()=>si,yIV:()=>pa,yRs:()=>Ir,y__:()=>Mi,yew:()=>Fr,ynC:()=>Zo,ynP:()=>yn,z4S:()=>Ns,zBy:()=>hr,zI8:()=>Ss,zPu:()=>Ln,z_u:()=>jr,zmF:()=>Ti,zpg:()=>Cr,zri:()=>xt});var r=n(9764),o="aws.lambda.invoked_arn",i="db.system",s="db.connection_string",a="db.user",c="db.jdbc.driver_classname",u="db.name",l="db.statement",d="db.operation",p="db.mssql.instance_name",f="db.cassandra.keyspace",h="db.cassandra.page_size",g="db.cassandra.consistency_level",m="db.cassandra.table",y="db.cassandra.idempotence",v="db.cassandra.speculative_execution_count",_="db.cassandra.coordinator.id",S="db.cassandra.coordinator.dc",E="db.hbase.namespace",b="db.redis.database_index",T="db.mongodb.collection",w="db.sql.table",C="exception.type",R="exception.message",O="exception.stacktrace",I="exception.escaped",M="faas.trigger",A="faas.execution",k="faas.document.collection",P="faas.document.operation",D="faas.document.time",N="faas.document.name",L="faas.time",x="faas.cron",U="faas.coldstart",F="faas.invoked_name",B="faas.invoked_provider",j="faas.invoked_region",W="net.transport",G="net.peer.ip",H="net.peer.port",z="net.peer.name",V="net.host.ip",q="net.host.port",$="net.host.name",Y="net.host.connection.type",K="net.host.connection.subtype",J="net.host.carrier.name",X="net.host.carrier.mcc",Z="net.host.carrier.mnc",Q="net.host.carrier.icc",ee="peer.service",te="enduser.id",ne="enduser.role",re="enduser.scope",oe="thread.id",ie="thread.name",se="code.function",ae="code.namespace",ce="code.filepath",ue="code.lineno",le="http.method",de="http.url",pe="http.target",fe="http.host",he="http.scheme",ge="http.status_code",me="http.flavor",ye="http.user_agent",ve="http.request_content_length",_e="http.request_content_length_uncompressed",Se="http.response_content_length",Ee="http.response_content_length_uncompressed",be="http.server_name",Te="http.route",we="http.client_ip",Ce="aws.dynamodb.table_names",Re="aws.dynamodb.consumed_capacity",Oe="aws.dynamodb.item_collection_metrics",Ie="aws.dynamodb.provisioned_read_capacity",Me="aws.dynamodb.provisioned_write_capacity",Ae="aws.dynamodb.consistent_read",ke="aws.dynamodb.projection",Pe="aws.dynamodb.limit",De="aws.dynamodb.attributes_to_get",Ne="aws.dynamodb.index_name",Le="aws.dynamodb.select",xe="aws.dynamodb.global_secondary_indexes",Ue="aws.dynamodb.local_secondary_indexes",Fe="aws.dynamodb.exclusive_start_table",Be="aws.dynamodb.table_count",je="aws.dynamodb.scan_forward",We="aws.dynamodb.segment",Ge="aws.dynamodb.total_segments",He="aws.dynamodb.count",ze="aws.dynamodb.scanned_count",Ve="aws.dynamodb.attribute_definitions",qe="aws.dynamodb.global_secondary_index_updates",$e="messaging.system",Ye="messaging.destination",Ke="messaging.destination_kind",Je="messaging.temp_destination",Xe="messaging.protocol",Ze="messaging.protocol_version",Qe="messaging.url",et="messaging.message_id",tt="messaging.conversation_id",nt="messaging.message_payload_size_bytes",rt="messaging.message_payload_compressed_size_bytes",ot="messaging.operation",it="messaging.consumer_id",st="messaging.rabbitmq.routing_key",at="messaging.kafka.message_key",ct="messaging.kafka.consumer_group",ut="messaging.kafka.client_id",lt="messaging.kafka.partition",dt="messaging.kafka.tombstone",pt="rpc.system",ft="rpc.service",ht="rpc.method",gt="rpc.grpc.status_code",mt="rpc.jsonrpc.version",yt="rpc.jsonrpc.request_id",vt="rpc.jsonrpc.error_code",_t="rpc.jsonrpc.error_message",St="message.type",Et="message.id",bt="message.compressed_size",Tt="message.uncompressed_size",wt=o,Ct=i,Rt=s,Ot=a,It=c,Mt=u,At=l,kt=d,Pt=p,Dt=f,Nt=h,Lt=g,xt=m,Ut=y,Ft=v,Bt=_,jt=S,Wt=E,Gt=b,Ht=T,zt=w,Vt=C,qt=R,$t=O,Yt=I,Kt=M,Jt=A,Xt=k,Zt=P,Qt=D,en=N,tn=L,nn=x,rn=U,on=F,sn=B,an=j,cn=W,un=G,ln=H,dn=z,pn=V,fn=q,hn=$,gn=Y,mn=K,yn=J,vn=X,_n=Z,Sn=Q,En=ee,bn=te,Tn=ne,wn=re,Cn=oe,Rn=ie,On=se,In=ae,Mn=ce,An=ue,kn=le,Pn=de,Dn=pe,Nn=fe,Ln=he,xn=ge,Un=me,Fn=ye,Bn=ve,jn=_e,Wn=Se,Gn=Ee,Hn=be,zn=Te,Vn=we,qn=Ce,$n=Re,Yn=Oe,Kn=Ie,Jn=Me,Xn=Ae,Zn=ke,Qn=Pe,er=De,tr=Ne,nr=Le,rr=xe,or=Ue,ir=Fe,sr=Be,ar=je,cr=We,ur=Ge,lr=He,dr=ze,pr=Ve,fr=qe,hr=$e,gr=Ye,mr=Ke,yr=Je,vr=Xe,_r=Ze,Sr=Qe,Er=et,br=tt,Tr=nt,wr=rt,Cr=ot,Rr=it,Or=st,Ir=at,Mr=ct,Ar=ut,kr=lt,Pr=dt,Dr=pt,Nr=ft,Lr=ht,xr=gt,Ur=mt,Fr=yt,Br=vt,jr=_t,Wr=St,Gr=Et,Hr=bt,zr=Tt,Vr=(0,r.O)([o,i,s,a,c,u,l,d,p,f,h,g,m,y,v,_,S,E,b,T,w,C,R,O,I,M,A,k,P,D,N,L,x,U,F,B,j,W,G,H,z,V,q,$,Y,K,J,X,Z,Q,ee,te,ne,re,oe,ie,se,ae,ce,ue,le,de,pe,fe,he,ge,me,ye,ve,_e,Se,Ee,be,Te,we,Ce,Re,Oe,Ie,Me,Ae,ke,Pe,De,Ne,Le,xe,Ue,Fe,Be,je,We,Ge,He,ze,Ve,qe,$e,Ye,Ke,Je,Xe,Ze,Qe,et,tt,nt,rt,ot,it,st,at,ct,ut,lt,dt,pt,ft,ht,gt,mt,yt,vt,_t,St,Et,bt,Tt]),qr="other_sql",$r="mssql",Yr="mysql",Kr="oracle",Jr="postgresql",Xr="redshift",Zr="hive",Qr="cloudscape",eo="hsqldb",to="progress",no="maxdb",ro="hanadb",oo="ingres",io="firstsql",so="cache",ao="adabas",co="firebird",uo="derby",lo="filemaker",po="informix",fo="instantdb",ho="interbase",go="mariadb",mo="netezza",yo="pervasive",vo="pointbase",_o="sqlite",So="sybase",Eo="teradata",bo="vertica",To="coldfusion",wo="cassandra",Co="hbase",Ro="mongodb",Oo="redis",Io="couchbase",Mo="couchdb",Ao="cosmosdb",ko="dynamodb",Po="neo4j",Do="geode",No="elasticsearch",Lo="memcached",xo="cockroachdb",Uo=qr,Fo=$r,Bo=Yr,jo=Kr,Wo="db2",Go=Jr,Ho=Xr,zo=Zr,Vo=Qr,qo=eo,$o=to,Yo=no,Ko=ro,Jo=oo,Xo=io,Zo="edb",Qo=so,ei=ao,ti=co,ni=uo,ri=lo,oi=po,ii=fo,si=ho,ai=go,ci=mo,ui=yo,li=vo,di=_o,pi=So,fi=Eo,hi=bo,gi="h2",mi=To,yi=wo,vi=Co,_i=Ro,Si=Oo,Ei=Io,bi=Mo,Ti=Ao,wi=ko,Ci=Po,Ri=Do,Oi=No,Ii=Lo,Mi=xo,Ai=(0,r.O)([qr,$r,Yr,Kr,"db2",Jr,Xr,Zr,Qr,eo,to,no,ro,oo,io,"edb",so,ao,co,uo,lo,po,fo,ho,go,mo,yo,vo,_o,So,Eo,bo,"h2",To,wo,Co,Ro,Oo,Io,Mo,Ao,ko,Po,Do,No,Lo,xo]),ki="each_quorum",Pi="quorum",Di="local_quorum",Ni="three",Li="local_one",xi="serial",Ui="local_serial",Fi="all",Bi=ki,ji=Pi,Wi=Di,Gi="one",Hi="two",zi=Ni,Vi=Li,qi="any",$i=xi,Yi=Ui,Ki=(0,r.O)(["all",ki,Pi,Di,"one","two",Ni,Li,"any",xi,Ui]),Ji="datasource",Xi="http",Zi="pubsub",Qi="timer",es="other",ts=Ji,ns=Xi,rs=Zi,os=Qi,is=es,ss=(0,r.O)([Ji,Xi,Zi,Qi,es]),as="insert",cs="edit",us="delete",ls=as,ds=cs,ps=us,fs=(0,r.O)([as,cs,us]),hs="alibaba_cloud",gs="azure",ms=hs,ys="aws",vs=gs,_s="gcp",Ss=(0,r.O)([hs,"aws",gs,"gcp"]),Es="ip_tcp",bs="ip_udp",Ts="unix",ws="pipe",Cs="inproc",Rs="other",Os=Es,Is=bs,Ms="ip",As=Ts,ks=ws,Ps=Cs,Ds=Rs,Ns=(0,r.O)([Es,bs,"ip",Ts,ws,Cs,Rs]),Ls="wifi",xs="wired",Us="cell",Fs="unavailable",Bs="unknown",js=Ls,Ws=xs,Gs=Us,Hs=Fs,zs=Bs,Vs=(0,r.O)([Ls,xs,Us,Fs,Bs]),qs="gprs",$s="edge",Ys="umts",Ks="cdma",Js="evdo_0",Xs="evdo_a",Zs="cdma2000_1xrtt",Qs="hsdpa",ea="hsupa",ta="hspa",na="iden",ra="evdo_b",oa="ehrpd",ia="hspap",sa="td_scdma",aa="iwlan",ca="nrnsa",ua="lte_ca",la=qs,da=$s,pa=Ys,fa=Ks,ha=Js,ga=Xs,ma=Zs,ya=Qs,va=ea,_a=ta,Sa=na,Ea=ra,ba="lte",Ta=oa,wa=ia,Ca="gsm",Ra=sa,Oa=aa,Ia="nr",Ma=ca,Aa=ua,ka=(0,r.O)([qs,$s,Ys,Ks,Js,Xs,Zs,Qs,ea,ta,na,ra,"lte",oa,ia,"gsm",sa,aa,"nr",ca,ua]),Pa="SPDY",Da="QUIC",Na="1.0",La="1.1",xa="2.0",Ua=Pa,Fa=Da,Ba={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:Pa,QUIC:Da},ja="queue",Wa="topic",Ga=ja,Ha=Wa,za=(0,r.O)([ja,Wa]),Va="receive",qa="process",$a=Va,Ya=qa,Ka=(0,r.O)([Va,qa]),Ja=0,Xa=1,Za=2,Qa=3,ec=4,tc=5,nc=6,rc=7,oc=8,ic=9,sc=10,ac=11,cc=12,uc=13,lc=14,dc=15,pc=16,fc={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},hc="SENT",gc="RECEIVED",mc=hc,yc=gc,vc=(0,r.O)([hc,gc])},1783:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},2312:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1783),i=n(5784),s={};function a(e){const t=s[e];if(t)return t;let n=i.WINDOW[e];if(r.isNativeFunction(n))return s[e]=n.bind(i.WINDOW);const a=i.WINDOW.document;if(a&&"function"==typeof a.createElement)try{const t=a.createElement("iframe");t.hidden=!0,a.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(n=r[e]),a.head.removeChild(t)}catch(t){o.DEBUG_BUILD&&r.logger.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?s[e]=n.bind(i.WINDOW):n}t.clearCachedImplementation=function(e){s[e]=void 0},t.fetch=function(){return a("fetch")(...arguments)},t.getNativeImplementation=a,t.setTimeout=function(){return a("setTimeout")(...arguments)}},3654:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1882),o=n(7878),i=n(9447),s=n(1675),a=n(2312),c=n(1173),u=n(7462);t.addClsInstrumentationHandler=r.addClsInstrumentationHandler,t.addFidInstrumentationHandler=r.addFidInstrumentationHandler,t.addInpInstrumentationHandler=r.addInpInstrumentationHandler,t.addLcpInstrumentationHandler=r.addLcpInstrumentationHandler,t.addPerformanceInstrumentationHandler=r.addPerformanceInstrumentationHandler,t.addTtfbInstrumentationHandler=r.addTtfbInstrumentationHandler,t.addPerformanceEntries=o.addPerformanceEntries,t.startTrackingInteractions=o.startTrackingInteractions,t.startTrackingLongAnimationFrames=o.startTrackingLongAnimationFrames,t.startTrackingLongTasks=o.startTrackingLongTasks,t.startTrackingWebVitals=o.startTrackingWebVitals,t.addClickKeypressInstrumentationHandler=i.addClickKeypressInstrumentationHandler,t.addHistoryInstrumentationHandler=s.addHistoryInstrumentationHandler,t.clearCachedImplementation=a.clearCachedImplementation,t.fetch=a.fetch,t.getNativeImplementation=a.getNativeImplementation,t.setTimeout=a.setTimeout,t.SENTRY_XHR_DATA_KEY=c.SENTRY_XHR_DATA_KEY,t.addXhrInstrumentationHandler=c.addXhrInstrumentationHandler,t.registerInpInteractionListener=u.registerInpInteractionListener,t.startTrackingINP=u.startTrackingINP},9447:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(5784);let i,s,a;function c(){if(!o.WINDOW.document)return;const e=r.triggerHandlers.bind(null,"dom"),t=u(e,!0);o.WINDOW.document.addEventListener("click",t,!1),o.WINDOW.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=o.WINDOW[t]&&o.WINDOW[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(r.fill(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){const r=u(e);s.handler=r,t.call(this,n,r,o)}s.refCount++}catch(e){}return t.call(this,n,r,o)}})),r.fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{if(!n||n._sentryCaptured)return;const c=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,c))return;r.addNonEnumerableProperty(n,"_sentryCaptured",!0),c&&!c._sentryId&&r.addNonEnumerableProperty(c,"_sentryId",r.uuid4());const u="keypress"===n.type?"input":n.type;(function(e){if(e.type!==s)return!1;try{if(!e.target||e.target._sentryId!==a)return!1}catch(e){}return!0})(n)||(e({event:n,name:u,global:t}),s=n.type,a=c?c._sentryId:void 0),clearTimeout(i),i=o.WINDOW.setTimeout((()=>{a=void 0,s=void 0}),1e3)}}t.addClickKeypressInstrumentationHandler=function(e){r.addHandler("dom",e),r.maybeInstrument("dom",c)},t.instrumentDOM=c},1675:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(5784);let i;function s(){if(!r.supportsHistory())return;const e=o.WINDOW.onpopstate;function t(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];const s=n.length>2?n[2]:void 0;if(s){const e=i,t=String(s);i=t;const n={from:e,to:t};r.triggerHandlers("history",n)}return e.apply(this,n)}}o.WINDOW.onpopstate=function(){const t=o.WINDOW.location.href,n=i;i=t;const s={from:n,to:t};if(r.triggerHandlers("history",s),e)try{for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return e.apply(this,c)}catch(e){}},r.fill(o.WINDOW.history,"pushState",t),r.fill(o.WINDOW.history,"replaceState",t)}t.addHistoryInstrumentationHandler=function(e){const t="history";r.addHandler(t,e),r.maybeInstrument(t,s)}},1173:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(5784),i="__sentry_xhr_v3__";function s(){if(!o.WINDOW.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const o=1e3*r.timestampInSeconds(),s=r.isString(n[0])?n[0].toUpperCase():void 0,a=function(e){if(r.isString(e))return e;try{return e.toString()}catch(e){}}(n[1]);if(!s||!a)return e.apply(t,n);t[i]={method:s,url:a,request_headers:{}},"POST"===s&&a.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const c=()=>{const e=t[i];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}const n={endTimestamp:1e3*r.timestampInSeconds(),startTimestamp:o,xhr:t};r.triggerHandlers("xhr",n)}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(c(),e.apply(t,n))}):t.addEventListener("readystatechange",c),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[o,s]=n,a=t[i];return a&&r.isString(o)&&r.isString(s)&&(a.request_headers[o.toLowerCase()]=s),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const o=t[i];if(!o)return e.apply(t,n);void 0!==n[0]&&(o.body=n[0]);const s={startTimestamp:1e3*r.timestampInSeconds(),xhr:t};return r.triggerHandlers("xhr",s),e.apply(t,n)}})}t.SENTRY_XHR_DATA_KEY=i,t.addXhrInstrumentationHandler=function(e){r.addHandler("xhr",e),r.maybeInstrument("xhr",s)},t.instrumentXHR=s},7878:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(1783),s=n(5784),a=n(163),c=n(1882),u=n(9958),l=n(9516),d=n(6614),p=n(5004);let f,h,g=0,m={};function y(e,t,n,o,i){const s=d.getNavigationEntry(),a=u.msToSec(s?s.requestStart:0),c=i+Math.max(n,a),l=i+n,p=l+o,f={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};return c!==l&&(f["sentry.browser.measure_happened_before_request"]=!0,f["sentry.browser.measure_start_time"]=c),u.startAndEndSpan(e,c,p,{name:t.name,op:t.entryType,attributes:f}),c}function v(e,t,n,o,i,s){const a=s?t[s]:t[`${n}End`],c=t[`${n}Start`];c&&a&&u.startAndEndSpan(e,o+u.msToSec(c),o+u.msToSec(a),{op:`browser.${i||n}`,name:t.name,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}function _(e,t,n,i,a,c){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const l=o.parseUrl(n),d={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};S(d,t,"transferSize","http.response_transfer_size"),S(d,t,"encodedBodySize","http.response_content_length"),S(d,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(d["resource.render_blocking_status"]=t.renderBlockingStatus),l.protocol&&(d["url.scheme"]=l.protocol.split(":").pop()),l.host&&(d["server.address"]=l.host),d["url.same_origin"]=n.includes(s.WINDOW.location.origin);const p=c+i,f=p+a;u.startAndEndSpan(e,p,f,{name:n.replace(s.WINDOW.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:d})}function S(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}t._addMeasureSpans=y,t._addResourceSpans=_,t.addPerformanceEntries=function(e,t){const n=u.getBrowserPerformanceAPI();if(!n||!s.WINDOW.performance.getEntries||!o.browserPerformanceTimeOrigin)return;i.DEBUG_BUILD&&o.logger.log("[Tracing] Adding & adjusting spans using Performance API");const a=u.msToSec(o.browserPerformanceTimeOrigin),c=n.getEntries(),{op:S,start_timestamp:E}=r.spanToJSON(e);if(c.slice(g).forEach((t=>{const n=u.msToSec(t.startTime),s=u.msToSec(Math.max(0,t.duration));if(!("navigation"===S&&E&&a+n<E))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{v(e,t,r,n)})),v(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),v(e,t,"fetch",n,"cache","domainLookupStart"),v(e,t,"domainLookup",n,"DNS"),function(e,t,n){const o=n+u.msToSec(t.requestStart),i=n+u.msToSec(t.responseEnd),s=n+u.msToSec(t.responseStart);t.responseEnd&&(u.startAndEndSpan(e,o,i,{op:"browser.request",name:t.name,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),u.startAndEndSpan(e,s,i,{op:"browser.response",name:t.name,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,a);break;case"mark":case"paint":case"measure":{y(e,t,n,s,a);const r=p.getVisibilityWatcher(),c=t.startTime<r.firstHiddenTime;"first-paint"===t.name&&c&&(i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding FP"),m.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&c&&(i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding FCP"),m.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":_(e,t,t.name,n,s,a)}})),g=Math.max(c.length-1,0),function(e){const t=s.WINDOW.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),u.isMeasurementValue(n.rtt)&&(m["connection.rtt"]={value:n.rtt,unit:"millisecond"})),u.isMeasurementValue(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),u.isMeasurementValue(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===S){!function(e){const t=d.getNavigationEntry();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(m);const n=m["mark.fid"];n&&m.fid&&(u.startAndEndSpan(e,n.value,n.value+u.msToSec(m.fid.value),{name:"first input delay",op:"ui.action",attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete m["mark.fid"]),"fcp"in m&&t.recordClsOnPageloadSpan||delete m.cls,Object.entries(m).forEach((e=>{let[t,n]=e;r.setMeasurement(t,n.value,n.unit)})),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",l.getActivationStart()),function(e){f&&(i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding LCP Data"),f.element&&e.setAttribute("lcp.element",o.htmlTreeAsString(f.element)),f.id&&e.setAttribute("lcp.id",f.id),f.url&&e.setAttribute("lcp.url",f.url.trim().slice(0,200)),e.setAttribute("lcp.size",f.size)),h&&h.sources&&(i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding CLS Data"),h.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,o.htmlTreeAsString(t.node)))))}(e)}f=void 0,h=void 0,m={}},t.startTrackingInteractions=function(){c.addPerformanceInstrumentationHandler("event",(e=>{let{entries:t}=e;if(r.getActiveSpan())for(const e of t)if("click"===e.name){const t=u.msToSec(o.browserPerformanceTimeOrigin+e.startTime),n=u.msToSec(e.duration),i={name:o.htmlTreeAsString(e.target),op:`ui.interaction.${e.name}`,startTime:t,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},s=o.getComponentName(e.target);s&&(i.attributes["ui.component_name"]=s);const a=r.startInactiveSpan(i);a&&a.end(t+n)}}))},t.startTrackingLongAnimationFrames=function(){new PerformanceObserver((e=>{if(r.getActiveSpan())for(const t of e.getEntries()){if(!t.scripts[0])continue;const e=u.msToSec(o.browserPerformanceTimeOrigin+t.startTime),n=u.msToSec(t.duration),i={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"},s=t.scripts[0],{invoker:a,invokerType:c,sourceURL:l,sourceFunctionName:d,sourceCharPosition:p}=s;i["browser.script.invoker"]=a,i["browser.script.invoker_type"]=c,l&&(i["code.filepath"]=l),d&&(i["code.function"]=d),-1!==p&&(i["browser.script.source_char_position"]=p);const f=r.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:e,attributes:i});f&&f.end(e+n)}})).observe({type:"long-animation-frame",buffered:!0})},t.startTrackingLongTasks=function(){c.addPerformanceInstrumentationHandler("longtask",(e=>{let{entries:t}=e;if(r.getActiveSpan())for(const e of t){const t=u.msToSec(o.browserPerformanceTimeOrigin+e.startTime),n=u.msToSec(e.duration),i=r.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:t,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});i&&i.end(t+n)}}))},t.startTrackingWebVitals=function(e){let{recordClsStandaloneSpans:t}=e;const n=u.getBrowserPerformanceAPI();if(n&&o.browserPerformanceTimeOrigin){n.mark&&s.WINDOW.performance.mark("sentry-tracing-init");const e=c.addFidInstrumentationHandler((e=>{let{metric:t}=e;const n=t.entries[t.entries.length-1];if(!n)return;const r=u.msToSec(o.browserPerformanceTimeOrigin),s=u.msToSec(n.startTime);i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding FID"),m.fid={value:t.value,unit:"millisecond"},m["mark.fid"]={value:r+s,unit:"second"}})),r=c.addLcpInstrumentationHandler((e=>{let{metric:t}=e;const n=t.entries[t.entries.length-1];n&&(i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding LCP"),m.lcp={value:t.value,unit:"millisecond"},f=n)}),!0),l=c.addTtfbInstrumentationHandler((e=>{let{metric:t}=e;t.entries[t.entries.length-1]&&(i.DEBUG_BUILD&&o.logger.log("[Measurements] Adding TTFB"),m.ttfb={value:t.value,unit:"millisecond"})})),d=t?a.trackClsAsStandaloneSpan():c.addClsInstrumentationHandler((e=>{let{metric:t}=e;const n=t.entries[t.entries.length-1];n&&(i.DEBUG_BUILD&&o.logger.log(`[Measurements] Adding CLS ${t.value}`),m.cls={value:t.value,unit:""},h=n)}),!0);return()=>{e(),r(),l(),d&&d()}}return()=>{}}},163:(e,t,n)=>{var{_optionalChain:r}=n(674);Object.defineProperty(t,"__esModule",{value:!0});const o=n(3022),i=n(674),s=n(1783),a=n(1882),c=n(9958),u=n(6609);t.trackClsAsStandaloneSpan=function(){let e,t,n=0;if(!function(){try{return r([PerformanceObserver,"access",e=>e.supportedEntryTypes,"optionalAccess",e=>e.includes,"call",e=>e("layout-shift")])}catch(e){return!1}}())return;let l=!1;function d(){l||(l=!0,t&&function(e,t,n){s.DEBUG_BUILD&&i.logger.log(`Sending CLS span (${e})`);const a=c.msToSec((i.browserPerformanceTimeOrigin||0)+(r([t,"optionalAccess",e=>e.startTime])||0)),u=o.getCurrentScope().getScopeData().transactionName,l=t?i.htmlTreeAsString(r([t,"access",e=>e.sources,"access",e=>e[0],"optionalAccess",e=>e.node])):"Layout shift",d=i.dropUndefinedKeys({[o.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser.cls",[o.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"ui.webvital.cls",[o.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:r([t,"optionalAccess",e=>e.duration])||0,"sentry.pageload.span_id":n}),p=c.startStandaloneWebVitalSpan({name:l,transaction:u,attributes:d,startTime:a});r([p,"optionalAccess",e=>e.addEvent,"call",t=>t("cls",{[o.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"",[o.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:e})]),r([p,"optionalAccess",e=>e.end,"call",e=>e(a)])}(n,e,t),p())}const p=a.addClsInstrumentationHandler((t=>{let{metric:r}=t;const o=r.entries[r.entries.length-1];o&&(n=r.value,e=o)}),!0);u.onHidden((()=>{d()})),setTimeout((()=>{const e=o.getClient(),n=r([e,"optionalAccess",e=>e.on,"call",e=>e("startNavigationSpan",(()=>{d(),n&&n()}))]),i=o.getActiveSpan(),s=i&&o.getRootSpan(i),a=s&&o.spanToJSON(s);a&&"pageload"===a.op&&(t=s.spanContext().spanId)}),0)}},7462:(e,t,n)=>{var{_optionalChain:r}=n(674);Object.defineProperty(t,"__esModule",{value:!0});const o=n(3022),i=n(674),s=n(1882),a=n(9958),c=[],u=new Map,l={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};t.registerInpInteractionListener=function(e){const t=e=>{let{entries:t}=e;const n=o.getActiveSpan(),r=n&&o.getRootSpan(n);t.forEach((e=>{if(!s.isPerformanceEventTiming(e)||!r)return;const t=e.interactionId;if(null!=t&&!u.has(t)){if(c.length>10){const e=c.shift();u.delete(e)}c.push(t),u.set(t,r)}}))};s.addPerformanceInstrumentationHandler("event",t),s.addPerformanceInstrumentationHandler("first-input",t)},t.startTrackingINP=function(){if(a.getBrowserPerformanceAPI()&&i.browserPerformanceTimeOrigin){const e=s.addInpInstrumentationHandler((e=>{let{metric:t}=e;if(null==t.value)return;const n=t.entries.find((e=>e.duration===t.value&&l[e.name]));if(!n)return;const{interactionId:s}=n,c=l[n.name],d=a.msToSec(i.browserPerformanceTimeOrigin+n.startTime),p=a.msToSec(t.value),f=o.getActiveSpan(),h=f?o.getRootSpan(f):void 0,g=(null!=s?u.get(s):void 0)||h,m=g?o.spanToJSON(g).description:o.getCurrentScope().getScopeData().transactionName,y=i.htmlTreeAsString(n.target),v=i.dropUndefinedKeys({[o.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser.inp",[o.SEMANTIC_ATTRIBUTE_SENTRY_OP]:`ui.interaction.${c}`,[o.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:n.duration}),_=a.startStandaloneWebVitalSpan({name:y,transaction:m,attributes:v,startTime:d});r([_,"optionalAccess",e=>e.addEvent,"call",e=>e("inp",{[o.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[o.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t.value})]),r([_,"optionalAccess",e=>e.end,"call",e=>e(d+p)])}));return()=>{e()}}return()=>{}}},1882:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1783),i=n(9492),s=n(2423),a=n(5057),c=n(5819),u=n(6734),l=n(1445),d={},p={};let f,h,g,m,y;function v(e,t){const n=d[e];if(n&&n.length)for(const i of n)try{i(t)}catch(t){o.DEBUG_BUILD&&r.logger.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${r.getFunctionName(i)}\nError:`,t)}}function _(){return i.onCLS((e=>{v("cls",{metric:e}),f=e}),{reportAllChanges:!0})}function S(){return s.onFID((e=>{v("fid",{metric:e}),h=e}))}function E(){return c.onLCP((e=>{v("lcp",{metric:e}),g=e}),{reportAllChanges:!0})}function b(){return l.onTTFB((e=>{v("ttfb",{metric:e}),m=e}))}function T(){return a.onINP((e=>{v("inp",{metric:e}),y=e}))}function w(e,t,n,r){let o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return C(e,t),p[e]||(o=n(),p[e]=!0),r&&t({metric:r}),R(e,t,i?o:void 0)}function C(e,t){d[e]=d[e]||[],d[e].push(t)}function R(e,t,n){return()=>{n&&n();const r=d[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}t.addClsInstrumentationHandler=function(e){return w("cls",e,_,f,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},t.addFidInstrumentationHandler=function(e){return w("fid",e,S,h)},t.addInpInstrumentationHandler=function(e){return w("inp",e,T,y)},t.addLcpInstrumentationHandler=function(e){return w("lcp",e,E,g,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},t.addPerformanceInstrumentationHandler=function(e,t){return C(e,t),p[e]||(function(e){const t={};"event"===e&&(t.durationThreshold=0),u.observe(e,(t=>{v(e,{entries:t})}),t)}(e),p[e]=!0),R(e,t)},t.addTtfbInstrumentationHandler=function(e){return w("ttfb",e,b,m)},t.isPerformanceEventTiming=function(e){return"duration"in e}},9958:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(5784);t.getBrowserPerformanceAPI=function(){return o.WINDOW&&o.WINDOW.addEventListener&&o.WINDOW.performance},t.isMeasurementValue=function(e){return"number"==typeof e&&isFinite(e)},t.msToSec=function(e){return e/1e3},t.startAndEndSpan=function(e,t,n,o){let{...i}=o;const s=r.spanToJSON(e).start_timestamp;return s&&s>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),r.withActiveSpan(e,(()=>{const e=r.startInactiveSpan({startTime:t,...i});return e&&e.end(n),e}))},t.startStandaloneWebVitalSpan=function(e){const t=r.getClient();if(!t)return;const{name:n,transaction:i,attributes:s,startTime:a}=e,{release:c,environment:u}=t.getOptions(),l=t.getIntegrationByName("Replay"),d=l&&l.getReplayId(),p=r.getCurrentScope(),f=p.getUser(),h=void 0!==f?f.email||f.id||f.ip_address:void 0;let g;try{g=p.getScopeData().contexts.profile.profile_id}catch(e){}const m={release:c,environment:u,user:h||void 0,profile_id:g||void 0,replay_id:d||void 0,transaction:i,"user_agent.original":o.WINDOW.navigator&&o.WINDOW.navigator.userAgent,...s};return r.startInactiveSpan({name:n,attributes:m,startTime:a,experimental:{standalone:!0}})}},9492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2098),o=n(1434),i=n(6734),s=n(6609),a=n(4798),c=n(6692),u=[.1,.25];t.CLSThresholds=u,t.onCLS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.onFCP(a.runOnce((()=>{const n=o.initMetric("CLS",0);let a,c=0,l=[];const d=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=l[0],n=l[l.length-1];c&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(c+=e.value,l.push(e)):(c=e.value,l=[e])}})),c>n.value&&(n.value=c,n.entries=l,a())},p=i.observe("layout-shift",d);p&&(a=r.bindReporter(e,n,u,t.reportAllChanges),s.onHidden((()=>{d(p.takeRecords()),a(!0)})),setTimeout(a,0))})))}},2423:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2098),o=n(5004),i=n(1434),s=n(6734),a=n(6609),c=n(4798),u=n(2837),l=[100,300];t.FIDThresholds=l,t.onFID=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.whenActivated((()=>{const n=o.getVisibilityWatcher(),u=i.initMetric("FID");let d;const p=e=>{e.startTime<n.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),d(!0))},f=e=>{e.forEach(p)},h=s.observe("first-input",f);d=r.bindReporter(e,u,l,t.reportAllChanges),h&&a.onHidden(c.runOnce((()=>{f(h.takeRecords()),h.disconnect()})))}))}},5057:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784),o=n(2098),i=n(1434),s=n(6734),a=n(6609),c=n(8017),u=n(2837),l=[200,500],d=()=>c.getInteractionCount()-0,p=[],f={},h=e=>{const t=p[p.length-1],n=f[e.interactionId];if(n||p.length<10||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};f[t.id]=t,p.push(t)}p.sort(((e,t)=>t.latency-e.latency)),p.splice(10).forEach((e=>{delete f[e.id]}))}};t.INPThresholds=l,t.onINP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.whenActivated((()=>{c.initInteractionCountPolyfill();const n=i.initMetric("INP");let u;const f=e=>{e.forEach((e=>{e.interactionId&&h(e),"first-input"===e.entryType&&!p.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&h(e)}));const t=(()=>{const e=Math.min(p.length-1,Math.floor(d()/50));return p[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,u())},g=s.observe("event",f,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});u=o.bindReporter(e,n,l,t.reportAllChanges),g&&("PerformanceEventTiming"in r.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&g.observe({type:"first-input",buffered:!0}),a.onHidden((()=>{f(g.takeRecords()),n.value<0&&d()>0&&(n.value=0,n.entries=[]),u(!0)})))}))}},5819:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784),o=n(2098),i=n(9516),s=n(5004),a=n(1434),c=n(6734),u=n(6609),l=n(4798),d=n(2837),p=[2500,4e3],f={};t.LCPThresholds=p,t.onLCP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d.whenActivated((()=>{const n=s.getVisibilityWatcher(),d=a.initMetric("LCP");let h;const g=e=>{const t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(d.value=Math.max(t.startTime-i.getActivationStart(),0),d.entries=[t],h())},m=c.observe("largest-contentful-paint",g);if(m){h=o.bindReporter(e,d,p,t.reportAllChanges);const n=l.runOnce((()=>{f[d.id]||(g(m.takeRecords()),m.disconnect(),f[d.id]=!0,h(!0))}));["keydown","click"].forEach((e=>{r.WINDOW.document&&addEventListener(e,(()=>setTimeout(n,0)),!0)})),u.onHidden(n)}}))}},2098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bindReporter=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o||0),(i||void 0===o)&&(o=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}}},1137:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateUniqueID=()=>`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`},9516:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6614);t.getActivationStart=()=>{const e=r.getNavigationEntry();return e&&e.activationStart||0}},6614:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784);t.getNavigationEntry=()=>r.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},5004:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784);let o=-1;const i=e=>{"hidden"===r.WINDOW.document.visibilityState&&o>-1&&(o="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("visibilitychange",i,!0),removeEventListener("prerenderingchange",i,!0))};t.getVisibilityWatcher=()=>(r.WINDOW.document&&o<0&&(o="hidden"!==r.WINDOW.document.visibilityState||r.WINDOW.document.prerendering?1/0:0,addEventListener("visibilitychange",i,!0),addEventListener("prerenderingchange",i,!0)),{get firstHiddenTime(){return o}})},1434:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784),o=n(1137),i=n(9516),s=n(6614);t.initMetric=(e,t)=>{const n=s.getNavigationEntry();let a="navigate";return n&&(r.WINDOW.document&&r.WINDOW.document.prerendering||i.getActivationStart()>0?a="prerender":r.WINDOW.document&&r.WINDOW.document.wasDiscarded?a="restore":n.type&&(a=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:o.generateUniqueID(),navigationType:a}}},6734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observe=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}}},6609:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784);t.onHidden=e=>{const t=t=>{("pagehide"===t.type||r.WINDOW.document&&"hidden"===r.WINDOW.document.visibilityState)&&e(t)};r.WINDOW.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))}},8017:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6734);let o=0,i=1/0,s=0;const a=e=>{e.forEach((e=>{e.interactionId&&(i=Math.min(i,e.interactionId),s=Math.max(s,e.interactionId),o=s?(s-i)/7+1:0)}))};let c;t.getInteractionCount=()=>c?o:performance.interactionCount||0,t.initInteractionCountPolyfill=()=>{"interactionCount"in performance||c||(c=r.observe("event",a,{type:"event",buffered:!0,durationThreshold:0}))}},4798:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.runOnce=e=>{let t=!1;return n=>{t||(e(n),t=!0)}}},2837:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784);t.whenActivated=e=>{r.WINDOW.document&&r.WINDOW.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()}},6692:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2098),o=n(9516),i=n(5004),s=n(1434),a=n(6734),c=n(2837),u=[1800,3e3];t.FCPThresholds=u,t.onFCP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.whenActivated((()=>{const n=i.getVisibilityWatcher(),c=s.initMetric("FCP");let l;const d=a.observe("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(d.disconnect(),e.startTime<n.firstHiddenTime&&(c.value=Math.max(e.startTime-o.getActivationStart(),0),c.entries.push(e),l(!0)))}))}));d&&(l=r.bindReporter(e,c,u,t.reportAllChanges))}))}},1445:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5784),o=n(2098),i=n(9516),s=n(6614),a=n(1434),c=n(2837),u=[800,1800],l=e=>{r.WINDOW.document&&r.WINDOW.document.prerendering?c.whenActivated((()=>l(e))):r.WINDOW.document&&"complete"!==r.WINDOW.document.readyState?addEventListener("load",(()=>l(e)),!0):setTimeout(e,0)};t.TTFBThresholds=u,t.onTTFB=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=a.initMetric("TTFB"),r=o.bindReporter(e,n,u,t.reportAllChanges);l((()=>{const e=s.getNavigationEntry();if(e){const t=e.responseStart;if(t<=0||t>performance.now())return;n.value=Math.max(t-i.getActivationStart(),0),n.entries=[e],r(!0)}}))}},5784:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674).GLOBAL_OBJ;t.WINDOW=r},3302:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=o.GLOBAL_OBJ,s=i.document,a=i.navigator,c="Report a Bug",u="Cancel",l="Send Bug Report",d="Confirm",p="Report a Bug",f="your.email@example.org",h="Email",g="What's the bug? What did you expect?",m="Description",y="Your Name",v="Name",_="Thank you for your report!",S="(required)",E="Add a screenshot",b="Remove screenshot",T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeReplay:!0};if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=r.getClient();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&r.getCurrentScope().setTags(e.tags);const i=r.captureFeedback({source:"api",url:o.getLocationHref(),...e},t);return new Promise(((e,t)=>{const r=setTimeout((()=>t("Unable to determine if Feedback was correctly sent.")),5e3),o=n.on("afterSendEvent",((n,s)=>{if(n.event_id===i)return clearTimeout(r),o(),s&&"number"==typeof s.statusCode&&s.statusCode>=200&&s.statusCode<300&&e(i),s&&"number"==typeof s.statusCode&&0===s.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):s&&"number"==typeof s.statusCode&&403===s.statusCode?t("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")}))}))},w="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function C(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen&&t.onFormOpen(),e.onFormOpen&&e.onFormOpen()},onFormClose:()=>{t.onFormClose&&t.onFormClose(),e.onFormClose&&e.onFormClose()},onSubmitSuccess:n=>{t.onSubmitSuccess&&t.onSubmitSuccess(n),e.onSubmitSuccess&&e.onSubmitSuccess(n)},onSubmitError:n=>{t.onSubmitError&&t.onSubmitError(n),e.onSubmitError&&e.onSubmitError(n)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted(),e.onFormSubmitted&&e.onFormSubmitted()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function R(e,t){return Object.entries(t).forEach((t=>{let[n,r]=t;e.setAttributeNS(null,n,r)})),e}const O="rgba(88, 74, 192, 1)",I={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:O,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},M={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:O,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function A(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}var k,P,D,N,L,x,U,F={},B=[],j=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,W=Array.isArray;function G(e,t){for(var n in t)e[n]=t[n];return e}function H(e){var t=e.parentNode;t&&t.removeChild(e)}function z(e,t,n){var r,o,i,s={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?k.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return V(e,s,r,o,null)}function V(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++D:o,__i:-1,__u:0};return null==o&&null!=P.vnode&&P.vnode(i),i}function q(e){return e.children}function $(e,t){this.props=e,this.context=t}function Y(e,t){if(null==t)return e.__?Y(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Y(e):null}function K(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=G({},o)).__v=o.__v+1,P.vnode&&P.vnode(r),se(s,r,o,e.__n,void 0!==s.ownerSVGElement,32&o.__u?[i]:null,t,null==i?Y(o):i,!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&J(r),r}function J(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return J(e)}}function X(e){(!e.__d&&(e.__d=!0)&&N.push(e)&&!Z.__r++||L!==P.debounceRendering)&&((L=P.debounceRendering)||x)(Z)}function Z(){var e,t,n,r=[],o=[];for(N.sort(U);e=N.shift();)e.__d&&(n=N.length,t=K(e,r,o)||t,0===n||N.length>n?(ae(r,t,o),o.length=r.length=0,t=void 0,N.sort(U)):t&&P.__c&&P.__c(t,B));t&&ae(r,t,o),Z.__r=0}function Q(e,t,n,r,o,i,s,a,c,u,l){var d,p,f,h,g,m=r&&r.__k||B,y=t.length;for(n.__d=c,function(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,l=u,d=0;for(e.__k=[],r=0;r<c;r++)null!=(o=e.__k[r]=null==(o=t[r])||"boolean"==typeof o||"function"==typeof o?null:"string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?V(null,o,null,null,o):W(o)?V(q,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?V(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)?(o.__=e,o.__b=e.__b+1,a=te(o,n,s=r+d,l),o.__i=a,i=null,-1!==a&&(l--,(i=n[a])&&(i.__u|=131072)),null==i||null===i.__v?(-1==a&&d--,"function"!=typeof o.type&&(o.__u|=65536)):a!==s&&(a===s+1?d++:a>s?l>c-s?d+=a-s:d--:d=a<s&&a==s-1?a-s:0,a!==r+d&&(o.__u|=65536))):(i=n[r])&&null==i.key&&i.__e&&(i.__e==e.__d&&(e.__d=Y(i)),le(i,i,!1),n[r]=null,l--);if(l)for(r=0;r<u;r++)null!=(i=n[r])&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=Y(i)),le(i,i))}(n,t,m),c=n.__d,d=0;d<y;d++)null!=(f=n.__k[d])&&"boolean"!=typeof f&&"function"!=typeof f&&(p=-1===f.__i?F:m[f.__i]||F,f.__i=d,se(e,f,p,o,i,s,a,c,u,l),h=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&ue(p.ref,null,f),l.push(f.ref,f.__c||h,f)),null==g&&null!=h&&(g=h),65536&f.__u||p.__k===f.__k?c=ee(f,c,e):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:h&&(c=h.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=g}function ee(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=ee(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function te(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(null===c||c&&o==c.key&&i===c.type)return n;if(r>(null==c||131072&c.__u?0:1))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&!(131072&c.__u)&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&o==c.key&&i===c.type)return a;a++}}return-1}function ne(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||j.test(t)?n:n+"px"}function re(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ne(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||ne(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?ie:oe,i)):e.removeEventListener(t,i?ie:oe,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function oe(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(P.event?P.event(e):e)}}function ie(e){if(this.l)return this.l[e.type+!0](P.event?P.event(e):e)}function se(e,t,n,r,o,i,s,a,c,u){var l,d,p,f,h,g,m,y,v,_,S,E,b,T,w,C=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(l=P.__b)&&l(t);e:if("function"==typeof C)try{if(y=t.props,v=(l=C.contextType)&&r[l.__c],_=l?v?v.props.value:l.__:r,n.__c?m=(d=t.__c=n.__c).__=d.__E:("prototype"in C&&C.prototype.render?t.__c=d=new C(y,_):(t.__c=d=new $(y,_),d.constructor=C,d.render=de),v&&v.sub(d),d.props=y,d.state||(d.state={}),d.context=_,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=C.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=G({},d.__s)),G(d.__s,C.getDerivedStateFromProps(y,d.__s))),f=d.props,h=d.state,d.__v=t,p)null==C.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==C.getDerivedStateFromProps&&y!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,_),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,_)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,_),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(f,h,g)}))}if(d.context=_,d.props=y,d.__P=e,d.__e=!1,E=P.__r,b=0,"prototype"in C&&C.prototype.render){for(d.state=d.__s,d.__d=!1,E&&E(t),l=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do{d.__d=!1,E&&E(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++b<25);d.state=d.__s,null!=d.getChildContext&&(r=G(G({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(f,h)),Q(e,W(w=null!=l&&l.type===q&&null==l.key?l.props.children:l)?w:[w],t,n,r,o,i,s,a,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),m&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=i?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),P.__e(e,t,n)}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ce(n.__e,t,n,r,o,i,s,c,u);(l=P.diffed)&&l(t)}function ae(e,t,n){for(var r=0;r<n.length;r++)ue(n[r],n[++r],n[++r]);P.__c&&P.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){P.__e(e,t.__v)}}))}function ce(e,t,n,r,o,i,s,a,c){var u,l,d,p,f,h,g,m=n.props,y=t.props,v=t.type;if("svg"===v&&(o=!0),null!=i)for(u=0;u<i.length;u++)if((f=i[u])&&"setAttribute"in f==!!v&&(v?f.localName===v:3===f.nodeType)){e=f,i[u]=null;break}if(null==e){if(null===v)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,y.is&&y),i=null,a=!1}if(null===v)m===y||a&&e.data===y||(e.data=y);else{if(i=i&&k.call(e.childNodes),m=n.props||F,!a&&null!=i)for(m={},u=0;u<e.attributes.length;u++)m[(f=e.attributes[u]).name]=f.value;for(u in m)f=m[u],"children"==u||("dangerouslySetInnerHTML"==u?d=f:"key"===u||u in y||re(e,u,null,f,o));for(u in y)f=y[u],"children"==u?p=f:"dangerouslySetInnerHTML"==u?l=f:"value"==u?h=f:"checked"==u?g=f:"key"===u||a&&"function"!=typeof f||m[u]===f||re(e,u,f,m[u],o);if(l)a||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),Q(e,W(p)?p:[p],t,n,r,o&&"foreignObject"!==v,i,s,i?i[0]:n.__k&&Y(n,0),a,c),null!=i)for(u=i.length;u--;)null!=i[u]&&H(i[u]);a||(u="value",void 0!==h&&(h!==e[u]||"progress"===v&&!h||"option"===v&&h!==m[u])&&re(e,u,h,m[u],!1),u="checked",void 0!==g&&g!==e[u]&&re(e,u,g,m[u],!1))}return e}function ue(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){P.__e(e,n)}}function le(e,t,n){var r,o;if(P.unmount&&P.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ue(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){P.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&le(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||H(e.__e),e.__=e.__e=e.__d=void 0}function de(e,t,n){return this.constructor(e,n)}k=B.slice,P={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(t){e=t}throw e}},D=0,$.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=G({},this.state),"function"==typeof e&&(e=e(G({},n),this.props)),e&&G(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),X(this))},$.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),X(this))},$.prototype.render=q,N=[],x="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U=function(e,t){return e.__v.__b-t.__v.__b},Z.__r=0;var pe,fe,he,ge,me=0,ye=[],ve=[],_e=P,Se=_e.__b,Ee=_e.__r,be=_e.diffed,Te=_e.__c,we=_e.unmount,Ce=_e.__;function Re(e,t){_e.__h&&_e.__h(fe,e,me||t),me=0;var n=fe.__H||(fe.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ve}),n.__[e]}function Oe(e){return me=1,Ie(Fe,e)}function Ie(e,t,n){var r=Re(pe++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Fe(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=fe,!fe.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return!!e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var s=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!i||i.call(this,e,t,n))};fe.u=!0;var i=fe.shouldComponentUpdate,s=fe.componentWillUpdate;fe.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,o(e,t,n),i=r}s&&s.call(this,e,t,n)},fe.shouldComponentUpdate=o}return r.__N||r.__}function Me(e,t){var n=Re(pe++,4);!_e.__s&&Ue(n.__H,t)&&(n.__=e,n.i=t,fe.__h.push(n))}function Ae(e,t){var n=Re(pe++,7);return Ue(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function ke(e,t){return me=8,Ae((function(){return e}),t)}function Pe(){for(var e;e=ye.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Le),e.__H.__h.forEach(xe),e.__H.__h=[]}catch(t){e.__H.__h=[],_e.__e(t,e.__v)}}_e.__b=function(e){fe=null,Se&&Se(e)},_e.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ce&&Ce(e,t)},_e.__r=function(e){Ee&&Ee(e),pe=0;var t=(fe=e.__c).__H;t&&(he===fe?(t.__h=[],fe.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=ve,e.__N=e.i=void 0}))):(t.__h.forEach(Le),t.__h.forEach(xe),t.__h=[],pe=0)),he=fe},_e.diffed=function(e){be&&be(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==ye.push(t)&&ge===_e.requestAnimationFrame||((ge=_e.requestAnimationFrame)||Ne)(Pe)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==ve&&(e.__=e.__V),e.i=void 0,e.__V=ve}))),he=fe=null},_e.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Le),e.__h=e.__h.filter((function(e){return!e.__||xe(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],_e.__e(n,e.__v)}})),Te&&Te(e,t)},_e.unmount=function(e){we&&we(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Le(e)}catch(e){t=e}})),n.__H=void 0,t&&_e.__e(t,n.__v))};var De="function"==typeof requestAnimationFrame;function Ne(e){var t,n=function(){clearTimeout(r),De&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);De&&(t=requestAnimationFrame(n))}function Le(e){var t=fe,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),fe=t}function xe(e){var t=fe;e.__c=e.__(),fe=t}function Ue(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Fe(e,t){return"function"==typeof t?t(e):t}const Be={__proto__:null,useCallback:ke,useContext:function(e){var t=fe.context[e.__c],n=Re(pe++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(fe)),t.props.value):e.__},useDebugValue:function(e,t){_e.useDebugValue&&_e.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=Re(pe++,3);!_e.__s&&Ue(n.__H,t)&&(n.__=e,n.i=t,fe.__H.__h.push(n))},useErrorBoundary:function(e){var t=Re(pe++,10),n=Oe();return t.__=e,fe.componentDidCatch||(fe.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=Re(pe++,11);if(!e.__){for(var t=fe.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){me=6,Me((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))},useLayoutEffect:Me,useMemo:Ae,useReducer:Ie,useRef:function(e){return me=5,Ae((function(){return{current:e}}),[])},useState:Oe};function je(){const e=e=>s.createElementNS("http://www.w3.org/2000/svg",e),t=R(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=R(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}const We="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function Ge(e){let{options:t}=e;const n=Ae((()=>({__html:je().outerHTML})),[]);return z("h2",{class:"dialog__header",__self:this,__source:{fileName:We,lineNumber:16}},t.formTitle,t.showBranding?z("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:n,__self:this,__source:{fileName:We,lineNumber:19}}):null)}const He="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function ze(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Ve(e){let{options:t,defaultEmail:n,defaultName:r,onFormClose:i,onSubmit:s,onSubmitSuccess:a,onSubmitError:c,showEmail:u,showName:l,screenshotInput:d}=e;const{tags:p,addScreenshotButtonLabel:f,removeScreenshotButtonLabel:h,cancelButtonLabel:g,emailLabel:m,emailPlaceholder:y,isEmailRequired:v,isNameRequired:_,messageLabel:S,messagePlaceholder:E,nameLabel:b,namePlaceholder:T,submitButtonLabel:C,isRequiredLabel:R}=t,[O,I]=Oe(null),[M,A]=Oe(!1),k=d&&d.input,[P,D]=Oe(null),N=ke((e=>{D(e),A(!1)}),[]),L=ke((e=>{const t=function(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}(e,{emailLabel:m,isEmailRequired:v,isNameRequired:_,messageLabel:S,nameLabel:b});return t.length>0?I(`Please enter in the following required fields: ${t.join(", ")}`):I(null),0===t.length}),[m,v,_,S,b]),x=ke((async e=>{try{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(d&&M?d.value():void 0),r={name:ze(t,"name"),email:ze(t,"email"),message:ze(t,"message"),attachments:n?[n]:void 0};if(!L(r))return;try{await s({name:r.name,email:r.email,message:r.message,source:"widget",tags:p},{attachments:r.attachments}),a(r)}catch(e){w&&o.logger.error(e),I(e),c(e)}}catch(e){}}),[d&&M,a,c]);return z("form",{class:"form",onSubmit:x,__self:this,__source:{fileName:He,lineNumber:144}},k&&M?z(k,{onError:N,__self:this,__source:{fileName:He,lineNumber:146}}):null,z("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:He,lineNumber:149}},z("div",{class:"form__top",__self:this,__source:{fileName:He,lineNumber:150}},O?z("div",{class:"form__error-container",__self:this,__source:{fileName:He,lineNumber:151}},O):null,l?z("label",{for:"name",class:"form__label",__self:this,__source:{fileName:He,lineNumber:154}},z(qe,{label:b,isRequiredLabel:R,isRequired:_,__self:this,__source:{fileName:He,lineNumber:155}}),z("input",{class:"form__input",defaultValue:r,id:"name",name:"name",placeholder:T,required:_,type:"text",__self:this,__source:{fileName:He,lineNumber:156}})):z("input",{"aria-hidden":!0,value:r,name:"name",type:"hidden",__self:this,__source:{fileName:He,lineNumber:167}}),u?z("label",{for:"email",class:"form__label",__self:this,__source:{fileName:He,lineNumber:171}},z(qe,{label:m,isRequiredLabel:R,isRequired:v,__self:this,__source:{fileName:He,lineNumber:172}}),z("input",{class:"form__input",defaultValue:n,id:"email",name:"email",placeholder:y,required:v,type:"email",__self:this,__source:{fileName:He,lineNumber:173}})):z("input",{"aria-hidden":!0,value:n,name:"email",type:"hidden",__self:this,__source:{fileName:He,lineNumber:184}}),z("label",{for:"message",class:"form__label",__self:this,__source:{fileName:He,lineNumber:187}},z(qe,{label:S,isRequiredLabel:R,isRequired:!0,__self:this,__source:{fileName:He,lineNumber:188}}),z("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:E,required:!0,rows:5,__self:this,__source:{fileName:He,lineNumber:189}})),k?z("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:He,lineNumber:201}},z("button",{class:"btn btn--default",type:"button",onClick:()=>{D(null),A((e=>!e))},__self:this,__source:{fileName:He,lineNumber:202}},M?h:f),P?z("div",{class:"form__error-container",__self:this,__source:{fileName:He,lineNumber:212}},P.message):null):null),z("div",{class:"btn-group",__self:this,__source:{fileName:He,lineNumber:216}},z("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:He,lineNumber:217}},C),z("button",{class:"btn btn--default",type:"button",onClick:i,__self:this,__source:{fileName:He,lineNumber:220}},g))))}function qe(e){let{label:t,isRequired:n,isRequiredLabel:r}=e;return z("span",{class:"form__label__text",__self:this,__source:{fileName:He,lineNumber:239}},t,n&&z("span",{class:"form__label__text--required",__self:this,__source:{fileName:He,lineNumber:241}},r))}function $e(){const e=e=>i.document.createElementNS("http://www.w3.org/2000/svg",e),t=R(e("svg"),{width:"16",height:"17",viewBox:"0 0 16 17",fill:"inherit"}),n=R(e("g"),{clipPath:"url(#clip0_57_156)"}),r=R(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=R(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),a=R(e("clipPath"),{id:"clip0_57_156"}),c=R(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return a.appendChild(c),s.appendChild(a),t.appendChild(s).appendChild(a).appendChild(c),t}const Ye="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function Ke(e){let{open:t,onFormSubmitted:n,...r}=e;const o=r.options,i=Ae((()=>({__html:$e().outerHTML})),[]),[s,a]=Oe(null),c=ke((()=>{s&&(clearTimeout(s),a(null)),n()}),[s]),u=ke((e=>{r.onSubmitSuccess(e),a(setTimeout((()=>{n(),a(null)}),5e3))}),[n]);return z(q,{__self:this,__source:{fileName:Ye,lineNumber:48}},s?z("div",{class:"success__position",onClick:c,__self:this,__source:{fileName:Ye,lineNumber:50}},z("div",{class:"success__content",__self:this,__source:{fileName:Ye,lineNumber:51}},o.successMessageText,z("span",{class:"success__icon",dangerouslySetInnerHTML:i,__self:this,__source:{fileName:Ye,lineNumber:53}}))):z("dialog",{class:"dialog",onClick:o.onFormClose,open:t,__self:this,__source:{fileName:Ye,lineNumber:57}},z("div",{class:"dialog__position",__self:this,__source:{fileName:Ye,lineNumber:58}},z("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()},__self:this,__source:{fileName:Ye,lineNumber:59}},z(Ge,{options:o,__self:this,__source:{fileName:Ye,lineNumber:66}}),z(Ve,{...r,onSubmitSuccess:u,__self:this,__source:{fileName:Ye,lineNumber:67}})))))}function Je(e){const t=s.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`\n.editor {\n  padding: 10px;\n  padding-top: 65px;\n  padding-bottom: 65px;\n  flex-grow: 1;\n\n  background-color: ${n};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${n} 8px,\n      ${n} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${r} 15px,\n      ${r} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container canvas {\n  object-fit: contain;\n  position: relative;\n}\n\n.editor__crop-btn-group {\n  padding: 8px;\n  gap: 8px;\n  border-radius: var(--menu-border-radius, 6px);\n  background: var(--button-primary-background, var(--background));\n  width: 175px;\n  position: absolute;\n}\n\n.editor__crop-corner {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  background: none;\n  border: 3px solid #ffffff;\n}\n\n.editor__crop-corner--top-left {\n  cursor: nwse-resize;\n  border-right: none;\n  border-bottom: none;\n}\n.editor__crop-corner--top-right {\n  cursor: nesw-resize;\n  border-left: none;\n  border-bottom: none;\n}\n.editor__crop-corner--bottom-left {\n  cursor: nesw-resize;\n  border-right: none;\n  border-top: none;\n}\n.editor__crop-corner--bottom-right {\n  cursor: nwse-resize;\n  border-left: none;\n  border-top: none;\n}\n`,e&&t.setAttribute("nonce",e),t}const Xe="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",Ze=33,Qe=i.devicePixelRatio,et=e=>({x:Math.min(e.startX,e.endX),y:Math.min(e.startY,e.endY),width:Math.abs(e.startX-e.endX),height:Math.abs(e.startY-e.endY)}),tt=e=>{const t=e.clientHeight,n=e.clientWidth,r=e.width/e.height;let o=t*r,i=t;o>n&&(o=n,i=n/r);const s=(n-o)/2,a=(t-i)/2;return{startX:s,startY:a,endX:o+s,endY:i+a}};function nt(e){let{h:t,hooks:n,imageBuffer:r,dialog:o,options:c}=e;const u=function(e){let{hooks:t}=e;return function(e){let{onBeforeScreenshot:n,onScreenshot:r,onAfterScreenshot:o,onError:c}=e;t.useEffect((()=>{(async()=>{n();const e=await a.mediaDevices.getDisplayMedia({video:{width:i.innerWidth*i.devicePixelRatio,height:i.innerHeight*i.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),t=s.createElement("video");await new Promise(((n,o)=>{t.srcObject=e,t.onloadedmetadata=()=>{r(t),e.getTracks().forEach((e=>e.stop())),n()},t.play().catch(o)})),o()})().catch(c)}),[])}}({hooks:n});return function(e){let{onError:a}=e;const l=n.useMemo((()=>({__html:Je(c.styleNonce).innerText})),[]),d=function(e){let{h:t}=e;return function(e){let{top:n,left:r,corner:o,onGrabButton:i}=e;return t("button",{class:`editor__crop-corner editor__crop-corner--${o} `,style:{top:n,left:r},onMouseDown:e=>{e.preventDefault(),i(e,o)},onClick:e=>{e.preventDefault()},__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/CropCorner.tsx",lineNumber:22}})}}({h:t}),p=n.useRef(null),f=n.useRef(null),h=n.useRef(null),[g,m]=n.useState({startX:0,startY:0,endX:0,endY:0}),[y,v]=n.useState(!1),[_,S]=n.useState(!1);function E(){const e=h.current,t=et(tt(r));if(e){e.width=t.width*Qe,e.height=t.height*Qe,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`;const n=e.getContext("2d");n&&n.scale(Qe,Qe)}const n=f.current;n&&(n.style.width=`${t.width}px`,n.style.height=`${t.height}px`),m({startX:0,startY:0,endX:t.width,endY:t.height})}function b(e,t){v(!1),S(!0);const n=T(t),r=()=>{s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",r),v(!0),S(!1)};s.addEventListener("mouseup",r),s.addEventListener("mousemove",n)}n.useEffect((()=>{i.addEventListener("resize",E,!1)}),[]),n.useEffect((()=>{const e=h.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const n=et(tt(r)),o=et(g);t.clearRect(0,0,n.width,n.height),t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,n.width,n.height),t.clearRect(o.x,o.y,o.width,o.height),t.strokeStyle="#ffffff",t.lineWidth=3,t.strokeRect(o.x+1,o.y+1,o.width-2,o.height-2),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(o.x+3,o.y+3,o.width-6,o.height-6)}),[g]);const T=n.useCallback((e=>function(t){if(!h.current)return;const n=h.current,r=n.getBoundingClientRect(),o=t.clientX-r.x,i=t.clientY-r.y;switch(e){case"top-left":m((e=>({...e,startX:Math.min(Math.max(0,o),e.endX-Ze),startY:Math.min(Math.max(0,i),e.endY-Ze)})));break;case"top-right":m((e=>({...e,endX:Math.max(Math.min(o,n.width/Qe),e.startX+Ze),startY:Math.min(Math.max(0,i),e.endY-Ze)})));break;case"bottom-left":m((e=>({...e,startX:Math.min(Math.max(0,o),e.endX-Ze),endY:Math.max(Math.min(i,n.height/Qe),e.startY+Ze)})));break;case"bottom-right":m((e=>({...e,endX:Math.max(Math.min(o,n.width/Qe),e.startX+Ze),endY:Math.max(Math.min(i,n.height/Qe),e.startY+Ze)})))}}),[]),w=n.useRef({initialX:0,initialY:0});return u({onBeforeScreenshot:n.useCallback((()=>{o.el.style.display="none"}),[]),onScreenshot:n.useCallback((e=>{const t=r.getContext("2d");if(!t)throw new Error("Could not get canvas context");r.width=e.videoWidth,r.height=e.videoHeight,r.style.width="100%",r.style.height="100%",t.drawImage(e,0,0)}),[r]),onAfterScreenshot:n.useCallback((()=>{o.el.style.display="block";const e=p.current;e&&e.appendChild(r),E()}),[]),onError:n.useCallback((e=>{o.el.style.display="block",a(e)}),[])}),t("div",{class:"editor",__self:this,__source:{fileName:Xe,lineNumber:315}},t("style",{nonce:c.styleNonce,dangerouslySetInnerHTML:l,__self:this,__source:{fileName:Xe,lineNumber:316}}),t("div",{class:"editor__canvas-container",ref:p,__self:this,__source:{fileName:Xe,lineNumber:317}},t("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:f,__self:this,__source:{fileName:Xe,lineNumber:318}},t("canvas",{onMouseDown:function(e){if(_)return;w.current={initialX:e.clientX,initialY:e.clientY};const t=e=>{const t=h.current;if(!t)return;const n=e.clientX-w.current.initialX,r=e.clientY-w.current.initialY;m((o=>{const i=Math.max(0,Math.min(o.startX+n,t.width/Qe-(o.endX-o.startX))),s=Math.max(0,Math.min(o.startY+r,t.height/Qe-(o.endY-o.startY))),a=i+(o.endX-o.startX),c=s+(o.endY-o.startY);return w.current.initialX=e.clientX,w.current.initialY=e.clientY,{startX:i,startY:s,endX:a,endY:c}}))},n=()=>{s.removeEventListener("mousemove",t),s.removeEventListener("mouseup",n)};s.addEventListener("mousemove",t),s.addEventListener("mouseup",n)},style:{position:"absolute",cursor:y?"move":"auto"},ref:h,__self:this,__source:{fileName:Xe,lineNumber:319}}),t(d,{left:g.startX-3,top:g.startY-3,onGrabButton:b,corner:"top-left",__self:this,__source:{fileName:Xe,lineNumber:324}}),t(d,{left:g.endX-30+3,top:g.startY-3,onGrabButton:b,corner:"top-right",__self:this,__source:{fileName:Xe,lineNumber:330}}),t(d,{left:g.startX-3,top:g.endY-30+3,onGrabButton:b,corner:"bottom-left",__self:this,__source:{fileName:Xe,lineNumber:336}}),t(d,{left:g.endX-30+3,top:g.endY-30+3,onGrabButton:b,corner:"bottom-right",__self:this,__source:{fileName:Xe,lineNumber:342}}),t("div",{style:{left:Math.max(0,g.endX-191),top:Math.max(0,g.endY+8),display:y?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:Xe,lineNumber:348}},t("button",{onClick:e=>{e.preventDefault(),h.current&&m({startX:0,startY:0,endX:h.current.width/Qe,endY:h.current.height/Qe}),v(!1)},class:"btn btn--default",__self:this,__source:{fileName:Xe,lineNumber:356}},c.cancelButtonLabel),t("button",{onClick:e=>{e.preventDefault(),function(){const e=s.createElement("canvas"),t=et(tt(r)),n=et(g);e.width=n.width*Qe,e.height=n.height*Qe;const o=e.getContext("2d");o&&r&&o.drawImage(r,n.x/t.width*r.width,n.y/t.height*r.height,n.width/t.width*r.width,n.height/t.height*r.height,0,0,e.width,e.height);const i=r.getContext("2d");i&&(i.clearRect(0,0,r.width,r.height),r.width=e.width,r.height=e.height,r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,i.drawImage(e,0,0),E())}(),v(!1)},class:"btn btn--primary",__self:this,__source:{fileName:Xe,lineNumber:373}},c.confirmButtonLabel)))))}}t.buildFeedbackIntegration=e=>{let{lazyLoadIntegration:t,getModalIntegration:n,getScreenshotIntegration:O}=e;return function(){let{id:e="sentry-feedback",autoInject:k=!0,showBranding:P=!0,isEmailRequired:D=!1,isNameRequired:N=!1,showEmail:L=!0,showName:x=!0,enableScreenshot:U=!0,useSentryUser:F={email:"email",name:"username"},tags:B,styleNonce:j,scriptNonce:W,colorScheme:G="system",themeLight:H={},themeDark:z={},addScreenshotButtonLabel:V=E,cancelButtonLabel:q=u,confirmButtonLabel:$=d,emailLabel:Y=h,emailPlaceholder:K=f,formTitle:J=p,isRequiredLabel:X=S,messageLabel:Z=m,messagePlaceholder:Q=g,nameLabel:ee=v,namePlaceholder:te=y,removeScreenshotButtonLabel:ne=b,submitButtonLabel:re=l,successMessageText:oe=_,triggerLabel:ie=c,triggerAriaLabel:se="",onFormOpen:ae,onFormClose:ce,onSubmitSuccess:ue,onSubmitError:le,onFormSubmitted:de}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const pe={id:e,autoInject:k,showBranding:P,isEmailRequired:D,isNameRequired:N,showEmail:L,showName:x,enableScreenshot:U,useSentryUser:F,tags:B,styleNonce:j,scriptNonce:W,colorScheme:G,themeDark:z,themeLight:H,triggerLabel:ie,triggerAriaLabel:se,cancelButtonLabel:q,submitButtonLabel:re,confirmButtonLabel:$,formTitle:J,emailLabel:Y,emailPlaceholder:K,messageLabel:Z,messagePlaceholder:Q,nameLabel:ee,namePlaceholder:te,successMessageText:oe,isRequiredLabel:X,addScreenshotButtonLabel:V,removeScreenshotButtonLabel:ne,onFormClose:ce,onFormOpen:ae,onSubmitError:le,onSubmitSuccess:ue,onFormSubmitted:de};let fe=null,he=[];const ge=e=>{if(!fe){const t=s.createElement("div");t.id=String(e.id),s.body.appendChild(t),fe=t.attachShadow({mode:"open"}),fe.appendChild(function(e){let{colorScheme:t,themeDark:n,themeLight:r,styleNonce:o}=e;const i=s.createElement("style");return i.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==t?"color-scheme: only light;":""}\n\n  ${A("dark"===t?{...M,...n}:{...I,...r})}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${A({...M,...n})}\n  }\n}`:""}\n}\n`,o&&i.setAttribute("nonce",o),i}(e))}return fe},me=async(e,n,o)=>{const i=r.getClient(),s=i&&i.getIntegrationByName(e);if(s)return s;const a=(n&&n()||await t(o,W))();return i&&i.addIntegration(a),a},ye=async e=>{const t=e.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a.userAgent)||/Macintosh/i.test(a.userAgent)&&a.maxTouchPoints&&a.maxTouchPoints>1||!isSecureContext),[r,i]=await Promise.all([me("FeedbackModal",n,"feedbackModalIntegration"),t?me("FeedbackScreenshot",O,"feedbackScreenshotIntegration"):void 0]);if(!r)throw w&&o.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");t&&!i&&w&&o.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.");const s=r.createDialog({options:{...e,onFormClose:()=>{s&&s.close(),e.onFormClose&&e.onFormClose()},onFormSubmitted:()=>{s&&s.close(),e.onFormSubmitted&&e.onFormSubmitted()}},screenshotIntegration:t?i:void 0,sendFeedback:T,shadow:ge(e)});return s},ve=function(e){const t=C(pe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n="string"==typeof e?s.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!n)throw w&&o.logger.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let r=null;const i=async()=>{r||(r=await ye({...t,onFormSubmitted:()=>{r&&r.removeFromDom(),t.onFormSubmitted&&t.onFormSubmitted()}})),r.appendToDom(),r.open()};n.addEventListener("click",i);const a=()=>{he=he.filter((e=>e!==a)),r&&r.removeFromDom(),r=null,n.removeEventListener("click",i)};return he.push(a),a},_e=function(){const e=C(pe,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=ge(e),n=function(e){let{triggerLabel:t,triggerAriaLabel:n,shadow:r,styleNonce:o}=e;const a=s.createElement("button");if(a.type="button",a.className="widget__actor",a.ariaHidden="false",a.ariaLabel=n||t||c,a.appendChild(function(){const e=e=>i.document.createElementNS("http://www.w3.org/2000/svg",e),t=R(e("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--actor-color, var(--foreground))"}),n=R(e("g"),{clipPath:"url(#clip0_57_80)"}),r=R(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=R(e("clipPath"),{id:"clip0_57_80"}),a=R(e("rect"),{width:"20",height:"20",fill:"white"});return s.appendChild(a),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(a),t}()),t){const e=s.createElement("span");e.appendChild(s.createTextNode(t)),a.appendChild(e)}const u=function(e){const t=s.createElement("style");return t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e&&t.setAttribute("nonce",e),t}(o);return{el:a,appendToDom(){r.appendChild(u),r.appendChild(a)},removeFromDom(){r.removeChild(a),r.removeChild(u)},show(){a.ariaHidden="false"},hide(){a.ariaHidden="true"}}}({triggerLabel:e.triggerLabel,triggerAriaLabel:e.triggerAriaLabel,shadow:t,styleNonce:j});return ve(n.el,{...e,onFormOpen(){n.hide()},onFormClose(){n.show()},onFormSubmitted(){n.show()}}),n};return{name:"Feedback",setupOnce(){o.isBrowser()&&pe.autoInject&&("loading"===s.readyState?s.addEventListener("DOMContentLoaded",(()=>_e().appendToDom())):_e().appendToDom())},attachTo:ve,createWidget(){const e=_e(C(pe,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}));return e.appendToDom(),e},async createForm(){return ye(C(pe,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}))},remove(){fe&&(fe.parentElement&&fe.parentElement.remove(),fe=null),he.forEach((e=>e())),he=[]}}}},t.feedbackModalIntegration=()=>({name:"FeedbackModal",setupOnce(){},createDialog:e=>{let{options:t,screenshotIntegration:n,sendFeedback:o,shadow:i}=e;const a=i,c=t.useSentryUser,u=function(){const e=r.getCurrentScope().getUser(),t=r.getIsolationScope().getUser(),n=r.getGlobalScope().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}(),l=s.createElement("div"),d=function(e){const t=s.createElement("style");return t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  width: var(--form-width, 272px);\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n}\n\n@media (max-width: 600px) {\n  .form__right {\n    width: var(--form-width, 100%);\n  }\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e&&t.setAttribute("nonce",e),t}(t.styleNonce);let p="";const f={get el(){return l},appendToDom(){a.contains(d)||a.contains(l)||(a.appendChild(d),a.appendChild(l))},removeFromDom(){a.removeChild(l),a.removeChild(d),s.body.style.overflow=p},open(){g(!0),t.onFormOpen&&t.onFormOpen(),p=s.body.style.overflow,s.body.style.overflow="hidden"},close(){g(!1),s.body.style.overflow=p}},h=n&&n.createInput({h:z,hooks:Be,dialog:f,options:t}),g=e=>{!function(e,t){var n,r,o,i;P.__&&P.__(e,t),r=(n=!1)?null:t.__k,o=[],i=[],se(t,e=t.__k=z(q,null,[e]),r||F,F,void 0!==t.ownerSVGElement,r?null:t.firstChild?k.call(t.childNodes):null,o,r?r.__e:t.firstChild,n,i),e.__d=void 0,ae(o,e,i)}(z(Ke,{options:t,screenshotInput:h,showName:t.showName||t.isNameRequired,showEmail:t.showEmail||t.isEmailRequired,defaultName:c&&u&&u[c.name]||"",defaultEmail:c&&u&&u[c.email]||"",onFormClose:()=>{g(!1),t.onFormClose&&t.onFormClose()},onSubmit:o,onSubmitSuccess:e=>{g(!1),t.onSubmitSuccess&&t.onSubmitSuccess(e)},onSubmitError:e=>{t.onSubmitError&&t.onSubmitError(e)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted()},open:e,__self:void 0,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx",lineNumber:67}}),l)};return f}}),t.feedbackScreenshotIntegration=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:e=>{let{h:t,hooks:n,dialog:r,options:o}=e;const i=s.createElement("canvas");return{input:nt({h:t,hooks:n,imageBuffer:i,dialog:r,options:o}),value:async()=>{const e=await new Promise((e=>{i.toBlob(e,"image/png")}));if(e)return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),t.getFeedback=function(){const e=r.getClient();return e&&e.getIntegrationByName("Feedback")},t.sendFeedback=T},65:(e,t,n)=>{var{_optionalChain:r}=n(674);Object.defineProperty(t,"__esModule",{value:!0});const o=n(3022);var i;function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:s(e.parentNode,t,n,r+1):-1}function a(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(i||(i={}));const c="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let u={map:{},getId:()=>(console.error(c),-1),getNode:()=>(console.error(c),null),removeNodeFromMap(){console.error(c)},has:()=>(console.error(c),!1),reset(){console.error(c)}};function l(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){m((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>l(e,t,i||{},!0)}function d(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function p(e,t,n,r,o){if(!e)return!1;const i=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!i)return!1;const c=a(t,n);if(!o){const e=r&&i.matches(r);return c(i)&&!e}const u=s(i,c);let l=-1;return!(u<0)&&(r&&(l=s(i,a(null,r))),u>-1&&l<0||u<l)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(u=new Proxy(u,{get:(e,t,n)=>("map"===t&&console.error(c),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const f={};function h(e){const t=f[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return f[e]=r.bind(window)}function g(){return h("requestAnimationFrame")(...arguments)}function m(){return h("setTimeout")(...arguments)}var y=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(y||{});let v;function _(e){v=e}const S=e=>v?function(){try{return e(...arguments)}catch(e){if(v&&!0===v(e))return()=>{};throw e}}:e;for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b="undefined"==typeof Uint8Array?[]:new Uint8Array(256),T=0;T<64;T++)b[E.charCodeAt(T)]=T;const w=new Map,C=(e,t,n)=>{if(!e||!I(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=w.get(e);return n||(n=new Map,w.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function R(e,t,n){if(e instanceof Array)return e.map((e=>R(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=E[n[t]>>2],o+=E[(3&n[t])<<4|n[t+1]>>4],o+=E[(15&n[t+1])<<2|n[t+2]>>6],o+=E[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[R(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}return e instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:e.toDataURL()}:e instanceof ImageData?{rr_type:e.constructor.name,args:[R(e.data,t,n),e.width,e.height]}:I(e,t)||"object"==typeof e?{rr_type:e.constructor.name,index:C(e,t,n)}:e}const O=(e,t,n)=>e.map((e=>R(e,t,n))),I=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function M(e,t,n,r,o){const i=[];try{const s=d(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];if(!p(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(a[0]&&"object"==typeof a[0]){const e=a[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...a])}}));i.push(s)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function A(e,t,n,r,o,i,s,a){const c=[],u=Object.getOwnPropertyNames(e);for(const s of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))try{if("function"!=typeof e[s])continue;const u=d(e,s,(function(e){return function(){for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];const d=e.apply(this,u);if(C(d,a,this),"tagName"in this.canvas&&!p(this.canvas,r,o,i,!0)){const e=O(u,a,this),r={type:t,property:s,args:e};n(this.canvas,r)}return d}}));c.push(u)}catch(r){const o=l(e,s,{set(e){n(this.canvas,{type:t,property:s,args:[e],setter:!0})}});c.push(o)}return c}class k{reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,r([this,"access",e=>e.worker,"optionalAccess",e=>e.terminate,"call",e=>e()]),this.worker=null,this.snapshotInProgressMap=new Map,(this.options.recordCanvas&&"number"==typeof this.options.sampling||this.options.enableManualSnapshot)&&(this.worker=this.initFPSWorker())}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:i,maxCanvasSize:s,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&_(u),(a&&"number"==typeof t||e.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(n),e.enableManualSnapshot||S((()=>{a&&"all"===t&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,o,i,s,{dataURLOptions:c})}))()}addWindow(e){const{sampling:t="all",blockClass:n,blockSelector:r,unblockSelector:o,recordCanvas:i,enableManualSnapshot:s}=this.options;if(!this.windowsSet.has(e)){if(s)return this.windowsSet.add(e),void this.windows.push(new WeakRef(e));S((()=>{if(i&&"all"===t&&this.initCanvasMutationObserver(e,n,r,o),i&&"number"==typeof t){const t=M(e,n,r,o,!0);this.restoreHandlers.push((()=>{t()}))}}))(),this.windowsSet.add(e),this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const e=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());return e.onmessage=e=>{const t=e.data,{id:n}=t;if(this.snapshotInProgressMap.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:i,height:s}=t;this.mutationCb({id:n,type:y["2D"],commands:[{property:"clearRect",args:[0,0,i,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,i,s]}]})},e}initCanvasFPSObserver(e,t,n,r,o,i){const s=this.takeSnapshot(!1,e,t,n,r,o,i.dataURLOptions);this.restoreHandlers.push((()=>{cancelAnimationFrame(s)}))}initCanvasMutationObserver(e,t,n,r){const o=M(e,t,n,r,!1),i=function(e,t,n,r,o){const i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const s=d(t.CanvasRenderingContext2D.prototype,a,(function(i){return function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return p(this.canvas,n,r,o,!0)||m((()=>{const n=O(c,t,this);e(this.canvas,{type:y["2D"],property:a,args:n})}),0),i.apply(this,c)}}));i.push(s)}catch(n){const r=l(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:y["2D"],property:a,args:[t],setter:!0})}});i.push(r)}return()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),s=function(e,t,n,r,o){const i=[];return i.push(...A(t.WebGLRenderingContext.prototype,y.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...A(t.WebGL2RenderingContext.prototype,y.WebGL2,e,n,r,o,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.restoreHandlers.push((()=>{o(),i(),s()}))}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.restoreHandlers.push((()=>{cancelAnimationFrame(n)}))}takeSnapshot(e,t,n,o,i,s,a,c){const u=1e3/t;let l,d=0;const f=e=>{if(e)return[e];const t=[],r=e=>{e.querySelectorAll("canvas").forEach((e=>{p(e,n,o,i,!0)||t.push(e)}))};for(const e of this.windows){const t=e.deref();t&&r(t.document)}for(const e of this.shadowDoms){const t=e.deref();t&&r(t)}return t},h=t=>{this.windows.length&&(d&&t-d<u?l=g(h):(d=t,f(c).forEach((t=>{if(!this.mirror.hasNode(t))return;const n=this.mirror.getId(t);if(!this.snapshotInProgressMap.get(n)&&t.width&&t.height){if(this.snapshotInProgressMap.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===r([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{r([this,"access",e=>e.worker,"optionalAccess",e=>e.postMessage,"call",r=>r({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:a,maxCanvasSize:s},[e])])})).catch((e=>{S((()=>{throw e}))()}))}})),e||(l=g(h))))};return l=g(h),l}startPendingCanvasMutationFlusher(){g((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,g(e)};g(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),g((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const P={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},D=1280,N=o.defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,D):D,n?Math.min(n,D):D]};let o;const i=new Promise((e=>o=e));return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new k({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...P[e||"medium"]||P.medium}},async snapshot(e){(await i).snapshot(e)}}}));t.replayCanvasIntegration=N},422:(e,t,n)=>{var{_nullishCoalesce:r,_optionalChain:o}=n(674);Object.defineProperty(t,"__esModule",{value:!0});const i=n(3022),s=n(674),a=n(3654),c=s.GLOBAL_OBJ,u="sentryReplaySession",l="Unable to send Replay",d=5e3,p=5500,f=15e4,h=5e3,g=2e7,m=4999,y=36e5;function v(e,t){return null!=e?e:t()}function _(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.call(t,...r)})),t=void 0)}return n}var S;function E(e){const t=_([e,"optionalAccess",e=>e.host]);return Boolean(_([t,"optionalAccess",e=>e.shadowRoot])===e)}function b(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function T(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,w).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function w(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=T(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return e.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(S||(S={}));class C{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){return e?v(_([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]),(()=>-1)):-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function R(e){let{maskInputOptions:t,tagName:n,type:r}=e;return"OPTION"===n&&(n="SELECT"),Boolean(t[n.toLowerCase()]||r&&t[r]||"password"===r||"INPUT"===n&&!r&&t.text)}function O(e){let{isMasked:t,element:n,value:r,maskInputFn:o}=e,i=r||"";return t?(o&&(i=o(i,n)),"*".repeat(i.length)):i}function I(e){return e.toLowerCase()}function M(e){return e.toUpperCase()}const A="__rrweb_original__";function k(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?I(t):null}function P(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function D(e,t){let n;try{n=new URL(e,v(t,(()=>window.location.href)))}catch(e){return null}return v(_([n.pathname.match(/\.([0-9a-z]+)(?:$)/i),"optionalAccess",e=>e[1]]),(()=>null))}const N={};function L(e){const t=N[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return N[e]=r.bind(window)}function x(){return L("setTimeout")(...arguments)}function U(){return L("clearTimeout")(...arguments)}let F=1;const B=new RegExp("[^a-z0-9-_:]");function j(){return F++}let W,G;const H=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,z=/^(?:[a-z+]+:)?\/\//i,V=/^www\..*/i,q=/^(data:)([^,]*),(.*)/i;function $(e,t){return(e||"").replace(H,((e,n,r,o,i,s)=>{const a=r||i||s,c=n||o||"";if(!a)return e;if(z.test(a)||V.test(a))return`url(${c}${a}${c})`;if(q.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const Y=/^[^ \t\n\r\u000c]+/,K=/^[, \t\n\r\u000c]+/,J=new WeakMap;function X(e,t){return t&&""!==t.trim()?Z(e,t):t}function Z(e,t){let n=J.get(e);if(n||(n=e.createElement("a"),J.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function Q(e,t,n,r,o,i){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?X(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(K),!(n>=t.length);){let i=r(Y);if(","===i.slice(-1))i=X(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=X(e,i);let s=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(s=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?$(r,Z(e)):"object"===t&&"data"===n?X(e,r):"function"==typeof i?i(n,r,o):r:X(e,r):r}function ee(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function te(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:te(e.parentNode,t,n,r+1):-1}function ne(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function re(e,t,n,r,o,i){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){const e=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(i){if(c=te(s,ne(r,o)),c<0)return!0;a=te(s,ne(t,n),c>=0?c:1/0)}else{if(a=te(s,ne(t,n)),a<0)return!1;c=te(s,ne(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0||!i)}catch(e){}return!!i}function oe(e){return null==e?"":e.toLowerCase()}function ie(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:h={},maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:v,dataURLOptions:w={},inlineImages:C=!1,recordCanvas:N=!1,onSerialize:L,onIframeLoad:F,iframeLoadTimeout:H=5e3,onStylesheetLoad:z,stylesheetLoadTimeout:V=5e3,keepIframeSrcFn:q=()=>!1,newlyAddedElement:Y=!1}=t;let{preserveWhiteSpace:K=!0}=t;const J=function(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:h={},maskTextFn:g,maskInputFn:m,dataURLOptions:y={},inlineImages:v,recordCanvas:E,keepIframeSrcFn:b,newlyAddedElement:w=!1}=t,C=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:S.Document,childNodes:[],compatMode:e.compatMode}:{type:S.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:S.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:C};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:h=!1,rootId:g,maskAllText:m,maskTextClass:y,unmaskTextClass:v,maskTextSelector:_,unmaskTextSelector:E}=t,b=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,i),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=I(e.tagName);return B.test(t)?"div":t}(e);let C={};const D=e.attributes.length;for(let t=0;t<D;t++){const r=e.attributes[t];r.name&&!ee(w,r.name,r.value)&&(C[r.name]=Q(n,w,I(r.name),r.value,e,c))}if("link"===w&&s){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=T(t)),r&&(delete C.rel,delete C.href,C._cssText=$(r,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=T(e.sheet);t&&(C._cssText=$(t,Z(n)))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=k(t),r=P(t,M(w),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=re(t,y,_,v,E,R({type:n,tagName:M(w),maskInputOptions:a}));C.value=O({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(C.checked=o)}if("option"===w&&(e.selected&&!a.select?C.selected=!0:delete C.selected),"canvas"===w&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=A in o?o[A]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(C.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height,t!==r.toDataURL(l.type,l.quality)&&(C.rr_dataURL=t)}if("img"===w&&d){W||(W=n.createElement("canvas"),G=W.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,i=()=>{t.removeEventListener("load",i);try{W.width=t.naturalWidth,W.height=t.naturalHeight,G.drawImage(t,0,0),C.rr_dataURL=W.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(o?C.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}if("audio"!==w&&"video"!==w||(C.rr_mediaState=e.paused?"paused":"played",C.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(C.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(C.rr_scrollTop=e.scrollTop)),b){const{width:t,height:n}=e.getBoundingClientRect();C={class:C.class,rr_width:`${t}px`,rr_height:`${n}px`}}let N;"iframe"!==w||f(C.src)||(b||e.contentDocument||(C.rr_src=C.src),delete C.src);try{customElements.get(w)&&(N=!0)}catch(e){}return{type:S.Element,tagName:w,attributes:C,childNodes:[],isSVG:(L=e,Boolean("svg"===L.tagName||L.ownerSVGElement)||void 0),needBlock:b,rootId:g,isCustom:N};var L}(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:h,maskInputFn:m,dataURLOptions:y,inlineImages:v,recordCanvas:E,keepIframeSrcFn:b,newlyAddedElement:w,rootId:C,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const f="STYLE"===d||void 0,h="SCRIPT"===d||void 0,g="TEXTAREA"===d||void 0;if(f&&p){try{e.nextSibling||e.previousSibling||_([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=T(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=$(p,Z(t.doc))}h&&(p="SCRIPT_PLACEHOLDER");const m=re(e,r,i,o,s,n);return f||h||g||!p||!m||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*")),g&&p&&(c.textarea||m)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*")),"OPTION"===d&&p&&(p=O({isMasked:re(e,r,i,o,s,R({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:u})),{type:S.Text,textContent:p||"",isStyle:f,rootId:l}}(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:g,maskInputOptions:h,maskInputFn:m,rootId:C});case e.CDATA_SECTION_NODE:return{type:S.CDATA,textContent:"",rootId:C};case e.COMMENT_NODE:return{type:S.Comment,textContent:e.textContent||"",rootId:C};default:return!1}}(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,dataURLOptions:w,inlineImages:C,recordCanvas:N,keepIframeSrcFn:q,newlyAddedElement:Y});if(!J)return console.warn(e,"not serialized"),null;let X;X=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===S.Comment)return!0;if(e.type===S.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===D(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(oe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===oe(e.attributes.name)||"icon"===oe(e.attributes.rel)||"apple-touch-icon"===oe(e.attributes.rel)||"shortcut icon"===oe(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&oe(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(oe(e.attributes.property).match(/^(og|twitter|fb):/)||oe(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===oe(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===oe(e.attributes.name)||"googlebot"===oe(e.attributes.name)||"bingbot"===oe(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===oe(e.attributes.name)||"generator"===oe(e.attributes.name)||"framework"===oe(e.attributes.name)||"publisher"===oe(e.attributes.name)||"progid"===oe(e.attributes.name)||oe(e.attributes.property).match(/^article:/)||oe(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===oe(e.attributes.name)||"yandex-verification"===oe(e.attributes.name)||"csrf-token"===oe(e.attributes.name)||"p:domain_verify"===oe(e.attributes.name)||"verify-v1"===oe(e.attributes.name)||"verification"===oe(e.attributes.name)||"shopify-checkout-api-token"===oe(e.attributes.name)))return!0}}return!1}(J,v)&&(K||J.type!==S.Text||J.isStyle||J.textContent.replace(/^\s+|\s+$/gm,"").length)?j():-2;const te=Object.assign(J,{id:X});if(r.add(e,te),-2===X)return null;L&&L(e);let ne=!p;if(te.type===S.Element){ne=ne&&!te.needBlock,delete te.needBlock;const t=e.shadowRoot;t&&b(t)&&(te.isShadowHost=!0)}if((te.type===S.Document||te.type===S.Element)&&ne){v.headWhitespace&&te.type===S.Element&&"head"===te.tagName&&(K=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:v,dataURLOptions:w,inlineImages:C,recordCanvas:N,preserveWhiteSpace:K,onSerialize:L,onIframeLoad:F,iframeLoadTimeout:H,onStylesheetLoad:z,stylesheetLoadTimeout:V,keepIframeSrcFn:q};for(const n of Array.from(e.childNodes)){const e=ie(n,t);e&&te.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=ie(n,t);r&&(b(e.shadowRoot)&&(r.isShadow=!0),te.childNodes.push(r))}}return e.parentNode&&E(e.parentNode)&&b(e.parentNode)&&(te.isShadow=!0),te.type===S.Element&&"iframe"===te.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=x((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{U(r),i=!0,t()}))}const s="about:blank";if(r.location.href!==s||e.src===s||""===e.src)return x(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&F){const n=ie(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:v,dataURLOptions:w,inlineImages:C,recordCanvas:N,preserveWhiteSpace:K,onSerialize:L,onIframeLoad:F,iframeLoadTimeout:H,onStylesheetLoad:z,stylesheetLoadTimeout:V,keepIframeSrcFn:q});n&&F(e,n)}}),H),te.type===S.Element&&"link"===te.tagName&&"string"==typeof te.attributes.rel&&("stylesheet"===te.attributes.rel||"preload"===te.attributes.rel&&"string"==typeof te.attributes.href&&"css"===D(te.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const i=x((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{U(i),o=!0,t()}))}(e,(()=>{if(z){const t=ie(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:v,dataURLOptions:w,inlineImages:C,recordCanvas:N,preserveWhiteSpace:K,onSerialize:L,onIframeLoad:F,iframeLoadTimeout:H,onStylesheetLoad:z,stylesheetLoadTimeout:V,keepIframeSrcFn:q});t&&z(e,t)}}),V),te}function se(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.call(t,...r)})),t=void 0)}return n}function ae(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const ce="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let ue={map:{},getId:()=>(console.error(ce),-1),getNode:()=>(console.error(ce),null),removeNodeFromMap(){console.error(ce)},has:()=>(console.error(ce),!1),reset(){console.error(ce)}};function le(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null,o=0;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];const c=Date.now();o||!1!==n.leading||(o=c);const u=t-(c-o),l=this;u<=0||u>t?(r&&(function(){Me("clearTimeout")(...arguments)}(r),r=null),o=c,e.apply(l,s)):r||!1===n.trailing||(r=Ae((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(l,s)}),u))}}function de(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Ae((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>de(e,t,i||{},!0)}function pe(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ue=new Proxy(ue,{get:(e,t,n)=>("map"===t&&console.error(ce),Reflect.get(e,t,n))}));let fe=Date.now;function he(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:se([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||se([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||se([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:se([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||se([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||se([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function ge(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function me(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ye(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function ve(e,t,n,r,o){if(!e)return!1;const i=ye(e);if(!i)return!1;const s=ne(t,n);if(!o){const e=r&&i.matches(r);return s(i)&&!e}const a=te(i,s);let c=-1;return!(a<0)&&(r&&(c=te(i,ne(null,r))),a>-1&&c<0||a<c)}function _e(e,t){return-2===t.getId(e)}function Se(e,t){if(E(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Se(e.parentNode,t))}function Ee(e){return Boolean(e.changedTouches)}function be(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Te(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function we(e){return Boolean(se([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(fe=()=>(new Date).getTime());class Ce{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return r(this.styleIDMap.get(e),(()=>-1))}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Re(e){let t=null;return se([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Oe(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||function(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Re(n);)n=t;return n}(e);return t.contains(n)}(e))}const Ie={};function Me(e){const t=Ie[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Ie[e]=r.bind(window)}function Ae(){return Me("setTimeout")(...arguments)}var ke=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(ke||{}),Pe=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Pe||{}),De=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(De||{}),Ne=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ne||{});function Le(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.call(t,...r)})),t=void 0)}return n}function xe(e){return"__ln"in e}class Ue{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Le([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&xe(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&xe(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Fe=(e,t)=>`${e}@${t}`;class Be{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Ue,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Oe(o))return;const i=E(o.parentNode)?this.mirror.getId(Re(o)):this.mirror.getId(o.parentNode),s=r(o);if(-1===i||-1===s)return n.addNode(o);const a=ie(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{be(e,this.mirror)&&!ve(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),Te(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),we(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{ve(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:i,nextId:s,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)We(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Ge(this.droppedSet,e)||We(this.removes,e,this.mirror)?Ge(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!_e(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;ve(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:re(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,ye(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=k(t),o=t.tagName;r=P(t,o,n);const i=R({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=O({isMasked:re(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:t,value:r,maskInputFn:this.maskInputFn})}if(ve(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!ee(t.tagName,n)&&(o.attributes[n]=Q(this.doc,I(t.tagName),I(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||i!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===i?r:[r,i]:o._unchangedStyles[e]=[r,i]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(ve(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=E(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);ve(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||_e(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(je(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Se(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Fe(n,r)]?je(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!E(e.target)||!b(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(_e(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Fe(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);ve(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),we(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function je(e,t){e.delete(t),t.childNodes.forEach((t=>je(e,t)))}function We(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some((e=>e.id===t)))return!0;r=r.parentNode}return!1}(e,t,n)}function Ge(e,t){return 0!==e.size&&He(e,t)}function He(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||He(e,n))}let ze;function Ve(e){ze=e}function qe(){ze=void 0}const $e=e=>ze?function(){try{return e(...arguments)}catch(e){if(ze&&!0===ze(e))return()=>{};throw e}}:e;function Ye(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.call(t,...r)})),t=void 0)}return n}const Ke=[];function Je(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Xe(e,t){const n=new Be;Ke.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Ye([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const i=new r($e((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Ze(e){let{scrollCb:t,doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,sampling:a}=e;return ae("scroll",$e(le($e((e=>{const a=Je(e);if(!a||ve(a,o,i,s,!0))return;const c=r.getId(a);if(a===n&&n.defaultView){const e=he(n.defaultView);t({id:c,x:e.left,y:e.top})}else t({id:c,x:a.scrollLeft,y:a.scrollTop})})),a.scroll||100)),n)}const Qe=["INPUT","TEXTAREA","SELECT"],et=new WeakMap;function tt(e){let{inputCb:t,doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,ignoreClass:a,ignoreSelector:c,maskInputOptions:u,maskInputFn:l,sampling:d,userTriggeredOnInput:p,maskTextClass:f,unmaskTextClass:h,maskTextSelector:g,unmaskTextSelector:m}=e;function y(e){let t=Je(e);const r=e.isTrusted,d=t&&M(t.tagName);if("OPTION"===d&&(t=t.parentElement),!t||!d||Qe.indexOf(d)<0||ve(t,o,i,s,!0))return;const y=t;if(y.classList.contains(a)||c&&y.matches(c))return;const _=k(t);let S=P(y,d,_),E=!1;const b=R({maskInputOptions:u,tagName:d,type:_}),T=re(t,f,g,h,m,b);"radio"!==_&&"checkbox"!==_||(E=t.checked),S=O({isMasked:T,element:t,value:S,maskInputFn:l}),v(t,p?{text:S,isChecked:E,userTriggered:r}:{text:S,isChecked:E});const w=t.name;"radio"===_&&w&&E&&n.querySelectorAll(`input[type="radio"][name="${w}"]`).forEach((e=>{if(e!==t){const t=O({isMasked:T,element:e,value:P(e,d,_),maskInputFn:l});v(e,p?{text:t,isChecked:!E,userTriggered:!1}:{text:t,isChecked:!E})}}))}function v(e,n){const o=et.get(e);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){et.set(e,n);const o=r.getId(e);$e(t)({...n,id:o})}}const _=("last"===d.input?["change"]:["input","change"]).map((e=>ae(e,$e(y),n))),S=n.defaultView;if(!S)return()=>{_.forEach((e=>e()))};const E=S.Object.getOwnPropertyDescriptor(S.HTMLInputElement.prototype,"value"),b=[[S.HTMLInputElement.prototype,"value"],[S.HTMLInputElement.prototype,"checked"],[S.HTMLSelectElement.prototype,"value"],[S.HTMLTextAreaElement.prototype,"value"],[S.HTMLSelectElement.prototype,"selectedIndex"],[S.HTMLOptionElement.prototype,"selected"]];return E&&E.set&&_.push(...b.map((e=>de(e[0],e[1],{set(){$e(y)({target:this,isTrusted:!1})}},!1,S)))),$e((()=>{_.forEach((e=>e()))}))}function nt(e){return function(e,t){if(st("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||st("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||st("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||st("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function rt(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function ot(e,t){let{mirror:n,stylesheetManager:r}=e,o=null;o="#document"===t.nodeName?n.getId(t):n.getId(t.host);const i="#document"===t.nodeName?Ye([t,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Ye([t,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),s=Ye([i,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Ye([i,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==o&&-1!==o&&i&&s?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return Ye([s,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const t=Ye([s,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==o&&-1!==o)try{r.adoptStyleSheets(e,o)}catch(e){}return t}}),$e((()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function it(e){const t=e.doc.defaultView;if(!t)return()=>{};let n;e.recordDOM&&(n=Xe(e,e.doc));const r=function(e){let{mousemoveCb:t,sampling:n,doc:r,mirror:o}=e;if(!1===n.mousemove)return()=>{};const i="number"==typeof n.mousemove?n.mousemove:50,s="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500;let a,c=[];const u=le($e((e=>{const n=Date.now()-a;t(c.map((e=>(e.timeOffset-=n,e))),e),c=[],a=null})),s),l=$e(le($e((e=>{const t=Je(e),{clientX:n,clientY:r}=Ee(e)?e.changedTouches[0]:e;a||(a=fe()),c.push({x:n,y:r,id:o.getId(t),timeOffset:fe()-a}),u("undefined"!=typeof DragEvent&&e instanceof DragEvent?Pe.Drag:e instanceof MouseEvent?Pe.MouseMove:Pe.TouchMove)})),i,{trailing:!1})),d=[ae("mousemove",l,r),ae("touchmove",l,r),ae("drag",l,r)];return $e((()=>{d.forEach((e=>e()))}))}(e),o=function(e){let{mouseInteractionCb:t,doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,sampling:a}=e;if(!1===a.mouseInteraction)return()=>{};const c=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,u=[];let l=null;return Object.keys(De).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==c[e])).forEach((e=>{let a=I(e);const c=(e=>n=>{const a=Je(n);if(ve(a,o,i,s,!0))return;let c=null,u=e;if("pointerType"in n){switch(n.pointerType){case"mouse":c=Ne.Mouse;break;case"touch":c=Ne.Touch;break;case"pen":c=Ne.Pen}c===Ne.Touch?De[e]===De.MouseDown?u="TouchStart":De[e]===De.MouseUp&&(u="TouchEnd"):Ne.Pen}else Ee(n)&&(c=Ne.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===Ne.Touch||u.startsWith("Mouse")&&c===Ne.Mouse)&&(c=null)):De[e]===De.Click&&(c=l,l=null);const d=Ee(n)?n.changedTouches[0]:n;if(!d)return;const p=r.getId(a),{clientX:f,clientY:h}=d;$e(t)({type:De[u],id:p,x:f,y:h,...null!==c&&{pointerType:c}})})(e);if(window.PointerEvent)switch(De[e]){case De.MouseDown:case De.MouseUp:a=a.replace("mouse","pointer");break;case De.TouchStart:case De.TouchEnd:return}u.push(ae(a,c,n))})),$e((()=>{u.forEach((e=>e()))}))}(e),i=Ze(e),s=function(e,t){let{viewportResizeCb:n}=e,{win:r}=t,o=-1,i=-1;return ae("resize",$e(le($e((()=>{const e=ge(),t=me();o===e&&i===t||(n({width:Number(t),height:Number(e)}),o=e,i=t)})),200)),r)}(e,{win:t}),a=tt(e),c=function(e){let{mediaInteractionCb:t,blockClass:n,blockSelector:r,unblockSelector:o,mirror:i,sampling:s,doc:a}=e;const c=$e((e=>le($e((s=>{const a=Je(s);if(!a||ve(a,n,r,o,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;t({type:e,id:i.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),s.media||500))),u=[ae("play",c(0),a),ae("pause",c(1),a),ae("seeked",c(2),a),ae("volumechange",c(3),a),ae("ratechange",c(4),a)];return $e((()=>{u.forEach((e=>e()))}))}(e);let u=()=>{},l=()=>{},d=()=>{},p=()=>{};e.recordDOM&&(u=function(e,t){let{styleSheetRuleCb:n,mirror:r,stylesheetManager:o}=e,{win:i}=t;if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};const s=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:$e(((e,t,i)=>{const[s,a]=i,{id:c,styleId:u}=rt(t,r,o.styleMirror);return(c&&-1!==c||u&&-1!==u)&&n({id:c,styleId:u,adds:[{rule:s,index:a}]}),e.apply(t,i)}))});const a=i.CSSStyleSheet.prototype.deleteRule;let c,u;i.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:$e(((e,t,i)=>{const[s]=i,{id:a,styleId:c}=rt(t,r,o.styleMirror);return(a&&-1!==a||c&&-1!==c)&&n({id:a,styleId:c,removes:[{index:s}]}),e.apply(t,i)}))}),i.CSSStyleSheet.prototype.replace&&(c=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(c,{apply:$e(((e,t,i)=>{const[s]=i,{id:a,styleId:c}=rt(t,r,o.styleMirror);return(a&&-1!==a||c&&-1!==c)&&n({id:a,styleId:c,replace:s}),e.apply(t,i)}))})),i.CSSStyleSheet.prototype.replaceSync&&(u=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(u,{apply:$e(((e,t,i)=>{const[s]=i,{id:a,styleId:c}=rt(t,r,o.styleMirror);return(a&&-1!==a||c&&-1!==c)&&n({id:a,styleId:c,replaceSync:s}),e.apply(t,i)}))}));const l={};at("CSSGroupingRule")?l.CSSGroupingRule=i.CSSGroupingRule:(at("CSSMediaRule")&&(l.CSSMediaRule=i.CSSMediaRule),at("CSSConditionRule")&&(l.CSSConditionRule=i.CSSConditionRule),at("CSSSupportsRule")&&(l.CSSSupportsRule=i.CSSSupportsRule));const d={};return Object.entries(l).forEach((e=>{let[t,i]=e;d[t]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(d[t].insertRule,{apply:$e(((e,t,i)=>{const[s,a]=i,{id:c,styleId:u}=rt(t.parentStyleSheet,r,o.styleMirror);return(c&&-1!==c||u&&-1!==u)&&n({id:c,styleId:u,adds:[{rule:s,index:[...nt(t),a||0]}]}),e.apply(t,i)}))}),i.prototype.deleteRule=new Proxy(d[t].deleteRule,{apply:$e(((e,t,i)=>{const[s]=i,{id:a,styleId:c}=rt(t.parentStyleSheet,r,o.styleMirror);return(a&&-1!==a||c&&-1!==c)&&n({id:a,styleId:c,removes:[{index:[...nt(t),s]}]}),e.apply(t,i)}))})})),$e((()=>{i.CSSStyleSheet.prototype.insertRule=s,i.CSSStyleSheet.prototype.deleteRule=a,c&&(i.CSSStyleSheet.prototype.replace=c),u&&(i.CSSStyleSheet.prototype.replaceSync=u),Object.entries(l).forEach((e=>{let[t,n]=e;n.prototype.insertRule=d[t].insertRule,n.prototype.deleteRule=d[t].deleteRule}))}))}(e,{win:t}),l=ot(e,e.doc),d=function(e,t){let{styleDeclarationCb:n,mirror:r,ignoreCSSAttributes:o,stylesheetManager:i}=e,{win:s}=t;const a=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:$e(((e,t,s)=>{const[c,u,l]=s;if(o.has(c))return a.apply(t,[c,u,l]);const{id:d,styleId:p}=rt(Ye([t,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),r,i.styleMirror);return(d&&-1!==d||p&&-1!==p)&&n({id:d,styleId:p,set:{property:c,value:u,priority:l},index:nt(t.parentRule)}),e.apply(t,s)}))});const c=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(c,{apply:$e(((e,t,s)=>{const[a]=s;if(o.has(a))return c.apply(t,[a]);const{id:u,styleId:l}=rt(Ye([t,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),r,i.styleMirror);return(u&&-1!==u||l&&-1!==l)&&n({id:u,styleId:l,remove:{property:a},index:nt(t.parentRule)}),e.apply(t,s)}))}),$e((()=>{s.CSSStyleDeclaration.prototype.setProperty=a,s.CSSStyleDeclaration.prototype.removeProperty=c}))}(e,{win:t}),e.collectFonts&&(p=function(e){let{fontCb:t,doc:n}=e;const r=n.defaultView;if(!r)return()=>{};const o=[],i=new WeakMap,s=r.FontFace;r.FontFace=function(e,t,n){const r=new s(e,t,n);return i.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=pe(n.fonts,"add",(function(e){return function(n){return Ae($e((()=>{const e=i.get(n);e&&(t(e),i.delete(n))})),0),e.apply(this,[n])}}));return o.push((()=>{r.FontFace=s})),o.push(a),$e((()=>{o.forEach((e=>e()))}))}(e)));const f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e;let a=!0;const c=$e((()=>{const e=t.getSelection();if(!e||a&&Ye([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=s;ve(a,r,o,i,!0)||ve(l,r,o,i,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}s({ranges:c})}));return c(),ae("selectionchange",c)}(e),h=function(e){let{doc:t,customElementCb:n}=e;const r=t.defaultView;return r&&r.customElements?pe(r.customElements,"define",(function(e){return function(t,r,o){try{n({define:{name:t}})}catch(e){}return e.apply(this,[t,r,o])}})):()=>{}}(e),g=[];for(const n of e.plugins)g.push(n.observer(n.callback,t,n.options));return $e((()=>{Ke.forEach((e=>e.reset())),Ye([n,"optionalAccess",e=>e.disconnect,"call",e=>e()]),r(),o(),i(),s(),a(),c(),u(),l(),d(),p(),f(),h(),g.forEach((e=>e()))}))}function st(e){return void 0!==window[e]}function at(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ct{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let s=o.get(t);return s||(s=this.generateIdFn(),o.set(t,s),i.set(s,t)),s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;return r.get(t)||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function ut(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.call(t,...r)})),t=void 0)}return n}class lt{constructor(){this.crossOriginIframeMirror=new ct(j),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class dt{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ct(j),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ct(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),ut([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case ke.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:ke.IncrementalSnapshot,data:{source:Pe.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case ke.Meta:case ke.Load:case ke.DomContentLoaded:return!1;case ke.Plugin:return t;case ke.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case ke.IncrementalSnapshot:switch(t.data.source){case Pe.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Pe.Drag:case Pe.TouchMove:case Pe.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Pe.ViewportResize:return!1;case Pe.MediaInteraction:case Pe.MouseInteraction:case Pe.Scroll:case Pe.CanvasMutation:case Pe.Input:return this.replaceIds(t.data,e,["id"]),t;case Pe.StyleSheetRule:case Pe.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Pe.Font:return t;case Pe.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Pe.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),ut([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===S.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class pt{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class ft{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!b(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=Xe({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ze({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Ae((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(ot({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(pe(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Oe(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class ht{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class gt{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ce,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:w(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class mt{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,function(){Me("requestAnimationFrame")(...arguments)}((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let yt,vt;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=o([e,"access",e=>e.contentWindow,"optionalAccess",e=>e.Array,"access",e=>e.from])||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const _t=new C;function St(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:a=null,ignoreClass:c="rr-ignore",ignoreSelector:u=null,maskAllText:l=!1,maskTextClass:d="rr-mask",unmaskTextClass:p=null,maskTextSelector:f=null,unmaskTextSelector:h=null,inlineStylesheet:g=!0,maskAllInputs:m,maskInputOptions:y,slimDOMOptions:v,maskAttributeFn:_,maskInputFn:S,maskTextFn:E,maxCanvasSize:b=null,packFn:T,sampling:w={},dataURLOptions:R={},mousemoveWait:O,recordDOM:I=!0,recordCanvas:M=!1,recordCrossOriginIframes:A=!1,recordAfter:k=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:P=!1,collectFonts:D=!1,inlineImages:N=!1,plugins:L,keepIframeSrcFn:x=()=>!1,ignoreCSSAttributes:U=new Set([]),errorHandler:F,onMutation:B,getCanvasManager:j}=e;Ve(F);const W=!A||window.parent===window;let G=!1;if(!W)try{window.parent.document&&(G=!1)}catch(e){G=!0}if(W&&!t)throw new Error("emit function is required");if(!W&&!G)return()=>{};void 0!==O&&void 0===w.mousemove&&(w.mousemove=O),_t.reset();const H=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==y?y:{},z=!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===v,headMetaDescKeywords:"all"===v}:v||{};let V;!function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do{if(e===o)return!0}while(o=o&&o.parentNode);return!1})}();let q=0;const $=e=>{for(const t of L||[])t.eventProcessor&&(e=t.eventProcessor(e));return T&&!G&&(e=T(e)),e};yt=(e,i)=>{const s=e;if(s.timestamp=fe(),!o([Ke,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===ke.FullSnapshot||s.type===ke.IncrementalSnapshot&&s.data.source===Pe.Mutation||Ke.forEach((e=>e.unfreeze())),W)o([t,"optionalCall",e=>e($(s),i)]);else if(G){const e={type:"rrweb",event:$(s),origin:window.location.origin,isCheckout:i};window.parent.postMessage(e,"*")}if(s.type===ke.FullSnapshot)V=s,q=0;else if(s.type===ke.IncrementalSnapshot){if(s.data.source===Pe.Mutation&&s.data.isAttachIframe)return;q++;const e=r&&q>=r,t=n&&V&&s.timestamp-V.timestamp>n;(e||t)&&ne(!0)}};const Y=e=>{yt({type:ke.IncrementalSnapshot,data:{source:Pe.Mutation,...e}})},K=e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.Scroll,...e}}),J=e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.CanvasMutation,...e}}),X=new gt({mutationCb:Y,adoptedStyleSheetCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.AdoptedStyleSheet,...e}})}),Z="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new lt:new dt({mirror:_t,mutationCb:Y,stylesheetManager:X,recordCrossOriginIframes:A,wrappedEmit:yt});for(const e of L||[])e.getMirror&&e.getMirror({nodeMirror:_t,crossOriginIframeMirror:Z.crossOriginIframeMirror,crossOriginIframeStyleMirror:Z.crossOriginIframeStyleMirror});const Q=new mt,ee=function(e,t){try{return e?e(t):new ht}catch(e){return console.warn("Unable to initialize CanvasManager"),new ht}}(j,{mirror:_t,win:window,mutationCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.CanvasMutation,...e}}),recordCanvas:M,blockClass:i,blockSelector:s,unblockSelector:a,maxCanvasSize:b,sampling:w.canvas,dataURLOptions:R,errorHandler:F}),te="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new pt:new ft({mutationCb:Y,scrollCb:K,bypassOptions:{onMutation:B,blockClass:i,blockSelector:s,unblockSelector:a,maskAllText:l,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:g,maskInputOptions:H,dataURLOptions:R,maskAttributeFn:_,maskTextFn:E,maskInputFn:S,recordCanvas:M,inlineImages:N,sampling:w,slimDOMOptions:z,iframeManager:Z,stylesheetManager:X,canvasManager:ee,keepIframeSrcFn:x,processedNodeManager:Q},mirror:_t}),ne=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!I)return;yt({type:ke.Meta,data:{href:window.location.href,width:me(),height:ge()}},e),X.reset(),te.init(),Ke.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new C,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:h=!1,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOM:v=!1,dataURLOptions:_,preserveWhiteSpace:S,onSerialize:E,onIframeLoad:b,iframeLoadTimeout:T,onStylesheetLoad:w,stylesheetLoadTimeout:R,keepIframeSrcFn:O=()=>!1}=t||{};return ie(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:_,inlineImages:p,recordCanvas:f,preserveWhiteSpace:S,onSerialize:E,onIframeLoad:b,iframeLoadTimeout:T,onStylesheetLoad:w,stylesheetLoadTimeout:R,keepIframeSrcFn:O,newlyAddedElement:!1})}(document,{mirror:_t,blockClass:i,blockSelector:s,unblockSelector:a,maskAllText:l,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:g,maskAllInputs:H,maskAttributeFn:_,maskInputFn:S,maskTextFn:E,slimDOM:z,dataURLOptions:R,recordCanvas:M,inlineImages:N,onSerialize:e=>{be(e,_t)&&Z.addIframe(e),Te(e,_t)&&X.trackLinkElement(e),we(e)&&te.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Z.attachIframe(e,t),e.contentWindow&&ee.addWindow(e.contentWindow),te.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{X.attachLinkElement(e,t)},keepIframeSrcFn:x});if(!t)return console.warn("Failed to snapshot the document");yt({type:ke.FullSnapshot,data:{node:t,initialOffset:he(window)}}),Ke.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,_t.getId(document))};vt=ne;try{const e=[],t=e=>$e(it)({onMutation:B,mutationCb:Y,mousemoveCb:(e,t)=>yt({type:ke.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.MouseInteraction,...e}}),scrollCb:K,viewportResizeCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.ViewportResize,...e}}),inputCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.Input,...e}}),mediaInteractionCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.MediaInteraction,...e}}),styleSheetRuleCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.StyleSheetRule,...e}}),styleDeclarationCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>yt({type:ke.IncrementalSnapshot,data:{source:Pe.Font,...e}}),selectionCb:e=>{yt({type:ke.IncrementalSnapshot,data:{source:Pe.Selection,...e}})},customElementCb:e=>{yt({type:ke.IncrementalSnapshot,data:{source:Pe.CustomElement,...e}})},blockClass:i,ignoreClass:c,ignoreSelector:u,maskAllText:l,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:h,maskInputOptions:H,inlineStylesheet:g,sampling:w,recordDOM:I,recordCanvas:M,inlineImages:N,userTriggeredOnInput:P,collectFonts:D,doc:e,maskAttributeFn:_,maskInputFn:S,maskTextFn:E,keepIframeSrcFn:x,blockSelector:s,unblockSelector:a,slimDOMOptions:z,dataURLOptions:R,mirror:_t,iframeManager:Z,stylesheetManager:X,shadowDomManager:te,processedNodeManager:Q,canvasManager:ee,ignoreCSSAttributes:U,plugins:o([L,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>yt({type:ke.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});Z.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{ne(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(ae("DOMContentLoaded",(()=>{yt({type:ke.DomContentLoaded,data:{}}),"DOMContentLoaded"===k&&n()}))),e.push(ae("load",(()=>{yt({type:ke.Load,data:{}}),"load"===k&&n()}),window))),()=>{e.forEach((e=>e())),Q.destroy(),vt=void 0,qe()}}catch(e){console.warn(e)}}St.mirror=_t,St.takeFullSnapshot=function(e){if(!vt)throw new Error("please take full snapshot after start recording");vt(e)};const Et="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,bt=["info","warn","error","log"],Tt="[Replay] ";function wt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";i.addBreadcrumb({category:"console",data:{logger:"replay"},level:t,message:`${Tt}${e}`},{level:t})}const Ct=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=n.captureExceptions,t=n.traceInternals}};return Et?(bt.forEach((e=>{n[e]=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];s.logger[e](Tt,...r),t&&wt(r.join(""),s.severityLevelFromString(e))}})),n.exception=function(r){for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];a.length&&n.error&&n.error(...a),s.logger.error(Tt,r),e?i.captureException(r):t&&wt(r,"error")},n.infoTick=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];s.logger.info(Tt,...n),t&&setTimeout((()=>wt(n[0])),0)}):bt.forEach((e=>{n[e]=()=>{}})),n}();function Rt(e){return e>9999999999?e:1e3*e}function Ot(e){return e>9999999999?e/1e3:e}function It(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:ke.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:s.normalize(t,10,1e3)}}),"console"===t.category))))}function Mt(e){return e.closest("button,a")||e}function At(e){const t=kt(e);return t&&t instanceof Element?Mt(t):t}function kt(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Pt;const Dt=new Set([Pe.Mutation,Pe.StyleSheetRule,Pe.StyleDeclaration,Pe.AdoptedStyleSheet,Pe.CanvasMutation,Pe.Selection,Pe.MediaInteraction]);class Nt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:It;this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=(t=()=>{this._lastMutation=xt()},Pt||(Pt=[],s.fill(c,"open",(function(e){return function(){if(Pt)try{Pt.forEach((e=>e()))}catch(e){}for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(c,n)}}))),Pt.push(t),()=>{const e=Pt?Pt.indexOf(t):-1;e>-1&&Pt.splice(e,1)});var t;this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){return!Lt.includes(e.tagName)||("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||"")||(!("A"!==e.tagName||!(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))||!(!t||!e.matches(t))))}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Ot(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastMutation=Ot(e)}registerScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastScroll=Ot(e)}registerClick(e){const t=Mt(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=xt();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:i,clickBreadcrumb:s}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:c.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1}};this._addBreadcrumbEvent(t,o)}else if(i>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:c.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=a.setTimeout((()=>this._checkClicks()),1e3)}}const Lt=["A","BUTTON","INPUT"];function xt(){return Date.now()/1e3}function Ut(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Ft;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Ft||(Ft={}));const Bt=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function jt(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(Bt.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}function Wt(e,t){const n=St.mirror.getId(e),r=n&&St.mirror.getNode(n),o=r&&St.mirror.getMeta(r),i=o&&function(e){return e.type===Ft.Element}(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map((e=>e.type===Ft.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:jt(i.attributes)}}:{}}}const Gt={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Vt(i),end:Vt(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,i=Vt(o);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:f,transferSize:h,type:g}=e;return 0===o?null:{type:`${t}.${g}`,start:Vt(f),end:Vt(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:p}}}};function Ht(e,t){return n=>{let{metric:r}=n;t.replayPerformanceEntries.push(e(r))}}function zt(e){const t=Gt[e.entryType];return t?t(e):null}function Vt(e){return((s.browserPerformanceTimeOrigin||c.performance.timeOrigin)+e)/1e3}function qt(e){const t=e.entries[e.entries.length-1];return Xt(e,"largest-contentful-paint",t&&t.element?[t.element]:void 0)}function $t(e){return void 0!==e.sources}function Yt(e){const t=[],n=[];for(const r of e.entries)if($t(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=St.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return Xt(e,"cumulative-layout-shift",n,t)}function Kt(e){const t=e.entries[e.entries.length-1];return Xt(e,"first-input-delay",t&&t.target?[t.target]:void 0)}function Jt(e){const t=e.entries[e.entries.length-1];return Xt(e,"interaction-to-next-paint",t&&t.target?[t.target]:void 0)}function Xt(e,t,n,r){const o=e.value,i=e.rating,s=Vt(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map((e=>St.mirror.getId(e))):void 0,attributions:r}}}class Zt extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Qt{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>g)throw new Zt;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Rt(e):null}}class en{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(n=>{let{data:r}=n;r.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Et&&Ct.info("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const i=t=>{let{data:s}=t;const a=s;if(a.method===e&&a.id===n){if(this._worker.removeEventListener("message",i),!a.success)return Et&&Ct.error("Error in compression worker: ",a.response),void o(new Error("Error in compression worker"));r(a.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class tn{constructor(e){this._worker=new en(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Rt(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>g?Promise.reject(new Zt):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Et&&Ct.exception(e,'Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class nn{constructor(e){this._fallback=new Qt,this._compression=new tn(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(Et&&Ct.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n),this._fallback.clear()}catch(e){Et&&Ct.exception(e,"Failed to add events when switching buffers.")}}}function rn(){try{return"sessionStorage"in c&&!!c.sessionStorage}catch(e){return!1}}function on(e){return void 0!==e&&Math.random()<e}function sn(e){const t=Date.now();return{id:e.id||s.uuid4(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function an(e){if(rn())try{c.sessionStorage.setItem(u,JSON.stringify(e))}catch(e){}}function cn(e){let{sessionSampleRate:t,allowBuffering:n,stickySession:r=!1}=e,{previousSessionId:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=function(e,t){return on(e)?"session":!!t&&"buffer"}(t,n),s=sn({sampled:i,previousSessionId:o});return r&&an(s),s}function un(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:+new Date;return null===e||void 0===t||t<0||0!==t&&e+t<=n}function ln(e,t){let{maxReplayDuration:n,sessionIdleExpire:r,targetTime:o=Date.now()}=t;return un(e.started,n,o)||un(e.lastActivity,r,o)}function dn(e,t){let{sessionIdleExpire:n,maxReplayDuration:r}=t;return!!ln(e,{sessionIdleExpire:n,maxReplayDuration:r})&&("buffer"!==e.sampled||0!==e.segmentId)}function pn(e,t){let{sessionIdleExpire:n,maxReplayDuration:r,previousSessionId:o}=e;const i=t.stickySession&&function(){if(!rn())return null;try{const e=c.sessionStorage.getItem(u);if(!e)return null;const t=JSON.parse(e);return Et&&Ct.infoTick("Loading existing session"),sn(t)}catch(e){return null}}();return i?dn(i,{sessionIdleExpire:n,maxReplayDuration:r})?(Et&&Ct.infoTick("Session in sessionStorage is expired, creating new one..."),cn(t,{previousSessionId:i.id})):i:(Et&&Ct.infoTick("Creating new session"),cn(t,{previousSessionId:o}))}function fn(e,t,n){return!!gn(e,t)&&(hn(e,t,n),!0)}async function hn(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===ke.Custom}(e))return t(e)}catch(e){return Et&&Ct.exception(e,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Zt?"addEventSizeExceeded":"addEvent";e.handleException(t),await e.stop({reason:n});const r=i.getClient();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function gn(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Rt(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now()||n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration&&(Et&&Ct.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),1))}function mn(e){return!e.type}function yn(e){return"transaction"===e.type}function vn(e){return"feedback"===e.type}function _n(e){return!!e.category}function Sn(e,t){return t.map((t=>{let{type:n,start:r,end:o,name:i,data:s}=t;const a=e.throttledAddEvent({type:ke.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return"string"==typeof a?Promise.resolve(null):a}))}function En(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Et||!e.getOptions()._experiments.traceInternals)&&i.isSentryRequestUrl(t,i.getClient())}(e,t.name)||e.addUpdate((()=>(Sn(e,[t]),!0))))}function bn(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=An(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Tn(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function wn(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[An(e)];if(!e)return[void 0]}catch(t){return Et&&Ct.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Et&&Ct.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Cn(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Rn(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:a,request:c,response:u}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:s.dropUndefinedKeys({method:i,statusCode:a,request:c,response:u})}}function On(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function In(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>f,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,f);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,i&&i.length>0&&(r._meta={warnings:i}),r}function Mn(e,t){return Object.entries(e).reduce(((n,r)=>{let[o,i]=r;const s=o.toLowerCase();return t.includes(s)&&e[o]&&(n[s]=i),n}),{})}function An(e){return new URLSearchParams(e).toString()}function kn(e,t){const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.document.baseURI;if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(c.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}(e);return s.stringMatchesSomePattern(n,t)}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(2===e.length&&"object"==typeof e[1])return e[1].body}function Dn(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Nn(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Dn(n,t):Array.isArray(n)?{}:Mn(n,t):{}}function Ln(e){const t=i.getClient();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),c={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(t.data)try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(function(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=bn(r),i=n.getResponseHeader("content-length")?Tn(n.getResponseHeader("content-length")):function(e,t){try{return bn("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch(e){return}}(n.response,n.responseType);void 0!==o&&(e.data.request_body_size=o),void 0!==i&&(e.data.response_body_size=i)}(t,n),async function(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:c}=t,{url:u,method:l,status_code:d=0,request_body_size:p,response_body_size:f}=e.data;if(!u)return null;if(!c||!kn(u,n.networkDetailAllowUrls)||kn(u,n.networkDetailDenyUrls))return{startTimestamp:o,endTimestamp:i,url:u,method:l,statusCode:d,request:On(p),response:On(f)};const h=c[a.SENTRY_XHR_DATA_KEY],g=h?Mn(h.request_headers,n.networkRequestHeaders):{},m=Mn(function(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e}),{}):{}}(c),n.networkResponseHeaders),[y,v]=n.networkCaptureBodies?wn(s):[void 0],[_,S]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Et&&Ct.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Et&&Ct.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Et&&Ct.warn("Failed to get xhr response body",...t),[void 0]}(c):[void 0],E=In(g,p,y),b=In(m,f,_);return{startTimestamp:o,endTimestamp:i,url:u,method:l,statusCode:d,request:v?Cn(E,v):E,response:S?Cn(b,S):b}}(e,t,n),o=Rn("resource.xhr",r);En(n.replay,o)}catch(e){Et&&Ct.exception(e,"Failed to capture xhr breadcrumb")}}(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(function(e,t){const{input:n,response:r}=t,o=bn(n?Pn(n):void 0),i=r?Tn(r.headers.get("content-length")):void 0;void 0!==o&&(e.data.request_body_size=o),void 0!==i&&(e.data.response_body_size=i)}(t,n),async function(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:c,status_code:u=0,request_body_size:l,response_body_size:d}=e.data,p=kn(s,n.networkDetailAllowUrls)&&!kn(s,n.networkDetailDenyUrls),f=p?function(e,t,n){let{networkCaptureBodies:r,networkRequestHeaders:o}=e;const i=t?(a=o,1===(s=t).length&&"string"!=typeof s[0]?Nn(s[0],a):2===s.length?Nn(s[1],a):{}):{};var s,a;if(!r)return In(i,n,void 0);const c=Pn(t),[u,l]=wn(c),d=In(i,n,u);return l?Cn(d,l):d}(n,t.input,l):On(l),h=await async function(e,t,n,r){let{networkCaptureBodies:o,networkResponseHeaders:i}=t;if(!e&&void 0!==r)return On(r);const s=n?Dn(n.headers,i):{};if(!n||!o&&void 0!==r)return In(s,r,void 0);const[c,u]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Et&&Ct.exception(e,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=a.setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return e instanceof Error&&e.message.indexOf("Timeout")>-1?(Et&&Ct.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(Et&&Ct.exception(e,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(n),l=function(e,t){let{networkCaptureBodies:n,responseBodySize:r,captureDetails:o,headers:i}=t;try{const t=e&&e.length&&void 0===r?bn(e):r;return o?In(i,t,n?e:void 0):On(t)}catch(e){return Et&&Ct.exception(e,"Failed to serialize response body"),In(i,r,void 0)}}(c,{networkCaptureBodies:o,responseBodySize:r,captureDetails:e,headers:s});return u?Cn(l,u):l}(p,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:c,statusCode:u,request:f,response:h}}(e,t,n),o=Rn("resource.fetch",r);En(n.replay,o)}catch(e){Et&&Ct.exception(e,"Failed to capture fetch breadcrumb")}}(t,n,e))}catch(e){Et&&Ct.exception(e,"Error when enriching network breadcrumb")}}(c,e,t)))}catch(e){}}function xn(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Un(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Et&&Ct.warn("Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&function(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(Dt.has(n)&&e.registerMutation(t.timestamp),n===Pe.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Pe.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=St.mirror.getNode(r);o instanceof HTMLElement&&n===De.Click&&e.registerClick(o)}}catch(e){}}(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!fn(e,n,o))return!0;if(!o)return!1;const t=e.session;if(function(e,t){t&&e.session&&0===e.session.segmentId&&fn(e,function(e){const t=e.getOptions();return{type:ke.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),"buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();n&&(Et&&Ct.info(`Updating session start time to earliest event in buffer to ${new Date(n)}`),t.started=n,e.getOptions().stickySession&&an(t))}return t&&t.previousSessionId||"session"===e.recordingMode&&e.flush(),!0}))}}class Fn extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Bn extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{count:0,interval:5e3};const{recordingData:n,onError:r}=e;if(n.length)try{return await async function(e){let{recordingData:t,replayId:n,segmentId:r,eventContext:o,timestamp:a,session:c}=e;const u=function(e){let t,{recordingData:n,headers:r}=e;const o=`${JSON.stringify(r)}\n`;if("string"==typeof n)t=`${o}${n}`;else{const e=(new TextEncoder).encode(o);t=new Uint8Array(e.length+n.length),t.set(e),t.set(n,e.length)}return t}({recordingData:t,headers:{segment_id:r}}),{urls:d,errorIds:p,traceIds:f,initialTimestamp:h}=o,g=i.getClient(),m=i.getCurrentScope(),y=g&&g.getTransport(),v=g&&g.getDsn();if(!(g&&y&&v&&c.sampled))return s.resolvedSyncPromise({});const _={type:"replay_event",replay_start_timestamp:h/1e3,timestamp:a/1e3,error_ids:p,trace_ids:f,urls:d,replay_id:n,segment_id:r,replay_type:c.sampled},S=await async function(e){let{client:t,scope:n,replayId:r,event:o}=e;const s={event_id:r,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit("preprocessEvent",o,s);const a=await i.prepareEvent(t.getOptions(),o,s,n,t,i.getIsolationScope());if(!a)return null;a.platform=a.platform||"javascript";const c=t.getSdkMetadata(),{name:u,version:l}=c&&c.sdk||{};return a.sdk={...a.sdk,name:u||"sentry.javascript.unknown",version:l||"0.0.0"},a}({scope:m,client:g,replayId:n,event:_});if(!S)return g.recordDroppedEvent("event_processor","replay",_),Et&&Ct.info("An event processor returned `null`, will not send event."),s.resolvedSyncPromise({});delete S.sdkProcessingMetadata;const E=function(e,t,n,r){return s.createEnvelope(s.createEventEnvelopeHeaders(e,s.getSdkMetadataForEnvelopeHeader(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(S,u,v,g.getOptions().tunnel);let b;try{b=await y.send(E)}catch(e){const t=new Error(l);try{t.cause=e}catch(e){}throw t}if("number"==typeof b.statusCode&&(b.statusCode<200||b.statusCode>=300))throw new Fn(b.statusCode);const T=s.updateRateLimits({},b);if(s.isRateLimited(T,"replay"))throw new Bn(T);return b}(e),!0}catch(n){if(n instanceof Fn||n instanceof Bn)throw n;if(i.setContext("Replays",{_retryCount:t.count}),r&&r(n),t.count>=3){const e=new Error(`${l} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{a.setTimeout((async()=>{try{await jn(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Wn="__THROTTLED";class Gn{constructor(e){let{options:t,recordingOptions:n}=e;Gn.prototype.__init.call(this),Gn.prototype.__init2.call(this),Gn.prototype.__init3.call(this),Gn.prototype.__init4.call(this),Gn.prototype.__init5.call(this),Gn.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=function(e,t,n){let r,o,i;const s=n&&n.maxWait?Math.max(n.maxWait,t):0;function c(){return u(),r=e(),r}function u(){void 0!==o&&clearTimeout(o),void 0!==i&&clearTimeout(i),o=i=void 0}function l(){return o&&clearTimeout(o),o=a.setTimeout(c,t),s&&void 0===i&&(i=a.setTimeout(c,s)),r}return l.cancel=u,l.flush=function(){return void 0!==o||void 0!==i?c():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=function(e,t,n){const r=new Map;let o=!1;return function(){const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":Wn}o=!1;const s=r.get(i)||0;return r.set(i,s+1),e(...arguments)}}(((e,t)=>function(e,t,n){return gn(e,t)?hn(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(3e3,r),timeout:r,scrollTimeout:300,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new Nt(this,i)),Et){const e=t._experiments;Ct.setConfig({captureExceptions:!!e.captureExceptions,traceInternals:!!e.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){Et&&Ct.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r,r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Et&&Ct.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording()):Et&&Ct.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(Et&&Ct.info("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(Et&&Ct.info("Buffering is in progress, call `flush()` to save the replay"));Et&&Ct.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=pn({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(Et&&Ct.info("Buffering is in progress, call `flush()` to save the replay"));Et&&Ct.infoTick("Starting replay in buffer mode");const e=pn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=St({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Un(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop(){let{forceFlush:e=!1,reason:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._isEnabled){this._isEnabled=!1;try{Et&&Ct.info("Stopping Replay"+(t?` triggered by ${t}`:"")),function(){const e=i.getCurrentScope().getPropagationContext().dsc;e&&delete e.replay_id;const t=i.getActiveSpan();t&&delete i.getDynamicSamplingContextFromSpan(t).replay_id}(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,n=this,function(){if(rn())try{c.sessionStorage.removeItem(u)}catch(e){}}(),n.session=void 0}catch(e){this.handleException(e)}}var n}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Et&&Ct.info("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Et&&Ct.info("Resuming replay"))}async sendBufferedReplayOrFlush(){let{continueRecording:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Et&&Ct.info("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&un(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${c.location.pathname}${c.location.hash}${c.location.search}`,t=`${c.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Wn){const e=Ut({category:"replay.throttled"});this.addUpdate((()=>!fn(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastActiveSpan||i.getActiveSpan(),t=e&&i.getRootSpan(e),n=(t&&i.spanToJSON(t).data||{})[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(t&&n&&["route","custom"].includes(n))return i.spanToJSON(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function(e){let{useCompression:t,workerUrl:n}=e;if(t&&window.Worker){const e=function(e){try{const t=e||("undefined"!=typeof __SENTRY_EXCLUDE_REPLAY_WORKER__&&__SENTRY_EXCLUDE_REPLAY_WORKER__?"":function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}());if(!t)return;Et&&Ct.info("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new nn(n)}catch(e){Et&&Ct.exception(e,"Failed to create compression worker")}}(n);if(e)return e}return Et&&Ct.info("Using simple buffer"),new Qt}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=pn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!dn(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{c.document.addEventListener("visibilitychange",this._handleVisibilityChange),c.addEventListener("blur",this._handleWindowBlur),c.addEventListener("focus",this._handleWindowFocus),c.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(function(e){const t=i.getClient();a.addClickKeypressInstrumentationHandler((e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?At(e.event):kt(e.event),n=s.htmlTreeAsString(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return Ut({category:`ui.${e.name}`,...Wt(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var i,a,c;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(i=e.clickDetector,a=n,c=At(t.event),i.handleClick(a,c)),It(e,n)})(e)),a.addHistoryInstrumentationHandler(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Sn(e,[n]),!1))))}}(e)),function(e){const t=i.getClient();t&&t.on("beforeAddBreadcrumb",(t=>function(e,t){if(!e.isEnabled()||!_n(t))return;const n=function(e){return!_n(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:"console"===e.category?function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Ut(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>h?(n=!0,`${e.slice(0,h)}…`):e;if("object"==typeof e)try{const t=s.normalize(e,7);return JSON.stringify(t).length>h?(n=!0,`${JSON.stringify(t,null,2).slice(0,h)}…`):t}catch(e){}return e}));return Ut({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e):Ut(e)}(t);n&&It(e,n)}(e,t)))}(e),Ln(e);const n=function(e){return Object.assign(((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!mn(t)&&!yn(t)&&!vn(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(vn(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:ke.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions)return Et&&Ct.log("Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==l&&!(!t.exception||t.type)&&on(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),t}),{id:"Replay"})}(e);i.addEventProcessor(n),t&&(t.on("beforeSendEvent",function(e){return t=>{e.isEnabled()&&mn(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;"string"==typeof n&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&It(e,Ut({category:"replay.hydrate-error",data:{url:s.getLocationHref()}}))}(e,t)}}(e)),t.on("afterSendEvent",function(e){return(t,n)=>{if(!e.isEnabled()||!mn(t)&&!yn(t))return;const r=n&&n.statusCode;!r||r<200||r>=300||(yn(t)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),"buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();("function"!=typeof r||r(t))&&a.setTimeout((async()=>{try{await e.sendBufferedReplayOrFlush()}catch(t){e.handleException(t)}}))}(e,t))}}(e)),t.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),t.on("spanStart",(t=>{e.lastActiveSpan=t})),t.on("spanEnd",(t=>{e.lastActiveSpan=t})),t.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n(e){let{entries:n}=e;n.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(a.addPerformanceInstrumentationHandler(e,n))})),r.push(a.addLcpInstrumentationHandler(Ht(qt,e)),a.addClsInstrumentationHandler(Ht(Yt,e)),a.addFidInstrumentationHandler(Ht(Kt,e)),a.addInpInstrumentationHandler(Ht(Jt,e))),()=>{r.forEach((e=>e()))}}(this)}_removeListeners(){try{c.document.removeEventListener("visibilitychange",this._handleVisibilityChange),c.removeEventListener("blur",this._handleWindowBlur),c.removeEventListener("focus",this._handleWindowFocus),c.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===c.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Ut({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Ut({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{!function(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:a}=e;if(!a||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(a)||!i)return null;const c=t||r||o,u=1===i.length;if(!c&&u)return null;const l=s.htmlTreeAsString(a,{maxStringLength:200})||"<unknown>";return Ut({category:"ui.keyDown",message:l,data:{...Wt(a,l).data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}(t);n&&It(e,n)}(this,e)}}_doChangeToBackgroundTasks(e){this.session&&(ln(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush()))}_doChangeToForegroundTasks(e){this.session&&(this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Et&&Ct.info("Document has become active, but session has expired"))}_updateUserActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastActivity=e}_updateSessionActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:ke.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(zt).filter(Boolean)).concat(this.replayPerformanceEntries);var t;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter((e=>e.start>=t))}return Promise.all(Sn(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Sn(e,[xn(c.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await jn({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,timestamp:t,onError:e=>this.handleException(e)})}catch(e){this.handleException(e),this.stop({reason:"sendReplay"});const t=i.getClient();if(t){const n=e instanceof Bn?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else Et&&Ct.error("No session or eventBuffer found to flush.")}__init5(){var e=this;this._flush=async function(){let{force:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e._isEnabled&&!t)return;if(!e.checkAndHandleExpiredSession())return void(Et&&Ct.error("Attempting to finish replay event after session expired."));if(!e.session)return;const n=e.session.started,r=Date.now()-n;e._debouncedFlush.cancel();const o=r<e._options.minReplayDuration,i=r>e._options.maxReplayDuration+5e3;if(o||i)return Et&&Ct.info(`Session duration (${Math.floor(r/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),void(o&&e._debouncedFlush());const s=e.eventBuffer;s&&0===e.session.segmentId&&!s.hasCheckout&&Et&&Ct.info("Flushing initial segment without checkout.");const a=!!e._flushLock;e._flushLock||(e._flushLock=e._runFlush());try{await e._flushLock}catch(t){e.handleException(t)}finally{e._flushLock=void 0,a&&e._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&an(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=Ut({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Hn(e,t){return[...e,...t].join(",")}const zn='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Vn=["content-length","content-type","accept"];let qn=!1;class $n{static __initStatic(){this.id="Replay"}constructor(){let{flushMinDelay:e=d,flushMaxDelay:t=p,minReplayDuration:n=m,maxReplayDuration:r=y,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:l=!0,blockAllMedia:f=!0,mutationBreadcrumbLimit:h=750,mutationLimit:g=1e4,slowClickTimeout:v=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:S=[],networkDetailDenyUrls:E=[],networkCaptureBodies:b=!0,networkRequestHeaders:T=[],networkResponseHeaders:w=[],mask:C=[],maskAttributes:R=["title","placeholder"],unmask:O=[],block:I=[],unblock:M=[],ignore:A=[],maskFn:k,beforeAddRecordingEvent:P,beforeErrorSampling:D}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=$n.id;const N=function(e){let{mask:t,unmask:n,block:r,unblock:o,ignore:i}=e;return{maskTextSelector:Hn(t,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Hn(n,[]),blockSelector:Hn(r,[".sentry-block","[data-sentry-block]",'base[href="/"]']),unblockSelector:Hn(o,[]),ignoreSelector:Hn(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:C,unmask:O,block:I,unblock:M,ignore:A});if(this._recordingOptions={maskAllInputs:l,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:k,maskInputFn:k,maskAttributeFn:(e,t,n)=>function(e){let{el:t,key:n,maskAttributes:r,maskAllText:o,privacyOptions:i,value:s}=e;return o?i.unmaskTextSelector&&t.matches(i.unmaskTextSelector)?s:r.includes(n)||"value"===n&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:R,maskAllText:u,privacyOptions:N,key:e,value:t,el:n}),...N,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,y),stickySession:o,useCompression:i,workerUrl:a,blockAllMedia:f,maskAllInputs:l,maskAllText:u,mutationBreadcrumbLimit:h,mutationLimit:g,slowClickTimeout:v,slowClickIgnoreSelectors:_,networkDetailAllowUrls:S,networkDetailDenyUrls:E,networkCaptureBodies:b,networkRequestHeaders:Yn(T),networkResponseHeaders:Yn(w),beforeAddRecordingEvent:P,beforeErrorSampling:D,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${zn}`:zn),this._isInitialized&&s.isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return qn}set _isInitialized(e){qn=e}afterAllSetup(e){s.isBrowser()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...s.dropUndefinedKeys(e)},o=i.parseSampleRate(n.replaysSessionSampleRate),a=i.parseSampleRate(n.replaysOnErrorSampleRate);return null==o&&null==a&&s.consoleSandbox((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")})),null!=o&&(r.sessionSampleRate=o),null!=a&&(r.errorSampleRate=a),r}(this._initialOptions,e);this._replay=new Gn({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(e){}}}function Yn(e){return[...Vn,...e.map((e=>e.toLowerCase()))]}$n.__initStatic(),t.getReplay=function(){const e=i.getClient();return e&&e.getIntegrationByName("Replay")},t.replayIntegration=e=>new $n(e)},3353:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(5411),s=n(6534),a=n(696),c=n(8785);class u extends r.BaseClient{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e},n=a.WINDOW.SENTRY_SDK_SOURCE||o.getSDKSource();r.applySdkMetadata(t,"browser",["browser"],n),super(t),t.sendClientReports&&a.WINDOW.document&&a.WINDOW.document.addEventListener("visibilitychange",(()=>{"hidden"===a.WINDOW.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return s.eventFromException(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2?arguments[2]:void 0;return s.eventFromMessage(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(i.DEBUG_BUILD&&o.logger.warn("SDK not enabled, will not capture user feedback."));const t=c.createUserFeedbackEnvelope(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}t.BrowserClient=u},5411:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},6534:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674);function i(e,t){const n=a(e,t),r={type:l(t),value:d(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function s(e,t){return{exception:{values:[i(e,t)]}}}function a(e,t){const n=t.stacktrace||t.stack||"",r=function(e){return e&&c.test(e.message)?1:0}(t),o=function(e){return"number"==typeof e.framesToPop?e.framesToPop:0}(t);try{return e(n,r,o)}catch(e){}return[]}const c=/Minified React error #\d+;/i;function u(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function l(e){const t=e&&e.name;return!t&&u(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":t}function d(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:u(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}function p(e,t,n,c,u){let l;if(o.isErrorEvent(t)&&t.error)return s(e,t.error);if(o.isDOMError(t)||o.isDOMException(t)){const r=t;if("stack"in t)l=s(e,t);else{const t=r.name||(o.isDOMError(r)?"DOMError":"DOMException"),i=r.message?`${t}: ${r.message}`:t;l=f(e,i,n,c),o.addExceptionTypeValue(l,i)}return"code"in r&&(l.tags={...l.tags,"DOMException.code":`${r.code}`}),l}return o.isError(t)?s(e,t):o.isPlainObject(t)||o.isEvent(t)?(l=function(e,t,n,s){const c=r.getClient(),u=c&&c.getOptions().normalizeDepth,l=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}(t),d={__serialized__:o.normalizeToSize(t,u)};if(l)return{exception:{values:[i(e,l)]},extra:d};const p={exception:{values:[{type:o.isEvent(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:h(t,{isUnhandledRejection:s})}]},extra:d};if(n){const t=a(e,n);t.length&&(p.exception.values[0].stacktrace={frames:t})}return p}(e,t,n,u),o.addExceptionMechanism(l,{synthetic:!0}),l):(l=f(e,t,n,c),o.addExceptionTypeValue(l,`${t}`,void 0),o.addExceptionMechanism(l,{synthetic:!0}),l)}function f(e,t,n,r){const i={};if(r&&n){const r=a(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(o.isParameterizedString(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}function h(e,t){let{isUnhandledRejection:n}=t;const r=o.extractExceptionKeysForMessage(e),i=n?"promise rejection":"exception";return o.isErrorEvent(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:o.isEvent(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${r}`}t.eventFromException=function(e,t,n,r){const i=p(e,t,n&&n.syntheticException||void 0,r);return o.addExceptionMechanism(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),o.resolvedSyncPromise(i)},t.eventFromMessage=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const s=f(e,t,r&&r.syntheticException||void 0,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),o.resolvedSyncPromise(s)},t.eventFromUnknownInput=p,t.exceptionFromError=i,t.extractMessage=d,t.extractType=l},8420:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3302),o=n(79),i=r.buildFeedbackIntegration({lazyLoadIntegration:o.lazyLoadIntegration});t.feedbackAsyncIntegration=i},7549:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3302),o=n(79),i=r.buildFeedbackIntegration({lazyLoadIntegration:o.lazyLoadIntegration,getModalIntegration:()=>r.feedbackModalIntegration,getScreenshotIntegration:()=>r.feedbackScreenshotIntegration});t.feedbackSyncIntegration=i},696:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=o.GLOBAL_OBJ;let s=0;function a(){s++,setTimeout((()=>{s--}))}t.WINDOW=i,t.ignoreNextOnError=a,t.shouldIgnoreOnError=function(){return s>0},t.wrap=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return"function"==typeof e?e:t;if(o.getOriginalFunction(t))return t}catch(e){return t}const s=function(){const s=Array.prototype.slice.call(arguments);try{i&&"function"==typeof i&&i.apply(this,arguments);const r=s.map((t=>e(t,n)));return t.apply(this,r)}catch(e){throw a(),r.withScope((t=>{t.addEventProcessor((e=>(n.mechanism&&(o.addExceptionTypeValue(e,void 0,void 0),o.addExceptionMechanism(e,n.mechanism)),e.extra={...e.extra,arguments:s},e))),r.captureException(e)})),e}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])}catch(e){}o.markFunctionWrapped(s,t),o.addNonEnumerableProperty(t,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get:()=>t.name})}catch(e){}return s}},3069:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(696),i=n(3353),s=n(8432),a=n(244),c=n(6534),u=n(8785),l=n(3705),d=n(3683),p=n(2359),f=n(9318),h=n(5055),g=n(5198),m=n(79),y=n(2573),v=n(3042),_=n(9259),S=n(422),E=n(65),b=n(8420),T=n(7549),w=n(3302),C=n(184),R=n(49),O=n(5544),I=n(3063),M=n(4586);t.SDK_VERSION=r.SDK_VERSION,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=r.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=r.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=r.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.Scope=r.Scope,t.addBreadcrumb=r.addBreadcrumb,t.addEventProcessor=r.addEventProcessor,t.addIntegration=r.addIntegration,t.addTracingExtensions=r.addTracingExtensions,t.captureConsoleIntegration=r.captureConsoleIntegration,t.captureEvent=r.captureEvent,t.captureException=r.captureException,t.captureFeedback=r.captureFeedback,t.captureMessage=r.captureMessage,t.captureSession=r.captureSession,t.close=r.close,t.continueTrace=r.continueTrace,t.createTransport=r.createTransport,t.debugIntegration=r.debugIntegration,t.dedupeIntegration=r.dedupeIntegration,t.endSession=r.endSession,t.extraErrorDataIntegration=r.extraErrorDataIntegration,t.flush=r.flush,t.functionToStringIntegration=r.functionToStringIntegration,t.getActiveSpan=r.getActiveSpan,t.getClient=r.getClient,t.getCurrentHub=r.getCurrentHub,t.getCurrentScope=r.getCurrentScope,t.getGlobalScope=r.getGlobalScope,t.getIsolationScope=r.getIsolationScope,t.getRootSpan=r.getRootSpan,t.getSpanDescendants=r.getSpanDescendants,t.getSpanStatusFromHttpCode=r.getSpanStatusFromHttpCode,t.inboundFiltersIntegration=r.inboundFiltersIntegration,t.isInitialized=r.isInitialized,t.lastEventId=r.lastEventId,t.makeMultiplexedTransport=r.makeMultiplexedTransport,t.moduleMetadataIntegration=r.moduleMetadataIntegration,t.parameterize=r.parameterize,t.registerSpanErrorInstrumentation=r.registerSpanErrorInstrumentation,t.rewriteFramesIntegration=r.rewriteFramesIntegration,t.sessionTimingIntegration=r.sessionTimingIntegration,t.setContext=r.setContext,t.setCurrentClient=r.setCurrentClient,t.setExtra=r.setExtra,t.setExtras=r.setExtras,t.setHttpStatus=r.setHttpStatus,t.setMeasurement=r.setMeasurement,t.setTag=r.setTag,t.setTags=r.setTags,t.setUser=r.setUser,t.spanToBaggageHeader=r.spanToBaggageHeader,t.spanToJSON=r.spanToJSON,t.spanToTraceHeader=r.spanToTraceHeader,t.startInactiveSpan=r.startInactiveSpan,t.startNewTrace=r.startNewTrace,t.startSession=r.startSession,t.startSpan=r.startSpan,t.startSpanManual=r.startSpanManual,t.suppressTracing=r.suppressTracing,t.thirdPartyErrorFilterIntegration=r.thirdPartyErrorFilterIntegration,t.withActiveSpan=r.withActiveSpan,t.withIsolationScope=r.withIsolationScope,t.withScope=r.withScope,t.zodErrorsIntegration=r.zodErrorsIntegration,t.WINDOW=o.WINDOW,t.BrowserClient=i.BrowserClient,t.makeFetchTransport=s.makeFetchTransport,t.chromeStackLineParser=a.chromeStackLineParser,t.defaultStackLineParsers=a.defaultStackLineParsers,t.defaultStackParser=a.defaultStackParser,t.geckoStackLineParser=a.geckoStackLineParser,t.opera10StackLineParser=a.opera10StackLineParser,t.opera11StackLineParser=a.opera11StackLineParser,t.winjsStackLineParser=a.winjsStackLineParser,t.eventFromException=c.eventFromException,t.eventFromMessage=c.eventFromMessage,t.exceptionFromError=c.exceptionFromError,t.createUserFeedbackEnvelope=u.createUserFeedbackEnvelope,t.captureUserFeedback=l.captureUserFeedback,t.forceLoad=l.forceLoad,t.getDefaultIntegrations=l.getDefaultIntegrations,t.init=l.init,t.onLoad=l.onLoad,t.showReportDialog=l.showReportDialog,t.breadcrumbsIntegration=d.breadcrumbsIntegration,t.globalHandlersIntegration=p.globalHandlersIntegration,t.httpContextIntegration=f.httpContextIntegration,t.linkedErrorsIntegration=h.linkedErrorsIntegration,t.browserApiErrorsIntegration=g.browserApiErrorsIntegration,t.lazyLoadIntegration=m.lazyLoadIntegration,t.reportingObserverIntegration=y.reportingObserverIntegration,t.httpClientIntegration=v.httpClientIntegration,t.contextLinesIntegration=_.contextLinesIntegration,t.getReplay=S.getReplay,t.replayIntegration=S.replayIntegration,t.replayCanvasIntegration=E.replayCanvasIntegration,t.feedbackAsyncIntegration=b.feedbackAsyncIntegration,t.feedbackIntegration=T.feedbackSyncIntegration,t.feedbackSyncIntegration=T.feedbackSyncIntegration,t.getFeedback=w.getFeedback,t.sendFeedback=w.sendFeedback,t.metrics=C.metrics,t.defaultRequestInstrumentationOptions=R.defaultRequestInstrumentationOptions,t.instrumentOutgoingRequests=R.instrumentOutgoingRequests,t.browserTracingIntegration=O.browserTracingIntegration,t.startBrowserTracingNavigationSpan=O.startBrowserTracingNavigationSpan,t.startBrowserTracingPageLoadSpan=O.startBrowserTracingPageLoadSpan,t.makeBrowserOfflineTransport=I.makeBrowserOfflineTransport,t.browserProfilingIntegration=M.browserProfilingIntegration},3683:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3654),o=n(3022),i=n(674),s=n(5411),a=n(696),c=o.defineIntegration((function(){const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"Breadcrumbs",setup(t){e.console&&i.addConsoleInstrumentationHandler(function(e){return function(t){if(o.getClient()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:i.severityLevelFromString(t.level),message:i.safeJoin(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${i.safeJoin(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}o.addBreadcrumb(n,{input:t.args,level:t.level})}}(t)),e.dom&&r.addClickKeypressInstrumentationHandler(function(e,t){return function(n){if(o.getClient()!==e)return;let r,a,c="object"==typeof t?t.serializeAttribute:void 0,u="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;u&&u>1024&&(s.DEBUG_BUILD&&i.logger.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${u} was configured. Sentry will use 1024 instead.`),u=1024),"string"==typeof c&&(c=[c]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=i.htmlTreeAsString(t,{keyAttrs:c,maxStringLength:u}),a=i.getComponentName(t)}catch(e){r="<unknown>"}if(0===r.length)return;const l={category:`ui.${n.name}`,message:r};a&&(l.data={"ui.component_name":a}),o.addBreadcrumb(l,{event:n.event,name:n.name,global:n.global})}}(t,e.dom)),e.xhr&&r.addXhrInstrumentationHandler(function(e){return function(t){if(o.getClient()!==e)return;const{startTimestamp:n,endTimestamp:s}=t,a=t.xhr[r.SENTRY_XHR_DATA_KEY];if(!n||!s||!a)return;const{method:c,url:u,status_code:l,body:d}=a,p={method:c,url:u,status_code:l},f={xhr:t.xhr,input:d,startTimestamp:n,endTimestamp:s},h=i.getBreadcrumbLogLevelFromHttpStatusCode(l);o.addBreadcrumb({category:"xhr",data:p,type:"http",level:h},f)}}(t)),e.fetch&&i.addFetchInstrumentationHandler(function(e){return function(t){if(o.getClient()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){const e=t.fetchData,i={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r};o.addBreadcrumb({category:"fetch",data:e,level:"error",type:"http"},i)}else{const e=t.response,s={...t.fetchData,status_code:e&&e.status},a={input:t.args,response:e,startTimestamp:n,endTimestamp:r},c=i.getBreadcrumbLogLevelFromHttpStatusCode(s.status_code);o.addBreadcrumb({category:"fetch",data:s,type:"http",level:c},a)}}}(t)),e.history&&r.addHistoryInstrumentationHandler(function(e){return function(t){if(o.getClient()!==e)return;let n=t.from,r=t.to;const s=i.parseUrl(a.WINDOW.location.href);let c=n?i.parseUrl(n):void 0;const u=i.parseUrl(r);c&&c.path||(c=s),s.protocol===u.protocol&&s.host===u.host&&(r=u.relative),s.protocol===c.protocol&&s.host===c.host&&(n=c.relative),o.addBreadcrumb({category:"navigation",data:{from:n,to:r}})}}(t)),e.sentry&&t.on("beforeSendEvent",function(e){return function(t){o.getClient()===e&&o.addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:i.getEventDescription(t)},{event:t})}}(t))}}}));t.breadcrumbsIntegration=c},5198:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(696),s=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=r.defineIntegration((function(){const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&o.fill(i.WINDOW,"setTimeout",c),e.setInterval&&o.fill(i.WINDOW,"setInterval",c),e.requestAnimationFrame&&o.fill(i.WINDOW,"requestAnimationFrame",u),e.XMLHttpRequest&&"XMLHttpRequest"in i.WINDOW&&o.fill(XMLHttpRequest.prototype,"send",l);const t=e.eventTarget;t&&(Array.isArray(t)?t:s).forEach(d)}}}));function c(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const s=n[0];return n[0]=i.wrap(s,{mechanism:{data:{function:o.getFunctionName(e)},handled:!1,type:"instrument"}}),e.apply(this,n)}}function u(e){return function(t){return e.apply(this,[i.wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:o.getFunctionName(e)},handled:!1,type:"instrument"}})])}}function l(e){return function(){const t=this;["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in t&&"function"==typeof t[e]&&o.fill(t,e,(function(t){const n={mechanism:{data:{function:e,handler:o.getFunctionName(t)},handled:!1,type:"instrument"}},r=o.getOriginalFunction(t);return r&&(n.mechanism.data.handler=o.getFunctionName(r)),i.wrap(t,n)}))}));for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.apply(this,r)}}function d(e){const t=i.WINDOW,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(o.fill(n,"addEventListener",(function(t){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=i.wrap(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:o.getFunctionName(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,i.wrap(r,{mechanism:{data:{function:"addEventListener",handler:o.getFunctionName(r),target:e},handled:!1,type:"instrument"}}),s])}})),o.fill(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}t.browserApiErrorsIntegration=a},9259:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=o.GLOBAL_OBJ,s=r.defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>function(e,t){const n=i.document,r=i.location&&o.stripUrlQueryAndFragment(i.location.href);if(!n||!r)return e;const s=e.exception&&e.exception.values;if(!s||!s.length)return e;const c=n.documentElement.innerHTML;if(!c)return e;const u=["<!DOCTYPE html>","<html>",...c.split("\n"),"</html>"];return s.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>a(e,u,r,t))))})),e}(e,t)}}));function a(e,t,n,r){return e.filename===n&&e.lineno&&t.length?(o.addContextToFrame(t,e,r),e):e}t.applySourceContextToFrame=a,t.contextLinesIntegration=s},2359:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(5411),s=n(6534),a=n(696),c=r.defineIntegration((function(){const e={onerror:!0,onunhandledrejection:!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(function(e){o.addGlobalErrorInstrumentationHandler((t=>{const{stackParser:n,attachStacktrace:i}=l();if(r.getClient()!==e||a.shouldIgnoreOnError())return;const{msg:c,url:u,line:d,column:p,error:f}=t,h=function(e,t,n,r){const i=e.exception=e.exception||{},s=i.values=i.values||[],a=s[0]=s[0]||{},c=a.stacktrace=a.stacktrace||{},u=c.frames=c.frames||[],l=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,p=o.isString(t)&&t.length>0?t:o.getLocationHref();return 0===u.length&&u.push({colno:l,filename:p,function:o.UNKNOWN_FUNCTION,in_app:!0,lineno:d}),e}(s.eventFromUnknownInput(n,f||c,void 0,i,!1),u,d,p);h.level="error",r.captureEvent(h,{originalException:f,mechanism:{handled:!1,type:"onerror"}})}))}(t),u("onerror")),e.onunhandledrejection&&(function(e){o.addGlobalUnhandledRejectionInstrumentationHandler((t=>{const{stackParser:n,attachStacktrace:i}=l();if(r.getClient()!==e||a.shouldIgnoreOnError())return;const c=function(e){if(o.isPrimitive(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),u=o.isPrimitive(c)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(c)}`}]}}:s.eventFromUnknownInput(n,c,void 0,i,!0);u.level="error",r.captureEvent(u,{originalException:c,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(t),u("onunhandledrejection"))}}}));function u(e){i.DEBUG_BUILD&&o.logger.log(`Global Handler attached: ${e}`)}function l(){const e=r.getClient();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}t.globalHandlersIntegration=c},3042:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3654),o=n(3022),i=n(674),s=n(5411),a=o.defineIntegration((function(){const e={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"HttpClient",setup(t){!function(e,t){i.supportsNativeFetch()&&i.addFetchInstrumentationHandler((n=>{if(o.getClient()!==e)return;const{response:r,args:i}=n,[s,a]=i;r&&function(e,t,n,r){if(d(e,n.status,n.url)){const e=function(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}(t,r);let i,s,a,u;f()&&([i,a]=c("Cookie",e),[s,u]=c("Set-Cookie",n));const l=p({url:e.url,method:e.method,status:n.status,requestHeaders:i,responseHeaders:s,requestCookies:a,responseCookies:u});o.captureEvent(l)}}(t,s,r,a)}))}(t,e),function(e,t){"XMLHttpRequest"in i.GLOBAL_OBJ&&r.addXhrInstrumentationHandler((n=>{if(o.getClient()!==e)return;const a=n.xhr,c=a[r.SENTRY_XHR_DATA_KEY];if(!c)return;const{method:u,request_headers:h}=c;try{!function(e,t,n,r){if(d(e,t.status,t.responseURL)){let e,a,c;if(f()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(a=l(e))}catch(e){s.DEBUG_BUILD&&i.logger.log("Could not extract cookies from response headers")}try{c=function(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return n&&r&&(e[n]=r),e}),{}):{}}(t)}catch(e){s.DEBUG_BUILD&&i.logger.log("Could not extract headers from response")}e=r}const u=p({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:c,responseCookies:a});o.captureEvent(u)}}(t,a,u,h)}catch(e){s.DEBUG_BUILD&&i.logger.warn("Error while extracting response event form XHR response",e)}}))}(t,e)}}}));function c(e,t){const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=l(t))}catch(t){s.DEBUG_BUILD&&i.logger.log(`Could not extract cookies from header ${e}`)}return[n,r]}function u(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function l(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return n&&r&&(e[n]=r),e}),{})}function d(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,i=n,r.some((e=>"string"==typeof e?i.includes(e):e.test(i))))&&!o.isSentryRequestUrl(n,o.getClient());var r,i}function p(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:u(e.responseHeaders)}}};return i.addExceptionMechanism(n,{type:"http.client",handled:!1}),n}function f(){const e=o.getClient();return!!e&&Boolean(e.getOptions().sendDefaultPii)}t.httpClientIntegration=a},9318:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(696),i=r.defineIntegration((()=>({name:"HttpContext",preprocessEvent(e){if(!o.WINDOW.navigator&&!o.WINDOW.location&&!o.WINDOW.document)return;const t=e.request&&e.request.url||o.WINDOW.location&&o.WINDOW.location.href,{referrer:n}=o.WINDOW.document||{},{userAgent:r}=o.WINDOW.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:i};e.request=s}})));t.httpContextIntegration=i},5055:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(6534),s=r.defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,s){const a=s.getOptions();o.applyAggregateErrorsToEvent(i.exceptionFromError,a.stackParser,a.maxValueLength,n,t,e,r)}}}));t.linkedErrorsIntegration=s},2573:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=o.GLOBAL_OBJ,s=new WeakMap,a=r.defineIntegration((function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).types||["crash","deprecation","intervention"];function t(e){if(s.has(r.getClient()))for(const t of e)r.withScope((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let o="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;o=[e.crashId||"",e.reason||""].join(" ").trim()||o}else o=t.body.message||o}r.captureMessage(`${n}: ${o}`)}))}return{name:"ReportingObserver",setupOnce(){o.supportsReportingObserver()&&new i.ReportingObserver(t,{buffered:!0,types:e}).observe()},setup(e){s.set(e,!0)}}}));t.reportingObserverIntegration=a},184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o={increment:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;r.metrics.increment(r.BrowserMetricsAggregator,e,t,n)},distribution:function(e,t,n){r.metrics.distribution(r.BrowserMetricsAggregator,e,t,n)},set:function(e,t,n){r.metrics.set(r.BrowserMetricsAggregator,e,t,n)},gauge:function(e,t,n){r.metrics.gauge(r.BrowserMetricsAggregator,e,t,n)},timing:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"second",o=arguments.length>3?arguments[3]:void 0;return r.metrics.timing(r.BrowserMetricsAggregator,e,t,n,o)}};t.metrics=o},4586:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(5411),s=n(7452),a=n(7205),c=r.defineIntegration((()=>({name:"BrowserProfiling",setup(e){const t=r.getActiveSpan(),n=t&&r.getRootSpan(t);n&&a.isAutomatedPageLoadSpan(n)&&a.shouldProfileSpan(n)&&s.startProfileForSpan(n),e.on("spanStart",(e=>{e===r.getRootSpan(e)&&a.shouldProfileSpan(e)&&s.startProfileForSpan(e)})),e.on("beforeEnvelope",(e=>{if(!a.getActiveProfilesCount())return;const t=a.findProfiledTransactionsFromEnvelope(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,s=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){i.DEBUG_BUILD&&o.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!r){i.DEBUG_BUILD&&o.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}t&&t.profile&&delete t.profile;const c=a.takeProfileFromGlobalCache(r);if(!c){i.DEBUG_BUILD&&o.logger.log(`[Profiling] Could not retrieve profile for span: ${r}`);continue}const u=a.createProfilingEvent(r,s,c,e);u&&n.push(u)}a.addProfilesToEnvelope(e,n)}))}})));t.browserProfilingIntegration=c},7452:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(5411),s=n(696),a=n(7205);t.startProfileForSpan=function(e){let t;a.isAutomatedPageLoadSpan(e)&&(t=1e3*o.timestampInSeconds());const n=a.startJSSelfProfile();if(!n)return;i.DEBUG_BUILD&&o.logger.log(`[Profiling] started profiling span: ${r.spanToJSON(e).description}`);const c=o.uuid4();async function u(){if(e&&n)return n.stop().then((t=>{l&&(s.WINDOW.clearTimeout(l),l=void 0),i.DEBUG_BUILD&&o.logger.log(`[Profiling] stopped profiling of span: ${r.spanToJSON(e).description}`),t?a.addProfileToGlobalCache(c,t):i.DEBUG_BUILD&&o.logger.log(`[Profiling] profiler returned null profile for: ${r.spanToJSON(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((e=>{i.DEBUG_BUILD&&o.logger.log("[Profiling] error while stopping profiler:",e)}))}r.getCurrentScope().setContext("profile",{profile_id:c,start_timestamp:t});let l=s.WINDOW.setTimeout((()=>{i.DEBUG_BUILD&&o.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",r.spanToJSON(e).description),u()}),a.MAX_PROFILE_DURATION_MS);const d=e.end.bind(e);e.end=function(){return e?(u().then((()=>{d()}),(()=>{d()})),e):d()}}},7205:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(5411),s=n(696),a=1e6,c=String(0);let u="",l="",d="",p=s.WINDOW.navigator&&s.WINDOW.navigator.userAgent||"",f="";const h=s.WINDOW.navigator&&s.WINDOW.navigator.language||s.WINDOW.navigator&&s.WINDOW.navigator.languages&&s.WINDOW.navigator.languages[0]||"",g=s.WINDOW.navigator&&s.WINDOW.navigator.userAgentData;var m;function y(e){return function(e){return!("thread_metadata"in e)}(e)?_(e):e}function v(e,t,n,a){if("transaction"!==a.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const g=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&i.DEBUG_BUILD&&o.logger.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(a),m=y(n),v=t||("number"==typeof a.start_timestamp?1e3*a.start_timestamp:1e3*o.timestampInSeconds()),_="number"==typeof a.timestamp?1e3*a.timestamp:1e3*o.timestampInSeconds();return{event_id:e,timestamp:new Date(v).toISOString(),platform:"javascript",version:"1",release:a.release||"",environment:a.environment||r.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:s.WINDOW.navigator.userAgent},os:{name:u,version:l,build_number:p},device:{locale:h,model:f,manufacturer:p,architecture:d,is_emulator:!1},debug_meta:{images:E(n.resources)},profile:m,transactions:[{name:a.transaction||"",id:a.event_id||o.uuid4(),trace_id:g,active_thread_id:c,relative_start_ns:"0",relative_end_ns:(1e6*(_-v)).toFixed(0)}]}}function _(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[c]:{name:"main"}}},i=e.samples[0];if(!i)return r;const s=i.timestamp,u="number"==typeof performance.timeOrigin?performance.timeOrigin:o.browserPerformanceTimeOrigin||0,l=u-(o.browserPerformanceTimeOrigin||u);return e.samples.forEach(((o,i)=>{if(void 0===o.stackId)return void 0===t&&(t=n,r.stacks[t]=[],n++),void(r.samples[i]={elapsed_since_start_ns:((o.timestamp+l-s)*a).toFixed(0),stack_id:t,thread_id:c});let u=e.stacks[o.stackId];const d=[];for(;u;){d.push(u.frameId);const t=e.frames[u.frameId];t&&void 0===r.frames[u.frameId]&&(r.frames[u.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),u=void 0===u.parentId?void 0:e.stacks[u.parentId]}const p={elapsed_since_start_ns:((o.timestamp+l-s)*a).toFixed(0),stack_id:n,thread_id:c};r.stacks[n]=d,r.samples[i]=p,n++})),r}"object"==typeof(m=g)&&null!==m&&"getHighEntropyValues"in m&&g.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(u=e.platform||"",d=e.architecture||"",f=e.model||"",l=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];p=`${t.brand} ${t.version}`}})).catch((e=>{}));const S=new WeakMap;function E(e){const t=o.GLOBAL_OBJ._sentryDebugIds;if(!t)return[];const n=r.getClient(),i=n&&n.getOptions(),s=i&&i.stackParser;if(!s)return[];let a;const c=S.get(s);c?a=c:(a=new Map,S.set(s,a));const u=Object.keys(t).reduce(((e,n)=>{let r;const o=a.get(n);o?r=o:(r=s(n),a.set(n,r));for(let o=r.length-1;o>=0;o--){const i=r[o],s=i&&i.filename;if(i&&s){e[s]=t[n];break}}return e}),{}),l=[];for(const t of e)t&&u[t]&&l.push({type:"sourcemap",code_file:t,debug_id:u[t]});return l}function b(e){return"number"!=typeof e&&"boolean"!=typeof e||"number"==typeof e&&isNaN(e)?(i.DEBUG_BUILD&&o.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!0===e||!1===e||!(e<0||e>1)||(i.DEBUG_BUILD&&o.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1)}let T=!1;const w=new Map;t.MAX_PROFILE_DURATION_MS=3e4,t.addProfileToGlobalCache=function(e,t){if(w.set(e,t),w.size>30){const e=w.keys().next().value;w.delete(e)}},t.addProfilesToEnvelope=function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e},t.applyDebugMetadata=E,t.convertJSSelfProfileToSampledFormat=_,t.createProfilePayload=v,t.createProfilingEvent=function(e,t,n,r){return function(e){return e.samples.length<2?(i.DEBUG_BUILD&&o.logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(i.DEBUG_BUILD&&o.logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?v(e,t,n,r):null},t.enrichWithThreadInformation=y,t.findProfiledTransactionsFromEnvelope=function(e){const t=[];return o.forEachEnvelopeItem(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t},t.getActiveProfilesCount=function(){return w.size},t.isAutomatedPageLoadSpan=function(e){return"pageload"===r.spanToJSON(e).op},t.isValidSampleRate=b,t.shouldProfileSpan=function(e){if(T)return i.DEBUG_BUILD&&o.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return i.DEBUG_BUILD&&o.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=r.getClient(),n=t&&t.getOptions();if(!n)return i.DEBUG_BUILD&&o.logger.log("[Profiling] Profiling disabled, no options found."),!1;const s=n.profilesSampleRate;return b(s)?s?!!(!0===s||Math.random()<s)||(i.DEBUG_BUILD&&o.logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(s)})`),!1):(i.DEBUG_BUILD&&o.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(i.DEBUG_BUILD&&o.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)},t.startJSSelfProfile=function(){const e=s.WINDOW.Profiler;if("function"!=typeof e)return void(i.DEBUG_BUILD&&o.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){i.DEBUG_BUILD&&(o.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),o.logger.log("[Profiling] Disabling profiling for current user session.")),T=!0}},t.takeProfileFromGlobalCache=function(e){const t=w.get(e);return t&&w.delete(e),t}},3705:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(3654),s=n(3353),a=n(5411),c=n(696),u=n(3683),l=n(5198),d=n(2359),p=n(9318),f=n(5055),h=n(244),g=n(8432);function m(e){return[r.inboundFiltersIntegration(),r.functionToStringIntegration(),l.browserApiErrorsIntegration(),u.breadcrumbsIntegration(),d.globalHandlersIntegration(),f.linkedErrorsIntegration(),r.dedupeIntegration(),p.httpContextIntegration()]}t.captureUserFeedback=function(e){const t=r.getClient();t&&t.captureUserFeedback(e)},t.forceLoad=function(){},t.getDefaultIntegrations=m,t.init=function(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={defaultIntegrations:m(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:c.WINDOW.SENTRY_RELEASE&&c.WINDOW.SENTRY_RELEASE.id?c.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==e.defaultIntegrations&&delete e.defaultIntegrations,{...t,...e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});if(function(){const e=void 0!==c.WINDOW.window&&c.WINDOW;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,r=c.WINDOW.location&&c.WINDOW.location.href||"",o=!!n&&c.WINDOW===c.WINDOW.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),i=void 0!==e.nw;return!!n&&!o&&!i}())return void o.consoleSandbox((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));a.DEBUG_BUILD&&(o.supportsFetch()||o.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const t={...e,stackParser:o.stackParserFromStackParserOptions(e.stackParser||h.defaultStackParser),integrations:r.getIntegrationsToSetup(e),transport:e.transport||g.makeFetchTransport},n=r.initAndBind(s.BrowserClient,t);return e.autoSessionTracking&&(void 0!==c.WINDOW.document?(r.startSession({ignoreDuration:!0}),r.captureSession(),i.addHistoryInstrumentationHandler((e=>{let{from:t,to:n}=e;void 0!==t&&t!==n&&(r.startSession({ignoreDuration:!0}),r.captureSession())}))):a.DEBUG_BUILD&&o.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")),n},t.onLoad=function(e){e()},t.showReportDialog=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!c.WINDOW.document)return void(a.DEBUG_BUILD&&o.logger.error("Global document not defined in showReportDialog call"));const t=r.getCurrentScope(),n=t.getClient(),i=n&&n.getDsn();if(!i)return void(a.DEBUG_BUILD&&o.logger.error("DSN not configured for showReportDialog call"));if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const t=r.lastEventId();t&&(e.eventId=t)}const s=c.WINDOW.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=r.getReportDialogEndpoint(i,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:u}=e;if(u){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{u()}finally{c.WINDOW.removeEventListener("message",e)}};c.WINDOW.addEventListener("message",e)}const l=c.WINDOW.document.head||c.WINDOW.document.body;l?l.appendChild(s):a.DEBUG_BUILD&&o.logger.error("Not injecting report dialog. No injection point found in HTML")}},244:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);function o(e,t,n,o){const i={filename:e,function:"<anonymous>"===t?r.UNKNOWN_FUNCTION:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==o&&(i.colno=o),i}const i=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,s=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=[30,e=>{const t=i.exec(e);if(t){const[,e,n,i]=t;return o(e,r.UNKNOWN_FUNCTION,+n,+i)}const n=s.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=a.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=S(n[1]||r.UNKNOWN_FUNCTION,n[2]);return o(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=[50,e=>{const t=u.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=l.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||r.UNKNOWN_FUNCTION;return[n,e]=S(n,e),o(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],p=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=[40,e=>{const t=p.exec(e);return t?o(t[2],t[1]||r.UNKNOWN_FUNCTION,+t[3],t[4]?+t[4]:void 0):void 0}],h=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,g=[10,e=>{const t=h.exec(e);return t?o(t[2],t[3]||r.UNKNOWN_FUNCTION,+t[1]):void 0}],m=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,y=[20,e=>{const t=m.exec(e);return t?o(t[5],t[3]||t[4]||r.UNKNOWN_FUNCTION,+t[1],+t[2]):void 0}],v=[c,d],_=r.createStackParser(...v),S=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),o=-1!==e.indexOf("safari-web-extension");return n||o?[-1!==e.indexOf("@")?e.split("@")[0]:r.UNKNOWN_FUNCTION,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};t.chromeStackLineParser=c,t.defaultStackLineParsers=v,t.defaultStackParser=_,t.geckoStackLineParser=d,t.opera10StackLineParser=g,t.opera11StackLineParser=y,t.winjsStackLineParser=f},9159:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(5411),s=n(696);t.registerBackgroundTabDetection=function(){s.WINDOW&&s.WINDOW.document?s.WINDOW.document.addEventListener("visibilitychange",(()=>{const e=r.getActiveSpan();if(!e)return;const t=r.getRootSpan(e);if(s.WINDOW.document.hidden&&t){const e="cancelled",{op:n,status:s}=r.spanToJSON(t);i.DEBUG_BUILD&&o.logger.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),s||t.setStatus({code:r.SPAN_STATUS_ERROR,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):i.DEBUG_BUILD&&o.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}},5544:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3654),o=n(3022),i=n(674),s=n(5411),a=n(696),c=n(9159),u=n(49),l="BrowserTracing",d={...o.TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...u.defaultRequestInstrumentationOptions};function p(e,t,n){e.emit("startPageLoadSpan",t,n),o.getCurrentScope().setTransactionName(t.name);const r=o.getActiveSpan();return"pageload"===(r&&o.spanToJSON(r).op)?r:void 0}function f(e,t){o.getIsolationScope().setPropagationContext(i.generatePropagationContext()),o.getCurrentScope().setPropagationContext(i.generatePropagationContext()),e.emit("startNavigationSpan",t),o.getCurrentScope().setTransactionName(t.name);const n=o.getActiveSpan();return"navigation"===(n&&o.spanToJSON(n).op)?n:void 0}function h(e){const t=i.getDomElement(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}t.BROWSER_TRACING_INTEGRATION_ID=l,t.browserTracingIntegration=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.registerSpanErrorInstrumentation();const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:g,_experiments:{enableInteractions:m,enableStandaloneClsSpans:y},beforeStartSpan:v,idleTimeout:_,finalTimeout:S,childSpanTimeout:E,markBackgroundSpan:b,traceFetch:T,traceXHR:w,trackFetchStreamPerformance:C,shouldCreateSpanForRequest:R,enableHTTPTimings:O,instrumentPageLoad:I,instrumentNavigation:M}={...d,...e},A=r.startTrackingWebVitals({recordClsStandaloneSpans:y||!1});t&&r.startTrackingINP(),g&&i.GLOBAL_OBJ.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?r.startTrackingLongAnimationFrames():n&&r.startTrackingLongTasks(),m&&r.startTrackingInteractions();const k={name:void 0,source:void 0};function P(e,t){const n="pageload"===t.op,i=v?v(t):t,s=i.attributes||{};t.name!==i.name&&(s[o.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",i.attributes=s),k.name=i.name,k.source=s[o.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];const c=o.startIdleSpan(i,{idleTimeout:_,finalTimeout:S,childSpanTimeout:E,disableAutoFinish:n,beforeSpanEnd:e=>{A(),r.addPerformanceEntries(e,{recordClsOnPageloadSpan:!y})}});function u(){["interactive","complete"].includes(a.WINDOW.document.readyState)&&e.emit("idleSpanEnableAutoFinish",c)}return n&&a.WINDOW.document&&(a.WINDOW.document.addEventListener("readystatechange",(()=>{u()})),u()),c}return{name:l,afterAllSetup(e){let n,l=a.WINDOW.location&&a.WINDOW.location.href;e.on("startNavigationSpan",(t=>{o.getClient()===e&&(n&&!o.spanToJSON(n).timestamp&&(s.DEBUG_BUILD&&i.logger.log(`[Tracing] Finishing current root span with op: ${o.spanToJSON(n).op}`),n.end()),n=P(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o.getClient()!==e)return;n&&!o.spanToJSON(n).timestamp&&(s.DEBUG_BUILD&&i.logger.log(`[Tracing] Finishing current root span with op: ${o.spanToJSON(n).op}`),n.end());const a=r.sentryTrace||h("sentry-trace"),c=r.baggage||h("baggage"),u=i.propagationContextFromHeaders(a,c);o.getCurrentScope().setPropagationContext(u),n=P(e,{op:"pageload",...t})})),e.on("spanEnd",(e=>{const t=o.spanToJSON(e).op;if(e!==o.getRootSpan(e)||"navigation"!==t&&"pageload"!==t)return;const n=o.getCurrentScope(),r=n.getPropagationContext();n.setPropagationContext({...r,sampled:void 0!==r.sampled?r.sampled:o.spanIsSampled(e),dsc:r.dsc||o.getDynamicSamplingContextFromSpan(e)})})),a.WINDOW.location&&(I&&p(e,{name:a.WINDOW.location.pathname,startTime:i.browserPerformanceTimeOrigin?i.browserPerformanceTimeOrigin/1e3:void 0,attributes:{[o.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[o.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.pageload.browser"}}),M&&r.addHistoryInstrumentationHandler((t=>{let{to:n,from:r}=t;void 0===r&&l&&-1!==l.indexOf(n)?l=void 0:r!==n&&(l=void 0,f(e,{name:a.WINDOW.location.pathname,attributes:{[o.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[o.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.navigation.browser"}}))}))),b&&c.registerBackgroundTabDetection(),m&&function(e,t,n,r){let c;a.WINDOW.document&&addEventListener("click",(()=>{const a="ui.action.click",u=o.getActiveSpan(),l=u&&o.getRootSpan(u);if(l){const e=o.spanToJSON(l).op;if(["navigation","pageload"].includes(e))return void(s.DEBUG_BUILD&&i.logger.warn(`[Tracing] Did not create ${a} span because a pageload or navigation span is in progress.`))}c&&(c.setAttribute(o.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),c.end(),c=void 0),r.name?c=o.startIdleSpan({name:r.name,op:a,attributes:{[o.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):s.DEBUG_BUILD&&i.logger.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`)}),{once:!1,capture:!0})}(_,S,E,k),t&&r.registerInpInteractionListener(),u.instrumentOutgoingRequests(e,{traceFetch:T,traceXHR:w,trackFetchStreamPerformance:C,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:R,enableHTTPTimings:O})}}},t.getMetaContent=h,t.startBrowserTracingNavigationSpan=f,t.startBrowserTracingPageLoadSpan=p},49:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3654),o=n(3022),i=n(674),s=n(696),a=new WeakMap,c=new Map,u={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function l(e){const{url:t}=o.spanToJSON(e).data||{};if(!t||"string"!=typeof t)return;const n=r.addPerformanceInstrumentationHandler("resource",(r=>{let{entries:o}=r;o.forEach((r=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(r)&&r.name.endsWith(t)&&(function(e){const{name:t,version:n}=d(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),i.browserPerformanceTimeOrigin?[...r,["http.request.redirect_start",p(e.redirectStart)],["http.request.fetch_start",p(e.fetchStart)],["http.request.domain_lookup_start",p(e.domainLookupStart)],["http.request.domain_lookup_end",p(e.domainLookupEnd)],["http.request.connect_start",p(e.connectStart)],["http.request.secure_connection_start",p(e.secureConnectionStart)],["http.request.connection_end",p(e.connectEnd)],["http.request.request_start",p(e.requestStart)],["http.request.response_start",p(e.responseStart)],["http.request.response_end",p(e.responseEnd)]]:r}(r).forEach((t=>e.setAttribute(...t))),setTimeout(n))}))}))}function d(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return((i.browserPerformanceTimeOrigin||performance.timeOrigin)+e)/1e3}function f(e,t){const n=s.WINDOW.location&&s.WINDOW.location.href;if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch(e){return!1}const s=r.origin===o;return t?i.stringMatchesSomePattern(r.toString(),t)||s&&i.stringMatchesSomePattern(r.pathname,t):s}{const n=!!e.match(/^\/(?!\/)/);return t?i.stringMatchesSomePattern(e,t):n}}function h(e,t,n,s){const a=e.xhr,c=a&&a[r.SENTRY_XHR_DATA_KEY];if(!a||a.__sentry_own_request__||!c)return;const u=o.hasTracingEnabled()&&t(c.url);if(e.endTimestamp&&u){const e=a.__sentry_xhr_span_id__;if(!e)return;const t=s[e];return void(t&&void 0!==c.status_code&&(o.setHttpStatus(t,c.status_code),t.end(),delete s[e]))}const l=g(c.url),d=l?i.parseUrl(l).host:void 0,p=!!o.getActiveSpan(),f=u&&p?o.startInactiveSpan({name:`${c.method} ${c.url}`,attributes:{type:"xhr","http.method":c.method,"http.url":l,url:c.url,"server.address":d,[o.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser",[o.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new o.SentryNonRecordingSpan;a.__sentry_xhr_span_id__=f.spanContext().spanId,s[a.__sentry_xhr_span_id__]=f;const h=o.getClient();return a.setRequestHeader&&n(c.url)&&h&&function(e,t,n){const r=o.getCurrentScope(),s=o.getIsolationScope(),{traceId:a,spanId:c,sampled:u,dsc:l}={...s.getPropagationContext(),...r.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(i.BAGGAGE_HEADER_NAME,n)}catch(e){}}(e,n&&o.hasTracingEnabled()?o.spanToTraceHeader(n):i.generateSentryTraceHeader(a,c,u),i.dynamicSamplingContextToSentryBaggageHeader(l||(n?o.getDynamicSamplingContextFromSpan(n):o.getDynamicSamplingContextFromClient(a,t))))}(a,h,o.hasTracingEnabled()&&p?f:void 0),f}function g(e){try{return new URL(e,s.WINDOW.location.origin).href}catch(e){return}}t.defaultRequestInstrumentationOptions=u,t.extractNetworkProtocol=d,t.instrumentOutgoingRequests=function(e,t){const{traceFetch:n,traceXHR:s,trackFetchStreamPerformance:d,shouldCreateSpanForRequest:p,enableHTTPTimings:m,tracePropagationTargets:y}={traceFetch:u.traceFetch,traceXHR:u.traceXHR,trackFetchStreamPerformance:u.trackFetchStreamPerformance,...t},v="function"==typeof p?p:e=>!0,_=e=>f(e,y),S={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=c.get(e.span_id);t&&(e.timestamp=t/1e3,c.delete(e.span_id))}})),e))),d&&i.addFetchEndInstrumentationHandler((e=>{if(e.response){const t=a.get(e.response);t&&e.endTimestamp&&c.set(t,e.endTimestamp)}})),i.addFetchInstrumentationHandler((e=>{const t=o.instrumentFetchRequest(e,v,_,S);if(e.response&&e.fetchData.__span&&a.set(e.response,e.fetchData.__span),t){const n=g(e.fetchData.url),r=n?i.parseUrl(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}m&&t&&l(t)}))),s&&r.addXhrInstrumentationHandler((e=>{const t=h(e,v,_,S);m&&t&&l(t)}))},t.shouldAttachHeaders=f,t.xhrCallback=h},8432:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3654),o=n(3022),i=n(674);t.makeFetchTransport=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.getNativeImplementation("fetch"),n=0,s=0;return o.createTransport(e,(function(o){const a=o.body.length;n+=a,s++;const c={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&s<15,...e.fetchOptions};if(!t)return r.clearCachedImplementation("fetch"),i.rejectedSyncPromise("No fetch implementation available");try{return t(e.url,c).then((e=>(n-=a,s--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return r.clearCachedImplementation("fetch"),n-=a,s--,i.rejectedSyncPromise(e)}}))}},3063:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(674),i=n(8432);function s(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function a(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=s(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}function c(e){return s(e.getAllKeys())}function u(e,t,n){return e((e=>c(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),s(e.transaction)}))))}function l(e,t,n){return e((e=>c(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.min(...r,0)-1),s(e.transaction)}))))}function d(e){return e((e=>c(e).then((t=>{const n=t[0];if(null!=n)return s(e.get(n)).then((t=>(e.delete(n),s(e.transaction).then((()=>t)))))}))))}function p(e){let t;function n(){return null==t&&(t=a(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const r=await o.serializeEnvelope(t);await u(n(),r,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const r=await o.serializeEnvelope(t);await l(n(),r,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await d(n());if(e)return o.parseEnvelope(e)}catch(e){}}}}t.createStore=a,t.makeBrowserOfflineTransport=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.makeFetchTransport;return function(e){return t=>e({...t,createStore:p})}(r.makeOfflineTransport(e))},t.push=u,t.shift=d,t.unshift=l},8785:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);t.createUserFeedbackEnvelope=function(e,t){let{metadata:n,tunnel:o,dsn:i}=t;const s={event_id:e.event_id,sent_at:(new Date).toISOString(),...n&&n.sdk&&{sdk:{name:n.sdk.name,version:n.sdk.version}},...!!o&&!!i&&{dsn:r.dsnToString(i)}},a=function(e){return[{type:"user_report"},e]}(e);return r.createEnvelope(s,[a])}},79:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3022),o=n(696),i={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},s=o.WINDOW;t.lazyLoadIntegration=async function(e,t){const n=i[e],a=s.Sentry=s.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const c=a[e];if("function"==typeof c&&!("_isShim"in c))return c;const u=function(e){const t=r.getClient(),n=t&&t.getOptions(),o=n&&n.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${r.SDK_VERSION}/${e}.min.js`,o).toString()}(n),l=o.WINDOW.document.createElement("script");l.src=u,l.crossOrigin="anonymous",l.referrerPolicy="origin",t&&l.setAttribute("nonce",t);const d=new Promise(((e,t)=>{l.addEventListener("load",(()=>e())),l.addEventListener("error",t)})),p=o.WINDOW.document.currentScript,f=o.WINDOW.document.body||o.WINDOW.document.head||p&&p.parentElement;if(!f)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);f.appendChild(l);try{await d}catch(t){throw new Error(`Error when loading integration: ${e}`)}const h=a[e];if("function"!=typeof h)throw new Error(`Could not load integration: ${e}`);return h}},5734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);function o(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}t.getEnvelopeEndpointWithUrlEncodedAuth=function(e,t,n){return t||`${function(e){return`${o(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r.urlEncode({sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}})}(e,n)}`},t.getReportDialogEndpoint=function(e,t){const n=r.makeDsn(e);if(!n)return"";const i=`${o(n)}embed/error-page/`;let s=`dsn=${r.dsnToString(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(s+=`&name=${encodeURIComponent(e.name)}`),e.email&&(s+=`&email=${encodeURIComponent(e.email)}`)}else s+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${i}?${s}`}},2744:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7710),o=n(1213);t.getAsyncContextStrategy=function(e){const t=r.getSentryCarrier(e);return t.acs?t.acs:o.getStackAsyncContextStrategy()},t.setAsyncContextStrategy=function(e){const t=r.getMainCarrier();r.getSentryCarrier(t).acs=e}},1213:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(2110),i=n(7918),s=n(7710);class a{constructor(e,t){let n,r;n=e||new i.Scope,r=t||new i.Scope,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return r.isThenable(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}}function c(){const e=s.getMainCarrier(),t=s.getSentryCarrier(e);return t.stack=t.stack||new a(o.getDefaultCurrentScope(),o.getDefaultIsolationScope())}function u(e){return c().withScope(e)}function l(e,t){const n=c();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function d(e){return c().withScope((()=>e(c().getIsolationScope())))}t.AsyncContextStack=a,t.getStackAsyncContextStrategy=function(){return{withIsolationScope:d,withScope:u,withSetScope:l,withSetIsolationScope:(e,t)=>d(t),getCurrentScope:()=>c().getScope(),getIsolationScope:()=>c().getIsolationScope()}}},1034:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(5734),i=n(1414),s=n(3972),a=n(6728),c=n(6724),u=n(2077),l=n(7172),d=n(4955),p=n(2027),f="Not capturing exception because it's already been captured.";function h(e){return void 0===e.type}function g(e){return"transaction"===e.type}t.BaseClient=class{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=r.makeDsn(e.dsn):s.DEBUG_BUILD&&r.logger.warn("No DSN provided, client will not send events."),this._dsn){const t=o.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const o=r.uuid4();if(r.checkOrSetAlreadyCaught(e))return s.DEBUG_BUILD&&r.logger.log(f),o;const i={event_id:o,...t};return this._process(this.eventFromException(e,i).then((e=>this._captureEvent(e,i,n)))),i.event_id}captureMessage(e,t,n,o){const i={event_id:r.uuid4(),...n},s=r.isParameterizedString(e)?e:String(e),a=r.isPrimitive(e)?this.eventFromMessage(s,t,i):this.eventFromException(e,i);return this._process(a.then((e=>this._captureEvent(e,i,o)))),i.event_id}captureEvent(e,t,n){const o=r.uuid4();if(t&&t.originalException&&r.checkOrSetAlreadyCaught(t.originalException))return s.DEBUG_BUILD&&r.logger.log(f),o;const i={event_id:o,...t},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,i,a||n)),i.event_id}captureSession(e){"string"!=typeof e.release?s.DEBUG_BUILD&&r.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),u.updateSession(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):r.resolvedSyncPromise(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((e=>{let{name:t}=e;return t.startsWith("Spotlight")})))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];c.setupIntegration(this,e,this._integrations),t||c.afterSetupIntegrations(this,[e])}sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",e,t);let n=a.createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=r.addItemToEnvelope(n,r.createAttachmentEnvelopeItem(e));const o=this.sendEnvelope(n);o&&o.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=a.createSessionEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const o="number"==typeof n?n:1,i=`${e}:${t}`;s.DEBUG_BUILD&&r.logger.log(`Recording outcome: "${i}"${o>1?` (${o} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+o}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=this._hooks[e];o&&o.forEach((e=>e(...n)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(s.DEBUG_BUILD&&r.logger.error("Error while sending event:",e),e))):(s.DEBUG_BUILD&&r.logger.error("Transport disabled"),r.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=c.setupIntegrations(this,e),c.afterSetupIntegrations(this,e)}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(u.updateSession(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new r.SyncPromise((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.getIsolationScope();const s=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a.length>0&&(t.integrations=a),this.emit("preprocessEvent",e,t),e.type||o.setLastEventId(e.event_id||t.event_id),p.prepareEvent(s,e,t,n,this,o).then((e=>{if(null===e)return e;const t={...o.getPropagationContext(),...n?n.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:o,parentSpanId:i,dsc:s}=t;e.contexts={trace:r.dropUndefinedKeys({trace_id:n,span_id:o,parent_span_id:i}),...e.contexts};const a=s||l.getDynamicSamplingContextFromClient(n,this);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(s.DEBUG_BUILD){const t=e;"log"===t.logLevel?r.logger.log(t.message):r.logger.warn(t)}}))}_processEvent(e,t,n){const o=this.getOptions(),{sampleRate:i}=o,s=g(e),a=h(e),c=e.type||"error",u=`before send for type \`${c}\``,l=void 0===i?void 0:d.parseSampleRate(i);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",e),r.rejectedSyncPromise(new r.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const p="replay_event"===c?"replay":c,f=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,f).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",p,e),new r.SentryError("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const i=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s}=t;if(h(n)&&o)return o(n,r);if(g(n)){if(n.spans&&s){const t=[];for(const r of n.spans){const n=s(r);n?t.push(n):e.recordDroppedEvent("before_send","span")}n.spans=t}if(i){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(n,r)}}return n}(this,o,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(r.isThenable(e))return e.then((e=>{if(!r.isPlainObject(e)&&null!==e)throw new r.SentryError(n);return e}),(e=>{throw new r.SentryError(`${t} rejected with ${e}`)}));if(!r.isPlainObject(e)&&null!==e)throw new r.SentryError(n);return e}(i,u)})).then((o=>{if(null===o){if(this.recordDroppedEvent("before_send",p,e),s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new r.SentryError(`${u} returned \`null\`, will not send event.`,"log")}const i=n&&n.getSession();if(!s&&i&&this._updateSessionFromEvent(i,o),s){const e=(o.sdkProcessingMetadata&&o.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(o.spans?o.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const a=o.transaction_info;if(s&&a&&o.transaction!==e.transaction){const e="custom";o.transaction_info={...a,source:e}}return this.sendEvent(o,t),o})).then(null,(e=>{if(e instanceof r.SentryError)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new r.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((e=>{let[t,n]=e;const[r,o]=t.split(":");return{reason:r,category:o,quantity:n}}))}_flushOutcomes(){s.DEBUG_BUILD&&r.logger.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(s.DEBUG_BUILD&&r.logger.log("No outcomes to send"));if(!this._dsn)return void(s.DEBUG_BUILD&&r.logger.log("No dsn provided, will not send outcomes"));s.DEBUG_BUILD&&r.logger.log("Sending outcomes:",e);const t=r.createClientReportEnvelope(e,this._options.tunnel&&r.dsnToString(this._dsn));this.sendEnvelope(t)}}},7848:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=100;t.addBreadcrumb=function(e,t){const n=o.getClient(),s=o.getIsolationScope();if(!n)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:c=i}=n.getOptions();if(c<=0)return;const u={timestamp:r.dateTimestampInSeconds(),...e},l=a?r.consoleSandbox((()=>a(u,t))):u;null!==l&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),s.addBreadcrumb(l,c))}},7710:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);function o(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||r.SDK_VERSION,t[r.SDK_VERSION]=t[r.SDK_VERSION]||{}}t.getMainCarrier=function(){return o(r.GLOBAL_OBJ),r.GLOBAL_OBJ},t.getSentryCarrier=o},3461:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);t.createCheckInEnvelope=function(e,t,n,o,i){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),o&&i&&(s.dsn=r.dsnToString(i)),t&&(s.trace=r.dropUndefinedKeys(t));const a=function(e){return[{type:"check_in"},e]}(e);return r.createEnvelope(s,[a])}},8143:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENVIRONMENT="production"},1414:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(2744),i=n(7710),s=n(7918);function a(){const e=i.getMainCarrier();return o.getAsyncContextStrategy(e).getCurrentScope()}t.getClient=function(){return a().getClient()},t.getCurrentScope=a,t.getGlobalScope=function(){return r.getGlobalSingleton("globalScope",(()=>new s.Scope))},t.getIsolationScope=function(){const e=i.getMainCarrier();return o.getAsyncContextStrategy(e).getIsolationScope()},t.withIsolationScope=function(){const e=i.getMainCarrier(),t=o.getAsyncContextStrategy(e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(2===r.length){const[e,n]=r;return e?t.withSetIsolationScope(e,n):t.withIsolationScope(n)}return t.withIsolationScope(r[0])},t.withScope=function(){const e=i.getMainCarrier(),t=o.getAsyncContextStrategy(e);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(2===r.length){const[e,n]=r;return e?t.withSetScope(e,n):t.withScope(n)}return t.withScope(r[0])}},3972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},2110:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(7918);t.getDefaultCurrentScope=function(){return r.getGlobalSingleton("defaultCurrentScope",(()=>new o.Scope))},t.getDefaultIsolationScope=function(){return r.getGlobalSingleton("defaultIsolationScope",(()=>new o.Scope))}},6728:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(7172),i=n(7085);t.createEventEnvelope=function(e,t,n,o){const i=r.getSdkMetadataForEnvelopeHeader(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=r.createEventEnvelopeHeaders(e,i,o,t);delete e.sdkProcessingMetadata;const c=[{type:s},e];return r.createEnvelope(a,[c])},t.createSessionEnvelope=function(e,t,n,o){const i=r.getSdkMetadataForEnvelopeHeader(n),s={sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!o&&t&&{dsn:r.dsnToString(t)}},a="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return r.createEnvelope(s,[a])},t.createSpanEnvelope=function(e,t){const n=o.getDynamicSamplingContextFromSpan(e[0]),s=t&&t.getDsn(),a=t&&t.getOptions().tunnel,c={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!a&&s&&{dsn:r.dsnToString(s)}},u=t&&t.getOptions().beforeSendSpan,l=u?e=>u(i.spanToJSON(e)):e=>i.spanToJSON(e),d=[];for(const t of e){const e=l(t);e&&d.push(r.createSpanEnvelopeItem(e))}return r.createEnvelope(c,d)}},491:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972);t.notifyEventProcessors=function e(t,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new r.SyncPromise(((a,c)=>{const u=t[s];if(null===n||"function"!=typeof u)a(n);else{const l=u({...n},i);o.DEBUG_BUILD&&u.id&&null===l&&r.logger.log(`Event processor "${u.id}" dropped event`),r.isThenable(l)?l.then((n=>e(t,n,i,s+1).then(a))).then(null,c):e(t,l,i,s+1).then(a).then(null,c)}}))}},8693:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(8143),i=n(1414),s=n(3972),a=n(2077),c=n(2027);function u(e,t){const n=i.getCurrentScope(),o=i.getClient();if(o){if(o.captureCheckIn)return o.captureCheckIn(e,t,n);s.DEBUG_BUILD&&r.logger.warn("Cannot capture check-in. Client does not support sending check-ins.")}else s.DEBUG_BUILD&&r.logger.warn("Cannot capture check-in. No client defined.");return r.uuid4()}function l(){const e=i.getIsolationScope(),t=i.getCurrentScope(),n=t.getSession()||e.getSession();n&&a.closeSession(n),d(),e.setSession(),t.setSession()}function d(){const e=i.getIsolationScope(),t=i.getCurrentScope(),n=i.getClient(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}t.addEventProcessor=function(e){i.getIsolationScope().addEventProcessor(e)},t.captureCheckIn=u,t.captureEvent=function(e,t){return i.getCurrentScope().captureEvent(e,t)},t.captureException=function(e,t){return i.getCurrentScope().captureException(e,c.parseEventHintOrCaptureContext(t))},t.captureMessage=function(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return i.getCurrentScope().captureMessage(e,n,r)},t.captureSession=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?l():d()},t.close=async function(e){const t=i.getClient();return t?t.close(e):(s.DEBUG_BUILD&&r.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},t.endSession=l,t.flush=async function(e){const t=i.getClient();return t?t.flush(e):(s.DEBUG_BUILD&&r.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},t.isEnabled=function(){const e=i.getClient();return!!e&&!1!==e.getOptions().enabled&&!!e.getTransport()},t.isInitialized=function(){return!!i.getClient()},t.lastEventId=function(){return i.getIsolationScope().lastEventId()},t.setContext=function(e,t){i.getIsolationScope().setContext(e,t)},t.setExtra=function(e,t){i.getIsolationScope().setExtra(e,t)},t.setExtras=function(e){i.getIsolationScope().setExtras(e)},t.setTag=function(e,t){i.getIsolationScope().setTag(e,t)},t.setTags=function(e){i.getIsolationScope().setTags(e)},t.setUser=function(e){i.getIsolationScope().setUser(e)},t.startSession=function(e){const t=i.getClient(),n=i.getIsolationScope(),s=i.getCurrentScope(),{release:c,environment:u=o.DEFAULT_ENVIRONMENT}=t&&t.getOptions()||{},{userAgent:d}=r.GLOBAL_OBJ.navigator||{},p=a.makeSession({release:c,environment:u,user:s.getUser()||n.getUser(),...d&&{userAgent:d},...e}),f=n.getSession();return f&&"ok"===f.status&&a.updateSession(f,{status:"exited"}),l(),n.setSession(p),s.setSession(p),p},t.withMonitor=function(e,t,n){const o=u({monitorSlug:e,status:"in_progress"},n),s=r.timestampInSeconds();function a(t){u({monitorSlug:e,status:t,checkInId:o,duration:r.timestampInSeconds()-s})}return i.withIsolationScope((()=>{let e;try{e=t()}catch(e){throw a("error"),e}return r.isThenable(e)?Promise.resolve(e).then((()=>{a("ok")}),(()=>{a("error")})):a("ok"),e}))}},2131:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414);t.captureFeedback=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.getCurrentScope();const{message:i,name:s,email:a,url:c,source:u,associatedEventId:l,tags:d}=e,p={contexts:{feedback:r.dropUndefinedKeys({contact_email:a,name:s,message:i,url:c,source:u,associated_event_id:l})},type:"feedback",level:"info",tags:d},f=n&&n.getClient()||o.getClient();return f&&f.emit("beforeSendFeedback",p,t),n.captureEvent(p,t)}},1370:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(6789);n(4740),n(3972);const s=n(6151),a=n(7085),c=n(6178),u=n(2221),l=n(9490),d=n(7172);function p(e,t,n,i,s){const c=o.getIsolationScope(),{traceId:u,spanId:l,sampled:p,dsc:h}={...c.getPropagationContext(),...n.getPropagationContext()},g=s?a.spanToTraceHeader(s):r.generateSentryTraceHeader(u,l,p),m=r.dynamicSamplingContextToSentryBaggageHeader(h||(s?d.getDynamicSamplingContextFromSpan(s):d.getDynamicSamplingContextFromClient(u,t))),y=i.headers||("undefined"!=typeof Request&&r.isInstanceOf(e,Request)?e.headers:void 0);if(y){if("undefined"!=typeof Headers&&r.isInstanceOf(y,Headers)){const e=new Headers(y);if(e.set("sentry-trace",g),m){const t=e.get(r.BAGGAGE_HEADER_NAME);if(t){const n=f(t);e.set(r.BAGGAGE_HEADER_NAME,n?`${n},${m}`:m)}else e.set(r.BAGGAGE_HEADER_NAME,m)}return e}if(Array.isArray(y)){const e=[...y.filter((e=>!(Array.isArray(e)&&"sentry-trace"===e[0]))).map((e=>{if(Array.isArray(e)&&e[0]===r.BAGGAGE_HEADER_NAME&&"string"==typeof e[1]){const[t,n,...r]=e;return[t,f(n),...r]}return e})),["sentry-trace",g]];return m&&e.push([r.BAGGAGE_HEADER_NAME,m]),e}{const e="baggage"in y?y.baggage:void 0;let t=[];return Array.isArray(e)?t=e.map((e=>"string"==typeof e?f(e):e)).filter((e=>""===e)):e&&t.push(f(e)),m&&t.push(m),{...y,"sentry-trace":g,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":g,baggage:m}}function f(e){return e.split(",").filter((e=>!e.split("=")[0].startsWith(r.SENTRY_BAGGAGE_KEY_PREFIX))).join(",")}t.addTracingHeadersToFetchRequest=p,t.instrumentFetchRequest=function(e,t,n,d){let f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"auto.http.browser";if(!e.fetchData)return;const h=s.hasTracingEnabled()&&t(e.fetchData.url);if(e.endTimestamp&&h){const t=e.fetchData.__span;if(!t)return;const n=d[t];return void(n&&(function(e,t){if(t.response){u.setHttpStatus(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:u.SPAN_STATUS_ERROR,message:"internal_error"});e.end()}(n,e),delete d[t]))}const g=o.getCurrentScope(),m=o.getClient(),{method:y,url:v}=e.fetchData,_=function(e){try{return new URL(e).href}catch(e){return}}(v),S=_?r.parseUrl(_).host:void 0,E=!!a.getActiveSpan(),b=h&&E?l.startInactiveSpan({name:`${y} ${v}`,attributes:{url:v,type:"fetch","http.method":y,"http.url":_,"server.address":S,[i.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:f,[i.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new c.SentryNonRecordingSpan;if(e.fetchData.__span=b.spanContext().spanId,d[b.spanContext().spanId]=b,n(e.fetchData.url)&&m){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=p(t,m,g,n,s.hasTracingEnabled()&&E?b:void 0)}return b}},8423:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7848),o=n(1414),i=n(8693);function s(){return{bindClient(e){o.getCurrentScope().setClient(e)},withScope:o.withScope,getClient:()=>o.getClient(),getScope:o.getCurrentScope,getIsolationScope:o.getIsolationScope,captureException:(e,t)=>o.getCurrentScope().captureException(e,t),captureMessage:(e,t,n)=>o.getCurrentScope().captureMessage(e,t,n),captureEvent:i.captureEvent,addBreadcrumb:r.addBreadcrumb,setUser:i.setUser,setTags:i.setTags,setTag:i.setTag,setExtra:i.setExtra,setExtras:i.setExtras,setContext:i.setContext,getIntegration(e){const t=o.getClient();return t&&t.getIntegrationByName(e.id)||null},startSession:i.startSession,endSession:i.endSession,captureSession(e){if(e)return i.endSession();!function(){const e=o.getCurrentScope(),t=o.getClient(),n=e.getSession();t&&n&&t.captureSession(n)}()}}}const a=s;t.getCurrentHub=a,t.getCurrentHubShim=s},3022:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4740),o=n(1830),i=n(4226),s=n(5117),a=n(4560),c=n(6178),u=n(2221),l=n(9490),d=n(7172),p=n(9643),f=n(2158),h=n(4896),g=n(6789),m=n(6728),y=n(8693),v=n(1414),_=n(2110),S=n(2744),E=n(7710),b=n(2077),T=n(2461),w=n(7918),C=n(491),R=n(5734),O=n(1034),I=n(764),M=n(3826),A=n(8752),k=n(2402),P=n(6444),D=n(6724),N=n(5431),L=n(2027),x=n(3461),U=n(6151),F=n(9391),B=n(6312),j=n(3557),W=n(7085),G=n(4955),H=n(2049),z=n(5417),V=n(1655),q=n(8143),$=n(7848),Y=n(9582),K=n(8246),J=n(7904),X=n(6739),Z=n(7337),Q=n(3285),ee=n(3867),te=n(13),ne=n(2706),re=n(5402),oe=n(5329),ie=n(710),se=n(7425),ae=n(6015),ce=n(7944),ue=n(7415),le=n(3668),de=n(7339),pe=n(1370),fe=n(2311),he=n(2131),ge=n(8423),me=n(674);t.registerSpanErrorInstrumentation=r.registerSpanErrorInstrumentation,t.getCapturedScopesOnSpan=o.getCapturedScopesOnSpan,t.setCapturedScopesOnSpan=o.setCapturedScopesOnSpan,t.addTracingExtensions=i.addTracingExtensions,t.TRACING_DEFAULTS=s.TRACING_DEFAULTS,t.startIdleSpan=s.startIdleSpan,t.SentrySpan=a.SentrySpan,t.SentryNonRecordingSpan=c.SentryNonRecordingSpan,t.SPAN_STATUS_ERROR=u.SPAN_STATUS_ERROR,t.SPAN_STATUS_OK=u.SPAN_STATUS_OK,t.SPAN_STATUS_UNSET=u.SPAN_STATUS_UNSET,t.getSpanStatusFromHttpCode=u.getSpanStatusFromHttpCode,t.setHttpStatus=u.setHttpStatus,t.continueTrace=l.continueTrace,t.startInactiveSpan=l.startInactiveSpan,t.startNewTrace=l.startNewTrace,t.startSpan=l.startSpan,t.startSpanManual=l.startSpanManual,t.suppressTracing=l.suppressTracing,t.withActiveSpan=l.withActiveSpan,t.getDynamicSamplingContextFromClient=d.getDynamicSamplingContextFromClient,t.getDynamicSamplingContextFromSpan=d.getDynamicSamplingContextFromSpan,t.spanToBaggageHeader=d.spanToBaggageHeader,t.setMeasurement=p.setMeasurement,t.timedEventsToMeasurements=p.timedEventsToMeasurements,t.sampleSpan=f.sampleSpan,t.logSpanEnd=h.logSpanEnd,t.logSpanStart=h.logSpanStart,t.SEMANTIC_ATTRIBUTE_CACHE_HIT=g.SEMANTIC_ATTRIBUTE_CACHE_HIT,t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=g.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,t.SEMANTIC_ATTRIBUTE_CACHE_KEY=g.SEMANTIC_ATTRIBUTE_CACHE_KEY,t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=g.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,t.SEMANTIC_ATTRIBUTE_HTTP_REQUEST_METHOD=g.SEMANTIC_ATTRIBUTE_HTTP_REQUEST_METHOD,t.SEMANTIC_ATTRIBUTE_PROFILE_ID=g.SEMANTIC_ATTRIBUTE_PROFILE_ID,t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=g.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=g.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=g.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.SEMANTIC_ATTRIBUTE_URL_FULL=g.SEMANTIC_ATTRIBUTE_URL_FULL,t.createEventEnvelope=m.createEventEnvelope,t.createSessionEnvelope=m.createSessionEnvelope,t.createSpanEnvelope=m.createSpanEnvelope,t.addEventProcessor=y.addEventProcessor,t.captureCheckIn=y.captureCheckIn,t.captureEvent=y.captureEvent,t.captureException=y.captureException,t.captureMessage=y.captureMessage,t.captureSession=y.captureSession,t.close=y.close,t.endSession=y.endSession,t.flush=y.flush,t.isEnabled=y.isEnabled,t.isInitialized=y.isInitialized,t.lastEventId=y.lastEventId,t.setContext=y.setContext,t.setExtra=y.setExtra,t.setExtras=y.setExtras,t.setTag=y.setTag,t.setTags=y.setTags,t.setUser=y.setUser,t.startSession=y.startSession,t.withMonitor=y.withMonitor,t.getClient=v.getClient,t.getCurrentScope=v.getCurrentScope,t.getGlobalScope=v.getGlobalScope,t.getIsolationScope=v.getIsolationScope,t.withIsolationScope=v.withIsolationScope,t.withScope=v.withScope,t.getDefaultCurrentScope=_.getDefaultCurrentScope,t.getDefaultIsolationScope=_.getDefaultIsolationScope,t.setAsyncContextStrategy=S.setAsyncContextStrategy,t.getMainCarrier=E.getMainCarrier,t.closeSession=b.closeSession,t.makeSession=b.makeSession,t.updateSession=b.updateSession,t.SessionFlusher=T.SessionFlusher,t.Scope=w.Scope,t.notifyEventProcessors=C.notifyEventProcessors,t.getEnvelopeEndpointWithUrlEncodedAuth=R.getEnvelopeEndpointWithUrlEncodedAuth,t.getReportDialogEndpoint=R.getReportDialogEndpoint,t.BaseClient=O.BaseClient,t.ServerRuntimeClient=I.ServerRuntimeClient,t.initAndBind=M.initAndBind,t.setCurrentClient=M.setCurrentClient,t.createTransport=A.createTransport,t.makeOfflineTransport=k.makeOfflineTransport,t.makeMultiplexedTransport=P.makeMultiplexedTransport,t.addIntegration=D.addIntegration,t.defineIntegration=D.defineIntegration,t.getIntegrationsToSetup=D.getIntegrationsToSetup,t.applyScopeDataToEvent=N.applyScopeDataToEvent,t.mergeScopeData=N.mergeScopeData,t.prepareEvent=L.prepareEvent,t.createCheckInEnvelope=x.createCheckInEnvelope,t.hasTracingEnabled=U.hasTracingEnabled,t.isSentryRequestUrl=F.isSentryRequestUrl,t.handleCallbackErrors=B.handleCallbackErrors,t.parameterize=j.parameterize,t.addChildSpanToSpan=W.addChildSpanToSpan,t.getActiveSpan=W.getActiveSpan,t.getRootSpan=W.getRootSpan,t.getSpanDescendants=W.getSpanDescendants,t.getStatusMessage=W.getStatusMessage,t.spanIsSampled=W.spanIsSampled,t.spanTimeInputToSeconds=W.spanTimeInputToSeconds,t.spanToJSON=W.spanToJSON,t.spanToTraceContext=W.spanToTraceContext,t.spanToTraceHeader=W.spanToTraceHeader,t.parseSampleRate=G.parseSampleRate,t.applySdkMetadata=H.applySdkMetadata,t.getTraceData=z.getTraceData,t.getTraceMetaTags=V.getTraceMetaTags,t.DEFAULT_ENVIRONMENT=q.DEFAULT_ENVIRONMENT,t.addBreadcrumb=$.addBreadcrumb,t.functionToStringIntegration=Y.functionToStringIntegration,t.inboundFiltersIntegration=K.inboundFiltersIntegration,t.linkedErrorsIntegration=J.linkedErrorsIntegration,t.moduleMetadataIntegration=X.moduleMetadataIntegration,t.requestDataIntegration=Z.requestDataIntegration,t.captureConsoleIntegration=Q.captureConsoleIntegration,t.debugIntegration=ee.debugIntegration,t.dedupeIntegration=te.dedupeIntegration,t.extraErrorDataIntegration=ne.extraErrorDataIntegration,t.rewriteFramesIntegration=re.rewriteFramesIntegration,t.sessionTimingIntegration=oe.sessionTimingIntegration,t.zodErrorsIntegration=ie.zodErrorsIntegration,t.thirdPartyErrorFilterIntegration=se.thirdPartyErrorFilterIntegration,t.metrics=ae.metrics,t.profiler=ce.profiler,t.metricsDefault=ue.metricsDefault,t.BrowserMetricsAggregator=le.BrowserMetricsAggregator,t.getMetricSummaryJsonForSpan=de.getMetricSummaryJsonForSpan,t.addTracingHeadersToFetchRequest=pe.addTracingHeadersToFetchRequest,t.instrumentFetchRequest=pe.instrumentFetchRequest,t.trpcMiddleware=fe.trpcMiddleware,t.captureFeedback=he.captureFeedback,t.getCurrentHub=ge.getCurrentHub,t.getCurrentHubShim=ge.getCurrentHubShim,t.SDK_VERSION=me.SDK_VERSION},6724:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(3972),s=[];function a(e,t,n){if(n[t.name])i.DEBUG_BUILD&&r.logger.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===s.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),s.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}i.DEBUG_BUILD&&r.logger.log(`Integration installed: ${t.name}`)}}t.addIntegration=function(e){const t=o.getClient();t?t.addIntegration(e):i.DEBUG_BUILD&&r.logger.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},t.afterSetupIntegrations=function(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)},t.defineIntegration=function(e){return e},t.getIntegrationsToSetup=function(e){const t=e.defaultIntegrations||[],n=e.integrations;let o;t.forEach((e=>{e.isDefaultInstance=!0})),o=Array.isArray(n)?[...t,...n]:"function"==typeof n?r.arrayify(n(t)):t;const i=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(o),s=i.findIndex((e=>"Debug"===e.name));if(s>-1){const[e]=i.splice(s,1);i.push(e)}return i},t.installedIntegrations=s,t.setupIntegration=a,t.setupIntegrations=function(e,t){const n={};return t.forEach((t=>{t&&a(e,t,n)})),n}},3285:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(8693),s=n(6724).defineIntegration((function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).levels||r.CONSOLE_LEVELS;return{name:"CaptureConsole",setup(t){"console"in r.GLOBAL_OBJ&&r.addConsoleInstrumentationHandler((n=>{let{args:s,level:a}=n;o.getClient()===t&&e.includes(a)&&function(e,t){const n={level:r.severityLevelFromString(t),extra:{arguments:e}};o.withScope((o=>{if(o.addEventProcessor((e=>(e.logger="console",r.addExceptionMechanism(e,{handled:!1,type:"console"}),e))),"assert"===t){if(!e[0]){const t=`Assertion failed: ${r.safeJoin(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),i.captureMessage(t,n)}return}const s=e.find((e=>e instanceof Error));if(s)return void i.captureException(s,n);const a=r.safeJoin(e," ");i.captureMessage(a,n)}))}(s,a)}))}}}));t.captureConsoleIntegration=s},3867:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724).defineIntegration((function(){const e={debugger:!1,stringify:!1,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return{name:"Debug",setup(t){t.on("beforeSendEvent",((t,n)=>{e.debugger,r.consoleSandbox((()=>{e.stringify?(console.log(JSON.stringify(t,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(t),n&&Object.keys(n).length&&console.log(n))}))}))}}}));t.debugIntegration=o},13:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724),i=n(3972),s=o.defineIntegration((()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(a(t,e))return i.DEBUG_BUILD&&r.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}}));function a(e,t){return!(!t||!function(e,t){const n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!u(e,t)&&!!c(e,t))))}(e,t)&&!function(e,t){const n=l(t),r=l(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!u(e,t)&&!!c(e,t)))}(e,t))}function c(e,t){let n=r.getFramesFromEvent(e),o=r.getFramesFromEvent(t);if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;if(o.length!==n.length)return!1;for(let e=0;e<o.length;e++){const t=o[e],r=n[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function u(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function l(e){return e.exception&&e.exception.values&&e.exception.values[0]}t._shouldDropEvent=a,t.dedupeIntegration=s},2706:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724),i=n(3972),s=o.defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,o,s){const{maxValueLength:a=250}=s.getOptions();return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(!t.originalException||!r.isError(t.originalException))return e;const a=t.originalException.name||t.originalException.constructor.name,c=function(e,t,n){try{const o=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],i={};for(const t of Object.keys(e)){if(-1!==o.indexOf(t))continue;const s=e[t];i[t]=r.isError(s)||"string"==typeof s?r.truncate(`${s}`,n):s}if(t&&void 0!==e.cause&&(i.cause=r.isError(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];i[e]=r.isError(n)?n.toString():n}}return i}catch(e){i.DEBUG_BUILD&&r.logger.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,o,s);if(c){const t={...e.contexts},o=r.normalize(c,n);return r.isPlainObject(o)&&(r.addNonEnumerableProperty(o,"__sentry_skip_normalization__",!0),t[a]=o),{...e,contexts:t}}return e}(e,o,t,n,a)}}}));t.extraErrorDataIntegration=s},9582:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(6724);let s;const a=new WeakMap,c=i.defineIntegration((()=>({name:"FunctionToString",setupOnce(){s=Function.prototype.toString;try{Function.prototype.toString=function(){const e=r.getOriginalFunction(this),t=a.has(o.getClient())&&void 0!==e?e:this;for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return s.apply(t,i)}}catch(e){}},setup(e){a.set(e,!0)}})));t.functionToStringIntegration=c},8246:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972),i=n(6724),s=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],a=i.defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"InboundFilters",processEvent(t,n,i){const a=i.getOptions(),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:s],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,a);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${r.getEventDescription(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let n;e.message&&t.push(e.message);try{n=e.exception.values[e.exception.values.length-1]}catch(e){}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}(e).some((e=>r.stringMatchesSomePattern(e,t)))}(e,t.ignoreErrors)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${r.getEventDescription(e)}`),!0):function(e){return!e.type&&(!(!e.exception||!e.exception.values||0===e.exception.values.length)&&(!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))))}(e)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${r.getEventDescription(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&r.stringMatchesSomePattern(n,t)}(e,t.ignoreTransactions)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${r.getEventDescription(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=c(e);return!!n&&r.stringMatchesSomePattern(n,t)}(e,t.denyUrls)?(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${r.getEventDescription(e)}.\nUrl: ${c(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=c(e);return!n||r.stringMatchesSomePattern(n,t)}(e,t.allowUrls)&&(o.DEBUG_BUILD&&r.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${r.getEventDescription(e)}.\nUrl: ${c(e)}`),!0)}(t,u)?null:t}}}));function c(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return o.DEBUG_BUILD&&r.logger.error(`Cannot extract url for event ${r.getEventDescription(e)}`),null}}t.inboundFiltersIntegration=a},7904:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724).defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,o,i){const s=i.getOptions();r.applyAggregateErrorsToEvent(r.exceptionFromError,s.stackParser,s.maxValueLength,n,t,e,o)}}}));t.linkedErrorsIntegration=o},6739:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724),i=n(8469),s=o.defineIntegration((()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",(e=>{r.forEachEnvelopeItem(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(i.stripMetadataFromStackFrames(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;const n=e.getOptions().stackParser;i.addMetadataToStackFrames(n,t)}))}})));t.moduleMetadataIntegration=s},7337:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724),i={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},s=o.defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...i,...e,include:{...i.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...i.include.user,...(e.include||{}).user}}};return{name:"RequestData",processEvent(e){const{sdkProcessingMetadata:n={}}=e,o=n.request;if(!o)return e;const i=function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...o}}=e,i=["method"];for(const[e,t]of Object.entries(o))t&&i.push(e);let s;if(void 0===r)s=!0;else if("boolean"==typeof r)s=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);s=e}return{include:{ip:n,user:s,request:0!==i.length?i:void 0,transaction:t}}}(t);return r.addRequestDataToEvent(e,o,i)}}}));t.requestDataIntegration=s},5402:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724).defineIntegration((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.root,n=e.prefix||"app:///",o="window"in r.GLOBAL_OBJ&&void 0!==r.GLOBAL_OBJ.window,s=e.iteratee||i({isBrowser:o,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>s(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}}));function i(e){let{isBrowser:t,root:n,prefix:o}=e;return e=>{if(!e.filename)return e;const i=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),s=/^\//.test(e.filename);if(t){if(n){const t=e.filename;0===t.indexOf(n)&&(e.filename=t.replace(n,o))}}else if(i||s){const t=i?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,s=n?r.relative(n,t):r.basename(t);e.filename=`${o}${s}`}return e}}t.generateIteratee=i,t.rewriteFramesIntegration=o},5329:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724).defineIntegration((()=>{const e=1e3*r.timestampInSeconds();return{name:"SessionTiming",processEvent(t){const n=1e3*r.timestampInSeconds();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}}));t.sessionTimingIntegration=o},7425:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(6724),i=n(8469),s=o.defineIntegration((e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",(e=>{r.forEachEnvelopeItem(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(i.stripMetadataFromStackFrames(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;const n=e.getOptions().stackParser;i.addMetadataToStackFrames(n,t)}))},processEvent(t){const n=function(e){const t=r.getFramesFromEvent(e);if(t)return t.filter((e=>!!e.filename)).map((e=>e.module_metadata?Object.keys(e.module_metadata).filter((e=>e.startsWith(a))).map((e=>e.slice(a.length))):[]))}(t);if(n&&n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"]((t=>!t.some((t=>e.filterKeys.includes(t)))))){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}return t}}))),a="_sentryBundlerPluginAppKey:";t.thirdPartyErrorFilterIntegration=s},710:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);function o(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function i(e){const t=new Set;for(const n of e.issues)n.path&&n.path[0]&&t.add(n.path[0]);const n=Array.from(t);return`Failed to validate keys: ${r.truncate(n.join(", "),100)}`}function s(e,t,n){return t.exception&&t.exception.values&&n&&n.originalException&&(s=n.originalException,r.isError(s)&&"ZodError"===s.name&&Array.isArray(s.errors))&&0!==n.originalException.issues.length?{...t,exception:{...t.exception,values:[{...t.exception.values[0],value:i(n.originalException)},...t.exception.values.slice(1)]},extra:{...t.extra,"zoderror.issues":n.originalException.errors.slice(0,e).map(o)}}:t;var s}const a=n(6724).defineIntegration((function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).limit||10;return{name:"ZodErrors",processEvent:(t,n)=>s(e,t,n)}}));t.applyZodErrorsToEvent=s,t.zodErrorsIntegration=a},8469:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=new Map,i=new Set;function s(e,t){return function(e){if(r.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(r.GLOBAL_OBJ._sentryModuleMetadata)){const n=r.GLOBAL_OBJ._sentryModuleMetadata[t];if(i.has(t))continue;i.add(t);const s=e(t);for(const e of s.reverse())if(e.filename){o.set(e.filename,n);break}}}(e),o.get(t)}t.addMetadataToStackFrames=function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=s(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}},t.getMetadataForUrl=s,t.stripMetadataFromStackFrames=function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}},179:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(7085),i=n(3573),s=n(4046),a=n(4725),c=n(4633);t.MetricsAggregator=class{constructor(e){this._client=e,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval((()=>this._flush()),i.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*i.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.timestampInSeconds();const d=Math.floor(l),p=c.sanitizeMetricKey(t),f=c.sanitizeTags(u),h=c.sanitizeUnit(s),g=c.getBucketKey(e,p,h,f);let m=this._buckets.get(g);const y=m&&e===i.SET_METRIC_TYPE?m.metric.weight:0;m?(m.metric.add(n),m.timestamp<d&&(m.timestamp=d)):(m={metric:new a.METRIC_MAP[e](n),timestamp:d,metricType:e,name:p,unit:h,tags:f},this._buckets.set(g,m));const v="string"==typeof n?m.metric.weight-y:n;o.updateMetricSummaryOnActiveSpan(e,p,v,h,u,g),this._bucketsTotalWeight+=m.metric.weight,this._bucketsTotalWeight>=i.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush)return this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),void this._buckets.clear();const e=Math.floor(r.timestampInSeconds())-i.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,t=new Map;for(const[n,r]of this._buckets)r.timestamp<=e&&(t.set(n,r),this._bucketsTotalWeight-=r.metric.weight);for(const[e]of t)this._buckets.delete(e);this._captureMetrics(t)}_captureMetrics(e){if(e.size>0){const t=Array.from(e).map((e=>{let[,t]=e;return t}));s.captureAggregateMetrics(this._client,t)}}}},3668:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(7085),i=n(3573),s=n(4046),a=n(4725),c=n(4633);t.BrowserMetricsAggregator=class{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),i.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.timestampInSeconds();const d=Math.floor(l),p=c.sanitizeMetricKey(t),f=c.sanitizeTags(u),h=c.sanitizeUnit(s),g=c.getBucketKey(e,p,h,f);let m=this._buckets.get(g);const y=m&&e===i.SET_METRIC_TYPE?m.metric.weight:0;m?(m.metric.add(n),m.timestamp<d&&(m.timestamp=d)):(m={metric:new a.METRIC_MAP[e](n),timestamp:d,metricType:e,name:p,unit:h,tags:f},this._buckets.set(g,m));const v="string"==typeof n?m.metric.weight-y:n;o.updateMetricSummaryOnActiveSpan(e,p,v,h,u,g)}flush(){if(0===this._buckets.size)return;const e=Array.from(this._buckets.values());s.captureAggregateMetrics(this._client,e),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}},3573:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.COUNTER_METRIC_TYPE="c",t.DEFAULT_BROWSER_FLUSH_INTERVAL=5e3,t.DEFAULT_FLUSH_INTERVAL=1e4,t.DISTRIBUTION_METRIC_TYPE="d",t.GAUGE_METRIC_TYPE="g",t.MAX_WEIGHT=1e4,t.SET_METRIC_TYPE="s"},4046:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(4633);function i(e,t,n,i){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),i&&t&&(s.dsn=r.dsnToString(t));const a=function(e){const t=o.serializeMetricBuckets(e);return[{type:"statsd",length:t.length},t]}(e);return r.createEnvelope(s,[a])}t.captureAggregateMetrics=function(e,t){r.logger.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=i(t,e.getDsn(),e.getSdkMetadata(),e.getOptions().tunnel);e.sendEnvelope(n)},t.createMetricEnvelope=i},7415:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(179),o=n(6015),i={increment:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;o.metrics.increment(r.MetricsAggregator,e,t,n)},distribution:function(e,t,n){o.metrics.distribution(r.MetricsAggregator,e,t,n)},set:function(e,t,n){o.metrics.set(r.MetricsAggregator,e,t,n)},gauge:function(e,t,n){o.metrics.gauge(r.MetricsAggregator,e,t,n)},timing:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"second",i=arguments.length>3?arguments[3]:void 0;return o.metrics.timing(r.MetricsAggregator,e,t,n,i)},getMetricsAggregatorForClient:function(e){return o.metrics.getMetricsAggregatorForClient(e,r.MetricsAggregator)}};t.metricsDefault=i},6015:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(3972);n(4740);const s=n(7085),a=n(9490),c=n(6312),u=n(3573);function l(e,t){const n=r.getGlobalSingleton("globalMetricsAggregators",(()=>new WeakMap)),o=n.get(e);if(o)return o;const i=new t(e);return e.on("flush",(()=>i.flush())),e.on("close",(()=>i.close())),n.set(e,i),i}function d(e,t,n,a){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const u=c.client||o.getClient();if(!u)return;const d=s.getActiveSpan(),p=d?s.getRootSpan(d):void 0,f=p&&s.spanToJSON(p).description,{unit:h,tags:g,timestamp:m}=c,{release:y,environment:v}=u.getOptions(),_={};y&&(_.release=y),v&&(_.environment=v),f&&(_.transaction=f),i.DEBUG_BUILD&&r.logger.log(`Adding value of ${a} to ${t} metric ${n}`),l(u,e).add(t,n,a,h,{..._,...g},m)}function p(e,t,n,r){d(e,u.DISTRIBUTION_METRIC_TYPE,t,h(n),r)}const f={increment:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0;d(e,u.COUNTER_METRIC_TYPE,t,h(n),r)},distribution:p,set:function(e,t,n,r){d(e,u.SET_METRIC_TYPE,t,n,r)},gauge:function(e,t,n,r){d(e,u.GAUGE_METRIC_TYPE,t,h(n),r)},timing:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"second",i=arguments.length>4?arguments[4]:void 0;if("function"==typeof n){const o=r.timestampInSeconds();return a.startSpanManual({op:"metrics.timing",name:t,startTime:o,onlyIfParent:!0},(s=>c.handleCallbackErrors((()=>n()),(()=>{}),(()=>{const n=r.timestampInSeconds();p(e,t,n-o,{...i,unit:"second"}),s.end(n)}))))}p(e,t,n,{...i,unit:o})},getMetricsAggregatorForClient:l};function h(e){return"string"==typeof e?parseInt(e):e}t.metrics=f},4725:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3573),o=n(4633);class i{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}}class s{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class a{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}}class c{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?o.simpleHash(e):e)).join(":")}}const u={[r.COUNTER_METRIC_TYPE]:i,[r.GAUGE_METRIC_TYPE]:s,[r.DISTRIBUTION_METRIC_TYPE]:a,[r.SET_METRIC_TYPE]:c};t.CounterMetric=i,t.DistributionMetric=a,t.GaugeMetric=s,t.METRIC_MAP=u,t.SetMetric=c},7339:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o="_sentryMetrics";t.getMetricSummaryJsonForSpan=function(e){const t=e[o];if(!t)return;const n={};for(const[,[e,o]]of t)(n[e]||(n[e]=[])).push(r.dropUndefinedKeys(o));return n},t.updateMetricSummaryOnSpan=function(e,t,n,r,i,s,a){const c=e[o]||(e[o]=new Map),u=`${t}:${n}@${i}`,l=c.get(a);if(l){const[,e]=l;c.set(a,[u,{min:Math.min(e.min,r),max:Math.max(e.max,r),count:e.count+=1,sum:e.sum+=r,tags:e.tags}])}else c.set(a,[u,{min:r,max:r,count:1,sum:r,tags:s}])}},4633:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);function o(e){return e.replace(/[^\w\-./]+/gi,"")}const i=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];t.getBucketKey=function(e,t,n,o){return`${e}${t}${n}${Object.entries(r.dropUndefinedKeys(o)).sort(((e,t)=>e[0].localeCompare(t[0])))}`},t.sanitizeMetricKey=function(e){return e.replace(/[^\w\-.]+/gi,"_")},t.sanitizeTags=function(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[o(r)]=(n=String(e[r]),[...n].reduce(((e,t)=>e+function(e){for(const[t,n]of i)if(e===t)return n;return e}(t)),"")));var n;return t},t.sanitizeUnit=function(e){return e.replace(/[^\w]+/gi,"_")},t.serializeMetricBuckets=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((e=>{let[t,n]=e;return`${t}:${n}`})).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t},t.simpleHash=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}},7944:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(3972);function s(e){return!!e&&void 0!==e._profiler&&"function"==typeof e._profiler.start&&"function"==typeof e._profiler.stop}const a={startProfiler:function(){const e=o.getClient();if(!e)return void(i.DEBUG_BUILD&&r.logger.warn("No Sentry client available, profiling is not started"));const t=e.getIntegrationByName("ProfilingIntegration");t?s(t)?t._profiler.start():i.DEBUG_BUILD&&r.logger.warn("Profiler is not available on profiling integration."):i.DEBUG_BUILD&&r.logger.warn("ProfilingIntegration is not available")},stopProfiler:function(){const e=o.getClient();if(!e)return void(i.DEBUG_BUILD&&r.logger.warn("No Sentry client available, profiling is not started"));const t=e.getIntegrationByName("ProfilingIntegration");t?s(t)?t._profiler.stop():i.DEBUG_BUILD&&r.logger.warn("Profiler is not available on profiling integration."):i.DEBUG_BUILD&&r.logger.warn("ProfilingIntegration is not available")}};t.profiler=a},7918:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(2077),i=n(9423);class s{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=r.generatePropagationContext()}clone(){const e=new s;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,i._setSpanForScope(e,i._getSpanForScope(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&o.updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,o]=t instanceof a?[t.getScopeData(),t.getRequestSession()]:r.isPlainObject(t)?[e,e.requestSession]:[],{tags:i,extra:s,user:c,contexts:u,level:l,fingerprint:d=[],propagationContext:p}=n||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...u},c&&Object.keys(c).length&&(this._user=c),l&&(this._level=l),d.length&&(this._fingerprint=d),p&&(this._propagationContext=p),o&&(this._requestSession=o),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,i._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=r.generatePropagationContext(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const o={timestamp:r.dateTimestampInSeconds(),...e},i=this._breadcrumbs;return i.push(o),this._breadcrumbs=i.length>n?i.slice(-n):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:i._getSpanForScope(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:r.uuid4();if(!this._client)return r.logger.warn("No client configured on scope - will not capture exception!"),n;const o=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:o,...t,event_id:n},this),n}captureMessage(e,t,n){const o=n&&n.event_id?n.event_id:r.uuid4();if(!this._client)return r.logger.warn("No client configured on scope - will not capture message!"),o;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:o},this),o}captureEvent(e,t){const n=t&&t.event_id?t.event_id:r.uuid4();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(r.logger.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const a=s;t.Scope=a},3826:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(3972);function s(e){o.getCurrentScope().setClient(e)}t.initAndBind=function(e,t){!0===t.debug&&(i.DEBUG_BUILD?r.logger.enable():r.consoleSandbox((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),o.getCurrentScope().update(t.initialScope);const n=new e(t);return s(n),n.init(),n},t.setCurrentClient=s},6789:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SEMANTIC_ATTRIBUTE_CACHE_HIT="cache.hit",t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE="cache.item_size",t.SEMANTIC_ATTRIBUTE_CACHE_KEY="cache.key",t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME="sentry.exclusive_time",t.SEMANTIC_ATTRIBUTE_HTTP_REQUEST_METHOD="http.request.method",t.SEMANTIC_ATTRIBUTE_PROFILE_ID="sentry.profile_id",t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON="sentry.idle_span_finish_reason",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT="sentry.measurement_unit",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE="sentry.measurement_value",t.SEMANTIC_ATTRIBUTE_SENTRY_OP="sentry.op",t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN="sentry.origin",t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE="sentry.sample_rate",t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE="sentry.source",t.SEMANTIC_ATTRIBUTE_URL_FULL="url.full"},764:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1034),i=n(3461),s=n(1414),a=n(3972),c=n(2461),u=n(4740),l=n(9423),d=n(7085),p=n(7172);class f extends o.BaseClient{constructor(e){u.registerSpanErrorInstrumentation(),super(e)}eventFromException(e,t){return r.resolvedSyncPromise(r.eventFromUnknownInput(this,this._options.stackParser,e,t))}eventFromMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2?arguments[2]:void 0;return r.resolvedSyncPromise(r.eventFromMessage(this._options.stackParser,e,t,n,this._options.attachStacktrace))}captureException(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher){const e=s.getIsolationScope().getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureException(e,t,n)}captureEvent(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&"exception"===(e.type||"exception")&&e.exception&&e.exception.values&&e.exception.values.length>0){const e=s.getIsolationScope().getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureEvent(e,t,n)}close(e){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(e)}initSessionFlusher(){const{release:e,environment:t}=this._options;e?this._sessionFlusher=new c.SessionFlusher(this,{release:e,environment:t}):a.DEBUG_BUILD&&r.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(e,t,n){const o="checkInId"in e&&e.checkInId?e.checkInId:r.uuid4();if(!this._isEnabled())return a.DEBUG_BUILD&&r.logger.warn("SDK not enabled, will not capture checkin."),o;const s=this.getOptions(),{release:c,environment:u,tunnel:l}=s,d={check_in_id:o,monitor_slug:e.monitorSlug,status:e.status,release:c,environment:u};"duration"in e&&(d.duration=e.duration),t&&(d.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone,failure_issue_threshold:t.failureIssueThreshold,recovery_threshold:t.recoveryThreshold});const[p,f]=this._getTraceInfoFromScope(n);f&&(d.contexts={trace:f});const h=i.createCheckInEnvelope(d,p,this.getSdkMetadata(),l,this.getDsn());return a.DEBUG_BUILD&&r.logger.info("Sending checkin:",e.monitorSlug,e.status),this.sendEnvelope(h),o}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():a.DEBUG_BUILD&&r.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(e,t,n,r){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts={...e.contexts,runtime:(e.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),super._prepareEvent(e,t,n,r)}_getTraceInfoFromScope(e){if(!e)return[void 0,void 0];const t=l._getSpanForScope(e);if(t){const e=d.getRootSpan(t);return[p.getDynamicSamplingContextFromSpan(e),d.spanToTraceContext(e)]}const{traceId:n,spanId:r,parentSpanId:o,dsc:i}=e.getPropagationContext(),s={trace_id:n,span_id:r,parent_span_id:o};return i?[i,s]:[p.getDynamicSamplingContextFromClient(n,this),s]}}t.ServerRuntimeClient=f},2077:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||r.timestampInSeconds(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:r.uuid4()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}t.closeSession=function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),o(e,n)},t.makeSession=function(e){const t=r.timestampInSeconds(),n={sid:r.uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return r.dropUndefinedKeys({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&o(n,e),n},t.updateSession=o},2461:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414);t.SessionFlusher=class{constructor(e,t){this._client=e,this.flushTimeout=60,this._pendingAggregates=new Map,this._isEnabled=!0,this._intervalId=setInterval((()=>this.flush()),1e3*this.flushTimeout),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=t}flush(){const e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates=new Map,this._client.sendSession(e))}getSessionAggregates(){const e=Array.from(this._pendingAggregates.values()),t={attrs:this._sessionAttrs,aggregates:e};return r.dropUndefinedKeys(t)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const e=o.getIsolationScope(),t=e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e.setRequestSession(void 0))}_incrementSessionStatusCount(e,t){const n=new Date(t).setSeconds(0,0);let r=this._pendingAggregates.get(n);switch(r||(r={started:new Date(n).toISOString()},this._pendingAggregates.set(n,r)),e){case"errored":return r.errored=(r.errored||0)+1,r.errored;case"ok":return r.exited=(r.exited||0)+1,r.exited;default:return r.crashed=(r.crashed||0)+1,r.crashed}}}},7172:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(8143),i=n(1414),s=n(6789),a=n(6151),c=n(7085),u="_frozenDsc";function l(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},s=r.dropUndefinedKeys({environment:n.environment||o.DEFAULT_ENVIRONMENT,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",s),s}function d(e){const t=i.getClient();if(!t)return{};const n=l(c.spanToJSON(e).trace_id||"",t),o=c.getRootSpan(e),d=o[u];if(d)return d;const p=o.spanContext().traceState,f=p&&p.get("sentry.dsc"),h=f&&r.baggageHeaderToDynamicSamplingContext(f);if(h)return h;const g=c.spanToJSON(o),m=g.data||{},y=m[s.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];null!=y&&(n.sample_rate=`${y}`);const v=m[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],_=g.description;return"url"!==v&&_&&(n.transaction=_),a.hasTracingEnabled()&&(n.sampled=String(c.spanIsSampled(o))),t.emit("createDsc",n,o),n}t.freezeDscOnSpan=function(e,t){const n=e;r.addNonEnumerableProperty(n,u,t)},t.getDynamicSamplingContextFromClient=l,t.getDynamicSamplingContextFromSpan=d,t.spanToBaggageHeader=function(e){const t=d(e);return r.dynamicSamplingContextToSentryBaggageHeader(t)}},4740:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972),i=n(7085),s=n(2221);let a=!1;function c(){const e=i.getActiveSpan(),t=e&&i.getRootSpan(e);if(t){const e="internal_error";o.DEBUG_BUILD&&r.logger.log(`[Tracing] Root span: ${e} -> Global error occured`),t.setStatus({code:s.SPAN_STATUS_ERROR,message:e})}}c.tag="sentry_tracingErrorCallback",t.registerSpanErrorInstrumentation=function(){a||(a=!0,r.addGlobalErrorInstrumentationHandler(c),r.addGlobalUnhandledRejectionInstrumentationHandler(c))}},4226:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4740);t.addTracingExtensions=function(){r.registerSpanErrorInstrumentation()}},5117:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(3972),s=n(6789),a=n(6151),c=n(9423),u=n(7085),l=n(6178),d=n(2221),p=n(9490),f={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};t.TRACING_DEFAULTS=f,t.startIdleSpan=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Map;let h,g=!1,m="externalFinish",y=!t.disableAutoFinish;const v=[],{idleTimeout:_=f.idleTimeout,finalTimeout:S=f.finalTimeout,childSpanTimeout:E=f.childSpanTimeout,beforeSpanEnd:b}=t,T=o.getClient();if(!T||!a.hasTracingEnabled())return new l.SentryNonRecordingSpan;const w=o.getCurrentScope(),C=u.getActiveSpan(),R=function(e){const t=p.startInactiveSpan(e);return c._setSpanForScope(o.getCurrentScope(),t),i.DEBUG_BUILD&&r.logger.log("[Tracing] Started span is an idle span"),t}(e);function O(){h&&(clearTimeout(h),h=void 0)}function I(e){O(),h=setTimeout((()=>{!g&&0===n.size&&y&&(m="idleTimeout",R.end(e))}),_)}function M(e){h=setTimeout((()=>{!g&&y&&(m="heartbeatFailed",R.end(e))}),E)}function A(e){g=!0,n.clear(),v.forEach((e=>e())),c._setSpanForScope(w,C);const t=u.spanToJSON(R),{start_timestamp:o}=t;if(!o)return;(t.data||{})[s.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||R.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,m),r.logger.log(`[Tracing] Idle span "${t.op}" finished`);const a=u.getSpanDescendants(R).filter((e=>e!==R));let l=0;a.forEach((t=>{t.isRecording()&&(t.setStatus({code:d.SPAN_STATUS_ERROR,message:"cancelled"}),t.end(e),i.DEBUG_BUILD&&r.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=u.spanToJSON(t),{timestamp:o=0,start_timestamp:s=0}=n,a=s<=e,c=o-s<=(S+_)/1e3;if(i.DEBUG_BUILD){const e=JSON.stringify(t,void 0,2);a?c||r.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",e):r.logger.log("[Tracing] Discarding span since it happened after idle span was finished",e)}c&&a||(u.removeChildSpanFromSpan(R,t),l++)})),l>0&&R.setAttribute("sentry.idle_span_discarded_spans",l)}return R.end=new Proxy(R.end,{apply(e,t,n){b&&b(R);const[o,...i]=n,s=o||r.timestampInSeconds(),a=u.spanTimeInputToSeconds(s),c=u.getSpanDescendants(R).filter((e=>e!==R));if(!c.length)return A(a),Reflect.apply(e,t,[a,...i]);const l=c.map((e=>u.spanToJSON(e).timestamp)).filter((e=>!!e)),d=l.length?Math.max(...l):void 0,p=u.spanToJSON(R).start_timestamp,f=Math.min(p?p+S/1e3:1/0,Math.max(p||-1/0,Math.min(a,d||1/0)));return A(f),Reflect.apply(e,t,[f,...i])}}),v.push(T.on("spanStart",(e=>{var t;g||e===R||u.spanToJSON(e).timestamp||u.getSpanDescendants(R).includes(e)&&(t=e.spanContext().spanId,O(),n.set(t,!0),M(r.timestampInSeconds()+E/1e3))}))),v.push(T.on("spanEnd",(e=>{var t;g||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&I(r.timestampInSeconds()+_/1e3))}))),v.push(T.on("idleSpanEnableAutoFinish",(e=>{e===R&&(y=!0,I(),n.size&&M())}))),t.disableAutoFinish||I(),setTimeout((()=>{g||(R.setStatus({code:d.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),m="finalTimeout",R.end())}),S),R}},4896:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972),i=n(7085);t.logSpanEnd=function(e){if(!o.DEBUG_BUILD)return;const{description:t="< unknown name >",op:n="< unknown op >"}=i.spanToJSON(e),{spanId:s}=e.spanContext(),a=`[Tracing] Finishing "${n}" ${i.getRootSpan(e)===e?"root ":""}span "${t}" with ID ${s}`;r.logger.log(a)},t.logSpanStart=function(e){if(!o.DEBUG_BUILD)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:s}=i.spanToJSON(e),{spanId:a}=e.spanContext(),c=i.spanIsSampled(e),u=i.getRootSpan(e),l=u===e,d=`[Tracing] Starting ${c?"sampled":"unsampled"} ${l?"root ":""}span`,p=[`op: ${n}`,`name: ${t}`,`ID: ${a}`];if(s&&p.push(`parent ID: ${s}`),!l){const{op:e,description:t}=i.spanToJSON(u);p.push(`root ID: ${u.spanContext().spanId}`),e&&p.push(`root op: ${e}`),t&&p.push(`root description: ${t}`)}r.logger.log(`${d}\n  ${p.join("\n  ")}`)}},9643:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6789),o=n(7085);t.setMeasurement=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.getActiveSpan();const s=i&&o.getRootSpan(i);s&&s.addEvent(e,{[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t,[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:n})},t.timedEventsToMeasurements=function(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},o=n[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],i=n[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];"string"==typeof o&&"number"==typeof i&&(t[e.name]={value:i,unit:o})})),t}},2158:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972),i=n(6151),s=n(4955);t.sampleSpan=function(e,t){if(!i.hasTracingEnabled(e))return[!1];let n;n="function"==typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;const a=s.parseSampleRate(n);return void 0===a?(o.DEBUG_BUILD&&r.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):a?Math.random()<a?[!0,a]:(o.DEBUG_BUILD&&r.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,a]):(o.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,a])}},6178:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(7085);t.SentryNonRecordingSpan=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._traceId=e.traceId||r.uuid4(),this._spanId=e.spanId||r.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:o.TRACE_FLAG_NONE}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}},4560:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(3972),s=n(6728),a=n(7339),c=n(6789),u=n(7085),l=n(7172),d=n(4896),p=n(9643),f=n(1830);class h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._traceId=e.traceId||r.uuid4(),this._spanId=e.spanId||r.uuid4().substring(16),this._startTime=e.startTimestamp||r.timestampInSeconds(),this._attributes={},this.setAttributes({[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[c.SEMANTIC_ATTRIBUTE_SENTRY_OP]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?u.TRACE_FLAG_SAMPLED:u.TRACE_FLAG_NONE}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=u.spanTimeInputToSeconds(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=u.spanTimeInputToSeconds(e),d.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return r.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:u.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[c.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[c.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:p.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&u.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?u.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){i.DEBUG_BUILD&&r.logger.log("[Tracing] Adding an event to span:",e);const o=g(t)?t:n||r.timestampInSeconds(),s=g(t)?{}:t||{},a={name:e,time:u.spanTimeInputToSeconds(o),attributes:s};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=o.getClient();if(e&&e.emit("spanEnd",this),!this._isStandaloneSpan&&this!==u.getRootSpan(this))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=o.getClient();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");const s=t.getTransport();s&&s.send(e).then(null,(e=>{i.DEBUG_BUILD&&r.logger.error("Error while sending span:",e)}))}(s.createSpanEnvelope([this],e)):(i.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();t&&(f.getCapturedScopesOnSpan(this).scope||o.getCurrentScope()).captureEvent(t)}_convertSpanToTransaction(){if(!m(u.spanToJSON(this)))return;this._name||(i.DEBUG_BUILD&&r.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=f.getCapturedScopesOnSpan(this),n=(e||o.getCurrentScope()).getClient()||o.getClient();if(!0!==this._sampled)return i.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(n&&n.recordDroppedEvent("sample_rate","transaction"));const s=u.getSpanDescendants(this).filter((e=>e!==this&&!function(e){return e instanceof h&&e.isStandaloneSpan()}(e))).map((e=>u.spanToJSON(e))).filter(m),d=this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],g={contexts:{trace:u.spanToTransactionTraceContext(this)},spans:s.length>1e3?s.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...r.dropUndefinedKeys({dynamicSamplingContext:l.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:a.getMetricSummaryJsonForSpan(this),...d&&{transaction_info:{source:d}}},y=p.timedEventsToMeasurements(this._events);return y&&Object.keys(y).length&&(i.DEBUG_BUILD&&r.logger.log("[Measurements] Adding measurements to transaction event",JSON.stringify(y,void 0,2)),g.measurements=y),g}}function g(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function m(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}t.SentrySpan=h},2221:(e,t)=>{function n(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}Object.defineProperty(t,"__esModule",{value:!0}),t.SPAN_STATUS_ERROR=2,t.SPAN_STATUS_OK=1,t.SPAN_STATUS_UNSET=0,t.getSpanStatusFromHttpCode=n,t.setHttpStatus=function(e,t){e.setAttribute("http.response.status_code",t);const r=n(t);"unknown_error"!==r.message&&e.setStatus(r)}},9490:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(7710),i=n(1414),s=n(2744),a=n(3972),c=n(6789),u=n(6312),l=n(6151),d=n(9423),p=n(7085),f=n(7172),h=n(4896),g=n(2158),m=n(6178),y=n(4560),v=n(2221),_=n(1830),S="__SENTRY_SUPPRESS_TRACING__";function E(e,t){const n=w();return n.withActiveSpan?n.withActiveSpan(e,t):i.withScope((n=>(d._setSpanForScope(n,e||void 0),t(n))))}function b(e){let{parentSpan:t,spanArguments:n,forceTransaction:r,scope:o}=e;if(!l.hasTracingEnabled())return new m.SentryNonRecordingSpan;const s=i.getIsolationScope();let a;if(t&&!r)a=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[S]&&p.spanIsSampled(e),a=s?new y.SentrySpan({...n,parentSpanId:r,traceId:o,sampled:s}):new m.SentryNonRecordingSpan({traceId:o});p.addChildSpanToSpan(e,a);const c=i.getClient();return c&&(c.emit("spanStart",a),n.endTimestamp&&c.emit("spanEnd",a)),a}(t,o,n),p.addChildSpanToSpan(t,a);else if(t){const e=f.getDynamicSamplingContextFromSpan(t),{traceId:r,spanId:i}=t.spanContext(),s=p.spanIsSampled(t);a=C({traceId:r,parentSpanId:i,...n},o,s),f.freezeDscOnSpan(a,e)}else{const{traceId:e,dsc:t,parentSpanId:r,sampled:i}={...s.getPropagationContext(),...o.getPropagationContext()};a=C({traceId:e,parentSpanId:r,...n},o,i),t&&f.freezeDscOnSpan(a,t)}return h.logSpanStart(a),_.setCapturedScopesOnSpan(a,o,s),a}function T(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=p.spanTimeInputToSeconds(e.startTime),delete n.startTime,n}return t}function w(){const e=o.getMainCarrier();return s.getAsyncContextStrategy(e)}function C(e,t,n){const r=i.getClient(),o=r&&r.getOptions()||{},{name:s="",attributes:a}=e,[u,l]=t.getScopeData().sdkProcessingMetadata[S]?[!1]:g.sampleSpan(o,{name:s,parentSampled:n,attributes:a,transactionContext:{name:s,parentSampled:n}}),d=new y.SentrySpan({...e,attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...e.attributes},sampled:u});return void 0!==l&&d.setAttribute(c.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l),r&&r.emit("spanStart",d),d}function R(e){const t=d._getSpanForScope(e);if(!t)return;const n=i.getClient();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?p.getRootSpan(t):t}function O(e){return void 0!==e?t=>E(e,t):e=>e()}t.continueTrace=(e,t)=>{let{sentryTrace:n,baggage:o}=e;return i.withScope((e=>{const i=r.propagationContextFromHeaders(n,o);return e.setPropagationContext(i),t()}))},t.startInactiveSpan=function(e){const t=w();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=T(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>i.withScope(e.scope,t):void 0!==o?e=>E(o,e):e=>e())((()=>{const t=i.getCurrentScope(),o=R(t);return e.onlyIfParent&&!o?new m.SentryNonRecordingSpan:b({parentSpan:o,spanArguments:n,forceTransaction:r,scope:t})}))},t.startNewTrace=function(e){return i.withScope((t=>(t.setPropagationContext(r.generatePropagationContext()),a.DEBUG_BUILD&&r.logger.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),E(null,e))))},t.startSpan=function(e,t){const n=w();if(n.startSpan)return n.startSpan(e,t);const r=T(e),{forceTransaction:o,parentSpan:s}=e;return i.withScope(e.scope,(()=>O(s)((()=>{const n=i.getCurrentScope(),s=R(n),a=e.onlyIfParent&&!s?new m.SentryNonRecordingSpan:b({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});return d._setSpanForScope(n,a),u.handleCallbackErrors((()=>t(a)),(()=>{const{status:e}=p.spanToJSON(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:v.SPAN_STATUS_ERROR,message:"internal_error"})}),(()=>a.end()))}))))},t.startSpanManual=function(e,t){const n=w();if(n.startSpanManual)return n.startSpanManual(e,t);const r=T(e),{forceTransaction:o,parentSpan:s}=e;return i.withScope(e.scope,(()=>O(s)((()=>{const n=i.getCurrentScope(),s=R(n),a=e.onlyIfParent&&!s?new m.SentryNonRecordingSpan:b({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});function c(){a.end()}return d._setSpanForScope(n,a),u.handleCallbackErrors((()=>t(a,c)),(()=>{const{status:e}=p.spanToJSON(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:v.SPAN_STATUS_ERROR,message:"internal_error"})}))}))))},t.suppressTracing=function(e){const t=w();return t.suppressTracing?t.suppressTracing(e):i.withScope((t=>(t.setSDKProcessingMetadata({[S]:!0}),e())))},t.withActiveSpan=E},1830:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o="_sentryScope",i="_sentryIsolationScope";t.stripUrlQueryAndFragment=r.stripUrlQueryAndFragment,t.getCapturedScopesOnSpan=function(e){return{scope:e[o],isolationScope:e[i]}},t.setCapturedScopesOnSpan=function(e,t,n){e&&(r.addNonEnumerableProperty(e,i,n),r.addNonEnumerableProperty(e,o,t))}},8752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972);function i(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}t.DEFAULT_TRANSPORT_BUFFER_SIZE=64,t.createTransport=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.makePromiseBuffer(e.bufferSize||64),s={};return{send:function(a){const c=[];if(r.forEachEnvelopeItem(a,((t,n)=>{const o=r.envelopeItemTypeToDataCategory(n);if(r.isRateLimited(s,o)){const r=i(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else c.push(t)})),0===c.length)return r.resolvedSyncPromise({});const u=r.createEnvelope(a[0],c),l=t=>{r.forEachEnvelopeItem(u,((n,o)=>{const s=i(n,o);e.recordDroppedEvent(t,r.envelopeItemTypeToDataCategory(o),s)}))};return n.add((()=>t({body:r.serializeEnvelope(u)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&o.DEBUG_BUILD&&r.logger.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=r.updateRateLimits(s,e),e)),(e=>{throw l("network_error"),e})))).then((e=>e),(e=>{if(e instanceof r.SentryError)return o.DEBUG_BUILD&&r.logger.error("Skipped sending event because buffer is full."),l("queue_overflow"),r.resolvedSyncPromise({});throw e}))},flush:e=>n.drain(e)}}},6444:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(5734);function i(e,t){let n;return r.forEachEnvelopeItem(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}t.eventFromEnvelope=i,t.makeMultiplexedTransport=function(e,t){return n=>{const s=e(n),a=new Map;function c(t,s){const c=s?`${t}:${s}`:t;let u=a.get(c);if(!u){const l=r.dsnFromString(t);if(!l)return;const d=o.getEnvelopeEndpointWithUrlEncodedAuth(l,n.tunnel);u=s?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=i(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,s)({...n,url:d}):e({...n,url:d}),a.set(c,u)}return[t,u]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return i(e,n)}}).map((e=>"string"==typeof e?c(e,void 0):c(e.dsn,e.release))).filter((e=>!!e)),o=n.length?n:[["",s]];return(await Promise.all(o.map((t=>{let[n,o]=t;return o.send(function(e,t){return r.createEnvelope(t?{...e[0],dsn:t}:e[0],e[1])}(e,n))}))))[0]},flush:async function(e){const t=[...a.values(),s];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}},2402:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972),i=5e3;t.MIN_DELAY=100,t.START_DELAY=i,t.makeOfflineTransport=function(e){function t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.DEBUG_BUILD&&r.logger.info("[Offline]:",...t)}return n=>{const o=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let a,c=i;function u(e){a&&clearTimeout(a),a=setTimeout((async()=>{a=void 0;const e=await s.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),d(e,!0).catch((e=>{t("Failed to retry sending",e)})))}),e),"number"!=typeof a&&a.unref&&a.unref()}function l(){a||(u(c),c=Math.min(2*c,36e5))}async function d(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!a&&r.envelopeContainsItemType(e,["replay_event","replay_recording"]))return await s.push(e),u(100),{};try{const t=await o.send(e);let n=100;if(t)if(t.headers&&t.headers["retry-after"])n=r.parseRetryAfterHeader(t.headers["retry-after"]);else if(t.headers&&t.headers["x-sentry-rate-limits"])n=6e4;else if((t.statusCode||0)>=400)return t;return u(n),c=i,t}catch(o){if(await function(e,t,o){return!r.envelopeContainsItemType(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,o))}(e,o,c))return a?await s.unshift(e):await s.push(e),l(),t("Error sending. Event queued.",o),{};throw o}}return n.flushAtStartup&&l(),{send:d,flush:e=>o.flush(e)}}}},2311:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(1414),i=n(8693),s=n(6789);n(4740),n(3972);const a=n(9490),c={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};t.trpcMiddleware=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function(t){const{path:n,type:u,next:l,rawInput:d,getRawInput:p}=t,f=o.getClient(),h=f&&f.getOptions(),g={procedure_type:u};if((void 0!==e.attachRpcInput?e.attachRpcInput:h&&h.sendDefaultPii)&&(void 0!==d&&(g.input=r.normalize(d)),void 0!==p&&"function"==typeof p))try{const e=await p();g.input=r.normalize(e)}catch(e){}return i.setContext("trpc",g),a.startSpanManual({name:`trpc/${n}`,op:"rpc.server",attributes:{[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},(async e=>{try{const t=await l();return function(e){"object"==typeof e&&null!==e&&"ok"in e&&!e.ok&&"error"in e&&i.captureException(e.error,c)}(t),e.end(),t}catch(t){throw i.captureException(t,c),e.end(),t}}))}}},5431:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(7172),i=n(7085);function s(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}t.applyScopeDataToEvent=function(e,t){const{fingerprint:n,span:s,breadcrumbs:a,sdkProcessingMetadata:c}=t;!function(e,t){const{extra:n,tags:o,user:i,contexts:s,level:a,transactionName:c}=t,u=r.dropUndefinedKeys(n);u&&Object.keys(u).length&&(e.extra={...u,...e.extra});const l=r.dropUndefinedKeys(o);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const d=r.dropUndefinedKeys(i);d&&Object.keys(d).length&&(e.user={...d,...e.user});const p=r.dropUndefinedKeys(s);p&&Object.keys(p).length&&(e.contexts={...p,...e.contexts}),a&&(e.level=a),c&&"transaction"!==e.type&&(e.transaction=c)}(e,t),s&&function(e,t){e.contexts={trace:i.spanToTraceContext(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:o.getDynamicSamplingContextFromSpan(t),...e.sdkProcessingMetadata};const n=i.getRootSpan(t),r=i.spanToJSON(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,s),function(e,t){e.fingerprint=e.fingerprint?r.arrayify(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,a),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,c)},t.mergeAndOverwriteScopeData=s,t.mergeScopeData=function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:l,eventProcessors:d,attachments:p,propagationContext:f,transactionName:h,span:g}=t;s(e,"extra",n),s(e,"tags",r),s(e,"user",o),s(e,"contexts",i),s(e,"sdkProcessingMetadata",c),a&&(e.level=a),h&&(e.transactionName=h),g&&(e.span=g),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),p.length&&(e.attachments=[...e.attachments,...p]),e.propagationContext={...e.propagationContext,...f}}},6312:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);t.handleCallbackErrors=function(e,t){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};try{n=e()}catch(e){throw t(e),o(),e}return function(e,t,n){return r.isThenable(e)?e.then((e=>(n(),e)),(e=>{throw t(e),n(),e})):(n(),e)}(n,t,o)}},6151:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1414);t.hasTracingEnabled=function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=r.getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}},9391:(e,t)=>{function n(e){return"/"===e[e.length-1]?e.slice(0,-1):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isSentryRequestUrl=function(e,t){const r=t&&t.getDsn(),o=t&&t.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){return!!t&&n(e)===n(t)}(e,o)}},1655:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5417);t.getTraceMetaTags=function(){return Object.entries(r.getTraceData()).map((e=>{let[t,n]=e;return`<meta name="${t}" content="${n}"/>`})).join("\n")}},3557:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parameterize=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=new String(String.raw(e,...n));return o.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),o.__sentry_template_values__=n,o}},4955:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(3972);t.parseSampleRate=function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;o.DEBUG_BUILD&&r.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}},2027:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(8143),i=n(1414),s=n(491),a=n(7918),c=n(5431),u=new WeakMap;function l(e,t){const n=r.GLOBAL_OBJ._sentryDebugIds;if(!n)return;let o;const i=u.get(t);i?o=i:(o=new Map,u.set(t,o));const s=Object.entries(n).reduce(((e,n)=>{let r,[i,s]=n;const a=o.get(i);a?r=a:(r=t(i),o.set(i,r));for(let t=r.length-1;t>=0;t--){const n=r[t];if(n.filename){e[n.filename]=s;break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}function d(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((e=>{let[t,r]=e;n.push({type:"sourcemap",code_file:t,debug_id:r})}))}function p(e,t){if(!t)return e;const n=e?e.clone():new a.Scope;return n.update(t),n}const f=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];t.applyDebugIds=l,t.applyDebugMeta=d,t.parseEventHintOrCaptureContext=function(e){if(e)return function(e){return e instanceof a.Scope||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>f.includes(e)))}(e)?{captureContext:e}:e},t.prepareEvent=function(e,t,n,a,u,f){const{normalizeDepth:h=3,normalizeMaxBreadth:g=1e3}=e,m={...t,event_id:t.event_id||n.event_id||r.uuid4(),timestamp:t.timestamp||r.dateTimestampInSeconds()},y=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:i,dist:s,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:o.DEFAULT_ENVIRONMENT),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==s&&(e.dist=s),e.message&&(e.message=r.truncate(e.message,a));const c=e.exception&&e.exception.values&&e.exception.values[0];c&&c.value&&(c.value=r.truncate(c.value,a));const u=e.request;u&&u.url&&(u.url=r.truncate(u.url,a))}(m,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(m,y),u&&u.emit("applyFrameMetadata",t),void 0===t.type&&l(m,e.stackParser);const v=p(a,n.captureContext);n.mechanism&&r.addExceptionMechanism(m,n.mechanism);const _=u?u.getEventProcessors():[],S=i.getGlobalScope().getScopeData();if(f){const e=f.getScopeData();c.mergeScopeData(S,e)}if(v){const e=v.getScopeData();c.mergeScopeData(S,e)}const E=[...n.attachments||[],...S.attachments];E.length&&(n.attachments=E),c.applyScopeDataToEvent(m,S);const b=[..._,...S.eventProcessors];return s.notifyEventProcessors(b,m,n).then((e=>(e&&d(e),"number"==typeof h&&h>0?function(e,t,n){if(!e)return null;const o={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:r.normalize(e.data,t,n)}})))},...e.user&&{user:r.normalize(e.user,t,n)},...e.contexts&&{contexts:r.normalize(e.contexts,t,n)},...e.extra&&{extra:r.normalize(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&o.contexts&&(o.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(o.contexts.trace.data=r.normalize(e.contexts.trace.data,t,n))),e.spans&&(o.spans=e.spans.map((e=>({...e,...e.data&&{data:r.normalize(e.data,t,n)}})))),o}(e,h,g):e)))}},2049:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674);t.applySdkMetadata=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[t],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"npm";const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${o}:@sentry/${e}`,version:r.SDK_VERSION}))),version:r.SDK_VERSION}),e._metadata=i}},9423:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o="_sentrySpan";t._getSpanForScope=function(e){return e[o]},t._setSpanForScope=function(e,t){t?r.addNonEnumerableProperty(e,o,t):delete e[o]}},7085:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(2744),i=n(7710),s=n(1414),a=n(7339),c=n(6789),u=n(2221),l=n(9423);function d(e){return"number"==typeof e?p(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?p(e.getTime()):r.timestampInSeconds()}function p(e){return e>9999999999?e/1e3:e}function f(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:o,startTime:i,name:s,endTime:u,parentSpanId:l,status:p}=e;return r.dropUndefinedKeys({span_id:t,trace_id:n,data:o,description:s,parent_span_id:l,start_timestamp:d(i),timestamp:d(u)||void 0,status:g(p),op:o[c.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:o[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function h(e){const{traceFlags:t}=e.spanContext();return 1===t}function g(e){if(e&&e.code!==u.SPAN_STATUS_UNSET)return e.code===u.SPAN_STATUS_OK?"ok":e.message||"unknown_error"}const m="_sentryChildSpans",y="_sentryRootSpan";function v(){const e=i.getMainCarrier(),t=o.getAsyncContextStrategy(e);return t.getActiveSpan?t.getActiveSpan():l._getSpanForScope(s.getCurrentScope())}t.TRACE_FLAG_NONE=0,t.TRACE_FLAG_SAMPLED=1,t.addChildSpanToSpan=function(e,t){const n=e[y]||e;r.addNonEnumerableProperty(t,y,n),e[m]?e[m].add(t):r.addNonEnumerableProperty(e,m,new Set([t]))},t.getActiveSpan=v,t.getRootSpan=function(e){return e[y]||e},t.getSpanDescendants=function(e){const t=new Set;return function e(n){if(!t.has(n)&&h(n)){t.add(n);const r=n[m]?Array.from(n[m]):[];for(const t of r)e(t)}}(e),Array.from(t)},t.getStatusMessage=g,t.removeChildSpanFromSpan=function(e,t){e[m]&&e[m].delete(t)},t.spanIsSampled=h,t.spanTimeInputToSeconds=d,t.spanToJSON=f,t.spanToTraceContext=function(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:o}=f(e);return r.dropUndefinedKeys({parent_span_id:o,span_id:t,trace_id:n})},t.spanToTraceHeader=function(e){const{traceId:t,spanId:n}=e.spanContext(),o=h(e);return r.generateSentryTraceHeader(t,n,o)},t.spanToTransactionTraceContext=function(e){const{spanId:t,traceId:n}=e.spanContext(),{data:o,op:i,parent_span_id:s,status:a,origin:c}=f(e);return r.dropUndefinedKeys({parent_span_id:s,span_id:t,trace_id:n,data:o,op:i,status:a,origin:c})},t.updateMetricSummaryOnActiveSpan=function(e,t,n,r,o,i){const s=v();s&&a.updateMetricSummaryOnSpan(s,e,t,n,r,o,i)}},5417:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(674),o=n(2744),i=n(7710),s=n(1414),a=n(8693);n(4740),n(3972);const c=n(7085),u=n(7172);function l(e){if(!e||!e.length)return!1;const t="[-!#$%&'*+.^_`|~A-Za-z0-9]+",n="[!#-+-./0-9:<=>?@A-Z\\[\\]a-z{-}]+",r="\\s*";return new RegExp(`^${t}${r}=${r}${n}(${r},${r}${t}${r}=${r}${n})*$`).test(e)}t.getTraceData=function(){if(!a.isEnabled())return{};const e=i.getMainCarrier(),t=o.getAsyncContextStrategy(e);if(t.getTraceData)return t.getTraceData();const n=s.getClient(),d=s.getCurrentScope(),p=c.getActiveSpan(),{dsc:f,sampled:h,traceId:g}=d.getPropagationContext(),m=p&&c.getRootSpan(p),y=p?c.spanToTraceHeader(p):r.generateSentryTraceHeader(g,void 0,h),v=m?u.getDynamicSamplingContextFromSpan(m):f||(n?u.getDynamicSamplingContextFromClient(g,n):void 0),_=r.dynamicSamplingContextToSentryBaggageHeader(v);if(!r.TRACEPARENT_REGEXP.test(y))return r.logger.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const S=l(_);return S||r.logger.warn('Invalid baggage data. Not returning "baggage" value'),{"sentry-trace":y,...S&&{baggage:_}}},t.isValidBaggageString=l},4585:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1188),o=n(5529);function i(e,t,n,o,c,u,l,d){if(u.length>=n+1)return u;let p=[...u];if(r.isInstanceOf(o[c],Error)){s(l,d);const r=e(t,o[c]),u=p.length;a(r,c,u,d),p=i(e,t,n,o[c],c,[r,...p],r,u)}return Array.isArray(o.errors)&&o.errors.forEach(((o,u)=>{if(r.isInstanceOf(o,Error)){s(l,d);const r=e(t,o),f=p.length;a(r,`errors[${u}]`,f,d),p=i(e,t,n,o,c,[r,...p],r,f)}})),p}function s(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function a(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}t.applyAggregateErrorsToEvent=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0;if(!(c.exception&&c.exception.values&&u&&r.isInstanceOf(u.originalException,Error)))return;const l=c.exception.values.length>0?c.exception.values[c.exception.values.length-1]:void 0;var d,p;l&&(c.exception.values=(d=i(e,t,a,u.originalException,s,c.exception.values,l,0),p=n,d.map((e=>(e.value&&(e.value=o.truncate(e.value,p)),e)))))}},3433:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3457),o=n(1967),i=n(4433);t.callFrameToStackFrame=function(e,t,n){const s=t?t.replace(/^file:\/\//,""):void 0,a=e.location.columnNumber?e.location.columnNumber+1:void 0,c=e.location.lineNumber?e.location.lineNumber+1:void 0;return o.dropUndefinedKeys({filename:s,module:n(s),function:e.functionName||i.UNKNOWN_FUNCTION,colno:a,lineno:c,in_app:s?r.filenameIsInApp(s):void 0})},t.watchdogTimer=function(e,t,n,r){const o=e();let i=!1,s=!0;return setInterval((()=>{const e=o.getTimeMs();!1===i&&e>t+n&&(i=!0,s&&r()),e<t+n&&(i=!1)}),20),{poll:()=>{o.reset()},enabled:e=>{s=e}}}},383:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=function(e){const t=[],n=e=>{e.forEach((e=>{Array.isArray(e)?n(e):t.push(e)}))};return n(e),t}},5108:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4688),o=n(1188),i=n(5288),s="sentry-",a=/^sentry-/;function c(e){if(e&&(o.isString(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce(((e,t)=>{const n=u(t);return Object.entries(n).forEach((t=>{let[n,r]=t;e[n]=r})),e}),{}):u(e)}function u(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,t)=>{let[n,r]=t;return n&&r&&(e[n]=r),e}),{})}t.BAGGAGE_HEADER_NAME="baggage",t.MAX_BAGGAGE_STRING_LENGTH=8192,t.SENTRY_BAGGAGE_KEY_PREFIX=s,t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=a,t.baggageHeaderToDynamicSamplingContext=function(e){const t=c(e);if(!t)return;const n=Object.entries(t).reduce(((e,t)=>{let[n,r]=t;return n.match(a)&&(e[n.slice(7)]=r),e}),{});return Object.keys(n).length>0?n:void 0},t.dynamicSamplingContextToSentryBaggageHeader=function(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce(((e,t,n)=>{let[o,s]=t;const a=`${encodeURIComponent(o)}=${encodeURIComponent(s)}`,c=0===n?a:`${e},${a}`;return c.length>8192?(r.DEBUG_BUILD&&i.logger.warn(`Not adding key: ${o} with val: ${s} to baggage header due to exceeding baggage size limits.`),e):c}),"")}(Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return r&&(e[`${s}${n}`]=r),e}),{}))},t.parseBaggageHeader=c},5553:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBreadcrumbLogLevelFromHttpStatusCode=function(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}},6210:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1188),o=n(6401).GLOBAL_OBJ;function i(e,t){const n=e,i=[];if(!n||!n.tagName)return"";if(o.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const s=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(s&&s.length)s.forEach((e=>{i.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&i.push(`#${n.id}`);const e=n.className;if(e&&r.isString(e)){const t=e.split(/\s+/);for(const e of t)i.push(`.${e}`)}}const a=["aria-label","type","name","title","alt"];for(const e of a){const t=n.getAttribute(e);t&&i.push(`[${e}="${t}"]`)}return i.join("")}t.getComponentName=function(e){if(!o.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null},t.getDomElement=function(e){return o.document&&o.document.querySelector?o.document.querySelector(e):null},t.getLocationHref=function(){try{return o.document.location.href}catch(e){return""}},t.htmlTreeAsString=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,a=0;const c=" > ",u=c.length;let l;const d=Array.isArray(t)?t:t.keyAttrs,p=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&s++<r&&(l=i(n,d),!("html"===l||s>1&&a+o.length*u+l.length>=p));)o.push(l),a+=l.length,n=n.parentNode;return o.reverse().join(c)}catch(e){return"<unknown>"}}},4458:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2240);t._asyncNullishCoalesce=async function(e,t){return r._nullishCoalesce(e,t)}},4383:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._asyncOptionalChain=async function(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=await i(n)):"call"!==o&&"optionalCall"!==o||(n=await i((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.call(t,...r)})),t=void 0)}return n}},5520:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4383);t._asyncOptionalChainDelete=async function(e){const t=await r._asyncOptionalChain(e);return null==t||t}},2240:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._nullishCoalesce=function(e,t){return null!=e?e:t()}},1273:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._optionalChain=function(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.call(t,...r)})),t=void 0)}return n}},3858:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1273);t._optionalChainDelete=function(e){const t=r._optionalChain(e);return null==t||t}},8516:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeFifoCache=function(e){let t=[],n={};return{add(r,o){for(;t.length>=e;){const e=t.shift();void 0!==e&&delete n[e]}n[r]&&this.delete(r),t.push(r),n[r]=o},clear(){n={},t=[]},get:e=>n[e],size:()=>t.length,delete(e){if(!n[e])return!1;delete n[e];for(let n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}return!0}}}},3865:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1380),o=n(2613);t.createClientReportEnvelope=function(e,t,n){const i=[{type:"client_report"},{timestamp:n||o.dateTimestampInSeconds(),discarded_events:e}];return r.createEnvelope(t?{dsn:t}:{},[i])}},7702:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookie=function(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(-1===r)break;let o=e.indexOf(";",n);if(-1===o)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}const i=e.slice(n,r).trim();if(void 0===t[i]){let n=e.slice(r+1,o).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[i]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[i]=n}}n=o+1}return t}},4688:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},4707:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4688),o=n(5288),i=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function s(e){const t=i.exec(e);if(!t)return void o.consoleSandbox((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,s="",c="",u="",l=""]=t.slice(1);let d="",p=l;const f=p.split("/");if(f.length>1&&(d=f.slice(0,-1).join("/"),p=f.pop()),p){const e=p.match(/^\d+/);e&&(p=e[0])}return a({host:c,pass:s,path:d,projectId:p,port:u,protocol:n,publicKey:r})}function a(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}t.dsnFromString=s,t.dsnToString=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`},t.makeDsn=function(e){const t="string"==typeof e?s(e):a(e);if(t&&function(e){if(!r.DEBUG_BUILD)return!0;const{port:t,projectId:n,protocol:i}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(o.logger.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(i)?t&&isNaN(parseInt(t,10))&&(o.logger.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(o.logger.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),1):(o.logger.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}},4753:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSDKSource=function(){return"npm"},t.isBrowserBundle=function(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}},1380:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4707),o=n(1017),i=n(1967),s=n(6401);function a(e,t){const n=e[1];for(const e of n)if(t(e,e[0].type))return!0;return!1}function c(e){return s.GLOBAL_OBJ.__SENTRY__&&s.GLOBAL_OBJ.__SENTRY__.encodePolyfill?s.GLOBAL_OBJ.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}const u={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};t.addItemToEnvelope=function(e,t){const[n,r]=e;return[n,[...r,t]]},t.createAttachmentEnvelopeItem=function(e){const t="string"==typeof e.data?c(e.data):e.data;return[i.dropUndefinedKeys({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]},t.createEnvelope=function(e){return[e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]},t.createEventEnvelopeHeaders=function(e,t,n,o){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&o&&{dsn:r.dsnToString(o)},...s&&{trace:i.dropUndefinedKeys({...s})}}},t.createSpanEnvelopeItem=function(e){return[{type:"span"},e]},t.envelopeContainsItemType=function(e,t){return a(e,((e,n)=>t.includes(n)))},t.envelopeItemTypeToDataCategory=function(e){return u[e]},t.forEachEnvelopeItem=a,t.getSdkMetadataForEnvelopeHeader=function(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}},t.parseEnvelope=function(e){let t="string"==typeof e?c(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function r(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse((r=n(e),s.GLOBAL_OBJ.__SENTRY__&&s.GLOBAL_OBJ.__SENTRY__.decodePolyfill?s.GLOBAL_OBJ.__SENTRY__.decodePolyfill(r):(new TextDecoder).decode(r)));var r}const o=r(),i=[];for(;t.length;){const e=r(),t="number"==typeof e.length?e.length:void 0;i.push([e,t?n(t):r()])}return[o,i]},t.serializeEnvelope=function(e){const[t,n]=e;let r=JSON.stringify(t);function i(e){"string"==typeof r?r="string"==typeof e?r+e:[c(r),e]:r.push("string"==typeof e?c(e):e)}for(const e of n){const[t,n]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(o.normalize(n))}i(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}},6296:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}t.SentryError=n},2419:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1188),o=n(2684),i=n(1017),s=n(1967);function a(e,t){return e(t.stack||"",1)}function c(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=a(e,t);return r.length&&(n.stacktrace={frames:r}),n}function u(e,t,n,o){if(r.isError(n))return[n,void 0];if(t.synthetic=!0,r.isPlainObject(n)){const t=e&&e.getOptions().normalizeDepth,a={__serialized__:i.normalizeToSize(n,t)},c=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}(n);if(c)return[c,a];const u=function(e){if("name"in e&&"string"==typeof e.name){let t=`'${e.name}' captured as exception`;return"message"in e&&"string"==typeof e.message&&(t+=` with message '${e.message}'`),t}if("message"in e&&"string"==typeof e.message)return e.message;const t=s.extractExceptionKeysForMessage(e);if(r.isErrorEvent(e))return`Event \`ErrorEvent\` captured as exception with message \`${e.message}\``;const n=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e);return`${n&&"Object"!==n?`'${n}'`:"Object"} captured as exception with keys: ${t}`}(n),l=o&&o.syntheticException||new Error(u);return l.message=u,[l,a]}const a=o&&o.syntheticException||new Error(n);return a.message=`${n}`,[a,void 0]}t.eventFromMessage=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const s={event_id:o&&o.event_id,level:n};if(i&&o&&o.syntheticException){const n=a(e,o.syntheticException);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]})}if(r.isParameterizedString(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s},t.eventFromUnknownInput=function(e,t,n,r){const i=r&&r.data&&r.data.mechanism||{handled:!0,type:"generic"},[s,a]=u(e,i,n,r),l={exception:{values:[c(t,s)]}};return a&&(l.extra=a),o.addExceptionTypeValue(l,void 0,void 0),o.addExceptionMechanism(l,i),{...l,event_id:r&&r.event_id}},t.exceptionFromError=c,t.parseStackFrames=a},674:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4585),o=n(383),i=n(5553),s=n(6210),a=n(4707),c=n(6296),u=n(6401),l=n(9231),d=n(4838),p=n(5225),f=n(1049),h=n(205),g=n(1188),m=n(7134),y=n(5288),v=n(3742),_=n(2684),S=n(2488),E=n(1017),b=n(1967),T=n(8899),w=n(5485),C=n(947),R=n(1691),O=n(4433),I=n(3457),M=n(5529),A=n(3340),k=n(534),P=n(2613),D=n(6408),N=n(4753),L=n(1380),x=n(3865),U=n(551),F=n(5108),B=n(6179),j=n(8516),W=n(2419),G=n(3433),H=n(6703),z=n(4458),V=n(4383),q=n(5520),$=n(2240),Y=n(1273),K=n(3858),J=n(3489),X=n(132),Z=n(5526),Q=n(2625),ee=n(473);t.applyAggregateErrorsToEvent=r.applyAggregateErrorsToEvent,t.flatten=o.flatten,t.getBreadcrumbLogLevelFromHttpStatusCode=i.getBreadcrumbLogLevelFromHttpStatusCode,t.getComponentName=s.getComponentName,t.getDomElement=s.getDomElement,t.getLocationHref=s.getLocationHref,t.htmlTreeAsString=s.htmlTreeAsString,t.dsnFromString=a.dsnFromString,t.dsnToString=a.dsnToString,t.makeDsn=a.makeDsn,t.SentryError=c.SentryError,t.GLOBAL_OBJ=u.GLOBAL_OBJ,t.getGlobalSingleton=u.getGlobalSingleton,t.addConsoleInstrumentationHandler=l.addConsoleInstrumentationHandler,t.addFetchEndInstrumentationHandler=d.addFetchEndInstrumentationHandler,t.addFetchInstrumentationHandler=d.addFetchInstrumentationHandler,t.addGlobalErrorInstrumentationHandler=p.addGlobalErrorInstrumentationHandler,t.addGlobalUnhandledRejectionInstrumentationHandler=f.addGlobalUnhandledRejectionInstrumentationHandler,t.addHandler=h.addHandler,t.maybeInstrument=h.maybeInstrument,t.resetInstrumentationHandlers=h.resetInstrumentationHandlers,t.triggerHandlers=h.triggerHandlers,t.isDOMError=g.isDOMError,t.isDOMException=g.isDOMException,t.isElement=g.isElement,t.isError=g.isError,t.isErrorEvent=g.isErrorEvent,t.isEvent=g.isEvent,t.isInstanceOf=g.isInstanceOf,t.isParameterizedString=g.isParameterizedString,t.isPlainObject=g.isPlainObject,t.isPrimitive=g.isPrimitive,t.isRegExp=g.isRegExp,t.isString=g.isString,t.isSyntheticEvent=g.isSyntheticEvent,t.isThenable=g.isThenable,t.isVueViewModel=g.isVueViewModel,t.isBrowser=m.isBrowser,t.CONSOLE_LEVELS=y.CONSOLE_LEVELS,t.consoleSandbox=y.consoleSandbox,t.logger=y.logger,t.originalConsoleMethods=y.originalConsoleMethods,t.memoBuilder=v.memoBuilder,t.addContextToFrame=_.addContextToFrame,t.addExceptionMechanism=_.addExceptionMechanism,t.addExceptionTypeValue=_.addExceptionTypeValue,t.arrayify=_.arrayify,t.checkOrSetAlreadyCaught=_.checkOrSetAlreadyCaught,t.getEventDescription=_.getEventDescription,t.parseSemver=_.parseSemver,t.uuid4=_.uuid4,t.dynamicRequire=S.dynamicRequire,t.isNodeEnv=S.isNodeEnv,t.loadModule=S.loadModule,t.normalize=E.normalize,t.normalizeToSize=E.normalizeToSize,t.normalizeUrlToBase=E.normalizeUrlToBase,t.addNonEnumerableProperty=b.addNonEnumerableProperty,t.convertToPlainObject=b.convertToPlainObject,t.dropUndefinedKeys=b.dropUndefinedKeys,t.extractExceptionKeysForMessage=b.extractExceptionKeysForMessage,t.fill=b.fill,t.getOriginalFunction=b.getOriginalFunction,t.markFunctionWrapped=b.markFunctionWrapped,t.objectify=b.objectify,t.urlEncode=b.urlEncode,t.basename=T.basename,t.dirname=T.dirname,t.isAbsolute=T.isAbsolute,t.join=T.join,t.normalizePath=T.normalizePath,t.relative=T.relative,t.resolve=T.resolve,t.makePromiseBuffer=w.makePromiseBuffer,t.DEFAULT_USER_INCLUDES=C.DEFAULT_USER_INCLUDES,t.addRequestDataToEvent=C.addRequestDataToEvent,t.extractPathForTransaction=C.extractPathForTransaction,t.extractRequestData=C.extractRequestData,t.winterCGHeadersToDict=C.winterCGHeadersToDict,t.winterCGRequestToRequestData=C.winterCGRequestToRequestData,t.severityLevelFromString=R.severityLevelFromString,t.validSeverityLevels=R.validSeverityLevels,t.UNKNOWN_FUNCTION=O.UNKNOWN_FUNCTION,t.createStackParser=O.createStackParser,t.getFramesFromEvent=O.getFramesFromEvent,t.getFunctionName=O.getFunctionName,t.stackParserFromStackParserOptions=O.stackParserFromStackParserOptions,t.stripSentryFramesAndReverse=O.stripSentryFramesAndReverse,t.filenameIsInApp=I.filenameIsInApp,t.node=I.node,t.nodeStackLineParser=I.nodeStackLineParser,t.isMatchingPattern=M.isMatchingPattern,t.safeJoin=M.safeJoin,t.snipLine=M.snipLine,t.stringMatchesSomePattern=M.stringMatchesSomePattern,t.truncate=M.truncate,t.isNativeFunction=A.isNativeFunction,t.supportsDOMError=A.supportsDOMError,t.supportsDOMException=A.supportsDOMException,t.supportsErrorEvent=A.supportsErrorEvent,t.supportsFetch=A.supportsFetch,t.supportsNativeFetch=A.supportsNativeFetch,t.supportsReferrerPolicy=A.supportsReferrerPolicy,t.supportsReportingObserver=A.supportsReportingObserver,t.SyncPromise=k.SyncPromise,t.rejectedSyncPromise=k.rejectedSyncPromise,t.resolvedSyncPromise=k.resolvedSyncPromise,Object.defineProperty(t,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>P._browserPerformanceTimeOriginMode}),t.browserPerformanceTimeOrigin=P.browserPerformanceTimeOrigin,t.dateTimestampInSeconds=P.dateTimestampInSeconds,t.timestampInSeconds=P.timestampInSeconds,t.TRACEPARENT_REGEXP=D.TRACEPARENT_REGEXP,t.extractTraceparentData=D.extractTraceparentData,t.generateSentryTraceHeader=D.generateSentryTraceHeader,t.propagationContextFromHeaders=D.propagationContextFromHeaders,t.getSDKSource=N.getSDKSource,t.isBrowserBundle=N.isBrowserBundle,t.addItemToEnvelope=L.addItemToEnvelope,t.createAttachmentEnvelopeItem=L.createAttachmentEnvelopeItem,t.createEnvelope=L.createEnvelope,t.createEventEnvelopeHeaders=L.createEventEnvelopeHeaders,t.createSpanEnvelopeItem=L.createSpanEnvelopeItem,t.envelopeContainsItemType=L.envelopeContainsItemType,t.envelopeItemTypeToDataCategory=L.envelopeItemTypeToDataCategory,t.forEachEnvelopeItem=L.forEachEnvelopeItem,t.getSdkMetadataForEnvelopeHeader=L.getSdkMetadataForEnvelopeHeader,t.parseEnvelope=L.parseEnvelope,t.serializeEnvelope=L.serializeEnvelope,t.createClientReportEnvelope=x.createClientReportEnvelope,t.DEFAULT_RETRY_AFTER=U.DEFAULT_RETRY_AFTER,t.disabledUntil=U.disabledUntil,t.isRateLimited=U.isRateLimited,t.parseRetryAfterHeader=U.parseRetryAfterHeader,t.updateRateLimits=U.updateRateLimits,t.BAGGAGE_HEADER_NAME=F.BAGGAGE_HEADER_NAME,t.MAX_BAGGAGE_STRING_LENGTH=F.MAX_BAGGAGE_STRING_LENGTH,t.SENTRY_BAGGAGE_KEY_PREFIX=F.SENTRY_BAGGAGE_KEY_PREFIX,t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=F.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,t.baggageHeaderToDynamicSamplingContext=F.baggageHeaderToDynamicSamplingContext,t.dynamicSamplingContextToSentryBaggageHeader=F.dynamicSamplingContextToSentryBaggageHeader,t.parseBaggageHeader=F.parseBaggageHeader,t.getNumberOfUrlSegments=B.getNumberOfUrlSegments,t.getSanitizedUrlString=B.getSanitizedUrlString,t.parseUrl=B.parseUrl,t.stripUrlQueryAndFragment=B.stripUrlQueryAndFragment,t.makeFifoCache=j.makeFifoCache,t.eventFromMessage=W.eventFromMessage,t.eventFromUnknownInput=W.eventFromUnknownInput,t.exceptionFromError=W.exceptionFromError,t.parseStackFrames=W.parseStackFrames,t.callFrameToStackFrame=G.callFrameToStackFrame,t.watchdogTimer=G.watchdogTimer,t.LRUMap=H.LRUMap,t._asyncNullishCoalesce=z._asyncNullishCoalesce,t._asyncOptionalChain=V._asyncOptionalChain,t._asyncOptionalChainDelete=q._asyncOptionalChainDelete,t._nullishCoalesce=$._nullishCoalesce,t._optionalChain=Y._optionalChain,t._optionalChainDelete=K._optionalChainDelete,t.generatePropagationContext=J.generatePropagationContext,t.vercelWaitUntil=X.vercelWaitUntil,t.SDK_VERSION=Z.SDK_VERSION,t.escapeStringForRegex=Q.escapeStringForRegex,t.supportsHistory=ee.supportsHistory},9231:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5288),o=n(1967),i=n(6401),s=n(205);function a(){"console"in i.GLOBAL_OBJ&&r.CONSOLE_LEVELS.forEach((function(e){e in i.GLOBAL_OBJ.console&&o.fill(i.GLOBAL_OBJ.console,e,(function(t){return r.originalConsoleMethods[e]=t,function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];const a={args:n,level:e};s.triggerHandlers("console",a);const c=r.originalConsoleMethods[e];c&&c.apply(i.GLOBAL_OBJ.console,n)}}))}))}t.addConsoleInstrumentationHandler=function(e){const t="console";s.addHandler(t,e),s.maybeInstrument(t,a)}},4838:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1188),o=n(1967),i=n(3340),s=n(2613),a=n(6401),c=n(205);function u(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!i.supportsNativeFetch()||o.fill(a.GLOBAL_OBJ,"fetch",(function(t){return function(){for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];const{method:l,url:d}=f(i),p={args:i,fetchData:{method:l,url:d},startTimestamp:1e3*s.timestampInSeconds()};e||c.triggerHandlers("fetch",{...p});const h=(new Error).stack;return t.apply(a.GLOBAL_OBJ,i).then((async t=>(e?e(t):c.triggerHandlers("fetch",{...p,endTimestamp:1e3*s.timestampInSeconds(),response:t}),t)),(e=>{throw c.triggerHandlers("fetch",{...p,endTimestamp:1e3*s.timestampInSeconds(),error:e}),r.isError(e)&&void 0===e.stack&&(e.stack=h,o.addNonEnumerableProperty(e,"framesToPop",1)),e}))}}))}function l(e){let t;try{t=e.clone()}catch(e){return}!async function(t){if(t&&t.body){const n=t.body,r=n.getReader(),o=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),9e4);let i=!0;for(;i;){let t;try{t=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),5e3);const{done:o}=await r.read();clearTimeout(t),o&&(c.triggerHandlers("fetch-body-resolved",{endTimestamp:1e3*s.timestampInSeconds(),response:e}),i=!1)}catch(e){i=!1}finally{clearTimeout(t)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,(()=>{}))}}(t)}function d(e,t){return!!e&&"object"==typeof e&&!!e[t]}function p(e){return"string"==typeof e?e:e?d(e,"url")?e.url:e.toString?e.toString():"":""}function f(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:p(t),method:d(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:p(t),method:d(t,"method")?String(t.method).toUpperCase():"GET"}}t.addFetchEndInstrumentationHandler=function(e){const t="fetch-body-resolved";c.addHandler(t,e),c.maybeInstrument(t,(()=>u(l)))},t.addFetchInstrumentationHandler=function(e,t){const n="fetch";c.addHandler(n,e),c.maybeInstrument(n,(()=>u(void 0,t)))},t.parseFetchArgs=f},5225:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6401),o=n(205);let i=null;function s(){i=r.GLOBAL_OBJ.onerror,r.GLOBAL_OBJ.onerror=function(e,t,n,r,s){const a={column:r,error:s,line:n,msg:e,url:t};return o.triggerHandlers("error",a),!(!i||i.__SENTRY_LOADER__)&&i.apply(this,arguments)},r.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}t.addGlobalErrorInstrumentationHandler=function(e){const t="error";o.addHandler(t,e),o.maybeInstrument(t,s)}},1049:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6401),o=n(205);let i=null;function s(){i=r.GLOBAL_OBJ.onunhandledrejection,r.GLOBAL_OBJ.onunhandledrejection=function(e){const t=e;return o.triggerHandlers("unhandledrejection",t),!(i&&!i.__SENTRY_LOADER__)||i.apply(this,arguments)},r.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}t.addGlobalUnhandledRejectionInstrumentationHandler=function(e){const t="unhandledrejection";o.addHandler(t,e),o.maybeInstrument(t,s)}},205:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4688),o=n(5288),i=n(4433),s={},a={};t.addHandler=function(e,t){s[e]=s[e]||[],s[e].push(t)},t.maybeInstrument=function(e,t){a[e]||(t(),a[e]=!0)},t.resetInstrumentationHandlers=function(){Object.keys(s).forEach((e=>{s[e]=void 0}))},t.triggerHandlers=function(e,t){const n=e&&s[e];if(n)for(const s of n)try{s(t)}catch(t){r.DEBUG_BUILD&&o.logger.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${i.getFunctionName(s)}\nError:`,t)}}},1188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=Object.prototype.toString;function r(e,t){return n.call(e)===`[object ${t}]`}function o(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function i(e){return r(e,"Object")}function s(e,t){try{return e instanceof t}catch(e){return!1}}t.isDOMError=function(e){return r(e,"DOMError")},t.isDOMException=function(e){return r(e,"DOMException")},t.isElement=function(e){return"undefined"!=typeof Element&&s(e,Element)},t.isError=function(e){switch(n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return s(e,Error)}},t.isErrorEvent=function(e){return r(e,"ErrorEvent")},t.isEvent=function(e){return"undefined"!=typeof Event&&s(e,Event)},t.isInstanceOf=s,t.isParameterizedString=o,t.isPlainObject=i,t.isPrimitive=function(e){return null===e||o(e)||"object"!=typeof e&&"function"!=typeof e},t.isRegExp=function(e){return r(e,"RegExp")},t.isString=function(e){return r(e,"String")},t.isSyntheticEvent=function(e){return i(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e},t.isThenable=function(e){return Boolean(e&&e.then&&"function"==typeof e.then)},t.isVueViewModel=function(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}},7134:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2488),o=n(6401);t.isBrowser=function(){return"undefined"!=typeof window&&(!r.isNodeEnv()||void 0!==o.GLOBAL_OBJ.process&&"renderer"===o.GLOBAL_OBJ.process.type)}},5288:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4688),o=n(6401),i=["debug","info","warn","error","log","assert","trace"],s={};function a(e){if(!("console"in o.GLOBAL_OBJ))return e();const t=o.GLOBAL_OBJ.console,n={},r=Object.keys(s);r.forEach((e=>{const r=s[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const c=o.getGlobalSingleton("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return r.DEBUG_BUILD?i.forEach((n=>{t[n]=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e&&a((()=>{o.GLOBAL_OBJ.console[n](`Sentry Logger [${n}]:`,...r)}))}})):i.forEach((e=>{t[e]=()=>{}})),t}));t.CONSOLE_LEVELS=i,t.consoleSandbox=a,t.logger=c,t.originalConsoleMethods=s},6703:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=class{constructor(e){this._maxSize=e,this._cache=new Map}get size(){return this._cache.size}get(e){const t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t}set(e,t){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(e,t)}remove(e){const t=this._cache.get(e);return t&&this._cache.delete(e),t}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const e=[];return this._cache.forEach((t=>e.push(t))),e}}},3742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoBuilder=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}},2684:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1967),o=n(5529),i=n(6401);function s(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function c(e){return parseInt(e||"",10)}t.addContextToFrame=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(void 0===t.lineno)return;const r=e.length,i=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,i-n),i).map((e=>o.snipLine(e,0)));const s=Math.min(r-1,i);t.context_line=o.snipLine(e[s],t.colno||0),t.post_context=e.slice(Math.min(i+1,r),i+1+n).map((e=>o.snipLine(e,0)))},t.addExceptionMechanism=function(e,t){const n=s(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}},t.addExceptionTypeValue=function(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")},t.arrayify=function(e){return Array.isArray(e)?e:[e]},t.checkOrSetAlreadyCaught=function(e){if(e&&e.__sentry_captured__)return!0;try{r.addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(e){}return!1},t.getEventDescription=function(e){const{message:t,event_id:n}=e;if(t)return t;const r=s(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"},t.parseSemver=function(e){const t=e.match(a)||[],n=c(t[1]),r=c(t[2]),o=c(t[3]);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(o)?void 0:o,prerelease:t[4]}},t.uuid4=function(){const e=i.GLOBAL_OBJ,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}},3457:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4433);function o(e){return!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//)||void 0===e||e.includes("node_modules/"))}function i(e){const t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return i=>{const a=i.match(n);if(a){let t,n,i,c,u;if(a[1]){i=a[1];let e=i.lastIndexOf(".");if("."===i[e-1]&&e--,e>0){t=i.slice(0,e),n=i.slice(e+1);const r=t.indexOf(".Module");r>0&&(i=i.slice(r+1),t=t.slice(0,r))}c=void 0}n&&(c=t,u=n),"<anonymous>"===n&&(u=void 0,i=void 0),void 0===i&&(u=u||r.UNKNOWN_FUNCTION,i=c?`${c}.${u}`:u);let l=a[2]&&a[2].startsWith("file://")?a[2].slice(7):a[2];const d="native"===a[5];return l&&l.match(/\/[A-Z]:/)&&(l=l.slice(1)),l||!a[5]||d||(l=a[5]),{filename:l,module:e?e(l):void 0,function:i,lineno:s(a[3]),colno:s(a[4]),in_app:o(l||"",d)}}if(i.match(t))return{filename:i}}}function s(e){return parseInt(e||"",10)||void 0}t.filenameIsInApp=o,t.node=i,t.nodeStackLineParser=function(e){return[90,i(e)]}},2488:(e,t,n)=>{e=n.nmd(e),Object.defineProperty(t,"__esModule",{value:!0});const r=n(4753);function o(e,t){return e.require(t)}t.dynamicRequire=o,t.isNodeEnv=function(){return!r.isBrowserBundle()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)},t.loadModule=function(t){let n;try{n=o(e,t)}catch(e){}try{const{cwd:r}=o(e,"process");n=o(e,`${r()}/node_modules/${t}`)}catch(e){}return n}},1017:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1188),o=n(3742),i=n(1967),s=n(4433);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return c("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.memoBuilder();const[d,p]=l;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const f=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==n.g&&t===n.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(r.isVueViewModel(t))return"[VueViewModel]";if(r.isSyntheticEvent(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${s.getFunctionName(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const o=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(o)?`[HTMLElement: ${o}]`:`[object ${o}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!f.startsWith("[object "))return f;if(t.__sentry_skip_normalization__)return t;const h="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:a;if(0===h)return f.replace("object ","");if(d(t))return"[Circular ~]";const g=t;if(g&&"function"==typeof g.toJSON)try{return c("",g.toJSON(),h-1,u,l)}catch(e){}const m=Array.isArray(t)?[]:{};let y=0;const v=i.convertToPlainObject(t);for(const e in v){if(!Object.prototype.hasOwnProperty.call(v,e))continue;if(y>=u){m[e]="[MaxProperties ~]";break}const t=v[e];m[e]=c(e,t,h-1,u,l),y++}return p(t),m}t.normalize=a,t.normalizeToSize=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400;const o=a(t,n);return i=o,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?e(t,n-1,r):o;var i},t.normalizeUrlToBase=function(e,t){const n=t.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let r=e;try{r=decodeURI(e)}catch(e){}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${n}/*`,"ig"),"app:///")}},1967:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6210),o=n(4688),i=n(1188),s=n(5288),a=n(5529);function c(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){o.DEBUG_BUILD&&s.logger.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function u(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,c(e,"__sentry_original__",t)}catch(e){}}function l(e){if(i.isError(e))return{message:e.message,name:e.name,stack:e.stack,...p(e)};if(i.isEvent(e)){const t={type:e.type,target:d(e.target),currentTarget:d(e.currentTarget),...p(e)};return"undefined"!=typeof CustomEvent&&i.isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}return e}function d(e){try{return i.isElement(e)?r.htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function p(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function f(e,t){if(function(e){if(!i.isPlainObject(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.getOwnPropertyNames(e))void 0!==e[n]&&(r[n]=f(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(f(e,t))})),r}return e}t.addNonEnumerableProperty=c,t.convertToPlainObject=l,t.dropUndefinedKeys=function(e){return f(e,new Map)},t.extractExceptionKeysForMessage=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;const n=Object.keys(l(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return a.truncate(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:a.truncate(r,t)}return""},t.fill=function(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&u(o,r),e[t]=o},t.getOriginalFunction=function(e){return e.__sentry_original__},t.markFunctionWrapped=u,t.objectify=function(e){let t;switch(!0){case null==e:t=new String(e);break;case"symbol"==typeof e||"bigint"==typeof e:t=Object(e);break;case i.isPrimitive(e):t=new e.constructor(e);break;default:t=e}return t},t.urlEncode=function(e){return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}},8899:(e,t)=>{function n(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Object.defineProperty(t,"__esModule",{value:!0});const r=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function o(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=r.exec(t);return n?n.slice(1):[]}function i(){let e="",t=!1;for(let n=arguments.length-1;n>=-1&&!t;n--){const r=n>=0?n<0||arguments.length<=n?void 0:arguments[n]:"/";r&&(e=`${r}/${e}`,t="/"===r.charAt(0))}return e=n(e.split("/").filter((e=>!!e)),!t).join("/"),(t?"/":"")+e||"."}function s(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function a(e){const t=c(e),r="/"===e.slice(-1);let o=n(e.split("/").filter((e=>!!e)),!t).join("/");return o||t||(o="."),o&&r&&(o+="/"),(t?"/":"")+o}function c(e){return"/"===e.charAt(0)}t.basename=function(e,t){let n=o(e)[2]||"";return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n},t.dirname=function(e){const t=o(e),n=t[0]||"";let r=t[1];return n||r?(r&&(r=r.slice(0,r.length-1)),n+r):"."},t.isAbsolute=c,t.join=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(t.join("/"))},t.normalizePath=a,t.relative=function(e,t){e=i(e).slice(1),t=i(t).slice(1);const n=s(e.split("/")),r=s(t.split("/")),o=Math.min(n.length,r.length);let a=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){a=e;break}let c=[];for(let e=a;e<n.length;e++)c.push("..");return c=c.concat(r.slice(a)),c.join("/")},t.resolve=i},5485:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6296),o=n(534);t.makePromiseBuffer=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(i){if(!(void 0===e||t.length<e))return o.rejectedSyncPromise(new r.SentryError("Not adding Promise because buffer limit was reached."));const s=i();return-1===t.indexOf(s)&&t.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(e){return new o.SyncPromise(((n,r)=>{let i=t.length;if(!i)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{o.resolvedSyncPromise(e).then((()=>{--i||(clearTimeout(s),n(!0))}),r)}))}))}}}},3489:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2684);t.generatePropagationContext=function(){return{traceId:r.uuid4(),spanId:r.uuid4().substring(16)}}},551:(e,t)=>{function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function r(e,t){return e[t]||e.all||0}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_AFTER=6e4,t.disabledUntil=r,t.isRateLimited=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return r(e,t)>n},t.parseRetryAfterHeader=n,t.updateRateLimits=function(e,t){let{statusCode:r,headers:o}=t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();const s={...e},a=o&&o["x-sentry-rate-limits"],c=o&&o["retry-after"];if(a)for(const e of a.trim().split(",")){const[t,n,,,r]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(n)for(const e of n.split(";"))"metric_bucket"===e&&r&&!r.split(";").includes("custom")||(s[e]=i+a);else s.all=i+a}else c?s.all=i+n(c,i):429===r&&(s.all=i+6e4);return s}},947:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7702),o=n(4688),i=n(1188),s=n(5288),a=n(1017),c=n(6179),u=n(9054),l={ip:!1,request:!0,transaction:!0,user:!0},d=["cookies","data","headers","method","query_string","url"],p=["id","username","email"];function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.method&&e.method.toUpperCase();let r="",o="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,o="route"):(e.originalUrl||e.url)&&(r=c.stripUrlQueryAndFragment(e.originalUrl||e.url||""));let i="";return t.method&&n&&(i+=n),t.method&&t.path&&(i+=" "),t.path&&r&&(i+=r),[i,o]}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{include:n=d}=t,o={},s=e.headers||{},c=e.method,l=s.host||e.hostname||e.host||"<no host>",p="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",f=e.originalUrl||e.url||"",h=f.startsWith(p)?f:`${p}://${l}${f}`;return n.forEach((t=>{switch(t){case"headers":o.headers=s,n.includes("cookies")||delete o.headers.cookie,n.includes("ip")||u.ipHeaderNames.forEach((e=>{delete o.headers[e]}));break;case"method":o.method=c;break;case"url":o.url=h;break;case"cookies":o.cookies=e.cookies||s.cookie&&r.parseCookie(s.cookie)||{};break;case"query_string":o.query_string=function(e){let t=e.originalUrl||e.url||"";if(t){t.startsWith("/")&&(t=`http://dogs.are.great${t}`);try{const n=e.query||new URL(t).search.slice(1);return n.length?n:void 0}catch(e){return}}}(e);break;case"data":if("GET"===c||"HEAD"===c)break;void 0!==e.body&&(o.data=i.isString(e.body)?e.body:JSON.stringify(a.normalize(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(o[t]=e[t])}})),o}function g(e){const t={};try{e.forEach(((e,n)=>{"string"==typeof e&&(t[n]=e)}))}catch(e){o.DEBUG_BUILD&&s.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return t}t.DEFAULT_USER_INCLUDES=p,t.addRequestDataToEvent=function(e,t,n){const r={...l,...n&&n.include};if(r.request){const n=Array.isArray(r.request)?[...r.request]:[...d];r.ip&&n.push("ip");const o=h(t,{include:n});e.request={...e.request,...o}}if(r.user){const n=t.user&&i.isPlainObject(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:p).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.headers&&u.getClientIPAddress(t.headers)||t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&"transaction"===e.type&&(e.transaction=function(e,t){switch(t){case"path":return f(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return f(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,r.transaction)),e},t.extractPathForTransaction=f,t.extractRequestData=h,t.winterCGHeadersToDict=g,t.winterCGRequestToRequestData=function(e){const t=g(e.headers);return{method:e.method,url:e.url,headers:t}}},1691:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=["fatal","error","warning","log","info","debug"];t.severityLevelFromString=function(e){return"warn"===e?"warning":n.includes(e)?e:"log"},t.validSeverityLevels=n},4433:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=/\(error: (.*)\)/,r=/captureMessage|captureException/;function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=t.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=[],a=e.split("\n");for(let e=t;e<a.length;e++){const t=a[e];if(t.length>1024)continue;const i=n.test(t)?t.replace(n,"$1"):t;if(!i.match(/\S*Error: /)){for(const e of o){const t=e(i);if(t){s.push(t);break}}if(s.length>=50+r)break}}return i(s.slice(r))}}function i(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(s(t).function||"")&&t.pop(),t.reverse(),r.test(s(t).function||"")&&(t.pop(),r.test(s(t).function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||s(t).filename,function:e.function||"?"})))}function s(e){return e[e.length-1]||{}}const a="<anonymous>";t.UNKNOWN_FUNCTION="?",t.createStackParser=o,t.getFramesFromEvent=function(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}},t.getFunctionName=function(e){try{return e&&"function"==typeof e&&e.name||a}catch(e){return a}},t.stackParserFromStackParserOptions=function(e){return Array.isArray(e)?o(...e):e},t.stripSentryFramesAndReverse=i},5529:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1188);function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!r.isString(e)&&(r.isRegExp(t)?t.test(e):!!r.isString(t)&&(n?e===t:e.includes(t)))}t.isMatchingPattern=o,t.safeJoin=function(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const o=e[t];try{r.isVueViewModel(o)?n.push("[VueViewModel]"):n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)},t.snipLine=function(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n},t.stringMatchesSomePattern=function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some((n=>o(e,n,t)))},t.truncate=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}},3340:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4688),o=n(5288),i=n(6401).GLOBAL_OBJ;function s(){if(!("fetch"in i))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function a(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}t.isNativeFunction=a,t.supportsDOMError=function(){try{return new DOMError(""),!0}catch(e){return!1}},t.supportsDOMException=function(){try{return new DOMException(""),!0}catch(e){return!1}},t.supportsErrorEvent=function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},t.supportsFetch=s,t.supportsNativeFetch=function(){if("string"==typeof EdgeRuntime)return!0;if(!s())return!1;if(a(i.fetch))return!0;let e=!1;const t=i.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=a(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){r.DEBUG_BUILD&&o.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e},t.supportsReferrerPolicy=function(){if(!s())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}},t.supportsReportingObserver=function(){return"ReportingObserver"in i}},534:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1188);var o;!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(o||(o={}));class i{constructor(e){i.prototype.__init.call(this),i.prototype.__init2.call(this),i.prototype.__init3.call(this),i.prototype.__init4.call(this),this._state=o.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new i(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new i(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(o.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(o.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===o.PENDING&&(r.isThenable(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===o.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===o.RESOLVED&&e[1](this._value),this._state===o.REJECTED&&e[2](this._value),e[0]=!0)}))}}}t.SyncPromise=i,t.rejectedSyncPromise=function(e){return new i(((t,n)=>{n(e)}))},t.resolvedSyncPromise=function(e){return new i((t=>{t(e)}))}},2613:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6401);function o(){return Date.now()/1e3}const i=function(){const{performance:e}=r.GLOBAL_OBJ;if(!e||!e.now)return o;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}();t._browserPerformanceTimeOriginMode=void 0;const s=(()=>{const{performance:e}=r.GLOBAL_OBJ;if(!e||!e.now)return void(t._browserPerformanceTimeOriginMode="none");const n=36e5,o=e.now(),i=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+o-i):n,a=s<n,c=e.timing&&e.timing.navigationStart,u="number"==typeof c?Math.abs(c+o-i):n;return a||u<n?s<=u?(t._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):(t._browserPerformanceTimeOriginMode="navigationStart",c):(t._browserPerformanceTimeOriginMode="dateNow",i)})();t.browserPerformanceTimeOrigin=s,t.dateTimestampInSeconds=o,t.timestampInSeconds=i},6408:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5108),o=n(2684),i=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function s(e){if(!e)return;const t=e.match(i);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}t.TRACEPARENT_REGEXP=i,t.extractTraceparentData=s,t.generateSentryTraceHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.uuid4(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.uuid4().substring(16),n=arguments.length>2?arguments[2]:void 0,r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`},t.propagationContextFromHeaders=function(e,t){const n=s(e),i=r.baggageHeaderToDynamicSamplingContext(t),{traceId:a,parentSpanId:c,parentSampled:u}=n||{};return n?{traceId:a||o.uuid4(),parentSpanId:c||o.uuid4().substring(16),spanId:o.uuid4().substring(16),sampled:u,dsc:i||{}}:{traceId:a||o.uuid4(),spanId:o.uuid4().substring(16)}}},6179:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNumberOfUrlSegments=function(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length},t.getSanitizedUrlString=function(e){const{protocol:t,host:n,path:r}=e;return`${t?`${t}://`:""}${n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||""}${r}`},t.parseUrl=function(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}},t.stripUrlQueryAndFragment=function(e){return e.split(/[?#]/,1)[0]}},2625:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.escapeStringForRegex=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},9054:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"];t.getClientIPAddress=function(e){return n.map((t=>{const n=e[t],r=Array.isArray(n)?n.join(";"):n;return"Forwarded"===t?function(e){if(!e)return null;for(const t of e.split(";"))if(t.startsWith("for="))return t.slice(4);return null}(r):r&&r.split(",").map((e=>e.trim()))})).reduce(((e,t)=>t?e.concat(t):e),[]).find((e=>null!==e&&/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(e)))||null},t.ipHeaderNames=n},473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6401).GLOBAL_OBJ;t.supportsHistory=function(){const e=r.chrome,t=e&&e.app&&e.app.runtime,n="history"in r&&!!r.history.pushState&&!!r.history.replaceState;return!t&&n}},132:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6401);t.vercelWaitUntil=function(e){const t=r.GLOBAL_OBJ[Symbol.for("@vercel/request-context")],n=t&&t.get&&t.get()?t.get():{};n&&n.waitUntil&&n.waitUntil(e)}},5526:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_VERSION="8.35.0"},6401:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5526),o=globalThis;t.GLOBAL_OBJ=o,t.getGlobalSingleton=function(e,t,n){const i=n||o,s=i.__SENTRY__=i.__SENTRY__||{},a=s[r.SDK_VERSION]=s[r.SDK_VERSION]||{};return a[e]||(a[e]=t())}},6526:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),o=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var o=e.getVersionPrecision(t),i=e.getVersionPrecision(n),s=Math.max(o,i),a=0,c=e.map([t,n],(function(t){var n=s-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(a=s-Math.min(o,i)),s-=1;s>=a;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===a)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var o=e[n];if(t(o,n))return o}},e.assign=function(e){for(var t,n,r=e,o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var a=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=i.length;t<n;t+=1)a();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=o,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(91))&&r.__esModule?r:{default:r},i=n(18);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new o.default(e,t)},e.parse=function(e){return new o.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],null&&s(t.prototype,null),n&&s(t,n),e}();t.default=a,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(92)),o=c(n(93)),i=c(n(94)),s=c(n(95)),a=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,o={},i=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(o[t]=s,i+=1):"object"==typeof s&&(n[t]=s,r+=1)})),r>0){var s=Object.keys(n),c=a.default.find(s,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=a.default.find(s,(function(e){return t.isPlatform(e)}));if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(i>0){var p=Object.keys(o),f=a.default.find(p,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(o[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),o=a.default.getBrowserTypeByAlias(r);return t&&o&&(r=o.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(a.default.compareVersions(o,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=o.default.getFirstMatch(i,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(t,e),version:o.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=o.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},n=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=o.default.getMacOSVersionName(t),r={name:i.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=o.default.getAndroidVersionName(t),r={name:i.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:i.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||o.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=o.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=o.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,o=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},n=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},n=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},n=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},n=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}})},3157:function(e,t,n){var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},o="undefined"!=typeof window&&window===this?this:void 0!==n.g&&null!=n.g?n.g:this;function i(){i=function(){},o.Symbol||(o.Symbol=c)}function s(e,t){this.a=e,r(this,"description",{configurable:!0,writable:!0,value:t})}s.prototype.toString=function(){return this.a};var a,c=(a=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new s("jscomp_symbol_"+(t||"")+"_"+a++,t)});function u(){i();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return function(e){return u(),(e={next:e})[o.Symbol.iterator]=function(){return this},e}(function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}(this))}}),u=function(){}}!function(e,t){if(t){var n=o;e=e.split(".");for(var i=0;i<e.length-1;i++){var s=e[i];s in n||(n[s]={}),n=n[s]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.entries",(function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}}));var l=this||self;function d(e,t,n){e=e.split("."),n=n||l,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t}function p(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var h="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),g=Array.prototype.forEach?function(e,t){Array.prototype.forEach.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in r&&t.call(void 0,r[o],o,e)},m=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),o="string"==typeof e?e.split(""):e,i=0;i<n;i++)i in o&&(r[i]=t.call(void 0,o[i],i,e));return r};function y(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}function v(e,t,n,r){var o="Assertion failed";if(n){o+=": "+n;var i=r}else e&&(o+=": "+e,i=t);throw Error(o,i||[])}function _(e,t,n){for(var r=[],o=2;o<arguments.length;++o)r[o-2]=arguments[o];return e||v("",null,t,r),e}function S(e,t){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];throw Error("Failure"+(e?": "+e:""),n)}function E(e,t,n,r){for(var o=[],i=3;i<arguments.length;++i)o[i-3]=arguments[i];e instanceof t||v("Expected instanceof %s but got %s.",[b(t),b(e)],n,o)}function b(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e}function T(e,t){if(this.c=e,this.b=t,this.a={},this.arrClean=!0,0<this.c.length){for(e=0;e<this.c.length;e++){var n=(t=this.c[e])[0];this.a[n.toString()]=new O(n,t[1])}this.arrClean=!0}}function w(e){this.a=0,this.b=e}function C(e,t){return e.b?(t.a||(t.a=new e.b(t.value)),t.a):t.value}function R(e){e=e.a;var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}function O(e,t){this.key=e,this.value=t,this.a=void 0}function I(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192)t+=String.fromCharCode.apply(null,y(e,n,n+8192));return t}d("jspb.Map",T,void 0),T.prototype.g=function(){if(this.arrClean){if(this.b){var e,t=this.a;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e].a;n&&n.g()}}}else{for(this.c.length=0,(t=R(this)).sort(),e=0;e<t.length;e++){var r=this.a[t[e]];(n=r.a)&&n.g(),this.c.push([r.key,r.value])}this.arrClean=!0}return this.c},T.prototype.toArray=T.prototype.g,T.prototype.Mc=function(e,t){for(var n=this.g(),r=[],o=0;o<n.length;o++){var i=this.a[n[o][0].toString()];C(this,i);var s=i.a;s?(_(t),r.push([i.key,t(e,s)])):r.push([i.key,i.value])}return r},T.prototype.toObject=T.prototype.Mc,T.fromObject=function(e,t,n){t=new T([],t);for(var r=0;r<e.length;r++){var o=e[r][0],i=n(e[r][1]);t.set(o,i)}return t},w.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(w.prototype[Symbol.iterator]=function(){return this}),T.prototype.Jb=function(){return R(this).length},T.prototype.getLength=T.prototype.Jb,T.prototype.clear=function(){this.a={},this.arrClean=!1},T.prototype.clear=T.prototype.clear,T.prototype.Cb=function(e){e=e.toString();var t=this.a.hasOwnProperty(e);return delete this.a[e],this.arrClean=!1,t},T.prototype.del=T.prototype.Cb,T.prototype.Eb=function(){var e=[],t=R(this);t.sort();for(var n=0;n<t.length;n++){var r=this.a[t[n]];e.push([r.key,r.value])}return e},T.prototype.getEntryList=T.prototype.Eb,T.prototype.entries=function(){var e=[],t=R(this);t.sort();for(var n=0;n<t.length;n++){var r=this.a[t[n]];e.push([r.key,C(this,r)])}return new w(e)},T.prototype.entries=T.prototype.entries,T.prototype.keys=function(){var e=[],t=R(this);t.sort();for(var n=0;n<t.length;n++)e.push(this.a[t[n]].key);return new w(e)},T.prototype.keys=T.prototype.keys,T.prototype.values=function(){var e=[],t=R(this);t.sort();for(var n=0;n<t.length;n++)e.push(C(this,this.a[t[n]]));return new w(e)},T.prototype.values=T.prototype.values,T.prototype.forEach=function(e,t){var n=R(this);n.sort();for(var r=0;r<n.length;r++){var o=this.a[n[r]];e.call(t,C(this,o),o.key,this)}},T.prototype.forEach=T.prototype.forEach,T.prototype.set=function(e,t){var n=new O(e);return this.b?(n.a=t,n.value=t.g()):n.value=t,this.a[e.toString()]=n,this.arrClean=!1,this},T.prototype.set=T.prototype.set,T.prototype.get=function(e){if(e=this.a[e.toString()])return C(this,e)},T.prototype.get=T.prototype.get,T.prototype.has=function(e){return e.toString()in this.a},T.prototype.has=T.prototype.has,T.prototype.Jc=function(e,t,n,r,o){var i=R(this);i.sort();for(var s=0;s<i.length;s++){var a=this.a[i[s]];t.Va(e),n.call(t,1,a.key),this.b?r.call(t,2,C(this,a),o):r.call(t,2,a.value),t.Ya()}},T.prototype.serializeBinary=T.prototype.Jc,T.deserializeBinary=function(e,t,n,r,o,i,s){for(;t.oa()&&!t.bb();){var a=t.c;1==a?i=n.call(t):2==a&&(e.b?(_(o),s||(s=new e.b),r.call(t,s,o)):s=r.call(t))}_(null!=i),_(null!=s),e.set(i,s)};var M={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},A={"'":"\\'"},k={},P=null;function D(e,t){void 0===t&&(t=0),L(),t=k[t];for(var n=[],r=0;r<e.length;r+=3){var o=e[r],i=r+1<e.length,s=i?e[r+1]:0,a=r+2<e.length,c=a?e[r+2]:0,u=o>>2;o=(3&o)<<4|s>>4,s=(15&s)<<2|c>>6,c&=63,a||(c=64,i||(s=64)),n.push(t[u],t[o],t[s]||"",t[c]||"")}return n.join("")}function N(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),o=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),o=P[n];if(null!=o)return o;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}L();for(var r=0;;){var o=n(-1),i=n(0),s=n(64),a=n(64);if(64===a&&-1===o)break;t(o<<2|i>>4),64!=s&&(t(i<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,(function(e){r[o++]=e})),r.subarray(0,o)}function L(){if(!P){P={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));k[n]=r;for(var o=0;o<r.length;o++){var i=r[o];void 0===P[i]&&(P[i]=o)}}}}d("jspb.ConstBinaryMessage",(function(){}),void 0),d("jspb.BinaryMessage",(function(){}),void 0),d("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0),d("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0),d("jspb.BinaryConstants.FieldTypeToWireType",(function(e){switch(e){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}}),void 0),d("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0),d("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0),d("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0),d("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0),d("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0),d("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0),d("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0),d("jspb.BinaryConstants.TWO_TO_20",1048576,void 0),d("jspb.BinaryConstants.TWO_TO_23",8388608,void 0),d("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0),d("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0),d("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0),d("jspb.BinaryConstants.TWO_TO_63",0x8000000000000000,void 0),d("jspb.BinaryConstants.TWO_TO_64",0x10000000000000000,void 0),d("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var x=0,U=0;function F(e){var t=e>>>0;e=Math.floor((e-t)/4294967296)>>>0,x=t,U=e}function B(e){var t=0>e,n=(e=Math.abs(e))>>>0;e=Math.floor((e-n)/4294967296),e>>>=0,t&&(e=~e>>>0,4294967295<(n=1+(~n>>>0))&&(n=0,4294967295<++e&&(e=0))),x=n,U=e}function j(e){var t=0>e;F(e=2*Math.abs(e)),e=x;var n=U;t&&(0==e?0==n?n=e=4294967295:(n--,e=4294967295):e--),x=e,U=n}function W(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?x=U=0:(U=0,x=2147483648);else if(isNaN(e))U=0,x=2147483647;else if(34028234663852886e22<e)U=0,x=(t<<31|2139095040)>>>0;else if(11754943508222875e-54>e)e=Math.round(e/Math.pow(2,-149)),U=0,x=(t<<31|e)>>>0;else{var n=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-n),16777216<=(e=Math.round(8388608*e))&&++n,U=0,x=(t<<31|n+127<<23|8388607&e)>>>0}}function G(e){var t=0>e?1:0;if(0===(e=t?-e:e))U=0<1/e?0:2147483648,x=0;else if(isNaN(e))U=2147483647,x=4294967295;else if(17976931348623157e292<e)U=(t<<31|2146435072)>>>0,x=0;else if(22250738585072014e-324>e)e/=Math.pow(2,-1074),U=(t<<31|e/4294967296)>>>0,x=e>>>0;else{var n=e,r=0;if(2<=n)for(;2<=n&&1023>r;)r++,n/=2;else for(;1>n&&-1022<r;)n*=2,r--;e*=Math.pow(2,-r),U=(t<<31|r+1023<<20|1048576*e&1048575)>>>0,x=4503599627370496*e>>>0}}function H(e){var t=e.charCodeAt(4),n=e.charCodeAt(5),r=e.charCodeAt(6),o=e.charCodeAt(7);x=e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)>>>0,U=t+(n<<8)+(r<<16)+(o<<24)>>>0}function z(e,t){return 4294967296*t+(e>>>0)}function V(e,t){var n=2147483648&t;return n&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=z(e,t),n?-e:e}function q(e,t,n){var r=t>>31;return n(e<<1^r,(t<<1|e>>>31)^r)}function $(e,t){return Y(e,t,V)}function Y(e,t,n){var r=-(1&e);return n((e>>>1|t<<31)^r,t>>>1^r)}function K(e){var t=2*(e>>31)+1,n=e>>>23&255;return e&=8388607,255==n?e?NaN:1/0*t:0==n?t*Math.pow(2,-149)*e:t*Math.pow(2,n-150)*(e+Math.pow(2,23))}function J(e,t){var n=2*(t>>31)+1,r=t>>>20&2047;return e=4294967296*(1048575&t)+e,2047==r?e?NaN:1/0*n:0==r?n*Math.pow(2,-1074)*e:n*Math.pow(2,r-1075)*(e+4503599627370496)}function X(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)}function Z(e,t){function n(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+z(e,t);var r=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*r+6710656*(t=t>>16&65535),r+=8147497*t,t*=2,1e7<=e&&(r+=Math.floor(e/1e7),e%=1e7),1e7<=r&&(t+=Math.floor(r/1e7),r%=1e7),n(t,0)+n(r,t)+n(e,1)}function Q(e,t){var n=2147483648&t;return n&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=Z(e,t),n?"-"+e:e}function ee(e,t){H(e),e=x;var n=U;return t?Q(e,n):Z(e,n)}function te(e){function t(e,t){for(var n=0;8>n&&(1!==e||0<t);n++)t=e*r[n]+t,r[n]=255&t,t>>>=8}_(0<e.length);var n=!1;"-"===e[0]&&(n=!0,e=e.slice(1));for(var r=[0,0,0,0,0,0,0,0],o=0;o<e.length;o++)t(10,e.charCodeAt(o)-48);return n&&(function(){for(var e=0;8>e;e++)r[e]=255&~r[e]}(),t(1,1)),I(r)}function ne(e){return String.fromCharCode(10>e?48+e:87+e)}function re(e){return 97<=e?e-97+10:e-48}function oe(e,t,n,r,o){var i=0;if(128>r)for(;t<n&&e[t++]==r;)i++,t+=o;else for(;t<n;){for(var s=r;128<s;){if(e[t++]!=(127&s|128))return i;s>>=7}if(e[t++]!=s)break;i++,t+=o}return i}function ie(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?N(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(S("Type not convertible to Uint8Array."),new Uint8Array(0))}function se(e,t,n){this.b=null,this.a=this.c=this.h=0,this.v=!1,e&&this.H(e,t,n)}d("jspb.utils.getSplit64Low",(function(){return x}),void 0),d("jspb.utils.getSplit64High",(function(){return U}),void 0),d("jspb.utils.splitUint64",F,void 0),d("jspb.utils.splitInt64",B,void 0),d("jspb.utils.splitZigzag64",j,void 0),d("jspb.utils.splitFloat32",W,void 0),d("jspb.utils.splitFloat64",G,void 0),d("jspb.utils.splitHash64",H,void 0),d("jspb.utils.joinUint64",z,void 0),d("jspb.utils.joinInt64",V,void 0),d("jspb.utils.toZigzag64",q,void 0),d("jspb.utils.joinZigzag64",$,void 0),d("jspb.utils.fromZigzag64",Y,void 0),d("jspb.utils.joinFloat32",K,void 0),d("jspb.utils.joinFloat64",J,void 0),d("jspb.utils.joinHash64",X,void 0),d("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0),d("jspb.utils.joinUnsignedDecimalString",Z,void 0),d("jspb.utils.joinSignedDecimalString",Q,void 0),d("jspb.utils.hash64ToDecimalString",ee,void 0),d("jspb.utils.hash64ArrayToDecimalStrings",(function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=ee(e[r],t);return n}),void 0),d("jspb.utils.decimalStringToHash64",te,void 0),d("jspb.utils.splitDecimalString",(function(e){H(te(e))}),void 0),d("jspb.utils.hash64ToHexString",(function(e){var t=Array(18);t[0]="0",t[1]="x";for(var n=0;8>n;n++){var r=e.charCodeAt(7-n);t[2*n+2]=ne(r>>4),t[2*n+3]=ne(15&r)}return t.join("")}),void 0),d("jspb.utils.hexStringToHash64",(function(e){_(18==(e=e.toLowerCase()).length),_("0"==e[0]),_("x"==e[1]);for(var t="",n=0;8>n;n++)t=String.fromCharCode(16*re(e.charCodeAt(2*n+2))+re(e.charCodeAt(2*n+3)))+t;return t}),void 0),d("jspb.utils.hash64ToNumber",(function(e,t){H(e),e=x;var n=U;return t?V(e,n):z(e,n)}),void 0),d("jspb.utils.numberToHash64",(function(e){return B(e),X(x,U)}),void 0),d("jspb.utils.countVarints",(function(e,t,n){for(var r=0,o=t;o<n;o++)r+=e[o]>>7;return n-t-r}),void 0),d("jspb.utils.countVarintFields",(function(e,t,n,r){var o=0;if(128>(r*=8))for(;t<n&&e[t++]==r;)for(o++;;){var i=e[t++];if(!(128&i))break}else for(;t<n;){for(i=r;128<i;){if(e[t]!=(127&i|128))return o;t++,i>>=7}if(e[t++]!=i)break;for(o++;128&(i=e[t++]););}return o}),void 0),d("jspb.utils.countFixed32Fields",(function(e,t,n,r){return oe(e,t,n,8*r+5,4)}),void 0),d("jspb.utils.countFixed64Fields",(function(e,t,n,r){return oe(e,t,n,8*r+1,8)}),void 0),d("jspb.utils.countDelimitedFields",(function(e,t,n,r){var o=0;for(r=8*r+2;t<n;){for(var i=r;128<i;){if(e[t++]!=(127&i|128))return o;i>>=7}if(e[t++]!=i)break;o++;for(var s=0,a=1;s+=(127&(i=e[t++]))*a,a*=128,128&i;);t+=s}return o}),void 0),d("jspb.utils.debugBytesToTextFormat",(function(e){var t='"';if(e){e=ie(e);for(var n=0;n<e.length;n++)t+="\\x",16>e[n]&&(t+="0"),t+=e[n].toString(16)}return t+'"'}),void 0),d("jspb.utils.debugScalarToTextFormat",(function(e){if("string"==typeof e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var r,o=e.charAt(n),i=o.charCodeAt(0),s=n+1;(r=M[o])||(31<i&&127>i||((i=o)in A?o=A[i]:i in M?o=A[i]=M[i]:(31<(r=i.charCodeAt(0))&&127>r?o=i:(256>r?(o="\\x",(16>r||256<r)&&(o+="0")):(o="\\u",4096>r&&(o+="0")),o+=r.toString(16).toUpperCase()),o=A[i]=o)),r=o),t[s]=r}t.push('"'),e=t.join("")}else e=e.toString();return e}),void 0),d("jspb.utils.stringToByteArray",(function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++){var r=e.charCodeAt(n);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");t[n]=r}return t}),void 0),d("jspb.utils.byteSourceToUint8Array",ie,void 0),d("jspb.BinaryDecoder",se,void 0);var ae=[];function ce(e,t,n){if(ae.length){var r=ae.pop();return e&&r.H(e,t,n),r}return new se(e,t,n)}function ue(e,t,n){this.a=ce(e,t,n),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}se.getInstanceCacheLength=function(){return ae.length},se.alloc=ce,se.prototype.Ca=function(){this.clear(),100>ae.length&&ae.push(this)},se.prototype.free=se.prototype.Ca,se.prototype.clone=function(){return ce(this.b,this.h,this.c-this.h)},se.prototype.clone=se.prototype.clone,se.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1},se.prototype.clear=se.prototype.clear,se.prototype.Y=function(){return this.b},se.prototype.getBuffer=se.prototype.Y,se.prototype.H=function(e,t,n){this.b=ie(e),this.h=void 0!==t?t:0,this.c=void 0!==n?this.h+n:this.b.length,this.a=this.h},se.prototype.setBlock=se.prototype.H,se.prototype.Db=function(){return this.c},se.prototype.getEnd=se.prototype.Db,se.prototype.setEnd=function(e){this.c=e},se.prototype.setEnd=se.prototype.setEnd,se.prototype.reset=function(){this.a=this.h},se.prototype.reset=se.prototype.reset,se.prototype.B=function(){return this.a},se.prototype.getCursor=se.prototype.B,se.prototype.Ma=function(e){this.a=e},se.prototype.setCursor=se.prototype.Ma,se.prototype.advance=function(e){this.a+=e,_(this.a<=this.c)},se.prototype.advance=se.prototype.advance,se.prototype.ya=function(){return this.a==this.c},se.prototype.atEnd=se.prototype.ya,se.prototype.Qb=function(){return this.a>this.c},se.prototype.pastEnd=se.prototype.Qb,se.prototype.getError=function(){return this.v||0>this.a||this.a>this.c},se.prototype.getError=se.prototype.getError,se.prototype.w=function(e){for(var t=128,n=0,r=0,o=0;4>o&&128<=t;o++)n|=(127&(t=this.b[this.a++]))<<7*o;if(128<=t&&(n|=(127&(t=this.b[this.a++]))<<28,r|=(127&t)>>4),128<=t)for(o=0;5>o&&128<=t;o++)r|=(127&(t=this.b[this.a++]))<<7*o+3;if(128>t)return e(n>>>0,r>>>0);S("Failed to read varint, encoding is invalid."),this.v=!0},se.prototype.readSplitVarint64=se.prototype.w,se.prototype.ea=function(e){return this.w((function(t,n){return Y(t,n,e)}))},se.prototype.readSplitZigzagVarint64=se.prototype.ea,se.prototype.ta=function(e){var t=this.b,n=this.a;this.a+=8;for(var r=0,o=0,i=n+7;i>=n;i--)r=r<<8|t[i],o=o<<8|t[i+4];return e(r,o)},se.prototype.readSplitFixed64=se.prototype.ta,se.prototype.kb=function(){for(;128&this.b[this.a];)this.a++;this.a++},se.prototype.skipVarint=se.prototype.kb,se.prototype.mb=function(e){for(;128<e;)this.a--,e>>>=7;this.a--},se.prototype.unskipVarint=se.prototype.mb,se.prototype.o=function(){var e=this.b,t=e[this.a],n=127&t;return 128>t?(this.a+=1,_(this.a<=this.c),n):(n|=(127&(t=e[this.a+1]))<<7,128>t?(this.a+=2,_(this.a<=this.c),n):(n|=(127&(t=e[this.a+2]))<<14,128>t?(this.a+=3,_(this.a<=this.c),n):(n|=(127&(t=e[this.a+3]))<<21,128>t?(this.a+=4,_(this.a<=this.c),n):(n|=(15&(t=e[this.a+4]))<<28,128>t?(this.a+=5,_(this.a<=this.c),n>>>0):(this.a+=5,128<=e[this.a++]&&128<=e[this.a++]&&128<=e[this.a++]&&128<=e[this.a++]&&128<=e[this.a++]&&_(!1),_(this.a<=this.c),n)))))},se.prototype.readUnsignedVarint32=se.prototype.o,se.prototype.da=function(){return~~this.o()},se.prototype.readSignedVarint32=se.prototype.da,se.prototype.O=function(){return this.o().toString()},se.prototype.Ea=function(){return this.da().toString()},se.prototype.readSignedVarint32String=se.prototype.Ea,se.prototype.Ia=function(){var e=this.o();return e>>>1^-(1&e)},se.prototype.readZigzagVarint32=se.prototype.Ia,se.prototype.Ga=function(){return this.w(z)},se.prototype.readUnsignedVarint64=se.prototype.Ga,se.prototype.Ha=function(){return this.w(Z)},se.prototype.readUnsignedVarint64String=se.prototype.Ha,se.prototype.sa=function(){return this.w(V)},se.prototype.readSignedVarint64=se.prototype.sa,se.prototype.Fa=function(){return this.w(Q)},se.prototype.readSignedVarint64String=se.prototype.Fa,se.prototype.Ja=function(){return this.w($)},se.prototype.readZigzagVarint64=se.prototype.Ja,se.prototype.fb=function(){return this.ea(X)},se.prototype.readZigzagVarintHash64=se.prototype.fb,se.prototype.Ka=function(){return this.ea(Q)},se.prototype.readZigzagVarint64String=se.prototype.Ka,se.prototype.Gc=function(){var e=this.b[this.a];return this.a+=1,_(this.a<=this.c),e},se.prototype.readUint8=se.prototype.Gc,se.prototype.Ec=function(){var e=this.b[this.a],t=this.b[this.a+1];return this.a+=2,_(this.a<=this.c),e|t<<8},se.prototype.readUint16=se.prototype.Ec,se.prototype.m=function(){var e=this.b[this.a],t=this.b[this.a+1],n=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,_(this.a<=this.c),(e|t<<8|n<<16|r<<24)>>>0},se.prototype.readUint32=se.prototype.m,se.prototype.ga=function(){return z(this.m(),this.m())},se.prototype.readUint64=se.prototype.ga,se.prototype.ha=function(){return Z(this.m(),this.m())},se.prototype.readUint64String=se.prototype.ha,se.prototype.Xb=function(){var e=this.b[this.a];return this.a+=1,_(this.a<=this.c),e<<24>>24},se.prototype.readInt8=se.prototype.Xb,se.prototype.Vb=function(){var e=this.b[this.a],t=this.b[this.a+1];return this.a+=2,_(this.a<=this.c),(e|t<<8)<<16>>16},se.prototype.readInt16=se.prototype.Vb,se.prototype.P=function(){var e=this.b[this.a],t=this.b[this.a+1],n=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,_(this.a<=this.c),e|t<<8|n<<16|r<<24},se.prototype.readInt32=se.prototype.P,se.prototype.ba=function(){return V(this.m(),this.m())},se.prototype.readInt64=se.prototype.ba,se.prototype.ca=function(){return Q(this.m(),this.m())},se.prototype.readInt64String=se.prototype.ca,se.prototype.aa=function(){return K(this.m())},se.prototype.readFloat=se.prototype.aa,se.prototype.Z=function(){return J(this.m(),this.m())},se.prototype.readDouble=se.prototype.Z,se.prototype.pa=function(){return!!this.b[this.a++]},se.prototype.readBool=se.prototype.pa,se.prototype.ra=function(){return this.da()},se.prototype.readEnum=se.prototype.ra,se.prototype.fa=function(e){var t=this.b,n=this.a;e=n+e;for(var r=[],o="";n<e;){var i=t[n++];if(128>i)r.push(i);else{if(192>i)continue;if(224>i){var s=t[n++];r.push((31&i)<<6|63&s)}else if(240>i){s=t[n++];var a=t[n++];r.push((15&i)<<12|(63&s)<<6|63&a)}else 248>i&&(i=(7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++],i-=65536,r.push(55296+(i>>10&1023),56320+(1023&i)))}8192<=r.length&&(o+=String.fromCharCode.apply(null,r),r.length=0)}return o+=I(r),this.a=n,o},se.prototype.readString=se.prototype.fa,se.prototype.Dc=function(){var e=this.o();return this.fa(e)},se.prototype.readStringWithLength=se.prototype.Dc,se.prototype.qa=function(e){if(0>e||this.a+e>this.b.length)return this.v=!0,S("Invalid byte length!"),new Uint8Array(0);var t=this.b.subarray(this.a,this.a+e);return this.a+=e,_(this.a<=this.c),t},se.prototype.readBytes=se.prototype.qa,se.prototype.ia=function(){return this.w(X)},se.prototype.readVarintHash64=se.prototype.ia,se.prototype.$=function(){var e=this.b,t=this.a,n=e[t],r=e[t+1],o=e[t+2],i=e[t+3],s=e[t+4],a=e[t+5],c=e[t+6];return e=e[t+7],this.a+=8,String.fromCharCode(n,r,o,i,s,a,c,e)},se.prototype.readFixedHash64=se.prototype.$,d("jspb.BinaryReader",ue,void 0);var le=[];function de(e,t,n){if(le.length){var r=le.pop();return e&&r.a.H(e,t,n),r}return new ue(e,t,n)}function pe(e,t){_(2==e.b);var n=e.a.o();n=e.a.B()+n;for(var r=[];e.a.B()<n;)r.push(t.call(e.a));return r}function fe(e,t,n,r,o){this.ma=e,this.Ba=t,this.la=n,this.Na=r,this.na=o}function he(e,t,n,r,o,i){this.Za=e,this.za=t,this.Aa=n,this.Wa=r,this.Ab=o,this.Nb=i}function ge(){}ue.clearInstanceCache=function(){le=[]},ue.getInstanceCacheLength=function(){return le.length},ue.alloc=de,ue.prototype.zb=de,ue.prototype.alloc=ue.prototype.zb,ue.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>le.length&&le.push(this)},ue.prototype.free=ue.prototype.Ca,ue.prototype.Fb=function(){return this.O},ue.prototype.getFieldCursor=ue.prototype.Fb,ue.prototype.B=function(){return this.a.B()},ue.prototype.getCursor=ue.prototype.B,ue.prototype.Y=function(){return this.a.Y()},ue.prototype.getBuffer=ue.prototype.Y,ue.prototype.Hb=function(){return this.c},ue.prototype.getFieldNumber=ue.prototype.Hb,ue.prototype.Lb=function(){return this.b},ue.prototype.getWireType=ue.prototype.Lb,ue.prototype.Mb=function(){return 2==this.b},ue.prototype.isDelimited=ue.prototype.Mb,ue.prototype.bb=function(){return 4==this.b},ue.prototype.isEndGroup=ue.prototype.bb,ue.prototype.getError=function(){return this.h||this.a.getError()},ue.prototype.getError=ue.prototype.getError,ue.prototype.H=function(e,t,n){this.a.H(e,t,n),this.b=this.c=-1},ue.prototype.setBlock=ue.prototype.H,ue.prototype.reset=function(){this.a.reset(),this.b=this.c=-1},ue.prototype.reset=ue.prototype.reset,ue.prototype.advance=function(e){this.a.advance(e)},ue.prototype.advance=ue.prototype.advance,ue.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return S("Decoder hit an error"),!1;this.O=this.a.B();var e=this.a.o(),t=e>>>3;return 0!=(e&=7)&&5!=e&&1!=e&&2!=e&&3!=e&&4!=e?(S("Invalid wire type: %s (at position %s)",e,this.O),this.h=!0,!1):(this.c=t,this.b=e,!0)},ue.prototype.nextField=ue.prototype.oa,ue.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)},ue.prototype.unskipHeader=ue.prototype.Oa,ue.prototype.Lc=function(){var e=this.c;for(this.Oa();this.oa()&&this.c==e;)this.C();this.a.ya()||this.Oa()},ue.prototype.skipMatchingFields=ue.prototype.Lc,ue.prototype.lb=function(){0!=this.b?(S("Invalid wire type for skipVarintField"),this.C()):this.a.kb()},ue.prototype.skipVarintField=ue.prototype.lb,ue.prototype.gb=function(){if(2!=this.b)S("Invalid wire type for skipDelimitedField"),this.C();else{var e=this.a.o();this.a.advance(e)}},ue.prototype.skipDelimitedField=ue.prototype.gb,ue.prototype.hb=function(){5!=this.b?(S("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)},ue.prototype.skipFixed32Field=ue.prototype.hb,ue.prototype.ib=function(){1!=this.b?(S("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)},ue.prototype.skipFixed64Field=ue.prototype.ib,ue.prototype.jb=function(){for(var e=this.c;;){if(!this.oa()){S("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(4==this.b){this.c!=e&&(S("Unmatched end-group tag"),this.h=!0);break}this.C()}},ue.prototype.skipGroup=ue.prototype.jb,ue.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:S("Invalid wire encoding for field.")}},ue.prototype.skipField=ue.prototype.C,ue.prototype.Hc=function(e,t){null===this.v&&(this.v={}),_(!this.v[e]),this.v[e]=t},ue.prototype.registerReadCallback=ue.prototype.Hc,ue.prototype.Ic=function(e){return _(null!==this.v),_(e=this.v[e]),e(this)},ue.prototype.runReadCallback=ue.prototype.Ic,ue.prototype.Yb=function(e,t){_(2==this.b);var n=this.a.c,r=this.a.o();r=this.a.B()+r,this.a.setEnd(r),t(e,this),this.a.Ma(r),this.a.setEnd(n)},ue.prototype.readMessage=ue.prototype.Yb,ue.prototype.Ub=function(e,t,n){_(3==this.b),_(this.c==e),n(t,this),this.h||4==this.b||(S("Group submessage did not end with an END_GROUP tag"),this.h=!0)},ue.prototype.readGroup=ue.prototype.Ub,ue.prototype.Gb=function(){_(2==this.b);var e=this.a.o(),t=this.a.B(),n=t+e;return e=ce(this.a.Y(),t,e),this.a.Ma(n),e},ue.prototype.getFieldDecoder=ue.prototype.Gb,ue.prototype.P=function(){return _(0==this.b),this.a.da()},ue.prototype.readInt32=ue.prototype.P,ue.prototype.Wb=function(){return _(0==this.b),this.a.Ea()},ue.prototype.readInt32String=ue.prototype.Wb,ue.prototype.ba=function(){return _(0==this.b),this.a.sa()},ue.prototype.readInt64=ue.prototype.ba,ue.prototype.ca=function(){return _(0==this.b),this.a.Fa()},ue.prototype.readInt64String=ue.prototype.ca,ue.prototype.m=function(){return _(0==this.b),this.a.o()},ue.prototype.readUint32=ue.prototype.m,ue.prototype.Fc=function(){return _(0==this.b),this.a.O()},ue.prototype.readUint32String=ue.prototype.Fc,ue.prototype.ga=function(){return _(0==this.b),this.a.Ga()},ue.prototype.readUint64=ue.prototype.ga,ue.prototype.ha=function(){return _(0==this.b),this.a.Ha()},ue.prototype.readUint64String=ue.prototype.ha,ue.prototype.zc=function(){return _(0==this.b),this.a.Ia()},ue.prototype.readSint32=ue.prototype.zc,ue.prototype.Ac=function(){return _(0==this.b),this.a.Ja()},ue.prototype.readSint64=ue.prototype.Ac,ue.prototype.Bc=function(){return _(0==this.b),this.a.Ka()},ue.prototype.readSint64String=ue.prototype.Bc,ue.prototype.Rb=function(){return _(5==this.b),this.a.m()},ue.prototype.readFixed32=ue.prototype.Rb,ue.prototype.Sb=function(){return _(1==this.b),this.a.ga()},ue.prototype.readFixed64=ue.prototype.Sb,ue.prototype.Tb=function(){return _(1==this.b),this.a.ha()},ue.prototype.readFixed64String=ue.prototype.Tb,ue.prototype.vc=function(){return _(5==this.b),this.a.P()},ue.prototype.readSfixed32=ue.prototype.vc,ue.prototype.wc=function(){return _(5==this.b),this.a.P().toString()},ue.prototype.readSfixed32String=ue.prototype.wc,ue.prototype.xc=function(){return _(1==this.b),this.a.ba()},ue.prototype.readSfixed64=ue.prototype.xc,ue.prototype.yc=function(){return _(1==this.b),this.a.ca()},ue.prototype.readSfixed64String=ue.prototype.yc,ue.prototype.aa=function(){return _(5==this.b),this.a.aa()},ue.prototype.readFloat=ue.prototype.aa,ue.prototype.Z=function(){return _(1==this.b),this.a.Z()},ue.prototype.readDouble=ue.prototype.Z,ue.prototype.pa=function(){return _(0==this.b),!!this.a.o()},ue.prototype.readBool=ue.prototype.pa,ue.prototype.ra=function(){return _(0==this.b),this.a.sa()},ue.prototype.readEnum=ue.prototype.ra,ue.prototype.fa=function(){_(2==this.b);var e=this.a.o();return this.a.fa(e)},ue.prototype.readString=ue.prototype.fa,ue.prototype.qa=function(){_(2==this.b);var e=this.a.o();return this.a.qa(e)},ue.prototype.readBytes=ue.prototype.qa,ue.prototype.ia=function(){return _(0==this.b),this.a.ia()},ue.prototype.readVarintHash64=ue.prototype.ia,ue.prototype.Cc=function(){return _(0==this.b),this.a.fb()},ue.prototype.readSintHash64=ue.prototype.Cc,ue.prototype.w=function(e){return _(0==this.b),this.a.w(e)},ue.prototype.readSplitVarint64=ue.prototype.w,ue.prototype.ea=function(e){return _(0==this.b),this.a.w((function(t,n){return Y(t,n,e)}))},ue.prototype.readSplitZigzagVarint64=ue.prototype.ea,ue.prototype.$=function(){return _(1==this.b),this.a.$()},ue.prototype.readFixedHash64=ue.prototype.$,ue.prototype.ta=function(e){return _(1==this.b),this.a.ta(e)},ue.prototype.readSplitFixed64=ue.prototype.ta,ue.prototype.gc=function(){return pe(this,this.a.da)},ue.prototype.readPackedInt32=ue.prototype.gc,ue.prototype.hc=function(){return pe(this,this.a.Ea)},ue.prototype.readPackedInt32String=ue.prototype.hc,ue.prototype.ic=function(){return pe(this,this.a.sa)},ue.prototype.readPackedInt64=ue.prototype.ic,ue.prototype.jc=function(){return pe(this,this.a.Fa)},ue.prototype.readPackedInt64String=ue.prototype.jc,ue.prototype.qc=function(){return pe(this,this.a.o)},ue.prototype.readPackedUint32=ue.prototype.qc,ue.prototype.rc=function(){return pe(this,this.a.O)},ue.prototype.readPackedUint32String=ue.prototype.rc,ue.prototype.sc=function(){return pe(this,this.a.Ga)},ue.prototype.readPackedUint64=ue.prototype.sc,ue.prototype.tc=function(){return pe(this,this.a.Ha)},ue.prototype.readPackedUint64String=ue.prototype.tc,ue.prototype.nc=function(){return pe(this,this.a.Ia)},ue.prototype.readPackedSint32=ue.prototype.nc,ue.prototype.oc=function(){return pe(this,this.a.Ja)},ue.prototype.readPackedSint64=ue.prototype.oc,ue.prototype.pc=function(){return pe(this,this.a.Ka)},ue.prototype.readPackedSint64String=ue.prototype.pc,ue.prototype.bc=function(){return pe(this,this.a.m)},ue.prototype.readPackedFixed32=ue.prototype.bc,ue.prototype.cc=function(){return pe(this,this.a.ga)},ue.prototype.readPackedFixed64=ue.prototype.cc,ue.prototype.dc=function(){return pe(this,this.a.ha)},ue.prototype.readPackedFixed64String=ue.prototype.dc,ue.prototype.kc=function(){return pe(this,this.a.P)},ue.prototype.readPackedSfixed32=ue.prototype.kc,ue.prototype.lc=function(){return pe(this,this.a.ba)},ue.prototype.readPackedSfixed64=ue.prototype.lc,ue.prototype.mc=function(){return pe(this,this.a.ca)},ue.prototype.readPackedSfixed64String=ue.prototype.mc,ue.prototype.fc=function(){return pe(this,this.a.aa)},ue.prototype.readPackedFloat=ue.prototype.fc,ue.prototype.$b=function(){return pe(this,this.a.Z)},ue.prototype.readPackedDouble=ue.prototype.$b,ue.prototype.Zb=function(){return pe(this,this.a.pa)},ue.prototype.readPackedBool=ue.prototype.Zb,ue.prototype.ac=function(){return pe(this,this.a.ra)},ue.prototype.readPackedEnum=ue.prototype.ac,ue.prototype.uc=function(){return pe(this,this.a.ia)},ue.prototype.readPackedVarintHash64=ue.prototype.uc,ue.prototype.ec=function(){return pe(this,this.a.$)},ue.prototype.readPackedFixedHash64=ue.prototype.ec,d("jspb.ExtensionFieldInfo",fe,void 0),d("jspb.ExtensionFieldBinaryInfo",he,void 0),fe.prototype.F=function(){return!!this.la},fe.prototype.isMessageType=fe.prototype.F,d("jspb.Message",ge,void 0),ge.GENERATE_TO_OBJECT=!0,ge.GENERATE_FROM_OBJECT=!0;var me="function"==typeof Uint8Array;ge.prototype.Ib=function(){return this.b},ge.prototype.getJsPbMessageId=ge.prototype.Ib,ge.initialize=function(e,t,n,r,o,i){if(e.f=null,t||(t=n?[n]:[]),e.b=n?String(n):void 0,e.D=0===n?-1:0,e.u=t,t=-1,!(n=e.u.length)||(t=n-1,null===(n=e.u[t])||"object"!=typeof n||Array.isArray(n)||me&&n instanceof Uint8Array)?-1<r?(e.G=Math.max(r,t+1-e.D),e.i=null):e.G=Number.MAX_VALUE:(e.G=t-e.D,e.i=n),e.a={},o)for(r=0;r<o.length;r++)(t=o[r])<e.G?(t+=e.D,e.u[t]=e.u[t]||ye):(ve(e),e.i[t]=e.i[t]||ye);if(i&&i.length)for(r=0;r<i.length;r++)Ae(e,i[r])};var ye=Object.freeze?Object.freeze([]):[];function ve(e){var t=e.G+e.D;e.u[t]||(e.i=e.u[t]={})}function _e(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=t.call(e[o],n,e[o]);return r}function Se(e,t){if(t<e.G){t+=e.D;var n=e.u[t];return n===ye?e.u[t]=[]:n}if(e.i)return(n=e.i[t])===ye?e.i[t]=[]:n}function Ee(e,t){return null==(e=Se(e,t))?e:+e}function be(e,t){return null==(e=Se(e,t))?e:!!e}function Te(e){return null==e||"string"==typeof e?e:me&&e instanceof Uint8Array?D(e):(S("Cannot coerce to b64 string: "+p(e)),null)}function we(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?N(e):(S("Cannot coerce to Uint8Array: "+p(e)),null)}function Ce(e){if(e&&1<e.length){var t=p(e[0]);g(e,(function(e){p(e)!=t&&S("Inconsistent type in JSPB repeated field array. Got "+p(e)+" expected "+t)}))}}function Re(e,t,n){return null==(e=Se(e,t))?n:e}function Oe(e,t,n){return E(e,ge),t<e.G?e.u[t+e.D]=n:(ve(e),e.i[t]=n),e}function Ie(e,t,n,r){return E(e,ge),n!==r?Oe(e,t,n):t<e.G?e.u[t+e.D]=null:(ve(e),delete e.i[t]),e}function Me(e,t,n,r){return E(e,ge),(n=Ae(e,n))&&n!==t&&void 0!==r&&(e.f&&n in e.f&&(e.f[n]=void 0),Oe(e,n,void 0)),Oe(e,t,r)}function Ae(e,t){for(var n,r,o=0;o<t.length;o++){var i=t[o],s=Se(e,i);null!=s&&(n=i,r=s,Oe(e,i,void 0))}return n?(Oe(e,n,r),n):0}function ke(e,t,n){if(e.f||(e.f={}),!e.f[n]){for(var r=Se(e,n),o=[],i=0;i<r.length;i++)o[i]=new t(r[i]);e.f[n]=o}}function Pe(e){if(e.f)for(var t in e.f){var n=e.f[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&n[r].g();else n&&n.g()}}function De(e,t){e=e||{},t=t||{};var n,r={};for(n in e)r[n]=0;for(n in t)r[n]=0;for(n in r)if(!Ne(e[n],t[n]))return!1;return!0}function Ne(e,t){if(e==t)return!0;if(!f(e)||!f(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(me&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}if(e.constructor===Array){var r=void 0,o=void 0,i=Math.max(e.length,t.length);for(n=0;n<i;n++){var s=e[n],a=t[n];if(s&&s.constructor==Object&&(_(void 0===r),_(n===e.length-1),r=s,s=void 0),a&&a.constructor==Object&&(_(void 0===o),_(n===t.length-1),o=a,a=void 0),!Ne(s,a))return!1}return!r&&!o||De(r=r||{},o=o||{})}if(e.constructor===Object)return De(e,t);throw Error("Invalid type in JSPB array")}function Le(e){return new e.constructor(xe(e.g()))}function xe(e){if(Array.isArray(e)){for(var t=Array(e.length),n=0;n<e.length;n++){var r=e[n];null!=r&&(t[n]="object"==typeof r?xe(_(r)):r)}return t}if(me&&e instanceof Uint8Array)return new Uint8Array(e);for(n in t={},e)null!=(r=e[n])&&(t[n]="object"==typeof r?xe(_(r)):r);return t}ge.toObjectList=_e,ge.toObjectExtension=function(e,t,n,r,o){for(var i in n){var s=n[i],a=r.call(e,s);if(null!=a){for(var c in s.Ba)if(s.Ba.hasOwnProperty(c))break;t[c]=s.Na?s.na?_e(a,s.Na,o):s.Na(o,a):a}}},ge.serializeBinaryExtensions=function(e,t,n,r){for(var o in n){var i=n[o],s=i.Za;if(!i.Aa)throw Error("Message extension present that was generated without binary serialization support");var a=r.call(e,s);if(null!=a)if(s.F()){if(!i.Wa)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");i.Aa.call(t,s.ma,a,i.Wa)}else i.Aa.call(t,s.ma,a)}},ge.readBinaryExtension=function(e,t,n,r,o){var i=n[t.c];if(i){if(n=i.Za,!i.za)throw Error("Deserializing extension whose generated code does not support binary format");if(n.F()){var s=new n.la;i.za.call(t,s,i.Ab)}else s=i.za.call(t);n.na&&!i.Nb?(t=r.call(e,n))?t.push(s):o.call(e,n,[s]):o.call(e,n,s)}else t.C()},ge.getField=Se,ge.getRepeatedField=function(e,t){return Se(e,t)},ge.getOptionalFloatingPointField=Ee,ge.getBooleanField=be,ge.getRepeatedFloatingPointField=function(e,t){var n=Se(e,t);if(e.a||(e.a={}),!e.a[t]){for(var r=0;r<n.length;r++)n[r]=+n[r];e.a[t]=!0}return n},ge.getRepeatedBooleanField=function(e,t){var n=Se(e,t);if(e.a||(e.a={}),!e.a[t]){for(var r=0;r<n.length;r++)n[r]=!!n[r];e.a[t]=!0}return n},ge.bytesAsB64=Te,ge.bytesAsU8=we,ge.bytesListAsB64=function(e){return Ce(e),e.length&&"string"!=typeof e[0]?m(e,Te):e},ge.bytesListAsU8=function(e){return Ce(e),!e.length||e[0]instanceof Uint8Array?e:m(e,we)},ge.getFieldWithDefault=Re,ge.getBooleanFieldWithDefault=function(e,t,n){return null==(e=be(e,t))?n:e},ge.getFloatingPointFieldWithDefault=function(e,t,n){return null==(e=Ee(e,t))?n:e},ge.getFieldProto3=Re,ge.getMapField=function(e,t,n,r){if(e.f||(e.f={}),t in e.f)return e.f[t];var o=Se(e,t);if(!o){if(n)return;Oe(e,t,o=[])}return e.f[t]=new T(o,r)},ge.setField=Oe,ge.setProto3IntField=function(e,t,n){return Ie(e,t,n,0)},ge.setProto3FloatField=function(e,t,n){return Ie(e,t,n,0)},ge.setProto3BooleanField=function(e,t,n){return Ie(e,t,n,!1)},ge.setProto3StringField=function(e,t,n){return Ie(e,t,n,"")},ge.setProto3BytesField=function(e,t,n){return Ie(e,t,n,"")},ge.setProto3EnumField=function(e,t,n){return Ie(e,t,n,0)},ge.setProto3StringIntField=function(e,t,n){return Ie(e,t,n,"0")},ge.addToRepeatedField=function(e,t,n,r){return E(e,ge),t=Se(e,t),null!=r?t.splice(r,0,n):t.push(n),e},ge.setOneofField=Me,ge.computeOneofCase=Ae,ge.getWrapperField=function(e,t,n,r){if(e.f||(e.f={}),!e.f[n]){var o=Se(e,n);(r||o)&&(e.f[n]=new t(o))}return e.f[n]},ge.getRepeatedWrapperField=function(e,t,n){return ke(e,t,n),(t=e.f[n])==ye&&(t=e.f[n]=[]),t},ge.setWrapperField=function(e,t,n){E(e,ge),e.f||(e.f={});var r=n?n.g():n;return e.f[t]=n,Oe(e,t,r)},ge.setOneofWrapperField=function(e,t,n,r){E(e,ge),e.f||(e.f={});var o=r?r.g():r;return e.f[t]=r,Me(e,t,n,o)},ge.setRepeatedWrapperField=function(e,t,n){E(e,ge),e.f||(e.f={}),n=n||[];for(var r=[],o=0;o<n.length;o++)r[o]=n[o].g();return e.f[t]=n,Oe(e,t,r)},ge.addToRepeatedWrapperField=function(e,t,n,r,o){ke(e,r,t);var i=e.f[t];return i||(i=e.f[t]=[]),n=n||new r,e=Se(e,t),null!=o?(i.splice(o,0,n),e.splice(o,0,n.g())):(i.push(n),e.push(n.g())),n},ge.toMap=function(e,t,n,r){for(var o={},i=0;i<e.length;i++)o[t.call(e[i])]=n?n.call(e[i],r,e[i]):e[i];return o},ge.prototype.g=function(){return Pe(this),this.u},ge.prototype.toArray=ge.prototype.g,ge.prototype.toString=function(){return Pe(this),this.u.toString()},ge.prototype.getExtension=function(e){if(this.i){this.f||(this.f={});var t=e.ma;if(e.na){if(e.F())return this.f[t]||(this.f[t]=m(this.i[t]||[],(function(t){return new e.la(t)}))),this.f[t]}else if(e.F())return!this.f[t]&&this.i[t]&&(this.f[t]=new e.la(this.i[t])),this.f[t];return this.i[t]}},ge.prototype.getExtension=ge.prototype.getExtension,ge.prototype.Kc=function(e,t){this.f||(this.f={}),ve(this);var n=e.ma;return e.na?(t=t||[],e.F()?(this.f[n]=t,this.i[n]=m(t,(function(e){return e.g()}))):this.i[n]=t):e.F()?(this.f[n]=t,this.i[n]=t?t.g():t):this.i[n]=t,this},ge.prototype.setExtension=ge.prototype.Kc,ge.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var n=e.g();t=t.g();var r=[],o=0,i=n.length>t.length?n.length:t.length;for(e.b&&(r[0]=e.b,o=1);o<i;o++)Ne(n[o],t[o])||(r[o]=t[o]);return new e.constructor(r)},ge.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&Ne(e.g(),t.g())},ge.compareExtensions=De,ge.compareFields=Ne,ge.prototype.Bb=function(){return Le(this)},ge.prototype.cloneMessage=ge.prototype.Bb,ge.prototype.clone=function(){return Le(this)},ge.prototype.clone=ge.prototype.clone,ge.clone=function(e){return Le(e)},ge.copyInto=function(e,t){E(e,ge),E(t,ge),_(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=Le(e);for(var n=t.g(),r=e.g(),o=n.length=0;o<r.length;o++)n[o]=r[o];t.f=e.f,t.i=e.i},ge.registerMessageType=function(e,t){t.we=e};var Ue={dump:function(e){return E(e,ge,"jspb.Message instance expected"),_(e.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),Ue.X(e)}};function Fe(){this.a=[]}function Be(e,t){this.lo=e,this.hi=t}function je(e,t){var n=65535&e,r=65535&t,o=t>>>16;for(t=n*r+65536*(n*o&65535)+65536*((e>>>=16)*r&65535),n=e*o+(n*o>>>16)+(e*r>>>16);4294967296<=t;)t-=4294967296,n+=1;return new Be(t>>>0,n>>>0)}function We(e){for(var t=new Be(0,0),n=new Be(0,0),r=0;r<e.length;r++){if("0">e[r]||"9"<e[r])return null;n.lo=parseInt(e[r],10),t=t.eb(10).add(n)}return t}function Ge(e,t){this.lo=e,this.hi=t}function He(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=We(e))?null:(t&&(e=new Be(0,0).sub(e)),new Ge(e.lo,e.hi))}function ze(){this.c=[],this.b=0,this.a=new Fe,this.h=[]}function Ve(e,t){var n=e.a.end();e.c.push(n),e.c.push(t),e.b+=n.length+t.length}function qe(e,t){return Ye(e,t,2),t=e.a.end(),e.c.push(t),e.b+=t.length,t.push(e.b),t}function $e(e,t){var n=t.pop();for(_(0<=(n=e.b+e.a.length()-n));127<n;)t.push(127&n|128),n>>>=7,e.b++;t.push(n),e.b++}function Ye(e,t,n){_(1<=t&&t==Math.floor(t)),e.a.j(8*t+n)}function Ke(e,t,n){null!=n&&(Ye(e,t,0),e.a.j(n))}function Je(e,t,n){null!=n&&(Ye(e,t,0),e.a.M(n))}d("jspb.debug.dump",Ue.dump,void 0),Ue.X=function(e){var t=p(e);if("number"==t||"string"==t||"boolean"==t||"null"==t||"undefined"==t||"undefined"!=typeof Uint8Array&&e instanceof Uint8Array)return e;if("array"==t)return function(e,t,n){for(var r=[],o=2;o<arguments.length;++o)r[o-2]=arguments[o];Array.isArray(e)||v("Expected array but got %s: %s.",[p(e),e],t,r)}(e),m(e,Ue.X);if(e instanceof T){for(var n={},r=(e=e.entries()).next();!r.done;r=e.next())n[r.value[0]]=Ue.X(r.value[1]);return n}E(e,ge,"Only messages expected: "+e);var o={$name:(t=e.constructor).name||t.displayName};for(a in t.prototype){var i=/^get([A-Z]\w*)/.exec(a);if(i&&"getExtension"!=a&&"getJsPbMessageId"!=a){var s="has"+i[1];e[s]&&!e[s]()||(s=e[a](),o[Ue.$a(i[1])]=Ue.X(s))}}if(e.extensionObject_)return o.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",o;for(r in t.extensions)if(/^\d+$/.test(r)){s=t.extensions[r];var a=e.getExtension(s);i=void 0,s=s.Ba;var c=[],u=0;for(i in s)c[u++]=i;i=c[0],null!=a&&(n||(n=o.$extensions={}),n[Ue.$a(i)]=Ue.X(a))}return o},Ue.$a=function(e){return e.replace(/^[A-Z]/,(function(e){return e.toLowerCase()}))},d("jspb.BinaryEncoder",Fe,void 0),Fe.prototype.length=function(){return this.a.length},Fe.prototype.length=Fe.prototype.length,Fe.prototype.end=function(){var e=this.a;return this.a=[],e},Fe.prototype.end=Fe.prototype.end,Fe.prototype.l=function(e,t){for(_(e==Math.floor(e)),_(t==Math.floor(t)),_(0<=e&&4294967296>e),_(0<=t&&4294967296>t);0<t||127<e;)this.a.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.a.push(e)},Fe.prototype.writeSplitVarint64=Fe.prototype.l,Fe.prototype.A=function(e,t){_(e==Math.floor(e)),_(t==Math.floor(t)),_(0<=e&&4294967296>e),_(0<=t&&4294967296>t),this.s(e),this.s(t)},Fe.prototype.writeSplitFixed64=Fe.prototype.A,Fe.prototype.j=function(e){for(_(e==Math.floor(e)),_(0<=e&&4294967296>e);127<e;)this.a.push(127&e|128),e>>>=7;this.a.push(e)},Fe.prototype.writeUnsignedVarint32=Fe.prototype.j,Fe.prototype.M=function(e){if(_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),0<=e)this.j(e);else{for(var t=0;9>t;t++)this.a.push(127&e|128),e>>=7;this.a.push(1)}},Fe.prototype.writeSignedVarint32=Fe.prototype.M,Fe.prototype.va=function(e){_(e==Math.floor(e)),_(0<=e&&0x10000000000000000>e),B(e),this.l(x,U)},Fe.prototype.writeUnsignedVarint64=Fe.prototype.va,Fe.prototype.ua=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=e&&0x8000000000000000>e),B(e),this.l(x,U)},Fe.prototype.writeSignedVarint64=Fe.prototype.ua,Fe.prototype.wa=function(e){_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),this.j((e<<1^e>>31)>>>0)},Fe.prototype.writeZigzagVarint32=Fe.prototype.wa,Fe.prototype.xa=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=e&&0x8000000000000000>e),j(e),this.l(x,U)},Fe.prototype.writeZigzagVarint64=Fe.prototype.xa,Fe.prototype.Ta=function(e){this.W(te(e))},Fe.prototype.writeZigzagVarint64String=Fe.prototype.Ta,Fe.prototype.W=function(e){var t=this;H(e),q(x,U,(function(e,n){t.l(e>>>0,n>>>0)}))},Fe.prototype.writeZigzagVarintHash64=Fe.prototype.W,Fe.prototype.be=function(e){_(e==Math.floor(e)),_(0<=e&&256>e),this.a.push(e>>>0&255)},Fe.prototype.writeUint8=Fe.prototype.be,Fe.prototype.ae=function(e){_(e==Math.floor(e)),_(0<=e&&65536>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255)},Fe.prototype.writeUint16=Fe.prototype.ae,Fe.prototype.s=function(e){_(e==Math.floor(e)),_(0<=e&&4294967296>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255),this.a.push(e>>>16&255),this.a.push(e>>>24&255)},Fe.prototype.writeUint32=Fe.prototype.s,Fe.prototype.V=function(e){_(e==Math.floor(e)),_(0<=e&&0x10000000000000000>e),F(e),this.s(x),this.s(U)},Fe.prototype.writeUint64=Fe.prototype.V,Fe.prototype.Qc=function(e){_(e==Math.floor(e)),_(-128<=e&&128>e),this.a.push(e>>>0&255)},Fe.prototype.writeInt8=Fe.prototype.Qc,Fe.prototype.Pc=function(e){_(e==Math.floor(e)),_(-32768<=e&&32768>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255)},Fe.prototype.writeInt16=Fe.prototype.Pc,Fe.prototype.S=function(e){_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),this.a.push(e>>>0&255),this.a.push(e>>>8&255),this.a.push(e>>>16&255),this.a.push(e>>>24&255)},Fe.prototype.writeInt32=Fe.prototype.S,Fe.prototype.T=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=e&&0x8000000000000000>e),B(e),this.A(x,U)},Fe.prototype.writeInt64=Fe.prototype.T,Fe.prototype.ka=function(e){_(e==Math.floor(e)),_(-0x8000000000000000<=+e&&0x8000000000000000>+e),H(te(e)),this.A(x,U)},Fe.prototype.writeInt64String=Fe.prototype.ka,Fe.prototype.L=function(e){_(1/0===e||-1/0===e||isNaN(e)||-34028234663852886e22<=e&&34028234663852886e22>=e),W(e),this.s(x)},Fe.prototype.writeFloat=Fe.prototype.L,Fe.prototype.J=function(e){_(1/0===e||-1/0===e||isNaN(e)||-17976931348623157e292<=e&&17976931348623157e292>=e),G(e),this.s(x),this.s(U)},Fe.prototype.writeDouble=Fe.prototype.J,Fe.prototype.I=function(e){_("boolean"==typeof e||"number"==typeof e),this.a.push(e?1:0)},Fe.prototype.writeBool=Fe.prototype.I,Fe.prototype.R=function(e){_(e==Math.floor(e)),_(-2147483648<=e&&2147483648>e),this.M(e)},Fe.prototype.writeEnum=Fe.prototype.R,Fe.prototype.ja=function(e){this.a.push.apply(this.a,e)},Fe.prototype.writeBytes=Fe.prototype.ja,Fe.prototype.N=function(e){H(e),this.l(x,U)},Fe.prototype.writeVarintHash64=Fe.prototype.N,Fe.prototype.K=function(e){H(e),this.s(x),this.s(U)},Fe.prototype.writeFixedHash64=Fe.prototype.K,Fe.prototype.U=function(e){var t=this.a.length;!function(e,t,n){for(var r=[],o=2;o<arguments.length;++o)r[o-2]=arguments[o];"string"!=typeof e&&v("Expected string but got %s: %s.",[p(e),e],t,r)}(e);for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(128>r)this.a.push(r);else if(2048>r)this.a.push(r>>6|192),this.a.push(63&r|128);else if(65536>r)if(55296<=r&&56319>=r&&n+1<e.length){var o=e.charCodeAt(n+1);56320<=o&&57343>=o&&(r=1024*(r-55296)+o-56320+65536,this.a.push(r>>18|240),this.a.push(r>>12&63|128),this.a.push(r>>6&63|128),this.a.push(63&r|128),n++)}else this.a.push(r>>12|224),this.a.push(r>>6&63|128),this.a.push(63&r|128)}return this.a.length-t},Fe.prototype.writeString=Fe.prototype.U,d("jspb.arith.UInt64",Be,void 0),Be.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},Be.prototype.cmp=Be.prototype.cmp,Be.prototype.La=function(){return new Be((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},Be.prototype.rightShift=Be.prototype.La,Be.prototype.Da=function(){return new Be(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},Be.prototype.leftShift=Be.prototype.Da,Be.prototype.cb=function(){return!!(2147483648&this.hi)},Be.prototype.msb=Be.prototype.cb,Be.prototype.Ob=function(){return!!(1&this.lo)},Be.prototype.lsb=Be.prototype.Ob,Be.prototype.Ua=function(){return 0==this.lo&&0==this.hi},Be.prototype.zero=Be.prototype.Ua,Be.prototype.add=function(e){return new Be((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},Be.prototype.add=Be.prototype.add,Be.prototype.sub=function(e){return new Be((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},Be.prototype.sub=Be.prototype.sub,Be.mul32x32=je,Be.prototype.eb=function(e){var t=je(this.lo,e);return(e=je(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},Be.prototype.mul=Be.prototype.eb,Be.prototype.Xa=function(e){if(0==e)return[];var t=new Be(0,0),n=new Be(this.lo,this.hi);e=new Be(e,0);for(var r=new Be(1,0);!e.cb();)e=e.Da(),r=r.Da();for(;!r.Ua();)0>=e.cmp(n)&&(t=t.add(r),n=n.sub(e)),e=e.La(),r=r.La();return[t,n]},Be.prototype.div=Be.prototype.Xa,Be.prototype.toString=function(){for(var e="",t=this;!t.Ua();){var n=(t=t.Xa(10))[0];e=t[1].lo+e,t=n}return""==e&&(e="0"),e},Be.prototype.toString=Be.prototype.toString,Be.fromString=We,Be.prototype.clone=function(){return new Be(this.lo,this.hi)},Be.prototype.clone=Be.prototype.clone,d("jspb.arith.Int64",Ge,void 0),Ge.prototype.add=function(e){return new Ge((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},Ge.prototype.add=Ge.prototype.add,Ge.prototype.sub=function(e){return new Ge((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},Ge.prototype.sub=Ge.prototype.sub,Ge.prototype.clone=function(){return new Ge(this.lo,this.hi)},Ge.prototype.clone=Ge.prototype.clone,Ge.prototype.toString=function(){var e=!!(2147483648&this.hi),t=new Be(this.lo,this.hi);return e&&(t=new Be(0,0).sub(t)),(e?"-":"")+t.toString()},Ge.prototype.toString=Ge.prototype.toString,Ge.fromString=He,d("jspb.BinaryWriter",ze,void 0),ze.prototype.pb=function(e,t,n){Ve(this,e.subarray(t,n))},ze.prototype.writeSerializedMessage=ze.prototype.pb,ze.prototype.Pb=function(e,t,n){null!=e&&null!=t&&null!=n&&this.pb(e,t,n)},ze.prototype.maybeWriteSerializedMessage=ze.prototype.Pb,ze.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]},ze.prototype.reset=ze.prototype.reset,ze.prototype.ab=function(){_(0==this.h.length);for(var e=new Uint8Array(this.b+this.a.length()),t=this.c,n=t.length,r=0,o=0;o<n;o++){var i=t[o];e.set(i,r),r+=i.length}return t=this.a.end(),e.set(t,r),_((r+=t.length)==e.length),this.c=[e],e},ze.prototype.getResultBuffer=ze.prototype.ab,ze.prototype.Kb=function(e){return D(this.ab(),e)},ze.prototype.getResultBase64String=ze.prototype.Kb,ze.prototype.Va=function(e){this.h.push(qe(this,e))},ze.prototype.beginSubMessage=ze.prototype.Va,ze.prototype.Ya=function(){_(0<=this.h.length),$e(this,this.h.pop())},ze.prototype.endSubMessage=ze.prototype.Ya,ze.prototype.Nc=function(e,t,n){switch(e){case 1:this.J(t,n);break;case 2:this.L(t,n);break;case 3:this.T(t,n);break;case 4:this.V(t,n);break;case 5:this.S(t,n);break;case 6:this.Qa(t,n);break;case 7:this.Pa(t,n);break;case 8:this.I(t,n);break;case 9:this.U(t,n);break;case 10:S("Group field type not supported in writeAny()");break;case 11:S("Message field type not supported in writeAny()");break;case 12:this.ja(t,n);break;case 13:this.s(t,n);break;case 14:this.R(t,n);break;case 15:this.Ra(t,n);break;case 16:this.Sa(t,n);break;case 17:this.rb(t,n);break;case 18:this.sb(t,n);break;case 30:this.K(t,n);break;case 31:this.N(t,n);break;default:S("Invalid field type in writeAny()")}},ze.prototype.writeAny=ze.prototype.Nc,ze.prototype.S=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),Je(this,e,t))},ze.prototype.writeInt32=ze.prototype.S,ze.prototype.ob=function(e,t){null!=t&&(_(-2147483648<=(t=parseInt(t,10))&&2147483648>t),Je(this,e,t))},ze.prototype.writeInt32String=ze.prototype.ob,ze.prototype.T=function(e,t){null!=t&&(_(-0x8000000000000000<=t&&0x8000000000000000>t),null!=t&&(Ye(this,e,0),this.a.ua(t)))},ze.prototype.writeInt64=ze.prototype.T,ze.prototype.ka=function(e,t){null!=t&&(t=He(t),Ye(this,e,0),this.a.l(t.lo,t.hi))},ze.prototype.writeInt64String=ze.prototype.ka,ze.prototype.s=function(e,t){null!=t&&(_(0<=t&&4294967296>t),Ke(this,e,t))},ze.prototype.writeUint32=ze.prototype.s,ze.prototype.ub=function(e,t){null!=t&&(_(0<=(t=parseInt(t,10))&&4294967296>t),Ke(this,e,t))},ze.prototype.writeUint32String=ze.prototype.ub,ze.prototype.V=function(e,t){null!=t&&(_(0<=t&&0x10000000000000000>t),null!=t&&(Ye(this,e,0),this.a.va(t)))},ze.prototype.writeUint64=ze.prototype.V,ze.prototype.vb=function(e,t){null!=t&&(t=We(t),Ye(this,e,0),this.a.l(t.lo,t.hi))},ze.prototype.writeUint64String=ze.prototype.vb,ze.prototype.rb=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),null!=t&&(Ye(this,e,0),this.a.wa(t)))},ze.prototype.writeSint32=ze.prototype.rb,ze.prototype.sb=function(e,t){null!=t&&(_(-0x8000000000000000<=t&&0x8000000000000000>t),null!=t&&(Ye(this,e,0),this.a.xa(t)))},ze.prototype.writeSint64=ze.prototype.sb,ze.prototype.$d=function(e,t){null!=t&&null!=t&&(Ye(this,e,0),this.a.W(t))},ze.prototype.writeSintHash64=ze.prototype.$d,ze.prototype.Zd=function(e,t){null!=t&&null!=t&&(Ye(this,e,0),this.a.Ta(t))},ze.prototype.writeSint64String=ze.prototype.Zd,ze.prototype.Pa=function(e,t){null!=t&&(_(0<=t&&4294967296>t),Ye(this,e,5),this.a.s(t))},ze.prototype.writeFixed32=ze.prototype.Pa,ze.prototype.Qa=function(e,t){null!=t&&(_(0<=t&&0x10000000000000000>t),Ye(this,e,1),this.a.V(t))},ze.prototype.writeFixed64=ze.prototype.Qa,ze.prototype.nb=function(e,t){null!=t&&(t=We(t),Ye(this,e,1),this.a.A(t.lo,t.hi))},ze.prototype.writeFixed64String=ze.prototype.nb,ze.prototype.Ra=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),Ye(this,e,5),this.a.S(t))},ze.prototype.writeSfixed32=ze.prototype.Ra,ze.prototype.Sa=function(e,t){null!=t&&(_(-0x8000000000000000<=t&&0x8000000000000000>t),Ye(this,e,1),this.a.T(t))},ze.prototype.writeSfixed64=ze.prototype.Sa,ze.prototype.qb=function(e,t){null!=t&&(t=He(t),Ye(this,e,1),this.a.A(t.lo,t.hi))},ze.prototype.writeSfixed64String=ze.prototype.qb,ze.prototype.L=function(e,t){null!=t&&(Ye(this,e,5),this.a.L(t))},ze.prototype.writeFloat=ze.prototype.L,ze.prototype.J=function(e,t){null!=t&&(Ye(this,e,1),this.a.J(t))},ze.prototype.writeDouble=ze.prototype.J,ze.prototype.I=function(e,t){null!=t&&(_("boolean"==typeof t||"number"==typeof t),Ye(this,e,0),this.a.I(t))},ze.prototype.writeBool=ze.prototype.I,ze.prototype.R=function(e,t){null!=t&&(_(-2147483648<=t&&2147483648>t),Ye(this,e,0),this.a.M(t))},ze.prototype.writeEnum=ze.prototype.R,ze.prototype.U=function(e,t){null!=t&&(e=qe(this,e),this.a.U(t),$e(this,e))},ze.prototype.writeString=ze.prototype.U,ze.prototype.ja=function(e,t){null!=t&&(t=ie(t),Ye(this,e,2),this.a.j(t.length),Ve(this,t))},ze.prototype.writeBytes=ze.prototype.ja,ze.prototype.Rc=function(e,t,n){null!=t&&(e=qe(this,e),n(t,this),$e(this,e))},ze.prototype.writeMessage=ze.prototype.Rc,ze.prototype.Sc=function(e,t,n){null!=t&&(Ye(this,1,3),Ye(this,2,0),this.a.M(e),e=qe(this,3),n(t,this),$e(this,e),Ye(this,1,4))},ze.prototype.writeMessageSet=ze.prototype.Sc,ze.prototype.Oc=function(e,t,n){null!=t&&(Ye(this,e,3),n(t,this),Ye(this,e,4))},ze.prototype.writeGroup=ze.prototype.Oc,ze.prototype.K=function(e,t){null!=t&&(_(8==t.length),Ye(this,e,1),this.a.K(t))},ze.prototype.writeFixedHash64=ze.prototype.K,ze.prototype.N=function(e,t){null!=t&&(_(8==t.length),Ye(this,e,0),this.a.N(t))},ze.prototype.writeVarintHash64=ze.prototype.N,ze.prototype.A=function(e,t,n){Ye(this,e,1),this.a.A(t,n)},ze.prototype.writeSplitFixed64=ze.prototype.A,ze.prototype.l=function(e,t,n){Ye(this,e,0),this.a.l(t,n)},ze.prototype.writeSplitVarint64=ze.prototype.l,ze.prototype.tb=function(e,t,n){Ye(this,e,0);var r=this.a;q(t,n,(function(e,t){r.l(e>>>0,t>>>0)}))},ze.prototype.writeSplitZigzagVarint64=ze.prototype.tb,ze.prototype.Ed=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)Je(this,e,t[n])},ze.prototype.writeRepeatedInt32=ze.prototype.Ed,ze.prototype.Fd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ob(e,t[n])},ze.prototype.writeRepeatedInt32String=ze.prototype.Fd,ze.prototype.Gd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ye(this,e,0),this.a.ua(r))}},ze.prototype.writeRepeatedInt64=ze.prototype.Gd,ze.prototype.Qd=function(e,t,n,r){if(null!=t)for(var o=0;o<t.length;o++)this.A(e,n(t[o]),r(t[o]))},ze.prototype.writeRepeatedSplitFixed64=ze.prototype.Qd,ze.prototype.Rd=function(e,t,n,r){if(null!=t)for(var o=0;o<t.length;o++)this.l(e,n(t[o]),r(t[o]))},ze.prototype.writeRepeatedSplitVarint64=ze.prototype.Rd,ze.prototype.Sd=function(e,t,n,r){if(null!=t)for(var o=0;o<t.length;o++)this.tb(e,n(t[o]),r(t[o]))},ze.prototype.writeRepeatedSplitZigzagVarint64=ze.prototype.Sd,ze.prototype.Hd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ka(e,t[n])},ze.prototype.writeRepeatedInt64String=ze.prototype.Hd,ze.prototype.Ud=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)Ke(this,e,t[n])},ze.prototype.writeRepeatedUint32=ze.prototype.Ud,ze.prototype.Vd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ub(e,t[n])},ze.prototype.writeRepeatedUint32String=ze.prototype.Vd,ze.prototype.Wd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ye(this,e,0),this.a.va(r))}},ze.prototype.writeRepeatedUint64=ze.prototype.Wd,ze.prototype.Xd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.vb(e,t[n])},ze.prototype.writeRepeatedUint64String=ze.prototype.Xd,ze.prototype.Md=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ye(this,e,0),this.a.wa(r))}},ze.prototype.writeRepeatedSint32=ze.prototype.Md,ze.prototype.Nd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ye(this,e,0),this.a.xa(r))}},ze.prototype.writeRepeatedSint64=ze.prototype.Nd,ze.prototype.Od=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ye(this,e,0),this.a.Ta(r))}},ze.prototype.writeRepeatedSint64String=ze.prototype.Od,ze.prototype.Pd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++){var r=t[n];null!=r&&(Ye(this,e,0),this.a.W(r))}},ze.prototype.writeRepeatedSintHash64=ze.prototype.Pd,ze.prototype.yd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Pa(e,t[n])},ze.prototype.writeRepeatedFixed32=ze.prototype.yd,ze.prototype.zd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Qa(e,t[n])},ze.prototype.writeRepeatedFixed64=ze.prototype.zd,ze.prototype.Ad=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.nb(e,t[n])},ze.prototype.writeRepeatedFixed64String=ze.prototype.Ad,ze.prototype.Jd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Ra(e,t[n])},ze.prototype.writeRepeatedSfixed32=ze.prototype.Jd,ze.prototype.Kd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.Sa(e,t[n])},ze.prototype.writeRepeatedSfixed64=ze.prototype.Kd,ze.prototype.Ld=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.qb(e,t[n])},ze.prototype.writeRepeatedSfixed64String=ze.prototype.Ld,ze.prototype.Cd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.L(e,t[n])},ze.prototype.writeRepeatedFloat=ze.prototype.Cd,ze.prototype.wd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.J(e,t[n])},ze.prototype.writeRepeatedDouble=ze.prototype.wd,ze.prototype.ud=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.I(e,t[n])},ze.prototype.writeRepeatedBool=ze.prototype.ud,ze.prototype.xd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.R(e,t[n])},ze.prototype.writeRepeatedEnum=ze.prototype.xd,ze.prototype.Td=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.U(e,t[n])},ze.prototype.writeRepeatedString=ze.prototype.Td,ze.prototype.vd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.ja(e,t[n])},ze.prototype.writeRepeatedBytes=ze.prototype.vd,ze.prototype.Id=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++){var o=qe(this,e);n(t[r],this),$e(this,o)}},ze.prototype.writeRepeatedMessage=ze.prototype.Id,ze.prototype.Dd=function(e,t,n){if(null!=t)for(var r=0;r<t.length;r++)Ye(this,e,3),n(t[r],this),Ye(this,e,4)},ze.prototype.writeRepeatedGroup=ze.prototype.Dd,ze.prototype.Bd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.K(e,t[n])},ze.prototype.writeRepeatedFixedHash64=ze.prototype.Bd,ze.prototype.Yd=function(e,t){if(null!=t)for(var n=0;n<t.length;n++)this.N(e,t[n])},ze.prototype.writeRepeatedVarintHash64=ze.prototype.Yd,ze.prototype.ad=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.M(t[n]);$e(this,e)}},ze.prototype.writePackedInt32=ze.prototype.ad,ze.prototype.bd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.M(parseInt(t[n],10));$e(this,e)}},ze.prototype.writePackedInt32String=ze.prototype.bd,ze.prototype.cd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.ua(t[n]);$e(this,e)}},ze.prototype.writePackedInt64=ze.prototype.cd,ze.prototype.md=function(e,t,n,r){if(null!=t){e=qe(this,e);for(var o=0;o<t.length;o++)this.a.A(n(t[o]),r(t[o]));$e(this,e)}},ze.prototype.writePackedSplitFixed64=ze.prototype.md,ze.prototype.nd=function(e,t,n,r){if(null!=t){e=qe(this,e);for(var o=0;o<t.length;o++)this.a.l(n(t[o]),r(t[o]));$e(this,e)}},ze.prototype.writePackedSplitVarint64=ze.prototype.nd,ze.prototype.od=function(e,t,n,r){if(null!=t){e=qe(this,e);for(var o=this.a,i=0;i<t.length;i++)q(n(t[i]),r(t[i]),(function(e,t){o.l(e>>>0,t>>>0)}));$e(this,e)}},ze.prototype.writePackedSplitZigzagVarint64=ze.prototype.od,ze.prototype.dd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++){var r=He(t[n]);this.a.l(r.lo,r.hi)}$e(this,e)}},ze.prototype.writePackedInt64String=ze.prototype.dd,ze.prototype.pd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.j(t[n]);$e(this,e)}},ze.prototype.writePackedUint32=ze.prototype.pd,ze.prototype.qd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.j(parseInt(t[n],10));$e(this,e)}},ze.prototype.writePackedUint32String=ze.prototype.qd,ze.prototype.rd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.va(t[n]);$e(this,e)}},ze.prototype.writePackedUint64=ze.prototype.rd,ze.prototype.sd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++){var r=We(t[n]);this.a.l(r.lo,r.hi)}$e(this,e)}},ze.prototype.writePackedUint64String=ze.prototype.sd,ze.prototype.hd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.wa(t[n]);$e(this,e)}},ze.prototype.writePackedSint32=ze.prototype.hd,ze.prototype.jd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.xa(t[n]);$e(this,e)}},ze.prototype.writePackedSint64=ze.prototype.jd,ze.prototype.kd=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.W(te(t[n]));$e(this,e)}},ze.prototype.writePackedSint64String=ze.prototype.kd,ze.prototype.ld=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.W(t[n]);$e(this,e)}},ze.prototype.writePackedSintHash64=ze.prototype.ld,ze.prototype.Wc=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(4*t.length),e=0;e<t.length;e++)this.a.s(t[e])},ze.prototype.writePackedFixed32=ze.prototype.Wc,ze.prototype.Xc=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.V(t[e])},ze.prototype.writePackedFixed64=ze.prototype.Xc,ze.prototype.Yc=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++){var n=We(t[e]);this.a.A(n.lo,n.hi)}},ze.prototype.writePackedFixed64String=ze.prototype.Yc,ze.prototype.ed=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(4*t.length),e=0;e<t.length;e++)this.a.S(t[e])},ze.prototype.writePackedSfixed32=ze.prototype.ed,ze.prototype.fd=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.T(t[e])},ze.prototype.writePackedSfixed64=ze.prototype.fd,ze.prototype.gd=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.ka(t[e])},ze.prototype.writePackedSfixed64String=ze.prototype.gd,ze.prototype.$c=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(4*t.length),e=0;e<t.length;e++)this.a.L(t[e])},ze.prototype.writePackedFloat=ze.prototype.$c,ze.prototype.Uc=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.J(t[e])},ze.prototype.writePackedDouble=ze.prototype.Uc,ze.prototype.Tc=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(t.length),e=0;e<t.length;e++)this.a.I(t[e])},ze.prototype.writePackedBool=ze.prototype.Tc,ze.prototype.Vc=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.R(t[n]);$e(this,e)}},ze.prototype.writePackedEnum=ze.prototype.Vc,ze.prototype.Zc=function(e,t){if(null!=t&&t.length)for(Ye(this,e,2),this.a.j(8*t.length),e=0;e<t.length;e++)this.a.K(t[e])},ze.prototype.writePackedFixedHash64=ze.prototype.Zc,ze.prototype.td=function(e,t){if(null!=t&&t.length){e=qe(this,e);for(var n=0;n<t.length;n++)this.a.N(t[n]);$e(this,e)}},ze.prototype.writePackedVarintHash64=ze.prototype.td,t.debug=Ue,t.Map=T,t.Message=ge,t.BinaryReader=ue,t.BinaryWriter=ze,t.ExtensionFieldInfo=fe,t.ExtensionFieldBinaryInfo=he,t.exportSymbol=function(e,t,n){d(e,t,n)},t.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},t.object={extend:function(e,t){for(var n,r,o=1;o<arguments.length;o++){for(n in r=arguments[o])e[n]=r[n];for(var i=0;i<h.length;i++)n=h[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}},t.typeOf=p},1458:(e,t,n)=>{var r=n(3157),o=r,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.google.protobuf.Empty",null,i),proto.google.protobuf.Empty=function(e){r.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.google.protobuf.Empty,r.Message),o.DEBUG&&!COMPILED&&(proto.google.protobuf.Empty.displayName="proto.google.protobuf.Empty"),r.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Empty.prototype.toObject=function(e){return proto.google.protobuf.Empty.toObject(e,this)},proto.google.protobuf.Empty.toObject=function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}),proto.google.protobuf.Empty.deserializeBinary=function(e){var t=new r.BinaryReader(e),n=new proto.google.protobuf.Empty;return proto.google.protobuf.Empty.deserializeBinaryFromReader(n,t)},proto.google.protobuf.Empty.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.google.protobuf.Empty.prototype.serializeBinary=function(){var e=new r.BinaryWriter;return proto.google.protobuf.Empty.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.Empty.serializeBinaryToWriter=function(e,t){},o.object.extend(t,proto.google.protobuf)},8767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{performance:()=>r});const r=("undefined"!=typeof globalThis?globalThis:n.g).performance},6893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RateLimiter=void 0;const r=n(3532),o=n(6929);t.RateLimiter=class{constructor(e){let{tokensPerInterval:t,interval:n,fireImmediately:i}=e;this.tokenBucket=new r.TokenBucket({bucketSize:t,tokensPerInterval:t,interval:n}),this.tokenBucket.content=t,this.curIntervalStart=o.getMilliseconds(),this.tokensThisInterval=0,this.fireImmediately=null!=i&&i}async removeTokens(e){if(e>this.tokenBucket.bucketSize)throw new Error(`Requested tokens ${e} exceeds maximum tokens per interval ${this.tokenBucket.bucketSize}`);const t=o.getMilliseconds();if((t<this.curIntervalStart||t-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=t,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)return-1;{const n=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-t);await o.wait(n);const r=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,r}}const n=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,n}tryRemoveTokens(e){if(e>this.tokenBucket.bucketSize)return!1;const t=o.getMilliseconds();if((t<this.curIntervalStart||t-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=t,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;const n=this.tokenBucket.tryRemoveTokens(e);return n&&(this.tokensThisInterval+=e),n}getTokensRemaining(){return this.tokenBucket.drip(),this.tokenBucket.content}}},3532:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenBucket=void 0;const r=n(6929);t.TokenBucket=class{constructor(e){let{bucketSize:t,tokensPerInterval:n,interval:o,parentBucket:i}=e;if(this.bucketSize=t,this.tokensPerInterval=n,"string"==typeof o)switch(o){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invalid interval "+o)}else this.interval=o;this.parentBucket=i,this.content=0,this.lastDrip=r.getMilliseconds()}async removeTokens(e){if(0===this.bucketSize)return Number.POSITIVE_INFINITY;if(e>this.bucketSize)throw new Error(`Requested tokens ${e} exceeds bucket size ${this.bucketSize}`);this.drip();const t=async()=>{const t=Math.ceil((e-this.content)*(this.interval/this.tokensPerInterval));return await r.wait(t),this.removeTokens(e)};if(e>this.content)return t();if(null!=this.parentBucket){const n=await this.parentBucket.removeTokens(e);return e>this.content?t():(this.content-=e,Math.min(n,this.content))}return this.content-=e,this.content}tryRemoveTokens(e){return!(this.bucketSize&&(e>this.bucketSize||(this.drip(),e>this.content||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)||(this.content-=e,0))))}drip(){if(0===this.tokensPerInterval){const e=this.content;return this.content=this.bucketSize,this.content>e}const e=r.getMilliseconds(),t=Math.max(e-this.lastDrip,0);this.lastDrip=e;const n=t*(this.tokensPerInterval/this.interval),o=this.content;return this.content=Math.min(this.content+n,this.bucketSize),Math.floor(this.content)>Math.floor(o)}}},6929:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wait=t.getMilliseconds=void 0;const r=n(8767);t.getMilliseconds=function(){const[e,t]=function(){const e=.001*r.performance.now();let t=Math.floor(e),n=Math.floor(e%1*1e9);return[t,n]}();return 1e3*e+Math.floor(t/1e6)},t.wait=function(e){return new Promise((t=>setTimeout(t,e)))}},5147:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6893),t),o(n(3532),t)},3121:function(e,t,n){var r;e=n.nmd(e),function(){var o,i="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=32,u=128,l=1/0,d=9007199254740991,p=NaN,f=4294967295,h=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",_="[object Error]",S="[object Function]",E="[object GeneratorFunction]",b="[object Map]",T="[object Number]",w="[object Object]",C="[object Promise]",R="[object RegExp]",O="[object Set]",I="[object String]",M="[object Symbol]",A="[object WeakMap]",k="[object ArrayBuffer]",P="[object DataView]",D="[object Float32Array]",N="[object Float64Array]",L="[object Int8Array]",x="[object Int16Array]",U="[object Int32Array]",F="[object Uint8Array]",B="[object Uint8ClampedArray]",j="[object Uint16Array]",W="[object Uint32Array]",G=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,$=RegExp(V.source),Y=RegExp(q.source),K=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,oe=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",we="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Re="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="["+Ee+"]",Me="["+Oe+"]",Ae="["+be+"]",ke="\\d+",Pe="["+Te+"]",De="["+we+"]",Ne="[^"+Ee+Oe+ke+Te+we+Ce+"]",Le="\\ud83c[\\udffb-\\udfff]",xe="[^"+Ee+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Fe="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+Ce+"]",je="\\u200d",We="(?:"+De+"|"+Ne+")",Ge="(?:"+Be+"|"+Ne+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ve="(?:"+Ae+"|"+Le+")?",qe="["+Re+"]?",$e=qe+Ve+"(?:"+je+"(?:"+[xe,Ue,Fe].join("|")+")"+qe+Ve+")*",Ye="(?:"+[Pe,Ue,Fe].join("|")+")"+$e,Ke="(?:"+[xe+Ae+"?",Ae,Ue,Fe,Ie].join("|")+")",Je=RegExp("['’]","g"),Xe=RegExp(Ae,"g"),Ze=RegExp(Le+"(?="+Le+")|"+Ke+$e,"g"),Qe=RegExp([Be+"?"+De+"+"+He+"(?="+[Me,Be,"$"].join("|")+")",Ge+"+"+ze+"(?="+[Me,Be+We,"$"].join("|")+")",Be+"?"+We+"+"+He,Be+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ke,Ye].join("|"),"g"),et=RegExp("["+je+Ee+be+Re+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,ot={};ot[D]=ot[N]=ot[L]=ot[x]=ot[U]=ot[F]=ot[B]=ot[j]=ot[W]=!0,ot[g]=ot[m]=ot[k]=ot[y]=ot[P]=ot[v]=ot[_]=ot[S]=ot[b]=ot[T]=ot[w]=ot[R]=ot[O]=ot[I]=ot[A]=!1;var it={};it[g]=it[m]=it[k]=it[P]=it[y]=it[v]=it[D]=it[N]=it[L]=it[x]=it[U]=it[b]=it[T]=it[w]=it[R]=it[O]=it[I]=it[M]=it[F]=it[B]=it[j]=it[W]=!0,it[_]=it[S]=it[A]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,ct=parseInt,ut="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,lt="object"==typeof self&&self&&self.Object===Object&&self,dt=ut||lt||Function("return this")(),pt=t&&!t.nodeType&&t,ft=pt&&e&&!e.nodeType&&e,ht=ft&&ft.exports===pt,gt=ht&&ut.process,mt=function(){try{return ft&&ft.require&&ft.require("util").types||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),yt=mt&&mt.isArrayBuffer,vt=mt&&mt.isDate,_t=mt&&mt.isMap,St=mt&&mt.isRegExp,Et=mt&&mt.isSet,bt=mt&&mt.isTypedArray;function Tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function wt(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var s=e[o];t(r,s,n(s),e)}return r}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function It(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}function Mt(e,t){return!(null==e||!e.length)&&Bt(e,t,0)>-1}function At(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function kt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function Pt(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function Dt(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Nt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var xt=Ht("length");function Ut(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function Ft(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Bt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Ft(e,Wt,n)}function jt(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function Wt(e){return e!=e}function Gt(e,t){var n=null==e?0:e.length;return n?qt(e,t)/n:p}function Ht(e){return function(t){return null==t?o:t[e]}}function zt(e){return function(t){return null==e?o:e[t]}}function Vt(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function qt(e,t){for(var n,r=-1,i=e.length;++r<i;){var s=t(e[r]);s!==o&&(n=n===o?s:n+s)}return n}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Yt(e){return e?e.slice(0,pn(e)+1).replace(re,""):e}function Kt(e){return function(t){return e(t)}}function Jt(e,t){return kt(t,(function(t){return e[t]}))}function Xt(e,t){return e.has(t)}function Zt(e,t){for(var n=-1,r=e.length;++n<r&&Bt(t,e[n],0)>-1;);return n}function Qt(e,t){for(var n=e.length;n--&&Bt(t,e[n],0)>-1;);return n}var en=zt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tn=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+st[e]}function rn(e){return et.test(e)}function on(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function sn(e,t){return function(n){return e(t(n))}}function an(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,i[o++]=n)}return i}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function ln(e){return rn(e)?function(e){for(var t=Ze.lastIndex=0;Ze.test(e);)++t;return t}(e):xt(e)}function dn(e){return rn(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var fn=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function e(t){var n,r=(t=null==t?dt:hn.defaults(dt.Object(),t,hn.pick(dt,nt))).Array,oe=t.Date,Ee=t.Error,be=t.Function,Te=t.Math,we=t.Object,Ce=t.RegExp,Re=t.String,Oe=t.TypeError,Ie=r.prototype,Me=be.prototype,Ae=we.prototype,ke=t["__core-js_shared__"],Pe=Me.toString,De=Ae.hasOwnProperty,Ne=0,Le=(n=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",xe=Ae.toString,Ue=Pe.call(we),Fe=dt._,Be=Ce("^"+Pe.call(De).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=ht?t.Buffer:o,We=t.Symbol,Ge=t.Uint8Array,He=je?je.allocUnsafe:o,ze=sn(we.getPrototypeOf,we),Ve=we.create,qe=Ae.propertyIsEnumerable,$e=Ie.splice,Ye=We?We.isConcatSpreadable:o,Ke=We?We.iterator:o,Ze=We?We.toStringTag:o,et=function(){try{var e=ui(we,"defineProperty");return e({},"",{}),e}catch(e){}}(),st=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ut=oe&&oe.now!==dt.Date.now&&oe.now,lt=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Te.ceil,ft=Te.floor,gt=we.getOwnPropertySymbols,mt=je?je.isBuffer:o,xt=t.isFinite,zt=Ie.join,gn=sn(we.keys,we),mn=Te.max,yn=Te.min,vn=oe.now,_n=t.parseInt,Sn=Te.random,En=Ie.reverse,bn=ui(t,"DataView"),Tn=ui(t,"Map"),wn=ui(t,"Promise"),Cn=ui(t,"Set"),Rn=ui(t,"WeakMap"),On=ui(we,"create"),In=Rn&&new Rn,Mn={},An=Ui(bn),kn=Ui(Tn),Pn=Ui(wn),Dn=Ui(Cn),Nn=Ui(Rn),Ln=We?We.prototype:o,xn=Ln?Ln.valueOf:o,Un=Ln?Ln.toString:o;function Fn(e){if(ea(e)&&!Hs(e)&&!(e instanceof Gn)){if(e instanceof Wn)return e;if(De.call(e,"__wrapped__"))return Fi(e)}return new Wn(e)}var Bn=function(){function e(){}return function(t){if(!Qs(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function jn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Vn;++t<n;)this.add(e[t])}function $n(e){var t=this.__data__=new zn(e);this.size=t.size}function Yn(e,t){var n=Hs(e),r=!n&&Gs(e),o=!n&&!r&&$s(e),i=!n&&!r&&!o&&ca(e),s=n||r||o||i,a=s?$t(e.length,Re):[],c=a.length;for(var u in e)!t&&!De.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mi(u,c))||a.push(u);return a}function Kn(e){var t=e.length;return t?e[Vr(0,t-1)]:o}function Jn(e,t){return Pi(Oo(e),ir(t,0,e.length))}function Xn(e){return Pi(Oo(e))}function Zn(e,t,n){(n!==o&&!Bs(e[t],n)||n===o&&!(t in e))&&rr(e,t,n)}function Qn(e,t,n){var r=e[t];De.call(e,t)&&Bs(r,n)&&(n!==o||t in e)||rr(e,t,n)}function er(e,t){for(var n=e.length;n--;)if(Bs(e[n][0],t))return n;return-1}function tr(e,t,n,r){return lr(e,(function(e,o,i){t(r,e,n(e),i)})),r}function nr(e,t){return e&&Io(t,Aa(t),e)}function rr(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var n=-1,i=t.length,s=r(i),a=null==e;++n<i;)s[n]=a?o:Ca(e,t[n]);return s}function ir(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function sr(e,t,n,r,i,s){var a,c=1&t,u=2&t,l=4&t;if(n&&(a=i?n(e,r,i,s):n(e)),a!==o)return a;if(!Qs(e))return e;var d=Hs(e);if(d){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return Oo(e,a)}else{var p=pi(e),f=p==S||p==E;if($s(e))return Eo(e,c);if(p==w||p==g||f&&!i){if(a=u||f?{}:hi(e),!c)return u?function(e,t){return Io(e,di(e),t)}(e,function(e,t){return e&&Io(t,ka(t),e)}(a,e)):function(e,t){return Io(e,li(e),t)}(e,nr(a,e))}else{if(!it[p])return i?e:{};a=function(e,t,n){var r,o=e.constructor;switch(t){case k:return bo(e);case y:case v:return new o(+e);case P:return function(e,t){var n=t?bo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case D:case N:case L:case x:case U:case F:case B:case j:case W:return To(e,n);case b:return new o;case T:case I:return new o(e);case R:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new o;case M:return r=e,xn?we(xn.call(r)):{}}}(e,p,c)}}s||(s=new $n);var h=s.get(e);if(h)return h;s.set(e,a),ia(e)?e.forEach((function(r){a.add(sr(r,t,n,r,e,s))})):ta(e)&&e.forEach((function(r,o){a.set(o,sr(r,t,n,o,e,s))}));var m=d?o:(l?u?ni:ti:u?ka:Aa)(e);return Ct(m||e,(function(r,o){m&&(r=e[o=r]),Qn(a,o,sr(r,t,n,o,e,s))})),a}function ar(e,t,n){var r=n.length;if(null==e)return!r;for(e=we(e);r--;){var i=n[r],s=t[i],a=e[i];if(a===o&&!(i in e)||!s(a))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Oe(i);return Ii((function(){e.apply(o,n)}),t)}function ur(e,t,n,r){var o=-1,i=Mt,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;n&&(t=kt(t,Kt(n))),r?(i=At,s=!1):t.length>=200&&(i=Xt,s=!1,t=new qn(t));e:for(;++o<a;){var l=e[o],d=null==n?l:n(l);if(l=r||0!==l?l:0,s&&d==d){for(var p=u;p--;)if(t[p]===d)continue e;c.push(l)}else i(t,d,r)||c.push(l)}return c}Fn.templateSettings={escape:K,evaluate:J,interpolate:X,variable:"",imports:{_:Fn}},Fn.prototype=jn.prototype,Fn.prototype.constructor=Fn,Wn.prototype=Bn(jn.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Bn(jn.prototype),Gn.prototype.constructor=Gn,Hn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(On){var n=t[e];return n===s?o:n}return De.call(t,e)?t[e]:o},Hn.prototype.has=function(e){var t=this.__data__;return On?t[e]!==o:De.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=On&&t===o?s:t,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(e){var t=this.__data__,n=er(t,e);return!(n<0||(n==t.length-1?t.pop():$e.call(t,n,1),--this.size,0))},zn.prototype.get=function(e){var t=this.__data__,n=er(t,e);return n<0?o:t[n][1]},zn.prototype.has=function(e){return er(this.__data__,e)>-1},zn.prototype.set=function(e,t){var n=this.__data__,r=er(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Tn||zn),string:new Hn}},Vn.prototype.delete=function(e){var t=ai(this,e).delete(e);return this.size-=t?1:0,t},Vn.prototype.get=function(e){return ai(this,e).get(e)},Vn.prototype.has=function(e){return ai(this,e).has(e)},Vn.prototype.set=function(e,t){var n=ai(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(e){return this.__data__.set(e,s),this},qn.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.clear=function(){this.__data__=new zn,this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},$n.prototype.get=function(e){return this.__data__.get(e)},$n.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.set=function(e,t){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vn(r)}return n.set(e,t),this.size=n.size,this};var lr=ko(vr),dr=ko(_r,!0);function pr(e,t){var n=!0;return lr(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function fr(e,t,n){for(var r=-1,i=e.length;++r<i;){var s=e[r],a=t(s);if(null!=a&&(c===o?a==a&&!aa(a):n(a,c)))var c=a,u=s}return u}function hr(e,t){var n=[];return lr(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function gr(e,t,n,r,o){var i=-1,s=e.length;for(n||(n=gi),o||(o=[]);++i<s;){var a=e[i];t>0&&n(a)?t>1?gr(a,t-1,n,r,o):Pt(o,a):r||(o[o.length]=a)}return o}var mr=Po(),yr=Po(!0);function vr(e,t){return e&&mr(e,t,Aa)}function _r(e,t){return e&&yr(e,t,Aa)}function Sr(e,t){return It(t,(function(t){return Js(e[t])}))}function Er(e,t){for(var n=0,r=(t=yo(t,e)).length;null!=e&&n<r;)e=e[xi(t[n++])];return n&&n==r?e:o}function br(e,t,n){var r=t(e);return Hs(e)?r:Pt(r,n(e))}function Tr(e){return null==e?e===o?"[object Undefined]":"[object Null]":Ze&&Ze in we(e)?function(e){var t=De.call(e,Ze),n=e[Ze];try{e[Ze]=o;var r=!0}catch(e){}var i=xe.call(e);return r&&(t?e[Ze]=n:delete e[Ze]),i}(e):function(e){return xe.call(e)}(e)}function wr(e,t){return e>t}function Cr(e,t){return null!=e&&De.call(e,t)}function Rr(e,t){return null!=e&&t in we(e)}function Or(e,t,n){for(var i=n?At:Mt,s=e[0].length,a=e.length,c=a,u=r(a),l=1/0,d=[];c--;){var p=e[c];c&&t&&(p=kt(p,Kt(t))),l=yn(p.length,l),u[c]=!n&&(t||s>=120&&p.length>=120)?new qn(c&&p):o}p=e[0];var f=-1,h=u[0];e:for(;++f<s&&d.length<l;){var g=p[f],m=t?t(g):g;if(g=n||0!==g?g:0,!(h?Xt(h,m):i(d,m,n))){for(c=a;--c;){var y=u[c];if(!(y?Xt(y,m):i(e[c],m,n)))continue e}h&&h.push(m),d.push(g)}}return d}function Ir(e,t,n){var r=null==(e=Ci(e,t=yo(t,e)))?e:e[xi(Ki(t))];return null==r?o:Tt(r,e,n)}function Mr(e){return ea(e)&&Tr(e)==g}function Ar(e,t,n,r,i){return e===t||(null==e||null==t||!ea(e)&&!ea(t)?e!=e&&t!=t:function(e,t,n,r,i,s){var a=Hs(e),c=Hs(t),u=a?m:pi(e),l=c?m:pi(t),d=(u=u==g?w:u)==w,p=(l=l==g?w:l)==w,f=u==l;if(f&&$s(e)){if(!$s(t))return!1;a=!0,d=!1}if(f&&!d)return s||(s=new $n),a||ca(e)?Qo(e,t,n,r,i,s):function(e,t,n,r,o,i,s){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!i(new Ge(e),new Ge(t)));case y:case v:case T:return Bs(+e,+t);case _:return e.name==t.name&&e.message==t.message;case R:case I:return e==t+"";case b:var a=on;case O:var c=1&r;if(a||(a=cn),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var l=Qo(a(e),a(t),r,o,i,s);return s.delete(e),l;case M:if(xn)return xn.call(e)==xn.call(t)}return!1}(e,t,u,n,r,i,s);if(!(1&n)){var h=d&&De.call(e,"__wrapped__"),S=p&&De.call(t,"__wrapped__");if(h||S){var E=h?e.value():e,C=S?t.value():t;return s||(s=new $n),i(E,C,n,r,s)}}return!!f&&(s||(s=new $n),function(e,t,n,r,i,s){var a=1&n,c=ti(e),u=c.length;if(u!=ti(t).length&&!a)return!1;for(var l=u;l--;){var d=c[l];if(!(a?d in t:De.call(t,d)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var h=!0;s.set(e,t),s.set(t,e);for(var g=a;++l<u;){var m=e[d=c[l]],y=t[d];if(r)var v=a?r(y,m,d,t,e,s):r(m,y,d,e,t,s);if(!(v===o?m===y||i(m,y,n,r,s):v)){h=!1;break}g||(g="constructor"==d)}if(h&&!g){var _=e.constructor,S=t.constructor;_==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof S&&S instanceof S||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,n,r,i,s))}(e,t,n,r,Ar,i))}function kr(e,t,n,r){var i=n.length,s=i,a=!r;if(null==e)return!s;for(e=we(e);i--;){var c=n[i];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){var u=(c=n[i])[0],l=e[u],d=c[1];if(a&&c[2]){if(l===o&&!(u in e))return!1}else{var p=new $n;if(r)var f=r(l,d,u,e,t,p);if(!(f===o?Ar(d,l,3,r,p):f))return!1}}return!0}function Pr(e){return!(!Qs(e)||(t=e,Le&&Le in t))&&(Js(e)?Be:ge).test(Ui(e));var t}function Dr(e){return"function"==typeof e?e:null==e?nc:"object"==typeof e?Hs(e)?Fr(e[0],e[1]):Ur(e):dc(e)}function Nr(e){if(!Ei(e))return gn(e);var t=[];for(var n in we(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Lr(e,t){return e<t}function xr(e,t){var n=-1,o=Vs(e)?r(e.length):[];return lr(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}function Ur(e){var t=ci(e);return 1==t.length&&t[0][2]?Ti(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Fr(e,t){return vi(e)&&bi(t)?Ti(xi(e),t):function(n){var r=Ca(n,e);return r===o&&r===t?Ra(n,e):Ar(t,r,3)}}function Br(e,t,n,r,i){e!==t&&mr(t,(function(s,a){if(i||(i=new $n),Qs(s))!function(e,t,n,r,i,s,a){var c=Ri(e,n),u=Ri(t,n),l=a.get(u);if(l)Zn(e,n,l);else{var d=s?s(c,u,n+"",e,t,a):o,p=d===o;if(p){var f=Hs(u),h=!f&&$s(u),g=!f&&!h&&ca(u);d=u,f||h||g?Hs(c)?d=c:qs(c)?d=Oo(c):h?(p=!1,d=Eo(u,!0)):g?(p=!1,d=To(u,!0)):d=[]:ra(u)||Gs(u)?(d=c,Gs(c)?d=ma(c):Qs(c)&&!Js(c)||(d=hi(u))):p=!1}p&&(a.set(u,d),i(d,u,r,s,a),a.delete(u)),Zn(e,n,d)}}(e,t,a,n,Br,r,i);else{var c=r?r(Ri(e,a),s,a+"",e,t,i):o;c===o&&(c=s),Zn(e,a,c)}}),ka)}function jr(e,t){var n=e.length;if(n)return mi(t+=t<0?n:0,n)?e[t]:o}function Wr(e,t,n){t=t.length?kt(t,(function(e){return Hs(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[nc];var r=-1;t=kt(t,Kt(si()));var o=xr(e,(function(e,n,o){var i=kt(t,(function(t){return t(e)}));return{criteria:i,index:++r,value:e}}));return function(e){var t=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,s=o.length,a=n.length;++r<s;){var c=wo(o[r],i[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));t--;)e[t]=e[t].value;return e}(o)}function Gr(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var s=t[r],a=Er(e,s);n(a,s)&&Jr(i,yo(s,e),a)}return i}function Hr(e,t,n,r){var o=r?jt:Bt,i=-1,s=t.length,a=e;for(e===t&&(t=Oo(t)),n&&(a=kt(e,Kt(n)));++i<s;)for(var c=0,u=t[i],l=n?n(u):u;(c=o(a,l,c,r))>-1;)a!==e&&$e.call(a,c,1),$e.call(e,c,1);return e}function zr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;mi(o)?$e.call(e,o,1):co(e,o)}}return e}function Vr(e,t){return e+ft(Sn()*(t-e+1))}function qr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function $r(e,t){return Mi(wi(e,t,nc),e+"")}function Yr(e){return Kn(Ba(e))}function Kr(e,t){var n=Ba(e);return Pi(n,ir(t,0,n.length))}function Jr(e,t,n,r){if(!Qs(e))return e;for(var i=-1,s=(t=yo(t,e)).length,a=s-1,c=e;null!=c&&++i<s;){var u=xi(t[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var d=c[u];(l=r?r(d,u,c):o)===o&&(l=Qs(d)?d:mi(t[i+1])?[]:{})}Qn(c,u,l),c=c[u]}return e}var Xr=In?function(e,t){return In.set(e,t),e}:nc,Zr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Qa(t),writable:!0})}:nc;function Qr(e){return Pi(Ba(e))}function eo(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=r(i);++o<i;)s[o]=e[o+t];return s}function to(e,t){var n;return lr(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function no(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,s=e[i];null!==s&&!aa(s)&&(n?s<=t:s<t)?r=i+1:o=i}return o}return ro(e,t,nc,n)}function ro(e,t,n,r){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,c=null===t,u=aa(t),l=t===o;i<s;){var d=ft((i+s)/2),p=n(e[d]),f=p!==o,h=null===p,g=p==p,m=aa(p);if(a)var y=r||g;else y=l?g&&(r||f):c?g&&f&&(r||!h):u?g&&f&&!h&&(r||!m):!h&&!m&&(r?p<=t:p<t);y?i=d+1:s=d}return yn(s,4294967294)}function oo(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!Bs(a,c)){var c=a;i[o++]=0===s?0:s}}return i}function io(e){return"number"==typeof e?e:aa(e)?p:+e}function so(e){if("string"==typeof e)return e;if(Hs(e))return kt(e,so)+"";if(aa(e))return Un?Un.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ao(e,t,n){var r=-1,o=Mt,i=e.length,s=!0,a=[],c=a;if(n)s=!1,o=At;else if(i>=200){var u=t?null:$o(e);if(u)return cn(u);s=!1,o=Xt,c=new qn}else c=t?[]:a;e:for(;++r<i;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,s&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),a.push(l)}else o(c,d,n)||(c!==a&&c.push(d),a.push(l))}return a}function co(e,t){return null==(e=Ci(e,t=yo(t,e)))||delete e[xi(Ki(t))]}function uo(e,t,n,r){return Jr(e,t,n(Er(e,t)),r)}function lo(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?eo(e,r?0:i,r?i+1:o):eo(e,r?i+1:0,r?o:i)}function po(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))}),n)}function fo(e,t,n){var o=e.length;if(o<2)return o?ao(e[0]):[];for(var i=-1,s=r(o);++i<o;)for(var a=e[i],c=-1;++c<o;)c!=i&&(s[i]=ur(s[i]||a,e[c],t,n));return ao(gr(s,1),t,n)}function ho(e,t,n){for(var r=-1,i=e.length,s=t.length,a={};++r<i;){var c=r<s?t[r]:o;n(a,e[r],c)}return a}function go(e){return qs(e)?e:[]}function mo(e){return"function"==typeof e?e:nc}function yo(e,t){return Hs(e)?e:vi(e,t)?[e]:Li(ya(e))}var vo=$r;function _o(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:eo(e,t,n)}var So=st||function(e){return dt.clearTimeout(e)};function Eo(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function bo(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function To(e,t){var n=t?bo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function wo(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,s=aa(e),a=t!==o,c=null===t,u=t==t,l=aa(t);if(!c&&!l&&!s&&e>t||s&&a&&u&&!c&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!s&&!l&&e<t||l&&n&&i&&!r&&!s||c&&n&&i||!a&&i||!u)return-1}return 0}function Co(e,t,n,o){for(var i=-1,s=e.length,a=n.length,c=-1,u=t.length,l=mn(s-a,0),d=r(u+l),p=!o;++c<u;)d[c]=t[c];for(;++i<a;)(p||i<s)&&(d[n[i]]=e[i]);for(;l--;)d[c++]=e[i++];return d}function Ro(e,t,n,o){for(var i=-1,s=e.length,a=-1,c=n.length,u=-1,l=t.length,d=mn(s-c,0),p=r(d+l),f=!o;++i<d;)p[i]=e[i];for(var h=i;++u<l;)p[h+u]=t[u];for(;++a<c;)(f||i<s)&&(p[h+n[a]]=e[i++]);return p}function Oo(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function Io(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],u=r?r(n[c],e[c],c,n,e):o;u===o&&(u=e[c]),i?rr(n,c,u):Qn(n,c,u)}return n}function Mo(e,t){return function(n,r){var o=Hs(n)?wt:tr,i=t?t():{};return o(n,e,si(r,2),i)}}function Ao(e){return $r((function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:o,a=i>2?n[2]:o;for(s=e.length>3&&"function"==typeof s?(i--,s):o,a&&yi(n[0],n[1],a)&&(s=i<3?o:s,i=1),t=we(t);++r<i;){var c=n[r];c&&e(t,c,r,s)}return t}))}function ko(e,t){return function(n,r){if(null==n)return n;if(!Vs(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=we(n);(t?i--:++i<o)&&!1!==r(s[i],i,s););return n}}function Po(e){return function(t,n,r){for(var o=-1,i=we(t),s=r(t),a=s.length;a--;){var c=s[e?a:++o];if(!1===n(i[c],c,i))break}return t}}function Do(e){return function(t){var n=rn(t=ya(t))?dn(t):o,r=n?n[0]:t.charAt(0),i=n?_o(n,1).join(""):t.slice(1);return r[e]()+i}}function No(e){return function(t){return Dt(Ja(Ga(t).replace(Je,"")),e,"")}}function Lo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return Qs(r)?r:n}}function xo(e){return function(t,n,r){var i=we(t);if(!Vs(t)){var s=si(n,3);t=Aa(t),n=function(e){return s(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[s?t[a]:a]:o}}function Uo(e){return ei((function(t){var n=t.length,r=n,s=Wn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Oe(i);if(s&&!c&&"wrapper"==oi(a))var c=new Wn([],!0)}for(r=c?r:n;++r<n;){var u=oi(a=t[r]),l="wrapper"==u?ri(a):o;c=l&&_i(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[oi(l[0])].apply(c,l[3]):1==a.length&&_i(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Hs(r))return c.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function Fo(e,t,n,i,s,a,c,l,d,p){var f=t&u,h=1&t,g=2&t,m=24&t,y=512&t,v=g?o:Lo(e);return function u(){for(var _=arguments.length,S=r(_),E=_;E--;)S[E]=arguments[E];if(m)var b=ii(u),T=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(S,b);if(i&&(S=Co(S,i,s,m)),a&&(S=Ro(S,a,c,m)),_-=T,m&&_<p){var w=an(S,b);return Vo(e,t,Fo,u.placeholder,n,S,w,l,d,p-_)}var C=h?n:this,R=g?C[e]:e;return _=S.length,l?S=function(e,t){for(var n=e.length,r=yn(t.length,n),i=Oo(e);r--;){var s=t[r];e[r]=mi(s,n)?i[s]:o}return e}(S,l):y&&_>1&&S.reverse(),f&&d<_&&(S.length=d),this&&this!==dt&&this instanceof u&&(R=v||Lo(R)),R.apply(C,S)}}function Bo(e,t){return function(n,r){return function(e,t,n,r){return vr(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function jo(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=so(n),r=so(r)):(n=io(n),r=io(r)),i=e(n,r)}return i}}function Wo(e){return ei((function(t){return t=kt(t,Kt(si())),$r((function(n){var r=this;return e(t,(function(e){return Tt(e,r,n)}))}))}))}function Go(e,t){var n=(t=t===o?" ":so(t)).length;if(n<2)return n?qr(t,e):t;var r=qr(t,pt(e/ln(t)));return rn(t)?_o(dn(r),0,e).join(""):r.slice(0,e)}function Ho(e){return function(t,n,i){return i&&"number"!=typeof i&&yi(t,n,i)&&(n=i=o),t=pa(t),n===o?(n=t,t=0):n=pa(n),function(e,t,n,o){for(var i=-1,s=mn(pt((t-e)/(n||1)),0),a=r(s);s--;)a[o?s:++i]=e,e+=n;return a}(t,n,i=i===o?t<n?1:-1:pa(i),e)}}function zo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ga(t),n=ga(n)),e(t,n)}}function Vo(e,t,n,r,i,s,a,u,l,d){var p=8&t;t|=p?c:64,4&(t&=~(p?64:c))||(t&=-4);var f=[e,t,i,p?s:o,p?a:o,p?o:s,p?o:a,u,l,d],h=n.apply(o,f);return _i(e)&&Oi(h,f),h.placeholder=r,Ai(h,e,t)}function qo(e){var t=Te[e];return function(e,n){if(e=ga(e),(n=null==n?0:yn(fa(n),292))&&xt(e)){var r=(ya(e)+"e").split("e");return+((r=(ya(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var $o=Cn&&1/cn(new Cn([,-0]))[1]==l?function(e){return new Cn(e)}:ac;function Yo(e){return function(t){var n=pi(t);return n==b?on(t):n==O?un(t):function(e,t){return kt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ko(e,t,n,s,l,d,p,f){var h=2&t;if(!h&&"function"!=typeof e)throw new Oe(i);var g=s?s.length:0;if(g||(t&=-97,s=l=o),p=p===o?p:mn(fa(p),0),f=f===o?f:fa(f),g-=l?l.length:0,64&t){var m=s,y=l;s=l=o}var v=h?o:ri(e),_=[e,t,n,s,l,m,y,d,p,f];if(v&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,s=r==u&&8==n||r==u&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!s)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Co(l,c,t[4]):c,e[4]=l?an(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Ro(l,c,t[6]):c,e[6]=l?an(e[5],a):t[6]),(c=t[7])&&(e[7]=c),r&u&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(_,v),e=_[0],t=_[1],n=_[2],s=_[3],l=_[4],!(f=_[9]=_[9]===o?h?0:e.length:mn(_[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||16==t?function(e,t,n){var i=Lo(e);return function s(){for(var a=arguments.length,c=r(a),u=a,l=ii(s);u--;)c[u]=arguments[u];var d=a<3&&c[0]!==l&&c[a-1]!==l?[]:an(c,l);return(a-=d.length)<n?Vo(e,t,Fo,s.placeholder,o,c,d,o,o,n-a):Tt(this&&this!==dt&&this instanceof s?i:e,this,c)}}(e,t,f):t!=c&&33!=t||l.length?Fo.apply(o,_):function(e,t,n,o){var i=1&t,s=Lo(e);return function t(){for(var a=-1,c=arguments.length,u=-1,l=o.length,d=r(l+c),p=this&&this!==dt&&this instanceof t?s:e;++u<l;)d[u]=o[u];for(;c--;)d[u++]=arguments[++a];return Tt(p,i?n:this,d)}}(e,t,n,s);else var S=function(e,t,n){var r=1&t,o=Lo(e);return function t(){return(this&&this!==dt&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return Ai((v?Xr:Oi)(S,_),e,t)}function Jo(e,t,n,r){return e===o||Bs(e,Ae[n])&&!De.call(r,n)?t:e}function Xo(e,t,n,r,i,s){return Qs(e)&&Qs(t)&&(s.set(t,e),Br(e,t,o,Xo,s),s.delete(t)),e}function Zo(e){return ra(e)?o:e}function Qo(e,t,n,r,i,s){var a=1&n,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(e),d=s.get(t);if(l&&d)return l==t&&d==e;var p=-1,f=!0,h=2&n?new qn:o;for(s.set(e,t),s.set(t,e);++p<c;){var g=e[p],m=t[p];if(r)var y=a?r(m,g,p,t,e,s):r(g,m,p,e,t,s);if(y!==o){if(y)continue;f=!1;break}if(h){if(!Lt(t,(function(e,t){if(!Xt(h,t)&&(g===e||i(g,e,n,r,s)))return h.push(t)}))){f=!1;break}}else if(g!==m&&!i(g,m,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ei(e){return Mi(wi(e,o,zi),e+"")}function ti(e){return br(e,Aa,li)}function ni(e){return br(e,ka,di)}var ri=In?function(e){return In.get(e)}:ac;function oi(e){for(var t=e.name+"",n=Mn[t],r=De.call(Mn,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function ii(e){return(De.call(Fn,"placeholder")?Fn:e).placeholder}function si(){var e=Fn.iteratee||rc;return e=e===rc?Dr:e,arguments.length?e(arguments[0],arguments[1]):e}function ai(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ci(e){for(var t=Aa(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,bi(o)]}return t}function ui(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Pr(n)?n:o}var li=gt?function(e){return null==e?[]:(e=we(e),It(gt(e),(function(t){return qe.call(e,t)})))}:hc,di=gt?function(e){for(var t=[];e;)Pt(t,li(e)),e=ze(e);return t}:hc,pi=Tr;function fi(e,t,n){for(var r=-1,o=(t=yo(t,e)).length,i=!1;++r<o;){var s=xi(t[r]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Zs(o)&&mi(s,o)&&(Hs(e)||Gs(e))}function hi(e){return"function"!=typeof e.constructor||Ei(e)?{}:Bn(ze(e))}function gi(e){return Hs(e)||Gs(e)||!!(Ye&&e&&e[Ye])}function mi(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function yi(e,t,n){if(!Qs(n))return!1;var r=typeof t;return!!("number"==r?Vs(n)&&mi(t,n.length):"string"==r&&t in n)&&Bs(n[t],e)}function vi(e,t){if(Hs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!aa(e))||Q.test(e)||!Z.test(e)||null!=t&&e in we(t)}function _i(e){var t=oi(e),n=Fn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=ri(n);return!!r&&e===r[0]}(bn&&pi(new bn(new ArrayBuffer(1)))!=P||Tn&&pi(new Tn)!=b||wn&&pi(wn.resolve())!=C||Cn&&pi(new Cn)!=O||Rn&&pi(new Rn)!=A)&&(pi=function(e){var t=Tr(e),n=t==w?e.constructor:o,r=n?Ui(n):"";if(r)switch(r){case An:return P;case kn:return b;case Pn:return C;case Dn:return O;case Nn:return A}return t});var Si=ke?Js:gc;function Ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function bi(e){return e==e&&!Qs(e)}function Ti(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in we(n))}}function wi(e,t,n){return t=mn(t===o?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=mn(o.length-t,0),a=r(s);++i<s;)a[i]=o[t+i];i=-1;for(var c=r(t+1);++i<t;)c[i]=o[i];return c[t]=n(a),Tt(e,this,c)}}function Ci(e,t){return t.length<2?e:Er(e,eo(t,0,-1))}function Ri(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oi=ki(Xr),Ii=lt||function(e,t){return dt.setTimeout(e,t)},Mi=ki(Zr);function Ai(e,t,n){var r=t+"";return Mi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ct(h,(function(n){var r="_."+n[0];t&n[1]&&!Mt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(ae):[]}(r),n)))}function ki(e){var t=0,n=0;return function(){var r=vn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Pi(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var s=Vr(n,i),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Di,Ni,Li=(Di=Ds((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,r,o){t.push(r?o.replace(le,"$1"):n||e)})),t}),(function(e){return 500===Ni.size&&Ni.clear(),e})),Ni=Di.cache,Di);function xi(e){if("string"==typeof e||aa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ui(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fi(e){if(e instanceof Gn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Oo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bi=$r((function(e,t){return qs(e)?ur(e,gr(t,1,qs,!0)):[]})),ji=$r((function(e,t){var n=Ki(t);return qs(n)&&(n=o),qs(e)?ur(e,gr(t,1,qs,!0),si(n,2)):[]})),Wi=$r((function(e,t){var n=Ki(t);return qs(n)&&(n=o),qs(e)?ur(e,gr(t,1,qs,!0),o,n):[]}));function Gi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:fa(n);return o<0&&(o=mn(r+o,0)),Ft(e,si(t,3),o)}function Hi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=fa(n),i=n<0?mn(r+i,0):yn(i,r-1)),Ft(e,si(t,3),i,!0)}function zi(e){return null!=e&&e.length?gr(e,1):[]}function Vi(e){return e&&e.length?e[0]:o}var qi=$r((function(e){var t=kt(e,go);return t.length&&t[0]===e[0]?Or(t):[]})),$i=$r((function(e){var t=Ki(e),n=kt(e,go);return t===Ki(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Or(n,si(t,2)):[]})),Yi=$r((function(e){var t=Ki(e),n=kt(e,go);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Or(n,o,t):[]}));function Ki(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Ji=$r(Xi);function Xi(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var Zi=ei((function(e,t){var n=null==e?0:e.length,r=or(e,t);return zr(e,kt(t,(function(e){return mi(e,n)?+e:e})).sort(wo)),r}));function Qi(e){return null==e?e:En.call(e)}var es=$r((function(e){return ao(gr(e,1,qs,!0))})),ts=$r((function(e){var t=Ki(e);return qs(t)&&(t=o),ao(gr(e,1,qs,!0),si(t,2))})),ns=$r((function(e){var t=Ki(e);return t="function"==typeof t?t:o,ao(gr(e,1,qs,!0),o,t)}));function rs(e){if(!e||!e.length)return[];var t=0;return e=It(e,(function(e){if(qs(e))return t=mn(e.length,t),!0})),$t(t,(function(t){return kt(e,Ht(t))}))}function os(e,t){if(!e||!e.length)return[];var n=rs(e);return null==t?n:kt(n,(function(e){return Tt(t,o,e)}))}var is=$r((function(e,t){return qs(e)?ur(e,t):[]})),ss=$r((function(e){return fo(It(e,qs))})),as=$r((function(e){var t=Ki(e);return qs(t)&&(t=o),fo(It(e,qs),si(t,2))})),cs=$r((function(e){var t=Ki(e);return t="function"==typeof t?t:o,fo(It(e,qs),o,t)})),us=$r(rs),ls=$r((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,os(e,n)}));function ds(e){var t=Fn(e);return t.__chain__=!0,t}function ps(e,t){return t(e)}var fs=ei((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&mi(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ps,args:[i],thisArg:o}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)})),hs=Mo((function(e,t,n){De.call(e,n)?++e[n]:rr(e,n,1)})),gs=xo(Gi),ms=xo(Hi);function ys(e,t){return(Hs(e)?Ct:lr)(e,si(t,3))}function vs(e,t){return(Hs(e)?Rt:dr)(e,si(t,3))}var _s=Mo((function(e,t,n){De.call(e,n)?e[n].push(t):rr(e,n,[t])})),Ss=$r((function(e,t,n){var o=-1,i="function"==typeof t,s=Vs(e)?r(e.length):[];return lr(e,(function(e){s[++o]=i?Tt(t,e,n):Ir(e,t,n)})),s})),Es=Mo((function(e,t,n){rr(e,n,t)}));function bs(e,t){return(Hs(e)?kt:xr)(e,si(t,3))}var Ts=Mo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ws=$r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&yi(e,t[0],t[1])?t=[]:n>2&&yi(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,gr(t,1),[])})),Cs=ut||function(){return dt.Date.now()};function Rs(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,Ko(e,u,o,o,o,o,t)}function Os(e,t){var n;if("function"!=typeof t)throw new Oe(i);return e=fa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Is=$r((function(e,t,n){var r=1;if(n.length){var o=an(n,ii(Is));r|=c}return Ko(e,r,t,n,o)})),Ms=$r((function(e,t,n){var r=3;if(n.length){var o=an(n,ii(Ms));r|=c}return Ko(t,r,e,n,o)}));function As(e,t,n){var r,s,a,c,u,l,d=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new Oe(i);function g(t){var n=r,i=s;return r=s=o,d=t,c=e.apply(i,n)}function m(e){var n=e-l;return l===o||n>=t||n<0||f&&e-d>=a}function y(){var e=Cs();if(m(e))return v(e);u=Ii(y,function(e){var n=t-(e-l);return f?yn(n,a-(e-d)):n}(e))}function v(e){return u=o,h&&r?g(e):(r=s=o,c)}function _(){var e=Cs(),n=m(e);if(r=arguments,s=this,l=e,n){if(u===o)return function(e){return d=e,u=Ii(y,t),p?g(e):c}(l);if(f)return So(u),u=Ii(y,t),g(l)}return u===o&&(u=Ii(y,t)),c}return t=ga(t)||0,Qs(n)&&(p=!!n.leading,a=(f="maxWait"in n)?mn(ga(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),_.cancel=function(){u!==o&&So(u),d=0,r=l=s=u=o},_.flush=function(){return u===o?c:v(Cs())},_}var ks=$r((function(e,t){return cr(e,1,t)})),Ps=$r((function(e,t,n){return cr(e,ga(t)||0,n)}));function Ds(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(Ds.Cache||Vn),n}function Ns(e){if("function"!=typeof e)throw new Oe(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ds.Cache=Vn;var Ls=vo((function(e,t){var n=(t=1==t.length&&Hs(t[0])?kt(t[0],Kt(si())):kt(gr(t,1),Kt(si()))).length;return $r((function(r){for(var o=-1,i=yn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return Tt(e,this,r)}))})),xs=$r((function(e,t){var n=an(t,ii(xs));return Ko(e,c,o,t,n)})),Us=$r((function(e,t){var n=an(t,ii(Us));return Ko(e,64,o,t,n)})),Fs=ei((function(e,t){return Ko(e,256,o,o,o,t)}));function Bs(e,t){return e===t||e!=e&&t!=t}var js=zo(wr),Ws=zo((function(e,t){return e>=t})),Gs=Mr(function(){return arguments}())?Mr:function(e){return ea(e)&&De.call(e,"callee")&&!qe.call(e,"callee")},Hs=r.isArray,zs=yt?Kt(yt):function(e){return ea(e)&&Tr(e)==k};function Vs(e){return null!=e&&Zs(e.length)&&!Js(e)}function qs(e){return ea(e)&&Vs(e)}var $s=mt||gc,Ys=vt?Kt(vt):function(e){return ea(e)&&Tr(e)==v};function Ks(e){if(!ea(e))return!1;var t=Tr(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Js(e){if(!Qs(e))return!1;var t=Tr(e);return t==S||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xs(e){return"number"==typeof e&&e==fa(e)}function Zs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function Qs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ea(e){return null!=e&&"object"==typeof e}var ta=_t?Kt(_t):function(e){return ea(e)&&pi(e)==b};function na(e){return"number"==typeof e||ea(e)&&Tr(e)==T}function ra(e){if(!ea(e)||Tr(e)!=w)return!1;var t=ze(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Ue}var oa=St?Kt(St):function(e){return ea(e)&&Tr(e)==R},ia=Et?Kt(Et):function(e){return ea(e)&&pi(e)==O};function sa(e){return"string"==typeof e||!Hs(e)&&ea(e)&&Tr(e)==I}function aa(e){return"symbol"==typeof e||ea(e)&&Tr(e)==M}var ca=bt?Kt(bt):function(e){return ea(e)&&Zs(e.length)&&!!ot[Tr(e)]},ua=zo(Lr),la=zo((function(e,t){return e<=t}));function da(e){if(!e)return[];if(Vs(e))return sa(e)?dn(e):Oo(e);if(Ke&&e[Ke])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ke]());var t=pi(e);return(t==b?on:t==O?cn:Ba)(e)}function pa(e){return e?(e=ga(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fa(e){var t=pa(e),n=t%1;return t==t?n?t-n:t:0}function ha(e){return e?ir(fa(e),0,f):0}function ga(e){if("number"==typeof e)return e;if(aa(e))return p;if(Qs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var n=he.test(e);return n||me.test(e)?ct(e.slice(2),n?2:8):fe.test(e)?p:+e}function ma(e){return Io(e,ka(e))}function ya(e){return null==e?"":so(e)}var va=Ao((function(e,t){if(Ei(t)||Vs(t))Io(t,Aa(t),e);else for(var n in t)De.call(t,n)&&Qn(e,n,t[n])})),_a=Ao((function(e,t){Io(t,ka(t),e)})),Sa=Ao((function(e,t,n,r){Io(t,ka(t),e,r)})),Ea=Ao((function(e,t,n,r){Io(t,Aa(t),e,r)})),ba=ei(or),Ta=$r((function(e,t){e=we(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&yi(t[0],t[1],i)&&(r=1);++n<r;)for(var s=t[n],a=ka(s),c=-1,u=a.length;++c<u;){var l=a[c],d=e[l];(d===o||Bs(d,Ae[l])&&!De.call(e,l))&&(e[l]=s[l])}return e})),wa=$r((function(e){return e.push(o,Xo),Tt(Da,o,e)}));function Ca(e,t,n){var r=null==e?o:Er(e,t);return r===o?n:r}function Ra(e,t){return null!=e&&fi(e,t,Rr)}var Oa=Bo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=xe.call(t)),e[t]=n}),Qa(nc)),Ia=Bo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=xe.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),si),Ma=$r(Ir);function Aa(e){return Vs(e)?Yn(e):Nr(e)}function ka(e){return Vs(e)?Yn(e,!0):function(e){if(!Qs(e))return function(e){var t=[];if(null!=e)for(var n in we(e))t.push(n);return t}(e);var t=Ei(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}(e)}var Pa=Ao((function(e,t,n){Br(e,t,n)})),Da=Ao((function(e,t,n,r){Br(e,t,n,r)})),Na=ei((function(e,t){var n={};if(null==e)return n;var r=!1;t=kt(t,(function(t){return t=yo(t,e),r||(r=t.length>1),t})),Io(e,ni(e),n),r&&(n=sr(n,7,Zo));for(var o=t.length;o--;)co(n,t[o]);return n})),La=ei((function(e,t){return null==e?{}:function(e,t){return Gr(e,t,(function(t,n){return Ra(e,n)}))}(e,t)}));function xa(e,t){if(null==e)return{};var n=kt(ni(e),(function(e){return[e]}));return t=si(t),Gr(e,n,(function(e,n){return t(e,n[0])}))}var Ua=Yo(Aa),Fa=Yo(ka);function Ba(e){return null==e?[]:Jt(e,Aa(e))}var ja=No((function(e,t,n){return t=t.toLowerCase(),e+(n?Wa(t):t)}));function Wa(e){return Ka(ya(e).toLowerCase())}function Ga(e){return(e=ya(e))&&e.replace(ve,en).replace(Xe,"")}var Ha=No((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),za=No((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Va=Do("toLowerCase"),qa=No((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),$a=No((function(e,t,n){return e+(n?" ":"")+Ka(t)})),Ya=No((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ka=Do("toUpperCase");function Ja(e,t,n){return e=ya(e),(t=n?o:t)===o?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Xa=$r((function(e,t){try{return Tt(e,o,t)}catch(e){return Ks(e)?e:new Ee(e)}})),Za=ei((function(e,t){return Ct(t,(function(t){t=xi(t),rr(e,t,Is(e[t],e))})),e}));function Qa(e){return function(){return e}}var ec=Uo(),tc=Uo(!0);function nc(e){return e}function rc(e){return Dr("function"==typeof e?e:sr(e,1))}var oc=$r((function(e,t){return function(n){return Ir(n,e,t)}})),ic=$r((function(e,t){return function(n){return Ir(e,n,t)}}));function sc(e,t,n){var r=Aa(t),o=Sr(t,r);null!=n||Qs(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=Sr(t,Aa(t)));var i=!(Qs(n)&&"chain"in n&&!n.chain),s=Js(e);return Ct(o,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=Oo(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Pt([this.value()],arguments))})})),e}function ac(){}var cc=Wo(kt),uc=Wo(Ot),lc=Wo(Lt);function dc(e){return vi(e)?Ht(xi(e)):function(e){return function(t){return Er(t,e)}}(e)}var pc=Ho(),fc=Ho(!0);function hc(){return[]}function gc(){return!1}var mc,yc=jo((function(e,t){return e+t}),0),vc=qo("ceil"),_c=jo((function(e,t){return e/t}),1),Sc=qo("floor"),Ec=jo((function(e,t){return e*t}),1),bc=qo("round"),Tc=jo((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Oe(i);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Rs,Fn.assign=va,Fn.assignIn=_a,Fn.assignInWith=Sa,Fn.assignWith=Ea,Fn.at=ba,Fn.before=Os,Fn.bind=Is,Fn.bindAll=Za,Fn.bindKey=Ms,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Hs(e)?e:[e]},Fn.chain=ds,Fn.chunk=function(e,t,n){t=(n?yi(e,t,n):t===o)?1:mn(fa(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,a=0,c=r(pt(i/t));s<i;)c[a++]=eo(e,s,s+=t);return c},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Pt(Hs(n)?Oo(n):[n],gr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=si();return e=t?kt(e,(function(e){if("function"!=typeof e[1])throw new Oe(i);return[n(e[0]),e[1]]})):[],$r((function(n){for(var r=-1;++r<t;){var o=e[r];if(Tt(o[0],this,n))return Tt(o[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Aa(e);return function(n){return ar(n,e,t)}}(sr(e,1))},Fn.constant=Qa,Fn.countBy=hs,Fn.create=function(e,t){var n=Bn(e);return null==t?n:nr(n,t)},Fn.curry=function e(t,n,r){var i=Ko(t,8,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Fn.curryRight=function e(t,n,r){var i=Ko(t,16,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Fn.debounce=As,Fn.defaults=Ta,Fn.defaultsDeep=wa,Fn.defer=ks,Fn.delay=Ps,Fn.difference=Bi,Fn.differenceBy=ji,Fn.differenceWith=Wi,Fn.drop=function(e,t,n){var r=null==e?0:e.length;return r?eo(e,(t=n||t===o?1:fa(t))<0?0:t,r):[]},Fn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?eo(e,0,(t=r-(t=n||t===o?1:fa(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?lo(e,si(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?lo(e,si(t,3),!0):[]},Fn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&yi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=fa(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:fa(r))<0&&(r+=i),r=n>r?0:ha(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Fn.filter=function(e,t){return(Hs(e)?It:hr)(e,si(t,3))},Fn.flatMap=function(e,t){return gr(bs(e,t),1)},Fn.flatMapDeep=function(e,t){return gr(bs(e,t),l)},Fn.flatMapDepth=function(e,t,n){return n=n===o?1:fa(n),gr(bs(e,t),n)},Fn.flatten=zi,Fn.flattenDeep=function(e){return null!=e&&e.length?gr(e,l):[]},Fn.flattenDepth=function(e,t){return null!=e&&e.length?gr(e,t=t===o?1:fa(t)):[]},Fn.flip=function(e){return Ko(e,512)},Fn.flow=ec,Fn.flowRight=tc,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Fn.functions=function(e){return null==e?[]:Sr(e,Aa(e))},Fn.functionsIn=function(e){return null==e?[]:Sr(e,ka(e))},Fn.groupBy=_s,Fn.initial=function(e){return null!=e&&e.length?eo(e,0,-1):[]},Fn.intersection=qi,Fn.intersectionBy=$i,Fn.intersectionWith=Yi,Fn.invert=Oa,Fn.invertBy=Ia,Fn.invokeMap=Ss,Fn.iteratee=rc,Fn.keyBy=Es,Fn.keys=Aa,Fn.keysIn=ka,Fn.map=bs,Fn.mapKeys=function(e,t){var n={};return t=si(t,3),vr(e,(function(e,r,o){rr(n,t(e,r,o),e)})),n},Fn.mapValues=function(e,t){var n={};return t=si(t,3),vr(e,(function(e,r,o){rr(n,r,t(e,r,o))})),n},Fn.matches=function(e){return Ur(sr(e,1))},Fn.matchesProperty=function(e,t){return Fr(e,sr(t,1))},Fn.memoize=Ds,Fn.merge=Pa,Fn.mergeWith=Da,Fn.method=oc,Fn.methodOf=ic,Fn.mixin=sc,Fn.negate=Ns,Fn.nthArg=function(e){return e=fa(e),$r((function(t){return jr(t,e)}))},Fn.omit=Na,Fn.omitBy=function(e,t){return xa(e,Ns(si(t)))},Fn.once=function(e){return Os(2,e)},Fn.orderBy=function(e,t,n,r){return null==e?[]:(Hs(t)||(t=null==t?[]:[t]),Hs(n=r?o:n)||(n=null==n?[]:[n]),Wr(e,t,n))},Fn.over=cc,Fn.overArgs=Ls,Fn.overEvery=uc,Fn.overSome=lc,Fn.partial=xs,Fn.partialRight=Us,Fn.partition=Ts,Fn.pick=La,Fn.pickBy=xa,Fn.property=dc,Fn.propertyOf=function(e){return function(t){return null==e?o:Er(e,t)}},Fn.pull=Ji,Fn.pullAll=Xi,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,si(n,2)):e},Fn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,o,n):e},Fn.pullAt=Zi,Fn.range=pc,Fn.rangeRight=fc,Fn.rearg=Fs,Fn.reject=function(e,t){return(Hs(e)?It:hr)(e,Ns(si(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=si(t,3);++r<i;){var s=e[r];t(s,r,e)&&(n.push(s),o.push(r))}return zr(e,o),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Oe(i);return $r(e,t=t===o?t:fa(t))},Fn.reverse=Qi,Fn.sampleSize=function(e,t,n){return t=(n?yi(e,t,n):t===o)?1:fa(t),(Hs(e)?Jn:Kr)(e,t)},Fn.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Fn.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Jr(e,t,n,r)},Fn.shuffle=function(e){return(Hs(e)?Xn:Qr)(e)},Fn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&yi(e,t,n)?(t=0,n=r):(t=null==t?0:fa(t),n=n===o?r:fa(n)),eo(e,t,n)):[]},Fn.sortBy=ws,Fn.sortedUniq=function(e){return e&&e.length?oo(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?oo(e,si(t,2)):[]},Fn.split=function(e,t,n){return n&&"number"!=typeof n&&yi(e,t,n)&&(t=n=o),(n=n===o?f:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=so(t))&&rn(e)?_o(dn(e),0,n):e.split(t,n):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Oe(i);return t=null==t?0:mn(fa(t),0),$r((function(n){var r=n[t],o=_o(n,0,t);return r&&Pt(o,r),Tt(e,this,o)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?eo(e,1,t):[]},Fn.take=function(e,t,n){return e&&e.length?eo(e,0,(t=n||t===o?1:fa(t))<0?0:t):[]},Fn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?eo(e,(t=r-(t=n||t===o?1:fa(t)))<0?0:t,r):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?lo(e,si(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?lo(e,si(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Oe(i);return Qs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),As(e,t,{leading:r,maxWait:t,trailing:o})},Fn.thru=ps,Fn.toArray=da,Fn.toPairs=Ua,Fn.toPairsIn=Fa,Fn.toPath=function(e){return Hs(e)?kt(e,xi):aa(e)?[e]:Oo(Li(ya(e)))},Fn.toPlainObject=ma,Fn.transform=function(e,t,n){var r=Hs(e),o=r||$s(e)||ca(e);if(t=si(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:Qs(e)&&Js(i)?Bn(ze(e)):{}}return(o?Ct:vr)(e,(function(e,r,o){return t(n,e,r,o)})),n},Fn.unary=function(e){return Rs(e,1)},Fn.union=es,Fn.unionBy=ts,Fn.unionWith=ns,Fn.uniq=function(e){return e&&e.length?ao(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?ao(e,si(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?ao(e,o,t):[]},Fn.unset=function(e,t){return null==e||co(e,t)},Fn.unzip=rs,Fn.unzipWith=os,Fn.update=function(e,t,n){return null==e?e:uo(e,t,mo(n))},Fn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:uo(e,t,mo(n),r)},Fn.values=Ba,Fn.valuesIn=function(e){return null==e?[]:Jt(e,ka(e))},Fn.without=is,Fn.words=Ja,Fn.wrap=function(e,t){return xs(mo(t),e)},Fn.xor=ss,Fn.xorBy=as,Fn.xorWith=cs,Fn.zip=us,Fn.zipObject=function(e,t){return ho(e||[],t||[],Qn)},Fn.zipObjectDeep=function(e,t){return ho(e||[],t||[],Jr)},Fn.zipWith=ls,Fn.entries=Ua,Fn.entriesIn=Fa,Fn.extend=_a,Fn.extendWith=Sa,sc(Fn,Fn),Fn.add=yc,Fn.attempt=Xa,Fn.camelCase=ja,Fn.capitalize=Wa,Fn.ceil=vc,Fn.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=ga(n))==n?n:0),t!==o&&(t=(t=ga(t))==t?t:0),ir(ga(e),t,n)},Fn.clone=function(e){return sr(e,4)},Fn.cloneDeep=function(e){return sr(e,5)},Fn.cloneDeepWith=function(e,t){return sr(e,5,t="function"==typeof t?t:o)},Fn.cloneWith=function(e,t){return sr(e,4,t="function"==typeof t?t:o)},Fn.conformsTo=function(e,t){return null==t||ar(e,t,Aa(t))},Fn.deburr=Ga,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=_c,Fn.endsWith=function(e,t,n){e=ya(e),t=so(t);var r=e.length,i=n=n===o?r:ir(fa(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Fn.eq=Bs,Fn.escape=function(e){return(e=ya(e))&&Y.test(e)?e.replace(q,tn):e},Fn.escapeRegExp=function(e){return(e=ya(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Fn.every=function(e,t,n){var r=Hs(e)?Ot:pr;return n&&yi(e,t,n)&&(t=o),r(e,si(t,3))},Fn.find=gs,Fn.findIndex=Gi,Fn.findKey=function(e,t){return Ut(e,si(t,3),vr)},Fn.findLast=ms,Fn.findLastIndex=Hi,Fn.findLastKey=function(e,t){return Ut(e,si(t,3),_r)},Fn.floor=Sc,Fn.forEach=ys,Fn.forEachRight=vs,Fn.forIn=function(e,t){return null==e?e:mr(e,si(t,3),ka)},Fn.forInRight=function(e,t){return null==e?e:yr(e,si(t,3),ka)},Fn.forOwn=function(e,t){return e&&vr(e,si(t,3))},Fn.forOwnRight=function(e,t){return e&&_r(e,si(t,3))},Fn.get=Ca,Fn.gt=js,Fn.gte=Ws,Fn.has=function(e,t){return null!=e&&fi(e,t,Cr)},Fn.hasIn=Ra,Fn.head=Vi,Fn.identity=nc,Fn.includes=function(e,t,n,r){e=Vs(e)?e:Ba(e),n=n&&!r?fa(n):0;var o=e.length;return n<0&&(n=mn(o+n,0)),sa(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Bt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:fa(n);return o<0&&(o=mn(r+o,0)),Bt(e,t,o)},Fn.inRange=function(e,t,n){return t=pa(t),n===o?(n=t,t=0):n=pa(n),function(e,t,n){return e>=yn(t,n)&&e<mn(t,n)}(e=ga(e),t,n)},Fn.invoke=Ma,Fn.isArguments=Gs,Fn.isArray=Hs,Fn.isArrayBuffer=zs,Fn.isArrayLike=Vs,Fn.isArrayLikeObject=qs,Fn.isBoolean=function(e){return!0===e||!1===e||ea(e)&&Tr(e)==y},Fn.isBuffer=$s,Fn.isDate=Ys,Fn.isElement=function(e){return ea(e)&&1===e.nodeType&&!ra(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(Vs(e)&&(Hs(e)||"string"==typeof e||"function"==typeof e.splice||$s(e)||ca(e)||Gs(e)))return!e.length;var t=pi(e);if(t==b||t==O)return!e.size;if(Ei(e))return!Nr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Ar(e,t)},Fn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?Ar(e,t,o,n):!!r},Fn.isError=Ks,Fn.isFinite=function(e){return"number"==typeof e&&xt(e)},Fn.isFunction=Js,Fn.isInteger=Xs,Fn.isLength=Zs,Fn.isMap=ta,Fn.isMatch=function(e,t){return e===t||kr(e,t,ci(t))},Fn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,kr(e,t,ci(t),n)},Fn.isNaN=function(e){return na(e)&&e!=+e},Fn.isNative=function(e){if(Si(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=na,Fn.isObject=Qs,Fn.isObjectLike=ea,Fn.isPlainObject=ra,Fn.isRegExp=oa,Fn.isSafeInteger=function(e){return Xs(e)&&e>=-9007199254740991&&e<=d},Fn.isSet=ia,Fn.isString=sa,Fn.isSymbol=aa,Fn.isTypedArray=ca,Fn.isUndefined=function(e){return e===o},Fn.isWeakMap=function(e){return ea(e)&&pi(e)==A},Fn.isWeakSet=function(e){return ea(e)&&"[object WeakSet]"==Tr(e)},Fn.join=function(e,t){return null==e?"":zt.call(e,t)},Fn.kebabCase=Ha,Fn.last=Ki,Fn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=fa(n))<0?mn(r+i,0):yn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Ft(e,Wt,i,!0)},Fn.lowerCase=za,Fn.lowerFirst=Va,Fn.lt=ua,Fn.lte=la,Fn.max=function(e){return e&&e.length?fr(e,nc,wr):o},Fn.maxBy=function(e,t){return e&&e.length?fr(e,si(t,2),wr):o},Fn.mean=function(e){return Gt(e,nc)},Fn.meanBy=function(e,t){return Gt(e,si(t,2))},Fn.min=function(e){return e&&e.length?fr(e,nc,Lr):o},Fn.minBy=function(e,t){return e&&e.length?fr(e,si(t,2),Lr):o},Fn.stubArray=hc,Fn.stubFalse=gc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Ec,Fn.nth=function(e,t){return e&&e.length?jr(e,fa(t)):o},Fn.noConflict=function(){return dt._===this&&(dt._=Fe),this},Fn.noop=ac,Fn.now=Cs,Fn.pad=function(e,t,n){e=ya(e);var r=(t=fa(t))?ln(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Go(ft(o),n)+e+Go(pt(o),n)},Fn.padEnd=function(e,t,n){e=ya(e);var r=(t=fa(t))?ln(e):0;return t&&r<t?e+Go(t-r,n):e},Fn.padStart=function(e,t,n){e=ya(e);var r=(t=fa(t))?ln(e):0;return t&&r<t?Go(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),_n(ya(e).replace(re,""),t||0)},Fn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&yi(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=pa(e),t===o?(t=e,e=0):t=pa(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Sn();return yn(e+i*(t-e+at("1e-"+((i+"").length-1))),t)}return Vr(e,t)},Fn.reduce=function(e,t,n){var r=Hs(e)?Dt:Vt,o=arguments.length<3;return r(e,si(t,4),n,o,lr)},Fn.reduceRight=function(e,t,n){var r=Hs(e)?Nt:Vt,o=arguments.length<3;return r(e,si(t,4),n,o,dr)},Fn.repeat=function(e,t,n){return t=(n?yi(e,t,n):t===o)?1:fa(t),qr(ya(e),t)},Fn.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,n){var r=-1,i=(t=yo(t,e)).length;for(i||(i=1,e=o);++r<i;){var s=null==e?o:e[xi(t[r])];s===o&&(r=i,s=n),e=Js(s)?s.call(e):s}return e},Fn.round=bc,Fn.runInContext=e,Fn.sample=function(e){return(Hs(e)?Kn:Yr)(e)},Fn.size=function(e){if(null==e)return 0;if(Vs(e))return sa(e)?ln(e):e.length;var t=pi(e);return t==b||t==O?e.size:Nr(e).length},Fn.snakeCase=qa,Fn.some=function(e,t,n){var r=Hs(e)?Lt:to;return n&&yi(e,t,n)&&(t=o),r(e,si(t,3))},Fn.sortedIndex=function(e,t){return no(e,t)},Fn.sortedIndexBy=function(e,t,n){return ro(e,t,si(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=no(e,t);if(r<n&&Bs(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return no(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return ro(e,t,si(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=no(e,t,!0)-1;if(Bs(e[n],t))return n}return-1},Fn.startCase=$a,Fn.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:ir(fa(n),0,e.length),t=so(t),e.slice(n,n+t.length)==t},Fn.subtract=Tc,Fn.sum=function(e){return e&&e.length?qt(e,nc):0},Fn.sumBy=function(e,t){return e&&e.length?qt(e,si(t,2)):0},Fn.template=function(e,t,n){var r=Fn.templateSettings;n&&yi(e,t,n)&&(t=o),e=ya(e),t=Sa({},t,r,Jo);var i,s,a=Sa({},t.imports,r.imports,Jo),c=Aa(a),u=Jt(a,c),l=0,d=t.interpolate||_e,p="__p += '",f=Ce((t.escape||_e).source+"|"+d.source+"|"+(d===X?de:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),h="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(f,(function(t,n,r,o,a,c){return r||(r=o),p+=e.slice(l,c).replace(Se,nn),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),p+="';\n";var g=De.call(t,"variable")&&t.variable;if(g){if(ue.test(g))throw new Ee("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(G,""):p).replace(H,"$1").replace(z,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Xa((function(){return be(c,h+"return "+p).apply(o,u)}));if(m.source=p,Ks(m))throw m;return m},Fn.times=function(e,t){if((e=fa(e))<1||e>d)return[];var n=f,r=yn(e,f);t=si(t),e-=f;for(var o=$t(r,t);++n<e;)t(n);return o},Fn.toFinite=pa,Fn.toInteger=fa,Fn.toLength=ha,Fn.toLower=function(e){return ya(e).toLowerCase()},Fn.toNumber=ga,Fn.toSafeInteger=function(e){return e?ir(fa(e),-9007199254740991,d):0===e?e:0},Fn.toString=ya,Fn.toUpper=function(e){return ya(e).toUpperCase()},Fn.trim=function(e,t,n){if((e=ya(e))&&(n||t===o))return Yt(e);if(!e||!(t=so(t)))return e;var r=dn(e),i=dn(t);return _o(r,Zt(r,i),Qt(r,i)+1).join("")},Fn.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===o))return e.slice(0,pn(e)+1);if(!e||!(t=so(t)))return e;var r=dn(e);return _o(r,0,Qt(r,dn(t))+1).join("")},Fn.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===o))return e.replace(re,"");if(!e||!(t=so(t)))return e;var r=dn(e);return _o(r,Zt(r,dn(t))).join("")},Fn.truncate=function(e,t){var n=30,r="...";if(Qs(t)){var i="separator"in t?t.separator:i;n="length"in t?fa(t.length):n,r="omission"in t?so(t.omission):r}var s=(e=ya(e)).length;if(rn(e)){var a=dn(e);s=a.length}if(n>=s)return e;var c=n-ln(r);if(c<1)return r;var u=a?_o(a,0,c).join(""):e.slice(0,c);if(i===o)return u+r;if(a&&(c+=u.length-c),oa(i)){if(e.slice(c).search(i)){var l,d=u;for(i.global||(i=Ce(i.source,ya(pe.exec(i))+"g")),i.lastIndex=0;l=i.exec(d);)var p=l.index;u=u.slice(0,p===o?c:p)}}else if(e.indexOf(so(i),c)!=c){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},Fn.unescape=function(e){return(e=ya(e))&&$.test(e)?e.replace(V,fn):e},Fn.uniqueId=function(e){var t=++Ne;return ya(e)+t},Fn.upperCase=Ya,Fn.upperFirst=Ka,Fn.each=ys,Fn.eachRight=vs,Fn.first=Vi,sc(Fn,(mc={},vr(Fn,(function(e,t){De.call(Fn.prototype,t)||(mc[t]=e)})),mc),{chain:!1}),Fn.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),Ct(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===o?1:mn(fa(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,f),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:si(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),Ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(nc)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=$r((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Ir(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(Ns(si(e)))},Gn.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(f)},vr(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Fn[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);i&&(Fn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,c=t instanceof Gn,u=a[0],l=c||Hs(t),d=function(e){var t=i.apply(Fn,Pt([e],a));return r&&p?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,f=!!this.__actions__.length,h=s&&!p,g=c&&!f;if(!s&&l){t=g?t:new Gn(this);var m=e.apply(t,a);return m.__actions__.push({func:ps,args:[d],thisArg:o}),new Wn(m,p)}return h&&g?e.apply(this,a):(m=this.thru(d),h?r?m.value()[0]:m.value():m)})})),Ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Hs(o)?o:[],e)}return this[n]((function(n){return t.apply(Hs(n)?n:[],e)}))}})),vr(Gn.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";De.call(Mn,r)||(Mn[r]=[]),Mn[r].push({name:t,func:n})}})),Mn[Fo(o,2).name]=[{name:"wrapper",func:o}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Oo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oo(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Hs(e),r=t<0,o=n?e.length:0,i=function(e,t,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=yn(t,e+s);break;case"takeRight":e=mn(e,t-s)}}return{start:e,end:t}}(0,o,this.__views__),s=i.start,a=i.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,d=l.length,p=0,f=yn(c,this.__takeCount__);if(!n||!r&&o==c&&f==c)return po(e,this.__actions__);var h=[];e:for(;c--&&p<f;){for(var g=-1,m=e[u+=t];++g<d;){var y=l[g],v=y.iteratee,_=y.type,S=v(m);if(2==_)m=S;else if(!S){if(1==_)continue e;break e}}h[p++]=m}return h},Fn.prototype.at=fs,Fn.prototype.chain=function(){return ds(this)},Fn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===o&&(this.__values__=da(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,n=this;n instanceof jn;){var r=Fi(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:ps,args:[Qi],thisArg:o}),new Wn(t,this.__chain__)}return this.thru(Qi)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return po(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Ke&&(Fn.prototype[Ke]=function(){return this}),Fn}();dt._=hn,(r=function(){return hn}.call(t,n,t,e))===o||(e.exports=r)}.call(this)},6619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{}class r extends n{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class o extends n{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class i extends n{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class s extends n{}class a extends n{constructor(e){super(`Invalid unit ${e}`)}}class c extends n{}class u extends n{constructor(){super("Zone is an abstract class")}}const l="numeric",d="short",p="long",f={year:l,month:l,day:l},h={year:l,month:d,day:l},g={year:l,month:d,day:l,weekday:d},m={year:l,month:p,day:l},y={year:l,month:p,day:l,weekday:p},v={hour:l,minute:l},_={hour:l,minute:l,second:l},S={hour:l,minute:l,second:l,timeZoneName:d},E={hour:l,minute:l,second:l,timeZoneName:p},b={hour:l,minute:l,hourCycle:"h23"},T={hour:l,minute:l,second:l,hourCycle:"h23"},w={hour:l,minute:l,second:l,hourCycle:"h23",timeZoneName:d},C={hour:l,minute:l,second:l,hourCycle:"h23",timeZoneName:p},R={year:l,month:l,day:l,hour:l,minute:l},O={year:l,month:l,day:l,hour:l,minute:l,second:l},I={year:l,month:d,day:l,hour:l,minute:l},M={year:l,month:d,day:l,hour:l,minute:l,second:l},A={year:l,month:d,day:l,weekday:d,hour:l,minute:l},k={year:l,month:p,day:l,hour:l,minute:l,timeZoneName:d},P={year:l,month:p,day:l,hour:l,minute:l,second:l,timeZoneName:d},D={year:l,month:p,day:l,weekday:p,hour:l,minute:l,timeZoneName:p},N={year:l,month:p,day:l,weekday:p,hour:l,minute:l,second:l,timeZoneName:p};class L{get type(){throw new u}get name(){throw new u}get ianaName(){return this.name}get isUniversal(){throw new u}offsetName(e,t){throw new u}formatOffset(e,t){throw new u}offset(e){throw new u}equals(e){throw new u}get isValid(){throw new u}}let x=null;class U extends L{static get instance(){return null===x&&(x=new U),x}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,t){let{format:n,locale:r}=t;return tt(e,n,r)}formatOffset(e,t){return it(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let F={};const B={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let j={};class W extends L{static create(e){return j[e]||(j[e]=new W(e)),j[e]}static resetCache(){j={},F={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=W.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,t){let{format:n,locale:r}=t;return tt(e,n,r,this.name)}formatOffset(e,t){return it(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=(r=this.name,F[r]||(F[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),F[r]);var r;let[o,i,s,a,c,u,l]=n.formatToParts?function(e,t){const n=e.formatToParts(t),r=[];for(let e=0;e<n.length;e++){const{type:t,value:o}=n[e],i=B[t];"era"===t?r[i]=o:Ne(i)||(r[i]=parseInt(o,10))}return r}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,o,i,s,a,c,u,l]=r;return[s,o,i,a,c,u,l]}(n,t);"BC"===a&&(o=1-Math.abs(o));let d=+t;const p=d%1e3;return d-=p>=0?p:1e3+p,(Xe({year:o,month:i,day:s,hour:24===c?0:c,minute:u,second:l,millisecond:0})-d)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let G={},H={};function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=JSON.stringify([e,t]);let r=H[n];return r||(r=new Intl.DateTimeFormat(e,t),H[n]=r),r}let V={},q={},$=null,Y={};function K(e,t,n,r){const o=e.listingMode();return"error"===o?null:"en"===o?n(t):r(t)}class J{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:o,...i}=n;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=JSON.stringify([e,t]);let r=V[n];return r||(r=new Intl.NumberFormat(e,t),V[n]=r),r}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return He(this.floor?Math.floor(e):$e(e,3),this.padTo)}}class X{constructor(e,t,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&W.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||r,this.dtf=z(t,o)}format(){return this.originalZone?this.formatToParts().map((e=>{let{value:t}=e;return t})).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Z{constructor(e,t,n){this.opts={style:"long",...n},!t&&Ue()&&(this.rtf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{base:n,...r}=t,o=JSON.stringify([e,r]);let i=q[o];return i||(i=new Intl.RelativeTimeFormat(e,t),q[o]=i),i}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"always",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&i){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${o[e][0]}`;case-1:return n?"yesterday":`last ${o[e][0]}`;case 0:return n?"today":`this ${o[e][0]}`}}const s=Object.is(t,-0)||t<0,a=Math.abs(t),c=1===a,u=o[e],l=r?c?u[1]:u[2]||u[1]:c?o[e][0]:e;return s?`${a} ${l} ago`:`in ${a} ${l}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Q={firstDay:1,minimalDays:4,weekend:[6,7]};class ee{static fromOpts(e){return ee.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=e||ve.defaultLocale,s=i||(o?"en-US":$||($=(new Intl.DateTimeFormat).resolvedOptions().locale,$)),a=t||ve.defaultNumberingSystem,c=n||ve.defaultOutputCalendar,u=We(r)||ve.defaultWeekSettings;return new ee(s,a,c,u,i)}static resetCache(){$=null,H={},V={},q={}}static fromObject(){let{locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ee.create(e,t,n,r)}constructor(e,t,n,r,o){const[i,s,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,r;try{t=z(e).resolvedOptions(),r=e}catch(o){const i=e.substring(0,n);t=z(i).resolvedOptions(),r=i}const{numberingSystem:o,calendar:i}=t;return[r,o,i]}}(e);this.locale=i,this.numberingSystem=t||s||null,this.outputCalendar=n||a||null,this.weekSettings=r,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?ee.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,We(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone({...e,defaultToEN:!0})}redefaultToSystem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone({...e,defaultToEN:!1})}months(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return K(this,e,lt,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let n=1;n<=12;n++){const r=dr.utc(2009,n,1);t.push(e(r))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[r][e]}))}weekdays(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return K(this,e,ht,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let n=1;n<=7;n++){const r=dr.utc(2016,11,13+n);t.push(e(r))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(){return K(this,void 0,(()=>gt),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[dr.utc(2016,11,13,9),dr.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return K(this,e,_t,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[dr.utc(-40,1,1),dr.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const r=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return r?r.value:null}numberFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new J(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new X(e,this.intl,t)}relFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Z(this.intl,this.isEnglish(),e)}listFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=JSON.stringify([e,t]);let r=G[n];return r||(r=new Intl.ListFormat(e,t),G[n]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Fe()?function(e){let t=Y[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,Y[e]=t}return t}(this.locale):Q}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let te=null;class ne extends L{static get utcInstance(){return null===te&&(te=new ne(0)),te}static instance(e){return 0===e?ne.utcInstance:new ne(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ne(nt(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${it(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${it(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return it(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class re extends L{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function oe(e,t){if(Ne(e)||null===e)return t;if(e instanceof L)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?U.instance:"utc"===n||"gmt"===n?ne.utcInstance:ne.parseSpecifier(n)||W.create(e)}return Le(e)?ne.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new re(e)}const ie={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},se={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ae=ie.hanidec.replace(/[\[|\]]/g,"").split("");let ce={};function ue(e){let{numberingSystem:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=t||"latn";return ce[r]||(ce[r]={}),ce[r][n]||(ce[r][n]=new RegExp(`${ie[r]}${n}`)),ce[r][n]}let le,de=()=>Date.now(),pe="system",fe=null,he=null,ge=null,me=60,ye=null;class ve{static get now(){return de}static set now(e){de=e}static set defaultZone(e){pe=e}static get defaultZone(){return oe(pe,U.instance)}static get defaultLocale(){return fe}static set defaultLocale(e){fe=e}static get defaultNumberingSystem(){return he}static set defaultNumberingSystem(e){he=e}static get defaultOutputCalendar(){return ge}static set defaultOutputCalendar(e){ge=e}static get defaultWeekSettings(){return ye}static set defaultWeekSettings(e){ye=We(e)}static get twoDigitCutoffYear(){return me}static set twoDigitCutoffYear(e){me=e%100}static get throwOnInvalid(){return le}static set throwOnInvalid(e){le=e}static resetCaches(){ee.resetCache(),W.resetCache(),dr.resetCache(),ce={}}}class _e{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Se=[0,31,59,90,120,151,181,212,243,273,304,334],Ee=[0,31,60,91,121,152,182,213,244,274,305,335];function be(e,t){return new _e("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Te(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const o=r.getUTCDay();return 0===o?7:o}function we(e,t,n){return n+(Ye(e)?Ee:Se)[t-1]}function Ce(e,t){const n=Ye(e)?Ee:Se,r=n.findIndex((e=>e<t));return{month:r+1,day:t-n[r]}}function Re(e,t){return(e-t+7)%7+1}function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const{year:r,month:o,day:i}=e,s=we(r,o,i),a=Re(Te(r,o,i),n);let c,u=Math.floor((s-a+14-t)/7);return u<1?(c=r-1,u=Qe(c,t,n)):u>Qe(r,t,n)?(c=r+1,u=1):c=r,{weekYear:c,weekNumber:u,weekday:a,...st(e)}}function Ie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const{weekYear:r,weekNumber:o,weekday:i}=e,s=Re(Te(r,1,t),n),a=Ke(r);let c,u=7*o+i-s-7+t;u<1?(c=r-1,u+=Ke(c)):u>a?(c=r+1,u-=Ke(r)):c=r;const{month:l,day:d}=Ce(c,u);return{year:c,month:l,day:d,...st(e)}}function Me(e){const{year:t,month:n,day:r}=e;return{year:t,ordinal:we(t,n,r),...st(e)}}function Ae(e){const{year:t,ordinal:n}=e,{month:r,day:o}=Ce(t,n);return{year:t,month:r,day:o,...st(e)}}function ke(e,t){if(!Ne(e.localWeekday)||!Ne(e.localWeekNumber)||!Ne(e.localWeekYear)){if(!Ne(e.weekday)||!Ne(e.weekNumber)||!Ne(e.weekYear))throw new s("Cannot mix locale-based week fields with ISO-based week fields");return Ne(e.localWeekday)||(e.weekday=e.localWeekday),Ne(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ne(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Pe(e){const t=xe(e.year),n=Ge(e.month,1,12),r=Ge(e.day,1,Je(e.year,e.month));return t?n?!r&&be("day",e.day):be("month",e.month):be("year",e.year)}function De(e){const{hour:t,minute:n,second:r,millisecond:o}=e,i=Ge(t,0,23)||24===t&&0===n&&0===r&&0===o,s=Ge(n,0,59),a=Ge(r,0,59),c=Ge(o,0,999);return i?s?a?!c&&be("millisecond",o):be("second",r):be("minute",n):be("hour",t)}function Ne(e){return void 0===e}function Le(e){return"number"==typeof e}function xe(e){return"number"==typeof e&&e%1==0}function Ue(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Fe(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Be(e,t,n){if(0!==e.length)return e.reduce(((e,r)=>{const o=[t(r),r];return e&&n(e[0],o[0])===e[0]?e:o}),null)[1]}function je(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function We(e){if(null==e)return null;if("object"!=typeof e)throw new c("Week settings must be an object");if(!Ge(e.firstDay,1,7)||!Ge(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!Ge(e,1,7))))throw new c("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Ge(e,t,n){return xe(e)&&e>=t&&e<=n}function He(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t=e<0?"-"+(""+-e).padStart(n,"0"):(""+e).padStart(n,"0"),t}function ze(e){return Ne(e)||null===e||""===e?void 0:parseInt(e,10)}function Ve(e){return Ne(e)||null===e||""===e?void 0:parseFloat(e)}function qe(e){if(!Ne(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function $e(e,t){const n=10**t;return(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Math.trunc:Math.round)(e*n)/n}function Ye(e){return e%4==0&&(e%100!=0||e%400==0)}function Ke(e){return Ye(e)?366:365}function Je(e,t){const n=(r=t-1)-12*Math.floor(r/12)+1;var r;return 2===n?Ye(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Xe(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Ze(e,t,n){return-Re(Te(e,1,t),n)+t-1}function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=Ze(e,t,n),o=Ze(e+1,t,n);return(Ke(e)-r+o)/7}function et(e){return e>99?e:e>ve.twoDigitCutoffYear?1900+e:2e3+e}function tt(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(i.timeZone=r);const s={timeZoneName:t,...i},a=new Intl.DateTimeFormat(n,s).formatToParts(o).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function nt(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function rt(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new c(`Invalid unit value ${e}`);return t}function ot(e,t){const n={};for(const r in e)if(je(e,r)){const o=e[r];if(null==o)continue;n[t(r)]=rt(o)}return n}function it(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),o=e>=0?"+":"-";switch(t){case"short":return`${o}${He(n,2)}:${He(r,2)}`;case"narrow":return`${o}${n}${r>0?`:${r}`:""}`;case"techie":return`${o}${He(n,2)}${He(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function st(e){return function(e){return["hour","minute","second","millisecond"].reduce(((t,n)=>(t[n]=e[n],t)),{})}(e)}const at=["January","February","March","April","May","June","July","August","September","October","November","December"],ct=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ut=["J","F","M","A","M","J","J","A","S","O","N","D"];function lt(e){switch(e){case"narrow":return[...ut];case"short":return[...ct];case"long":return[...at];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const dt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],pt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ft=["M","T","W","T","F","S","S"];function ht(e){switch(e){case"narrow":return[...ft];case"short":return[...pt];case"long":return[...dt];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const gt=["AM","PM"],mt=["Before Christ","Anno Domini"],yt=["BC","AD"],vt=["B","A"];function _t(e){switch(e){case"narrow":return[...vt];case"short":return[...yt];case"long":return[...mt];default:return null}}function St(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const Et={D:f,DD:h,DDD:m,DDDD:y,t:v,tt:_,ttt:S,tttt:E,T:b,TT:T,TTT:w,TTTT:C,f:R,ff:I,fff:k,ffff:D,F:O,FF:M,FFF:P,FFFF:N};class bt{static create(e){return new bt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}static parseFormat(e){let t=null,n="",r=!1;const o=[];for(let i=0;i<e.length;i++){const s=e.charAt(i);"'"===s?(n.length>0&&o.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||s===t?n+=s:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=s,t=s)}return n.length>0&&o.push({literal:r||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(e){return Et[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.opts.forceSimple)return He(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,o=(t,n)=>this.loc.extract(e,t,n),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",s=(t,r)=>n?function(e,t){return lt(t)[e.month-1]}(e,t):o(r?{month:t}:{month:t,day:"numeric"},"month"),a=(t,r)=>n?function(e,t){return ht(t)[e.weekday-1]}(e,t):o(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=bt.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return _t(t)[e.year<0?0:1]}(e,t):o({era:t},"era");return St(bt.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return n?function(e){return gt[e.hour<12?0:1]}(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return r?o({day:"numeric"},"day"):this.num(e.day);case"dd":return r?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return r?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return s("short",!0);case"LLLL":return s("long",!0);case"LLLLL":return s("narrow",!0);case"M":return r?o({month:"numeric"},"month"):this.num(e.month);case"MM":return r?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return s("short",!1);case"MMMM":return s("long",!1);case"MMMMM":return s("narrow",!1);case"y":return r?o({year:"numeric"},"year"):this.num(e.year);case"yy":return r?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=bt.parseFormat(t),o=r.reduce(((e,t)=>{let{literal:n,val:r}=t;return n?e:e.concat(r)}),[]);return St(r,(e=>t=>{const r=n(t);return r?this.num(e.get(r),t.length):t})(e.shiftTo(...o.map(n).filter((e=>e)))))}}const Tt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function wt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e+t.source),"");return RegExp(`^${r}$`)}function Ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((t,n)=>{let[r,o,i]=t;const[s,a,c]=n(e,i);return[{...r,...s},a||o,c]}),[{},null,1]).slice(0,2)}function Rt(e){if(null==e)return[null,null];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const[t,r]of n){const n=t.exec(e);if(n)return r(n)}return[null,null]}function Ot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{const r={};let o;for(o=0;o<t.length;o++)r[t[o]]=ze(e[n+o]);return[r,null,n+o]}}const It=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Mt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,At=RegExp(`${Mt.source}(?:${It.source}?(?:\\[(${Tt.source})\\])?)?`),kt=RegExp(`(?:T${At.source})?`),Pt=Ot("weekYear","weekNumber","weekDay"),Dt=Ot("year","ordinal"),Nt=RegExp(`${Mt.source} ?(?:${It.source}|(${Tt.source}))?`),Lt=RegExp(`(?: ${Nt.source})?`);function xt(e,t,n){const r=e[t];return Ne(r)?n:ze(r)}function Ut(e,t){return[{hours:xt(e,t,0),minutes:xt(e,t+1,0),seconds:xt(e,t+2,0),milliseconds:qe(e[t+3])},null,t+4]}function Ft(e,t){const n=!e[t]&&!e[t+1],r=nt(e[t+1],e[t+2]);return[{},n?null:ne.instance(r),t+3]}function Bt(e,t){return[{},e[t]?W.create(e[t]):null,t+1]}const jt=RegExp(`^T?${Mt.source}$`),Wt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Gt(e){const[t,n,r,o,i,s,a,c,u]=e,l="-"===t[0],d=c&&"-"===c[0],p=function(e){return void 0!==e&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||e&&l)?-e:e};return[{years:p(Ve(n)),months:p(Ve(r)),weeks:p(Ve(o)),days:p(Ve(i)),hours:p(Ve(s)),minutes:p(Ve(a)),seconds:p(Ve(c),"-0"===c),milliseconds:p(qe(u),d)}]}const Ht={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function zt(e,t,n,r,o,i,s){const a={year:2===t.length?et(ze(t)):ze(t),month:ct.indexOf(n)+1,day:ze(r),hour:ze(o),minute:ze(i)};return s&&(a.second=ze(s)),e&&(a.weekday=e.length>3?dt.indexOf(e)+1:pt.indexOf(e)+1),a}const Vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function qt(e){const[,t,n,r,o,i,s,a,c,u,l,d]=e,p=zt(t,o,r,n,i,s,a);let f;return f=c?Ht[c]:u?0:nt(l,d),[p,new ne(f)]}const $t=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Yt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Kt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Jt(e){const[,t,n,r,o,i,s,a]=e;return[zt(t,o,r,n,i,s,a),ne.utcInstance]}function Xt(e){const[,t,n,r,o,i,s,a]=e;return[zt(t,a,n,r,o,i,s),ne.utcInstance]}const Zt=wt(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,kt),Qt=wt(/(\d{4})-?W(\d\d)(?:-?(\d))?/,kt),en=wt(/(\d{4})-?(\d{3})/,kt),tn=wt(At),nn=Ct((function(e,t){return[{year:xt(e,t),month:xt(e,t+1,1),day:xt(e,t+2,1)},null,t+3]}),Ut,Ft,Bt),rn=Ct(Pt,Ut,Ft,Bt),on=Ct(Dt,Ut,Ft,Bt),sn=Ct(Ut,Ft,Bt),an=Ct(Ut),cn=wt(/(\d{4})-(\d\d)-(\d\d)/,Lt),un=wt(Nt),ln=Ct(Ut,Ft,Bt),dn="Invalid Duration",pn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},fn={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...pn},hn={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...pn},gn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],mn=gn.slice(0).reverse();function yn(e,t){const n={values:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Sn(n)}function vn(e,t){var n;let r=null!=(n=t.milliseconds)?n:0;for(const n of mn.slice(1))t[n]&&(r+=t[n]*e[n].milliseconds);return r}function _n(e,t){const n=vn(e,t)<0?-1:1;gn.reduceRight(((r,o)=>{if(Ne(t[o]))return r;if(r){const i=t[r]*n,s=e[o][r],a=Math.floor(i/s);t[o]+=a*n,t[r]-=a*s*n}return o}),null),gn.reduce(((n,r)=>{if(Ne(t[r]))return n;if(n){const o=t[n]%1;t[n]-=o,t[r]+=o*e[n][r]}return r}),null)}class Sn{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?hn:fn;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||ee.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return Sn.fromObject({milliseconds:e},t)}static fromObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||"object"!=typeof e)throw new c("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new Sn({values:ot(e,Sn.normalizeUnit),loc:ee.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Le(e))return Sn.fromMillis(e);if(Sn.isDuration(e))return e;if("object"==typeof e)return Sn.fromObject(e);throw new c(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return Rt(e,[Wt,Gt])}(e);return n?Sn.fromObject(n,t):Sn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return Rt(e,[jt,an])}(e);return n?Sn.fromObject(n,t):Sn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new c("need to specify a reason the Duration is invalid");const n=e instanceof _e?e:new _e(e,t);if(ve.throwOnInvalid)throw new i(n);return new Sn({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new a(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?bt.create(this.loc,n).formatDurationFromString(this,e):dn}toHuman(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return dn;const t=gn.map((t=>{const n=this.values[t];return Ne(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=$e(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},dr.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?vn(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Sn.fromDurationLike(e),n={};for(const e of gn)(je(t.values,e)||je(this.values,e))&&(n[e]=t.get(e)+this.get(e));return yn(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=Sn.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=rt(e(this.values[n],n));return yn(this,{values:t},!0)}get(e){return this[Sn.normalizeUnit(e)]}set(e){return this.isValid?yn(this,{values:{...this.values,...ot(e,Sn.normalizeUnit)}}):this}reconfigure(){let{locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yn(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return _n(this.matrix,e),yn(this,{values:e},!0)}rescale(){return this.isValid?yn(this,{values:function(e){const t={};for(const[n,r]of Object.entries(e))0!==r&&(t[n]=r);return t}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!this.isValid)return this;if(0===t.length)return this;t=t.map((e=>Sn.normalizeUnit(e)));const r={},o={},i=this.toObject();let s;for(const e of gn)if(t.indexOf(e)>=0){s=e;let t=0;for(const n in o)t+=this.matrix[n][e]*o[n],o[n]=0;Le(i[e])&&(t+=i[e]);const n=Math.trunc(t);r[e]=n,o[e]=(1e3*t-1e3*n)/1e3}else Le(i[e])&&(o[e]=i[e]);for(const e in o)0!==o[e]&&(r[s]+=e===s?o[e]:o[e]/this.matrix[s][e]);return _n(this.matrix,r),yn(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return yn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of gn)if(t=this.values[r],n=e.values[r],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const En="Invalid Interval";class bn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new c("need to specify a reason the Interval is invalid");const n=e instanceof _e?e:new _e(e,t);if(ve.throwOnInvalid)throw new o(n);return new bn({invalid:n})}static fromDateTimes(e,t){const n=pr(e),r=pr(t),o=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?bn.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:bn.invalid("missing or invalid end"):bn.invalid("missing or invalid start")}(n,r);return null==o?new bn({start:n,end:r}):o}static after(e,t){const n=Sn.fromDurationLike(t),r=pr(e);return bn.fromDateTimes(r,r.plus(n))}static before(e,t){const n=Sn.fromDurationLike(t),r=pr(e);return bn.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let e,o,i,s;try{e=dr.fromISO(n,t),o=e.isValid}catch(r){o=!1}try{i=dr.fromISO(r,t),s=i.isValid}catch(r){s=!1}if(o&&s)return bn.fromDateTimes(e,i);if(o){const n=Sn.fromISO(r,t);if(n.isValid)return bn.after(e,n)}else if(s){const e=Sn.fromISO(n,t);if(e.isValid)return bn.before(i,e)}}return bn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds";return this.isValid?this.toDuration(e).get(e):NaN}count(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds",t=arguments.length>1?arguments[1]:void 0;if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return r=null!=t&&t.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set(){let{start:e,end:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?bn.fromDateTimes(e||this.s,t||this.e):this}splitAt(){if(!this.isValid)return[];for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.map(pr).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),o=[];let{s:i}=this,s=0;for(;i<this.e;){const e=r[s]||this.e,t=+e>+this.e?this.e:e;o.push(bn.fromDateTimes(i,t)),i=t,s+=1}return o}splitBy(e){const t=Sn.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:r}=this,o=1;const i=[];for(;r<this.e;){const e=this.start.plus(t.mapUnits((e=>e*o)));n=+e>+this.e?this.e:e,i.push(bn.fromDateTimes(r,n)),r=n,o+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:bn.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return bn.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce(((e,t)=>{let[n,r]=e;return r?r.overlaps(t)||r.abutsStart(t)?[n,r.union(t)]:[n.concat([r]),t]:[n,t]}),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],o=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),i=Array.prototype.concat(...o).sort(((e,t)=>e.time-t.time));for(const e of i)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&r.push(bn.fromDateTimes(t,e.time)),t=null);return bn.merge(r)}difference(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bn.xor([this].concat(t)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:En}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?bt.create(this.s.loc.clone(t),e).formatInterval(this):En}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:En}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:En}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:En}toFormat(e){let{separator:t=" – "}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:En}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Sn.invalid(this.invalidReason)}mapEndpoints(e){return bn.fromDateTimes(e(this.s),e(this.e))}}class Tn{static hasDST(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve.defaultZone;const t=dr.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return W.isValidZone(e)}static normalizeZone(e){return oe(e,ve.defaultZone)}static getStartOfWeek(){let{locale:e=null,locObj:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t||ee.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek(){let{locale:e=null,locObj:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t||ee.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays(){let{locale:e=null,locObj:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t||ee.create(e)).getWeekendDays().slice()}static months(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:o="gregory"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||ee.create(t,n,o)).months(e)}static monthsFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:o="gregory"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||ee.create(t,n,o)).months(e,!0)}static weekdays(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||ee.create(t,n,null)).weekdays(e)}static weekdaysFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:n=null,locObj:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r||ee.create(t,n,null)).weekdays(e,!0)}static meridiems(){let{locale:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ee.create(e).meridiems()}static eras(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"short",{locale:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ee.create(t,null,"gregory").eras(e)}static features(){return{relative:Ue(),localeWeek:Fe()}}}function wn(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(Sn.fromMillis(r).as("days"))}function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return{regex:e,deser:e=>{let[n]=e;return t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(-1!==e[n].search(ie.hanidec))t+=ae.indexOf(e[n]);else for(const e in se){const[n,o]=se[e];r>=n&&r<=o&&(t+=r-n)}}return parseInt(t,10)}return t}(n))}}}const Rn=`[ ${String.fromCharCode(160)}]`,On=new RegExp(Rn,"g");function In(e){return e.replace(/\./g,"\\.?").replace(On,Rn)}function Mn(e){return e.replace(/\./g,"").replace(On," ").toLowerCase()}function An(e,t){return null===e?null:{regex:RegExp(e.map(In).join("|")),deser:n=>{let[r]=n;return e.findIndex((e=>Mn(r)===Mn(e)))+t}}}function kn(e,t){return{regex:e,deser:e=>{let[,t,n]=e;return nt(t,n)},groups:t}}function Pn(e){return{regex:e,deser:e=>{let[t]=e;return t}}}const Dn={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nn=null;function Ln(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=Fn(bt.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}class xn{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Ln(bt.parseFormat(t),e),this.units=this.tokens.map((t=>function(e,t){const n=ue(t),r=ue(t,"{2}"),o=ue(t,"{3}"),i=ue(t,"{4}"),s=ue(t,"{6}"),a=ue(t,"{1,2}"),c=ue(t,"{1,3}"),u=ue(t,"{1,6}"),l=ue(t,"{1,9}"),d=ue(t,"{2,4}"),p=ue(t,"{4,6}"),f=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:e=>{let[t]=e;return t},literal:!0};var t},h=(h=>{if(e.literal)return f(h);switch(h.val){case"G":return An(t.eras("short"),0);case"GG":return An(t.eras("long"),0);case"y":return Cn(u);case"yy":case"kk":return Cn(d,et);case"yyyy":case"kkkk":return Cn(i);case"yyyyy":return Cn(p);case"yyyyyy":return Cn(s);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Cn(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Cn(r);case"MMM":return An(t.months("short",!0),1);case"MMMM":return An(t.months("long",!0),1);case"LLL":return An(t.months("short",!1),1);case"LLLL":return An(t.months("long",!1),1);case"o":case"S":return Cn(c);case"ooo":case"SSS":return Cn(o);case"u":return Pn(l);case"uu":return Pn(a);case"uuu":case"E":case"c":return Cn(n);case"a":return An(t.meridiems(),0);case"EEE":return An(t.weekdays("short",!1),1);case"EEEE":return An(t.weekdays("long",!1),1);case"ccc":return An(t.weekdays("short",!0),1);case"cccc":return An(t.weekdays("long",!0),1);case"Z":case"ZZ":return kn(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return kn(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Pn(/[a-z_+-/]{1,256}?/i);case" ":return Pn(/[^\S\n\r]/);default:return f(h)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return h.token=e,h}(t,e))),this.disqualifyingUnit=this.units.find((e=>e.invalidReason)),!this.disqualifyingUnit){const[e,t]=[`^${(n=this.units).map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,n];this.regex=RegExp(e,"i"),this.handlers=t}var n}explainFromTokens(e){if(this.isValid){const[t,n]=function(e,t,n){const r=e.match(t);if(r){const e={};let t=1;for(const o in n)if(je(n,o)){const i=n[o],s=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(r.slice(t,t+s))),t+=s}return[r,e]}return[r,{}]}(e,this.regex,this.handlers),[r,o,i]=n?function(e){let t,n=null;return Ne(e.z)||(n=W.create(e.z)),Ne(e.Z)||(n||(n=new ne(e.Z)),t=e.Z),Ne(e.q)||(e.M=3*(e.q-1)+1),Ne(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Ne(e.u)||(e.S=qe(e.u)),[Object.keys(e).reduce(((t,n)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(t[r]=e[n]),t}),{}),n,t]}(n):[null,null,void 0];if(je(n,"a")&&je(n,"H"))throw new s("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:r,zone:o,specificOffset:i}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Un(e,t,n){return new xn(e,n).explainFromTokens(t)}function Fn(e,t){if(!e)return null;const n=bt.create(t,e).dtFormatter((Nn||(Nn=dr.fromMillis(1555555555555)),Nn)),r=n.formatToParts(),o=n.resolvedOptions();return r.map((t=>function(e,t,n){const{type:r,value:o}=e;if("literal"===r){const e=/^\s+$/.test(o);return{literal:!e,val:e?" ":o}}const i=t[r];let s=r;"hour"===r&&(s=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=Dn[s];if("object"==typeof a&&(a=a[i]),a)return{literal:!1,val:a}}(t,e,o)))}const Bn="Invalid DateTime",jn=864e13;function Wn(e){return new _e("unsupported zone",`the zone "${e.name}" is not supported`)}function Gn(e){return null===e.weekData&&(e.weekData=Oe(e.c)),e.weekData}function Hn(e){return null===e.localWeekData&&(e.localWeekData=Oe(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function zn(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new dr({...n,...t,old:n})}function Vn(e,t,n){let r=e-60*t*1e3;const o=n.offset(r);if(t===o)return[r,t];r-=60*(o-t)*1e3;const i=n.offset(r);return o===i?[r,o]:[e-60*Math.min(o,i)*1e3,Math.max(o,i)]}function qn(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function $n(e,t,n){return Vn(Xe(e),t,n)}function Yn(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),o=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:r,month:o,day:Math.min(e.c.day,Je(r,o))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},s=Sn.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Xe(i);let[c,u]=Vn(a,n,e.zone);return 0!==s&&(c+=s,u=e.zone.offset(c)),{ts:c,o:u}}function Kn(e,t,n,r,o,i){const{setZone:s,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const r=t||a,o=dr.fromObject(e,{...n,zone:r,specificOffset:i});return s?o:o.setZone(a)}return dr.invalid(new _e("unparsable",`the input "${o}" can't be parsed as ${r}`))}function Jn(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.isValid?bt.create(ee.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Xn(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=He(e.c.year,n?6:4),t?(r+="-",r+=He(e.c.month),r+="-",r+=He(e.c.day)):(r+=He(e.c.month),r+=He(e.c.day)),r}function Zn(e,t,n,r,o,i){let s=He(e.c.hour);return t?(s+=":",s+=He(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(s+=":")):s+=He(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(s+=He(e.c.second),0===e.c.millisecond&&r||(s+=".",s+=He(e.c.millisecond,3))),o&&(e.isOffsetFixed&&0===e.offset&&!i?s+="Z":e.o<0?(s+="-",s+=He(Math.trunc(-e.o/60)),s+=":",s+=He(Math.trunc(-e.o%60))):(s+="+",s+=He(Math.trunc(e.o/60)),s+=":",s+=He(Math.trunc(e.o%60)))),i&&(s+="["+e.zone.ianaName+"]"),s}const Qn={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},er={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},tr={ordinal:1,hour:0,minute:0,second:0,millisecond:0},nr=["year","month","day","hour","minute","second","millisecond"],rr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],or=["year","ordinal","hour","minute","second","millisecond"];function ir(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new a(e);return t}(e)}}function sr(e,t){const n=oe(t.zone,ve.defaultZone);if(!n.isValid)return dr.invalid(Wn(n));const r=ee.fromObject(t);let o,i;if(Ne(e.year))o=ve.now();else{for(const t of nr)Ne(e[t])&&(e[t]=Qn[t]);const t=Pe(e)||De(e);if(t)return dr.invalid(t);const r=function(e){return lr[e]||(void 0===ur&&(ur=ve.now()),lr[e]=e.offset(ur)),lr[e]}(n);[o,i]=$n(e,r,n)}return new dr({ts:o,zone:n,loc:r,o:i})}function ar(e,t,n){const r=!!Ne(n.round)||n.round,o=(e,o)=>(e=$e(e,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,o)),i=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return o(i(n.unit),n.unit);for(const e of n.units){const t=i(e);if(Math.abs(t)>=1)return o(t,e)}return o(e>t?-0:0,n.units[n.units.length-1])}function cr(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let ur,lr={};class dr{constructor(e){const t=e.zone||ve.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new _e("invalid input"):null)||(t.isValid?null:Wn(t));this.ts=Ne(e.ts)?ve.now():e.ts;let r=null,o=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,o]=[e.old.c,e.old.o];else{const i=Le(e.o)&&!e.old?e.o:t.offset(this.ts);r=qn(this.ts,i),n=Number.isNaN(r.year)?new _e("invalid input"):null,r=n?null:r,o=n?null:i}this._zone=t,this.loc=e.loc||ee.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=o,this.isLuxonDateTime=!0}static now(){return new dr({})}static local(){const[e,t]=cr(arguments),[n,r,o,i,s,a,c]=t;return sr({year:n,month:r,day:o,hour:i,minute:s,second:a,millisecond:c},e)}static utc(){const[e,t]=cr(arguments),[n,r,o,i,s,a,c]=t;return e.zone=ne.utcInstance,sr({year:n,month:r,day:o,hour:i,minute:s,second:a,millisecond:c},e)}static fromJSDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(r=e,"[object Date]"===Object.prototype.toString.call(r)?e.valueOf():NaN);var r;if(Number.isNaN(n))return dr.invalid("invalid input");const o=oe(t.zone,ve.defaultZone);return o.isValid?new dr({ts:n,zone:o,loc:ee.fromObject(t)}):dr.invalid(Wn(o))}static fromMillis(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Le(e))return e<-jn||e>jn?dr.invalid("Timestamp out of range"):new dr({ts:e,zone:oe(t.zone,ve.defaultZone),loc:ee.fromObject(t)});throw new c(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Le(e))return new dr({ts:1e3*e,zone:oe(t.zone,ve.defaultZone),loc:ee.fromObject(t)});throw new c("fromSeconds requires a numerical input")}static fromObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e||{};const n=oe(t.zone,ve.defaultZone);if(!n.isValid)return dr.invalid(Wn(n));const r=ee.fromObject(t),o=ot(e,ir),{minDaysInFirstWeek:i,startOfWeek:a}=ke(o,r),c=ve.now(),u=Ne(t.specificOffset)?n.offset(c):t.specificOffset,l=!Ne(o.ordinal),d=!Ne(o.year),p=!Ne(o.month)||!Ne(o.day),f=d||p,h=o.weekYear||o.weekNumber;if((f||l)&&h)throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&l)throw new s("Can't mix ordinal dates with month/day");const g=h||o.weekday&&!f;let m,y,v=qn(c,u);g?(m=rr,y=er,v=Oe(v,i,a)):l?(m=or,y=tr,v=Me(v)):(m=nr,y=Qn);let _=!1;for(const e of m)Ne(o[e])?o[e]=_?y[e]:v[e]:_=!0;const S=g?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=xe(e.weekYear),o=Ge(e.weekNumber,1,Qe(e.weekYear,t,n)),i=Ge(e.weekday,1,7);return r?o?!i&&be("weekday",e.weekday):be("week",e.weekNumber):be("weekYear",e.weekYear)}(o,i,a):l?function(e){const t=xe(e.year),n=Ge(e.ordinal,1,Ke(e.year));return t?!n&&be("ordinal",e.ordinal):be("year",e.year)}(o):Pe(o),E=S||De(o);if(E)return dr.invalid(E);const b=g?Ie(o,i,a):l?Ae(o):o,[T,w]=$n(b,u,n),C=new dr({ts:T,zone:n,o:w,loc:r});return o.weekday&&f&&e.weekday!==C.weekday?dr.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${C.toISO()}`):C.isValid?C:dr.invalid(C.invalid)}static fromISO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Rt(e,[Zt,nn],[Qt,rn],[en,on],[tn,sn])}(e);return Kn(n,r,t,"ISO 8601",e)}static fromRFC2822(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Rt(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Vt,qt])}(e);return Kn(n,r,t,"RFC 2822",e)}static fromHTTP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Rt(e,[$t,Jt],[Yt,Jt],[Kt,Xt])}(e);return Kn(n,r,t,"HTTP",t)}static fromFormat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Ne(e)||Ne(t))throw new c("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:o=null}=n,i=ee.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0}),[s,a,u,l]=function(e,t,n){const{result:r,zone:o,specificOffset:i,invalidReason:s}=Un(e,t,n);return[r,o,i,s]}(i,e,t);return l?dr.invalid(l):Kn(s,a,n,`format ${t}`,e,u)}static fromString(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return dr.fromFormat(e,t,n)}static fromSQL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[n,r]=function(e){return Rt(e,[cn,nn],[un,ln])}(e);return Kn(n,r,t,"SQL",e)}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new c("need to specify a reason the DateTime is invalid");const n=e instanceof _e?e:new _e(e,t);if(ve.throwOnInvalid)throw new r(n);return new dr({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Fn(e,ee.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ln(bt.parseFormat(e),ee.fromObject(t)).map((e=>e.val)).join("")}static resetCache(){ur=void 0,lr={}}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Gn(this).weekYear:NaN}get weekNumber(){return this.isValid?Gn(this).weekNumber:NaN}get weekday(){return this.isValid?Gn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Hn(this).weekday:NaN}get localWeekNumber(){return this.isValid?Hn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Hn(this).weekYear:NaN}get ordinal(){return this.isValid?Me(this.c).ordinal:NaN}get monthShort(){return this.isValid?Tn.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Tn.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Tn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Tn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Xe(this.c),r=this.zone.offset(n-e),o=this.zone.offset(n+e),i=this.zone.offset(n-r*t),s=this.zone.offset(n-o*t);if(i===s)return[this];const a=n-i*t,c=n-s*t,u=qn(a,i),l=qn(c,s);return u.hour===l.hour&&u.minute===l.minute&&u.second===l.second&&u.millisecond===l.millisecond?[zn(this,{ts:a}),zn(this,{ts:c})]:[this]}get isInLeapYear(){return Ye(this.year)}get daysInMonth(){return Je(this.year,this.month)}get daysInYear(){return this.isValid?Ke(this.year):NaN}get weeksInWeekYear(){return this.isValid?Qe(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Qe(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{locale:t,numberingSystem:n,calendar:r}=bt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setZone(ne.instance(e),t)}toLocal(){return this.setZone(ve.defaultZone)}setZone(e){let{keepLocalTime:t=!1,keepCalendarTime:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((e=oe(e,ve.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[r]=$n(n,t,e)}return zn(this,{ts:r,zone:e})}return dr.invalid(Wn(e))}reconfigure(){let{locale:e,numberingSystem:t,outputCalendar:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zn(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=ot(e,ir),{minDaysInFirstWeek:n,startOfWeek:r}=ke(t,this.loc),o=!Ne(t.weekYear)||!Ne(t.weekNumber)||!Ne(t.weekday),i=!Ne(t.ordinal),a=!Ne(t.year),c=!Ne(t.month)||!Ne(t.day),u=a||c,l=t.weekYear||t.weekNumber;if((u||i)&&l)throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&i)throw new s("Can't mix ordinal dates with month/day");let d;o?d=Ie({...Oe(this.c,n,r),...t},n,r):Ne(t.ordinal)?(d={...this.toObject(),...t},Ne(t.day)&&(d.day=Math.min(Je(d.year,d.month),d.day))):d=Ae({...Me(this.c),...t});const[p,f]=$n(d,this.o,this.zone);return zn(this,{ts:p,o:f})}plus(e){return this.isValid?zn(this,Yn(this,Sn.fromDurationLike(e))):this}minus(e){return this.isValid?zn(this,Yn(this,Sn.fromDurationLike(e).negate())):this}startOf(e){let{useLocaleWeeks:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isValid)return this;const n={},r=Sn.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===r){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?bt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Bn}toLocaleString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?bt.create(this.loc.clone(t),e).formatDateTime(this):Bn}toLocaleParts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?bt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO(){let{format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const i="extended"===e;let s=Xn(this,i);return s+="T",s+=Zn(this,i,t,n,r,o),s}toISODate(){let{format:e="extended"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?Xn(this,"extended"===e):null}toISOWeekDate(){return Jn(this,"kkkk-'W'WW-c")}toISOTime(){let{suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:o=!1,format:i="extended"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?(r?"T":"")+Zn(this,"extended"===i,t,e,n,o):null}toRFC2822(){return Jn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Jn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Xn(this,!0):null}toSQLTime(){let{includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Jn(this,r,!0)}toSQL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Bn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.isValid||!e.isValid)return Sn.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=(a=t,Array.isArray(a)?a:[a]).map(Sn.normalizeUnit),i=e.valueOf()>this.valueOf(),s=function(e,t,n,r){let[o,i,s,a]=function(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=wn(e,t);return(n-n%7)/7}],["days",wn]],o={},i=e;let s,a;for(const[c,u]of r)n.indexOf(c)>=0&&(s=c,o[c]=u(e,t),a=i.plus(o),a>t?(o[c]--,(e=i.plus(o))>t&&(a=e,o[c]--,e=i.plus(o))):e=a);return[e,o,a,s]}(e,t,n);const c=t-o,u=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===u.length&&(s<t&&(s=o.plus({[a]:1})),s!==o&&(i[a]=(i[a]||0)+c/(s-o)));const l=Sn.fromObject(i,r);return u.length>0?Sn.fromMillis(c,r).shiftTo(...u).plus(l):l}(i?this:e,i?e:this,o,r);var a;return i?s.negate():s}diffNow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.diff(dr.now(),e,t)}until(e){return this.isValid?bn.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(t,n)<=r&&r<=o.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const t=e.base||dr.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(r=e.unit,o=void 0),ar(t,this.plus(n),{...e,numeric:"always",units:r,unit:o})}toRelativeCalendar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?ar(e.base||dr.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every(dr.isDateTime))throw new c("min requires all arguments be DateTimes");return Be(t,(e=>e.valueOf()),Math.min)}static max(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every(dr.isDateTime))throw new c("max requires all arguments be DateTimes");return Be(t,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{locale:r=null,numberingSystem:o=null}=n;return Un(ee.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0}),e,t)}static fromStringExplain(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return dr.fromFormatExplain(e,t,n)}static buildFormatParser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{locale:n=null,numberingSystem:r=null}=t,o=ee.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new xn(o,e)}static fromFormatParser(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Ne(e)||Ne(t))throw new c("fromFormatParser requires an input string and a format parser");const{locale:r=null,numberingSystem:o=null}=n,i=ee.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0});if(!i.equals(t.locale))throw new c(`fromFormatParser called with a locale of ${i}, but the format parser was created for ${t.locale}`);const{result:s,zone:a,specificOffset:u,invalidReason:l}=t.explainFromTokens(e);return l?dr.invalid(l):Kn(s,a,n,`format ${t.format}`,e,u)}static get DATE_SHORT(){return f}static get DATE_MED(){return h}static get DATE_MED_WITH_WEEKDAY(){return g}static get DATE_FULL(){return m}static get DATE_HUGE(){return y}static get TIME_SIMPLE(){return v}static get TIME_WITH_SECONDS(){return _}static get TIME_WITH_SHORT_OFFSET(){return S}static get TIME_WITH_LONG_OFFSET(){return E}static get TIME_24_SIMPLE(){return b}static get TIME_24_WITH_SECONDS(){return T}static get TIME_24_WITH_SHORT_OFFSET(){return w}static get TIME_24_WITH_LONG_OFFSET(){return C}static get DATETIME_SHORT(){return R}static get DATETIME_SHORT_WITH_SECONDS(){return O}static get DATETIME_MED(){return I}static get DATETIME_MED_WITH_SECONDS(){return M}static get DATETIME_MED_WITH_WEEKDAY(){return A}static get DATETIME_FULL(){return k}static get DATETIME_FULL_WITH_SECONDS(){return P}static get DATETIME_HUGE(){return D}static get DATETIME_HUGE_WITH_SECONDS(){return N}}function pr(e){if(dr.isDateTime(e))return e;if(e&&e.valueOf&&Le(e.valueOf()))return dr.fromJSDate(e);if(e&&"object"==typeof e)return dr.fromObject(e);throw new c(`Unknown datetime argument: ${e}, of type ${typeof e}`)}t.DateTime=dr,t.Duration=Sn,t.FixedOffsetZone=ne,t.IANAZone=W,t.Info=Tn,t.Interval=bn,t.InvalidZone=re,t.Settings=ve,t.SystemZone=U,t.VERSION="3.5.0",t.Zone=L},3950:()=>{"use strict";const e=globalThis;function t(t){return(e.__Zone_symbol_prefix||"__zone_symbol__")+t}function n(){const n=e.performance;function r(e){n&&n.mark&&n.mark(e)}function o(e,t){n&&n.measure&&n.measure(e,t)}r("Zone");class i{static#e=(()=>this.__symbol__=t)();static assertZonePatched(){if(e.Promise!==I.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let e=i.current;for(;e.parent;)e=e.parent;return e}static get current(){return A.zone}static get currentTask(){return k}static __load_patch(n,s){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(I.hasOwnProperty(n)){const r=!0===e[t("forceDuplicateZoneCheck")];if(!a&&r)throw Error("Already loaded patch: "+n)}else if(!e["__Zone_disable_"+n]){const t="Zone:"+n;r(t),I[n]=s(e,i,M),o(t,t)}}get parent(){return this._parent}get name(){return this._name}constructor(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new a(this,this._parent&&this._parent._zoneDelegate,t)}get(e){const t=this.getZoneWith(e);if(t)return t._properties[e]}getZoneWith(e){let t=this;for(;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null}fork(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)}wrap(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);const n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}}run(e,t,n,r){A={parent:A,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{A=A.parent}}runGuarded(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;A={parent:A,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{A=A.parent}}runTask(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");const r=e,{type:o,data:{isPeriodic:i=!1,isRefreshable:s=!1}={}}=e;if(e.state===_&&(o===O||o===R))return;const a=e.state!=b;a&&r._transitionTo(b,E);const c=k;k=r,A={parent:A,zone:this};try{o!=R||!e.data||i||s||(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,r,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{const t=e.state;if(t!==_&&t!==w)if(o==O||i||s&&t===S)a&&r._transitionTo(E,b,S);else{const e=r._zoneDelegates;this._updateTaskCount(r,-1),a&&r._transitionTo(_,b,_),s&&(r._zoneDelegates=e)}A=A.parent,k=c}}scheduleTask(e){if(e.zone&&e.zone!==this){let t=this;for(;t;){if(t===e.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${e.zone.name}`);t=t.parent}}e._transitionTo(S,_);const t=[];e._zoneDelegates=t,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(w,S,_),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===t&&this._updateTaskCount(e,1),e.state==S&&e._transitionTo(E,S),e}scheduleMicroTask(e,t,n,r){return this.scheduleTask(new c(C,e,t,n,r,void 0))}scheduleMacroTask(e,t,n,r,o){return this.scheduleTask(new c(R,e,t,n,r,o))}scheduleEventTask(e,t,n,r,o){return this.scheduleTask(new c(O,e,t,n,r,o))}cancelTask(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||v).name+"; Execution: "+this.name+")");if(e.state===E||e.state===b){e._transitionTo(T,E,b);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(w,T),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(_,T),e.runCount=-1,e}}_updateTaskCount(e,t){const n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(let r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)}}const s={name:"",onHasTask:(e,t,n,r)=>e.hasTask(n,r),onScheduleTask:(e,t,n,r)=>e.scheduleTask(n,r),onInvokeTask:(e,t,n,r,o,i)=>e.invokeTask(n,r,o,i),onCancelTask:(e,t,n,r)=>e.cancelTask(n,r)};class a{get zone(){return this._zone}constructor(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this._zone:t._forkCurrZone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this._zone:t._interceptCurrZone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this._zone:t._invokeCurrZone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this._zone:t._handleErrorCurrZone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this._zone:t._scheduleTaskCurrZone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this._zone:t._invokeTaskCurrZone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this._zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=n&&n.onHasTask,o=t&&t._hasTaskZS;(r||o)&&(this._hasTaskZS=r?n:s,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,n.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this._zone),n.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this._zone),n.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this._zone))}fork(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new i(e,t)}intercept(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t}invoke(e,t,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,o):t.apply(n,r)}handleError(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)}scheduleTask(e,t){let n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t),n||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=C)throw new Error("Task is missing scheduleFn.");m(t)}return n}invokeTask(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)}cancelTask(e,t){let n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n}hasTask(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}}_updateTaskCount(e,t){const n=this._taskCounts,r=n[e],o=n[e]=r+t;if(o<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==o){const t={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};this.hasTask(this._zone,t)}}}class c{constructor(t,n,r,o,i,s){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=t,this.source=n,this.data=o,this.scheduleFn=i,this.cancelFn=s,!r)throw new Error("callback is not defined");this.callback=r;const a=this;t===O&&o&&o.useG?this.invoke=c.invokeTask:this.invoke=function(){return c.invokeTask.call(e,a,this,arguments)}}static invokeTask(e,t,n){e||(e=this),P++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==P&&y(),P--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(_,S)}_transitionTo(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(`${this.type} '${this.source}': can not transition to '${e}', expecting state '${t}'${n?" or '"+n+"'":""}, was '${this._state}'.`);this._state=e,e==_&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const u=t("setTimeout"),l=t("Promise"),d=t("then");let p,f=[],h=!1;function g(t){if(p||e[l]&&(p=e[l].resolve(0)),p){let e=p[d];e||(e=p.then),e.call(p,t)}else e[u](t,0)}function m(e){0===P&&0===f.length&&g(y),e&&f.push(e)}function y(){if(!h){for(h=!0;f.length;){const e=f;f=[];for(let t=0;t<e.length;t++){const n=e[t];try{n.zone.runTask(n,null,null)}catch(e){M.onUnhandledError(e)}}}M.microtaskDrainDone(),h=!1}}const v={name:"NO ZONE"},_="notScheduled",S="scheduling",E="scheduled",b="running",T="canceling",w="unknown",C="microTask",R="macroTask",O="eventTask",I={},M={symbol:t,currentZoneFrame:()=>A,onUnhandledError:D,microtaskDrainDone:D,scheduleMicroTask:m,showUncaughtError:()=>!i[t("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:D,patchMethod:()=>D,bindArguments:()=>[],patchThen:()=>D,patchMacroTask:()=>D,patchEventPrototype:()=>D,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>D,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>D,wrapWithCurrentZone:()=>D,filterProperties:()=>[],attachOriginToPatched:()=>D,_redefineProperty:()=>D,patchCallbacks:()=>D,nativeScheduleMicroTask:g};let A={parent:null,zone:new i(null,null)},k=null,P=0;function D(){}return o("Zone","Zone"),i}const r=Object.getOwnPropertyDescriptor,o=Object.defineProperty,i=Object.getPrototypeOf,s=Object.create,a=Array.prototype.slice,c="addEventListener",u="removeEventListener",l=t(c),d=t(u),p="true",f="false",h=t("");function g(e,t){return Zone.current.wrap(e,t)}function m(e,t,n,r,o){return Zone.current.scheduleMacroTask(e,t,n,r,o)}const y=t,v="undefined"!=typeof window,_=v?window:void 0,S=v&&_||globalThis;function E(e,t){for(let n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=g(e[n],t+"_"+n));return e}function b(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}const T="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,w=!("nw"in S)&&void 0!==S.process&&"[object process]"===S.process.toString(),C=!w&&!T&&!(!v||!_.HTMLElement),R=void 0!==S.process&&"[object process]"===S.process.toString()&&!T&&!(!v||!_.HTMLElement),O={},I=y("enable_beforeunload"),M=function(e){if(!(e=e||S.event))return;let t=O[e.type];t||(t=O[e.type]=y("ON_PROPERTY"+e.type));const n=this||e.target||S,r=n[t];let o;if(C&&n===_&&"error"===e.type){const t=e;o=r&&r.call(this,t.message,t.filename,t.lineno,t.colno,t.error),!0===o&&e.preventDefault()}else o=r&&r.apply(this,arguments),"beforeunload"===e.type&&S[I]&&"string"==typeof o?e.returnValue=o:null==o||o||e.preventDefault();return o};function A(e,t,n){let i=r(e,t);if(!i&&n&&r(n,t)&&(i={enumerable:!0,configurable:!0}),!i||!i.configurable)return;const s=y("on"+t+"patched");if(e.hasOwnProperty(s)&&e[s])return;delete i.writable,delete i.value;const a=i.get,c=i.set,u=t.slice(2);let l=O[u];l||(l=O[u]=y("ON_PROPERTY"+u)),i.set=function(t){let n=this;n||e!==S||(n=S),n&&("function"==typeof n[l]&&n.removeEventListener(u,M),c&&c.call(n,null),n[l]=t,"function"==typeof t&&n.addEventListener(u,M,!1))},i.get=function(){let n=this;if(n||e!==S||(n=S),!n)return null;const r=n[l];if(r)return r;if(a){let e=a.call(this);if(e)return i.set.call(this,e),"function"==typeof n.removeAttribute&&n.removeAttribute(t),e}return null},o(e,t,i),e[s]=!0}function k(e,t,n){if(t)for(let r=0;r<t.length;r++)A(e,"on"+t[r],n);else{const t=[];for(const n in e)"on"==n.slice(0,2)&&t.push(n);for(let r=0;r<t.length;r++)A(e,t[r],n)}}const P=y("originalInstance");function D(e){const t=S[e];if(!t)return;S[y(e)]=t,S[e]=function(){const n=E(arguments,e);switch(n.length){case 0:this[P]=new t;break;case 1:this[P]=new t(n[0]);break;case 2:this[P]=new t(n[0],n[1]);break;case 3:this[P]=new t(n[0],n[1],n[2]);break;case 4:this[P]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},x(S[e],t);const n=new t((function(){}));let r;for(r in n)"XMLHttpRequest"===e&&"responseBlob"===r||function(t){"function"==typeof n[t]?S[e].prototype[t]=function(){return this[P][t].apply(this[P],arguments)}:o(S[e].prototype,t,{set:function(n){"function"==typeof n?(this[P][t]=g(n,e+"."+t),x(this[P][t],n)):this[P][t]=n},get:function(){return this[P][t]}})}(r);for(r in t)"prototype"!==r&&t.hasOwnProperty(r)&&(S[e][r]=t[r])}function N(e,t,n){let o=e;for(;o&&!o.hasOwnProperty(t);)o=i(o);!o&&e[t]&&(o=e);const s=y(t);let a=null;if(o&&(!(a=o[s])||!o.hasOwnProperty(s))&&(a=o[s]=o[t],b(o&&r(o,t)))){const e=n(a,s,t);o[t]=function(){return e(this,arguments)},x(o[t],a)}return a}function L(e,t,n){let r=null;function o(e){const t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},r.apply(t.target,t.args),e}r=N(e,t,(e=>function(t,r){const i=n(t,r);return i.cbIdx>=0&&"function"==typeof r[i.cbIdx]?m(i.name,r[i.cbIdx],i,o):e.apply(t,r)}))}function x(e,t){e[y("OriginalDelegate")]=t}let U=!1,F=!1;function B(){try{const e=_.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}function j(){if(U)return F;U=!0;try{const e=_.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(F=!0)}catch(e){}return F}function W(e){return"function"==typeof e}function G(e){return"number"==typeof e}let H=!1;if("undefined"!=typeof window)try{const e=Object.defineProperty({},"passive",{get:function(){H=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){H=!1}const z={useG:!0},V={},q={},$=new RegExp("^"+h+"(\\w+)(true|false)$"),Y=y("propagationStopped");function K(e,t){const n=(t?t(e):e)+f,r=(t?t(e):e)+p,o=h+n,i=h+r;V[e]={},V[e][f]=o,V[e][p]=i}function J(e,t,n,r){const o=r&&r.add||c,s=r&&r.rm||u,a=r&&r.listeners||"eventListeners",l=r&&r.rmAll||"removeAllListeners",d=y(o),g="."+o+":",m="prependListener",v="."+m+":",_=function(e,t,n){if(e.isRemoved)return;const r=e.callback;let o;"object"==typeof r&&r.handleEvent&&(e.callback=e=>r.handleEvent(e),e.originalDelegate=r);try{e.invoke(e,t,[n])}catch(e){o=e}const i=e.options;if(i&&"object"==typeof i&&i.once){const r=e.originalDelegate?e.originalDelegate:e.callback;t[s].call(t,n.type,r,i)}return o};function S(n,r,o){if(!(r=r||e.event))return;const i=n||r.target||e,s=i[V[r.type][o?p:f]];if(s){const e=[];if(1===s.length){const t=_(s[0],i,r);t&&e.push(t)}else{const t=s.slice();for(let n=0;n<t.length&&(!r||!0!==r[Y]);n++){const o=_(t[n],i,r);o&&e.push(o)}}if(1===e.length)throw e[0];for(let n=0;n<e.length;n++){const r=e[n];t.nativeScheduleMicroTask((()=>{throw r}))}}}const E=function(e){return S(this,e,!1)},b=function(e){return S(this,e,!0)};function T(t,n){if(!t)return!1;let r=!0;n&&void 0!==n.useG&&(r=n.useG);const c=n&&n.vh;let u=!0;n&&void 0!==n.chkDup&&(u=n.chkDup);let _=!1;n&&void 0!==n.rt&&(_=n.rt);let S=t;for(;S&&!S.hasOwnProperty(o);)S=i(S);if(!S&&t[o]&&(S=t),!S)return!1;if(S[d])return!1;const T=n&&n.eventNameToString,C={},R=S[d]=S[o],O=S[y(s)]=S[s],I=S[y(a)]=S[a],M=S[y(l)]=S[l];let A;n&&n.prepend&&(A=S[y(n.prepend)]=S[n.prepend]);const k=r?function(e){if(!C.isExisting)return R.call(C.target,C.eventName,C.capture?b:E,C.options)}:function(e){return R.call(C.target,C.eventName,e.invoke,C.options)},P=r?function(e){if(!e.isRemoved){const t=V[e.eventName];let n;t&&(n=t[e.capture?p:f]);const r=n&&e.target[n];if(r)for(let t=0;t<r.length;t++)if(r[t]===e){r.splice(t,1),e.isRemoved=!0,e.removeAbortListener&&(e.removeAbortListener(),e.removeAbortListener=null),0===r.length&&(e.allRemoved=!0,e.target[n]=null);break}}if(e.allRemoved)return O.call(e.target,e.eventName,e.capture?b:E,e.options)}:function(e){return O.call(e.target,e.eventName,e.invoke,e.options)},D=n&&n.diff?n.diff:function(e,t){const n=typeof t;return"function"===n&&e.callback===t||"object"===n&&e.originalDelegate===t},N=Zone[y("UNPATCHED_EVENTS")],L=e[y("PASSIVE_EVENTS")],U=function(t,o,i,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return function(){const d=this||e;let h=arguments[0];n&&n.transferEventName&&(h=n.transferEventName(h));let g=arguments[1];if(!g)return t.apply(this,arguments);if(w&&"uncaughtException"===h)return t.apply(this,arguments);let m=!1;if("function"!=typeof g){if(!g.handleEvent)return t.apply(this,arguments);m=!0}if(c&&!c(t,g,d,arguments))return;const y=H&&!!L&&-1!==L.indexOf(h),v=function(e){if("object"==typeof e&&null!==e){const t={...e};return e.signal&&(t.signal=e.signal),t}return e}(function(e,t){return!H&&"object"==typeof e&&e?!!e.capture:H&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"==typeof e&&!1!==e.passive?{...e,passive:!0}:e:{passive:!0}:e}(arguments[2],y)),_=v?.signal;if(_?.aborted)return;if(N)for(let e=0;e<N.length;e++)if(h===N[e])return y?t.call(d,h,g,v):t.apply(this,arguments);const S=!!v&&("boolean"==typeof v||v.capture),E=!(!v||"object"!=typeof v)&&v.once,b=Zone.current;let R=V[h];R||(K(h,T),R=V[h]);const O=R[S?p:f];let I,M=d[O],A=!1;if(M){if(A=!0,u)for(let e=0;e<M.length;e++)if(D(M[e],g))return}else M=d[O]=[];const k=d.constructor.name,P=q[k];P&&(I=P[h]),I||(I=k+o+(T?T(h):h)),C.options=v,E&&(C.options.once=!1),C.target=d,C.capture=S,C.eventName=h,C.isExisting=A;const x=r?z:void 0;x&&(x.taskData=C),_&&(C.options.signal=void 0);const U=b.scheduleEventTask(I,g,x,i,s);if(_){C.options.signal=_;const e=()=>U.zone.cancelTask(U);t.call(_,"abort",e,{once:!0}),U.removeAbortListener=()=>_.removeEventListener("abort",e)}return C.target=null,x&&(x.taskData=null),E&&(C.options.once=!0),(H||"boolean"!=typeof U.options)&&(U.options=v),U.target=d,U.capture=S,U.eventName=h,m&&(U.originalDelegate=g),l?M.unshift(U):M.push(U),a?d:void 0}};return S[o]=U(R,g,k,P,_),A&&(S[m]=U(A,v,(function(e){return A.call(C.target,C.eventName,e.invoke,C.options)}),P,_,!0)),S[s]=function(){const t=this||e;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const o=arguments[2],i=!!o&&("boolean"==typeof o||o.capture),s=arguments[1];if(!s)return O.apply(this,arguments);if(c&&!c(O,s,t,arguments))return;const a=V[r];let u;a&&(u=a[i?p:f]);const l=u&&t[u];if(l)for(let e=0;e<l.length;e++){const n=l[e];if(D(n,s))return l.splice(e,1),n.isRemoved=!0,0!==l.length||(n.allRemoved=!0,t[u]=null,i||"string"!=typeof r)||(t[h+"ON_PROPERTY"+r]=null),n.zone.cancelTask(n),_?t:void 0}return O.apply(this,arguments)},S[a]=function(){const t=this||e;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const o=[],i=X(t,T?T(r):r);for(let e=0;e<i.length;e++){const t=i[e];let n=t.originalDelegate?t.originalDelegate:t.callback;o.push(n)}return o},S[l]=function(){const t=this||e;let r=arguments[0];if(r){n&&n.transferEventName&&(r=n.transferEventName(r));const e=V[r];if(e){const n=e[f],o=e[p],i=t[n],a=t[o];if(i){const e=i.slice();for(let t=0;t<e.length;t++){const n=e[t];let o=n.originalDelegate?n.originalDelegate:n.callback;this[s].call(this,r,o,n.options)}}if(a){const e=a.slice();for(let t=0;t<e.length;t++){const n=e[t];let o=n.originalDelegate?n.originalDelegate:n.callback;this[s].call(this,r,o,n.options)}}}}else{const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t],r=$.exec(n);let o=r&&r[1];o&&"removeListener"!==o&&this[l].call(this,o)}this[l].call(this,"removeListener")}if(_)return this},x(S[o],R),x(S[s],O),M&&x(S[l],M),I&&x(S[a],I),!0}let C=[];for(let e=0;e<n.length;e++)C[e]=T(n[e],r);return C}function X(e,t){if(!t){const n=[];for(let r in e){const o=$.exec(r);let i=o&&o[1];if(i&&(!t||i===t)){const t=e[r];if(t)for(let e=0;e<t.length;e++)n.push(t[e])}}return n}let n=V[t];n||(K(t),n=V[t]);const r=e[n[f]],o=e[n[p]];return r?o?r.concat(o):r.slice():o?o.slice():[]}function Z(e,t){const n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",(e=>function(t,n){t[Y]=!0,e&&e.apply(t,n)}))}function Q(e,t){t.patchMethod(e,"queueMicrotask",(e=>function(e,t){Zone.current.scheduleMicroTask("queueMicrotask",t[0])}))}const ee=y("zoneTask");function te(e,t,n,r){let o=null,i=null;n+=r;const s={};function a(t){const n=t.data;n.args[0]=function(){return t.invoke.apply(this,arguments)};const r=o.apply(e,n.args);return G(r)?n.handleId=r:(n.handle=r,n.isRefreshable=W(r.refresh)),t}function c(t){const{handle:n,handleId:r}=t.data;return i.call(e,n??r)}o=N(e,t+=r,(n=>function(o,i){if(W(i[0])){const e={isRefreshable:!1,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?i[1]||0:void 0,args:i},n=i[0];i[0]=function(){try{return n.apply(this,arguments)}finally{const{handle:t,handleId:n,isPeriodic:r,isRefreshable:o}=e;r||o||(n?delete s[n]:t&&(t[ee]=null))}};const o=m(t,i[0],e,a,c);if(!o)return o;const{handleId:u,handle:l,isRefreshable:d,isPeriodic:p}=o.data;if(u)s[u]=o;else if(l&&(l[ee]=o,d&&!p)){const e=l.refresh;l.refresh=function(){const{zone:t,state:n}=o;return"notScheduled"===n?(o._state="scheduled",t._updateTaskCount(o,1)):"running"===n&&(o._state="scheduling"),e.call(this)}}return l??u??o}return n.apply(e,i)})),i=N(e,n,(t=>function(n,r){const o=r[0];let i;G(o)?(i=s[o],delete s[o]):(i=o?.[ee],i?o[ee]=null:i=o),i?.type?i.cancelFn&&i.zone.cancelTask(i):t.apply(e,r)}))}function ne(e,t){if(Zone[t.symbol("patchEventTarget")])return;const{eventNames:n,zoneSymbolEventNames:r,TRUE_STR:o,FALSE_STR:i,ZONE_SYMBOL_PREFIX:s}=t.getGlobalObjects();for(let e=0;e<n.length;e++){const t=n[e],a=s+(t+i),c=s+(t+o);r[t]={},r[t][i]=a,r[t][o]=c}const a=e.EventTarget;return a&&a.prototype?(t.patchEventTarget(e,t,[a&&a.prototype]),!0):void 0}function re(e,t,n){if(!n||0===n.length)return t;const r=n.filter((t=>t.target===e));if(!r||0===r.length)return t;const o=r[0].ignoreProperties;return t.filter((e=>-1===o.indexOf(e)))}function oe(e,t,n,r){e&&k(e,re(e,t,n),r)}function ie(e){return Object.getOwnPropertyNames(e).filter((e=>e.startsWith("on")&&e.length>2)).map((e=>e.substring(2)))}function se(e,t){if(w&&!R)return;if(Zone[e.symbol("patchEvents")])return;const n=t.__Zone_ignore_on_properties;let r=[];if(C){const e=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const t=B()?[{target:e,ignoreProperties:["error"]}]:[];oe(e,ie(e),n?n.concat(t):n,i(e))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let e=0;e<r.length;e++){const o=t[r[e]];o&&o.prototype&&oe(o.prototype,ie(o.prototype),n)}}function ae(e,t,n,r,o){const i=Zone.__symbol__(r);if(t[i])return;const s=t[i]=t[r];t[r]=function(i,a,c){return a&&a.prototype&&o.forEach((function(t){const o=`${n}.${r}::`+t,i=a.prototype;try{if(i.hasOwnProperty(t)){const n=e.ObjectGetOwnPropertyDescriptor(i,t);n&&n.value?(n.value=e.wrapWithCurrentZone(n.value,o),e._redefineProperty(a.prototype,t,n)):i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],o))}else i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],o))}catch{}})),s.call(t,i,a,c)},e.attachOriginToPatched(t[r],s)}const ce=function(){const e=globalThis,r=!0===e[t("forceDuplicateZoneCheck")];if(e.Zone&&(r||"function"!=typeof e.Zone.__symbol__))throw new Error("Zone already loaded.");return e.Zone??=n(),e.Zone}();!function(e){(function(e){e.__load_patch("ZoneAwarePromise",((e,t,n)=>{const r=Object.getOwnPropertyDescriptor,o=Object.defineProperty,i=n.symbol,s=[],a=!1!==e[i("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],c=i("Promise"),u=i("then");n.onUnhandledError=e=>{if(n.showUncaughtError()){const t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},n.microtaskDrainDone=()=>{for(;s.length;){const e=s.shift();try{e.zone.runGuarded((()=>{if(e.throwOriginal)throw e.rejection;throw e}))}catch(e){d(e)}}};const l=i("unhandledPromiseRejectionHandler");function d(e){n.onUnhandledError(e);try{const n=t[l];"function"==typeof n&&n.call(this,e)}catch(e){}}function p(e){return e&&e.then}function f(e){return e}function h(e){return D.reject(e)}const g=i("state"),m=i("value"),y=i("finally"),v=i("parentPromiseValue"),_=i("parentPromiseState"),S=null,E=!0,b=!1;function T(e,t){return n=>{try{O(e,t,n)}catch(t){O(e,!1,t)}}}const w=function(){let e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},C="Promise resolved with itself",R=i("currentTaskTrace");function O(e,r,i){const c=w();if(e===i)throw new TypeError(C);if(e[g]===S){let l=null;try{"object"!=typeof i&&"function"!=typeof i||(l=i&&i.then)}catch(t){return c((()=>{O(e,!1,t)}))(),e}if(r!==b&&i instanceof D&&i.hasOwnProperty(g)&&i.hasOwnProperty(m)&&i[g]!==S)M(i),O(e,i[g],i[m]);else if(r!==b&&"function"==typeof l)try{l.call(i,c(T(e,r)),c(T(e,!1)))}catch(t){c((()=>{O(e,!1,t)}))()}else{e[g]=r;const c=e[m];if(e[m]=i,e[y]===y&&r===E&&(e[g]=e[_],e[m]=e[v]),r===b&&i instanceof Error){const e=t.currentTask&&t.currentTask.data&&t.currentTask.data.__creationTrace__;e&&o(i,R,{configurable:!0,enumerable:!1,writable:!0,value:e})}for(let t=0;t<c.length;)A(e,c[t++],c[t++],c[t++],c[t++]);if(0==c.length&&r==b){e[g]=0;let r=i;try{throw new Error("Uncaught (in promise): "+((u=i)&&u.toString===Object.prototype.toString?(u.constructor&&u.constructor.name||"")+": "+JSON.stringify(u):u?u.toString():Object.prototype.toString.call(u))+(i&&i.stack?"\n"+i.stack:""))}catch(e){r=e}a&&(r.throwOriginal=!0),r.rejection=i,r.promise=e,r.zone=t.current,r.task=t.currentTask,s.push(r),n.scheduleMicroTask()}}}var u;return e}const I=i("rejectionHandledHandler");function M(e){if(0===e[g]){try{const n=t[I];n&&"function"==typeof n&&n.call(this,{rejection:e[m],promise:e})}catch(e){}e[g]=b;for(let t=0;t<s.length;t++)e===s[t].promise&&s.splice(t,1)}}function A(e,t,n,r,o){M(e);const i=e[g],s=i?"function"==typeof r?r:f:"function"==typeof o?o:h;t.scheduleMicroTask("Promise.then",(()=>{try{const r=e[m],o=!!n&&y===n[y];o&&(n[v]=r,n[_]=i);const a=t.run(s,void 0,o&&s!==h&&s!==f?[]:[r]);O(n,!0,a)}catch(e){O(n,!1,e)}}),n)}const k=function(){},P=e.AggregateError;class D{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(e){return e instanceof D?e:O(new this(null),E,e)}static reject(e){return O(new this(null),b,e)}static withResolvers(){const e={};return e.promise=new D(((t,n)=>{e.resolve=t,e.reject=n})),e}static any(e){if(!e||"function"!=typeof e[Symbol.iterator])return Promise.reject(new P([],"All promises were rejected"));const t=[];let n=0;try{for(let r of e)n++,t.push(D.resolve(r))}catch(e){return Promise.reject(new P([],"All promises were rejected"))}if(0===n)return Promise.reject(new P([],"All promises were rejected"));let r=!1;const o=[];return new D(((e,i)=>{for(let s=0;s<t.length;s++)t[s].then((t=>{r||(r=!0,e(t))}),(e=>{o.push(e),n--,0===n&&(r=!0,i(new P(o,"All promises were rejected")))}))}))}static race(e){let t,n,r=new this(((e,r)=>{t=e,n=r}));function o(e){t(e)}function i(e){n(e)}for(let t of e)p(t)||(t=this.resolve(t)),t.then(o,i);return r}static all(e){return D.allWithCallback(e)}static allSettled(e){return(this&&this.prototype instanceof D?this:D).allWithCallback(e,{thenCallback:e=>({status:"fulfilled",value:e}),errorCallback:e=>({status:"rejected",reason:e})})}static allWithCallback(e,t){let n,r,o=new this(((e,t)=>{n=e,r=t})),i=2,s=0;const a=[];for(let o of e){p(o)||(o=this.resolve(o));const e=s;try{o.then((r=>{a[e]=t?t.thenCallback(r):r,i--,0===i&&n(a)}),(o=>{t?(a[e]=t.errorCallback(o),i--,0===i&&n(a)):r(o)}))}catch(e){r(e)}i++,s++}return i-=2,0===i&&n(a),o}constructor(e){const t=this;if(!(t instanceof D))throw new Error("Must be an instanceof Promise.");t[g]=S,t[m]=[];try{const n=w();e&&e(n(T(t,E)),n(T(t,b)))}catch(e){O(t,!1,e)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return D}then(e,n){let r=this.constructor?.[Symbol.species];r&&"function"==typeof r||(r=this.constructor||D);const o=new r(k),i=t.current;return this[g]==S?this[m].push(i,o,e,n):A(this,i,o,e,n),o}catch(e){return this.then(null,e)}finally(e){let n=this.constructor?.[Symbol.species];n&&"function"==typeof n||(n=D);const r=new n(k);r[y]=y;const o=t.current;return this[g]==S?this[m].push(o,r,e,e):A(this,o,r,e,e),r}}D.resolve=D.resolve,D.reject=D.reject,D.race=D.race,D.all=D.all;const L=e[c]=e.Promise;e.Promise=D;const x=i("thenPatched");function U(e){const t=e.prototype,n=r(t,"then");if(n&&(!1===n.writable||!n.configurable))return;const o=t.then;t[u]=o,e.prototype.then=function(e,t){return new D(((e,t)=>{o.call(this,e,t)})).then(e,t)},e[x]=!0}return n.patchThen=U,L&&(U(L),N(e,"fetch",(e=>{return t=e,function(e,n){let r=t.apply(e,n);if(r instanceof D)return r;let o=r.constructor;return o[x]||U(o),r};var t}))),Promise[t.__symbol__("uncaughtPromiseErrors")]=s,D}))})(e),function(e){e.__load_patch("toString",(e=>{const t=Function.prototype.toString,n=y("OriginalDelegate"),r=y("Promise"),o=y("Error"),i=function(){if("function"==typeof this){const i=this[n];if(i)return"function"==typeof i?t.call(i):Object.prototype.toString.call(i);if(this===Promise){const n=e[r];if(n)return t.call(n)}if(this===Error){const n=e[o];if(n)return t.call(n)}}return t.call(this)};i[n]=t,Function.prototype.toString=i;const s=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":s.call(this)}}))}(e),function(e){e.__load_patch("util",((e,t,n)=>{const i=ie(e);n.patchOnProperties=k,n.patchMethod=N,n.bindArguments=E,n.patchMacroTask=L;const l=t.__symbol__("BLACK_LISTED_EVENTS"),d=t.__symbol__("UNPATCHED_EVENTS");e[d]&&(e[l]=e[d]),e[l]&&(t[l]=t[d]=e[l]),n.patchEventPrototype=Z,n.patchEventTarget=J,n.isIEOrEdge=j,n.ObjectDefineProperty=o,n.ObjectGetOwnPropertyDescriptor=r,n.ObjectCreate=s,n.ArraySlice=a,n.patchClass=D,n.wrapWithCurrentZone=g,n.filterProperties=re,n.attachOriginToPatched=x,n._redefineProperty=Object.defineProperty,n.patchCallbacks=ae,n.getGlobalObjects=()=>({globalSources:q,zoneSymbolEventNames:V,eventNames:i,isBrowser:C,isMix:R,isNode:w,TRUE_STR:p,FALSE_STR:f,ZONE_SYMBOL_PREFIX:h,ADD_EVENT_LISTENER_STR:c,REMOVE_EVENT_LISTENER_STR:u})}))}(e)}(ce),function(e){e.__load_patch("legacy",(t=>{const n=t[e.__symbol__("legacyPatch")];n&&n()})),e.__load_patch("timers",(e=>{const t="set",n="clear";te(e,t,n,"Timeout"),te(e,t,n,"Interval"),te(e,t,n,"Immediate")})),e.__load_patch("requestAnimationFrame",(e=>{te(e,"request","cancel","AnimationFrame"),te(e,"mozRequest","mozCancel","AnimationFrame"),te(e,"webkitRequest","webkitCancel","AnimationFrame")})),e.__load_patch("blocking",((e,t)=>{const n=["alert","prompt","confirm"];for(let r=0;r<n.length;r++)N(e,n[r],((n,r,o)=>function(r,i){return t.current.run(n,e,i,o)}))})),e.__load_patch("EventTarget",((e,t,n)=>{!function(e,t){t.patchEventPrototype(e,t)}(e,n),ne(e,n);const r=e.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(e,n,[r.prototype])})),e.__load_patch("MutationObserver",((e,t,n)=>{D("MutationObserver"),D("WebKitMutationObserver")})),e.__load_patch("IntersectionObserver",((e,t,n)=>{D("IntersectionObserver")})),e.__load_patch("FileReader",((e,t,n)=>{D("FileReader")})),e.__load_patch("on_property",((e,t,n)=>{se(n,e)})),e.__load_patch("customElements",((e,t,n)=>{!function(e,t){const{isBrowser:n,isMix:r}=t.getGlobalObjects();(n||r)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(e,n)})),e.__load_patch("XHR",((e,t)=>{!function(e){const c=e.XMLHttpRequest;if(!c)return;const u=c.prototype;let p=u[l],f=u[d];if(!p){const t=e.XMLHttpRequestEventTarget;if(t){const e=t.prototype;p=e[l],f=e[d]}}const h="readystatechange",g="scheduled";function v(e){const r=e.data,s=r.target;s[i]=!1,s[a]=!1;const c=s[o];p||(p=s[l],f=s[d]),c&&f.call(s,h,c);const u=s[o]=()=>{if(s.readyState===s.DONE)if(!r.aborted&&s[i]&&e.state===g){const n=s[t.__symbol__("loadfalse")];if(0!==s.status&&n&&n.length>0){const o=e.invoke;e.invoke=function(){const n=s[t.__symbol__("loadfalse")];for(let t=0;t<n.length;t++)n[t]===e&&n.splice(t,1);r.aborted||e.state!==g||o.call(e)},n.push(e)}else e.invoke()}else r.aborted||!1!==s[i]||(s[a]=!0)};return p.call(s,h,u),s[n]||(s[n]=e),w.apply(s,r.args),s[i]=!0,e}function _(){}function S(e){const t=e.data;return t.aborted=!0,C.apply(t.target,t.args)}const E=N(u,"open",(()=>function(e,t){return e[r]=0==t[2],e[s]=t[1],E.apply(e,t)})),b=y("fetchTaskAborting"),T=y("fetchTaskScheduling"),w=N(u,"send",(()=>function(e,n){if(!0===t.current[T])return w.apply(e,n);if(e[r])return w.apply(e,n);{const t={target:e,url:e[s],isPeriodic:!1,args:n,aborted:!1},r=m("XMLHttpRequest.send",_,t,v,S);e&&!0===e[a]&&!t.aborted&&r.state===g&&r.invoke()}})),C=N(u,"abort",(()=>function(e,r){const o=e[n];if(o&&"string"==typeof o.type){if(null==o.cancelFn||o.data&&o.data.aborted)return;o.zone.cancelTask(o)}else if(!0===t.current[b])return C.apply(e,r)}))}(e);const n=y("xhrTask"),r=y("xhrSync"),o=y("xhrListener"),i=y("xhrScheduled"),s=y("xhrURL"),a=y("xhrErrorBeforeScheduled")})),e.__load_patch("geolocation",(e=>{e.navigator&&e.navigator.geolocation&&function(e,t){const n=e.constructor.name;for(let o=0;o<t.length;o++){const i=t[o],s=e[i];if(s){if(!b(r(e,i)))continue;e[i]=(e=>{const t=function(){return e.apply(this,E(arguments,n+"."+i))};return x(t,e),t})(s)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])})),e.__load_patch("PromiseRejectionEvent",((e,t)=>{function n(t){return function(n){X(e,t).forEach((r=>{const o=e.PromiseRejectionEvent;if(o){const e=new o(t,{promise:n.promise,reason:n.rejection});r.invoke(e)}}))}}e.PromiseRejectionEvent&&(t[y("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[y("rejectionHandledHandler")]=n("rejectionhandled"))})),e.__load_patch("queueMicrotask",((e,t,n)=>{Q(e,n)}))}(ce)},3747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SAMPLE_RATIO_ATTRIBUTE_KEY=t.BAGGAGE_AGENT_VERSION_KEY=t.BAGGAGE_AGENT_TYPE_KEY=t.BAGGAGE_APPLIANCE_ID_KEY=t.BAGGAGE_STUDENT_USERNAME_KEY=void 0,t.BAGGAGE_STUDENT_USERNAME_KEY="studentUsername",t.BAGGAGE_APPLIANCE_ID_KEY="applianceId",t.BAGGAGE_AGENT_TYPE_KEY="agentType",t.BAGGAGE_AGENT_VERSION_KEY="agentVersion",t.SAMPLE_RATIO_ATTRIBUTE_KEY="sample.ratio"},2352:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCaptureTabExceptionUrl=t.getChatWindowUrl=t.getBrowserType=t.getKernelFromPlatform=t.convertConnectionObject=t.twoObjectsMatch=t.isConnectedToInternet=t.reloadAllTabs=t.isBrowserWindowOpen=t.getOpenBrowserWindowCount=t.sleep=t.compareUrls=t.asyncRetryWithIncrementalDelay=t.waitForTabToLoad=t.getTabById=t.chromeIdentityGetAuthToken=t.executeScriptWrapper=t.isMv2Build=t.urlHasQueryParameters=t.stringIsEmpty=t.getActiveTab=t.captureScreenshot=t.ScreenshotRateLimitError=t.roughSizeOfObject=t.getStorage=t.configEndUnix=t.periodToNextDate=t.findSoonestStartingPeriod=t.getCurrentTimeForTimezone=t.find_active_period=t.DAY_INT_TO_STR_MAP=t.DAY_STR_TO_INT_MAP=t.getClassOwner=t.getTeacherIds=t.extractRequestUri=t.validURL=t.extractPort=t.extractURLPath=t.nowInSeconds=t.extractHostname=t.extractDomain=t.safeMapGet=t.is_active=t.removeHttp=t.isEmpty=void 0;const i=n(6619),s=o(n(4109)),a=n(786),c=n(5333),u=n(2790);t.isEmpty=e=>!e||!Object.keys(e).some((t=>void 0!==e[t])),t.removeHttp=e=>e.replace(/^https?:\/\//,""),t.is_active=(e,t)=>l(e,t),t.safeMapGet=(e,t,n)=>{var r;return null!==(r=e[t])&&void 0!==r?r:n},t.extractDomain=e=>{if(!(0,t.validURL)(e))return;let n=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0];return n=n.split(":")[0],n},t.extractHostname=e=>{if(!(0,t.validURL)(e))return;let n=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0];return n=n.split(":")[0],n=n.split("?")[0],n},t.nowInSeconds=()=>Math.floor(Date.now()/1e3),t.extractURLPath=e=>{if(!(0,t.validURL)(e))return;let n,r;if(e.indexOf("//")>0){const t=e.indexOf("//");r=e.indexOf("/",t+2),r>0&&(n=e.substring(r+1))}else r=e.indexOf("/"),r>0&&(n=e.substring(e.indexOf("/")+1));return r<0&&(n=""),"/"===(null==n?void 0:n.slice(-1))&&(n=n.slice(0,-1)),n},t.extractPort=function(e){if(!(0,t.validURL)(e))return;const n=Number((0,t.extractRequestUri)(e).split("/")[0].replace(":",""));return!isNaN(n)&&n>0?n:e.startsWith("https")?443:e.startsWith("http")?80:e.startsWith("ftp")?21:0},t.validURL=e=>{if((0,t.stringIsEmpty)(e))return!1;try{return new URL(e),!0}catch(t){return(0,u.logErrorInSentry)(t),console.error(`Invalid URL: ${e}`),!1}},t.extractRequestUri=e=>{if(!(0,t.validURL)(e))return;const n=(0,t.extractHostname)(e);return n?e.substring(e.indexOf(n)+n.length):""};const l=(e,n)=>{const r=(0,t.nowInSeconds)();return 0!==n.timeout&&n.timeout>r||!!(0,t.find_active_period)(e,n.periods)};t.getTeacherIds=e=>{let t=[];const n=e.teachers;return n&&(t=n.map((e=>e.id))),t},t.getClassOwner=e=>{const t=e.teacher_information;return t&&t.id?t.id:null},t.DAY_STR_TO_INT_MAP=(new Map).set("sun",0).set("mon",1).set("tue",2).set("wed",3).set("thur",4).set("fri",5).set("sat",6),t.DAY_INT_TO_STR_MAP=(new Map).set(7,"sun").set(1,"mon").set(2,"tue").set(3,"wed").set(4,"thur").set(5,"fri").set(6,"sat"),t.find_active_period=(e,n)=>{if(n){const r=i.DateTime.now().setZone(e),o=t.DAY_INT_TO_STR_MAP.get(r.weekday),s=100*r.hour+r.minute;for(const e of n)if(e.day===o&&s>=e.startTime&&s<e.endTime)return e}return null},t.getCurrentTimeForTimezone=(e,n=(0,t.nowInSeconds)())=>i.DateTime.fromSeconds(n).setZone(e).toJSDate(),t.findSoonestStartingPeriod=(e,n)=>{if(!n.length)return null;const r=(0,t.getCurrentTimeForTimezone)(e),o=n.filter((e=>!!e));if(0===o.length)return null;let i=o[0],s=(0,t.periodToNextDate)(r,o[0].startTime,o[0].day);return o.forEach((e=>{const n=(0,t.periodToNextDate)(r,e.startTime,e.day);n<s&&(i=e,s=n)})),{soonestPeriod:i,msUntilStart:s.valueOf()-r.valueOf()}},t.periodToNextDate=(e,n,r)=>{const o=i.DateTime.now().toJSDate(),s=Math.floor(n/100),a=n%100;o.setHours(s,a,0,0);const c=e.getDate();let u=e.getDate();if(r){const n=t.DAY_STR_TO_INT_MAP.get(r)-e.getDay();u=n>0?c+n:0===n&&o>e?c:c+7-n}else o<e&&(u=c+1);return o.setDate(u),o},t.configEndUnix=(e,n)=>{let r=n.timeout;const o=(0,t.find_active_period)(e,n.periods);if(o){const t=i.DateTime.now().setZone(e).set({hour:o.endTime/100,minute:o.endTime%100,second:0,millisecond:0}).toUnixInteger();r=Math.max(r,t)}return r},t.getStorage=(e,t)=>{chrome.storage.local.get([e],(e=>{t(e)}))},t.roughSizeOfObject=e=>{const t=[],n=[e];let r=0;for(;n.length;){const e=n.pop();if("boolean"==typeof e)r+=4;else if("string"==typeof e)r+=2*e.length;else if("number"==typeof e)r+=8;else if(e.byteLength>0)r+=e.byteLength;else if("object"==typeof e&&-1===t.indexOf(e)){t.push(e);for(const t in e)n.push(e[t])}}return r};class d extends Error{}t.ScreenshotRateLimitError=d,t.captureScreenshot=(e,t)=>new Promise(((n,r)=>{chrome.tabs.captureVisibleTab(e,{format:"jpeg",quality:t},(t=>{var o;if(chrome.runtime.lastError)return(null===(o=chrome.runtime.lastError.message)||void 0===o?void 0:o.includes("MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND"))?void r(new d("Exceeded MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND")):void r(chrome.runtime.lastError);chrome.tabs.query({active:!0,windowId:e},(e=>{1===e.length?n({image:t,tabId:e[0].id}):n({image:t,tabId:void 0})}))}))})),t.getActiveTab=()=>r(void 0,void 0,void 0,(function*(){return(yield chrome.tabs.query({active:!0,currentWindow:!0}))[0]})),t.stringIsEmpty=e=>!(null==e?void 0:e.trim().length),t.urlHasQueryParameters=e=>-1!==e.indexOf("?"),t.isMv2Build=()=>{var e,t;return(null===(e=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===e?void 0:e.getManifest)&&2===(null===(t=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===t?void 0:t.getManifest().manifest_version)},t.executeScriptWrapper=e=>r(void 0,void 0,void 0,(function*(){var n;try{if(!(0,t.isMv2Build)())return yield chrome.scripting.executeScript(e);if(e.files){let t=[];for(let n=0;n<e.files.length;n++){const r=e.files[n],o=yield chrome.tabs.executeScript(e.target.tabId,{file:r});t=t.concat(o)}return t}if(e.func){const t="lwScriptInjectFunction",n="lwScriptInjectFunctionArgs";let r=`var ${t} = ${e.func.toString()};\n`;return e.args&&(r+=`var ${n} = ${JSON.stringify(e.args)};\n`),r+=`${t}(${e.args?`...${n}`:""});`,yield chrome.tabs.executeScript(e.target.tabId,{code:r})}}catch(e){(null!==(n=null==e?void 0:e.message)&&void 0!==n?n:"").includes("Cannot access a chrome://")||((0,u.logErrorInSentry)(e),console.error("Failed to execute script:",e.message))}})),t.chromeIdentityGetAuthToken=e=>r(void 0,void 0,void 0,(function*(){return new Promise((t=>chrome.identity.getAuthToken(e,t)))})),t.getTabById=e=>r(void 0,void 0,void 0,(function*(){try{return yield chrome.tabs.get(e)}catch(e){}})),t.waitForTabToLoad=e=>new Promise((n=>{(0,t.getTabById)(e).then((t=>{if("complete"!==(null==t?void 0:t.status)){const t=(r,o)=>{r===e&&"complete"===(null==o?void 0:o.status)&&(chrome.tabs.onUpdated.removeListener(t),n())};chrome.tabs.onUpdated.addListener(t)}else n()}))})),t.asyncRetryWithIncrementalDelay=(e,n=3,o=1e3,i=5e3)=>r(void 0,void 0,void 0,(function*(){let r=0;for(;r<n;)try{const t=e(),n=new Promise(((e,t)=>{setTimeout((()=>t(new Error("Function timed out"))),i)})),o=yield Promise.race([t,n]);if(!o)throw Error("Retry failed:"+r);return o}catch(e){r++,yield(0,t.sleep)(r*o)}throw Error(`Function failed after ${n} retries`)})),t.compareUrls=(e,t,n={stripProtocol:!0})=>(0,s.default)(e,n)===(0,s.default)(t,n),t.sleep=e=>new Promise((t=>setTimeout(t,e))),t.getOpenBrowserWindowCount=()=>r(void 0,void 0,void 0,(function*(){return(yield chrome.windows.getAll()).length})),t.isBrowserWindowOpen=()=>r(void 0,void 0,void 0,(function*(){return(yield(0,t.getOpenBrowserWindowCount)())>0})),t.reloadAllTabs=(e=!1)=>r(void 0,void 0,void 0,(function*(){const t=yield chrome.tabs.query({});for(const n of t)n.id&&chrome.tabs.reload(n.id,{bypassCache:e})})),t.isConnectedToInternet=()=>r(void 0,void 0,void 0,(function*(){try{const e=yield fetch("http://clients3.google.com/generate_204");if(""===(yield e.text())&&204===e.status)return!0}catch(e){(0,u.logErrorInSentry)(e)}return!1})),t.twoObjectsMatch=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r++){const o=n[r];if(e[o]!==t[o])return!1}return!0},t.convertConnectionObject=e=>{const t=new a.Connection;return t.setAppFilteringDenied(e.app_filtering_denied),t.setCategoryid(e.categoryId),t.setDestip(e.destIp),t.setDestport(e.destPort),t.setDownload(e.download),t.setFinalConnectionObject(e.final_connection_object),t.setHwaddress(e.hwAddress),t.setHttphost(e.httpHost||""),t.setHttpRequestUrisList(e.http_request_uris),t.setLifetime(e.lifetime),t.setNoise(e.noise),t.setPackets(e.packets),t.setProtocol(e.protocol||0),t.setSourceip(e.sourceIp),t.setSubcategoryid(e.subCategoryId),t.setTag(e.tag),t.setTime(e.time),t.setUpload(e.upload),t.setUser(e.user||""),t.setVerdictApplicationRule(e.verdict_application_rule),t.setReportingtype(e.reportingType),t.setExtensionconnection(e.extensionConnection),t.setHostname(e.htmlTitle||""),t.setId(e.id),t.setAgent(e.agent||""),t.setHardware(String(e.agent_inside_network)),t.setTeacherid(e.teacherId),t.setResourceType(e.resource_type||""),t.setBypassCode(e.bypass_code||""),t.setBypassExpiryTime(e.bypass_expiry_time||0),t.setHtmltitle(e.htmlTitle||""),t.setAgentInsideNetwork(e.agent_inside_network||!1),t.setFilterType(e.filter_type||""),t.setDebugChromeVerdictIssued(e.debug__chrome_verdict_issued||!1),t.setDebugChromeRequestid(e.debug__chrome_requestId||""),t.setUseragent(e.useragent||""),t},t.getKernelFromPlatform=()=>r(void 0,void 0,void 0,(function*(){const{os:e}=yield chrome.runtime.getPlatformInfo();switch(e){case"win":return"NT";case"mac":return"XNU";case"linux":case"android":case"cros":return"Linux";case"openbsd":return"OpenBSD";default:return"unknown"}})),t.getBrowserType=(e="Chrome")=>{switch(e){case"Chrome":default:return c.BrowserTypes.chrome;case"Microsoft Edge":return c.BrowserTypes.edge}},t.getChatWindowUrl=()=>`chrome-extension://${chrome.runtime.id}/chat/index.html`,t.getCaptureTabExceptionUrl=()=>[(0,t.getChatWindowUrl)()]},5333:(e,t)=>{"use strict";var n,r,o,i,s,a,c,u,l,d,p,f,h,g,m,y,v,_,S,E,b,T,w;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserTypes=t.youtubeStrictSafesearch=t.companionWebGrpcUrl=t.CompanionFeatures=t.MessageTypes=t.LogLevel=t.LogLevelTypes=t.EventTypes=t.UniqueScheduleIds=t.SchedulesConstants=t.ScreenshotPersisterConstants=t.ConnectionsConstants=t.AuthenticateConstants=t.ContentAwareLicenseStatus=t.ContentAwareIECMessageTypes=t.ContentAwareConstants=t.DelegationReporting=t.DelegationConstants=t.SystemConfigConstants=t.CompanionConstants=t.MainConstants=t.TabsConstants=t.ConfigFetcherConstants=t.ChatConstants=t.ConfigConstants=t.VerdictStoreConstants=t.FallbackVerdictStoreConstants=t.FilteringConstants=t.FirestoreDocIds=t.KeepAliveConstants=t.FzboxConstants=t.DMSManagerConstants=t.UpdaterConstants=void 0,(w=t.UpdaterConstants||(t.UpdaterConstants={})).FcmMessagesCacheId="lw_updater_fcm_messages_cache_id",w.GeneralCacheId="lw_updater_general_cache_id",w.RegistrationCacheId="lw_updater_registration_cache",(T=t.DMSManagerConstants||(t.DMSManagerConstants={})).DmsDataCacheId="lw_dms_data_cache",T.DmsManagerConfigCacheId="lw_dms_manager_config_cache",T.CheckInDeviceInterval="lw_dms_check_in",T.RetryDMSRegTimeout="lw_retry_dms_registration_timeout",T[T.CheckInDeviceElapsed_ms=3e5]="CheckInDeviceElapsed_ms",(b=t.FzboxConstants||(t.FzboxConstants={}))[b.WalledGardenBasedInterval=3e4]="WalledGardenBasedInterval",b[b.DefaultPollingInterval=3e5]="DefaultPollingInterval",(t.KeepAliveConstants||(t.KeepAliveConstants={})).KeepAliveCacheId="lw_keep_alive_cache_id",(t.FirestoreDocIds||(t.FirestoreDocIds={})).ContentAware="ca",(E=t.FilteringConstants||(t.FilteringConstants={})).HandleVerdictQueueInterval="lw_handle_verdict_queue_interval",E.EvictOldResponsesInterval="lw_evict_old_responses",E.VerdictRawResponseCacheId="lw_verdict_raw_response_cache",E.FallbackVerdictsCacheId="lw_fallback_verdicts_cache",E.VerdictResponseTimeCacheId="verdict_response_time_cache",E.VerdictYoutubeQueryCacheId="verdict_youtube_query_cache",E.VerdictClientFallback="client_fallback",E.CustomHeaderCacheId="lw_custom_header_cache",E.CustomHeaderCacheCleanIntervalId="lw_custom_header_cache_interval_id",E[E.CustomHeaderCacheCleanInterval=3e5]="CustomHeaderCacheCleanInterval",E[E.CustomHeaderCacheExpireTime=36e5]="CustomHeaderCacheExpireTime",(t.FallbackVerdictStoreConstants||(t.FallbackVerdictStoreConstants={})).PurgeOldVerdictEntries="purge_old_verdict_entries",(S=t.VerdictStoreConstants||(t.VerdictStoreConstants={})).EvictOldResponsesInterval="lw_evict_old_responses",S.VerdictResponseCacheId="lw_verdict_response_cache",(_=t.ConfigConstants||(t.ConfigConstants={})).ConfigurationCacheId="lw_configuration_cache",_[_.ConfigLoadTimeout_ms=1e4]="ConfigLoadTimeout_ms",(v=t.ChatConstants||(t.ChatConstants={})).ChatDataCacheId="lw_chat_data_cache",v.OpenChatTimeout="lw_open_chat_timeout",(t.ConfigFetcherConstants||(t.ConfigFetcherConstants={})).ClassConfigRefreshTimeout="lw_class_config_refresh",(y=t.TabsConstants||(t.TabsConstants={})).FocusLockCheckTimeout="lw_tabs_focuslock_check",y.ScreenshotUploadInterval="lw_screenshot_upload_interval",y.TabsDataCacheId="lw_tabs_data_cache",(m=t.MainConstants||(t.MainConstants={})).PeriodicLoginInterval="lw_periodic_login",m.WhoamiLoginInterval="lw_whoami_login",m.FzboxPollInterval="lw_fzbox_poll",m.MainDataCacheId="lw_main_data_cache",m.DevDataCacheId="lw_dev_data_cache",m.LoadingConfiKey="lw_loading_config_key",m.RemainingUpdatesKey="lw_remaining_updates_key",m.DevBuildReloadedKey="lw_dev_build_reloaded_key",m[m.ResourceLimitThresholdCheckInterval=72e5]="ResourceLimitThresholdCheckInterval",(g=t.CompanionConstants||(t.CompanionConstants={})).CacheId="lw_companion_cache",g[g.MaxReconnectionAttempts=5]="MaxReconnectionAttempts",g[g.DeltaTimeout=5e3]="DeltaTimeout",g[g.MaxRetryRegistrationInterval_ms=3e4]="MaxRetryRegistrationInterval_ms",(t.SystemConfigConstants||(t.SystemConfigConstants={})).CacheId="lw_system_config_cache",(h=t.DelegationConstants||(t.DelegationConstants={})).CacheId="lw_delegation_config_cache",h.DelegationChangeScheduleId="lw_delegation_change_schedule_id",(f=t.DelegationReporting||(t.DelegationReporting={})).ALL="all",f.BLOCKED="blocked",f.NONE="none",(t.ContentAwareConstants||(t.ContentAwareConstants={})).CacheId="lw_content_aware_config_cache",(p=t.ContentAwareIECMessageTypes||(t.ContentAwareIECMessageTypes={})).login="LOGIN",p.logout="LOGOUT",p.isLoggedIn="IS_LOGGED_IN",p.resetConfig="RESET-CONFIG",p.UpdateDynamicConfig="UPDATE-CONFIG-ALL",(d=t.ContentAwareLicenseStatus||(t.ContentAwareLicenseStatus={})).active="ACTIVE",d.suspended="SUSPENDED",(l=t.AuthenticateConstants||(t.AuthenticateConstants={})).PartialFailedCacheId="lw_partial_failed_cache",l.AuthenticationData="lw_authentication_data_cache",l.AuthTokenKey="auth_token",(u=t.ConnectionsConstants||(t.ConnectionsConstants={})).ConnectionsCacheId="lw_connections_cache",u.ConnectionsUploadInterval="lw_Connections_upload_interval",u.TabsCacheId="lw_tabs_cache",u.UploadInfoCacheId="lw_upload_info_cache",u.mainFrameRequestType="main_frame",u.eventTypeSendHeaders="sendHeaders",u.eventTypeBeforeRequest="beforeRequest",u.eventTypeHeadersReceived="headersReceived",u.eventTypeCompleted="completed",(t.ScreenshotPersisterConstants||(t.ScreenshotPersisterConstants={})).LastScreenshotCacheId="last_screenshot_cache",(t.SchedulesConstants||(t.SchedulesConstants={})).SchedulesDataCacheId="lw_schedule_manager_data_cache_id",(c=t.UniqueScheduleIds||(t.UniqueScheduleIds={})).ConfigUpdate="config_update_with_delay",c.CaptureTabAndSend="capture_tab_and_send",c.SendRuntimeMessage="send_runtime_message",c.PrintBlockedMessage="print_blocked_message",c.CreateNewChromeTab="create_new_chrome_tab",(a=t.EventTypes||(t.EventTypes={})).CONFIG_UPDATE="CONFIG_UPDATE",a.OPEN_TAB="OPEN_TAB",a.CLOSE_TAB="CLOSE_TAB",a.MESSAGE="MESSAGE",a.CLASS_STARTED="CLASS_STARTED",a.POLICY_UPDATE="POLICY_UPDATE",a.INIT_P2P="INIT_P2P",(s=t.LogLevelTypes||(t.LogLevelTypes={})).Error="logging__error",s.Warning="logging__warning",s.Message="logging__message",s.Debug="logging__debug",(i=t.LogLevel||(t.LogLevel={})).INFO="INFO",i.WARN="WARN",i.ERROR="ERROR",i.DEBUG="DEBUG",(o=t.MessageTypes||(t.MessageTypes={})).InitOffscreenDocument="init_offscreen_socument_message",o.RegisterExtension="register_extension_with_native_agent",o.UnregisterExtension="unregister_extension_from_native_agent",o.RegisterClasswizeEventFail="register_extension_with_native_agent_classwize_events_fail",o.RegisterClasswizeEventMessage="register_extension_with_native_agent_classwize_events_Message",o.IsExtensionRegistered="is_extension_registered_with_native_agent",o.CompanionMessage="message_from_native_agent",o.CompanionErrorMessage="error_message_from_native_agent",o.RecoverCompanionStream="recover_companion_stream",o.RetryRegistration="retry_registration_with_native_agent",o.IpAddressChangeRoutine="ip_address_change_routine",o.TabsActivated="tabs_activated_message",o.UrlUpdatedInTab="url_updated_in_tab",o.P2PInitSignaler="p2p_init_signaler_message",o.P2PSetCloseTimeouts="p2p_set_close_timeouts_message",o.P2PGetScreenshot="p2p_get_screenshot_message",o.P2PGetTabs="p2p_get_tabs_message",o.UtilLocalIpUpdated="util_local_ip_updated_message",o.UtilResizeAndCompressImage="util_resize_and_compress_image",o.BroadcastWakeUpCall="cachescheduler_broadcast_wakeup_call",o.BroadcastScheduleTime="schedule-time-ee236fce-1426-4975-9d56-2ce4e8becd02",o.ChatBubbleStatus="chat_status",o.ChatInfo="chat_info",o.ChatGetLastMessage="last_chat_message",o.ChatClearLastMessage="clear_last_chat_message",o.UIGetStatus="ui_get_status",o.UIReloadConfig="ui_reload_config",o.UISendLogs="ui_send_logs",o.UserOverride="user_override",o.UpdaterNewMessage="updater_new_message",o.GetSafeguardVerdict="get_safe_guard_verdict",o.RedirectWebPage="redirect_web_page",o.EventMessage="event_service_message",o.InitAutoAuth="init_auto_auth",o.GetAuthCookie="get_auth_cookie",o.GetAuthToken="get_auth_token",o.UploadLogData="upload_log_data",o.UpdateOffscreenConfig="update_offscreen_config",o.MainConfigUpdated="main_config_updated",o.OffScreenLogMessage="Off_screen_log_message",o.GetManifestInfo="get_manifest_info",o.Token="TOKEN",o.ChatConfigUpdate="CHAT_CONFIG_UPDATE",o.UpdateTotalUnreadCount="UPDATE_TOTAL_UNREAD_COUNT",o.OpenChatClassroom="OPEN_CHAT_CLASSROOM",o.GoogleAuthenticate="GOOGLE_AUTHENTICATE",o.NativeTokenAuthenticate="NATIVE_TOKEN_AUTHENTICATE",o.GetBrowserType="get_browser_type",o.GetBrowserDetails="get_browser_details",o.CheckIfDomainIsBlocked="check_if_domain_is_blocked",o.ExtractFallbackDomains="extract_fallback_domains",o.LogMessage="log_message",o.InitOpenTelemetry="initialize-open-telemetry-client",o.StartOTELSpan="start-open-telemetry-span",o.SetOTELSpanOkay="set-open-telemetry-span-is-okay",o.RecordOTELSpanException="record-open-telemetry-span-exception",o.EndOTELSpan="end-open-telemetry-span",o.SendOTELLogs="send-open-telemetry-logs",o.CloseOTEL="shutdown-open-telemetry-client",o.SentryGetUserDetails="sentry-get-user-details",o.ChatLogMessage="chat-log-message",(r=t.CompanionFeatures||(t.CompanionFeatures={})).companion="companion",r.companionLite="companion_lite",r.proxyFilter="proxy_filter",r.dns_filter="dns_filter",r.classroom="classroom",r.liteModeEnabled="companion-mode-lite-enabled",t.companionWebGrpcUrl="http://127.0.0.1:5769",t.youtubeStrictSafesearch="STRICT",(n=t.BrowserTypes||(t.BrowserTypes={})).chrome="chrome",n.edge="edge"},8148:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1658);class o{static setServerTimeStamp(e){e<this.lastServerTimeStamp?(0,r.logging__debug)("The server timestamp is behind last server time by ",e-this.lastServerTimeStamp," ms"):(this.lastServerTimeStamp=e,this.relativeTimeStart=Date.now())}static now(){const e=Date.now()-this.relativeTimeStart;return this.lastServerTimeStamp+e}}t.default=o,o.lastServerTimeStamp=Date.now(),o.relativeTimeStart=Date.now()},5324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2790);(0,r.InitSentry)((0,r.getExtensionDetails)()),(0,r.updateSentryUserDetails)()},2790:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sentryErrorEventHandler=t.updateSentryUserDetails=t.setSentryUserDetails=t.setPostInitRelease=t.getReleaseString=t.getExtensionDetails=t.logErrorInSentry=t.isExtensionError=t.InitSentry=t.InitSentryCoexist=t.sharedSentryConfig=void 0;const a=i(n(3069)),c=n(3069),u=n(5333);let l;t.sharedSentryConfig={dsn:"https://c17cd3300c4e109ad958146b698040aa@o4507960794546176.ingest.us.sentry.io/4507960797102080",tracesSampleRate:1,sampleRate:1,ignoreErrors:["Could not establish connection. Receiving end does not exist."]},t.InitSentryCoexist=e=>{const n=(0,t.getReleaseString)(e),r=(0,c.getDefaultIntegrations)({}).filter((e=>!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(e.name))),o={transport:a.makeFetchTransport,stackParser:a.defaultStackParser,integrations:r,release:n},i=new c.BrowserClient(Object.assign(Object.assign({},t.sharedSentryConfig),o));l=new c.Scope,l.setClient(i),i.init()},t.InitSentry=e=>{const n=(0,t.getReleaseString)(e);a.init(Object.assign(Object.assign({},t.sharedSentryConfig),{release:n}))},t.isExtensionError=e=>{const t=`chrome-extension://${chrome.runtime.id}/`;return e.includes(t)},t.logErrorInSentry=e=>l?l.captureException(e):a.captureException(e),t.getExtensionDetails=()=>{var e;if(void 0===(null===(e=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===e?void 0:e.getManifest))return;const t=chrome.runtime.getManifest();return{extensionVersion:t.version,extensionName:t.name,buildENV:"production"}},t.getReleaseString=e=>{var t;if(!(e&&e.extensionVersion&&e.extensionName&&e.buildENV))return;const n=null==e?void 0:e.extensionVersion,r=null===(t=null==e?void 0:e.extensionName)||void 0===t?void 0:t.toLowerCase().replace(/ /g,"-");let o="prod";return"development"===(null==e?void 0:e.buildENV)&&(o="local-dev"),`${r}.${o}@${n}`},t.setPostInitRelease=e=>{const n=(0,t.getReleaseString)(e),r=e=>(e.release=n,e);a.getGlobalScope().addEventProcessor(r),a.getCurrentScope().addEventProcessor(r),a.addEventProcessor(r)},t.setSentryUserDetails=e=>{e.userIdentifier&&e.applianceId&&(l?(l.setUser({id:e.userIdentifier}),l.setTag("applianceId",e.applianceId)):(a.setUser({id:e.userIdentifier}),a.setTag("applianceId",e.applianceId)))},t.updateSentryUserDetails=function(){return s(this,void 0,void 0,(function*(){chrome.runtime.sendMessage({type:u.MessageTypes.SentryGetUserDetails},(e=>{e&&(0,t.setSentryUserDetails)(e)}))}))},t.sentryErrorEventHandler=function(e){e.error&&(0,t.isExtensionError)(e.filename)&&(0,t.logErrorInSentry)(e.error)}},6981:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(5635),s=n(1458),a=n(8776),c=n(1658),u=n(5333),l=o(n(6131)),d=o(n(1796)),p=n(2790);class f extends l.default{connect(){f.isConnected||f.connectToClasswizeStream()}disconnect(e=!1){f.keepReconnecting=e,f.closeStream()}static connectToClasswizeStream(){(0,c.logging__message)("Connecting to Classwize Event Service"),f.eventStream=f.eventClient.receiveEvents(new s.Empty),f.keepReconnecting=!0,f.eventStream.on("data",(e=>{var t;const n=null===(t=e.getMessages())||void 0===t?void 0:t.toObject();if(n){const e=Object.keys(a.EventType).find((e=>a.EventType[e]===n.event));f.handleClasswizeEvent(u.EventTypes[e],n)}})).on("end",(e=>{(0,c.logging__warning)(`end: ${e}`),0!=(null==e?void 0:e.code)&&((0,c.logging__warning)("Classwize Event Service stream has been terminated"),f.keepReconnecting&&f.reconnectToClasswize())})),f.isConnected=!0}static reconnectToClasswize(){return r(this,void 0,void 0,(function*(){f.closeStream(),setTimeout((()=>{1===d.default.getActiveEventServiceType()&&f.connectToClasswizeStream()}),1e3)}))}static closeStream(){f.isConnected&&(f.eventStream.cancel(),f.isConnected=!1)}static handleClasswizeEvent(e,t){let n={};try{n=JSON.parse(t.value)}catch(e){(0,p.logErrorInSentry)(e),n={}}l.default.sendEventToServiceWorker(e,n)}}t.default=f,f.eventClient=new i.ClasswizeApiClient(u.companionWebGrpcUrl),f.isConnected=!1,f.keepReconnecting=!0},1894:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionClient=void 0;const i=n(409),s=n(7518),a=n(5333),c=n(5570),u=o(n(1796));class l{static registerExtension(){return r(this,void 0,void 0,(function*(){const e=yield c.OffscreenManager.sendMesage({type:a.MessageTypes.GetManifestInfo});return!!e&&(yield this.registrationHandler(e.name,e.version))}))}static registrationHandler(e,t){return r(this,void 0,void 0,(function*(){if(this.isConnected)return;const n=new i.CompanionRegistrationRequest;return n.setName(e),n.setVersion(t),this.keepReconnecting=!0,this.companionStream=this.companionClient.registerCompanion(n),new Promise((e=>{this.companionStream.on("data",(t=>{var n,r;this.nReconnectionAttempts=0;const o=t.getVersion(),i=null!==(r=null===(n=t.getEnrolmentdetails())||void 0===n?void 0:n.toObject())&&void 0!==r?r:void 0;let s=!1,d=!1;i&&l.isValidEnrolmentDetails(i)&&(s=!0,d=i.enabledfeaturesList.includes(a.CompanionFeatures.companion)),s&&u.default.setActiveEventServiceClient(1),c.OffscreenManager.sendMesage({type:a.MessageTypes.CompanionMessage,nativeAgentVersion:o,enrolmentDetails:i,companionStatus:{companionAvailable:!0,companionEnrolled:s,companionEnabled:d}}),this.isConnected||(this.isConnected=!0,e(!0))})).on("end",(t=>{0!=(null==t?void 0:t.code)&&(c.OffscreenManager.sendMesage({type:a.MessageTypes.CompanionErrorMessage,status:t,extensionIsRegistered:l.isConnected}),u.default.setActiveEventServiceClient(0),this.keepReconnecting&&this.reconnectToNativeAgent(),this.isConnected||e(!1))}))}))}))}static unregisterExtension(e=!1){this.keepReconnecting=e;const t=l.isConnected;this.closeStream(),c.OffscreenManager.sendMesage({type:a.MessageTypes.CompanionErrorMessage,extensionIsRegistered:t}),u.default.setActiveEventServiceClient(-1)}static isValidEnrolmentDetails(e){return!!(e&&e.username&&e.applianceid&&e.devicetoken&&e.region&&e.enabledfeaturesList)}static reconnectToNativeAgent(){return r(this,void 0,void 0,(function*(){this.closeStream(),setTimeout((()=>{this.keepReconnecting&&l.registerExtension()}),l.getReconnectionTimeout())}))}static closeStream(){this.isConnected&&(this.companionStream.cancel(),this.isConnected=!1)}static getReconnectionTimeout(){return this.nReconnectionAttempts>=a.CompanionConstants.MaxReconnectionAttempts?(this.nReconnectionAttempts=0,a.CompanionConstants.MaxRetryRegistrationInterval_ms):(this.nReconnectionAttempts++,this.nReconnectionAttempts*a.CompanionConstants.DeltaTimeout)}static connected(){return this.isConnected}static getCompanionClient(){return this.companionClient}}t.CompanionClient=l,l.companionClient=new s.CompanionApiClient(a.companionWebGrpcUrl),l.isConnected=!1,l.keepReconnecting=!0,l.nReconnectionAttempts=0},1433:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionModeReportingClient=void 0;const r=n(5333),o=n(409),i=n(7518);class s{static init(){this.consoleLogStream=new i.CompanionApiClient(r.companionWebGrpcUrl).consoleLogStream(),this.initialised=!0}static sendConsoleLogToNativeAgent(e,t){this.initialised||this.init();const n=new o.ConsoleLog;n.setLog(e),n.setLoglevel(t),this.consoleLogStream.write(n)}}t.CompanionModeReportingClient=s,s.initialised=!1},1796:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(6981)),i=r(n(6500)),s=n(1658);class a{static getEventClient(e){switch(a.activeEventSourceType=e,e){case 0:return a.eventServiceClient;case 1:return a.classwizeServiceClient;default:return void(0,s.logging__debug)(`No event client available for this type: ${e}`)}}static getActiveEventServiceType(){return a.activeEventSourceType}static reconnectToEventSourceIfneeded(e,t){const n=0===a.activeEventSourceType&&((null==e?void 0:e.user)!==(null==t?void 0:t.user)||(null==e?void 0:e.deviceId)!==(null==t?void 0:t.deviceId)||(null==e?void 0:e.eventServiceUrl)!==(null==t?void 0:t.eventServiceUrl));a.setActiveEventServiceClient(a.getActiveEventServiceType(),n)}static setActiveEventServiceClient(e,t=!1){(a.getActiveEventServiceType()!==e||t)&&(a.activeEventClient&&a.activeEventClient.disconnect(),a.activeEventClient=a.getEventClient(e),a.activeEventClient&&a.activeEventClient.connect())}}t.default=a,a.activeEventSourceType=0,a.eventServiceClient=i.default.generate(),a.classwizeServiceClient=o.default.generate()},6500:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3919),s=n(1658),a=n(5333),c=n(5570),u=n(2352),l=o(n(6131)),d=o(n(8148)),p=n(2790);class f extends l.default{connect(){f.intiateServiceConnection()}disconnect(){f.disconnectFromEventService()}static disconnectFromEventService(){(0,s.logging__message)("Disconnecting from Event V2 Service"),f.eventService&&(f.eventService.close(),f.eventService=void 0)}static intiateServiceConnection(){return r(this,void 0,void 0,(function*(){const e=c.OffscreenManager.getOffscreenConfig();if(!e)return(0,s.logging__warning)("User config does not exist"),void f.disconnectFromEventService();const t=e.user,n=e.deviceId,o=e.eventServiceUrl,l=(0,u.stringIsEmpty)(t),d=(0,u.stringIsEmpty)(n),p=(0,u.stringIsEmpty)(o);if(l||d||p)return(0,s.logging__warning)("User details are not valid"),(0,s.logging__debug)(`Details ==> user: ${t}, device: ${n}, eventServiceUrl: ${o}`),void f.disconnectFromEventService();const h=`${o}/events/v2/appliance/${n}/recipient/${t}?events=${e.isTeacher?"CONFIG_UPDATE":"CONFIG_UPDATE,OPEN_TAB,CLOSE_TAB,MESSAGE,CLASS_STARTED,POLICY_UPDATE,INIT_P2P"}`;void 0===f.eventService?((0,s.logging__message)("Connecting to v2 Event Service"),f.eventService=new EventSource(h,{withCredentials:!0}),f.eventService.onerror=function(e){return r(this,void 0,void 0,(function*(){(0,s.logging__error)("Error with event service",e),f.disconnectFromEventService();const t=yield c.OffscreenManager.getAuthCookie();if(!f.eventServiceRetriedWithExistingAuth&&t){const e=(0,i.getRandomInt)(0,5);(0,s.logging__message)(`Retrying with existing auth in ${e} seconds`),setTimeout(f.retryEventServiceWithExistingAuth,1e3*e)}else if(f.eventServiceRetriedWithNewAuth)f.retryEventServiceAfterTimeout();else{let e=0;const t=(new Date).toDateString();f.lastAuthAttemptDate&&f.lastAuthAttemptDate===t||(e=(0,i.getRandomInt)(0,5)),f.lastAuthAttemptDate=t,(0,s.logging__message)(`Retrying with new auth in ${e} seconds`),setTimeout(f.retryEventServiceWithNewAuth,1e3*e)}}))},f.eventService.onopen=function(){(0,s.logging__message)("Connected to event-service"),f.eventServiceRetriedWithExistingAuth=!1,f.eventServiceRetriedWithNewAuth=!1,clearTimeout(f.reauthTimeoutId),f.eventServiceRetryTimeoutSeconds=1},f.eventService.addEventListener(a.EventTypes.CONFIG_UPDATE,(function(e){f.handleNewEvent(a.EventTypes.CONFIG_UPDATE,e)}),!1),f.eventService.addEventListener(a.EventTypes.OPEN_TAB,(function(e){f.handleNewEvent(a.EventTypes.OPEN_TAB,e)}),!1),f.eventService.addEventListener(a.EventTypes.CLOSE_TAB,(function(e){f.handleNewEvent(a.EventTypes.CLOSE_TAB,e)}),!1),f.eventService.addEventListener(a.EventTypes.MESSAGE,(function(e){f.handleNewEvent(a.EventTypes.MESSAGE,e)}),!1),f.eventService.addEventListener(a.EventTypes.CLASS_STARTED,(function(e){f.handleNewEvent(a.EventTypes.CLASS_STARTED,e)}),!1),f.eventService.addEventListener(a.EventTypes.POLICY_UPDATE,(function(e){setTimeout((()=>{f.handleNewEvent(a.EventTypes.POLICY_UPDATE,e)}),1e3)}),!1),f.eventService.addEventListener(a.EventTypes.INIT_P2P,(function(e){f.handleNewEvent(a.EventTypes.INIT_P2P,e)}),!1)):(0,s.logging__message)("aborting connection attempt to event service, already connected")}))}static retryEventServiceWithExistingAuth(){return r(this,void 0,void 0,(function*(){try{f.eventServiceRetriedWithExistingAuth=!0,f.intiateServiceConnection()}catch(e){(0,p.logErrorInSentry)(e),f.retryEventServiceAfterTimeout()}}))}static retryEventServiceWithNewAuth(){return r(this,void 0,void 0,(function*(){try{yield c.OffscreenManager.initAutoAuth();const e=f.getReauthAllowedTimer();f.reauthTimeoutId=setTimeout((()=>{f.eventServiceRetriedWithNewAuth=!1}),1e3*e+f.getReauthJitterMs()),f.eventServiceRetriedWithNewAuth=!0,f.intiateServiceConnection()}catch(e){(0,p.logErrorInSentry)(e),(0,s.logging__error)("Failed to authenticate before retrying to connect to event-service, triggering events retry again after timeout"),f.retryEventServiceAfterTimeout()}}))}static retryEventServiceAfterTimeout(){(0,s.logging__warning)("v2 Event service connect error; sleeping for "+f.eventServiceRetryTimeoutSeconds+" seconds"),f.eventServiceRetryTimeoutSeconds*=2,f.eventServiceRetryTimeoutSeconds>=64&&(f.eventServiceRetryTimeoutSeconds=64),setTimeout(f.intiateServiceConnection,1e3*f.eventServiceRetryTimeoutSeconds)}static handleNewEvent(e,t){f.eventServiceRetryTimeoutSeconds=1,(0,s.logging__debug)("Event Message Received",t);let n={};try{n=JSON.parse(t.data)}catch(e){return n={},(0,p.logErrorInSentry)(e),void(0,s.logging__error)("Error parsing the event data",e)}this.adjustVirtualClock(n),l.default.sendEventToServiceWorker(e,n)}static adjustVirtualClock({header:e={}}={}){const{timestampEpochMs:t}=e;t&&d.default.setServerTimeStamp(Number(t))}static getReauthAllowedTimer(){return f.reauthAllowedTimerSeconds||f.REAUTH_ALLOWED_TIMER_SECONDS}static getReauthJitterMs(){return(0,i.getRandomInt)(0,9e4)}}t.default=f,f.REAUTH_ALLOWED_TIMER_SECONDS=600,f.reauthAllowedTimerSeconds=f.REAUTH_ALLOWED_TIMER_SECONDS,f.eventService=void 0,f.eventServiceRetryTimeoutSeconds=1,f.eventServiceRetriedWithExistingAuth=!1,f.eventServiceRetriedWithNewAuth=!1,f.reauthTimeoutId=void 0,f.lastAuthAttemptDate=void 0},6131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5333),o=n(5570);t.default=class{static generate(){return new this}static sendEventToServiceWorker(e,t){o.OffscreenManager.sendMesage({type:r.MessageTypes.EventMessage,eventType:e,data:t})}}},293:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2790),i=n(1658);class s{static loadBlockedDomains(){return r(this,void 0,void 0,(function*(){if(this.init)return;const e=chrome.runtime.getURL("offscreen/assets/domains.json");try{const t=yield fetch(e);if(t.ok){const e=yield t.json();this.fallbackDomains=new Set(e.domains)}}catch(e){(0,o.logErrorInSentry)(e),(0,i.logging__error)("Fetch threw an exception while retrieving fallback.blocked domains",e)}this.init=!0,this.cachedCallbacks.forEach((e=>{e()})),this.cachedCallbacks=[]}))}static getFallbackDomainNumber(){return r(this,void 0,void 0,(function*(){return yield this.waitTillDomainsAreLoaded(),this.fallbackDomains?this.fallbackDomains.size:-1}))}static domainIsBlocked(e){var t;return r(this,void 0,void 0,(function*(){return yield this.waitTillDomainsAreLoaded(),null===(t=this.fallbackDomains)||void 0===t?void 0:t.has(e)}))}static waitTillDomainsAreLoaded(){return r(this,void 0,void 0,(function*(){return new Promise((e=>{!0===this.init?e():this.cachedCallbacks.push((()=>{e()}))}))}))}}t.default=s,s.cachedCallbacks=[],s.init=!1},5570:function(e,t,n){"use strict";var r,o,i,s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OffscreenManager=void 0,n(5324);const c=n(1894),u=n(5333),l=a(n(1694)),d=n(3919),p=a(n(1796)),f=a(n(2597)),h=a(n(293)),g=a(n(5161)),m=a(n(6526)),y=n(2790);class v{static init(e=!1,t){v.initialised||(v.initialised=!0,console.log("Initiating the offscreen doc..."),v.isMv2=e,v.registerEventHandlers(),v.sendMessageCallback=t,l.default.init(),h.default.loadBlockedDomains())}static getOffscreenConfig(){return v.offscreenConfig}static offscreenConfigUpdated(e,t){p.default.reconnectToEventSourceIfneeded(e,t),v.onConfigUpdateEventHandler&&v.onConfigUpdateEventHandler(e,t)}static registerConfigUpdateEventHandler(e){v.onConfigUpdateEventHandler=e}static sendLocalIpMessage(e){v.sendMesage({type:u.MessageTypes.UtilLocalIpUpdated,localIpAddress:e})}static registerEventHandlers(){v.isMv2||chrome.runtime.onMessage.addListener(((e,t,n)=>v.handleMesage(e,n)))}static getUserIP(){v.localIpPeerConnection&&"closed"!==v.localIpPeerConnection.iceConnectionState||(v.localIpPeerConnection&&(v.localIpPeerConnection.onicecandidate&&(v.localIpPeerConnection.onicecandidate=null),v.localIpPeerConnection=void 0),v.localIpPeerConnection=(0,d.getLocalIpPeerConnection)(v.sendLocalIpMessage)),v.routineIPchangeCheck()}static routineIPchangeCheck(){v.ipChangeRoutineTimeoutId||(v.ipChangeRoutineTimeoutId=setTimeout((()=>{v.getUserIP(),v.ipChangeRoutineTimeoutId=null}),3e5))}static handleMesage(e,t){let n=!1;switch(e.type){case u.MessageTypes.InitOffscreenDocument:v.init();break;case u.MessageTypes.InitOpenTelemetry:g.default.init(e.manifest,null==e?void 0:e.config);break;case u.MessageTypes.StartOTELSpan:t(g.default.startSpan(e.name,e.kind,e.instrumentationScope,e.traceId,e.attributes));break;case u.MessageTypes.SetOTELSpanOkay:g.default.setSpanOkay(e.key);break;case u.MessageTypes.RecordOTELSpanException:g.default.recordException(e.key,e.error);break;case u.MessageTypes.EndOTELSpan:g.default.endSpan(e.key);break;case u.MessageTypes.SendOTELLogs:g.default.sendLog(e.body,e.severity);break;case u.MessageTypes.CloseOTEL:g.default.close();break;case u.MessageTypes.RegisterExtension:c.CompanionClient.registerExtension().then(t),n=!0;break;case u.MessageTypes.UnregisterExtension:c.CompanionClient.unregisterExtension();break;case u.MessageTypes.LogMessage:f.default.processLogMessage(e.msg,e.logLevel);break;case u.MessageTypes.UploadLogData:(()=>{s(this,void 0,void 0,(function*(){const n=yield f.default.uploadLogData(e.data);t(n)}))})(),n=!0;break;case u.MessageTypes.IpAddressChangeRoutine:v.getUserIP();break;case u.MessageTypes.UpdateOffscreenConfig:{const t=v.offscreenConfig;v.offscreenConfig=e.config,v.offscreenConfigUpdated(t,e.config);break}case u.MessageTypes.GetBrowserDetails:t(m.default.getParser(window.navigator.userAgent).getResult());break;case u.MessageTypes.CheckIfDomainIsBlocked:(()=>{s(this,void 0,void 0,(function*(){const n=yield h.default.domainIsBlocked(e.domain);t(n)}))})(),n=!0;break;case u.MessageTypes.ExtractFallbackDomains:(()=>{s(this,void 0,void 0,(function*(){const e=yield h.default.getFallbackDomainNumber();t(e)}))})(),n=!0;break;case u.MessageTypes.P2PInitSignaler:l.default.initSignaler(e.signalToken,e.channelName,e.remotePeerId,e.peerId,e.iceServers);break;case u.MessageTypes.P2PSetCloseTimeouts:l.default.setCloseTimeouts(e.timezone,e.deviceChannelId,e.activeConfigurations);break;case u.MessageTypes.UtilResizeAndCompressImage:(()=>{s(this,void 0,void 0,(function*(){const n=yield(0,d.resizeAndCompressImage)(e.image,e.maxWidth,e.compressQuality);t({processedImage:n})}))})(),n=!0;break;case u.MessageTypes.BroadcastScheduleTime:v.isMv2&&setTimeout((()=>{v.sendMesage({type:u.MessageTypes.BroadcastWakeUpCall})}),e.timeInMs)}return v.isMv2&&!n&&t(),n}static initAutoAuth(){return s(this,void 0,void 0,(function*(){yield v.sendMesage({type:u.MessageTypes.InitAutoAuth})}))}static getAuthCookie(){return s(this,void 0,void 0,(function*(){return v.sendMesage({type:u.MessageTypes.GetAuthCookie})}))}static getAuthToken(e=!1){return s(this,void 0,void 0,(function*(){return v.sendMesage({type:u.MessageTypes.GetAuthToken,refreshToken:e})}))}static sendMesage(e){return s(this,void 0,void 0,(function*(){return v.isMv2?yield new Promise((t=>{v.sendMessageCallback&&v.sendMessageCallback(e,(e=>t(e)))})):yield chrome.runtime.sendMessage(e)}))}}t.OffscreenManager=v,v.initialised=!1,v.isMv2=!1,v.ipChangeRoutineTimeoutId=null,v.registerConfigUpdateEventHandler(((e,t)=>{if((null==t?void 0:t.extensionVersion)===(null==e?void 0:e.extensionVersion)&&(null==t?void 0:t.extensionName)===(null==e?void 0:e.extensionName))return;const n={extensionName:null==t?void 0:t.extensionName,extensionVersion:null==t?void 0:t.extensionVersion,buildENV:"production"},r={userIdentifier:null==t?void 0:t.user,applianceId:null==t?void 0:t.applianceId};(0,y.setPostInitRelease)(n),(0,y.setSentryUserDetails)(r)})),(null===(r=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===r?void 0:r.getManifest)&&2===(null===(i=null===(o=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===o?void 0:o.getManifest())||void 0===i?void 0:i.manifest_version)||v.init()},2597:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5333),i=n(1894),s=n(1433),a=n(6326);class c{static processLogMessage(e,t){var n,r,u,l,d,p,f;if(c.lastSavedLog=a.LogStorageHandler.insertLogData(e),c.companionConnected!==i.CompanionClient.connected()&&(c.companionConnected=i.CompanionClient.connected(),c.companionConnected))for(;null===(n=c.lastLogWrittenToFile)||void 0===n?void 0:n.nextNode;){c.lastLogWrittenToFile=null!==(u=null===(r=c.lastLogWrittenToFile)||void 0===r?void 0:r.nextNode)&&void 0!==u?u:null;const e=null!==(d=null===(l=c.lastLogWrittenToFile)||void 0===l?void 0:l.data)&&void 0!==d?d:"";e&&s.CompanionModeReportingClient.sendConsoleLogToNativeAgent(e,o.LogLevel.INFO)}c.companionConnected&&(s.CompanionModeReportingClient.sendConsoleLogToNativeAgent(e,t),c.lastLogWrittenToFile=c.lastSavedLog),(null===(p=c.lastLogWrittenToFile)||void 0===p?void 0:p.deleted)&&(c.lastLogWrittenToFile=a.LogStorageHandler.getLogEntriesHead()),(null===(f=c.lastLogUploaded)||void 0===f?void 0:f.deleted)&&(c.lastLogUploaded=a.LogStorageHandler.getLogEntriesHead())}static uploadLogData(e){var t,n;return r(this,void 0,void 0,(function*(){const r=yield a.LogStorageHandler.uploadLogData(e,null!==(n=null===(t=c.lastLogUploaded)||void 0===t?void 0:t.nextNode)&&void 0!==n?n:null);return c.lastLogUploaded=c.lastSavedLog,r}))}}t.default=c,c.lastSavedLog=null,c.lastLogUploaded=null,c.lastLogWrittenToFile=null,c.companionConnected=!1},6326:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogStorageHandler=void 0;const i=n(5570),s=n(2790),a=n(1658),c=o(n(4834));class u{static insertLogData(e){return this.logEntries.insert(e)}static uploadLogData(e,t){var n;return r(this,void 0,void 0,(function*(){const r=this.getLogs(t),o=e.username,c=e.applianceId,u=e.filename,l=e.uploadUrl;if(0===r.length)return!0;const d=Date.now()/1e3;let p=yield i.OffscreenManager.getAuthCookie();if((null!==(n=null==p?void 0:p.expirationDate)&&void 0!==n?n:0)<=d&&(yield i.OffscreenManager.initAutoAuth(),p=yield i.OffscreenManager.getAuthCookie()),!(c&&o&&r&&u))return(0,a.logging__error)("Failed to upload debug logs due to missing properties. "+JSON.stringify({applianceId:!!c,username:!!o,logsToUpload:!!r,remoteFilename:!!u})),!1;try{const e=yield fetch(l,{credentials:"include",method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({appliance_id:c,username:o,logs_to_upload:r,file_name:u})});if(e.ok)return(0,a.logging__message)("Log data uploaded"),this.logEntries.clean(),!0;(0,a.logging__error)("Failed to upload log data",e.status)}catch(e){(0,s.logErrorInSentry)(e),(0,a.logging__error)("Fetch threw an exception while uploading log data",e)}return!1}))}static storageIsEmpty(){return this.logEntries.empty()}static getLogEntriesHead(){return this.logEntries.getHeadNode()}static getLogs(e=null){return this.logEntries.toString(e)}static clean(){this.logEntries.clean()}}t.LogStorageHandler=u,u.logEntries=new c.default},4834:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListNode=void 0;class n{constructor(e){this.nextNode=null,this.data=e,this.nextNode=null,this.deleted=!1}}t.ListNode=n,t.default=class{constructor(){this.head=null,this.tail=null,this.nMaxListEntries=2e3,this.nEntriesToDelete=500,this.linkedListSize=0}insert(e){const t=new n(e);if(0===this.linkedListSize)this.head=this.tail=t;else if(this.tail){if(this.linkedListSize>=this.nMaxListEntries)for(let e=0;e<this.nEntriesToDelete;e++)this.delete();this.tail.nextNode=t,this.tail=t}return this.linkedListSize++,t}clean(){for(;0!==this.linkedListSize;)this.delete()}empty(){return 0===this.linkedListSize}delete(){if(!this.head)return;if(this.head.deleted=!0,1===this.linkedListSize)return this.head=this.tail=null,void this.linkedListSize--;const e=this.head.nextNode;e&&(this.head=e,this.linkedListSize--)}size(){return this.linkedListSize}getHeadNode(){return this.head}toString(e=null){let t=this.head;null===e||e.deleted||(t=e);let n="";for(;t;)n+=t.data+"\n",t=t.nextNode;return n}}},2722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircuitBreakerSampler=void 0;const r=n(9827);t.CircuitBreakerSampler=class{constructor(e){this.root=e.root,this.rateLimiter=e.rateLimiter}shouldSample(e,t,n,o,i,s){return this.rateLimiter&&!this.rateLimiter.tryRemoveTokens(1)?{decision:r.SamplingDecision.NOT_RECORD}:this.root.shouldSample(e,t,n,o,i,s)}toString(){return"CircuitBreakerSampler"}}},5161:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(9827),s=n(6683),a=n(2445),c=n(2679),u=n(5360),l=n(4822),d=n(8990),p=n(8712),f=n(5147),h=n(1658),g=n(8264),m=n(2722),y=n(3121),v=o(n(8148)),_=n(5570),S=n(9113);class E{static init(e,t){return r(this,void 0,void 0,(function*(){if(!e||!t)return(0,h.logging__error)("OTEL client: Invalid call, config and manifest must be provided"),void(this.initialized&&this.close());if(this.initialized&&!this.hasConfigChanged(t))return void(0,h.logging__debug)("OTEL client: OpenTelemetry client has already been initialized and config has not changed. Skipping re-initialization.");if(!t.enabled)return void(this.initialized&&this.close());(0,h.logging__message)("OTEL client: Successfully initialized or Updated"),u.context.disable();const n=new g.ZoneContextManager;u.context.setGlobalContextManager(n),n.enable(),this.rateLimiter=new f.RateLimiter({tokensPerInterval:t.rateLimitPerHour||1e3,interval:"hour"}),this.initialized=!0,this.config=t,this.manifest=e,this.startTracerProvider().then((()=>{this.exporterErrorHandler()})).catch((e=>{(0,h.logging__error)("OTEL client: Failed to start",e),this.close()}))}))}static hasConfigChanged(e){return!(0,y.isEqual)(this.config,e)}static collectorConfig(e="/traces"){var t;return r(this,void 0,void 0,(function*(){const n=this.config,r=yield _.OffscreenManager.getAuthToken();return(null===(t=n.endpoint)||void 0===t?void 0:t.baseUrl)?{url:n.endpoint.baseUrl+e,headers:{Authorization:`Agent-Bearer ${r}`}}:{}}))}static batchProcessorConfig(){var e,t,n,r;const o=this.config;return{maxExportBatchSize:null===(e=o.batchProcessor)||void 0===e?void 0:e.batchSize,scheduledDelayMillis:null===(t=o.batchProcessor)||void 0===t?void 0:t.scheduledDelayMillis,maxQueueSize:null===(n=o.batchProcessor)||void 0===n?void 0:n.maxQueueSize,exportTimeoutMillis:null===(r=o.batchProcessor)||void 0===r?void 0:r.exportTimeoutMillis}}static getServiceName(){return`connect-chrome-edu-mv${this.manifest.manifest_version}`}static startTracerProvider(){var e,t;return r(this,void 0,void 0,(function*(){if(this.tracerProvider){const e=this.tracerProvider;e.forceFlush().then((()=>{e.shutdown()}))}const n=this.config,r=(null==n?void 0:n.sampling.enabled)?new i.TraceIdRatioBasedSampler((null==n?void 0:n.sampling.rate)||.1):new i.AlwaysOffSampler,o=new m.CircuitBreakerSampler({root:new i.ParentBasedSampler({root:new S.SampleRatioAttributeSampler({enabled:null==n?void 0:n.sampling.enabled,root:r})}),rateLimiter:this.rateLimiter});this.tracerProvider=new i.BasicTracerProvider({resource:new d.Resource(Object.assign(Object.assign(Object.assign({},{[p.SEMRESATTRS_SERVICE_NAME]:this.getServiceName()}),{[p.SEMRESATTRS_DEPLOYMENT_ENVIRONMENT]:n.region}),(null===(e=n.requiredResourceAttributes)||void 0===e?void 0:e.serviceVersion)&&{[p.SEMRESATTRS_SERVICE_VERSION]:this.manifest.version})),sampler:o}),this.exporter=n.endpoint?new s.OTLPTraceExporter(yield this.collectorConfig(null===(t=n.endpoint)||void 0===t?void 0:t.trace)):null;const a=this.exporter?new i.BatchSpanProcessor(this.exporter,this.batchProcessorConfig()):null;a?(this.tracerProvider.addSpanProcessor(a),this.tracerProvider.register()):(this.tracerProvider=void 0,(0,h.logging__error)("Otel Tracing span processor failed to while registering"),this.close())}))}static exporterErrorHandler(){if(this.exporter){const e=this.exporter.send.bind(this.exporter);this.exporter.send=(t,n,o)=>{e(t,(()=>{this.exporterAuthRetryCounter=0,n()}),(e=>r(this,void 0,void 0,(function*(){var i;this.exporterAuthRetryCounter<3?(this.exporterAuthRetryCounter++,401===(null==e?void 0:e.code)?((0,h.logging__error)("Otel Authentication error: token expired or invalid",e),yield _.OffscreenManager.getAuthToken(!0),yield this.startTracerProvider(),this.exporterErrorHandler(),null===(i=this.exporter)||void 0===i||i.send(t,n,o)):o(e)):((0,h.logging__error)("Otel Authentication error: maximum auth retry reached. Retry starts in 300000 milliseconds"),setTimeout((()=>r(this,void 0,void 0,(function*(){var e;this.exporterAuthRetryCounter=0,null===(e=this.exporter)||void 0===e||e.send(t,n,o)}))),3e5+Math.floor(3e4*Math.random())))}))))}}}static getTracer(e){return this.tracerProvider?this.tracerProvider.getTracer(e,String(this.manifest.version)):((0,h.logging__debug)("OTEL Client: Noop Tracer provider is returned."),this.noopTracerProvider.getTracer("noop"))}static startSpan(e,t,n,r,o){const i=u.propagation.extract(u.context.active(),r);try{const r=`span_${Date.now()}_${Math.random()}`,s=this.getTracer(n).startSpan(e,{attributes:o,startTime:v.default.now(),kind:t},i);return this.spanMap.set(r,s),{spanKey:r,spanCtx:s.spanContext()}}catch(e){return(0,h.logging__error)("OTEL client: Error starting span",e),{spanKey:"",spanCtx:{traceId:"",spanId:"",traceFlags:0}}}}static setSpanOkay(e){if(""===e||this.spanMap.size<1)return void(0,h.logging__debug)("OTEL client: Span has not been set to OK.");const t=this.spanMap.get(e);t?t.setStatus({code:u.SpanStatusCode.OK}):(0,h.logging__warning)(`OTEL client: No span found with key: ${e}`)}static recordException(e,t){if(""===e||this.spanMap.size<1)return void(0,h.logging__debug)("OTEL client: Span Exception has not been recorded.");const n=JSON.parse(t),r=this.spanMap.get(e);r?(r.setStatus({code:u.SpanStatusCode.ERROR,message:null==n?void 0:n.message}),r.recordException(n)):(0,h.logging__warning)(`OTEL client: No span found with key: ${e}`)}static endSpan(e){if(""===e||this.spanMap.size<1)return void(0,h.logging__debug)("OTEL client: Span has not been ended.");const t=this.spanMap.get(e);t?(t.end(v.default.now()),this.spanMap.delete(e)):(0,h.logging__warning)(`OTEL client: No span found with key: ${e}`)}static stopTracerProvider(){this.tracerProvider&&this.tracerProvider.forceFlush().then((()=>{var e;null===(e=this.tracerProvider)||void 0===e||e.shutdown()}))}static startLogger(){var e,t;return r(this,void 0,void 0,(function*(){this.loggerProvider&&this.loggerProvider.shutdown();const n=this.config;this.loggerProvider=new c.LoggerProvider({resource:new d.Resource(Object.assign(Object.assign(Object.assign({},{[p.SEMRESATTRS_SERVICE_NAME]:this.getServiceName()}),{[p.SEMRESATTRS_DEPLOYMENT_ENVIRONMENT]:n.region}),(null===(e=n.requiredResourceAttributes)||void 0===e?void 0:e.serviceVersion)&&{[p.SEMRESATTRS_SERVICE_VERSION]:this.manifest.version}))});const r=n.endpoint?new a.OTLPLogExporter(yield this.collectorConfig(null===(t=n.endpoint)||void 0===t?void 0:t.logs)):null,o=r?new c.BatchLogRecordProcessor(r,this.batchProcessorConfig()):null;o?this.loggerProvider.addLogRecordProcessor(o):(this.loggerProvider=void 0,(0,h.logging__error)("Otel Logging span processor failed to while registering"),this.close())}))}static getLogger(){if(!this.loggerProvider)throw new Error("Otel Logger provider is not initialized");return this.loggerProvider.getLogger(this.getServiceName(),String(this.manifest.version))}static sendLog(e,t=l.SeverityNumber.INFO){if(this.loggerProvider)try{this.getLogger().emit({body:e,severityNumber:t})}catch(e){(0,h.logging__error)("OTEL client: Error starting sending log",e)}else(0,h.logging__debug)("OTEL client: Log has not been sent.")}static stopLogger(){this.loggerProvider&&this.loggerProvider.forceFlush().then((()=>{var e;null===(e=this.loggerProvider)||void 0===e||e.shutdown()}))}static close(){this.stopTracerProvider(),this.spanMap.clear(),this.initialized=!1,this.config={},(0,h.logging__message)("OTEL client: OpenTelemetry client has been shutdown")}}t.default=E,E.spanMap=new Map,E.rateLimiter=new f.RateLimiter({tokensPerInterval:1e3,interval:"hour"}),E.initialized=!1,E.noopTracerProvider=new u.ProxyTracerProvider,E.exporterAuthRetryCounter=0},9113:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SampleRatioAttributeSampler=void 0;const r=n(9827),o=n(3747),i=n(1658);t.SampleRatioAttributeSampler=class{constructor(e){this.enabled=e.enabled,this.root=e.root}shouldSample(e,t,n,s,a,c){var u,l;if(!this.enabled)return this.root.shouldSample(e,t,n,s,a,c);const d=null!==(l=null===(u=a[o.SAMPLE_RATIO_ATTRIBUTE_KEY])||void 0===u?void 0:u.valueOf())&&void 0!==l?l:void 0;return void 0===d?this.root.shouldSample(e,t,n,s,a,c):"number"!=typeof d?((0,i.logging__warning)("Sample ratio attribute value is invalid, must be a number. Not sampling. value:",d),{decision:r.SamplingDecision.NOT_RECORD}):d<0||d>1?((0,i.logging__warning)("Sample ratio attribute value is out of range. Not sampling. Must be between 0 and 1 (both inclusive). value:",d),{decision:r.SamplingDecision.NOT_RECORD}):new r.TraceIdRatioBasedSampler(d).shouldSample(e,t)}toString(){return"SampleRatioAttributeSampler"}}},1694:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2376),s=o(n(5748)),a=o(n(2695)),c=n(2352);class u{static init(){u.initialised||(u.initialised=!0)}static initSignaler(e,t,n,r,o){if(u.iceServers=o,!u.signalers[t]||["closed","failed"].includes(u.signalers[t].client.connection.state)){const n=new i.Signaler(e);u.signalers[t]=n,n.client.connect(),n.client.connection.once("closed",(()=>{delete u.signalers[t]})),n.client.connection.once("failed",(e=>{delete u.signalers[t],console.error("signaler error",e)})),n.client.connection.on("failed",(e=>{delete u.signalers[t],console.error("signaler error",e)}))}const s=u.signalers[t].channel(t);s.presence.enter(),u.channels[n]=t,s.subscribe(i.P2P_CONNECT_MESSAGE,(e=>{var t;if((null===(t=e.data)||void 0===t?void 0:t.receiver)!==r)return;const n=u.getMessageSender(e),o=u.connect(s,n,e);o.pc.addEventListener("datachannel",(e=>{u.receiveDataChannel(e.channel,o,n)}))})),s.subscribe("disconnect",(e=>{var t;if((null===(t=e.data)||void 0===t?void 0:t.receiver)!==r)return;const n=u.getMessageSender(e);u.disconnect(n),u.closeChannelsWithPeer(n)}))}static tearDown(e){return r(this,void 0,void 0,(function*(){u.disconnect(e),u.disconnectSnapshotStreamer(e),u.disconnectTabStreamer(e)}))}static receiveDataChannel(e,t,n){var r,o,i,c;const l=e.label;"main"===l&&(u.streamers[n]=new s.default(e,null!==(o=null===(r=t.pc.sctp)||void 0===r?void 0:r.maxMessageSize)&&void 0!==o?o:0),u.streamers[n].startStreaming()),"control"===l&&(e.addEventListener("message",(e=>{const t=JSON.parse(e.data),r=t.windowId,o=t.tabId;u.streamers[n]&&u.streamers[n].switchTab(o),u.tabStreamers[n]&&u.tabStreamers[n].setWindow(r)})),u.tabStreamers[n]=new a.default(e,n,null!==(c=null===(i=t.pc.sctp)||void 0===i?void 0:i.maxMessageSize)&&void 0!==c?c:0),u.tabStreamers[n].startStreaming()),e.addEventListener("close",(()=>{"main"===l&&u.disconnectSnapshotStreamer(n),"control"===l&&u.disconnectTabStreamer(n),u.disconnect(n),u.closeChannelsWithPeer(n)}))}static connect(e,t,n){u.connections[t]&&u.disconnect(t);const r=new i.PeerConnection(e,u.iceServers,!0);return r.connect(t,n),u.connections[t]=r,r.pc.addEventListener("connectionstatechange",(()=>{switch(r.pc.connectionState){case"failed":case"closed":u.disconnect(t),u.disconnectSnapshotStreamer(t),u.disconnectTabStreamer(t)}})),r}static close(e){for(const[t,n]of Object.entries(u.channels))n===e&&u.closeChannelsWithPeer(t)}static disconnect(e){u.connections[e]&&(u.connections[e].close(),delete u.connections[e])}static disconnectTabStreamer(e){u.tabStreamers[e]&&(u.tabStreamers[e].endStreaming(),delete u.tabStreamers[e])}static disconnectSnapshotStreamer(e){u.streamers[e]&&(u.streamers[e].endStreaming(),delete u.streamers[e])}static closeChannelsWithPeer(e){if(u.channels[e]){const t=u.channels[e],n=u.signalers[t].channel(t);n.unsubscribe(),n.detach(),delete u.channels[e];const r=[];for(const[e,n]of Object.entries(u.channels))n===t&&r.push(e);0===r.length&&u.signalers[t]&&"connected"===u.signalers[t].client.connection.state&&u.signalers[t].client.close()}}static setCloseTimeouts(e,t,n){if(t)for(const r of n){const n=(0,c.configEndUnix)(e,r);if(n>Date.now()/1e3){const e=`${t}/${r.group.replace(/[^a-z0-9]/gi,"-")}`;clearTimeout(u.closeTimeouts[e]),u.closeTimeouts[e]=setTimeout((()=>{u.close(e)}),1e3*n-Date.now())}}}static getMessageSender(e){return e.clientId}static prepareMessage(e){const t=JSON.stringify(Object.assign(Object.assign({},e),{timestamp:(new Date).getTime()}));return new Uint8Array([...u.encoder.encode(t),u.terminatorCharCode,u.terminatorCharCode])}static send(e,t,n){let r=0;for(;r<t.length;){const o=Math.min(n,t.length-r),i=new Uint8Array(t.buffer,r,o);e.send(i),r+=o}}}t.default=u,u.initialised=!1,u.encoder=new TextEncoder,u.terminatorCharCode="\0".charCodeAt(0),u.signalers={},u.channels={},u.connections={},u.streamers={},u.tabStreamers={},u.closeTimeouts={},u.iceServers=void 0},5748:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(5333),s=o(n(1694)),a=n(5570);class c{constructor(e,t){this.datachannel=e,this.maxMessageSize=t,this.streamingTab=null,this.lastSendTimeMs=0,this.datachannel.bufferedAmountLowThreshold=c.DC_BUFFER_LOW_MARK_BYTES}startStreaming(){clearInterval(this.streamInterval),this.streamInterval=setInterval((()=>{this.datachannel.bufferedAmount<=this.datachannel.bufferedAmountLowThreshold?this.sendScreenshot():console.log(`DEBUG p2p buffer NOT low, skipping screenshot. Buffered: ${(this.datachannel.bufferedAmount/1e3).toFixed(2)}kb, buffer_low_mark: ${(this.datachannel.bufferedAmountLowThreshold/1e3).toFixed(2)}`)}),1e3)}endStreaming(){clearInterval(this.streamInterval)}switchTab(e){this.streamingTab=e}sendScreenshot(){return r(this,void 0,void 0,(function*(){if(!this.streamingTab)return;const e=yield a.OffscreenManager.sendMesage({type:i.MessageTypes.P2PGetScreenshot,streamingTab:this.streamingTab});e&&this.send(e)}))}send(e){const t=s.default.prepareMessage(e);this.lastSendTimeMs?console.log(`DEBUG p2p sending screenshot. Size: ${(t.length/1e3).toFixed(2)}kb, last send (secs): ${((Date.now()-this.lastSendTimeMs)/1e3).toFixed(2)}`):console.log(`DEBUG p2p sending screenshot. Size: ${(t.length/1e3).toFixed(2)}kb`),this.lastSendTimeMs=Date.now(),s.default.send(this.datachannel,t,this.maxMessageSize)}}t.default=c,c.DC_BUFFER_LOW_MARK_BYTES=0},2695:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(5333),s=o(n(1694)),a=n(5570);t.default=class{constructor(e,t,n){this.dataChannel=e,this.remotePeerId=t,this.maxMessageSize=n,this.streamingWindow=null}startStreaming(){clearInterval(this.streamInterval),this.streamInterval=setInterval((()=>{this.sendTabs()}),1e3)}endStreaming(){clearInterval(this.streamInterval)}setWindow(e){this.streamingWindow=e}sendTabs(){return r(this,void 0,void 0,(function*(){if(!this.streamingWindow)return;const e=yield a.OffscreenManager.sendMesage({type:i.MessageTypes.P2PGetTabs});if(!e)return;if(e.restrictedDomainFound)return void s.default.tearDown(this.remotePeerId);const t=s.default.prepareMessage(e);s.default.send(this.dataChannel,t,this.maxMessageSize)}))}}},1658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logging__debug=t.logging__message=t.logging__warning=t.logging__error=void 0;const r=n(5570),o=n(5333);t.logging__error=(e,...t)=>{i(o.LogLevelTypes.Error,e,t)},t.logging__warning=(e,...t)=>{i(o.LogLevelTypes.Warning,e,t)},t.logging__message=(e,...t)=>{i(o.LogLevelTypes.Message,e,t)},t.logging__debug=(e,...t)=>{i(o.LogLevelTypes.Debug,e,t)};const i=(e,t,...n)=>{r.OffscreenManager.sendMesage({type:o.MessageTypes.OffScreenLogMessage,logLevel:e,message:t,optionalParams:n})}},3919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomInt=t.resizeAndCompressImage=t.getLocalIpPeerConnection=void 0;const r=n(5570),o=n(2790);t.getLocalIpPeerConnection=e=>{const t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),n=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;return t.createDataChannel(""),t.createOffer().then((function(r){var o;null===(o=r.sdp)||void 0===o||o.split("\n").forEach((function(t){if(t.indexOf("candidate")<0)return;const r=t.match(n);let o=r?r[0]:"0.0.0.0";o.startsWith("100.115.92")&&(o="10.255.255.254"),e(o)})),null==t||t.setLocalDescription(r)})).catch((function(e){(0,o.logErrorInSentry)(e)})),t.onicecandidate=function(t){if(t&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.match(n)){const r=t.candidate.candidate.match(n);let o=r?r[0]:"0.0.0.0";o.startsWith("100.115.92")&&(o="10.255.255.254"),e(o)}},t.onsignalingstatechange=()=>{"closed"===t.connectionState&&r.OffscreenManager.getUserIP()},t},t.resizeAndCompressImage=(e,t,n)=>new Promise((r=>{const o=new Image;o.onload=function(){const e=t,i=document.createElement("canvas"),s=i.getContext("2d");i.width=o.width,i.height=o.height;const a=o.width>e?e:o.width,c=a*(o.height/o.width);i.width=a,i.height=c,null==s||s.drawImage(o,0,0,a,c),r(n&&n<1?i.toDataURL("image/jpeg",n):i.toDataURL())},o.src=e})),t.getRandomInt=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e))},4109:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});const r=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),o=new Set(["https:","http:","file:"]),i=e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!o.has(t)}catch{return!1}},s=(e,t)=>{let{stripHash:n}=t;const r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:o,data:i,hash:s}=r.groups;const a=o.split(";");s=n?"":s;let c=!1;"base64"===a[a.length-1]&&(a.pop(),c=!0);const u=a.shift()?.toLowerCase()??"",l=[...a.map((e=>{let[t,n=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(n=n.toLowerCase(),"us-ascii"===n)?"":`${t}${n?`=${n}`:""}`})).filter(Boolean)];return c&&l.push("base64"),(l.length>0||u&&"text/plain"!==u)&&l.unshift(u),`data:${l.join(";")},${c?i.trim():i}${s?`#${s}`:""}`};function a(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return s(e,t);if(i(e))return e;const n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const o=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===o.protocol&&(o.protocol="http:"),t.forceHttps&&"http:"===o.protocol&&(o.protocol="https:"),t.stripAuthentication&&(o.username="",o.password=""),t.stripHash?o.hash="":t.stripTextFragment&&(o.hash=o.hash.replace(/#?:~:text.*?$/i,"")),o.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,n="";for(;;){const r=e.exec(o.pathname);if(!r)break;const i=r[0],s=r.index;n+=o.pathname.slice(t,s).replace(/\/{2,}/g,"/"),n+=i,t=s+i.length}n+=o.pathname.slice(t,o.pathname.length).replace(/\/{2,}/g,"/"),o.pathname=n}if(o.pathname)try{o.pathname=decodeURI(o.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=o.pathname.split("/");const n=e[e.length-1];r(n,t.removeDirectoryIndex)&&(e=e.slice(0,-1),o.pathname=e.slice(1).join("/")+"/")}if(o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(o.hostname)&&(o.hostname=o.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...o.searchParams.keys()])r(e,t.removeQueryParameters)&&o.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(o.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const e of[...o.searchParams.keys()])r(e,t.keepQueryParameters)||o.searchParams.delete(e);if(t.sortQueryParameters){o.searchParams.sort();try{o.search=decodeURIComponent(o.search)}catch{}}t.removeTrailingSlash&&(o.pathname=o.pathname.replace(/\/$/,"")),t.removeExplicitPort&&o.port&&(o.port="");const a=e;return e=o.toString(),t.removeSingleSlash||"/"!==o.pathname||a.endsWith("/")||""!==o.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===o.pathname)&&""===o.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(5570)})();