(()=>{"use strict";var e={328:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,o){function i(e){try{r(a.next(e))}catch(e){o(e)}}function l(e){try{r(a.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}r((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(333);class o{static init(){return a(this,void 0,void 0,(function*(){(yield o.sendRuntimeMessage({type:s.MessageTypes.ChatBubbleStatus}))?(this.createChatBubble(),chrome.storage.sync.get(["haveShownFakePendo1"],(e=>{(null==e?void 0:e.haveShownFakePendo1)?this.removeChatPendo():(window.lwChatShowChatPendo=!0,this.createChatPendo())}))):(this.removeChatBubble(),this.removeChatPendo())}))}static sendRuntimeMessage(e){return a(this,void 0,void 0,(function*(){return new Promise((t=>{chrome.runtime.sendMessage(e,(e=>{t(e)}))}))}))}static removeChatPendo(){window.lwChatShowChatPendo=!1;const e=document.getElementById("pendoChatContainer");e&&e.remove()}static createChatBubble(){let e=document.getElementById("bubbleId");if(e){let t=document.getElementById("msgCountId");t||(t=document.createElement("div"),t.id="msgCountId",t.style.height="24px",t.style.width="24px",t.style.borderRadius="50%",t.style.backgroundColor="#DF2935",t.style.position="absolute",t.style.zIndex=String(Number.MAX_SAFE_INTEGER),t.style.top="-6.67%",t.style.left="66.67%",t.style.alignItems="center",t.style.justifyContent="center",t.style.display="flex",t.style.color="white",t.style.fontSize="12px",t.style.fontWeight="bold",e.appendChild(t)),window.lwChatMsgCount?(t.innerText=window.lwChatMsgCount>9?"9+":window.lwChatMsgCount.toString(),t.style.visibility="visible"):t.style.visibility="hidden",window.lwChatImageLeft&&(e.style.left=window.lwChatImageLeft+"px"),window.lwChatImageTop&&(e.style.top=window.lwChatImageTop+"px")}else{let t=0,n=0,a=0,s=0,i=!1;e=document.createElement("div"),e.id="bubbleId",e.style.height="60px",e.style.width="60px",e.style.position="fixed",e.style.right=String(0),e.style.bottom=String(0),e.style.zIndex=String(Number.MAX_SAFE_INTEGER-1);const l=document.createElement("img");l.style.width="60px",l.style.height="60px",l.style.borderRadius="50%",l.style.boxShadow="0 10px 20px 5px rgba(0, 0, 0, 0.1)",l.src=chrome.runtime.getURL("/chat/assets/imgs/bubble.svg"),e.appendChild(l),e.addEventListener("click",(()=>{window.lwChatShowChatPendo||(i?i=!1:o.sendRuntimeMessage({type:"SHOW_CHAT_UI"}))})),(l=>{e.onmousedown=e=>{(e=e||window.event).preventDefault(),a=e.clientX,s=e.clientY,document.onmouseup=c,document.onmousemove=r};const r=e=>{if(window.lwChatShowChatPendo)return;(e=e||window.event).preventDefault(),t=a-e.clientX,n=s-e.clientY,a=e.clientX,s=e.clientY;const o=l.offsetTop-n,r=l.offsetLeft-t;o<0||o+60>window.innerHeight||r<0||r+60>window.innerWidth||(l.style.top=o+"px",l.style.left=r+"px",i=!0)};function c(){document.onmouseup=null,document.onmousemove=null,o.sendRuntimeMessage({type:"UPDATE_CHAT_BUBBLE_POSITION",imageLeft:e.offsetLeft-n,imageTop:e.offsetTop-n})}})(e),document.body.appendChild(e)}}static removeChatBubble(){o.sendRuntimeMessage({type:"CLOSE_CHAT_UI"});const e=document.getElementById("bubbleId");if(e)return e.parentNode.removeChild(e)}static createChatPendo(){let e=document.getElementById("pendoChatContainer");if(!e){e=document.createElement("div"),e.style.all="revert",e.style.zIndex=String(Number.MAX_SAFE_INTEGER-1),e.id="pendoChatContainer",e.style.position="fixed",e.style.bottom="70px",e.style.right="8px",e.style.width="330px",e.style.height="406px",e.style.padding="32px 40px",e.style.background="#FFFFFF",e.style.borderRadius="3px",e.style.boxShadow="0px 4px 4px rgba(0, 0, 0, 0.25)",e.style.textAlign="center";const t=document.createElement("div");t.id="pendoChatWrapper",t.style.all="revert",t.style.position="relative",t.style.height="380px",t.style.width="330px";const n=document.createElement("div");n.style.all="revert",n.id="pendoChatHeader",n.style.display="flex";const a=function(){e.remove(),chrome.storage.sync.set({haveShownFakePendo1:!0}),o.sendRuntimeMessage({type:"CLOSE_FAKE_PENDO"})},s=document.createElement("img");s.style.all="revert",s.id="pendoChatClose",s.style.marginLeft="auto",s.style.height="12px",s.style.width="12px",s.style.cursor="pointer",s.addEventListener("click",a),s.src=chrome.runtime.getURL("/chat/assets/imgs/closePendo.svg"),n.appendChild(s),t.append(n);const i=document.createElement("div");i.style.all="revert",i.id="pendoChatContents",i.style.height="405px";const l=document.createElement("div");l.style.all="revert",l.style.textAlign="center",l.style.height="24px",l.style.width="330px";const r=document.createElement("img");r.style.all="revert",r.id="pendoChatBeta",r.src=chrome.runtime.getURL("/chat/assets/imgs/beta.svg"),l.appendChild(r),i.appendChild(l);const c=document.createElement("div");c.style.all="revert",c.id="pendoChatSubtitle",c.innerText="Your school has turned on teacher chat",c.style.lineHeight="30px",c.style.fontFamily="Roboto, Open Sans",c.style.fontWeight="500",c.style.fontSize="24px",c.style.textAlign="center",c.style.color="#000000",i.appendChild(c);const d=document.createElement("div");d.style.all="revert",d.id="pendoChatDescription",d.style.lineHeight="22px",d.style.fontSize="14px",d.style.textAlign="center",d.style.fontFamily="Roboto, Open Sans",d.style.width="336px",d.innerText="Click the chat button to directly message your teacher.",i.appendChild(d),i.style.all="revert",i.style.color="#000000";const _=document.createElement("img");_.style.all="revert",_.src=chrome.runtime.getURL("/chat/assets/imgs/pendo.png"),_.id="pendoChatImage",_.style.height="181px",_.style.width="336px",_.style.padding="16px 0",_.style.width="100%",_.style.objectFit="cover",i.appendChild(_);const p=document.createElement("div");p.style.all="revert",p.id="pendoChatLinks",p.style.height="18px",p.style.width="330px",p.style.fontSize="12px",p.style.display="flex",p.style.justifyContent="space-between";const h=document.createElement("a");h.style.all="revert",h.style.lineHeight="22px",h.style.margin="0 10px",h.style.color="#0075DB",h.style.fontWeight="bold",h.style.fontFamily="Roboto, Open Sans",h.style.fontSize="14px",h.href="https://dyzz9obi78pm5.cloudfront.net/app/image/id/60ffc732498ccce8297b23c8/n/cw-chat-students-using-classwize-chat.pdf",h.target="_blank",h.style.textDecoration="none",h.innerText="Learn more (Students)";const g=document.createElement("a");g.style.all="revert",g.innerText="Learn more (Parents)",g.style.lineHeight="22px",g.style.margin="0 10px",g.style.color="#0075DB",g.style.fontWeight="bold",g.style.fontFamily="Roboto, Open Sans",g.style.fontSize="14px",g.href="https://dyzz9obi78pm5.cloudfront.net/app/image/id/60ffc735a3abd3de297b23c6/n/cw-chat-parents-faq.pdf",g.target="_blank",g.style.textDecoration="none",p.appendChild(h),p.appendChild(g),i.appendChild(p);const C=document.createElement("div");C.style.all="revert";const m=document.createElement("button");m.style.all="revert",m.id="pendoChatDismissButton",m.style.marginTop="16px",m.innerText="SEND A MESSAGE",m.style.background="#0075DB",m.style.borderRadius="5px",m.style.color="#FFFFFF",m.style.border="0px",m.style.height="50px",m.style.width="330px",m.addEventListener("click",a),C.appendChild(m),i.appendChild(C),t.appendChild(i);const u=document.createElement("div");u.style.all="revert",u.style.height="15px",u.style.width="15px",u.style.transform="rotate(45deg)",u.style.backgroundColor="#FFFFFF",u.style.boxShadow="10px 0 8px -8px rgb(0 0 0 / 25%)",u.style.position="absolute",u.style.bottom="-8px",u.style.right="16px",e.appendChild(t),e.appendChild(u),document.body.appendChild(e),o.sendRuntimeMessage({type:"SHOW_FAKE_PENDO_1"})}}}t.default=o,o.init()},333:(e,t)=>{var n,a,s,o,i,l,r,c,d,_,p,h,g,C,m,u,y,w,v,f,b,I;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserTypes=t.youtubeStrictSafesearch=t.companionWebGrpcUrl=t.CompanionFeatures=t.MessageTypes=t.LogLevel=t.LogLevelTypes=t.EventTypes=t.UniqueScheduleIds=t.SchedulesConstants=t.ScreenshotPersisterConstants=t.ConnectionsConstants=t.AuthenticateConstants=t.ContentAwareLicenseStatus=t.ContentAwareIECMessageTypes=t.ContentAwareConstants=t.DelegationReporting=t.DelegationConstants=t.SystemConfigConstants=t.CompanionConstants=t.MainConstants=t.TabsConstants=t.ConfigFetcherConstants=t.ChatConstants=t.ConfigConstants=t.VerdictStoreConstants=t.FallbackVerdictStoreConstants=t.FilteringConstants=t.FirestoreDocIds=t.KeepAliveConstants=t.DMSManagerConstants=t.UpdaterConstants=void 0,(I=t.UpdaterConstants||(t.UpdaterConstants={})).FcmMessagesCacheId="lw_updater_fcm_messages_cache_id",I.GeneralCacheId="lw_updater_general_cache_id",I.RegistrationCacheId="lw_updater_registration_cache",(b=t.DMSManagerConstants||(t.DMSManagerConstants={})).DmsDataCacheId="lw_dms_data_cache",b.DmsManagerConfigCacheId="lw_dms_manager_config_cache",b.CheckInDeviceInterval="lw_dms_check_in",b.RetryDMSRegTimeout="lw_retry_dms_registration_timeout",b[b.CheckInDeviceElapsed_ms=3e5]="CheckInDeviceElapsed_ms",(t.KeepAliveConstants||(t.KeepAliveConstants={})).KeepAliveCacheId="lw_keep_alive_cache_id",(t.FirestoreDocIds||(t.FirestoreDocIds={})).ContentAware="contentAware",(f=t.FilteringConstants||(t.FilteringConstants={})).HandleVerdictQueueInterval="lw_handle_verdict_queue_interval",f.EvictOldResponsesInterval="lw_evict_old_responses",f.VerdictRawResponseCacheId="lw_verdict_raw_response_cache",f.FallbackVerdictsCacheId="lw_fallback_verdicts_cache",f.VerdictResponseTimeCacheId="verdict_response_time_cache",f.VerdictYoutubeQueryCacheId="verdict_youtube_query_cache",f.VerdictClientFallback="client_fallback",f.CustomHeaderCacheId="lw_custom_header_cache",f.CustomHeaderCacheCleanIntervalId="lw_custom_header_cache_interval_id",f[f.CustomHeaderCacheCleanInterval=3e5]="CustomHeaderCacheCleanInterval",f[f.CustomHeaderCacheExpireTime=36e5]="CustomHeaderCacheExpireTime",(t.FallbackVerdictStoreConstants||(t.FallbackVerdictStoreConstants={})).PurgeOldVerdictEntries="purge_old_verdict_entries",(v=t.VerdictStoreConstants||(t.VerdictStoreConstants={})).EvictOldResponsesInterval="lw_evict_old_responses",v.VerdictResponseCacheId="lw_verdict_response_cache",(w=t.ConfigConstants||(t.ConfigConstants={})).ConfigurationCacheId="lw_configuration_cache",w[w.ConfigLoadTimeout_ms=1e4]="ConfigLoadTimeout_ms",(y=t.ChatConstants||(t.ChatConstants={})).ChatDataCacheId="lw_chat_data_cache",y.OpenChatTimeout="lw_open_chat_timeout",(t.ConfigFetcherConstants||(t.ConfigFetcherConstants={})).ClassConfigRefreshTimeout="lw_class_config_refresh",(u=t.TabsConstants||(t.TabsConstants={})).FocusLockCheckTimeout="lw_tabs_focuslock_check",u.ScreenshotUploadInterval="lw_screenshot_upload_interval",u.TabsDataCacheId="lw_tabs_data_cache",(m=t.MainConstants||(t.MainConstants={})).PeriodicLoginInterval="lw_periodic_login",m.WhoamiLoginInterval="lw_whoami_login",m.FzboxPollInterval="lw_fzbox_poll",m.MainDataCacheId="lw_main_data_cache",m.DevDataCacheId="lw_dev_data_cache",m.LoadingConfiKey="lw_loading_config_key",m.RemainingUpdatesKey="lw_remaining_updates_key",m.DevBuildReloadedKey="lw_dev_build_reloaded_key",m[m.ResourceLimitThresholdCheckInterval=72e5]="ResourceLimitThresholdCheckInterval",(C=t.CompanionConstants||(t.CompanionConstants={})).CacheId="lw_companion_cache",C[C.MaxReconnectionAttempts=5]="MaxReconnectionAttempts",C[C.DeltaTimeout=5e3]="DeltaTimeout",C[C.MaxRetryRegistrationInterval_ms=3e4]="MaxRetryRegistrationInterval_ms",(t.SystemConfigConstants||(t.SystemConfigConstants={})).CacheId="lw_system_config_cache",(g=t.DelegationConstants||(t.DelegationConstants={})).CacheId="lw_delegation_config_cache",g.DelegationChangeScheduleId="lw_delegation_change_schedule_id",(h=t.DelegationReporting||(t.DelegationReporting={})).ALL="all",h.BLOCKED="blocked",h.NONE="none",(t.ContentAwareConstants||(t.ContentAwareConstants={})).CacheId="lw_content_aware_config_cache",(p=t.ContentAwareIECMessageTypes||(t.ContentAwareIECMessageTypes={})).login="LOGIN",p.logout="LOGOUT",p.isLoggedIn="IS_LOGGED_IN",p.resetConfig="RESET-CONFIG",p.UpdateDynamicConfig="UPDATE-CONFIG-ALL",(_=t.ContentAwareLicenseStatus||(t.ContentAwareLicenseStatus={})).active="ACTIVE",_.suspended="SUSPENDED",(d=t.AuthenticateConstants||(t.AuthenticateConstants={})).PartialFailedCacheId="lw_partial_failed_cache",d.AuthenticationData="lw_authentication_data_cache",d.AuthTokenKey="auth_token",(c=t.ConnectionsConstants||(t.ConnectionsConstants={})).ConnectionsCacheId="lw_connections_cache",c.ConnectionsUploadInterval="lw_Connections_upload_interval",c.TabsCacheId="lw_tabs_cache",c.UploadInfoCacheId="lw_upload_info_cache",c.mainFrameRequestType="main_frame",c.eventTypeSendHeaders="sendHeaders",c.eventTypeBeforeRequest="beforeRequest",c.eventTypeHeadersReceived="headersReceived",c.eventTypeCompleted="completed",(t.ScreenshotPersisterConstants||(t.ScreenshotPersisterConstants={})).LastScreenshotCacheId="last_screenshot_cache",(t.SchedulesConstants||(t.SchedulesConstants={})).SchedulesDataCacheId="lw_schedule_manager_data_cache_id",(r=t.UniqueScheduleIds||(t.UniqueScheduleIds={})).ConfigUpdate="config_update_with_delay",r.CaptureTabAndSend="capture_tab_and_send",r.SendRuntimeMessage="send_runtime_message",r.PrintBlockedMessage="print_blocked_message",r.CreateNewChromeTab="create_new_chrome_tab",(l=t.EventTypes||(t.EventTypes={})).CONFIG_UPDATE="CONFIG_UPDATE",l.OPEN_TAB="OPEN_TAB",l.CLOSE_TAB="CLOSE_TAB",l.MESSAGE="MESSAGE",l.CLASS_STARTED="CLASS_STARTED",l.POLICY_UPDATE="POLICY_UPDATE",l.INIT_P2P="INIT_P2P",(i=t.LogLevelTypes||(t.LogLevelTypes={})).Error="logging__error",i.Warning="logging__warning",i.Message="logging__message",i.Debug="logging__debug",(o=t.LogLevel||(t.LogLevel={})).INFO="INFO",o.WARN="WARN",o.ERROR="ERROR",o.DEBUG="DEBUG",(s=t.MessageTypes||(t.MessageTypes={})).InitOffscreenDocument="init_offscreen_socument_message",s.RegisterExtension="register_extension_with_native_agent",s.UnregisterExtension="unregister_extension_from_native_agent",s.RegisterClasswizeEventFail="register_extension_with_native_agent_classwize_events_fail",s.RegisterClasswizeEventMessage="register_extension_with_native_agent_classwize_events_Message",s.IsExtensionRegistered="is_extension_registered_with_native_agent",s.CompanionMessage="message_from_native_agent",s.CompanionErrorMessage="error_message_from_native_agent",s.RecoverCompanionStream="recover_companion_stream",s.RetryRegistration="retry_registration_with_native_agent",s.IpAddressChangeRoutine="ip_address_change_routine",s.TabsActivated="tabs_activated_message",s.UrlUpdatedInTab="url_updated_in_tab",s.P2PInitSignaler="p2p_init_signaler_message",s.P2PSetCloseTimeouts="p2p_set_close_timeouts_message",s.P2PGetScreenshot="p2p_get_screenshot_message",s.P2PGetTabs="p2p_get_tabs_message",s.UtilLocalIpUpdated="util_local_ip_updated_message",s.UtilResizeAndCompressImage="util_resize_and_compress_image",s.BroadcastWakeUpCall="cachescheduler_broadcast_wakeup_call",s.BroadcastScheduleTime="schedule-time-ee236fce-1426-4975-9d56-2ce4e8becd02",s.ChatBubbleStatus="chat_status",s.ChatInfo="chat_info",s.ChatGetLastMessage="last_chat_message",s.ChatClearLastMessage="clear_last_chat_message",s.UIGetStatus="ui_get_status",s.UIReloadConfig="ui_reload_config",s.UISendLogs="ui_send_logs",s.UpdaterNewMessage="updater_new_message",s.GetSafeguardVerdict="get_safe_guard_verdict",s.RedirectWebPage="redirect_web_page",s.EventMessage="event_service_message",s.InitAutoAuth="init_auto_auth",s.GetAuthCookie="get_auth_cookie",s.GetAuthToken="get_auth_token",s.UploadLogData="upload_log_data",s.UpdateOffscreenConfig="update_offscreen_config",s.MainConfigUpdated="main_config_updated",s.OffScreenLogMessage="Off_screen_log_message",s.GetManifestInfo="get_manifest_info",s.Token="TOKEN",s.ChatConfigUpdate="CHAT_CONFIG_UPDATE",s.UpdateTotalUnreadCount="UPDATE_TOTAL_UNREAD_COUNT",s.OpenChatClassroom="OPEN_CHAT_CLASSROOM",s.GoogleAuthenticate="GOOGLE_AUTHENTICATE",s.NativeTokenAuthenticate="NATIVE_TOKEN_AUTHENTICATE",s.GetBrowserType="get_browser_type",s.GetBrowserDetails="get_browser_details",s.CheckIfDomainIsBlocked="check_if_domain_is_blocked",s.ExtractFallbackDomains="extract_fallback_domains",s.LogMessage="log_message",s.InitOpenTelemetry="initialize-open-telemetry-client",s.StartOTELSpan="start-open-telemetry-span",s.SetOTELSpanOkay="set-open-telemetry-span-is-okay",s.RecordOTELSpanException="record-open-telemetry-span-exception",s.EndOTELSpan="end-open-telemetry-span",s.SendOTELLogs="send-open-telemetry-logs",s.CloseOTEL="shutdown-open-telemetry-client",(a=t.CompanionFeatures||(t.CompanionFeatures={})).companion="companion",a.companionLite="companion_lite",a.proxyFilter="proxy_filter",a.dns_filter="dns_filter",a.classroom="classroom",a.liteModeEnabled="companion-mode-lite-enabled",t.companionWebGrpcUrl="http://127.0.0.1:5769",t.youtubeStrictSafesearch="STRICT",(n=t.BrowserTypes||(t.BrowserTypes={})).chrome="chrome",n.edge="edge"}},t={};!function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}(328)})();