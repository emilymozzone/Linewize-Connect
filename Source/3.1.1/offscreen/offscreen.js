/*! For license information please see offscreen.js.LICENSE.txt */
(()=>{var __webpack_modules__={135:e=>{var t;self,t=function(){return(()=>{var e={"./node_modules/ably/build/ably-commonjs.js":e=>{var t;window,t=function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=42)}([function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",(function(){return n})),r.d(t,"__assign",(function(){return i})),r.d(t,"__rest",(function(){return s})),r.d(t,"__decorate",(function(){return a})),r.d(t,"__param",(function(){return c})),r.d(t,"__metadata",(function(){return l})),r.d(t,"__awaiter",(function(){return u})),r.d(t,"__generator",(function(){return p})),r.d(t,"__createBinding",(function(){return g})),r.d(t,"__exportStar",(function(){return d})),r.d(t,"__values",(function(){return f})),r.d(t,"__read",(function(){return h})),r.d(t,"__spread",(function(){return m})),r.d(t,"__spreadArrays",(function(){return y})),r.d(t,"__spreadArray",(function(){return v})),r.d(t,"__await",(function(){return _})),r.d(t,"__asyncGenerator",(function(){return b})),r.d(t,"__asyncDelegator",(function(){return S})),r.d(t,"__asyncValues",(function(){return E})),r.d(t,"__makeTemplateObject",(function(){return T})),r.d(t,"__importStar",(function(){return C})),r.d(t,"__importDefault",(function(){return M})),r.d(t,"__classPrivateFieldGet",(function(){return R})),r.d(t,"__classPrivateFieldSet",(function(){return A}));var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};function s(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}function a(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,o){t(r,o,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}function p(e,t){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var g=Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]};function d(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,n++)o[n]=i[s];return o}function v(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(e,t||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(e){n[e]&&(o[e]=function(t){return new Promise((function(r,o){i.push([e,t,r,o])>1||a(e,t)}))})}function a(e,t){try{(r=n[e](t)).value instanceof _?Promise.resolve(r.value.v).then(c,l):u(i[0][2],r)}catch(e){u(i[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function S(e){var t,r;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,n){t[o]=e[o]?function(t){return(r=!r)?{value:_(e[o](t)),done:"return"===o}:n?n(t):t}:n}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise((function(o,n){!function(e,t,r,o){Promise.resolve(o).then((function(t){e({value:t,done:r})}),t)}(o,n,(t=e[r](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return w(t,e),t}function M(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)}function A(e,t,r,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,r):n?n.value=r:t.set(e,r),r}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.allToUpperCase=t.allToLowerCase=t.encodeBody=t.decodeBody=t.Format=t.promisify=t.trim=t.arrChooseN=t.randomHexString=t.randomString=t.cheapRandStr=t.dataSizeBytes=t.inspectBody=t.inspectError=t.isErrorInfoOrPartialErrorInfo=t.now=t.parseQueryString=t.toQueryString=t.arrPopRandomElement=t.defaultPostHeaders=t.defaultGetHeaders=t.allSame=t.arrEvery=t.arrFilter=t.arrMap=t.safeArrForEach=t.arrForEach=t.forInOwnNonNullProperties=t.valuesArray=t.keysArray=t.arrWithoutValue=t.arrDeleteValue=t.arrIn=t.arrIndexOf=t.arrSubtract=t.arrIntersectOb=t.arrIntersect=t.intersect=t.containsValue=t.inherits=t.prototypicalClone=t.shallowClone=t.isEmptyArg=t.isOnlyPropIn=t.isEmpty=t.isObject=t.ensureArray=t.isArray=t.copy=t.mixin=void 0,t.toBase64=t.matchDerivedChannel=t.shallowEquals=t.getGlobalObject=t.getRetryTime=t.getJitterCoefficient=t.getBackoffCoefficient=void 0;var o=r(0),n=o.__importDefault(r(3)),i=o.__importStar(r(8)),s=o.__importDefault(r(4)),a=r(11),c=r(31);function l(e){return Math.floor(Math.random()*e.length)}function u(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var o=0;o<t.length;o++){var n=t[o];if(!n)break;var i=Object.prototype.hasOwnProperty;for(var s in n)i&&!i.call(n,s)||(e[s]=n[s])}return e}function p(e){return null==e}function g(e,t){var r=function(){};r.prototype=e;var o=new r;return t&&u(o,t),o}function d(e,r){for(var o=[],n=0;n<e.length;n++){var i=e[n];-1!=(0,t.arrIndexOf)(r,i)&&o.push(i)}return o}function f(e,t){for(var r=[],o=0;o<e.length;o++){var n=e[o];n in t&&r.push(n)}return r}function h(e,r){var o=(0,t.arrIndexOf)(e,r),n=-1!=o;return n&&e.splice(o,1),n}t.mixin=u,t.copy=function(e){return u({},e)},t.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.ensureArray=function(e){return p(e)?[]:(0,t.isArray)(e)?e:[e]},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isOnlyPropIn=function(e,t){for(var r in e)if(r!==t)return!1;return!0},t.isEmptyArg=p,t.shallowClone=function(e){var t=new Object;for(var r in e)t[r]=e[r];return t},t.prototypicalClone=g,t.inherits=function(e,t){n.default.Config.inherits?n.default.Config.inherits(e,t):(e.super_=t,e.prototype=g(t.prototype,{constructor:e}))},t.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},t.intersect=function(e,r){return(0,t.isArray)(r)?d(e,r):f(e,r)},t.arrIntersect=d,t.arrIntersectOb=f,t.arrSubtract=function(e,r){for(var o=[],n=0;n<e.length;n++){var i=e[n];-1==(0,t.arrIndexOf)(r,i)&&o.push(i)}return o},t.arrIndexOf=Array.prototype.indexOf?function(e,t,r){return e.indexOf(t,r)}:function(e,t,r){r=r||0;for(var o=e.length;r<o;r++)if(e[r]===t)return r;return-1},t.arrIn=function(e,r){return-1!==(0,t.arrIndexOf)(e,r)},t.arrDeleteValue=h,t.arrWithoutValue=function(e,t){var r=e.slice();return h(r,t),r},t.keysArray=function(e,t){var r=[];for(var o in e)t&&!Object.prototype.hasOwnProperty.call(e,o)||r.push(o);return r},t.valuesArray=function(e,t){var r=[];for(var o in e)t&&!Object.prototype.hasOwnProperty.call(e,o)||r.push(e[o]);return r},t.forInOwnNonNullProperties=function(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r]&&t(r)},t.arrForEach=Array.prototype.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var r=e.length,o=0;o<r;o++)t(e[o],o,e)},t.safeArrForEach=function(e,r){return(0,t.arrForEach)(e.slice(),r)},t.arrMap=Array.prototype.map?function(e,t){return e.map(t)}:function(e,t){for(var r=[],o=e.length,n=0;n<o;n++)r.push(t(e[n],n,e));return r},t.arrFilter=Array.prototype.filter?function(e,t){return e.filter(t)}:function(e,t){for(var r=[],o=e.length,n=0;n<o;n++)t(e[n])&&r.push(e[n]);return r},t.arrEvery=Array.prototype.every?function(e,t){return e.every(t)}:function(e,t){for(var r=e.length,o=0;o<r;o++)if(!t(e[o],o,e))return!1;return!0},t.allSame=function(e,r){if(0===e.length)return!0;var o=e[0][r];return(0,t.arrEvery)(e,(function(e){return e[r]===o}))};var m,y={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function v(e){return e.splice(l(e),1)[0]}function _(e){return Math.min((e+2)/3,2)}function b(){return 1-.2*Math.random()}t.defaultGetHeaders=function(e,t){return{accept:y[t||m.json],"X-Ably-Version":i.default.protocolVersion.toString(),"Ably-Agent":(0,i.getAgentString)(e)}},t.defaultPostHeaders=function(e,t){var r;return{accept:r=y[t||m.json],"content-type":r,"X-Ably-Version":i.default.protocolVersion.toString(),"Ably-Agent":(0,i.getAgentString)(e)}},t.arrPopRandomElement=v,t.toQueryString=function(e){var t=[];if(e)for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.length?"?"+t.join("&"):""},t.parseQueryString=function(e){for(var t,r=/([^?&=]+)=?([^&]*)/g,o={};t=r.exec(e);)o[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return o},t.now=Date.now||function(){return(new Date).getTime()},t.isErrorInfoOrPartialErrorInfo=function(e){return"object"==typeof e&&null!==e&&("ErrorInfo"==e.constructor.name||"PartialErrorInfo"==e.constructor.name)},t.inspectError=function(e){var t,r;return e instanceof Error||"ErrorInfo"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||"PartialErrorInfo"===(null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name)?e.toString():n.default.Config.inspect(e)},t.inspectBody=function(e){return n.default.BufferUtils.isBuffer(e)?e.toString():"string"==typeof e?e:n.default.Config.inspect(e)},t.dataSizeBytes=function(e){if(n.default.BufferUtils.isBuffer(e))return n.default.BufferUtils.byteLength(e);if("string"==typeof e)return n.default.Config.stringByteSize(e);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof e)},t.cheapRandStr=function(){return String(Math.random()).substr(2)},t.randomString=function(e){if(n.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return n.default.Config.getRandomValues(t),n.default.BufferUtils.base64Encode(t)}for(var r=n.default.BufferUtils.base64CharSet,o=Math.round(4*e/3),i="",s=0;s<o;s++)i+=r[l(r)];return i},t.randomHexString=function(e){if(n.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return n.default.Config.getRandomValues(t),n.default.BufferUtils.hexEncode(t)}for(var r=n.default.BufferUtils.hexCharSet,o=2*e,i="",s=0;s<o;s++)i+=r[l(r)];return i},t.arrChooseN=function(e,t){for(var r=Math.min(t,e.length),o=e.slice(),n=[],i=0;i<r;i++)n.push(v(o));return n},t.trim=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.promisify=function(e,t,r){return new Promise((function(n,i){e[t].apply(e,o.__spreadArray(o.__spreadArray([],r,!1),[function(e,t){e?i(e):n(t)}],!1))}))},function(e){e.msgpack="msgpack",e.json="json"}(m=t.Format||(t.Format={})),t.decodeBody=function(e,t){return"msgpack"==t?n.default.Config.msgpack.decode(e):JSON.parse(String(e))},t.encodeBody=function(e,t){return"msgpack"==t?n.default.Config.msgpack.encode(e,!0):JSON.stringify(e)},t.allToLowerCase=function(e){return e.map((function(e){return e&&e.toLowerCase()}))},t.allToUpperCase=function(e){return e.map((function(e){return e&&e.toUpperCase()}))},t.getBackoffCoefficient=_,t.getJitterCoefficient=b,t.getRetryTime=function(e,t){return e*_(t)*b()},t.getGlobalObject=function(){return e||("undefined"!=typeof window?window:self)},t.shallowEquals=function(e,t){return Object.keys(e).every((function(r){return e[r]===t[r]}))&&Object.keys(t).every((function(r){return t[r]===e[r]}))},t.matchDerivedChannel=function(e){var t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new s.default("regex match failed",400,40010);if(t[2])throw new s.default("cannot use a derived option with a ".concat(t[2]," channel"),400,40010);return{qualifierParam:t[3]||"",channelName:t[4]}},t.toBase64=function(e){return n.default.Config.createHmac?Buffer.from(e,"ascii").toString("base64"):(0,a.stringify)((0,c.parse)(e))}}).call(this,r(13))},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o,n=r(0).__importDefault(r(3)),i=e||("undefined"!=typeof window?window:self);function s(e,t){return"".concat(e).padStart(t?3:2,"0")}function a(e){return n.default.Config.logTimestamps?function(t){var r=new Date;e(s(r.getHours())+":"+s(r.getMinutes())+":"+s(r.getSeconds())+"."+s(r.getMilliseconds(),1)+" "+t)}:e}!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Major=2]="Major",e[e.Minor=3]="Minor",e[e.Micro=4]="Micro"}(o||(o={}));var c=function(){function e(){e.logLevel=e.LOG_DEFAULT}return e.initLogHandlers=function(){var e=function(){var e,t,r,o;return"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope||"function"==typeof(null===(t=null===(e=null==i?void 0:i.console)||void 0===e?void 0:e.log)||void 0===t?void 0:t.apply)?(r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},o=console.warn?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)}:r):r=o=(null==i?void 0:i.console.log)?function(){Function.prototype.apply.call(console.log,console,arguments)}:function(){},[r,o].map(a)}(),t=e[0],r=e[1];this.logHandler=t,this.logErrorHandler=r},e.logLevel=o.Error,e.LOG_NONE=o.None,e.LOG_ERROR=o.Error,e.LOG_MAJOR=o.Major,e.LOG_MINOR=o.Minor,e.LOG_MICRO=o.Micro,e.LOG_DEFAULT=o.Error,e.LOG_DEBUG=o.Micro,e.logAction=function(t,r,n){e.shouldLog(t)&&(t===o.Error?e.logErrorHandler:e.logHandler)("Ably: "+r+": "+n)},e.deprecated=function(t,r){e.deprecatedWithMsg(t,"Please use '"+r+"' instead.")},e.deprecatedWithMsg=function(t,r){e.shouldLog(o.Error)&&e.logErrorHandler("Ably: Deprecation warning - '"+t+"' is deprecated and will be removed from a future version. "+r)},e.shouldLog=function(t){return t<=e.logLevel},e.setLog=function(t,r){void 0!==t&&(e.logLevel=t),void 0!==r&&(e.logHandler=e.logErrorHandler=r)},e}();t.default=c}).call(this,r(13))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartialErrorInfo=void 0;var o=r(0),n=o.__importDefault(r(3)),i=o.__importStar(r(1));function s(e){var t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+i.inspectError(e.cause)),!e.href||e.message&&e.message.indexOf("help.ably.io")>-1||(t+="; see "+e.href+" "),t+"]"}var a=function(e){function t(r,o,n,i){var s=e.call(this,r)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(s,t.prototype),s.code=o,s.statusCode=n,s.cause=i,s}return o.__extends(t,e),t.prototype.toString=function(){return s(this)},t.fromValues=function(e){var r=e,o=r.message,i=r.code,s=r.statusCode;if("string"!=typeof o||"number"!=typeof i||"number"!=typeof s)throw new Error("ErrorInfo.fromValues(): invalid values: "+n.default.Config.inspect(e));var a=Object.assign(new t(o,i,s),e);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a},t}(Error);t.default=a;var c=function(e){function t(r,o,n,i){var s=e.call(this,r)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(s,t.prototype),s.code=o,s.statusCode=n,s.cause=i,s}return o.__extends(t,e),t.prototype.toString=function(){return s(this)},t}(Error);t.PartialErrorInfo=c},function(e,t,r){var o;e.exports=(o=r(6),function(){if("function"==typeof ArrayBuffer){var e=o.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,o=[],n=0;n<r;n++)o[n>>>2]|=e[n]<<24-n%4*8;t.call(this,o,r)}else t.apply(this,arguments)};r.prototype=e}}(),o.lib.WordArray)},function(e,t,r){(function(t){var o;e.exports=(o=o||function(e,o){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==t&&t.crypto&&(n=t.crypto),!n)try{n=r(44)}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),a={},c=a.lib={},l=c.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=c.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||g).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(i=0;i<n;i+=4)t[o+i>>>2]=r[i>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new u.init(t,e)}}),p=a.enc={},g=p.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new u.init(r,t/2)}},d=p.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new u.init(r,t)}},f=p.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,o=this._data,n=o.words,i=o.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,i);if(c){for(var p=0;p<c;p+=s)this._doProcessBlock(n,p);r=n.splice(0,c),o.sigBytes-=l}return new u.init(r,l)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(c.Hasher=h.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new m.HMAC.init(e,r).finalize(t)}}}),a.algo={});return a}(Math),o)}).call(this,r(13))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(2)),s=o.__importDefault(r(3));function a(e,t,r){try{t.apply(e,r)}catch(e){i.default.logAction(i.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+e+"; stack = "+(e&&e.stack))}}function c(e,t,r){for(var o,i,s,a=0;a<e.length;a++)if(o=e[a],r&&(o=o[r]),n.isArray(o)){for(;-1!==(i=n.arrIndexOf(o,t));)o.splice(i,1);r&&0===o.length&&delete e[a][r]}else if(n.isObject(o))for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&n.isArray(o[s])&&c([o],t,s)}var l=function(){function e(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return e.prototype.on=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(1===t.length){var o=t[0];if("function"!=typeof o)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));this.any.push(o)}if(2===t.length){var i=t[0],a=t[1];if("function"!=typeof a)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));if(n.isEmptyArg(i))this.any.push(a);else if(n.isArray(i))i.forEach((function(t){e.on(t,a)}));else{if("string"!=typeof i)throw new Error("EventListener.on(): Invalid arguments: "+s.default.Config.inspect(t));(this.events[i]||(this.events[i]=[])).push(a)}}},e.prototype.off=function(){for(var e,t=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(0==r.length||n.isEmptyArg(r[0])&&n.isEmptyArg(r[1]))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));var i=r[0],a=r[1],l=null,u=null;if(1!==r.length&&a){if("function"!=typeof a)throw new Error("EventEmitter.off(): invalid arguments:"+s.default.Config.inspect(r));u=(e=[i,a])[0],l=e[1]}else"function"==typeof i?l=i:u=i;if(l&&n.isEmptyArg(u))c([this.any,this.events,this.anyOnce,this.eventsOnce],l);else if(n.isArray(u))u.forEach((function(e){t.off(e,l)}));else{if("string"!=typeof u)throw new Error("EventEmitter.off(): invalid arguments:"+s.default.Config.inspect(r));l?c([this.events,this.eventsOnce],l,u):(delete this.events[u],delete this.eventsOnce[u])}},e.prototype.listeners=function(e){if(e){var t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o={event:e},i=[];this.anyOnce.length&&(Array.prototype.push.apply(i,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(i,this.any);var s=this.eventsOnce[e];s&&(Array.prototype.push.apply(i,s),delete this.eventsOnce[e]);var c=this.events[e];c&&Array.prototype.push.apply(i,c),n.arrForEach(i,(function(e){a(o,e,t)}))},e.prototype.once=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=t.length;if((0===o||1===o&&"function"!=typeof t[0])&&s.default.Config.Promise){var i=t[0];return new s.default.Config.Promise((function(t){e.once(i,t)}))}var a=t[0],c=t[1];if(1===t.length&&"function"==typeof a)this.anyOnce.push(a);else if(n.isEmptyArg(a)){if("function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));this.anyOnce.push(c)}else if(n.isArray(a)){var l=this,u=function(){var e=Array.prototype.slice.call(arguments);if(n.arrForEach(a,(function(e){l.off(e,u)})),"function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));c.apply(this,e)};n.arrForEach(a,(function(e){l.on(e,u)}))}else{if("string"!=typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));var p=this.eventsOnce[a]||(this.eventsOnce[a]=[]);if(c){if("function"!=typeof c)throw new Error("EventEmitter.once(): Invalid arguments:"+s.default.Config.inspect(t));p.push(c)}}},e.prototype.whenState=function(t,r,o){for(var n=this,i=[],c=3;c<arguments.length;c++)i[c-3]=arguments[c];var l={event:t};if("string"!=typeof t||"string"!=typeof r)throw"whenState requires a valid event String argument";if("function"!=typeof o&&s.default.Config.Promise)return new s.default.Config.Promise((function(o){e.prototype.whenState.apply(n,[t,r,o].concat(i))}));t===r?a(l,o,i):this.once(t,o)},e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaults=t.normaliseOptions=t.objectifyOptions=t.getAgentString=t.getHosts=t.getFallbackHosts=t.environmentFallbackHosts=t.getHttpScheme=t.getPort=t.getHost=void 0;var o=r(0),n=o.__importDefault(r(3)),i=o.__importStar(r(1)),s=o.__importDefault(r(2)),a=o.__importDefault(r(4)),c=r(43),l="ably-js/"+c.version,u={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:c.version,protocolVersion:2,agent:l,getHost:p,getPort:g,getHttpScheme:d,environmentFallbackHosts:f,getFallbackHosts:h,getHosts:m,checkHost:y,objectifyOptions:v,normaliseOptions:_};function p(e,t,r){return r?t==e.restHost&&e.realtimeHost||t||e.realtimeHost:t||e.restHost}function g(e,t){return t||e.tls?e.tlsPort:e.port}function d(e){return e.tls?"https://":"http://"}function f(e){return[e+"-a-fallback.ably-realtime.com",e+"-b-fallback.ably-realtime.com",e+"-c-fallback.ably-realtime.com",e+"-d-fallback.ably-realtime.com",e+"-e-fallback.ably-realtime.com"]}function h(e){var t=e.fallbackHosts,r=void 0!==e.httpMaxRetryCount?e.httpMaxRetryCount:u.httpMaxRetryCount;return t?i.arrChooseN(t,r):[]}function m(e){return[e.restHost].concat(h(e))}function y(e){if("string"!=typeof e)throw new a.default("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new a.default("host must not be zero-length",4e4,400)}function v(e){return"string"==typeof e?-1==e.indexOf(":")?{token:e}:{key:e}:e}function _(e){if(e.host&&(s.default.deprecated("host","restHost"),e.restHost=e.host),e.wsHost&&(s.default.deprecated("wsHost","realtimeHost"),e.realtimeHost=e.wsHost),e.queueEvents&&(s.default.deprecated("queueEvents","queueMessages"),e.queueMessages=e.queueEvents),e.fallbackHostsUseDefault){if(e.fallbackHosts){var t="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions",t),new a.default(t,4e4,400)}if(e.port||e.tlsPort)throw t="fallbackHostsUseDefault cannot be set when port or tlsPort are set",s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions",t),new a.default(t,4e4,400);e.environment?s.default.deprecatedWithMsg("fallbackHostsUseDefault","There is no longer a need to set this when the environment option is also set since the library will now generate the correct fallback hosts using the environment option."):s.default.deprecated("fallbackHostsUseDefault","fallbackHosts: Ably.Defaults.FALLBACK_HOSTS"),e.fallbackHosts=u.FALLBACK_HOSTS}!0===e.recover&&(s.default.deprecated("{recover: true}","{recover: function(lastConnectionDetails, cb) { cb(true); }}"),e.recover=function(e,t){t(!0)}),"function"==typeof e.recover&&!0===e.closeOnUnload&&(s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),e.transports&&i.arrIn(e.transports,"xhr")&&(s.default.deprecated('transports: ["xhr"]','transports: ["xhr_streaming"]'),i.arrDeleteValue(e.transports,"xhr"),e.transports.push("xhr_streaming")),"queueMessages"in e||(e.queueMessages=!0);var r=e.environment&&String(e.environment).toLowerCase()||u.ENVIRONMENT,c=!r||"production"===r;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=c?u.FALLBACK_HOSTS:f(r));var l=e.restHost||(c?u.REST_HOST:r+"-"+u.REST_HOST),p=function(e,t,r){return e.realtimeHost?e.realtimeHost:e.restHost?(s.default.logAction(s.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+e.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+e.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),e.restHost):t?u.REALTIME_HOST:r+"-"+u.REALTIME_HOST}(e,c,r);i.arrForEach((e.fallbackHosts||[]).concat(l,p),y),e.port=e.port||u.PORT,e.tlsPort=e.tlsPort||u.TLS_PORT,"tls"in e||(e.tls=!0);var g=function(e){var t={};for(var r in u.TIMEOUTS)t[r]=e[r]||u.TIMEOUTS[r];return t}(e);e.useBinaryProtocol="useBinaryProtocol"in e?n.default.Config.supportsBinary&&e.useBinaryProtocol:n.default.Config.preferBinary,e.clientId&&((e.headers=e.headers||{})["X-Ably-ClientId"]=n.default.BufferUtils.base64Encode(n.default.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0),e.promises&&!n.default.Config.Promise&&(s.default.logAction(s.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),e.promises=!1);var d=null,h=e.connectivityCheckUrl;if(e.connectivityCheckUrl){var m=e.connectivityCheckUrl.split("?"),v=m[0],_=m[1];d=_?i.parseQueryString(_):{},-1===v.indexOf("://")&&(v="https://"+v),h=v}return o.__assign(o.__assign({},e),{useBinaryProtocol:"useBinaryProtocol"in e?n.default.Config.supportsBinary&&e.useBinaryProtocol:n.default.Config.preferBinary,realtimeHost:p,restHost:l,maxMessageSize:e.maxMessageSize||u.maxMessageSize,timeouts:g,connectivityCheckParams:d,connectivityCheckUrl:h})}t.getHost=p,t.getPort=g,t.getHttpScheme=d,t.environmentFallbackHosts=f,t.getFallbackHosts=h,t.getHosts=m,t.getAgentString=function(e){var t=u.agent;if(e.agents)for(var r in e.agents)t+=" "+r+"/"+e.agents[r];return t},t.objectifyOptions=v,t.normaliseOptions=_,t.default=u,t.getDefaults=function(e){return Object.assign(u,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(3)),i=o.__importDefault(r(2)),s=o.__importDefault(r(4)),a=o.__importStar(r(1));function c(e){var t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=a.dataSizeBytes(e.data)),t}var l=function(){function e(){}return e.prototype.toJSON=function(){var e=this.encoding,t=this.data;return t&&n.default.BufferUtils.isBuffer(t)&&(arguments.length>0?(e=e?e+"/base64":"base64",t=n.default.BufferUtils.base64Encode(t)):t=n.default.BufferUtils.toBuffer(t)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:e,data:t}},e.prototype.toString=function(){var e="[Message";return this.name&&(e+="; name="+this.name),this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.extras&&(e+="; extras ="+JSON.stringify(this.extras)),this.data&&("string"==typeof this.data?e+="; data="+this.data:n.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+n.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+"]"},e.encrypt=function(e,t,r){var o=e.data,i=e.encoding,s=t.channelCipher;i=i?i+"/":"",n.default.BufferUtils.isBuffer(o)||(o=n.default.BufferUtils.utf8Encode(String(o)),i+="utf-8/"),s.encrypt(o,(function(t,o){t?r(t):(e.data=o,e.encoding=i+"cipher+"+s.algorithm,r(null,e))}))},e.encode=function(t,r,o){var i=t.data;if("string"!=typeof i&&!n.default.BufferUtils.isBuffer(i)&&null!=i){if(!a.isObject(i)&&!a.isArray(i))throw new s.default("Data type is unsupported",40013,400);t.data=JSON.stringify(i),t.encoding=t.encoding?t.encoding+"/json":"json"}null!=r&&r.cipher?e.encrypt(t,r,o):o(null,t)},e.encodeArray=function(t,r,o){for(var n=0,i=0;i<t.length;i++)e.encode(t[i],r,(function(e){e?o(e):++n==t.length&&o(null,t)}))},e.decode=function(e,t){var r=function(e){return e&&e.channelOptions?e:{channelOptions:e,plugins:{},baseEncodedPreviousPayload:void 0}}(t),o=e.data,i=e.encoding;if(i){var a=i.split("/"),c=void 0,l=a.length,u=e.data,p="";try{for(;(c=l)>0;){var g=a[--l].match(/([-\w]+)(\+([\w-]+))?/);if(!g)break;switch(p=g[1]){case"base64":u=n.default.BufferUtils.base64Decode(String(u)),c==a.length&&(o=u);continue;case"utf-8":u=n.default.BufferUtils.utf8Decode(u);continue;case"json":u=JSON.parse(u);continue;case"cipher":if(null!=r.channelOptions&&r.channelOptions.cipher&&r.channelOptions.channelCipher){var d=g[3],f=r.channelOptions.channelCipher;if(d!=f.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");u=f.decrypt(u);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!r.plugins||!r.plugins.vcdiff)throw new s.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"==typeof Uint8Array)throw new s.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var h=r.baseEncodedPreviousPayload;"string"==typeof h&&(h=n.default.BufferUtils.utf8Encode(h)),h=n.default.BufferUtils.toBuffer(h),u=n.default.BufferUtils.toBuffer(u),o=u=n.default.BufferUtils.typedArrayToBuffer(r.plugins.vcdiff.decode(u,h))}catch(e){throw new s.default("Vcdiff delta decode failed with "+e,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(e){var m=e;throw new s.default("Error processing the "+p+" encoding, decoder returned ‘"+m.message+"’",m.code||40013,400)}finally{e.encoding=c<=0?null:a.slice(0,c).join("/"),e.data=u}}r.baseEncodedPreviousPayload=o},e.fromResponseBody=function(t,r,o){o&&(t=a.decodeBody(t,o));for(var n=0;n<t.length;n++){var s=t[n]=e.fromValues(t[n]);try{e.decode(s,r)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromResponseBody()",e.toString())}}return t},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var r=t.length,o=new Array(r),n=0;n<r;n++)o[n]=e.fromValues(t[n]);return o},e.fromEncoded=function(t,r){var o=e.fromValues(t),s=function(e){if(e&&e.cipher){if(!n.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var t=n.default.Crypto.getCipher(e.cipher);return{cipher:t.cipherParams,channelCipher:t.cipher}}return null!=e?e:{}}(null!=r?r:null);try{e.decode(o,s)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromEncoded()",e.toString())}return o},e.fromEncodedArray=function(t,r){return t.map((function(t){return e.fromEncoded(t,r)}))},e.getMessagesSize=function(e){for(var t,r=0,o=0;o<e.length;o++)r+=(t=e[o]).size||(t.size=c(t));return r},e.serialize=a.encodeBody,e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(4)),s=o.__importDefault(r(9)),a=o.__importDefault(r(14)),c={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},l=[];Object.keys(c).forEach((function(e){l[c[e]]=e}));var u={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},p=Object.keys(u);function g(e){var t=[];if(e)for(var r=0;r<e.length;r++)t.push(e[r].toString());return"[ "+t.join(", ")+" ]"}u.MODE_ALL=u.PRESENCE|u.PUBLISH|u.SUBSCRIBE|u.PRESENCE_SUBSCRIBE;var d="id channel channelSerial connectionId count msgSerial timestamp".split(" "),f=function(){function e(){var e=this;this.hasFlag=function(t){return(e.flags&u[t])>0}}return e.prototype.setFlag=function(e){return this.flags=this.flags|u[e]},e.prototype.getMode=function(){return this.flags&&this.flags&u.MODE_ALL},e.prototype.encodeModesToFlags=function(e){var t=this;e.forEach((function(e){return t.setFlag(e)}))},e.prototype.decodeModesFromFlags=function(){var t=this,r=[];return e.channelModes.forEach((function(e){t.hasFlag(e)&&r.push(e)})),r.length>0?r:void 0},e.fromValues=function(t){return Object.assign(new e,t)},e.Action=c,e.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],e.ActionName=l,e.serialize=n.encodeBody,e.deserialize=function(t,r){var o=n.decodeBody(t,r);return e.fromDeserialized(o)},e.fromDeserialized=function(t){var r=t.error;r&&(t.error=i.default.fromValues(r));var o=t.messages;if(o)for(var n=0;n<o.length;n++)o[n]=s.default.fromValues(o[n]);var c=t.presence;if(c)for(n=0;n<c.length;n++)c[n]=a.default.fromValues(c[n],!0);return Object.assign(new e,t)},e.stringify=function(t){var r,o="[ProtocolMessage";void 0!==t.action&&(o+="; action="+e.ActionName[t.action]||0);for(var c=0;c<d.length;c++)r=d[c],void 0!==t[r]&&(o+="; "+r+"="+t[r]);if(t.messages&&(o+="; messages="+g(s.default.fromValuesArray(t.messages))),t.presence&&(o+="; presence="+g(a.default.fromValuesArray(t.presence))),t.error&&(o+="; error="+i.default.fromValues(t.error).toString()),t.auth&&t.auth.accessToken&&(o+="; token="+t.auth.accessToken),t.flags&&(o+="; flags="+p.filter(t.hasFlag).join(",")),t.params){var l="";n.forInOwnNonNullProperties(t.params,(function(e){l.length>0&&(l+="; "),l+=e+"="+t.params[e]})),l.length>0&&(o+="; params=["+l+"]")}return o+"]"},e}();t.default=f},function(e,t,r){var o,n,i;e.exports=(o=r(6),i=(n=o).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.clamp();for(var n=[],i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)n.push(o.charAt(s>>>6*(3-a)&63));var c=o.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var n=0;n<65;n++)o[r.charCodeAt(n)]=n}var s=r.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,r){for(var o=[],n=0,s=0;s<t;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;o[n>>>2]|=a<<24-n%4*8,n++}return i.create(o,n)}(e,t,o)}},o.enc.Base64)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(10)),s=o.__importDefault(r(26)),a=o.__importDefault(r(2)),c=o.__importDefault(r(8)),l=o.__importDefault(r(19)),u=o.__importDefault(r(16)),p=o.__importDefault(r(4)),g=o.__importDefault(r(20)),d=o.__importDefault(r(3));function f(e){return function(e){return!!e.code&&!u.default.isTokenErr(e)&&(!!n.arrIn([80015,80017,80030],e.code)||e.code>=4e4&&e.code<5e4)}(e)?[i.default.fromValues({action:i.default.Action.ERROR,error:e})]:[i.default.fromValues({action:i.default.Action.DISCONNECTED,error:e})]}var h=function(e){function t(t,r,o){var n=e.call(this,t,r,o,!0)||this;return n.onAuthUpdated=function(e){n.authParams={access_token:e.token}},n.stream=!("stream"in o)||o.stream,n.sendRequest=null,n.recvRequest=null,n.pendingCallback=null,n.pendingItems=null,n}return o.__extends(t,e),t.prototype.connect=function(){var e=this;a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","starting"),s.default.prototype.connect.call(this);var t=this.params,r=t.options,o=c.default.getHost(r,t.host),i=c.default.getPort(r),l=r.tls?"https://":"http://";this.baseUri=l+o+":"+i+"/comet/";var u=this.baseUri+"connect";a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","uri: "+u),this.auth.getAuthParams((function(t,r){if(t)e.disconnect(t);else if(!e.isDisposed){e.authParams=r;var o=e.params.getConnectParams(r);"stream"in o&&(e.stream=o.stream),a.default.logAction(a.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+n.toQueryString(o));var i=!1,s=e.recvRequest=e.createRequest(u,null,o,null,e.stream?g.default.REQ_RECV_STREAM:g.default.REQ_RECV);s.on("data",(function(t){e.recvRequest&&(i||(i=!0,e.emit("preconnect")),e.onData(t))})),s.on("complete",(function(t){e.recvRequest||(t=t||new p.default("Request cancelled",80003,400)),e.recvRequest=null,i||t||(i=!0,e.emit("preconnect")),e.onActivity(),t?t.code?e.onData(f(t)):e.disconnect(t):d.default.Config.nextTick((function(){e.recv()}))})),s.exec()}}))},t.prototype.requestClose=function(){a.default.logAction(a.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},t.prototype.requestDisconnect=function(){a.default.logAction(a.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},t.prototype._requestCloseOrDisconnect=function(e){var t=this,r=e?this.closeUri:this.disconnectUri;if(r){var o=this.createRequest(r,null,this.authParams,null,g.default.REQ_SEND);o.on("complete",(function(r){r&&(a.default.logAction(a.default.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+n.inspectError(r)),t.finish("disconnected",r))})),o.exec()}},t.prototype.dispose=function(){var e=this;a.default.logAction(a.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(a.default.logAction(a.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",l.default.disconnected()),d.default.Config.nextTick((function(){e.emit("disposed")})))},t.prototype.onConnect=function(e){var t;if(!this.isDisposed){var r=null===(t=e.connectionDetails)||void 0===t?void 0:t.connectionKey;s.default.prototype.onConnect.call(this,e);var o=this.baseUri+r;a.default.logAction(a.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+o),this.sendUri=o+"/send",this.recvUri=o+"/recv",this.closeUri=o+"/close",this.disconnectUri=o+"/disconnect"}},t.prototype.send=function(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);var t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)},t.prototype.sendAnyPending=function(){var e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))},t.prototype.sendItems=function(e){var t=this,r=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),g.default.REQ_SEND);r.on("complete",(function(e,r){e&&a.default.logAction(a.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+n.inspectError(e)),t.sendRequest=null,e?e.code?t.onData(f(e)):t.disconnect(e):(r&&t.onData(r),t.pendingItems&&d.default.Config.nextTick((function(){t.sendRequest||t.sendAnyPending()})))})),r.exec()},t.prototype.recv=function(){var e=this;if(!this.recvRequest&&this.isConnected){var t=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?g.default.REQ_RECV_STREAM:g.default.REQ_RECV_POLL);t.on("data",(function(t){e.onData(t)})),t.on("complete",(function(t){e.recvRequest=null,e.onActivity(),t?t.code?e.onData(f(t)):e.disconnect(t):d.default.Config.nextTick((function(){e.recv()}))})),t.exec()}},t.prototype.onData=function(e){try{var t=this.decodeResponse(e);if(t&&t.length)for(var r=0;r<t.length;r++)this.onProtocolMessage(i.default.fromDeserialized(t[r]))}catch(e){a.default.logAction(a.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+e.stack)}},t.prototype.encodeRequest=function(e){return JSON.stringify(e)},t.prototype.decodeResponse=function(e){return"string"==typeof e?JSON.parse(e):e},t}(s.default);t.default=h},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(2)),i=o.__importDefault(r(3)),s=o.__importDefault(r(9)),a=o.__importStar(r(1));function c(e){return l.Actions.indexOf(e)}var l=function(){function e(){}return e.prototype.isSynthesized=function(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId},e.prototype.parseId=function(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");var e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}},e.prototype.toJSON=function(){var e=this.data,t=this.encoding;return e&&i.default.BufferUtils.isBuffer(e)&&(arguments.length>0?(t=t?t+"/base64":"base64",e=i.default.BufferUtils.base64Encode(e)):e=i.default.BufferUtils.toBuffer(e)),{id:this.id,clientId:this.clientId,action:c(this.action),data:e,encoding:t}},e.prototype.toString=function(){var e="[PresenceMessage";return e+="; action="+this.action,this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.data&&("string"==typeof this.data?e+="; data="+this.data:i.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+i.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),e+"]"},e.fromResponseBody=function(t,r,o){var i=[];o&&(t=a.decodeBody(t,o));for(var s=0;s<t.length;s++){var c=i[s]=e.fromValues(t[s],!0);try{e.decode(c,r)}catch(e){n.default.logAction(n.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",e.toString())}}return i},e.fromValues=function(t,r){return r&&(t.action=e.Actions[t.action]),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var r=t.length,o=new Array(r),n=0;n<r;n++)o[n]=e.fromValues(t[n]);return o},e.fromEncoded=function(t,r){var o=e.fromValues(t,!0);try{e.decode(o,null!=r?r:{})}catch(e){n.default.logAction(n.default.LOG_ERROR,"PresenceMessage.fromEncoded()",e.toString())}return o},e.fromEncodedArray=function(t,r){return t.map((function(t){return e.fromEncoded(t,r)}))},e.Actions=["absent","present","enter","leave","update"],e.encode=s.default.encode,e.decode=s.default.decode,e.getMessagesSize=s.default.getMessagesSize,e}();t.default=l},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(7)),s=o.__importStar(r(4)),a=o.__importDefault(r(2)),c=o.__importDefault(r(8)),l=o.__importDefault(r(20)),u=o.__importDefault(r(3));var p=function(){},g=0,d={},f=void 0!==e&&e.XDomainRequest;var h=function(e){function t(t,r,o,i,s,a,c){var l,u,p=e.call(this)||this;return(o=o||{}).rnd=n.cheapRandStr(),f&&(l=(u=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/))&&Number(u[1]))&&10===l&&!o.envelope&&(o.envelope="json"),p.uri=t+n.toQueryString(o),p.headers=r||{},p.body=i,p.method=c?c.toUpperCase():n.isEmptyArg(i)?"GET":"POST",p.requestMode=s,p.timeouts=a,p.timedOut=!1,p.requestComplete=!1,p.id=String(++g),d[p.id]=p,p}return o.__extends(t,e),t.createRequest=function(e,r,o,i,s,a,l){var u=a||c.default.TIMEOUTS;return new t(e,r,n.copy(o),i,s,u,l)},t.prototype.complete=function(e,t,r,o,n){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,r,o,n),this.dispose())},t.prototype.abort=function(){this.dispose()},t.prototype.exec=function(){var e=this,t=this.headers,r=this.requestMode==l.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,o=this.timer=setTimeout((function(){e.timedOut=!0,c.abort()}),r),i=this.method,c=this.xhr=new XMLHttpRequest,p=t.accept,g=this.body,d="text";for(var f in p?0===p.indexOf("application/x-msgpack")&&(d="arraybuffer"):t.accept="application/json",g&&(t["content-type"]||(t["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof g&&(g=JSON.stringify(g)),c.open(i,this.uri,!0),c.responseType=d,"authorization"in t&&(c.withCredentials=!0),t)c.setRequestHeader(f,t[f]);var h,m,y,v=function(t,r,o,n){var i,c=r+" (event type: "+t.type+")";(null===(i=null==e?void 0:e.xhr)||void 0===i?void 0:i.statusText)&&(c+=", current statusText is "+e.xhr.statusText),a.default.logAction(a.default.LOG_ERROR,"Request.on"+t.type+"()",c),e.complete(new s.PartialErrorInfo(c,o,n))};c.onerror=function(e){v(e,"XHR error occurred",null,400)},c.onabort=function(t){e.timedOut?v(t,"Request aborted due to request timeout expiring",null,408):v(t,"Request cancelled",null,400)},c.ontimeout=function(e){v(e,"Request timed out",null,408)};var _=0,b=!1,S=function(){var r;try{var o=function(e,t){return e.getResponseHeader&&e.getResponseHeader("content-type")}(c);if(o?o.indexOf("application/json")>=0:"text"==c.responseType){var i="arraybuffer"===c.responseType?u.default.BufferUtils.utf8Decode(c.response):String(c.responseText);r=i.length?JSON.parse(i):i,b=!0}else r=c.response;void 0!==r.response?(m=r.statusCode,y=m<400,t=r.headers,r=r.response):t=function(e){for(var t=n.trim(e.getAllResponseHeaders()).split("\r\n"),r={},o=0;o<t.length;o++){var i=t[o].split(":").map(n.trim);r[i[0].toLowerCase()]=i[1]}return r}(c)}catch(t){return void e.complete(new s.PartialErrorInfo("Malformed response body from server: "+t.message,null,400))}if(y||n.isArray(r))e.complete(null,r,t,b,m);else{var a=function(e,t){if(function(e,t){return n.arrIn(n.allToLowerCase(n.keysArray(t)),"x-ably-errorcode")}(0,t))return e.error&&s.default.fromValues(e.error)}(r,t);a||(a=new s.PartialErrorInfo("Error response received from server: "+m+" body was: "+u.default.Config.inspect(r),null,m)),e.complete(a,r,t,b,m)}};function E(){for(var e,t,r=c.responseText,o=r.length-1;_<o&&(e=r.indexOf("\n",_))>-1;)t=r.slice(_,e),_=e+1,T(t)}var T=function(t){try{t=JSON.parse(t)}catch(t){return void e.complete(new s.PartialErrorInfo("Malformed response body from server: "+t.message,null,400))}e.emit("data",t)};c.onreadystatechange=function(){var t=c.readyState;t<3||0!==c.status&&(void 0===m&&(1223===(m=c.status)&&(m=204),clearTimeout(o),y=m<400,204!=m?h=e.requestMode==l.default.REQ_RECV_STREAM&&y&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(c):e.complete(null,null,null,null,m)),3==t&&h?E():4==t&&(h?(E(),e.streamComplete=!0,u.default.Config.nextTick((function(){e.complete()}))):S()))},c.send(g)},t.prototype.dispose=function(){var e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=p,this.xhr=null;var t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete d[this.id]},t}(i.default);t.default=h}).call(this,r(13))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(2)),i=o.__importStar(r(1)),s=o.__importDefault(r(22)),a=o.__importDefault(r(4)),c=o.__importDefault(r(45)),l=r(11),u=o.__importDefault(r(17)),p=o.__importDefault(r(24)),g=o.__importDefault(r(3)),d=Math.pow(2,17);function f(){}function h(e){return i.isErrorInfoOrPartialErrorInfo(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new a.default(i.inspectError(e),e.code||40170,e.statusCode||401)}var m=function(e,t){if(g.default.Config.createHmac){var r=g.default.Config.createHmac("SHA256",t);return r.update(e),r.digest("base64")}return(0,l.stringify)((0,c.default)(e,t))};function y(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));var t=Object.create(null),r=i.keysArray(e,!0);if(!r)return"";r.sort();for(var o=0;o<r.length;o++)t[r[o]]=e[r[o]].sort();return JSON.stringify(t)}function v(e){if(e.authCallback)n.default.logAction(n.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)n.default.logAction(n.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)n.default.logAction(n.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){var t="authOptions must include valid authentication parameters";throw n.default.logAction(n.default.LOG_ERROR,"Auth()",t),new Error(t)}n.default.logAction(n.default.LOG_MINOR,"Auth()","using token auth with supplied token only")}}var _=0,b=function(){function e(e,t){if(this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,function(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}(t)){if(t.key&&!m){var r="client-side token request signing not supported";throw n.default.logAction(n.default.LOG_ERROR,"Auth()",r),new Error(r)}(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(t)&&n.default.logAction(n.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),v(this.authOptions)}else{if(!t.key)throw r="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)",n.default.logAction(n.default.LOG_ERROR,"Auth()",r),new a.default(r,40160,401);n.default.logAction(n.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}return e.prototype.authorize=function(e,t,r){var o,s=this;if("function"!=typeof e||r?"function"!=typeof t||r?o=t:(r=t,o=null):(r=e,o=e=null),!r&&this.client.options.promises)return i.promisify(this,"authorize",arguments);if(o&&o.key&&this.authOptions.key!==o.key)throw new a.default("Unable to update auth options with incompatible key",40102,401);o&&"force"in o&&(n.default.logAction(n.default.LOG_ERROR,"Auth.authorize","Deprecation warning: specifying {force: true} in authOptions is no longer necessary, authorize() now always gets a new token. Please remove this, as in version 1.0 and later, having a non-null authOptions will overwrite stored library authOptions, which may not be what you want"),i.isOnlyPropIn(o,"force")&&(o=null)),this._forceNewToken(e,o,(function(e,t){if(e)return s.client.connection&&e.statusCode===p.default.Forbidden&&s.client.connection.connectionManager.actOnErrorFromAuthorize(e),void(null==r||r(e));s.client.connection?s.client.connection.connectionManager.onAuthUpdated(t,r||f):null==r||r(null,t)}))},e.prototype.authorise=function(e,t,r){n.default.deprecated("Auth.authorise","Auth.authorize"),this.authorize(e,t,r)},e.prototype._forceNewToken=function(e,t,r){var o=this;this.tokenDetails=null,this._saveTokenOptions(e,t),v(this.authOptions),this._ensureValidAuthCredentials(!0,(function(e,t){delete o.tokenParams.timestamp,delete o.authOptions.queryTime,r(e,t)}))},e.prototype.requestToken=function(e,t,r){var o=this;if("function"!=typeof e||r?"function"!=typeof t||r||(r=t,t=null):(r=e,t=e=null),!r&&this.client.options.promises)return i.promisify(this,"requestToken",arguments);t=t||this.authOptions,e=e||i.copy(this.tokenParams);var s,c=r||f,l=this.client;if(t.authCallback)n.default.logAction(n.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),s=t.authCallback;else if(t.authUrl)n.default.logAction(n.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),s=function(e,r){var s,c=i.mixin({accept:"application/json, text/plain"},t.authHeaders),p=t.authMethod&&"post"===t.authMethod.toLowerCase(),f=t.authUrl.indexOf("?");f>-1&&(s=i.parseQueryString(t.authUrl.slice(f)),t.authUrl=t.authUrl.slice(0,f),p||(t.authParams=i.mixin(s,t.authParams)));var h=i.mixin({},t.authParams||{},e),m=function(e,t,o,s){var c;if(e?n.default.logAction(n.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+i.inspectError(e)):(c=o["content-type"],n.default.logAction(n.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+c+"; body: "+i.inspectBody(t))),e||s)return r(e,t);if(g.default.BufferUtils.isBuffer(t)&&(t=t.toString()),c){var l=c.indexOf("application/json")>-1,u=c.indexOf("text/plain")>-1||c.indexOf("application/jwt")>-1;if(l||u){if(l){if(t.length>d)return void r(new a.default("authUrl response exceeded max permitted length",40170,401));try{t=JSON.parse(t)}catch(e){return void r(new a.default("Unexpected error processing authURL response; err = "+e.message,40170,401))}}r(null,t,c)}else r(new a.default("authUrl responded with unacceptable content-type "+c+", should be either text/plain, application/jwt or application/json",40170,401))}else r(new a.default("authUrl response is missing a content-type header",40170,401))};if(n.default.logAction(n.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+t.authUrl+"; Params: "+JSON.stringify(h)+"; method: "+(p?"POST":"GET")),p){var y=c||{};y["content-type"]="application/x-www-form-urlencoded";var v=i.toQueryString(h).slice(1);o.client.http.doUri(u.default.Post,l,t.authUrl,y,v,s,m)}else o.client.http.doUri(u.default.Get,l,t.authUrl,c||{},null,h,m)};else{if(!t.key)return n.default.logAction(n.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),void c(new a.default("Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)",40171,403));n.default.logAction(n.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),s=function(e,r){o.createTokenRequest(e,t,r)}}"capability"in e&&(e.capability=y(e.capability));var p=!1,m=this.client.options.timeouts.realtimeRequestTimeout,v=setTimeout((function(){p=!0;var e="Token request callback timed out after "+m/1e3+" seconds";n.default.logAction(n.default.LOG_ERROR,"Auth.requestToken()",e),c(new a.default(e,40170,401))}),m);s(e,(function(e,r,s){if(!p){if(clearTimeout(v),e)return n.default.logAction(n.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+i.inspectError(e)),void c(h(e));if("string"!=typeof r){if("object"!=typeof r){var g="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof r;return n.default.logAction(n.default.LOG_ERROR,"Auth.requestToken()",g),void c(new a.default(g,40170,401))}var f=JSON.stringify(r).length;if(f>d&&!t.suppressMaxLengthCheck)c(new a.default("Token request/details object exceeded max permitted stringified size (was "+f+" bytes)",40170,401));else if("issued"in r)c(null,r);else{if(!("keyName"in r))return g="Expected token request callback to call back with a token string, token request object, or token details object",n.default.logAction(n.default.LOG_ERROR,"Auth.requestToken()",g),void c(new a.default(g,40170,401));var m,y,_,b;y=function(e,t,r,o){if(e)return n.default.logAction(n.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+i.inspectError(e)),void c(h(e));o||(t=JSON.parse(t)),n.default.logAction(n.default.LOG_MINOR,"Auth.getToken()","token received"),c(null,t)},_="/keys/"+(m=r).keyName+"/requestToken",b=i.defaultPostHeaders(o.client.options),t.requestHeaders&&i.mixin(b,t.requestHeaders),n.default.logAction(n.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+_+"; Token params: "+JSON.stringify(m)),o.client.http.do(u.default.Post,l,(function(e){return l.baseUri(e)+_}),b,JSON.stringify(m),null,y)}}else 0===r.length?c(new a.default("Token string is empty",40170,401)):r.length>d?c(new a.default("Token string exceeded max permitted length (was "+r.length+" bytes)",40170,401)):"undefined"===r||"null"===r?c(new a.default("Token string was literal null/undefined",40170,401)):"{"!==r[0]||s&&s.indexOf("application/jwt")>-1?c(null,{token:r}):c(new a.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401))}}))},e.prototype.createTokenRequest=function(e,t,r){if("function"!=typeof e||r?"function"!=typeof t||r||(r=t,t=null):(r=e,t=e=null),!r&&this.client.options.promises)return i.promisify(this,"createTokenRequest",arguments);t=t||this.authOptions,e=e||i.copy(this.tokenParams);var o=t.key;if(o){var s=o.split(":"),c=s[0],l=s[1];if(l)if(""!==e.clientId){"capability"in e&&(e.capability=y(e.capability));var u,p=i.mixin({keyName:c},e),g=e.clientId||"",d=e.ttl||"",f=e.capability||"";u=function(){var e=p.nonce||(p.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),t=p.timestamp,o=p.keyName+"\n"+d+"\n"+f+"\n"+g+"\n"+t+"\n"+e+"\n";p.mac=p.mac||m(o,l),n.default.logAction(n.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),r(null,p)},p.timestamp?u():this.getTimestamp(t&&t.queryTime,(function(e,t){e?r(e):(p.timestamp=t,u())}))}else r(new a.default("clientId can’t be an empty string",40012,400));else r(new a.default("Invalid key specified",40101,403))}else r(new a.default("No key specified",40101,403))},e.prototype.getAuthParams=function(e){"basic"==this.method?e(null,{key:this.key}):this._ensureValidAuthCredentials(!1,(function(t,r){if(t)e(t);else{if(!r)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{access_token:r.token})}}))},e.prototype.getAuthHeaders=function(e){"basic"==this.method?e(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,(function(t,r){if(t)e(t);else{if(!r)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{authorization:"Bearer "+i.toBase64(r.token)})}}))},e.prototype.getTimestamp=function(e,t){this.isTimeOffsetSet()||!e&&!this.authOptions.queryTime?t(null,this.getTimestampUsingOffset()):this.client.time(t)},e.prototype.getTimestampUsingOffset=function(){return i.now()+(this.client.serverTimeOffset||0)},e.prototype.isTimeOffsetSet=function(){return null!==this.client.serverTimeOffset},e.prototype._saveBasicOptions=function(e){this.method="basic",this.key=e.key,this.basicKey=i.toBase64(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)},e.prototype._saveTokenOptions=function(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"==typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)},e.prototype._ensureValidAuthCredentials=function(e,t){var r=this,o=this.tokenDetails;if(o){if(this._tokenClientIdMismatch(o.clientId))return void t(new a.default("Mismatch between clientId in token ("+o.clientId+") and current clientId ("+this.clientId+")",40102,403));if(!this.isTimeOffsetSet()||!o.expires||o.expires>=this.getTimestampUsingOffset())return n.default.logAction(n.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+o.expires),void t(null,o);n.default.logAction(n.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=s.default.create())).push(t),null===this.currentTokenRequestId||e){var i=this.currentTokenRequestId=_++;this.requestToken(this.tokenParams,this.authOptions,(function(e,t){if(r.currentTokenRequestId>i)n.default.logAction(n.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");else{r.currentTokenRequestId=null;var o=r.waitingForTokenRequest||f;r.waitingForTokenRequest=null,e?o(e):o(null,r.tokenDetails=t)}}))}},e.prototype._userSetClientId=function(e){if("string"!=typeof e&&null!==e)throw new a.default("clientId must be either a string or null",40012,400);if("*"===e)throw new a.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var t=this._uncheckedSetClientId(e);if(t)throw t},e.prototype._uncheckedSetClientId=function(e){if(this._tokenClientIdMismatch(e)){var t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,r=new a.default(t,40102,401);return n.default.logAction(n.default.LOG_ERROR,"Auth._uncheckedSetClientId()",t),r}return this.clientId=this.tokenParams.clientId=e,null},e.prototype._tokenClientIdMismatch=function(e){return!(!this.clientId||"*"===this.clientId||!e||"*"===e||this.clientId===e)},e.isTokenErr=function(e){return e.code&&e.code>=40140&&e.code<40150},e}();t.default=b},function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch"}(o||(o={})),t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpPaginatedResponse=t.PaginatedResult=void 0;var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(2)),s=o.__importDefault(r(25)),a=function(){function e(e,t,r,o,n,i){this.rest=e,this.path=t,this.headers=r,this.envelope=null!=o?o:null,this.bodyHandler=n,this.useHttpPaginatedResponse=i||!1}return e.prototype.get=function(e,t){var r=this;s.default.get(this.rest,this.path,this.headers,e,this.envelope,(function(e,o,n,i,s){r.handlePage(e,o,n,i,s,t)}))},e.prototype.delete=function(e,t){var r=this;s.default.delete(this.rest,this.path,this.headers,e,this.envelope,(function(e,o,n,i,s){r.handlePage(e,o,n,i,s,t)}))},e.prototype.post=function(e,t,r){var o=this;s.default.post(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,n,i,s){r&&o.handlePage(e,t,n,i,s,r)}))},e.prototype.put=function(e,t,r){var o=this;s.default.put(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,n,i,s){r&&o.handlePage(e,t,n,i,s,r)}))},e.prototype.patch=function(e,t,r){var o=this;s.default.patch(this.rest,this.path,t,this.headers,e,this.envelope,(function(e,t,n,i,s){r&&o.handlePage(e,t,n,i,s,r)}))},e.prototype.handlePage=function(e,t,r,o,s,a){if(e&&function(e,t,r){return!(r&&(t||"number"==typeof e.code))}(e,t,this.useHttpPaginatedResponse))return i.default.logAction(i.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+n.inspectError(e)),void(null==a||a(e));var u,p,g;try{u=this.bodyHandler(t,r||{},o)}catch(t){return void(null==a||a(e||t))}r&&(p=r.Link||r.link)&&(g=function(e){"string"==typeof e&&(e=e.split(","));for(var t,r={},o=0;o<e.length;o++){var i=e[o].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(i){var s=(void 0,(t=i[1].match(/^\.\/(\w+)\?(.*)$/))&&t[2]&&n.parseQueryString(t[2]));s&&(r[i[2]]=s)}}return r}(p)),this.useHttpPaginatedResponse?a(null,new l(this,u,r||{},s,g,e)):a(null,new c(this,u,g))},e}(),c=function(){function e(e,t,r){var o=this;this.resource=e,this.items=t;var i=this;r&&("first"in r&&(this.first=function(e){if(!e&&i.resource.rest.options.promises)return n.promisify(i,"first",[]);i.get(r.first,e)}),"current"in r&&(this.current=function(e){if(!e&&i.resource.rest.options.promises)return n.promisify(i,"current",[]);i.get(r.current,e)}),this.next=function(e){if(!e&&i.resource.rest.options.promises)return n.promisify(i,"next",[]);"next"in r?i.get(r.next,e):e(null)},this.hasNext=function(){return"next"in r},this.isLast=function(){var e;return!(null===(e=o.hasNext)||void 0===e?void 0:e.call(o))})}return e.prototype.get=function(e,t){var r=this.resource;s.default.get(r.rest,r.path,r.headers,e,r.envelope,(function(e,o,n,i,s){r.handlePage(e,o,n,i,s,t)}))},e}();t.PaginatedResult=c;var l=function(e){function t(t,r,o,n,i,s){var a=e.call(this,t,r,i)||this;return a.statusCode=n,a.success=n<300&&n>=200,a.headers=o,a.errorCode=s&&s.code,a.errorMessage=s&&s.message,a}return o.__extends(t,e),t.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},t}(c);t.HttpPaginatedResponse=l,t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRetriable=void 0;var o=r(0).__importDefault(r(4)),n={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},i={disconnected:function(){return o.default.fromValues({statusCode:400,code:n.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return o.default.fromValues({statusCode:400,code:n.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return o.default.fromValues({statusCode:400,code:n.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return o.default.fromValues({statusCode:400,code:n.CLOSING,message:"Connection closing"})},closed:function(){return o.default.fromValues({statusCode:400,code:n.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return o.default.fromValues({statusCode:500,code:n.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return o.default.fromValues({statusCode:500,code:n.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};t.isRetriable=function(e){return!e.statusCode||!e.code||e.statusCode>=500||Object.values(n).includes(e.code)},t.default=i},function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.REQ_SEND=0]="REQ_SEND",e[e.REQ_RECV=1]="REQ_RECV",e[e.REQ_RECV_POLL=2]="REQ_RECV_POLL",e[e.REQ_RECV_STREAM=3]="REQ_RECV_STREAM"}(o||(o={})),t.default=o},function(e,t,r){var o;e.exports=(o=r(6),r(5),r(58),r(11),r(40),r(32),r(23),r(27),r(28),r(59),r(60),o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__importDefault(r(2)),n=function(){function e(e){this.members=e||[]}return e.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=this.members;r<n.length;r++){var i=n[r];if(i)try{i.apply(void 0,e)}catch(e){o.default.logAction(o.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+e+"; stack = "+e.stack)}}},e.prototype.push=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.members).push.apply(e,t)},e.create=function(t){var r=new e(t);return Object.assign((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.call.apply(r,e)}),{push:function(e){return r.push(e)}})},e}();t.default=n},function(e,t,r){var o,n,i;e.exports=(n=(o=r(6)).lib.Base,i=o.enc.Utf8,void(o.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),s=this._iKey=t.clone(),a=n.words,c=s.words,l=0;l<r;l++)a[l]^=1549556828,c[l]^=909522486;n.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))},function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.isSuccessCode=void 0,function(e){e[e.Success=200]="Success",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestTimeout=408]="RequestTimeout",e[e.InternalServerError=500]="InternalServerError"}(o||(o={})),t.isSuccessCode=function(e){return e>=o.Success&&e<o.BadRequest},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(3)),i=o.__importStar(r(1)),s=o.__importDefault(r(2)),a=o.__importDefault(r(16)),c=o.__importDefault(r(17)),l=r(4);function u(e,t,r,o,n){e.http.supportsAuthHeaders?e.auth.getAuthHeaders((function(e,s){e?o(e):n(i.mixin(s,t),r)})):e.auth.getAuthParams((function(e,s){e?o(e):n(t,i.mixin(s,r))}))}function p(e){var t=[];if(e)for(var r in e)t.push(r+"="+e[r]);return t.join("&")}function g(e,t){return e+(t?"?":"")+p(t)}var d=function(){function e(){}return e.get=function(t,r,o,n,i,s){e.do(c.default.Get,t,r,null,o,n,i,s)},e.delete=function(t,r,o,n,i,s){e.do(c.default.Delete,t,r,null,o,n,i,s)},e.post=function(t,r,o,n,i,s,a){e.do(c.default.Post,t,r,o,n,i,s,a)},e.patch=function(t,r,o,n,i,s,a){e.do(c.default.Patch,t,r,o,n,i,s,a)},e.put=function(t,r,o,n,i,s,a){e.do(c.default.Put,t,r,o,n,i,s,a)},e.do=function(e,t,r,o,c,d,f,h){s.default.shouldLog(s.default.LOG_MICRO)&&(h=function(e,t,r,o){return function(a,c,l,u,d){a?s.default.logAction(s.default.LOG_MICRO,"Resource."+t+"()","Received Error; "+g(r,o)+"; Error: "+i.inspectError(a)):s.default.logAction(s.default.LOG_MICRO,"Resource."+t+"()","Received; "+g(r,o)+"; Headers: "+p(l)+"; StatusCode: "+d+"; Body: "+(n.default.BufferUtils.isBuffer(c)?c.toString():c)),e&&e(a,c,l,u,d)}}(h,e,r,d)),f&&(h=h&&function(e,t){return function(r,o,n,s,a){if(!r||o){if(!s)try{o=i.decodeBody(o,t)}catch(t){return void(i.isErrorInfoOrPartialErrorInfo(t)?e(t):e(new l.PartialErrorInfo(i.inspectError(t),null)))}if(o){var c=o,u=c.statusCode,p=c.response,g=c.headers;if(void 0!==u){if(u<200||u>=300){var d=p&&p.error||r;return d||((d=new Error("Error in unenveloping "+o)).statusCode=u),void e(d,p,g,!0,u)}e(r,p,g,!0,u)}else e(r,o,n,!0,a)}else e(new l.PartialErrorInfo("unenvelope(): Response body is missing",null))}else e(r)}}(h,f),(d=d||{}).envelope=f),u(t,c,d,h,(function c(l,p){var d;if(s.default.shouldLog(s.default.LOG_MICRO)&&s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending; "+g(r,p)),s.default.shouldLog(s.default.LOG_MICRO)){var f=o;if((null===(d=l["content-type"])||void 0===d?void 0:d.indexOf("msgpack"))>0)try{f=n.default.Config.msgpack.decode(o)}catch(t){s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+i.inspectError(t))}s.default.logAction(s.default.LOG_MICRO,"Resource."+e+"()","Sending; "+g(r,p)+"; Body: "+f)}t.http.do(e,t,r,l,o,p,(function(e,r,o,n,i){e&&a.default.isTokenErr(e)?t.auth.authorize(null,null,(function(e){e?h(e):u(t,o,p,h,c)})):h(e,r,o,n,i)}))}))},e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(10)),i=o.__importStar(r(1)),s=o.__importDefault(r(7)),a=o.__importDefault(r(2)),c=o.__importDefault(r(19)),l=o.__importDefault(r(4)),u=o.__importDefault(r(3)),p=n.default.Action,g=n.default.fromValues({action:p.CLOSE}),d=n.default.fromValues({action:p.DISCONNECT}),f=function(e){function t(t,r,o,n){var i=e.call(this)||this;return n&&(o.format=void 0,o.heartbeats=!0),i.connectionManager=t,t.registerProposedTransport(i),i.auth=r,i.params=o,i.timeouts=o.options.timeouts,i.format=o.format,i.isConnected=!1,i.isFinished=!1,i.isDisposed=!1,i.maxIdleInterval=null,i.idleTimer=null,i.lastActivity=null,i}return o.__extends(t,e),t.prototype.connect=function(){},t.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",c.default.closed())},t.prototype.disconnect=function(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||c.default.disconnected())},t.prototype.fail=function(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||c.default.failed())},t.prototype.finish=function(e,t){var r;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!==(r=this.idleTimer)&&void 0!==r?r:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())},t.prototype.onProtocolMessage=function(e){switch(a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+n.default.stringify(e)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case p.HEARTBEAT:a.default.logAction(a.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case p.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case p.CLOSED:this.onClose(e);break;case p.DISCONNECTED:this.onDisconnect(e);break;case p.ACK:this.emit("ack",e.msgSerial,e.count);break;case p.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case p.SYNC:this.connectionManager.onChannelMessage(e,this);break;case p.ACTIVATE:break;case p.AUTH:this.auth.authorize((function(e){e&&a.default.logAction(a.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+i.inspectError(e))}));break;case p.ERROR:if(a.default.logAction(a.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+u.default.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}this.connectionManager.onChannelMessage(e,this);break;default:this.connectionManager.onChannelMessage(e,this)}},t.prototype.onConnect=function(e){if(this.isConnected=!0,!e.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");var t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())},t.prototype.onDisconnect=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onDisconnect()","err = "+i.inspectError(t)),this.finish("disconnected",t)},t.prototype.onFatalError=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onFatalError()","err = "+i.inspectError(t)),this.finish("failed",t)},t.prototype.onClose=function(e){var t=e&&e.error;a.default.logAction(a.default.LOG_MINOR,"Transport.onClose()","err = "+i.inspectError(t)),this.finish("closed",t)},t.prototype.requestClose=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.requestClose()",""),this.send(g)},t.prototype.requestDisconnect=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(d)},t.prototype.ping=function(e){var t={action:n.default.Action.HEARTBEAT};e&&(t.id=e),this.send(n.default.fromValues(t))},t.prototype.dispose=function(){a.default.logAction(a.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},t.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=i.now(),this.setIdleTimer(this.maxIdleInterval+100))},t.prototype.setIdleTimer=function(e){var t=this;this.idleTimer||(this.idleTimer=setTimeout((function(){t.onIdleTimerExpire()}),e))},t.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var e=i.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){var r="No activity seen from realtime in "+e+"ms; assuming connection has dropped";a.default.logAction(a.default.LOG_ERROR,"Transport.onIdleTimerExpire()",r),this.disconnect(new l.default(r,80003,408))}else this.setIdleTimer(t+100)},t.tryConnect=function(e,t,r,o,n){var i,s=new e(t,r,o),c=function(e){clearTimeout(i),n({event:this.event,error:e})},u=t.options.timeouts.realtimeRequestTimeout;i=setTimeout((function(){s.off(["preconnect","disconnected","failed"]),s.dispose(),c.call({event:"disconnected"},new l.default("Timeout waiting for transport to indicate itself viable",5e4,500))}),u),s.on(["failed","disconnected"],c),s.on("preconnect",(function(){a.default.logAction(a.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+s),clearTimeout(i),s.off(["failed","disconnected"],c),n(null,s)})),s.connect()},t}(s.default);t.default=f},function(e,t,r){var o,n,i,s,a,c,l,u;e.exports=(u=r(6),r(40),r(23),i=(n=(o=u).lib).Base,s=n.WordArray,c=(a=o.algo).MD5,l=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,o=this.cfg,n=o.hasher.create(),i=s.create(),a=i.words,c=o.keySize,l=o.iterations;a.length<c;){r&&n.update(r),r=n.update(e).finalize(t),n.reset();for(var u=1;u<l;u++)r=n.finalize(r),n.reset();i.concat(r)}return i.sigBytes=4*c,i}}),o.EvpKDF=function(e,t,r){return l.create(r).compute(e,t)},u.EvpKDF)},function(e,t,r){var o,n,i,s,a,c,l,u,p,g,d,f,h,m,y,v,_,b,S;e.exports=(o=r(6),r(27),void(o.lib.Cipher||(n=o,i=n.lib,s=i.Base,a=i.WordArray,c=i.BufferedBlockAlgorithm,l=n.enc,l.Utf8,u=l.Base64,p=n.algo.EvpKDF,g=i.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?S:_}return function(t){return{encrypt:function(r,o,n){return e(o).encrypt(t,r,o,n)},decrypt:function(r,o,n){return e(o).decrypt(t,r,o,n)}}}}()}),i.StreamCipher=g.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=n.mode={},f=i.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=d.CBC=function(){var e=f.extend();function t(e,t,r){var o,n=this._iv;n?(o=n,this._iv=void 0):o=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=o[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize;t.call(this,e,r,n),o.encryptBlock(e,r),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize,i=e.slice(r,r+n);o.decryptBlock(e,r),t.call(this,e,r,n),this._prevBlock=i}}),e}(),m=(n.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,o=r-e.sigBytes%r,n=o<<24|o<<16|o<<8|o,i=[],s=0;s<o;s+=4)i.push(n);var c=a.create(i,o);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=g.extend({cfg:g.cfg.extend({mode:h,padding:m}),reset:function(){var e;g.reset.call(this);var t=this.cfg,r=t.iv,o=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=o.createEncryptor:(e=o.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(o,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),y=i.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?a.create([1398893684,1701076831]).concat(r).concat(t):t).toString(u)},parse:function(e){var t,r=u.parse(e),o=r.words;return 1398893684==o[0]&&1701076831==o[1]&&(t=a.create(o.slice(2,4)),o.splice(0,4),r.sigBytes-=16),y.create({ciphertext:r,salt:t})}},_=i.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(e,t,r,o){o=this.cfg.extend(o);var n=e.createEncryptor(r,o),i=n.finalize(t),s=n.cfg;return y.create({ciphertext:i,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(r,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(n.kdf={}).OpenSSL={execute:function(e,t,r,o){o||(o=a.random(8));var n=p.create({keySize:t+r}).compute(e,o),i=a.create(n.words.slice(t),4*r);return n.sigBytes=4*t,y.create({key:n,iv:i,salt:o})}},S=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:b}),encrypt:function(e,t,r,o){var n=(o=this.cfg.extend(o)).kdf.execute(r,e.keySize,e.ivSize);o.iv=n.iv;var i=_.encrypt.call(this,e,t,n.key,o);return i.mixIn(n),i},decrypt:function(e,t,r,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var n=o.kdf.execute(r,e.keySize,e.ivSize,t.salt);return o.iv=n.iv,_.decrypt.call(this,e,t,n.key,o)}}))))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.createRequest=void 0;var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(12)),s=o.__importDefault(r(3)),a=o.__importDefault(r(7)),c=r(4),l=o.__importDefault(r(8)),u=o.__importDefault(r(2)),p=o.__importDefault(r(20)),g=n.getGlobalObject(),d=function(){},f=g._ablyjs_jsonp={};f._=function(e){return f["_"+e]||d};var h=1,m="jsonp";function y(e,t,r,o,i,s,a){return s=s||l.default.TIMEOUTS,new _(void 0,e,t,n.copy(r),o,i,s,a)}t.createRequest=y;var v=function(e){function t(t,r,o){var n=e.call(this,t,r,o)||this;return n.shortName=m,o.stream=!1,n}return o.__extends(t,e),t.isAvailable=function(){return s.default.Config.jsonpSupported&&s.default.Config.allowComet},t.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},t.prototype.createRequest=function(e,t,r,o,n,i,s){return y(e,t,r,o,n,i=(null==this?void 0:this.timeouts)||i||l.default.TIMEOUTS,s)},t}(i.default),_=function(e){function t(t,r,o,i,s,a,c,l){var u=e.call(this)||this;return void 0===t&&(t=h++),u.id=t,u.uri=r,u.params=i||{},u.params.rnd=n.cheapRandStr(),o&&(o["X-Ably-Version"]&&(u.params.v=o["X-Ably-Version"]),o["X-Ably-Lib"]&&(u.params.lib=o["X-Ably-Lib"])),u.body=s,u.method=l,u.requestMode=a,u.timeouts=c,u.requestComplete=!1,u}return o.__extends(t,e),t.prototype.exec=function(){var e=this,t=this.id,r=this.body,o=this.method,i=this.uri,a=this.params;a.callback="_ablyjs_jsonp._("+t+")",a.envelope="jsonp",r&&(a.body=r),o&&"get"!==o&&(a.method=o);var l=this.script=document.createElement("script"),g=i+n.toQueryString(a);l.src=g,l.src.split("/").slice(-1)[0]!==g.split("/").slice(-1)[0]&&u.default.logAction(u.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),l.async=!0,l.type="text/javascript",l.charset="UTF-8",l.onerror=function(t){e.complete(new c.PartialErrorInfo("JSONP script error (event: "+s.default.Config.inspect(t)+")",null,400))},f["_"+t]=function(t){if(t.statusCode){var r=t.response;if(204==t.statusCode)e.complete(null,null,null,t.statusCode);else if(r)if(t.statusCode<400||n.isArray(r))e.complete(null,r,t.headers,t.statusCode);else{var o=r.error||new c.PartialErrorInfo("Error response received from server",null,t.statusCode);e.complete(o)}else e.complete(new c.PartialErrorInfo("Invalid server response: no envelope detected",null,500))}else e.complete(null,t)};var d=this.requestMode==p.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),d);var h=document.getElementsByTagName("head")[0];h.insertBefore(l,h.firstChild)},t.prototype.complete=function(e,t,r,o){if(r=r||{},!this.requestComplete){this.requestComplete=!0;var n=void 0;t&&(n="string"==typeof t?"text/plain":"application/json",r["content-type"]=n,this.emit("data",t)),this.emit("complete",e,t,r,!0,o),this.dispose()}},t.prototype.abort=function(){this.dispose()},t.prototype.dispose=function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null);var t=this.script;t.parentNode&&t.parentNode.removeChild(t),delete f[this.id],this.emit("disposed")},t}(a.default);t.Request=_,t.default=function(e){return g.JSONPTransport=v,v.isAvailable()&&(e.supportedTransports[m]=v),v}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(2)),s=o.__importDefault(r(8)),a=o.__importDefault(r(16)),c=o.__importDefault(r(46)),l=o.__importDefault(r(18)),u=o.__importDefault(r(33)),p=o.__importDefault(r(4)),g=o.__importDefault(r(49)),d=o.__importDefault(r(17)),f=o.__importDefault(r(3)),h=o.__importDefault(r(9)),m=o.__importDefault(r(14)),y=function(){},v=function(){function e(e){if(!e){var t="no options provided";throw i.default.logAction(i.default.LOG_ERROR,"Rest()",t),new Error(t)}var r=s.default.objectifyOptions(e);r.log&&i.default.setLog(r.log.level,r.log.handler),i.default.logAction(i.default.LOG_MICRO,"Rest()","initialized with clientOptions "+f.default.Config.inspect(e));var o=this.options=s.default.normaliseOptions(r);if(o.key){var n=o.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!n)throw t="invalid key parameter",i.default.logAction(i.default.LOG_ERROR,"Rest()",t),new p.default(t,40400,404);o.keyName=n[1],o.keySecret=n[2]}if("clientId"in o){if("string"!=typeof o.clientId&&null!==o.clientId)throw new p.default("clientId must be either a string or null",40012,400);if("*"===o.clientId)throw new p.default('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}i.default.logAction(i.default.LOG_MINOR,"Rest()","started; version = "+s.default.version),this.baseUri=this.authority=function(e){return s.default.getHttpScheme(o)+e+":"+s.default.getPort(o,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new f.default.Http(o),this.auth=new a.default(this,o),this.channels=new _(this),this.push=new c.default(this)}return e.prototype.stats=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.options.promises)return n.promisify(this,"stats",[e]);t=y}var r=n.defaultGetHeaders(this.options),o=this.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=this.http.supportsLinkHeaders?void 0:o;this.options.headers&&n.mixin(r,this.options.headers),new l.default(this,"/stats",r,i,(function(e,t,r){for(var o=r?e:JSON.parse(e),n=0;n<o.length;n++)o[n]=g.default.fromValues(o[n]);return o})).get(e,t)},e.prototype.time=function(e,t){var r=this;if(void 0===t)if("function"==typeof e)t=e,e=null;else if(this.options.promises)return n.promisify(this,"time",[e]);var o=t||y,i=n.defaultGetHeaders(this.options);this.options.headers&&n.mixin(i,this.options.headers),this.http.do(d.default.Get,this,(function(e){return r.authority(e)+"/time"}),i,null,e,(function(e,t,i,s){if(e)o(e);else{s||(t=JSON.parse(t));var a=t[0];a?(r.serverTimeOffset=a-n.now(),o(null,a)):o(new p.default("Internal error (unexpected result type from GET /time)",5e4,500))}}))},e.prototype.request=function(e,t,r,o,i,s){var a=this.options.useBinaryProtocol,c=a?f.default.Config.msgpack.encode:JSON.stringify,u=a?f.default.Config.msgpack.decode:JSON.parse,g=a?n.Format.msgpack:n.Format.json,d=this.http.supportsLinkHeaders?void 0:g;r=r||{};var h=e.toLowerCase(),m="get"==h?n.defaultGetHeaders(this.options,g):n.defaultPostHeaders(this.options,g);if(void 0===s){if(this.options.promises)return n.promisify(this,"request",[e,t,r,o,i]);s=y}"string"!=typeof o&&(o=c(o)),this.options.headers&&n.mixin(m,this.options.headers),i&&n.mixin(m,i);var v=new l.default(this,t,m,d,(function(e,t,r){return n.ensureArray(r?e:u(e))}),!0);if(!n.arrIn(f.default.Http.methods,h))throw new p.default("Unsupported method "+h,40500,405);n.arrIn(f.default.Http.methodsWithBody,h)?v[h](r,o,s):v[h](r,s)},e.prototype.setLog=function(e){i.default.setLog(e.level,e.handler)},e.Promise=function(t){return(t=s.default.objectifyOptions(t)).promises=!0,new e(t)},e.Callbacks=e,e.Platform=f.default,e.Message=h.default,e.PresenceMessage=m.default,e}(),_=function(){function e(e){this.rest=e,this.all=Object.create(null)}return e.prototype.get=function(e,t){e=String(e);var r=this.all[e];return r?t&&r.setOptions(t):this.all[e]=r=new u.default(this.rest,e,t),r},e.prototype.release=function(e){delete this.all[String(e)]},e}();t.default=v},function(e,t,r){e.exports=r(6).enc.Utf8},function(e,t,r){var o;e.exports=(o=r(6),function(e){var t=o,r=t.lib,n=r.WordArray,i=r.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),o=2;o<=r;o++)if(!(t%o))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var o=2,n=0;n<64;)t(o)&&(n<8&&(a[n]=r(e.pow(o,.5))),c[n]=r(e.pow(o,1/3)),n++),o++}();var l=[],u=s.SHA256=i.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],i=r[2],s=r[3],a=r[4],u=r[5],p=r[6],g=r[7],d=0;d<64;d++){if(d<16)l[d]=0|e[t+d];else{var f=l[d-15],h=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=l[d-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[d]=h+l[d-7]+y+l[d-16]}var v=o&n^o&i^n&i,_=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),b=g+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&p)+c[d]+l[d];g=p,p=u,u=a,a=s+b|0,s=i,i=n,n=o,o=b+(_+v)|0}r[0]=r[0]+o|0,r[1]=r[1]+n|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+p|0,r[7]=r[7]+g|0},_doFinalize:function(){var t=this._data,r=t.words,o=8*this._nDataBytes,n=8*t.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=e.floor(o/4294967296),r[15+(n+64>>>9<<4)]=o,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(u),t.HmacSHA256=i._createHmacHelper(u)}(Math),o.SHA256)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(7)),s=o.__importDefault(r(2)),a=o.__importDefault(r(34)),c=o.__importDefault(r(9)),l=o.__importDefault(r(4)),u=o.__importDefault(r(18)),p=o.__importDefault(r(25)),g=o.__importDefault(r(3));function d(){}function f(e){var t=e||{};if(t.cipher){if(!g.default.Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");var r=g.default.Crypto.getCipher(t.cipher);t.cipher=r.cipherParams,t.channelCipher=r.cipher}else"cipher"in t&&(t.cipher=void 0,t.channelCipher=null);return t}var h=function(e){function t(t,r,o){var n=e.call(this)||this;return s.default.logAction(s.default.LOG_MINOR,"Channel()","started; name = "+r),n.rest=t,n.name=r,n.basePath="/channels/"+encodeURIComponent(r),n.presence=new a.default(n),n.channelOptions=f(o),n}return o.__extends(t,e),t.prototype.setOptions=function(e){this.channelOptions=f(e)},t.prototype.history=function(e,t){if(s.default.logAction(s.default.LOG_MICRO,"Channel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return n.promisify(this,"history",arguments);t=d}this._history(e,t)},t.prototype._history=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:o,s=n.defaultGetHeaders(r.options,o);r.options.headers&&n.mixin(s,r.options.headers);var a=this.channelOptions;new u.default(r,this.basePath+"/messages",s,i,(function(e,t,r){return c.default.fromResponseBody(e,a,r?void 0:o)})).get(e,t)},t.prototype.publish=function(){var e,t,r=this,o=arguments[0],i=arguments[1],s=arguments[arguments.length-1];if("function"!=typeof s){if(this.rest.options.promises)return n.promisify(this,"publish",arguments);s=d}if("string"==typeof o||null===o)e=[c.default.fromValues({name:o,data:i})],t=arguments[2];else if(n.isObject(o))e=[c.default.fromValues(o)],t=arguments[1];else{if(!n.isArray(o))throw new l.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);e=c.default.fromValuesArray(o),t=arguments[1]}"object"==typeof t&&t||(t={});var a=this.rest,u=a.options,p=u.useBinaryProtocol?n.Format.msgpack:n.Format.json,g=a.options.idempotentRestPublishing,f=n.defaultPostHeaders(a.options,p);if(u.headers&&n.mixin(f,u.headers),g&&function(e){return n.arrEvery(e,(function(e){return!e.id}))}(e)){var h=n.randomString(9);n.arrForEach(e,(function(e,t){e.id=h+":"+t.toString()}))}c.default.encodeArray(e,this.channelOptions,(function(o){if(o)s(o);else{var n=c.default.getMessagesSize(e),i=u.maxMessageSize;n>i?s(new l.default("Maximum size of messages that can be published at once exceeded ( was "+n+" bytes; limit is "+i+" bytes)",40009,400)):r._publish(c.default.serialize(e,p),f,t,s)}}))},t.prototype._publish=function(e,t,r,o){p.default.post(this.rest,this.basePath+"/messages",e,t,r,null,o)},t.prototype.status=function(e){if("function"!=typeof e&&this.rest.options.promises)return n.promisify(this,"status",[]);var t=this.rest.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,r=n.defaultPostHeaders(this.rest.options,t);p.default.get(this.rest,this.basePath,r,{},t,e||d)},t}(i.default);t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(7)),s=o.__importDefault(r(2)),a=o.__importDefault(r(18)),c=o.__importDefault(r(14));function l(){}var u=function(e){function t(t){var r=e.call(this)||this;return r.channel=t,r.basePath=t.basePath+"/presence",r}return o.__extends(t,e),t.prototype.get=function(e,t){if(s.default.logAction(s.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return n.promisify(this,"get",arguments);t=l}var r=this.channel.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:o,u=n.defaultGetHeaders(r.options,o);r.options.headers&&n.mixin(u,r.options.headers);var p=this.channel.channelOptions;new a.default(r,this.basePath,u,i,(function(e,t,r){return c.default.fromResponseBody(e,p,r?void 0:o)})).get(e,t)},t.prototype.history=function(e,t){return s.default.logAction(s.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(e,t)},t.prototype._history=function(e,t){if(void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return n.promisify(this,"_history",[e]);t=l}var r=this.channel.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:o,s=n.defaultGetHeaders(r.options,o);r.options.headers&&n.mixin(s,r.options.headers);var u=this.channel.channelOptions;new a.default(r,this.basePath+"/history",s,i,(function(e,t,r){return c.default.fromResponseBody(e,u,r?void 0:o)})).get(e,t)},t}(i.default);t.default=u},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TransportParams=void 0;var o=r(0),n=o.__importDefault(r(10)),i=o.__importStar(r(1)),s=o.__importStar(r(52)),a=o.__importStar(r(8)),c=o.__importDefault(r(3)),l=o.__importDefault(r(7)),u=o.__importDefault(r(36)),p=o.__importDefault(r(2)),g=o.__importDefault(r(37)),d=o.__importStar(r(19)),f=o.__importStar(r(4)),h=o.__importDefault(r(16)),m=o.__importDefault(r(9)),y=o.__importDefault(r(22)),v=o.__importDefault(r(53)),_=o.__importDefault(r(26)),b=o.__importDefault(r(24)),S=function(){var e;return void 0!==c.default.WebStorage&&(null===(e=c.default.WebStorage)||void 0===e?void 0:e.localSupported)},E=function(){var e;return void 0!==c.default.WebStorage&&(null===(e=c.default.WebStorage)||void 0===e?void 0:e.sessionSupported)},T=n.default.Action,w=function(){},C="ably-transport-preference",M="ably-connection-recovery";function R(e){try{return JSON.parse(e)}catch(e){return null}}var A=function(){function e(e,t,r,o){this.options=e,this.host=t,this.mode=r,this.connectionKey=o,this.format=e.useBinaryProtocol?i.Format.msgpack:i.Format.json}return e.prototype.getConnectParams=function(e){var t=e?i.copy(e):{},r=this.options;switch(this.mode){case"upgrade":t.upgrade=this.connectionKey;break;case"resume":t.resume=this.connectionKey;break;case"recover":var o=R(r.recover);o&&(t.recover=o.connectionKey)}return void 0!==r.clientId&&(t.clientId=r.clientId),!1===r.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=a.default.protocolVersion,t.agent=encodeURIComponent((0,a.getAgentString)(this.options)),void 0!==r.transportParams&&i.mixin(t,r.transportParams),t},e.prototype.toString=function(){var e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+"]"},e}();t.TransportParams=A;var O=function(t){function r(e,o){var n=t.call(this)||this;n.disconnectedRetryCount=0,r.initTransports(),n.realtime=e,n.options=o;var s=o.timeouts,l=s.preferenceConnectTimeout+s.realtimeRequestTimeout;if(n.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:l,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:s.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:s.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:s.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},n.state=n.states.initialized,n.errorReason=null,n.queuedMessages=new u.default,n.msgSerial=0,n.connectionDetails=void 0,n.connectionId=void 0,n.connectionKey=void 0,n.connectionStateTtl=s.connectionStateTtl,n.maxIdleInterval=null,n.transports=i.intersect(o.transports||a.default.defaultTransports,r.supportedTransports),n.baseTransport=i.intersect(a.default.baseTransportOrder,n.transports)[0],n.upgradeTransports=i.intersect(n.transports,a.default.upgradeTransports),n.transportPreference=null,n.httpHosts=a.default.getHosts(o),n.activeProtocol=null,n.proposedTransports=[],n.pendingTransports=[],n.host=null,n.lastAutoReconnectAttempt=null,n.lastActivity=null,n.forceFallbackHost=!1,n.connectCounter=0,p.default.logAction(p.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),p.default.logAction(p.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(o.transports||a.default.defaultTransports)+"]"),p.default.logAction(p.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+n.transports+"]"),p.default.logAction(p.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+n.httpHosts+"]"),!n.transports.length){var g="no requested transports available";throw p.default.logAction(p.default.LOG_ERROR,"realtime.ConnectionManager()",g),new Error(g)}var d=c.default.Config.addEventListener;return d&&(E()&&"function"==typeof o.recover&&d("beforeunload",n.persistConnection.bind(n)),!0===o.closeOnUnload&&d("beforeunload",(function(){p.default.logAction(p.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),n.requestState({state:"closing"})})),d("online",(function(){n.state==n.states.disconnected||n.state==n.states.suspended?(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),n.requestState({state:"connecting"})):n.state==n.states.connecting&&(n.pendingTransports.forEach((function(e){e.off()})),n.disconnectAllTransports(),n.startConnect())})),d("offline",(function(){n.state==n.states.connected&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),n.disconnectAllTransports())}))),n}return o.__extends(r,t),r.initTransports=function(){(0,v.default)(r),i.arrForEach(c.default.Transports,(function(e){e(r)}))},r.prototype.createTransportParams=function(e,t){return new A(this.options,e,t,this.connectionKey)},r.prototype.getTransportParams=function(e){var t=this;!function(e){if(t.connectionKey)e("resume");else if("string"!=typeof t.options.recover){var r,o,n=t.options.recover,i=E()&&(null===(o=null===(r=c.default.WebStorage)||void 0===r?void 0:r.getSession)||void 0===o?void 0:o.call(r,M));if(i&&"function"==typeof n)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),void n(i,(function(r){r?(t.options.recover=i.recoveryKey,e("recover")):e("clean")}));e("clean")}else e("recover")}((function(r){var o=t.createTransportParams(null,r);if("recover"===r){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+t.options.recover);var n=R(t.options.recover);n&&(t.msgSerial=n.msgSerial)}else p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+o.toString());e(o)}))},r.prototype.tryATransport=function(e,t,o){var n=this;p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),_.default.tryConnect(r.supportedTransports[t],this,this.realtime.auth,e,(function(r,i){var s=n.state;return s==n.states.closing||s==n.states.closed||s==n.states.failed?(i&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+s.state+" while we were attempting the transport; closing "+i),i.close()),void o(!0)):r?(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+r.event+", err: "+r.error.toString()),void(!h.default.isTokenErr(r.error)||n.errorReason&&h.default.isTokenErr(n.errorReason)?"failed"===r.event?(n.notifyState({state:"failed",error:r.error}),o(!0)):"disconnected"===r.event&&((0,d.isRetriable)(r.error)?o(!1):(n.notifyState({state:n.states.connecting.failState,error:r.error}),o(!0))):(n.errorReason=r.error,n.realtime.auth._forceNewToken(null,null,(function(r){r?n.actOnErrorFromAuthorize(r):n.tryATransport(e,t,o)}))))):(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),n.setTransportPending(i,e),void o(null,i))}))},r.prototype.setTransportPending=function(e,t){var r=this,o=t.mode;p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+o),i.arrDeleteValue(this.proposedTransports,e),this.pendingTransports.push(e);var n=c.default.Defaults.transportPreferenceOrder[c.default.Defaults.transportPreferenceOrder.length-1];e.once("connected",(function(s,a,l){"upgrade"==o&&r.activeProtocol?e.shortName!==n&&i.arrIn(r.getUpgradePossibilities(),n)&&r.activeProtocol?setTimeout((function(){r.scheduleTransportActivation(s,e,a,l)}),r.options.timeouts.parallelUpgradeDelay):r.scheduleTransportActivation(s,e,a,l):(r.activateTransport(s,e,a,l),c.default.Config.nextTick((function(){r.connectImpl(t)}))),"recover"===o&&r.options.recover&&(r.options.recover=null,r.unpersistConnection())}));var s=this;e.on(["disconnected","closed","failed"],(function(t){s.deactivateTransport(e,this.event,t)})),this.emit("transport.pending",e)},r.prototype.scheduleTransportActivation=function(e,t,r,o){var s,a,l=this,u=this.activeProtocol&&this.activeProtocol.getTransport(),g=function(){t.disconnect(),i.arrDeleteValue(l.pendingTransports,t)};if(this.state!==this.states.connected&&this.state!==this.states.connecting)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void g();if(u&&(s=t,a=u,!(i.arrIndexOf(c.default.Defaults.transportPreferenceOrder,s.shortName)>i.arrIndexOf(c.default.Defaults.transportPreferenceOrder,a.shortName))))return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+" is no better than current active transport "+u.shortName+" - abandoning upgrade"),void g();p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+t);var d=null;if(!t.isConnected)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+"is no longer connected; abandoning upgrade"),void g();if(this.state===this.states.connected)p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,d=this.activeProtocol;else if(this.state!==this.states.connecting)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),void g();p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+t);var f=function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+t),t.send(n.default.fromValues({action:T.ACTIVATE})),l.activateTransport(e,t,r,o),l.state===l.states.synchronizing?(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+t),l.state=l.states.connected):p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+l.state.state+", so leaving unchanged"),l.state.sendEvents&&l.sendQueuedMessages()};d?d.onceIdle(f):f()},r.prototype.activateTransport=function(e,t,r,o){var n=this;p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),r&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+r),o&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(o)),this.persistTransportPreference(t);var a=this.state,l=this.states.connected.state;if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+a.state),a.state==this.states.closing.state||a.state==this.states.closed.state||a.state==this.states.failed.state)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(i.arrDeleteValue(this.pendingTransports,t),!t.isConnected)return p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;var u=this.activeProtocol;this.activeProtocol=new s.default(t),this.host=t.params.host;var d=o.connectionKey;if(d&&this.connectionKey!=d&&this.setConnection(r,o,!!e),this.onConnectionDetailsUpdate(o,t),c.default.Config.nextTick((function(){t.on("connected",(function(e,r,o){n.onConnectionDetailsUpdate(o,t),n.emit("update",new g.default(l,l,null,e))}))})),a.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new g.default(l,l,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),u)if(u.messageQueue.count()>0&&p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+u.transport.shortName+", new one is "+t.shortName+") finishing with "+u.messageQueue.count()+" messages still pending"),u.transport===t){var f="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()",f)}else u.finish();return i.safeArrForEach(this.pendingTransports,(function(e){if(e===t){var r="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+t.shortName+"; stack = "+(new Error).stack;p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()",r),i.arrDeleteValue(n.pendingTransports,t)}else e.disconnect()})),i.safeArrForEach(this.proposedTransports,(function(e){e===t?(p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+t.shortName+"; stack = "+(new Error).stack),i.arrDeleteValue(n.proposedTransports,t)):e.dispose()})),!0},r.prototype.deactivateTransport=function(e,t,r){var o=this.activeProtocol,n=o&&o.getTransport()===e,s=i.arrDeleteValue(this.pendingTransports,e),a=i.arrDeleteValue(this.proposedTransports,e),l=this.noTransportsScheduledForActivation();if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(n?"; was active":s?"; was pending":a?"; was proposed":"")+(l?"":"; another transport is scheduled for activation")),r&&r.message&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+r.message),n&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(o.getPendingMessages()),c.default.Config.nextTick((function(){o.clearPendingMessages()})),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),n&&l||n&&"failed"===t||"closed"===t||null===o&&s&&0===this.pendingTransports.length){if("disconnected"===t&&r&&r.statusCode>500&&this.httpHosts.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:r,retryImmediately:!0});var u="failed"===t&&h.default.isTokenErr(r)?"disconnected":t;this.notifyState({state:u,error:r})}else n&&"disconnected"===t&&this.state!==this.states.synchronizing&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:r}))},r.prototype.noTransportsScheduledForActivation=function(){return i.isEmpty(this.pendingTransports)||this.pendingTransports.every((function(e){return!e.isConnected}))},r.prototype.setConnection=function(e,t,r){var o=this.connectionId;(o&&o!==e||!o&&r)&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey},r.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},r.prototype.createRecoveryKey=function(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null},r.prototype.checkConnectionStateFreshness=function(){if(this.lastActivity&&this.connectionId){var e=i.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},r.prototype.persistConnection=function(){if(E()){var t=this.createRecoveryKey();t&&(r={recoveryKey:t,disconnectedAt:i.now(),location:e.location,clientId:this.realtime.auth.clientId},E()&&(null===(n=null===(o=c.default.WebStorage)||void 0===o?void 0:o.setSession)||void 0===n||n.call(o,M,r)))}var r,o,n},r.prototype.unpersistConnection=function(){var e,t;E()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.removeSession)||void 0===t||t.call(e,M))},r.prototype.getError=function(){return this.errorReason||this.getStateError()},r.prototype.getStateError=function(){var e,t;return null===(t=(e=d.default)[this.state.state])||void 0===t?void 0:t.call(e)},r.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},r.prototype.enactStateChange=function(e){var t="failed"===e.current?p.default.LOG_ERROR:p.default.LOG_MAJOR;p.default.logAction(t,"Connection state",e.current+(e.reason?"; reason: "+e.reason:"")),p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));var r=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(r.terminal||"suspended"===r.state)&&this.clearConnection(),this.emit("connectionstate",e)},r.prototype.startTransitionTimer=function(e){var t=this;p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout((function(){t.transitionTimer&&(t.transitionTimer=null,p.default.logAction(p.default.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),t.notifyState({state:e.failState}))}),e.retryDelay)},r.prototype.cancelTransitionTimer=function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},r.prototype.startSuspendTimer=function(){var e=this;this.suspendTimer||(this.suspendTimer=setTimeout((function(){e.suspendTimer&&(e.suspendTimer=null,p.default.logAction(p.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),e.states.connecting.failState="suspended",e.notifyState({state:"suspended"}))}),this.connectionStateTtl))},r.prototype.checkSuspendTimer=function(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()},r.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},r.prototype.startRetryTimer=function(e){var t=this;this.retryTimer=setTimeout((function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),t.retryTimer=null,t.requestState({state:"connecting"})}),e)},r.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},r.prototype.notifyState=function(e){var t,r,o=this,n=e.state,s="disconnected"===n&&(this.state===this.states.connected||this.state===this.states.synchronizing||e.retryImmediately||this.state===this.states.connecting&&e.error&&h.default.isTokenErr(e.error)&&!(this.errorReason&&h.default.isTokenErr(this.errorReason)));if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+n+(s?"; will retry connection immediately":"")),n!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(e.state),"suspended"!==n&&"connected"!==n||(this.disconnectedRetryCount=0),!this.state.terminal)){var a=this.states[e.state],l=a.retryDelay;"disconnected"===a.state&&(this.disconnectedRetryCount++,l=i.getRetryTime(a.retryDelay,this.disconnectedRetryCount));var u=new g.default(this.state.state,a.state,l,e.error||(null===(r=(t=d.default)[a.state])||void 0===r?void 0:r.call(t)));if(s){var f=function(){o.state===o.states.disconnected&&(o.lastAutoReconnectAttempt=i.now(),o.requestState({state:"connecting"}))},m=this.lastAutoReconnectAttempt&&i.now()-this.lastAutoReconnectAttempt+1;m&&m<1e3?(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+m+"ms ago, waiting another "+(1e3-m)+"ms before trying again"),setTimeout(f,1e3-m)):c.default.Config.nextTick(f)}else"disconnected"!==n&&"suspended"!==n||this.startRetryTimer(l);("disconnected"===n&&!s||"suspended"===n||a.terminal)&&c.default.Config.nextTick((function(){o.disconnectAllTransports()})),"connected"!=n||this.activeProtocol||p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(u),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(n,u.reason),this.failQueuedMessages(u.reason))}},r.prototype.requestState=function(e){var t,r,o=this,n=e.state;if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+n+"; current state: "+this.state.state),n!=this.state.state&&(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(n),!("connecting"==n&&"connected"==this.state.state||"closing"==n&&"closed"==this.state.state))){var i=this.states[n],s=new g.default(this.state.state,i.state,null,e.error||(null===(r=(t=d.default)[i.state])||void 0===r?void 0:r.call(t)));this.enactStateChange(s),"connecting"==n&&c.default.Config.nextTick((function(){o.startConnect()})),"closing"==n&&this.closeImpl()}},r.prototype.startConnect=function(){var e=this;if(this.state===this.states.connecting){var t=this.realtime.auth,r=++this.connectCounter,o=function(){e.checkConnectionStateFreshness(),e.getTransportParams((function(t){if("recover"===t.mode&&t.options.recover){var o=R(t.options.recover);o&&e.realtime.channels.recoverChannels(o.channelSerials)}r===e.connectCounter&&e.connectImpl(t,r)}))};if(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===t.method)o();else{var n=function(t){r===e.connectCounter&&(t?e.actOnErrorFromAuthorize(t):o())};this.errorReason&&h.default.isTokenErr(this.errorReason)?t._forceNewToken(null,null,n):t._ensureValidAuthCredentials(!1,n)}}else p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state)},r.prototype.connectImpl=function(e,t){var r=this.state.state;r!==this.states.connecting.state&&r!==this.states.connected.state?p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+r):this.pendingTransports.length?p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):r==this.states.connected.state?this.upgradeIfNeeded(e):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(e,t):this.connectBase(e,t)},r.prototype.connectPreference=function(e,t){var r=this,o=this.getTransportPreference(),n=!1;i.arrIn(this.transports,o)||(this.unpersistTransportPreference(),this.connectImpl(e,t)),p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+o);var s=setTimeout((function(){n=!0,r.state.state!==r.states.connected.state&&(p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+o+" failed; clearing preference and trying from scratch"),r.disconnectAllTransports(),r.unpersistTransportPreference()),r.connectImpl(e,t)}),this.options.timeouts.preferenceConnectTimeout);e.host=this.httpHosts[0],this.tryATransport(e,o,(function(o,a){clearTimeout(s),n&&a?(a.off(),a.disconnect(),i.arrDeleteValue(r.pendingTransports,a)):a||o||(r.unpersistTransportPreference(),r.connectImpl(e,t))}))},r.prototype.connectBase=function(e,t){var r=this,o=function(e){r.notifyState({state:r.states.connecting.failState,error:e})},n=this.httpHosts.slice(),s=function(e,o){t===r.connectCounter&&(o||e||c())};p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);var a=n.shift();if(a){e.host=a;var c=function(){n.length?r.realtime.http.checkConnectivity?r.realtime.http.checkConnectivity((function(a,c){t===r.connectCounter&&(a?o(a):c?(e.host=i.arrPopRandomElement(n),r.tryATransport(e,r.baseTransport,s)):o(new f.default("Unable to connect (network unreachable)",80003,404)))})):o(new f.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500)):o(new f.default("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&n.length)return this.forceFallbackHost=!1,void c();this.tryATransport(e,this.baseTransport,s)}else o(new f.default("Unable to connect (no available host)",80003,404))},r.prototype.getUpgradePossibilities=function(){var e=this.activeProtocol.getTransport().shortName,t=i.arrIndexOf(this.upgradeTransports,e);return this.upgradeTransports.slice(t+1)},r.prototype.upgradeIfNeeded=function(e){var t=this,r=this.getUpgradePossibilities();p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+c.default.Config.inspect(r)),r.length&&i.arrForEach(r,(function(r){var o=t.createTransportParams(e.host,"upgrade");t.tryATransport(o,r,w)}))},r.prototype.closeImpl=function(){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),i.safeArrForEach(this.pendingTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+e),e&&e.close()})),i.safeArrForEach(this.proposedTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.activeProtocol&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})},r.prototype.onAuthUpdated=function(e,t){var r,o=this;switch(this.state.state){case"connected":if(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(!0);var i=this.activeProtocol.getTransport().params;c.default.Config.nextTick((function(){"connected"===o.state.state&&o.upgradeIfNeeded(i)}))}var s=null===(r=this.activeProtocol)||void 0===r?void 0:r.getTransport();s&&s.onAuthUpdated&&s.onAuthUpdated(e);var a=n.default.fromValues({action:T.AUTH,auth:{accessToken:e.token}});this.send(a);var l=function(){o.off(u),t(null,e)},u=function(e){"failed"===e.current&&(o.off(l),o.off(u),t(e.reason||o.getStateError()))};this.once("connectiondetails",l),this.on("connectionstate",u);break;case"connecting":p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var g=function(r){switch(r.current){case"connected":o.off(g),t(null,e);break;case"failed":case"closed":case"suspended":o.off(g),t(r.reason||o.getStateError())}};this.on("connectionstate",g),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}},r.prototype.disconnectAllTransports=function(e){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(e?" except the active transport":"")),this.connectCounter++,i.safeArrForEach(this.pendingTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+e),e&&e.disconnect()})),this.pendingTransports=[],i.safeArrForEach(this.proposedTransports,(function(e){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+e),e&&e.dispose()})),this.proposedTransports=[],this.activeProtocol&&!e&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())},r.prototype.send=function(e,t,r){r=r||w;var o=this.state;if(o.sendEvents)return p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new s.PendingMessage(e,r));if(!(t&&o.queueEvents||o.forceQueueEvents)){var i="rejecting event, queueEvent was "+t+", state was "+o.state;return p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.send()",i),void r(this.errorReason||new f.default(i,9e4,400))}p.default.shouldLog(p.default.LOG_MICRO)&&p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+n.default.stringify(e)),this.queue(e,r)},r.prototype.sendImpl=function(e){var t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(e){p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+e.stack)}},r.prototype.queue=function(e,t){p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var r=this.queuedMessages.last(),o=this.options.maxMessageSize;r&&!r.sendAttempted&&function(e,t,r){var o;if(e.channel!==t.channel)return!1;if((o=e.action)!==T.PRESENCE&&o!==T.MESSAGE)return!1;if(o!==t.action)return!1;var n=o===T.PRESENCE?"presence":"messages",s=e[n].concat(t[n]);return!(m.default.getMessagesSize(s)>r||!i.allSame(s,"clientId")||!i.arrEvery(s,(function(e){return!e.id}))||(e[n]=s,0))}(r.message,e,o)?(r.merged||(r.callback=y.default.create([r.callback]),r.merged=!0),r.callback.push(t)):this.queuedMessages.push(new s.PendingMessage(e,t))},r.prototype.sendQueuedMessages=function(){var e;for(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)},r.prototype.queuePendingMessages=function(e){e&&e.length&&(p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))},r.prototype.failQueuedMessages=function(e){var t=this.queuedMessages.count();t>0&&(p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+i.inspectError(e)),this.queuedMessages.completeAllMessages(e))},r.prototype.onChannelMessage=function(e,t){var r=this.activeProtocol&&t===this.activeProtocol.getTransport(),o=i.arrIn(this.pendingTransports,t)&&this.state==this.states.synchronizing;r||o||i.arrIndexOf([T.ACK,T.NACK,T.ERROR],e.action)>-1?this.realtime.channels.onChannelMessage(e):p.default.logAction(p.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(e)+"on defunct transport; discarding")},r.prototype.ping=function(e,t){var r=this;if(e){p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+e);var o=i.now(),n=i.cheapRandStr(),s=function(r){if(r===n){e.off("heartbeat",s),clearTimeout(a);var c=i.now()-o;t(null,c)}},a=setTimeout((function(){e.off("heartbeat",s),t(new f.default("Timeout waiting for heartbeat response",5e4,500))}),this.options.timeouts.realtimeRequestTimeout);return e.on("heartbeat",s),void e.ping(n)}if("connected"===this.state.state){var l=!1,u=function(){l||(l=!0,c.default.Config.nextTick((function(){r.ping(null,t)})))};this.on("transport.active",u),this.ping(this.activeProtocol.getTransport(),(function(e,o){r.off("transport.active",u),l||(l=!0,t(e,o))}))}else t(new f.default("Unable to ping service; not connected",4e4,400))},r.prototype.abort=function(e){this.activeProtocol.getTransport().fail(e)},r.prototype.registerProposedTransport=function(e){this.proposedTransports.push(e)},r.prototype.getTransportPreference=function(){var e,t;return this.transportPreference||S()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.get)||void 0===t?void 0:t.call(e,C))},r.prototype.persistTransportPreference=function(e){var t,r;i.arrIn(a.default.upgradeTransports,e.shortName)&&(this.transportPreference=e.shortName,S()&&(null===(r=null===(t=c.default.WebStorage)||void 0===t?void 0:t.set)||void 0===r||r.call(t,C,e.shortName)))},r.prototype.unpersistTransportPreference=function(){var e,t;this.transportPreference=null,S()&&(null===(t=null===(e=c.default.WebStorage)||void 0===e?void 0:e.remove)||void 0===t||t.call(e,C))},r.prototype.actOnErrorFromAuthorize=function(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===b.default.Forbidden){var t="Client configured authentication provider returned 403; failing the connection";p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new f.default(t,80019,403,e)})}else t="Client configured authentication provider request failed",p.default.logAction(p.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new f.default(t,80019,401,e)})},r.prototype.onConnectionDetailsUpdate=function(e,t){if(e){this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);var r=e.clientId;if(r){var o=this.realtime.auth._uncheckedSetClientId(r);if(o)return p.default.logAction(p.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",o.message),void t.fail(o)}var n=e.connectionStateTtl;n&&(this.connectionStateTtl=n),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}},r.supportedTransports={},r}(l.default);t.default=O}).call(this,r(13))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(7)),i=o.__importDefault(r(2)),s=function(e){function t(){var t=e.call(this)||this;return t.messages=[],t}return o.__extends(t,e),t.prototype.count=function(){return this.messages.length},t.prototype.push=function(e){this.messages.push(e)},t.prototype.shift=function(){return this.messages.shift()},t.prototype.last=function(){return this.messages[this.messages.length-1]},t.prototype.copyAll=function(){return this.messages.slice()},t.prototype.append=function(e){this.messages.push.apply(this.messages,e)},t.prototype.prepend=function(e){this.messages.unshift.apply(this.messages,e)},t.prototype.completeMessages=function(e,t,r){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+e+"; count = "+t),r=r||null;var o=this.messages;if(0===o.length)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var n=o[0];if(n){var s=n.message.msgSerial,a=e+t;if(a>s)for(var c=0,l=o.splice(0,a-s);c<l.length;c++)l[c].callback(r);0==o.length&&this.emit("idle")}},t.prototype.completeAllMessages=function(e){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e)},t.prototype.resetSendAttempted=function(){for(var e=0,t=this.messages;e<t.length;e++)t[e].sendAttempted=!1},t.prototype.clear=function(){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},t}(n.default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r,o){this.previous=e,this.current=t,r&&(this.retryIn=r),o&&(this.reason=o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(10)),i=o.__importDefault(r(7)),s=o.__importStar(r(1)),a=o.__importDefault(r(33)),c=o.__importDefault(r(2)),l=o.__importDefault(r(54)),u=o.__importDefault(r(9)),p=o.__importDefault(r(39)),g=o.__importStar(r(4)),d=o.__importDefault(r(14)),f=o.__importDefault(r(19)),h=n.default.Action,m=function(){},y=function(e){function t(t,r,o){var n=e.call(this,t,r,o)||this;return n.retryCount=0,n.history=function(e,t){if(c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return s.promisify(this,"history",arguments);t=m}if(e&&e.untilAttach){if("attached"!==this.state)return void t(new g.default("option untilAttach requires the channel to be attached",4e4,400));if(!this.properties.attachSerial)return void t(new g.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));delete e.untilAttach,e.from_serial=this.properties.attachSerial}a.default.prototype._history.call(this,e,t)},n.whenState=function(e,t){return i.default.prototype.whenState.call(n,e,n.state,t)},c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel()","started; name = "+r),n.realtime=t,n.presence=new l.default(n),n.connectionManager=t.connection.connectionManager,n.state="initialized",n.subscriptions=new i.default,n.syncChannelSerial=void 0,n.properties={attachSerial:void 0,channelSerial:void 0},n.setOptions(o),n.errorReason=null,n._requestedFlags=null,n._mode=null,n._attachResume=!1,n._decodingContext={channelOptions:n.channelOptions,plugins:t.options.plugins||{},baseEncodedPreviousPayload:void 0},n._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},n._allChannelChanges=new i.default,n}return o.__extends(t,e),t.prototype.invalidStateError=function(){return new g.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},t.processListenerArgs=function(e){return"function"==typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),null==e[e.length-1]&&e.pop(),e},t.prototype.setOptions=function(e,t){if(!t&&this.rest.options.promises)return s.promisify(this,"setOptions",arguments);var r=t||function(e){e&&c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+e.toString())},o=function(e){if(e&&"params"in e&&!s.isObject(e.params))return new g.default("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!s.isArray(e.modes))return new g.default("options.modes must be an array",4e4,400);for(var t=0;t<e.modes.length;t++){var r=e.modes[t];if(!r||"string"!=typeof r||!s.arrIn(n.default.channelModes,String.prototype.toUpperCase.call(r)))return new g.default("Invalid channel mode: "+r,4e4,400)}}}(e);o?r(o):(a.default.prototype.setOptions.call(this,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e)?(this.attachImpl(),this._allChannelChanges.once(["attached","update","detached","failed"],(function(e){switch(this.event){case"update":case"attached":return void(null==r||r(null));default:return void(null==r||r(e.reason))}}))):r())},t.prototype._shouldReattachToSetOptions=function(e){return("attached"===this.state||"attaching"===this.state)&&((null==e?void 0:e.params)||(null==e?void 0:e.modes))},t.prototype.publish=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=t[0],n=t.length,i=t[n-1];if("function"!=typeof i){if(this.realtime.options.promises)return s.promisify(this,"publish",arguments);i=m,++n}if(this.connectionManager.activeState()){if(2==n)if(s.isObject(o))o=[u.default.fromValues(o)];else{if(!s.isArray(o))throw new g.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);o=u.default.fromValuesArray(o)}else o=[u.default.fromValues({name:t[0],data:t[1]})];var a=this.realtime.options.maxMessageSize;u.default.encodeArray(o,this.channelOptions,(function(t){if(t)i(t);else{var r=u.default.getMessagesSize(o);r>a?i(new g.default("Maximum size of messages that can be published at once exceeded ( was "+r+" bytes; limit is "+a+" bytes)",40009,400)):e.__publish(o,i)}}))}else i(this.connectionManager.getError())},t.prototype.__publish=function(e,t){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+e.length);var r=this.state;switch(r){case"failed":case"suspended":t(g.default.fromValues(this.invalidStateError()));break;default:c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+r);var o=new n.default;o.action=h.MESSAGE,o.channel=this.name,o.messages=e,this.sendMessage(o,t)}},t.prototype.onEvent=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var t=this.subscriptions,r=0;r<e.length;r++){var o=e[r];t.emit(o.name,o)}},t.prototype.attach=function(e,t){var r;if("function"==typeof e?(t=e,r=null):r=e,!t){if(this.realtime.options.promises)return s.promisify(this,"attach",arguments);t=function(e){e&&c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+e.toString())}}if(r)c.default.deprecated("channel.attach() with flags","channel.setOptions() with channelOptions.params"),this._requestedFlags=r;else if("attached"===this.state)return void t(null,null);this._attach(!1,null,t)},t.prototype._attach=function(e,t,r){r||(r=function(e){e&&c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});var o=this.connectionManager;o.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once((function(e){switch(this.event){case"attached":null==r||r(null,e);break;case"detached":case"suspended":case"failed":null==r||r(e.reason||o.getError()||new g.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==r||r(new g.default("Attach request superseded by a subsequent detach request",9e4,409))}}))):r(o.getError())},t.prototype.attachImpl=function(){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var e=n.default.fromValues({action:h.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?e.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&e.encodeModesToFlags(s.allToUpperCase(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e,m)},t.prototype.detach=function(e){if(!e){if(this.realtime.options.promises)return s.promisify(this,"detach",arguments);e=m}var t=this.connectionManager;if(t.activeState())switch(this.state){case"suspended":this.notifyState("detached"),e();break;case"detached":e();break;case"failed":e(new g.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");case"detaching":this.once((function(r){switch(this.event){case"detached":e();break;case"attached":case"suspended":case"failed":e(r.reason||t.getError()||new g.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":e(new g.default("Detach request superseded by a subsequent attach request",9e4,409))}}))}else e(t.getError())},t.prototype.detachImpl=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var t=n.default.fromValues({action:h.DETACH,channel:this.name});this.sendMessage(t,e||m)},t.prototype.subscribe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.processListenerArgs(e),n=o[0],i=o[1],a=o[2];return!a&&this.realtime.options.promises?s.promisify(this,"subscribe",[n,i]):"failed"!==this.state?(n&&"object"==typeof n&&!Array.isArray(n)?this._subscribeFilter(n,i):this.subscriptions.on(n,i),this.attach(a||m)):void(null==a||a(g.default.fromValues(this.invalidStateError())))},t.prototype._subscribeFilter=function(e,t){var r=function(r){var o,n,i,s,a,c,l={name:r.name,refTimeserial:null===(n=null===(o=r.extras)||void 0===o?void 0:o.ref)||void 0===n?void 0:n.timeserial,refType:null===(s=null===(i=r.extras)||void 0===i?void 0:i.ref)||void 0===s?void 0:s.type,isRef:!!(null===(c=null===(a=r.extras)||void 0===a?void 0:a.ref)||void 0===c?void 0:c.timeserial),clientId:r.clientId};Object.entries(e).find((function(e){var t=e[0],r=e[1];return void 0!==r&&l[t]!==r}))||t(r)};this._addFilteredSubscription(e,t,r),this.subscriptions.on(r)},t.prototype._addFilteredSubscription=function(e,t,r){var o;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(t)){var n=this.filteredSubscriptions.get(t);n.set(e,(null===(o=null==n?void 0:n.get(e))||void 0===o?void 0:o.concat(r))||[r])}else this.filteredSubscriptions.set(t,new Map([[e,[r]]]))},t.prototype._getAndDeleteFilteredSubscriptions=function(e,t){var r=this;if(!this.filteredSubscriptions)return[];if(!t&&e)return Array.from(this.filteredSubscriptions.entries()).map((function(t){var o,n=t[0],i=t[1],s=i.get(e);return i.delete(e),0===i.size&&(null===(o=r.filteredSubscriptions)||void 0===o||o.delete(n)),s})).reduce((function(e,t){var r;return t?(r=e).concat.apply(r,t):e}),[]);if(!t||!this.filteredSubscriptions.has(t))return[];var o=this.filteredSubscriptions.get(t);if(!e){var n=Array.from(o.values()).reduce((function(e,t){return e.concat.apply(e,t)}),[]);return this.filteredSubscriptions.delete(t),n}var i=o.get(e);return o.delete(e),i||[]},t.prototype.unsubscribe=function(){for(var e,r=this,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var i=t.processListenerArgs(o),s=i[0],a=i[1];"object"==typeof s&&!a||(null===(e=this.filteredSubscriptions)||void 0===e?void 0:e.has(a))?this._getAndDeleteFilteredSubscriptions(s,a).forEach((function(e){return r.subscriptions.off(e)})):this.subscriptions.off(s,a)},t.prototype.sync=function(){switch(this.state){case"initialized":case"detaching":case"detached":throw new g.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var e=this.connectionManager;if(!e.activeState())throw e.getError();var t=n.default.fromValues({action:h.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)},t.prototype.sendMessage=function(e,t){this.connectionManager.send(e,this.realtime.options.queueMessages,t)},t.prototype.sendPresence=function(e,t){var r=n.default.fromValues({action:h.PRESENCE,channel:this.name,presence:s.isArray(e)?d.default.fromValuesArray(e):[d.default.fromValues(e)]});this.sendMessage(r,t)},t.prototype.onMessage=function(e){e.action!==h.ATTACHED&&e.action!==h.MESSAGE&&e.action!==h.PRESENCE||this.setChannelSerial(e.channelSerial);var t,r=!1;switch(e.action){case h.ATTACHED:this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};var o=e.decodeModesFromFlags();this.modes=o&&s.allToLowerCase(o)||void 0;var n=e.hasFlag("RESUMED"),i=e.hasFlag("HAS_PRESENCE"),a=e.hasFlag("HAS_BACKLOG");if("attached"===this.state){n||this.presence.onAttached(i);var l=new p.default(this.state,this.state,n,a,e.error);this._allChannelChanges.emit("update",l),n&&!this.channelOptions.updateOnAttached||this.emit("update",l)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",e.error,n,i,a);break;case h.DETACHED:var m=e.error?g.default.fromValues(e.error):new g.default("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",m):"attaching"===this.state?this.notifyState("suspended",m):this.requestState("attaching",m);break;case h.SYNC:if(r=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;case h.PRESENCE:for(var y=e.presence,v=e.id,_=e.connectionId,b=e.timestamp,S=this.channelOptions,E=void 0,T=0;T<y.length;T++)try{E=y[T],d.default.decode(E,S),E.connectionId||(E.connectionId=_),E.timestamp||(E.timestamp=b),E.id||(E.id=v+":"+T)}catch(e){c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString())}this.presence.setPresence(y,r,t);break;case h.MESSAGE:if("attached"!==this.state)return void c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');var w=e.messages,C=w[0],M=w[w.length-1];if(v=e.id,_=e.connectionId,b=e.timestamp,C.extras&&C.extras.delta&&C.extras.delta.from!==this._lastPayload.messageId){var R='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",R),this._startDecodeFailureRecovery(new g.default(R,40018,400));break}for(T=0;T<w.length;T++){R=w[T];try{u.default.decode(R,this._decodingContext)}catch(e){switch(c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString()),e.code){case 40018:return void this._startDecodeFailureRecovery(e);case 40019:case 40021:return void this.notifyState("failed",e)}}R.connectionId||(R.connectionId=_),R.timestamp||(R.timestamp=b),R.id||(R.id=v+":"+T)}this._lastPayload.messageId=M.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(w);break;case h.ERROR:var A=e.error;A&&80016==A.code?this.checkPendingState():this.notifyState("failed",g.default.fromValues(A));break;default:c.default.logAction(c.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+e.action+")"),this.connectionManager.abort(f.default.unknownChannelErr())}},t.prototype._startDecodeFailureRecovery=function(e){var t=this;this._lastPayload.decodeFailureRecoveryInProgress||(c.default.logAction(c.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,(function(){t._lastPayload.decodeFailureRecoveryInProgress=!1})))},t.prototype.onAttached=function(){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},t.prototype.notifyState=function(e,t,r,o,n){if(c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),s.arrIn(["detached","suspended","failed"],e)&&(this.properties.channelSerial=null),e!==this.state){this.presence.actOnChannelState(e,o,t),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);var i=new p.default(this.state,e,r,n,t),a="failed"===e?c.default.LOG_ERROR:c.default.LOG_MAJOR;c.default.logAction(a,'Channel state for channel "'+this.name+'"',e+(t?"; reason: "+t:"")),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,i),this.emit(e,i)}},t.prototype.requestState=function(e,t){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()},t.prototype.checkPendingState=function(){var e=this.connectionManager.state;if(e.sendEvents||e.forceQueueEvents)switch(c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)},t.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":var e=new g.default("Channel attach timed out",90007,408);this.notifyState("suspended",e);break;case"detaching":e=new g.default("Channel detach timed out",90007,408),this.notifyState("attached",e);break;default:this.checkPendingState()}},t.prototype.startStateTimerIfNotRunning=function(){var e=this;this.stateTimer||(this.stateTimer=setTimeout((function(){c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),e.stateTimer=null,e.timeoutPendingState()}),this.realtime.options.timeouts.realtimeRequestTimeout))},t.prototype.clearStateTimer=function(){var e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)},t.prototype.startRetryTimer=function(){var e=this;if(!this.retryTimer){this.retryCount++;var t=s.getRetryTime(this.realtime.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout((function(){"suspended"===e.state&&e.connectionManager.state.sendEvents&&(e.retryTimer=null,c.default.logAction(c.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),e.requestState("attaching"))}),t)}},t.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},t.prototype.getReleaseErr=function(){var e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new g.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)},t.prototype.setChannelSerial=function(e){c.default.logAction(c.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)},t}(a.default);t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r,o,n){this.previous=e,this.current=t,"attached"===t&&(this.resumed=r,this.hasBacklog=o),n&&(this.reason=n)}},function(e,t,r){var o,n,i,s,a,c,l,u;e.exports=(n=(o=u=r(6)).lib,i=n.WordArray,s=n.Hasher,a=o.algo,c=[],l=a.SHA1=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],i=r[2],s=r[3],a=r[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var p=(o<<5|o>>>27)+a+c[l];p+=l<20?1518500249+(n&i|~n&s):l<40?1859775393+(n^i^s):l<60?(n&i|n&s|i&s)-1894007588:(n^i^s)-899497514,a=s,s=i,i=n<<30|n>>>2,n=o,o=p}r[0]=r[0]+o|0,r[1]=r[1]+n|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(o+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),o.SHA1=s._createHelper(l),o.HmacSHA1=s._createHmacHelper(l),u.SHA1)},function(e,t,r){"use strict";function o(e,t,r){for(var o=0,n=r.length;o<n;o++){var i=r.charCodeAt(o);if(i<128)e.setUint8(t++,i>>>0&127|0);else if(i<2048)e.setUint8(t++,i>>>6&31|192),e.setUint8(t++,i>>>0&63|128);else if(i<65536)e.setUint8(t++,i>>>12&15|224),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);else{if(!(i<1114112))throw new Error("bad codepoint "+i);e.setUint8(t++,i>>>18&7|240),e.setUint8(t++,i>>>12&63|128),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128)}}}function n(e,t,r){for(var o="",n=t,i=t+r;n<i;n++){var s=e.getUint8(n);if(0!=(128&s))if(192!=(224&s))if(224!=(240&s)){if(240!=(248&s))throw new Error("Invalid byte "+s.toString(16));o+=String.fromCharCode((7&s)<<18|(63&e.getUint8(++n))<<12|(63&e.getUint8(++n))<<6|(63&e.getUint8(++n))<<0)}else o+=String.fromCharCode((15&s)<<12|(63&e.getUint8(++n))<<6|(63&e.getUint8(++n))<<0);else o+=String.fromCharCode((15&s)<<6|63&e.getUint8(++n));else o+=String.fromCharCode(s)}return o}function i(e){for(var t=0,r=0,o=e.length;r<o;r++){var n=e.charCodeAt(r);if(n<128)t+=1;else if(n<2048)t+=2;else if(n<65536)t+=3;else{if(!(n<1114112))throw new Error("bad codepoint "+n);t+=4}}return t}Object.defineProperty(t,"__esModule",{value:!0});var s=4294967296,a=1/s,c=function(e,t){var r=this;this.map=function(e){for(var t={},o=0;o<e;o++)t[r.parse()]=r.parse();return t},this.bin=function(e){var t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(r.view.buffer,r.offset,e),0),r.offset+=e,t},this.buf=this.bin,this.str=function(e){var t=n(r.view,r.offset,e);return r.offset+=e,t},this.array=function(e){for(var t=new Array(e),o=0;o<e;o++)t[o]=r.parse();return t},this.ext=function(e){return r.offset+=e,{type:r.view.getInt8(r.offset),data:r.buf(e)}},this.parse=function(){var e,t,o=r.view.getUint8(r.offset);if(0==(128&o))return r.offset++,o;if(128==(240&o))return t=15&o,r.offset++,r.map(t);if(144==(240&o))return t=15&o,r.offset++,r.array(t);if(160==(224&o))return t=31&o,r.offset++,r.str(t);if(224==(224&o))return e=r.view.getInt8(r.offset),r.offset++,e;switch(o){case 192:return r.offset++,null;case 193:return void r.offset++;case 194:return r.offset++,!1;case 195:return r.offset++,!0;case 196:return t=r.view.getUint8(r.offset+1),r.offset+=2,r.bin(t);case 197:return t=r.view.getUint16(r.offset+1),r.offset+=3,r.bin(t);case 198:return t=r.view.getUint32(r.offset+1),r.offset+=5,r.bin(t);case 199:return t=r.view.getUint8(r.offset+1),r.offset+=2,r.ext(t);case 200:return t=r.view.getUint16(r.offset+1),r.offset+=3,r.ext(t);case 201:return t=r.view.getUint32(r.offset+1),r.offset+=5,r.ext(t);case 202:return e=r.view.getFloat32(r.offset+1),r.offset+=5,e;case 203:return e=r.view.getFloat64(r.offset+1),r.offset+=9,e;case 204:return e=r.view.getUint8(r.offset+1),r.offset+=2,e;case 205:return e=r.view.getUint16(r.offset+1),r.offset+=3,e;case 206:return e=r.view.getUint32(r.offset+1),r.offset+=5,e;case 207:return e=function(e,t){return t=t||0,e.getUint32(t)*s+e.getUint32(t+4)}(r.view,r.offset+1),r.offset+=9,e;case 208:return e=r.view.getInt8(r.offset+1),r.offset+=2,e;case 209:return e=r.view.getInt16(r.offset+1),r.offset+=3,e;case 210:return e=r.view.getInt32(r.offset+1),r.offset+=5,e;case 211:return e=function(e,t){return t=t||0,e.getInt32(t)*s+e.getUint32(t+4)}(r.view,r.offset+1),r.offset+=9,e;case 212:return t=1,r.offset++,r.ext(t);case 213:return t=2,r.offset++,r.ext(t);case 214:return t=4,r.offset++,r.ext(t);case 215:return t=8,r.offset++,r.ext(t);case 216:return t=16,r.offset++,r.ext(t);case 217:return t=r.view.getUint8(r.offset+1),r.offset+=2,r.str(t);case 218:return t=r.view.getUint16(r.offset+1),r.offset+=3,r.str(t);case 219:return t=r.view.getUint32(r.offset+1),r.offset+=5,r.str(t);case 220:return t=r.view.getUint16(r.offset+1),r.offset+=3,r.array(t);case 221:return t=r.view.getUint32(r.offset+1),r.offset+=5,r.array(t);case 222:return t=r.view.getUint16(r.offset+1),r.offset+=3,r.map(t);case 223:return t=r.view.getUint32(r.offset+1),r.offset+=5,r.map(t)}throw new Error("Unknown type 0x"+o.toString(16))},this.offset=t||0,this.view=e};function l(e,t){return Object.keys(e).filter((function(r){var o=e[r];return!(t&&null==o||"function"==typeof o&&!o.toJSON)}))}function u(e,t,r,n){var s=typeof e;if("string"==typeof e){var c=i(e);if(c<32)return t.setUint8(r,160|c),o(t,r+1,e),1+c;if(c<256)return t.setUint8(r,217),t.setUint8(r+1,c),o(t,r+2,e),2+c;if(c<65536)return t.setUint8(r,218),t.setUint16(r+1,c),o(t,r+3,e),3+c;if(c<4294967296)return t.setUint8(r,219),t.setUint32(r+1,c),o(t,r+5,e),5+c}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var p=e.byteLength;if(p<256)return t.setUint8(r,196),t.setUint8(r+1,p),new Uint8Array(t.buffer).set(new Uint8Array(e),r+2),2+p;if(p<65536)return t.setUint8(r,197),t.setUint16(r+1,p),new Uint8Array(t.buffer).set(new Uint8Array(e),r+3),3+p;if(p<4294967296)return t.setUint8(r,198),t.setUint32(r+1,p),new Uint8Array(t.buffer).set(new Uint8Array(e),r+5),5+p}if("number"==typeof e){if(Math.floor(e)!==e)return t.setUint8(r,203),t.setFloat64(r+1,e),9;if(e>=0){if(e<128)return t.setUint8(r,e),1;if(e<256)return t.setUint8(r,204),t.setUint8(r+1,e),2;if(e<65536)return t.setUint8(r,205),t.setUint16(r+1,e),3;if(e<4294967296)return t.setUint8(r,206),t.setUint32(r+1,e),5;if(e<0x10000000000000000)return t.setUint8(r,207),function(e,t,r){r<0x10000000000000000?(e.setUint32(t,Math.floor(r*a)),e.setInt32(t+4,-1&r)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(t,r+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(r,e),1;if(e>=-128)return t.setUint8(r,208),t.setInt8(r+1,e),2;if(e>=-32768)return t.setUint8(r,209),t.setInt16(r+1,e),3;if(e>=-2147483648)return t.setUint8(r,210),t.setInt32(r+1,e),5;if(e>=-0x8000000000000000)return t.setUint8(r,211),function(e,t,r){r<0x8000000000000000?(e.setInt32(t,Math.floor(r*a)),e.setInt32(t+4,-1&r)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(t,r+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===s)return n?0:(t.setUint8(r,212),t.setUint8(r+1,0),t.setUint8(r+2,0),3);if(null===e)return n?0:(t.setUint8(r,192),1);if("boolean"===s)return t.setUint8(r,e?195:194),1;if("function"==typeof e.toJSON)return u(e.toJSON(),t,r,n);if("object"===s){var g,d=0,f=void 0,h=Array.isArray(e);if((g=h?e.length:(f=l(e,n)).length)<16?(t.setUint8(r,g|(h?144:128)),d=1):g<65536?(t.setUint8(r,h?220:222),t.setUint16(r+1,g),d=3):g<4294967296&&(t.setUint8(r,h?221:223),t.setUint32(r+1,g),d=5),h)for(var m=0;m<g;m++)d+=u(e[m],t,r+d,n);else if(f)for(m=0;m<g;m++){var y=f[m];d+=u(y,t,r+d),d+=u(e[y],t,r+d,n)}return d}if("function"===s)return 0;throw new Error("Unknown type "+s)}function p(e,t){var r=typeof e;if("string"===r){var o=i(e);if(o<32)return 1+o;if(o<256)return 2+o;if(o<65536)return 3+o;if(o<4294967296)return 5+o}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){var n=e.byteLength;if(n<256)return 2+n;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if("number"==typeof e){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===r)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"==typeof e.toJSON)return p(e.toJSON(),t);if("object"===r){var s,a=0;if(Array.isArray(e)){s=e.length;for(var c=0;c<s;c++)a+=p(e[c],t)}else{var u=l(e,t);for(s=u.length,c=0;c<s;c++){var g=u[c];a+=p(g)+p(e[g],t)}}if(s<16)return 1+a;if(s<65536)return 3+a;if(s<4294967296)return 5+a;throw new Error("Array or object too long 0x"+s.toString(16))}if("function"===r)return 0;throw new Error("Unknown type "+r)}t.default={encode:function(e,t){var r=p(e,t);if(0!==r){var o=new ArrayBuffer(r);return u(e,new DataView(o),0,t),o}},decode:function(e){var t=new DataView(e),r=new c(t),o=r.parse();if(r.offset!==e.byteLength)throw new Error(e.byteLength-r.offset+" trailing bytes");return o},inspect:function(e){if(void 0===e)return"undefined";var t,r;if(e instanceof ArrayBuffer?(r="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(r="DataView",t=e),!t)return JSON.stringify(e);for(var o=[],n=0;n<e.byteLength;n++){if(n>20){o.push("...");break}var i=t.getUint8(n).toString(16);1===i.length&&(i="0"+i),o.push(i)}return"<"+r+" "+o.join(" ")+">"},utf8Write:o,utf8Read:n,utf8ByteCount:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(30)),i=o.__importDefault(r(50)),s=o.__importDefault(r(3)),a=o.__importDefault(r(55)),c=o.__importDefault(r(57)),l=o.__importDefault(r(62)),u=o.__importDefault(r(64)),p=o.__importDefault(r(68)),g=o.__importDefault(r(2)),d=r(8),f=o.__importDefault(r(65)),h=o.__importDefault(r(66)),m=o.__importDefault(r(41)),y=(0,c.default)(u.default,a.default);s.default.Crypto=y,s.default.BufferUtils=a.default,s.default.Http=l.default,s.default.Config=u.default,s.default.Transports=p.default,s.default.WebStorage=f.default,n.default.Crypto=y,i.default.Crypto=y,g.default.initLogHandlers(),s.default.Defaults=(0,d.getDefaults)(h.default),s.default.Config.agent&&(s.default.Defaults.agent+=" "+s.default.Config.agent),s.default.Config.noUpgrade&&(s.default.Defaults.upgradeTransports=[]),t.default={Rest:n.default,Realtime:i.default,msgpack:m.default}},function(e){e.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.42","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^5.1"},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@types/crypto-js":"^4.0.1","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","async":"ably-forks/async#requirejs","aws-sdk":"^2.1413.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"^2.8.5","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.6.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","null-loader":"^4.0.1","playwright":"^1.10.0","prettier":"^2.5.1","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^4.0.1","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","webpack":"^4.44.2","webpack-cli":"^4.2.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:node:skip-build":"grunt mocha","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","concat":"grunt concat","build":"grunt build:all","build:node":"grunt build:node","build:browser":"grunt build:browser","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}')},function(e,t){},function(e,t,r){var o;e.exports=(o=r(6),r(32),r(23),o.HmacSHA256)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(47)),s=o.__importDefault(r(25)),a=o.__importDefault(r(18)),c=o.__importDefault(r(4)),l=o.__importDefault(r(48)),u=function(){},p=function(){function e(e){this.rest=e,this.deviceRegistrations=new g(e),this.channelSubscriptions=new d(e)}return e.prototype.publish=function(e,t,r){var o=this.rest,i=o.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,a=n.defaultPostHeaders(o.options,i),c={},l=n.mixin({recipient:e},t);if("function"!=typeof r){if(this.rest.options.promises)return n.promisify(this,"publish",arguments);r=u}o.options.headers&&n.mixin(a,o.options.headers),o.options.pushFullWait&&n.mixin(c,{fullWait:"true"});var p=n.encodeBody(l,i);s.default.post(o,"/push/publish",p,a,c,null,(function(e){return r(e)}))},e}(),g=function(){function e(e){this.rest=e}return e.prototype.save=function(e,t){var r=this.rest,o=i.default.fromValues(e),a=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,c=n.defaultPostHeaders(r.options,a),l={};if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"save",arguments);t=u}r.options.headers&&n.mixin(c,r.options.headers),r.options.pushFullWait&&n.mixin(l,{fullWait:"true"});var p=n.encodeBody(o,a);s.default.put(r,"/push/deviceRegistrations/"+encodeURIComponent(e.id),p,c,l,null,(function(e,r,o,n){t(e,e?void 0:i.default.fromResponseBody(r,n?void 0:a))}))},e.prototype.get=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,a=n.defaultGetHeaders(r.options,o),l=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"get",arguments);t=u}"string"==typeof l&&l.length?(r.options.headers&&n.mixin(a,r.options.headers),s.default.get(r,"/push/deviceRegistrations/"+encodeURIComponent(l),a,{},null,(function(e,r,n,s){t(e,e?void 0:i.default.fromResponseBody(r,s?void 0:o))}))):t(new c.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.list=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,s=this.rest.http.supportsLinkHeaders?void 0:o,c=n.defaultGetHeaders(r.options,o);if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"list",arguments);t=u}r.options.headers&&n.mixin(c,r.options.headers),new a.default(r,"/push/deviceRegistrations",c,s,(function(e,t,r){return i.default.fromResponseBody(e,r?void 0:o)})).get(e,t)},e.prototype.remove=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=n.defaultGetHeaders(r.options,o),a={},l=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"remove",arguments);t=u}"string"==typeof l&&l.length?(r.options.headers&&n.mixin(i,r.options.headers),r.options.pushFullWait&&n.mixin(a,{fullWait:"true"}),s.default.delete(r,"/push/deviceRegistrations/"+encodeURIComponent(l),i,a,null,(function(e){return t(e)}))):t(new c.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400))},e.prototype.removeWhere=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=n.defaultGetHeaders(r.options,o);if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"removeWhere",arguments);t=u}r.options.headers&&n.mixin(i,r.options.headers),r.options.pushFullWait&&n.mixin(e,{fullWait:"true"}),s.default.delete(r,"/push/deviceRegistrations",i,e,null,(function(e){return t(e)}))},e}(),d=function(){function e(t){this.remove=e.prototype.removeWhere,this.rest=t}return e.prototype.save=function(e,t){var r=this.rest,o=l.default.fromValues(e),i=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,a=n.defaultPostHeaders(r.options,i),c={};if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"save",arguments);t=u}r.options.headers&&n.mixin(a,r.options.headers),r.options.pushFullWait&&n.mixin(c,{fullWait:"true"});var p=n.encodeBody(o,i);s.default.post(r,"/push/channelSubscriptions",p,a,c,null,(function(e,r,o,n){t(e,!e&&l.default.fromResponseBody(r,n?void 0:i))}))},e.prototype.list=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:o,s=n.defaultGetHeaders(r.options,o);if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"list",arguments);t=u}r.options.headers&&n.mixin(s,r.options.headers),new a.default(r,"/push/channelSubscriptions",s,i,(function(e,t,r){return l.default.fromResponseBody(e,r?void 0:o)})).get(e,t)},e.prototype.removeWhere=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=n.defaultGetHeaders(r.options,o);if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"removeWhere",arguments);t=u}r.options.headers&&n.mixin(i,r.options.headers),r.options.pushFullWait&&n.mixin(e,{fullWait:"true"}),s.default.delete(r,"/push/channelSubscriptions",i,e,null,(function(e){return t(e)}))},e.prototype.listChannels=function(e,t){var r=this.rest,o=r.options.useBinaryProtocol?n.Format.msgpack:n.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:o,s=n.defaultGetHeaders(r.options,o);if("function"!=typeof t){if(this.rest.options.promises)return n.promisify(this,"listChannels",arguments);t=u}r.options.headers&&n.mixin(s,r.options.headers),r.options.pushFullWait&&n.mixin(e,{fullWait:"true"}),new a.default(r,"/push/channels",s,i,(function(e,t,r){for(var i=!r&&o?n.decodeBody(e,o):e,s=0;s<i.length;s++)i[s]=String(i[s]);return i})).get(e,t)},e}();t.default=function(e){this.rest=e,this.admin=new p(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n,i=r(0),s=i.__importStar(r(1)),a=i.__importDefault(r(4));!function(e){e.Phone="phone",e.Tablet="tablet",e.Desktop="desktop",e.TV="tv",e.Watch="watch",e.Car="car",e.Embedded="embedded",e.Other="other"}(o||(o={})),function(e){e.Android="android",e.IOS="ios",e.Browser="browser"}(n||(n={}));var c=function(){function e(){}return e.prototype.toJSON=function(){var e,t,r;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null===(e=this.push)||void 0===e?void 0:e.recipient,state:null===(t=this.push)||void 0===t?void 0:t.state,error:null===(r=this.push)||void 0===r?void 0:r.error}}},e.prototype.toString=function(){var e,t,r,o,n="[DeviceDetails";return this.id&&(n+="; id="+this.id),this.platform&&(n+="; platform="+this.platform),this.formFactor&&(n+="; formFactor="+this.formFactor),this.clientId&&(n+="; clientId="+this.clientId),this.metadata&&(n+="; metadata="+this.metadata),this.deviceIdentityToken&&(n+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null===(e=this.push)||void 0===e?void 0:e.recipient)&&(n+="; push.recipient="+JSON.stringify(this.push.recipient)),(null===(t=this.push)||void 0===t?void 0:t.state)&&(n+="; push.state="+this.push.state),(null===(r=this.push)||void 0===r?void 0:r.error)&&(n+="; push.error="+JSON.stringify(this.push.error)),(null===(o=this.push)||void 0===o?void 0:o.metadata)&&(n+="; push.metadata="+this.push.metadata),n+"]"},e.fromResponseBody=function(t,r){return r&&(t=s.decodeBody(t,r)),s.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return t.error=t.error&&a.default.fromValues(t.error),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var r=t.length,o=new Array(r),n=0;n<r;n++)o[n]=e.fromValues(t[n]);return o},e.toRequestBody=s.encodeBody,e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__importStar(r(1)),n=function(){function e(){}return e.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},e.prototype.toString=function(){var e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+"]"},e.fromResponseBody=function(t,r){return r&&(t=o.decodeBody(t,r)),o.isArray(t)?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var r=t.length,o=new Array(r),n=0;n<r;n++)o[n]=e.fromValues(t[n]);return o},e.toRequestBody=o.encodeBody,e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=function(e){this.count=e&&e.count||0,this.data=e&&e.data||0,this.uncompressedData=e&&e.uncompressedData||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},s=function(e){function t(t){var r=e.call(this,t)||this;return t&&t.category&&(r.category={},n.forInOwnNonNullProperties(t.category,(function(e){r.category[e]=new i(t.category[e])}))),r}return o.__extends(t,e),t}(i),a=function(e){this.peak=e&&e.peak||0,this.min=e&&e.min||0,this.mean=e&&e.mean||0,this.opened=e&&e.opened||0,this.refused=e&&e.refused||0},c=function(e){this.succeeded=e&&e.succeeded||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},l=function(e){this.plain=new a(e&&e.plain),this.tls=new a(e&&e.tls),this.all=new a(e&&e.all)},u=function(e){this.messages=new s(e&&e.messages),this.presence=new s(e&&e.presence),this.all=new s(e&&e.all)},p=function(e){this.realtime=new u(e&&e.realtime),this.rest=new u(e&&e.rest),this.webhook=new u(e&&e.webhook),this.sharedQueue=new u(e&&e.sharedQueue),this.externalQueue=new u(e&&e.externalQueue),this.httpEvent=new u(e&&e.httpEvent),this.push=new u(e&&e.push),this.all=new u(e&&e.all)},g=function(e){this.all=new u(e&&e.all),this.inbound=new p(e&&e.inbound),this.outbound=new p(e&&e.outbound)},d=function(e){this.all=new u(e&&e.all),this.producerPaid=new g(e&&e.producerPaid),this.consumerPaid=new g(e&&e.consumerPaid)},f=function(e){this.messages=e&&e.messages||0;var t=e&&e.notifications;this.notifications={invalid:t&&t.invalid||0,attempted:t&&t.attempted||0,successful:t&&t.successful||0,failed:t&&t.failed||0},this.directPublishes=e&&e.directPublishes||0},h=function(e){this.succeeded=e&&e.succeeded||0,this.skipped=e&&e.skipped||0,this.failed=e&&e.failed||0},m=function(e){var t=this;this.delta=void 0,e&&e.delta&&(this.delta={},n.forInOwnNonNullProperties(e.delta,(function(r){t.delta[r]=new h(e.delta[r])})))},y=function(e){function t(t){var r=e.call(this,t)||this;return r.persisted=new u(t&&t.persisted),r.connections=new l(t&&t.connections),r.channels=new a(t&&t.channels),r.apiRequests=new c(t&&t.apiRequests),r.tokenRequests=new c(t&&t.tokenRequests),r.xchgProducer=new d(t&&t.xchgProducer),r.xchgConsumer=new d(t&&t.xchgConsumer),r.push=new f(t&&t.pushStats),r.processed=new m(t&&t.processed),r.inProgress=t&&t.inProgress||void 0,r.unit=t&&t.unit||void 0,r.intervalId=t&&t.intervalId||void 0,r}return o.__extends(t,e),t.fromValues=function(e){return new t(e)},t}(g);t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(30)),s=o.__importDefault(r(7)),a=o.__importDefault(r(2)),c=o.__importDefault(r(51)),l=o.__importDefault(r(38)),u=o.__importDefault(r(8)),p=o.__importDefault(r(4)),g=o.__importDefault(r(10)),d=o.__importDefault(r(35)),f=o.__importDefault(r(3)),h=o.__importDefault(r(9)),m=function(e){function t(t){var r=e.call(this,t)||this;return a.default.logAction(a.default.LOG_MINOR,"Realtime()",""),r.connection=new c.default(r,r.options),r.channels=new y(r),!1!==t.autoConnect&&r.connect(),r}return o.__extends(t,e),t.prototype.connect=function(){a.default.logAction(a.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},t.prototype.close=function(){a.default.logAction(a.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},t.Promise=function(e){return(e=u.default.objectifyOptions(e)).promises=!0,new t(e)},t.Callbacks=t,t.Utils=n,t.ConnectionManager=d.default,t.Platform=f.default,t.ProtocolMessage=g.default,t.Message=h.default,t}(i.default),y=function(e){function t(t){var r=e.call(this)||this;return r.realtime=t,r.all=Object.create(null),t.connection.connectionManager.on("transport.active",(function(){r.onTransportActive()})),r}return o.__extends(t,e),t.prototype.channelSerials=function(){for(var e={},t=0,r=n.keysArray(this.all,!0);t<r.length;t++){var o=r[t],i=this.all[o];i.properties.channelSerial&&(e[o]=i.properties.channelSerial)}return e},t.prototype.recoverChannels=function(e){for(var t=0,r=n.keysArray(e,!0);t<r.length;t++){var o=r[t];this.get(o).properties.channelSerial=e[o]}},t.prototype.onChannelMessage=function(e){var t=e.channel;if(void 0!==t){var r=this.all[t];r?r.onMessage(e):a.default.logAction(a.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+t)}else a.default.logAction(a.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+e.action)},t.prototype.onTransportActive=function(){for(var e in this.all){var t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&t.requestState("attaching")}},t.prototype.propogateConnectionInterruption=function(e,t){var r=["attaching","attached","detaching","suspended"],o={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(var i in this.all){var s=this.all[i];n.arrIn(r,s.state)&&s.notifyState(o,t)}},t.prototype.get=function(e,t){e=String(e);var r=this.all[e];if(r){if(t){if(r._shouldReattachToSetOptions(t))throw new p.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);r.setOptions(t)}}else r=this.all[e]=new l.default(this.realtime,e,t);return r},t.prototype.getDerived=function(e,t,r){if(t.filter){var o=n.toBase64(t.filter),i=n.matchDerivedChannel(e);e="[filter=".concat(o).concat(i.qualifierParam,"]").concat(i.channelName)}return this.get(e,r)},t.prototype.release=function(e){e=String(e);var t=this.all[e];if(t){var r=t.getReleaseErr();if(r)throw r;delete this.all[e]}},t}(s.default);t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(7)),s=o.__importDefault(r(35)),a=o.__importDefault(r(2)),c=o.__importDefault(r(37)),l=o.__importDefault(r(3));function u(){}var p=function(e){function t(t,r){var o=e.call(this)||this;return o.whenState=function(e,t){return i.default.prototype.whenState.call(o,e,o.state,t,new c.default(void 0,e))},o.ably=t,o.connectionManager=new s.default(t,r),o.state=o.connectionManager.state.state,o.key=void 0,o.id=void 0,o.errorReason=null,o.connectionManager.on("connectionstate",(function(e){var t=o.state=e.current;l.default.Config.nextTick((function(){o.emit(t,e)}))})),o.connectionManager.on("update",(function(e){l.default.Config.nextTick((function(){o.emit("update",e)}))})),o}return o.__extends(t,e),t.prototype.connect=function(){a.default.logAction(a.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},t.prototype.ping=function(e){if(a.default.logAction(a.default.LOG_MINOR,"Connection.ping()",""),!e){if(this.ably.options.promises)return n.promisify(this,"ping",arguments);e=u}this.connectionManager.ping(null,e)},t.prototype.close=function(){a.default.logAction(a.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(t.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),t.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},t}(i.default);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingMessage=void 0;var o=r(0),n=o.__importDefault(r(10)),i=o.__importStar(r(1)),s=o.__importDefault(r(7)),a=o.__importDefault(r(2)),c=o.__importDefault(r(36)),l=o.__importDefault(r(4)),u=n.default.Action;t.PendingMessage=function(e,t){this.message=e,this.callback=t,this.merged=!1;var r=e.action;this.sendAttempted=!1,this.ackRequired=r==u.MESSAGE||r==u.PRESENCE};var p=function(e){function t(t){var r=e.call(this)||this;return r.transport=t,r.messageQueue=new c.default,t.on("ack",(function(e,t){r.onAck(e,t)})),t.on("nack",(function(e,t,o){r.onNack(e,t,o)})),r}return o.__extends(t,e),t.prototype.onAck=function(e,t){a.default.logAction(a.default.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages(e,t)},t.prototype.onNack=function(e,t,r){a.default.logAction(a.default.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+i.inspectError(r)),r||(r=new l.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(e,t,r)},t.prototype.onceIdle=function(e){var t=this.messageQueue;0!==t.count()?t.once("idle",e):e()},t.prototype.send=function(e){e.ackRequired&&this.messageQueue.push(e),a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Protocol.send()","sending msg; "+n.default.stringify(e.message)),e.sendAttempted=!0,this.transport.send(e.message)},t.prototype.getTransport=function(){return this.transport},t.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},t.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},t.prototype.finish=function(){var e=this.transport;this.onceIdle((function(){e.disconnect()}))},t}(s.default);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(3)),i=o.__importStar(r(1)),s=o.__importDefault(r(26)),a=o.__importDefault(r(8)),c=o.__importDefault(r(2)),l=o.__importDefault(r(10)),u=o.__importDefault(r(4)),p="web_socket",g=function(e){function t(t,r,o){var i=e.call(this,t,r,o)||this;return i.shortName=p,o.heartbeats=n.default.Config.useProtocolHeartbeats,i.wsHost=a.default.getHost(o.options,o.host,!0),i}return o.__extends(t,e),t.isAvailable=function(){return!!n.default.Config.WebSocket},t.prototype.createWebSocket=function(e,t){return this.uri=e+i.toQueryString(t),new n.default.Config.WebSocket(this.uri)},t.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},t.prototype.connect=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),s.default.prototype.connect.call(this);var e=this,t=this.params,r=t.options,o=(r.tls?"wss://":"ws://")+this.wsHost+":"+a.default.getPort(r)+"/";c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+o),this.auth.getAuthParams((function(r,i){if(!e.isDisposed){var s="";for(var a in i)s+=" "+a+": "+i[a]+";";if(c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+s+" err: "+r),r)e.disconnect(r);else{var l=t.getConnectParams(i);try{var u=e.wsConnection=e.createWebSocket(o,l);u.binaryType=n.default.Config.binaryType,u.onopen=function(){e.onWsOpen()},u.onclose=function(t){e.onWsClose(t)},u.onmessage=function(t){e.onWsData(t.data)},u.onerror=function(t){e.onWsError(t)},u.on&&u.on("ping",(function(){e.onActivity()}))}catch(t){c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(t.stack||t.message)),e.disconnect(t)}}}}))},t.prototype.send=function(e){var t=this.wsConnection;if(t)try{t.send(l.default.serialize(e,this.params.format))}catch(e){var r="Exception from ws connection when trying to send: "+i.inspectError(e);c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.send()",r),this.finish("disconnected",new u.default(r,5e4,500))}else c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection")},t.prototype.onWsData=function(e){c.default.logAction(c.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage(l.default.deserialize(e,this.format))}catch(e){c.default.logAction(c.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+e.stack)}},t.prototype.onWsOpen=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},t.prototype.onWsClose=function(e){var t,r;if("object"==typeof e?(r=e.code,t=e.wasClean||1e3===r):t=1e3==(r=e),delete this.wsConnection,t){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var o=new u.default("Websocket closed",80003,400);this.finish("disconnected",o)}else{var n="Unclean disconnection of WebSocket ; code = "+r;o=new u.default(n,80003,400),c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onWsClose()",n),this.finish("disconnected",o)}this.emit("disposed")},t.prototype.onWsError=function(e){var t=this;c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),n.default.Config.nextTick((function(){t.disconnect(Error(e.message))}))},t.prototype.dispose=function(){c.default.logAction(c.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,n.default.Config.nextTick((function(){if(c.default.logAction(c.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()})))},t}(s.default);t.default=function(e){return g.isAvailable()&&(e.supportedTransports[p]=g),g}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(1)),i=o.__importDefault(r(34)),s=o.__importDefault(r(7)),a=o.__importDefault(r(2)),c=o.__importDefault(r(14)),l=o.__importStar(r(4)),u=o.__importDefault(r(38)),p=o.__importDefault(r(22)),g=o.__importDefault(r(39)),d=function(){};function f(e){var t=e.channel.realtime,r=t.auth.clientId;return(!r||"*"===r)&&"connected"===t.connection.state}function h(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;var r=e.parseId(),o=t.parseId();return r.msgSerial===o.msgSerial?r.index>o.index:r.msgSerial>o.msgSerial}var m=function(e){function t(t){var r=e.call(this,t)||this;return r.channel=t,r.syncComplete=!1,r.members=new y(r,(function(e){return e.clientId+":"+e.connectionId})),r._myMembers=new y(r,(function(e){return e.clientId})),r.subscriptions=new s.default,r.pendingPresence=[],r}return o.__extends(t,e),t.prototype.enter=function(e,t){if(f(this))throw new l.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter",t)},t.prototype.update=function(e,t){if(f(this))throw new l.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update",t)},t.prototype.enterClient=function(e,t,r){return this._enterOrUpdateClient(void 0,e,t,"enter",r)},t.prototype.updateClient=function(e,t,r){return this._enterOrUpdateClient(void 0,e,t,"update",r)},t.prototype._enterOrUpdateClient=function(e,t,r,o,i){var s=this;if(!i)if("function"==typeof r)i=r,r=null;else{if(this.channel.realtime.options.promises)return n.promisify(this,"_enterOrUpdateClient",[e,t,r,o]);i=d}var u=this.channel;if(u.connectionManager.activeState()){a.default.logAction(a.default.LOG_MICRO,"RealtimePresence."+o+"Client()","channel = "+u.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.realtime.auth.clientId));var p=c.default.fromValues({action:o,data:r});e&&(p.id=e),t&&(p.clientId=t),c.default.encode(p,u.channelOptions,(function(e){if(e)i(e);else switch(u.state){case"attached":u.sendPresence(p,i);break;case"initialized":case"detached":u.attach();case"attaching":s.pendingPresence.push({presence:p,callback:i});break;default:(e=new l.PartialErrorInfo("Unable to "+o+" presence channel while in "+u.state+" state",90001)).code=90001,i(e)}}))}else i(u.connectionManager.getError())},t.prototype.leave=function(e,t){if(f(this))throw new l.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e,t)},t.prototype.leaveClient=function(e,t,r){if(!r)if("function"==typeof t)r=t,t=null;else{if(this.channel.realtime.options.promises)return n.promisify(this,"leaveClient",[e,t]);r=d}var o=this.channel;if(o.connectionManager.activeState()){a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);var i=c.default.fromValues({action:"leave",data:t});switch(e&&(i.clientId=e),o.state){case"attached":o.sendPresence(i,r);break;case"attaching":this.pendingPresence.push({presence:i,callback:r});break;case"initialized":case"failed":var s=new l.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);null==r||r(s);break;default:null==r||r(o.invalidStateError())}}else null==r||r(o.connectionManager.getError())},t.prototype.get=function(e,t){var r=this,o=Array.prototype.slice.call(arguments);1==o.length&&"function"==typeof o[0]&&o.unshift(null),e=o[0],t=o[1];var i=!e||!("waitForSync"in e)||e.waitForSync;if(!t){if(this.channel.realtime.options.promises)return n.promisify(this,"get",o);t=d}function s(r){t(null,e?r.list(e):r.values())}"suspended"!==this.channel.state?function(e,t,r){switch(e.state){case"attached":case"suspended":r();break;case"initialized":case"detached":case"detaching":case"attaching":e.attach((function(e){e?t(e):r()}));break;default:t(l.default.fromValues(e.invalidStateError()))}}(this.channel,t,(function(){var e=r.members;i?e.waitSync((function(){s(e)})):s(e)})):i?t(l.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):s(this.members)},t.prototype.history=function(e,t){if(a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),void 0===t)if("function"==typeof e)t=e,e=null;else{if(this.channel.realtime.options.promises)return n.promisify(this,"history",arguments);t=d}e&&e.untilAttach&&("attached"===this.channel.state?(delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial):t(new l.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),i.default.prototype._history.call(this,e,t)},t.prototype.setPresence=function(e,t,r){var o,n;a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+r);var i=this.members,s=this._myMembers,l=[],u=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),r&&(n=r.match(/^[\w-]+:(.*)$/))&&(o=n[1]));for(var p=0;p<e.length;p++)switch((g=c.default.fromValues(e[p])).action){case"leave":i.remove(g)&&l.push(g),g.connectionId!==u||g.isSynthesized()||s.remove(g);break;case"enter":case"present":case"update":i.put(g)&&l.push(g),g.connectionId===u&&s.put(g)}for(t&&!o&&(i.endSync(),this.channel.syncChannelSerial=null),p=0;p<l.length;p++){var g=l[p];this.subscriptions.emit(g.action,g)}},t.prototype.onAttached=function(e){a.default.logAction(a.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();var t=this.pendingPresence,r=t.length;if(r){this.pendingPresence=[];var o=[],n=p.default.create();a.default.logAction(a.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+r+" queued presence messages");for(var i=0;i<r;i++){var s=t[i];o.push(s.presence),n.push(s.callback)}this.channel.sendPresence(o,n)}},t.prototype.actOnChannelState=function(e,t,r){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(r)}},t.prototype.failPendingPresence=function(e){if(this.pendingPresence.length){a.default.logAction(a.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+n.inspectError(e));for(var t=0;t<this.pendingPresence.length;t++)try{this.pendingPresence[t].callback(e)}catch(e){}this.pendingPresence=[]}},t.prototype._clearMyMembers=function(){this._myMembers.clear()},t.prototype._ensureMyMembersPresent=function(){var e=this,t=this._myMembers,r=function(t){if(t){var r="Presence auto-re-enter failed: "+t.toString(),o=new l.default(r,91004,400);a.default.logAction(a.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",r);var n=new g.default(e.channel.state,e.channel.state,!0,!1,o);e.channel.emit("update",n)}};for(var o in t.map){var n=t.map[o];a.default.logAction(a.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+n.clientId+'" into the presence set'),this._enterOrUpdateClient(n.id,n.clientId,n.data,"enter",r)}},t.prototype._synthesizeLeaves=function(e){var t=this.subscriptions;n.arrForEach(e,(function(e){var r=c.default.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:n.now()});t.emit("leave",r)}))},t.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.deprecated("presence.on","presence.subscribe"),this.subscribe.apply(this,e)},t.prototype.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.default.deprecated("presence.off","presence.unsubscribe"),this.unsubscribe.apply(this,e)},t.prototype.subscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=u.default.processListenerArgs(e),o=r[0],i=r[1],s=r[2],a=this.channel;if(!s){if(this.channel.realtime.options.promises)return n.promisify(this,"subscribe",[o,i]);s=d}"failed"!==a.state?(this.subscriptions.on(o,i),a.attach(s)):s(l.default.fromValues(a.invalidStateError()))},t.prototype.unsubscribe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=u.default.processListenerArgs(e),o=r[0],n=r[1];this.subscriptions.off(o,n)},t}(i.default),y=function(e){function t(t,r){var o=e.call(this)||this;return o.presence=t,o.map=Object.create(null),o.syncInProgress=!1,o.residualMembers=null,o.memberKey=r,o}return o.__extends(t,e),t.prototype.get=function(e){return this.map[e]},t.prototype.getClient=function(e){var t=this.map,r=[];for(var o in t){var n=t[o];n.clientId==e&&"absent"!=n.action&&r.push(n)}return r},t.prototype.list=function(e){var t=this.map,r=e&&e.clientId,o=e&&e.connectionId,n=[];for(var i in t){var s=t[i];"absent"!==s.action&&(r&&r!=s.clientId||o&&o!=s.connectionId||n.push(s))}return n},t.prototype.put=function(e){"enter"!==e.action&&"update"!==e.action||((e=c.default.fromValues(e)).action="present");var t=this.map,r=this.memberKey(e);this.residualMembers&&delete this.residualMembers[r];var o=t[r];return!(o&&!h(e,o)||(t[r]=e,0))},t.prototype.values=function(){var e=this.map,t=[];for(var r in e){var o=e[r];"absent"!=o.action&&t.push(o)}return t},t.prototype.remove=function(e){var t=this.map,r=this.memberKey(e),o=t[r];return!(o&&!h(e,o)||(this.syncInProgress?((e=c.default.fromValues(e)).action="absent",t[r]=e):delete t[r],0))},t.prototype.startSync=function(){var e=this.map,t=this.syncInProgress;a.default.logAction(a.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=n.copy(e),this.setInProgress(!0))},t.prototype.endSync=function(){var e=this.map,t=this.syncInProgress;if(a.default.logAction(a.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(var r in e)"absent"===e[r].action&&delete e[r];for(var r in this.presence._synthesizeLeaves(n.valuesArray(this.residualMembers)),this.residualMembers)delete e[r];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")},t.prototype.waitSync=function(e){var t=this.syncInProgress;a.default.logAction(a.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t?this.once("sync",e):e()},t.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},t.prototype.setInProgress=function(e){a.default.logAction(a.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e},t}(s.default);t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=r(56),i=r(31),s=r(11),a=o.__importDefault(r(5)),c=o.__importDefault(r(3)),l=function(){function e(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return e.prototype.isWordArray=function(e){return null!=e&&void 0!==e.sigBytes},e.prototype.isArrayBuffer=function(e){return null!=e&&e.constructor===ArrayBuffer},e.prototype.isTypedArray=function(e){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)},e.prototype.uint8ViewToBase64=function(e){for(var t,r,o,n,i="",s=this.base64CharSet,a=e.byteLength,c=a%3,l=a-c,u=0;u<l;u+=3)t=(258048&(n=e[u]<<16|e[u+1]<<8|e[u+2]))>>12,r=(4032&n)>>6,o=63&n,i+=s[(16515072&n)>>18]+s[t]+s[r]+s[o];return 1==c?(t=(3&(n=e[l]))<<4,i+=s[(252&n)>>2]+s[t]+"=="):2==c&&(t=(1008&(n=e[l]<<8|e[l+1]))>>4,r=(15&n)<<2,i+=s[(64512&n)>>10]+s[t]+s[r]+"="),i},e.prototype.base64ToArrayBuffer=function(e){for(var t=null===atob||void 0===atob?void 0:atob(e),r=t.length,o=new Uint8Array(r),n=0;n<r;n++){var i=t.charCodeAt(n);o[n]=i}return o.buffer},e.prototype.isBuffer=function(e){return this.isArrayBuffer(e)||this.isWordArray(e)||this.isTypedArray(e)},e.prototype.toBuffer=function(e){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(e))return new Uint8Array(e);if(this.isTypedArray(e))return new Uint8Array(e.buffer);if(this.isWordArray(e)){for(var t=new ArrayBuffer(e.sigBytes),r=new Uint8Array(t),o=0;o<e.sigBytes;o++)r[o]=e.words[o>>>2]>>>24-o%4*8&255;return r}throw new Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},e.prototype.toArrayBuffer=function(e){return this.isArrayBuffer(e)?e:this.toBuffer(e).buffer},e.prototype.toWordArray=function(e){return this.isTypedArray(e)&&(e=e.buffer),this.isWordArray(e)?e:a.default.create(e)},e.prototype.base64Encode=function(e){return this.isWordArray(e)?(0,s.stringify)(e):this.uint8ViewToBase64(this.toBuffer(e))},e.prototype.base64Decode=function(e){return ArrayBuffer&&c.default.Config.atob?this.base64ToArrayBuffer(e):(0,s.parse)(e)},e.prototype.hexEncode=function(e){return(0,n.stringify)(this.toWordArray(e))},e.prototype.hexDecode=function(e){var t=(0,n.parse)(e);return ArrayBuffer?this.toArrayBuffer(t):t},e.prototype.utf8Encode=function(e){return c.default.Config.TextEncoder?(new c.default.Config.TextEncoder).encode(e).buffer:(0,i.parse)(e)},e.prototype.utf8Decode=function(e){if(!this.isBuffer(e))throw new Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(e)?(new TextDecoder).decode(e):(e=this.toWordArray(e),(0,i.stringify)(e))},e.prototype.bufferCompare=function(e,t){if(!e)return-1;if(!t)return 1;var r=this.toWordArray(e),o=this.toWordArray(t);r.clamp(),o.clamp();var n=r.sigBytes-o.sigBytes;if(0!=n)return n;for(var i=r.words,s=o.words,a=0;a<i.length;a++)if(0!=(n=i[a]-s[a]))return n;return 0},e.prototype.byteLength=function(e){return this.isArrayBuffer(e)||this.isTypedArray(e)?e.byteLength:this.isWordArray(e)?e.sigBytes:-1},e.prototype.typedArrayToBuffer=function(e){return e.buffer},e}();t.default=new l},function(e,t,r){e.exports=r(6).enc.Hex},function(e,t,r){"use strict";r.r(t);var o=r(5),n=r.n(o),i=r(11),s=r(21),a=r.n(s),c=r(2),l=r.n(c),u=r(4),p=r.n(u);t.default=function(e,t){var r;if(e.getRandomWordArray)r=e.getRandomWordArray;else if("undefined"!=typeof Uint32Array&&e.getRandomValues){var o=new Uint32Array(4);r=function(r,n){var i=r/4,s=4==i?o:new Uint32Array(i);e.getRandomValues(s,(function(e){void 0!==n&&n(e,t.toWordArray(s))}))}}else r=function(e,t){l.a.logAction(l.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var r=e/4,o=new Array(r),i=0;i<r;i++)o[i]=Math.floor(4294967296*Math.random())-2147483648;t(null,n.a.create(o))};var s=[n.a.create([269488144,269488144,269488144,269488144],16),n.a.create([16777216],1),n.a.create([33685504],2),n.a.create([50529024],3),n.a.create([67372036],4),n.a.create([84215045,83886080],5),n.a.create([101058054,101056512],6),n.a.create([117901063,117901056],7),n.a.create([134744072,134744072],8),n.a.create([151587081,151587081,150994944],9),n.a.create([168430090,168430090,168427520],10),n.a.create([185273099,185273099,185273088],11),n.a.create([202116108,202116108,202116108],12),n.a.create([218959117,218959117,218959117,218103808],13),n.a.create([235802126,235802126,235802126,235798528],14),n.a.create([252645135,252645135,252645135,252645135],15),n.a.create([269488144,269488144,269488144,269488144],16)];function c(){}function u(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}function g(e,r,o){this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.cjsAlgorithm=e.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=t.toWordArray(e.key),o&&(this.iv=t.toWordArray(o).clone()),this.blockLengthWords=r}return c.CipherParams=u,c.getDefaultParams=function(e){var r;if("function"!=typeof e&&"string"!=typeof e){if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");r="string"==typeof e.key?Object(i.parse)(e.key.replace("_","/").replace("-","+")):t.toWordArray(e.key);var o=new u;if(o.key=r,o.algorithm=e.algorithm||"aes",o.keyLength=32*r.words.length,o.mode=e.mode||"cbc",e.keyLength&&e.keyLength!==o.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+o.keyLength);return function(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}(o),o}if(l.a.deprecated("Crypto.getDefaultParams(key, callback)","Crypto.getDefaultParams({key: key})"),"function"==typeof e)c.generateRandomKey((function(t){e(null,c.getDefaultParams({key:t}))}));else{if("function"!=typeof arguments[1])throw new Error("Invalid arguments for Crypto.getDefaultParams");arguments[1](null,c.getDefaultParams({key:e}))}},c.generateRandomKey=function(e,t){1==arguments.length&&"function"==typeof e&&(t=e,e=void 0),r((e||256)/8,(function(e,r){void 0!==t&&t(e?p.a.fromValues(e):null,r)}))},c.getCipher=function(e){var t=e instanceof u?e:c.getDefaultParams(e);return{cipherParams:t,cipher:new g(t,4,e.iv)}},g.prototype.encrypt=function(e,o){l.a.logAction(l.a.LOG_MICRO,"CBCCipher.encrypt()","");var n=(e=t.toWordArray(e)).sigBytes,i=function(e){return e+16&-16}(n),c=this,u=function(){c.getIv((function(t,r){if(t)o(t);else{var a=c.encryptCipher.process(e.concat(s[i-n])),l=r.concat(a);o(null,l)}}))};this.encryptCipher?u():this.iv?(this.encryptCipher=a.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),u()):r(16,(function(e,t){e?o(e):(c.encryptCipher=a.a.algo[c.cjsAlgorithm].createEncryptor(c.key,{iv:t}),c.iv=t,u())}))},g.prototype.decrypt=function(e){l.a.logAction(l.a.LOG_MICRO,"CBCCipher.decrypt()",""),e=t.toWordArray(e);var r=this.blockLengthWords,o=e.words,i=n.a.create(o.slice(0,r)),s=n.a.create(o.slice(r)),c=a.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:i}),u=c.process(s),p=c.finalize();return c.reset(),p&&p.sigBytes&&u.concat(p),u},g.prototype.getIv=function(e){if(this.iv){var t=this.iv;return this.iv=null,void e(null,t)}var o=this;r(16,(function(t,r){t?e(t):e(null,o.encryptCipher.process(r))}))},c}},function(e,t,r){var o;e.exports=(o=r(6),function(){var e=o,t=e.lib.WordArray,r=e.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n+=2){var i=t[n>>>2]>>>16-n%4*8&65535;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var r=e.length,o=[],n=0;n<r;n++)o[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return t.create(o,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],i=0;i<r;i+=2){var s=n(t[i>>>2]>>>16-i%4*8&65535);o.push(String.fromCharCode(s))}return o.join("")},parse:function(e){for(var r=e.length,o=[],i=0;i<r;i++)o[i>>>1]|=n(e.charCodeAt(i)<<16-i%2*16);return t.create(o,2*r)}}}(),o.enc.Utf16)},function(e,t,r){var o,n,i,s;e.exports=(s=r(6),r(28),n=(o=s).lib.CipherParams,i=o.enc.Hex,o.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return n.create({ciphertext:t})}},s.format.Hex)},function(e,t,r){var o;e.exports=(o=r(6),r(11),r(61),r(27),r(28),function(){var e=o,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],s=[],a=[],c=[],l=[],u=[],p=[],g=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,o=0;for(t=0;t<256;t++){var f=o^o<<1^o<<2^o<<3^o<<4;f=f>>>8^255&f^99,n[r]=f,i[f]=r;var h=e[r],m=e[h],y=e[m],v=257*e[f]^16843008*f;s[r]=v<<24|v>>>8,a[r]=v<<16|v>>>16,c[r]=v<<8|v>>>24,l[r]=v,v=16843009*y^65537*m^257*h^16843008*r,u[f]=v<<24|v>>>8,p[f]=v<<16|v>>>16,g[f]=v<<8|v>>>24,d[f]=v,r?(r=h^e[e[e[y^h]]],o^=e[e[o]]):r=o=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],h=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,o=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],s=0;s<o;s++)s<r?i[s]=t[s]:(l=i[s-1],s%r?r>6&&s%r==4&&(l=n[l>>>24]<<24|n[l>>>16&255]<<16|n[l>>>8&255]<<8|n[255&l]):(l=n[(l=l<<8|l>>>24)>>>24]<<24|n[l>>>16&255]<<16|n[l>>>8&255]<<8|n[255&l],l^=f[s/r|0]<<24),i[s]=i[s-r]^l);for(var a=this._invKeySchedule=[],c=0;c<o;c++){if(s=o-c,c%4)var l=i[s];else l=i[s-4];a[c]=c<4||s<=4?l:u[n[l>>>24]]^p[n[l>>>16&255]]^g[n[l>>>8&255]]^d[n[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,l,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,p,g,d,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,o,n,i,s,a){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],p=e[t+2]^r[2],g=e[t+3]^r[3],d=4,f=1;f<c;f++){var h=o[l>>>24]^n[u>>>16&255]^i[p>>>8&255]^s[255&g]^r[d++],m=o[u>>>24]^n[p>>>16&255]^i[g>>>8&255]^s[255&l]^r[d++],y=o[p>>>24]^n[g>>>16&255]^i[l>>>8&255]^s[255&u]^r[d++],v=o[g>>>24]^n[l>>>16&255]^i[u>>>8&255]^s[255&p]^r[d++];l=h,u=m,p=y,g=v}h=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[p>>>8&255]<<8|a[255&g])^r[d++],m=(a[u>>>24]<<24|a[p>>>16&255]<<16|a[g>>>8&255]<<8|a[255&l])^r[d++],y=(a[p>>>24]<<24|a[g>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^r[d++],v=(a[g>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&p])^r[d++],e[t]=h,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(h)}(),o.AES)},function(e,t,r){var o;e.exports=(o=r(6),function(e){var t=o,r=t.lib,n=r.WordArray,i=r.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var o=t+r,n=e[o];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],d=e[t+2],f=e[t+3],h=e[t+4],m=e[t+5],y=e[t+6],v=e[t+7],_=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],T=e[t+12],w=e[t+13],C=e[t+14],M=e[t+15],R=i[0],A=i[1],O=i[2],I=i[3];R=l(R,A,O,I,s,7,a[0]),I=l(I,R,A,O,c,12,a[1]),O=l(O,I,R,A,d,17,a[2]),A=l(A,O,I,R,f,22,a[3]),R=l(R,A,O,I,h,7,a[4]),I=l(I,R,A,O,m,12,a[5]),O=l(O,I,R,A,y,17,a[6]),A=l(A,O,I,R,v,22,a[7]),R=l(R,A,O,I,_,7,a[8]),I=l(I,R,A,O,b,12,a[9]),O=l(O,I,R,A,S,17,a[10]),A=l(A,O,I,R,E,22,a[11]),R=l(R,A,O,I,T,7,a[12]),I=l(I,R,A,O,w,12,a[13]),O=l(O,I,R,A,C,17,a[14]),R=u(R,A=l(A,O,I,R,M,22,a[15]),O,I,c,5,a[16]),I=u(I,R,A,O,y,9,a[17]),O=u(O,I,R,A,E,14,a[18]),A=u(A,O,I,R,s,20,a[19]),R=u(R,A,O,I,m,5,a[20]),I=u(I,R,A,O,S,9,a[21]),O=u(O,I,R,A,M,14,a[22]),A=u(A,O,I,R,h,20,a[23]),R=u(R,A,O,I,b,5,a[24]),I=u(I,R,A,O,C,9,a[25]),O=u(O,I,R,A,f,14,a[26]),A=u(A,O,I,R,_,20,a[27]),R=u(R,A,O,I,w,5,a[28]),I=u(I,R,A,O,d,9,a[29]),O=u(O,I,R,A,v,14,a[30]),R=p(R,A=u(A,O,I,R,T,20,a[31]),O,I,m,4,a[32]),I=p(I,R,A,O,_,11,a[33]),O=p(O,I,R,A,E,16,a[34]),A=p(A,O,I,R,C,23,a[35]),R=p(R,A,O,I,c,4,a[36]),I=p(I,R,A,O,h,11,a[37]),O=p(O,I,R,A,v,16,a[38]),A=p(A,O,I,R,S,23,a[39]),R=p(R,A,O,I,w,4,a[40]),I=p(I,R,A,O,s,11,a[41]),O=p(O,I,R,A,f,16,a[42]),A=p(A,O,I,R,y,23,a[43]),R=p(R,A,O,I,b,4,a[44]),I=p(I,R,A,O,T,11,a[45]),O=p(O,I,R,A,M,16,a[46]),R=g(R,A=p(A,O,I,R,d,23,a[47]),O,I,s,6,a[48]),I=g(I,R,A,O,v,10,a[49]),O=g(O,I,R,A,C,15,a[50]),A=g(A,O,I,R,m,21,a[51]),R=g(R,A,O,I,T,6,a[52]),I=g(I,R,A,O,f,10,a[53]),O=g(O,I,R,A,S,15,a[54]),A=g(A,O,I,R,c,21,a[55]),R=g(R,A,O,I,_,6,a[56]),I=g(I,R,A,O,M,10,a[57]),O=g(O,I,R,A,y,15,a[58]),A=g(A,O,I,R,w,21,a[59]),R=g(R,A,O,I,h,6,a[60]),I=g(I,R,A,O,E,10,a[61]),O=g(O,I,R,A,d,15,a[62]),A=g(A,O,I,R,b,21,a[63]),i[0]=i[0]+R|0,i[1]=i[1]+A|0,i[2]=i[2]+O|0,i[3]=i[3]+I|0},_doFinalize:function(){var t=this._data,r=t.words,o=8*this._nDataBytes,n=8*t.sigBytes;r[n>>>5]|=128<<24-n%32;var i=e.floor(o/4294967296),s=o;r[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,o,n,i,s){var a=e+(t&r|~t&o)+n+s;return(a<<i|a>>>32-i)+t}function u(e,t,r,o,n,i,s){var a=e+(t&o|r&~o)+n+s;return(a<<i|a>>>32-i)+t}function p(e,t,r,o,n,i,s){var a=e+(t^r^o)+n+s;return(a<<i|a>>>32-i)+t}function g(e,t,r,o,n,i,s){var a=e+(r^(t|~o))+n+s;return(a<<i|a>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),o.MD5)},function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=n.__importDefault(r(3)),s=n.__importStar(r(1)),a=n.__importDefault(r(8)),c=r(4),l=n.__importDefault(r(17)),u=n.__importDefault(r(15)),p=n.__importDefault(r(20)),g=n.__importDefault(r(2)),d=r(29),f=n.__importDefault(r(63)),h=r(24);function m(e){var t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}function y(e){var t=e.connection,r=t&&t.connectionManager.host;return r?[r].concat(a.default.getFallbackHosts(e.options)):a.default.getHosts(e.options)}var v=(o=function(){function e(e){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=y,this.options=e||{};var t=this.options.connectivityCheckUrl||a.default.connectivityCheckUrl,r=this.options.connectivityCheckParams,o=!this.options.connectivityCheckUrl;i.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(e,t,r,o,n,i,s){var a=u.default.createRequest(r,o,n,i,p.default.REQ_SEND,t&&t.options.timeouts,e);return a.once("complete",s),a.exec(),a},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){g.default.logAction(g.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+t),this.doUri(l.default.Get,null,t,null,null,r,(function(t,r,n,i,s){var a;a=o?!t&&"yes"==(null==r?void 0:r.replace(/\n/,"")):!t&&(0,h.isSuccessCode)(s),g.default.logAction(g.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+a),e(null,a)}))}):i.default.Config.jsonpSupported?(this.Request=function(e,t,r,o,n,s,a){var c=(0,d.createRequest)(r,o,n,s,p.default.REQ_SEND,t&&t.options.timeouts,e);return c.once("complete",a),i.default.Config.nextTick((function(){c.exec()})),c},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){var t=this,r=a.default.jsonpInternetUpUrl;if(this.checksInProgress)this.checksInProgress.push(e);else{this.checksInProgress=[e],g.default.logAction(g.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+r);var o=new d.Request("isTheInternetUp",r,null,null,null,p.default.REQ_SEND,a.default.TIMEOUTS);o.once("complete",(function(e,r){var o=!e&&r;g.default.logAction(g.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+o);for(var n=0;n<t.checksInProgress.length;n++)t.checksInProgress[n](null,o);t.checksInProgress=null})),i.default.Config.nextTick((function(){o.exec()}))}}):i.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=f.default,this.checkConnectivity=function(e){g.default.logAction(g.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+t),this.doUri(l.default.Get,null,t,null,null,null,(function(t,r){var o=!t&&"yes"==(null==r?void 0:r.replace(/\n/,""));g.default.logAction(g.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+o),e(null,o)}))}):this.Request=function(e,t,r,o,n,i,s){s(new c.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return e.prototype.do=function(e,t,r,o,i,a,l){var u=this,p="function"==typeof r?r:function(e){return t.baseUri(e)+r},g=t._currentFallback;if(g){if(g.validUntil>s.now())return this.Request?void this.Request(e,t,p(g.host),o,a,i,(function(s){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];if(s&&m(s))return t._currentFallback=null,void u.do(e,t,r,o,i,a,l);null==l||l.apply(void 0,n.__spreadArray([s],c,!1))})):void(null==l||l(new c.PartialErrorInfo("Request invoked before assigned to",null,500)));t._currentFallback=null}var d=y(t);if(1!==d.length){var f=function(r,c){var g=r.shift();u.doUri(e,t,p(g),o,i,a,(function(e){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];e&&m(e)&&r.length?f(r,!0):(c&&(t._currentFallback={host:g,validUntil:s.now()+t.options.timeouts.fallbackRetryTimeout}),null==l||l.apply(void 0,n.__spreadArray([e],o,!1)))}))};f(d)}else this.doUri(e,t,p(d[0]),o,i,a,l)},e.prototype.doUri=function(e,t,r,o,n,i,s){this.Request?this.Request(e,t,r,o,i,n,s):s(new c.PartialErrorInfo("Request invoked before assigned to",null,500))},e}(),o.methods=[l.default.Get,l.default.Delete,l.default.Post,l.default.Put,l.default.Patch],o.methodsWithoutBody=[l.default.Get,l.default.Delete],o.methodsWithBody=[l.default.Post,l.default.Put,l.default.Patch],o);t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importStar(r(4)),i=o.__importDefault(r(3)),s=o.__importDefault(r(8)),a=o.__importStar(r(1)),c=r(1);t.default=function(e,t,r,o,l,u,p){var g=new Headers(o||{}),d=e?e.toUpperCase():a.isEmptyArg(u)?"GET":"POST",f=new AbortController,h=setTimeout((function(){f.abort(),p(new n.PartialErrorInfo("Request timed out",null,408))}),t?t.options.timeouts.httpRequestTimeout:s.default.TIMEOUTS.httpRequestTimeout),m={method:d,headers:g,body:u};i.default.Config.isWebworker||(m.credentials=g.has("authorization")?"include":"same-origin"),(0,c.getGlobalObject)().fetch(r+"?"+new URLSearchParams(l||{}),m).then((function(e){clearTimeout(h);var t=e.headers.get("Content-Type");(t&&t.indexOf("application/x-msgpack")>-1?e.arrayBuffer():t&&t.indexOf("application/json")>-1?e.json():e.text()).then((function(r){var o=!!t&&-1===t.indexOf("application/x-msgpack");if(e.ok)p(null,r,e.headers,o,e.status);else{var s=function(e,t){if(function(e,t){return!!t.get("x-ably-errorcode")}(0,t))return e.error&&n.default.fromValues(e.error)}(r,e.headers)||new n.PartialErrorInfo("Error response received from server: "+e.status+" body was: "+i.default.Config.inspect(r),null,e.status);p(s,r,e.headers,o,e.status)}}))})).catch((function(e){clearTimeout(h),p(e)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=o.__importDefault(r(41)),i=o.__importStar(r(1)).getGlobalObject();"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var s,a=i.navigator&&i.navigator.userAgent.toString(),c={agent:"browser",logTimestamps:!0,userAgent:a,currentUrl:i.location&&i.location.href,noUpgrade:a&&!!a.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:i.WebSocket,fetchSupported:!!i.fetch,xhrSupported:i.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:"undefined"!=typeof document,allowComet:(s=i.location,!i.WebSocket||!s||!s.origin||s.origin.indexOf("http")>-1),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:n.default,supportsBinary:!!i.TextDecoder,preferBinary:!1,ArrayBuffer:i.ArrayBuffer,atob:i.atob,nextTick:void 0!==i.setImmediate?i.setImmediate.bind(i):function(e){setTimeout(e,0)},addEventListener:i.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){return i.TextDecoder&&(new i.TextEncoder).encode(e).length||e.length},TextEncoder:i.TextEncoder,TextDecoder:i.TextDecoder,Promise:i.Promise,getRandomValues:function(e){if(void 0!==e)return function(t,r){e.getRandomValues(t),r&&r(null)}}(i.crypto||msCrypto)};t.default=c},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__importStar(r(1)),n="ablyjs-storage-test",i=function(){function t(){try{e.sessionStorage.setItem(n,n),e.sessionStorage.removeItem(n),this.sessionSupported=!0}catch(e){this.sessionSupported=!1}try{e.localStorage.setItem(n,n),e.localStorage.removeItem(n),this.localSupported=!0}catch(e){this.localSupported=!1}}return t.prototype.get=function(e){return this._get(e,!1)},t.prototype.getSession=function(e){return this._get(e,!0)},t.prototype.remove=function(e){return this._remove(e,!1)},t.prototype.removeSession=function(e){return this._remove(e,!0)},t.prototype.set=function(e,t,r){return this._set(e,t,r,!1)},t.prototype.setSession=function(e,t,r){return this._set(e,t,r,!0)},t.prototype._set=function(e,t,r,n){var i={value:t};return r&&(i.expires=o.now()+r),this.storageInterface(n).setItem(e,JSON.stringify(i))},t.prototype._get=function(e,t){if(t&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!t&&!this.localSupported)throw new Error("Local Storage not supported");var r=this.storageInterface(t).getItem(e);if(!r)return null;var n=JSON.parse(r);return n.expires&&n.expires<o.now()?(this.storageInterface(t).removeItem(e),null):n.value},t.prototype._remove=function(e,t){return this.storageInterface(t).removeItem(e)},t.prototype.storageInterface=function(t){return t?e.sessionStorage:e.localStorage},t}();t.default=new i}).call(this,r(13))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__importDefault(r(67)),n={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",defaultTransports:[o.default.XhrPolling,o.default.XhrStreaming,o.default.JsonP,o.default.WebSocket],baseTransportOrder:[o.default.XhrPolling,o.default.XhrStreaming,o.default.JsonP,o.default.WebSocket],transportPreferenceOrder:[o.default.JsonP,o.default.XhrPolling,o.default.XhrStreaming,o.default.WebSocket],upgradeTransports:[o.default.XhrStreaming,o.default.WebSocket]};t.default=n},function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WebSocket="web_socket",e.Comet="comet",e.XhrStreaming="xhr_streaming",e.XhrPolling="xhr_polling",e.JsonP="jsonp"}(o||(o={})),t.default=o},function(e,t,r){"use strict";r.r(t);var o=r(29),n=r.n(o),i=r(1),s=r(3),a=r.n(s),c=r(12),l=r.n(c),u=r(15),p=r.n(u);t.default=[n.a,function(e){var t="xhr_polling";function r(e,r,o){o.stream=!1,l.a.call(this,e,r,o),this.shortName=t}return i.inherits(r,l.a),r.isAvailable=function(){return a.a.Config.xhrSupported&&a.a.Config.allowComet},r.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},r.prototype.createRequest=function(e,t,r,o,n){return p.a.createRequest(e,t,r,o,n,this.timeouts)},void 0!==e&&r.isAvailable()&&(e.supportedTransports[t]=r),r},function(e){var t="xhr_streaming";function r(e,r,o){l.a.call(this,e,r,o),this.shortName=t}return i.inherits(r,l.a),r.isAvailable=function(){return a.a.Config.xhrSupported&&a.a.Config.streamingSupported&&a.a.Config.allowComet},r.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},r.prototype.createRequest=function(e,t,r,o,n){return p.a.createRequest(e,t,r,o,n,this.timeouts)},void 0!==e&&r.isAvailable()&&(e.supportedTransports[t]=r),r}]}]).default},e.exports=t()},"./node_modules/ably/promises.js":(e,t,r)=>{"use strict";function o(e){return"string"==typeof e&&(e=-1==e.indexOf(":")?{token:e}:{key:e}),e.promises=!0,e}var n=r("./node_modules/ably/build/ably-commonjs.js"),i=function(e){return new n.Rest(o(e))};Object.assign(i,n.Rest);var s=function(e){return new n.Realtime(o(e))};Object.assign(s,n.Realtime),e.exports={Rest:i,Realtime:s}},"./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js":(e,t,r)=>{"use strict";var o=r("./node_modules/sdp/sdp.js");function n(e,t,r,n,i){var s=o.writeRtpDescription(e.kind,t);if(s+=o.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=o.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(n?n.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),s}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},o=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},n=function(e,t,r,n){var i=o(e.parameters.apt,r),s=o(t.parameters.apt,n);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(o){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(o.name.toLowerCase()===s.name.toLowerCase()&&o.clockRate===s.clockRate){if("rtx"===o.name.toLowerCase()&&o.parameters&&s.parameters.apt&&!n(o,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(o.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<o.rtcpFeedback.length;t++)if(o.rtcpFeedback[t].type===e.type&&o.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var o=0;o<t.headerExtensions.length;o++){var n=t.headerExtensions[o];if(e.uri===n.uri){r.headerExtensions.push(n);break}}})),r}function s(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function a(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function c(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,r,o,n){var i=new Event("track");i.track=r,i.receiver=o,i.transceiver={receiver:o},i.streams=n,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var u=function(r){var n=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var o=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof o;return n&&(o=[o]),o=o.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)})),delete e.url,e.urls=n?o[0]:o,!!o.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=o.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(u.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(u.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},u.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,o={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)o.iceTransport=this.transceivers[0].iceTransport,o.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();o.iceTransport=n.iceTransport,o.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(o),o},u.prototype.addTrack=function(t,r){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var o;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(o=this.transceivers[n]);return o||(o=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),o.track=t,o.stream=r,o.rtpSender=new e.RTCRtpSender(t,o.dtlsTransport),o.rtpSender},u.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var o=e.clone();e.getTracks().forEach((function(e,t){var r=o.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),o.getTracks().forEach((function(e){r.addTrack(e,o)}))}},u.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw c("InvalidAccessError","Sender was not created by this connection.");var o=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(o)&&this.localStreams.indexOf(o)>-1&&this.localStreams.splice(this.localStreams.indexOf(o),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},u.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},u.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},u.prototype._createIceGatherer=function(t,r){var o=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?"completed":"gathering",null!==o.transceivers[t].bufferedCandidateEvents&&o.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),n},u.prototype._gather=function(t,r){var n=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var l=o.writeCandidate(a);s.candidate=Object.assign(s.candidate,o.parseCandidate(l)),s.candidate.candidate=l,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var u=o.getMediaSections(n._localDescription.sdp);u[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=o.getDescription(n._localDescription.sdp)+u.join("");var p=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),p&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},u.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var o=new e.RTCDtlsTransport(r);return o.ondtlsstatechange=function(){t._updateConnectionState()},o.onerror=function(){Object.defineProperty(o,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:o}},u.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var o=this.transceivers[e].dtlsTransport;o&&(delete o.ondtlsstatechange,delete o.onerror,delete this.transceivers[e].dtlsTransport)},u.prototype._transceive=function(e,r,n){var s=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:o.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),n&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},u.prototype.setLocalDescription=function(e){var t,r,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=o.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=o.parseRtpParameters(e);n.transceivers[t].localCapabilities=r})),n.transceivers.forEach((function(e,t){n._gather(e.mid,t)}));else if("answer"===e.type){t=o.splitSections(n._remoteDescription.sdp),r=t.shift();var a=o.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var s=n.transceivers[t],c=s.iceGatherer,l=s.iceTransport,u=s.dtlsTransport,p=s.localCapabilities,g=s.remoteCapabilities;if(!(o.isRejected(e)&&0===o.matchPrefix(e,"a=bundle-only").length||s.rejected)){var d=o.getIceParameters(e,r),f=o.getDtlsParameters(e,r);a&&(f.role="server"),n.usingBundle&&0!==t||(n._gather(s.mid,t),"new"===l.state&&l.start(c,d,a?"controlling":"controlled"),"new"===u.state&&u.start(f));var h=i(p,g);n._transceive(s,h.codecs.length>0,!1)}}))}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(n){var u=this;if(-1===["offer","answer"].indexOf(n.type))return Promise.reject(c("TypeError",'Unsupported type "'+n.type+'"'));if(!s("setRemoteDescription",n.type,u.signalingState)||u._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+n.type+" in state "+u.signalingState));var p={};u.remoteStreams.forEach((function(e){p[e.id]=e}));var g=[],d=o.splitSections(n.sdp),f=d.shift(),h=o.matchPrefix(f,"a=ice-lite").length>0,m=o.matchPrefix(f,"a=group:BUNDLE ").length>0;u.usingBundle=m;var y=o.matchPrefix(f,"a=ice-options:")[0];return u.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,d.forEach((function(s,c){var l=o.splitLines(s),d=o.getKind(s),y=o.isRejected(s)&&0===o.matchPrefix(s,"a=bundle-only").length,v=l[0].substr(2).split(" ")[2],_=o.getDirection(s,f),b=o.parseMsid(s),S=o.getMid(s)||o.generateIdentifier();if(y||"application"===d&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))u.transceivers[c]={mid:S,kind:d,protocol:v,rejected:!0};else{var E,T,w,C,M,R,A,O,I;!y&&u.transceivers[c]&&u.transceivers[c].rejected&&(u.transceivers[c]=u._createTransceiver(d,!0));var P,j,D=o.parseRtpParameters(s);y||(P=o.getIceParameters(s,f),(j=o.getDtlsParameters(s,f)).role="client"),A=o.parseRtpEncodingParameters(s);var N=o.parseRtcpParameters(s),U=o.matchPrefix(s,"a=end-of-candidates",f).length>0,F=o.matchPrefix(s,"a=candidate:").map((function(e){return o.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===n.type||"answer"===n.type)&&!y&&m&&c>0&&u.transceivers[c]&&(u._disposeIceAndDtlsTransports(c),u.transceivers[c].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[c].iceTransport=u.transceivers[0].iceTransport,u.transceivers[c].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[c].rtpSender&&u.transceivers[c].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[c].rtpReceiver&&u.transceivers[c].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),"offer"!==n.type||y)"answer"!==n.type||y||(T=(E=u.transceivers[c]).iceGatherer,w=E.iceTransport,C=E.dtlsTransport,M=E.rtpReceiver,R=E.sendEncodingParameters,O=E.localCapabilities,u.transceivers[c].recvEncodingParameters=A,u.transceivers[c].remoteCapabilities=D,u.transceivers[c].rtcpParameters=N,F.length&&"new"===w.state&&(!h&&!U||m&&0!==c?F.forEach((function(e){a(E.iceTransport,e)})):w.setRemoteCandidates(F)),m&&0!==c||("new"===w.state&&w.start(T,P,"controlling"),"new"===C.state&&C.start(j)),!i(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,u._transceive(E,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!M||"sendrecv"!==_&&"sendonly"!==_?delete E.rtpReceiver:(I=M.track,b?(p[b.stream]||(p[b.stream]=new e.MediaStream),r(I,p[b.stream]),g.push([I,M,p[b.stream]])):(p.default||(p.default=new e.MediaStream),r(I,p.default),g.push([I,M,p.default]))));else{(E=u.transceivers[c]||u._createTransceiver(d)).mid=S,E.iceGatherer||(E.iceGatherer=u._createIceGatherer(c,m)),F.length&&"new"===E.iceTransport.state&&(!U||m&&0!==c?F.forEach((function(e){a(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(F)),O=e.RTCRtpReceiver.getCapabilities(d),t<15019&&(O.codecs=O.codecs.filter((function(e){return"rtx"!==e.name}))),R=E.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,k=!1;"sendrecv"===_||"sendonly"===_?(k=!E.rtpReceiver,M=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,d),k&&(I=M.track,b&&"-"===b.stream||(b?(p[b.stream]||(p[b.stream]=new e.MediaStream,Object.defineProperty(p[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(I,"id",{get:function(){return b.track}}),L=p[b.stream]):(p.default||(p.default=new e.MediaStream),L=p.default)),L&&(r(I,L),E.associatedRemoteMediaStreams.push(L)),g.push([I,M,L]))):E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),E.associatedRemoteMediaStreams=[]),E.localCapabilities=O,E.remoteCapabilities=D,E.rtpReceiver=M,E.rtcpParameters=N,E.sendEncodingParameters=R,E.recvEncodingParameters=A,u._transceive(u.transceivers[c],!1,k)}}})),void 0===u._dtlsRole&&(u._dtlsRole="offer"===n.type?"active":"passive"),u._remoteDescription={type:n.type,sdp:n.sdp},"offer"===n.type?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(p).forEach((function(t){var r=p[t];if(r.getTracks().length){if(-1===u.remoteStreams.indexOf(r)){u.remoteStreams.push(r);var o=new Event("addstream");o.stream=r,e.setTimeout((function(){u._dispatchEvent("addstream",o)}))}g.forEach((function(e){var t=e[0],o=e[1];r.id===e[2].id&&l(u,t,o,[r])}))}})),g.forEach((function(e){e[2]||l(u,e[0],e[1],[])})),e.setTimeout((function(){u&&u.transceivers&&u.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},u.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},u.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},u.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},u.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,s=r.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));i>0||s>0;)i>0&&(r._createTransceiver("audio"),i--),s>0&&(r._createTransceiver("video"),s--);var l=o.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(n,i){var s=n.track,a=n.kind,c=n.mid||o.generateIdentifier();n.mid=c,n.iceGatherer||(n.iceGatherer=r._createIceGatherer(i,r.usingBundle));var l=e.RTCRtpSender.getCapabilities(a);t<15019&&(l.codecs=l.codecs.filter((function(e){return"rtx"!==e.name}))),l.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),l.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var u=n.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];s&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,a)),n.localCapabilities=l,n.sendEncodingParameters=u})),"max-compat"!==r._config.bundlePolicy&&(l+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){l+=n(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,l+="a="+o.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},u.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var s=o.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(s+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=o.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,o){if(!(o+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var l=i(e.localCapabilities,e.remoteCapabilities);!l.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=n(e,l,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var l=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(l)},u.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,i){if(!r._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var l=0;l<r.transceivers.length;l++)if(r.transceivers[l].mid===e.sdpMid){s=l;break}var u=r.transceivers[s];if(!u)return i(c("OperationError","Can not add ICE candidate"));if(u.rejected)return n();var p=Object.keys(e.candidate).length>0?o.parseCandidate(e.candidate):{};if("tcp"===p.protocol&&(0===p.port||9===p.port))return n();if(p.component&&1!==p.component)return n();if((0===s||s>0&&u.iceTransport!==r.transceivers[0].iceTransport)&&!a(u.iceTransport,p))return i(c("OperationError","Can not add ICE candidate"));var g=e.candidate.trim();0===g.indexOf("a=")&&(g=g.substr(2)),(t=o.getMediaSections(r._remoteDescription.sdp))[s]+="a="+(p.type?g:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=o.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var d=0;d<r.transceivers.length&&(r.transceivers[d].rejected||(r.transceivers[d].iceTransport.addRemoteCandidate({}),(t=o.getMediaSections(r._remoteDescription.sdp))[d]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=o.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));d++);n()}))},u.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var o=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&o.push(e[t].getStats())}))})),Promise.all(o).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var o=r.prototype.getStats;r.prototype.getStats=function(){return o.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var o;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(o=e[r]).type]||o.type,t.set(r,e[r])})),t}))}}}));var p=["createOffer","createAnswer"];return p.forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(p=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),u}},"./node_modules/sdp/sdp.js":e=>{"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return 0===e.indexOf(r)}))},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},o=8;o<t.length;o+=2)switch(t[o]){case"raddr":r.relatedAddress=t[o+1];break;case"rport":r.relatedPort=parseInt(t[o+1],10);break;case"tcptype":r.tcpType=t[o+1];break;case"ufrag":r.ufrag=t[o+1],r.usernameFragment=t[o+1];break;default:r[t[o]]=t[o+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,r={},o=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<o.length;n++)r[(t=o[n].trim().split("="))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var o=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?o.push(t+"="+e.parameters[t]):o.push(t)})),t+="a=fmtp:"+r+" "+o.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},o=e.indexOf(":",t);return o>-1?(r.attribute=e.substr(t+1,o-t-1),r.value=e.substr(o+1)):r.attribute=e.substr(t+1),r},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){var o=t.matchPrefix(e+r,"a=ice-ufrag:")[0],n=t.matchPrefix(e+r,"a=ice-pwd:")[0];return o&&n?{usernameFragment:o.substr(12),password:n.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(e)[0].split(" "),n=3;n<o.length;n++){var i=o[n],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var a=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),r.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,r){var o="";o+="m="+e+" ",o+=r.codecs.length>0?"9":"0",o+=" UDP/TLS/RTP/SAVPF ",o+=r.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",o+="c=IN IP4 0.0.0.0\r\n",o+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach((function(e){o+=t.writeRtpMap(e),o+=t.writeFmtp(e),o+=t.writeRtcpFb(e)}));var n=0;return r.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(o+="a=maxptime:"+n+"\r\n"),o+="a=rtcp-mux\r\n",r.headerExtensions&&r.headerExtensions.forEach((function(e){o+=t.writeExtmap(e)})),o},t.parseRtpEncodingParameters=function(e){var r,o=[],n=t.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),s=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,l=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(r=l[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&r&&(t.rtx={ssrc:r}),o.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},o.push(t))}})),0===o.length&&c&&o.push({ssrc:c});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,o.forEach((function(e){e.maxBitrate=u}))),o},t.parseRtcpParameters=function(e){var r={},o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];o&&(r.cname=o.value,r.ssrc=o.ssrc);var n=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=n.length>0,r.compound=0===n.length;var i=t.matchPrefix(e,"a=rtcp-mux");return r.mux=i.length>0,r},t.parseMsid=function(e){var r,o=t.matchPrefix(e,"a=msid:");if(1===o.length)return{stream:(r=o[0].substr(7).split(" "))[0],track:r[1]};var n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return n.length>0?{stream:(r=n[0].value.split(" "))[0],track:r[1]}:void 0},t.parseSctpDescription=function(e){var r,o=t.parseMLine(e),n=t.matchPrefix(e,"a=max-message-size:");n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:o.fmt,maxMessageSize:r};if(t.matchPrefix(e,"a=sctpmap:").length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r,o){var n=void 0!==r?r:2;return"v=0\r\no="+(o||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,r,o,n){var i=t.writeRtpDescription(e.kind,r);if(i+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===o?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var s="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),i},t.getDirection=function(e,r){for(var o=t.splitLines(e),n=0;n<o.length;n++)switch(o[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[n].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var r=t.splitLines(e),o=0;o<r.length;o++)if(r[o].length<2||"="!==r[o].charAt(1))return!1;return!0},e.exports=t},"./node_modules/webrtc-adapter/src/js/adapter_core.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});const o=(0,r("./node_modules/webrtc-adapter/src/js/adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window})},"./node_modules/webrtc-adapter/src/js/adapter_factory.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{adapterFactory:()=>l});var o=r("./node_modules/webrtc-adapter/src/js/utils.js"),n=r("./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js"),i=r("./node_modules/webrtc-adapter/src/js/edge/edge_shim.js"),s=r("./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js"),a=r("./node_modules/webrtc-adapter/src/js/safari/safari_shim.js"),c=r("./node_modules/webrtc-adapter/src/js/common_shim.js");function l(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};const r=o.log,l=o.detectBrowser(e),u={browserDetails:l,commonShim:c,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(l.browser){case"chrome":if(!n||!n.shimPeerConnection||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;if(null===l.version)return r("Chrome shim can not determine version, not shimming."),u;r("adapter.js shimming chrome."),u.browserShim=n,c.shimAddIceCandidateNullOrEmpty(e,l),n.shimGetUserMedia(e,l),n.shimMediaStream(e,l),n.shimPeerConnection(e,l),n.shimOnTrack(e,l),n.shimAddTrackRemoveTrack(e,l),n.shimGetSendersWithDtmf(e,l),n.shimGetStats(e,l),n.shimSenderReceiverGetStats(e,l),n.fixNegotiationNeeded(e,l),c.shimRTCIceCandidate(e,l),c.shimConnectionState(e,l),c.shimMaxMessageSize(e,l),c.shimSendThrowTypeError(e,l),c.removeExtmapAllowMixed(e,l);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=s,c.shimAddIceCandidateNullOrEmpty(e,l),s.shimGetUserMedia(e,l),s.shimPeerConnection(e,l),s.shimOnTrack(e,l),s.shimRemoveStream(e,l),s.shimSenderGetStats(e,l),s.shimReceiverGetStats(e,l),s.shimRTCDataChannel(e,l),s.shimAddTransceiver(e,l),s.shimGetParameters(e,l),s.shimCreateOffer(e,l),s.shimCreateAnswer(e,l),c.shimRTCIceCandidate(e,l),c.shimConnectionState(e,l),c.shimMaxMessageSize(e,l),c.shimSendThrowTypeError(e,l);break;case"edge":if(!i||!i.shimPeerConnection||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=i,i.shimGetUserMedia(e,l),i.shimGetDisplayMedia(e,l),i.shimPeerConnection(e,l),i.shimReplaceTrack(e,l),c.shimMaxMessageSize(e,l),c.shimSendThrowTypeError(e,l);break;case"safari":if(!a||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=a,c.shimAddIceCandidateNullOrEmpty(e,l),a.shimRTCIceServerUrls(e,l),a.shimCreateOfferLegacy(e,l),a.shimCallbacksAPI(e,l),a.shimLocalStreamsAPI(e,l),a.shimRemoteStreamsAPI(e,l),a.shimTrackEventTransceiver(e,l),a.shimGetUserMedia(e,l),a.shimAudioContext(e,l),c.shimRTCIceCandidate(e,l),c.shimMaxMessageSize(e,l),c.shimSendThrowTypeError(e,l),c.removeExtmapAllowMixed(e,l);break;default:r("Unsupported browser!")}return u}},"./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{shimGetUserMedia:()=>n.shimGetUserMedia,shimGetDisplayMedia:()=>i.shimGetDisplayMedia,shimMediaStream:()=>s,shimOnTrack:()=>a,shimGetSendersWithDtmf:()=>c,shimGetStats:()=>l,shimSenderReceiverGetStats:()=>u,shimAddTrackRemoveTrackWithNative:()=>p,shimAddTrackRemoveTrack:()=>g,shimPeerConnection:()=>d,fixNegotiationNeeded:()=>f});var o=r("./node_modules/webrtc-adapter/src/js/utils.js"),n=r("./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js"),i=r("./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js");function s(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function a(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(r=>{let o;o=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.track.id)):{track:r.track};const n=new Event("track");n.track=r.track,n.receiver=o,n.transceiver={receiver:o},n.streams=[t.stream],this.dispatchEvent(n)})),t.stream.getTracks().forEach((r=>{let o;o=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.id)):{track:r};const n=new Event("track");n.track=r,n.receiver=o,n.transceiver={receiver:o},n.streams=[t.stream],this.dispatchEvent(n)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else o.wrapPeerConnectionEvent(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function c(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,o){let n=r.apply(this,arguments);return n||(n=t(this,e),this._senders.push(n)),n};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){o.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function l(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const n=function(e){const t={};return e.result().forEach((e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},i=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const o=function(e){r(i(n(e)))};return t.apply(this,[o,e])}return new Promise(((e,r)=>{t.apply(this,[function(t){e(i(n(t)))},r])})).then(r,o)}}function u(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>o.filterStats(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),o.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>o.filterStats(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,o;return this.getSenders().forEach((r=>{r.track===e&&(t?o=!0:t=r)})),this.getReceivers().forEach((t=>(t.track===e&&(r?o=!0:r=t),t.track===e))),o||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function p(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const o=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(o)&&this._shimmedLocalStreams[r.id].push(o):this._shimmedLocalStreams[r.id]=[r,o],o};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();r.apply(this,arguments);const o=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(o)};const o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],o.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),n.apply(this,arguments)}}function g(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return p(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}o.apply(this,[t])};const n=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const o=e._reverseStreams[t],n=e._streams[o.id];r=r.replace(new RegExp(n.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const n=this._streams[r.id];if(n)n.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const o=new e.MediaStream([t]);this._streams[r.id]=o,this._reverseStreams[o.id]=r,this.addStream(o)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],o={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=i(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>i(this,e)))}};e.RTCPeerConnection.prototype[t]=o[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const o=e._reverseStreams[t],n=e._streams[o.id];r=r.replace(new RegExp(o.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((r=>{this._streams[r].getTracks().find((t=>e.track===t))&&(t=this._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function d(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],o={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=o[t]}))}function f(e,t){o.wrapPeerConnectionEvent(e,"negotiationneeded",(e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))}},"./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":(e,t,r)=>{"use strict";function o(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((t=>{const o=r.video&&r.video.width,n=r.video&&r.video.height,i=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},o&&(r.video.mandatory.maxWidth=o),n&&(r.video.mandatory.maxHeight=n),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}r.r(t),r.d(t,{shimGetDisplayMedia:()=>o})},"./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{shimGetUserMedia:()=>n});const o=r("./node_modules/webrtc-adapter/src/js/utils.js").log;function n(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const o="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==o.exact&&"number"==typeof o.exact&&(o.min=o.max=o.exact);const n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==o.ideal){t.optional=t.optional||[];let e={};"number"==typeof o.ideal?(e[n("min",r)]=o.ideal,t.optional.push(e),e={},e[n("max",r)]=o.ideal,t.optional.push(e)):(e[n("",r)]=o.ideal,t.optional.push(e))}void 0!==o.exact&&"number"!=typeof o.exact?(t.mandatory=t.mandatory||{},t.mandatory[n("",r)]=o.exact):["min","max"].forEach((e=>{void 0!==o[e]&&(t.mandatory=t.mandatory||{},t.mandatory[n(e,r)]=o[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const a=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return r.mediaDevices.enumerateDevices().then((r=>{let a=(r=r.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&r.length&&t.includes("back")&&(a=r[r.length-1]),a&&(e.video.deviceId=s.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=n(e.video),o("chrome: "+JSON.stringify(e)),i(e)}))}e.video=n(e.video)}return o("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,o){i(e,(e=>{r.webkitGetUserMedia(e,t,(e=>{o&&o(s(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}},"./node_modules/webrtc-adapter/src/js/common_shim.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{shimRTCIceCandidate:()=>s,shimMaxMessageSize:()=>a,shimSendThrowTypeError:()=>c,shimConnectionState:()=>l,removeExtmapAllowMixed:()=>u,shimAddIceCandidateNullOrEmpty:()=>p});var o=r("./node_modules/sdp/sdp.js"),n=r.n(o),i=r("./node_modules/webrtc-adapter/src/js/utils.js");function s(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),o=n().parseCandidate(e.candidate),i=Object.assign(r,o);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function a(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=n().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=n().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),r=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r}(e),o=function(e,r){let o=65536;"firefox"===t.browser&&57===t.version&&(o=65535);const i=n().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?o=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(o=2147483637),o}(arguments[0],e);let i;i=0===r&&0===o?Number.POSITIVE_INFINITY:0===r||0===o?Math.max(r,o):Math.min(r,o);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>i}),this._sctp=s}return r.apply(this,arguments)}}function c(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const o=arguments[0],n=o.length||o.size||o.byteLength;if("open"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function l(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}function u(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const r=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function p(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}},"./node_modules/webrtc-adapter/src/js/edge/edge_shim.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{shimGetUserMedia:()=>a.shimGetUserMedia,shimGetDisplayMedia:()=>c.shimGetDisplayMedia,shimPeerConnection:()=>l,shimReplaceTrack:()=>u});var o=r("./node_modules/webrtc-adapter/src/js/utils.js"),n=r("./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js"),i=r("./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js"),s=r.n(i),a=r("./node_modules/webrtc-adapter/src/js/edge/getusermedia.js"),c=r("./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js");function l(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const r=new Event("enabled");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=s()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,n.filterIceServers)(e.iceServers,t.version),o.log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function u(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},"./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{filterIceServers:()=>n});var o=r("./node_modules/webrtc-adapter/src/js/utils.js");function n(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&o.deprecated("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=n?t[0]:t,!!t.length}}))}},"./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js":(e,t,r)=>{"use strict";function o(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}r.r(t),r.d(t,{shimGetDisplayMedia:()=>o})},"./node_modules/webrtc-adapter/src/js/edge/getusermedia.js":(e,t,r)=>{"use strict";function o(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}r.r(t),r.d(t,{shimGetUserMedia:()=>o})},"./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{shimGetUserMedia:()=>n.shimGetUserMedia,shimGetDisplayMedia:()=>i.shimGetDisplayMedia,shimOnTrack:()=>s,shimPeerConnection:()=>a,shimSenderGetStats:()=>c,shimReceiverGetStats:()=>l,shimRemoveStream:()=>u,shimRTCDataChannel:()=>p,shimAddTransceiver:()=>g,shimGetParameters:()=>d,shimCreateOffer:()=>f,shimCreateAnswer:()=>h});var o=r("./node_modules/webrtc-adapter/src/js/utils.js"),n=r("./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js"),i=r("./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js");function s(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function a(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],o={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=o[t]}));const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,i]=arguments;return o.apply(this,[e||null]).then((e=>{if(t.version<53&&!n)try{e.forEach((e=>{e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,o)=>{e.set(o,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(n,i)}}function c(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function l(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),o.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function u(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){o.deprecated("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function p(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function g(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const o=t.apply(this,arguments);if(r){const{sender:t}=o,r=t.getParameters();(!("encodings"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return o})}function d(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function f(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function h(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}},"./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":(e,t,r)=>{"use strict";function o(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}r.r(t),r.d(t,{shimGetDisplayMedia:()=>o})},"./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{shimGetUserMedia:()=>n});var o=r("./node_modules/webrtc-adapter/src/js/utils.js");function n(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}},"./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{shimLocalStreamsAPI:()=>n,shimRemoteStreamsAPI:()=>i,shimCallbacksAPI:()=>s,shimGetUserMedia:()=>a,shimConstraints:()=>c,shimRTCIceServerUrls:()=>l,shimTrackEventTransceiver:()=>u,shimCreateOfferLegacy:()=>p,shimAudioContext:()=>g});var o=r("./node_modules/webrtc-adapter/src/js/utils.js");function n(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((r=>t.call(this,r,e))),e.getVideoTracks().forEach((r=>t.call(this,r,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];return o&&o.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach((e=>{r.includes(e.track)&&this.removeTrack(e)}))})}}function i(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}))}),t.apply(e,arguments)}}}function s(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,o=t.createAnswer,n=t.setLocalDescription,i=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],n=o.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n};let a=function(e,t,r){const o=n.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=a,a=function(e,t,r){const o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=a,a=function(e,t,r){const o=s.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=a}function a(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(c(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))}function c(e){return e&&void 0!==e.video?Object.assign({},e,{video:o.compactObject(e.video)}):e}function l(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let n=e.iceServers[r];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function u(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function p(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function g(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},"./node_modules/webrtc-adapter/src/js/utils.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{extractVersion:()=>i,wrapPeerConnectionEvent:()=>s,disableLog:()=>a,disableWarnings:()=>c,log:()=>l,deprecated:()=>u,detectBrowser:()=>p,compactObject:()=>d,walkStats:()=>f,filterStats:()=>h});let o=!0,n=!0;function i(e,t,r){const o=e.match(t);return o&&o.length>=r&&parseInt(o[r],10)}function s(e,t,r){if(!e.RTCPeerConnection)return;const o=e.RTCPeerConnection.prototype,n=o.addEventListener;o.addEventListener=function(e,o){if(e!==t)return n.apply(this,arguments);const i=e=>{const t=r(e);t&&(o.handleEvent?o.handleEvent(t):o(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(o,i),n.apply(this,[e,i])};const i=o.removeEventListener;o.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(r))return i.apply(this,arguments);const o=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,o])},Object.defineProperty(o,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function c(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l(){if("object"==typeof window){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){n&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=i(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=i(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=i(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=i(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return g(e)?Object.keys(e).reduce((function(t,r){const o=g(e[r]),n=o?d(e[r]):e[r],i=o&&!Object.keys(n).length;return void 0===n||i?t:Object.assign(t,{[r]:n})}),{}):e}function f(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((o=>{o.endsWith("Id")?f(e,e.get(t[o]),r):o.endsWith("Ids")&&t[o].forEach((t=>{f(e,e.get(t),r)}))})))}function h(e,t,r){const o=r?"outbound-rtp":"inbound-rtp",n=new Map;if(null===t)return n;const i=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((t=>{e.forEach((r=>{r.type===o&&r.trackId===t.id&&f(e,r,n)}))})),n}}},t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";r.r(o),r.d(o,{createSignalMessage:()=>t,P2P_CONNECT_MESSAGE:()=>n,P2P_ICE_CANDIDATE_MESSAGE:()=>i,Signaler:()=>s,PeerConnection:()=>a}),r("./node_modules/webrtc-adapter/src/js/adapter_core.js");var e=r("./node_modules/ably/promises.js");function t(e,t){return{timestamp:(new Date).getTime(),receiver:e,...t}}const n="connect",i="candidate";class s{constructor(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;this.token=t,this.client=new e.Realtime.Promise({token:t,autoConnect:!1,idempotentRestPublishing:!0,queueMessages:!1,disconnectedRetryTimeout:3e3,suspendedRetryTimeout:15e3,echoMessages:!1,log:{level:r}}),this.channel=this.channel.bind(this)}channel(e){return this.client.channels.get(e)}}class a{constructor(e,t,r,o){this.connectionId=o,this.signalerChannel=e,this.ice=t,this.isPolite=r,this.pc=null,this.queuedCandidates=[],this.onNegotiationNeeded=null,this.onIceCandidate=null,this.onSignalerMessage=null,this._flushQueuedCandidates=this._flushQueuedCandidates.bind(this),this._pruneIce=this._pruneIce.bind(this),this.close=this.close.bind(this),this.sendReadyMessage=this.sendReadyMessage.bind(this),this._handleConnectMessage=this._handleConnectMessage.bind(this),this._handleCandidateMessage=this._handleCandidateMessage.bind(this),this.makingOffer=!1,this.ignoreOffer=!1,this._pruneIce();const n={...this.ice};Array.isArray(n.iceServers)||(n.iceServers=[n.iceServers]),this.pc=new RTCPeerConnection(n)}connect(e,r){this.remotePeerId=e,this.makingOffer=!1,this.pc.onnegotiationneeded=async()=>{try{this.makingOffer=!0,await this.pc.setLocalDescription(),this.signalerChannel.publish(n,t(e,{description:this.pc.localDescription}))}catch(e){console.error(e)}finally{this.makingOffer=!1}},this.pc.onicecandidate=r=>{let{candidate:o}=r;o&&this.signalerChannel.publish(i,t(e,{candidate:o}))},this.signalerChannel.subscribe(n,this._handleConnectMessage),this.signalerChannel.subscribe(i,this._handleCandidateMessage),r&&this._handleConnectMessage(r)}close(){this.signalerChannel.unsubscribe(this._handleCandidateMessage),this.signalerChannel.unsubscribe(this._handleConnectMessage),this.signalerChannel=null,this.pc.onnegotiationneeded=null,this.pc.onicecandidate=null,this.pc.ontrack=null,this.queuedCandidates=[],this.ice=null,this.pc.close(),this.pc=null}sendReadyMessage(){this.signalerChannel.publish(n,t(this.remotePeerId,{}))}async _handleConnectMessage(e){const r=e.data,o=e.clientId;if(r.receiver!==this.signalerChannel.connectionManager.connectionDetails.clientId)return;if(void 0!==this.remotePeerId&&o!==this.remotePeerId)return;const i=e.data.description,s="offer"===i.type&&(this.makingOffer||"stable"!==this.pc.signalingState);try{if(this.ignoreOffer=!this.isPolite&&s,this.ignoreOffer)return;if(await this.pc.setRemoteDescription(i),this._flushQueuedCandidates(),"offer"===i.type){await this.pc.setLocalDescription();const r=e.clientId;this.signalerChannel.publish(n,t(r,{description:this.pc.localDescription}))}}catch(e){console.error(e)}}async _handleCandidateMessage(e){const t=e.data,r=e.clientId;if(t.receiver===this.signalerChannel.connectionManager.connectionDetails.clientId)if(void 0===this.remotePeerId||r===this.remotePeerId)try{if(!this.pc.remoteDescription)return void this.queuedCandidates.push(t.candidate);try{await this.pc.addIceCandidate(t.candidate)}catch(e){if(!this.ignoreOffer)throw e}}catch(e){console.error(e)}else console.error(`SenderId does not match Remote peer id for ICE candidate: ${r}`)}_flushQueuedCandidates(){this.queuedCandidates.forEach((e=>{this.pc.addIceCandidate(e)})),this.queuedCandidates.length=0}_pruneIce(){const e=this.ice.iceServers.urls,t=[];let r=!1;e.forEach((e=>{if(e.startsWith("stun")&&!r)return r=!0,void t.push(e);(e.startsWith("turn")&&e.endsWith(":80?transport=tcp")||e.startsWith("turns")&&e.endsWith(":443?transport=tcp"))&&t.push(e)})),this.ice.iceServers.urls=t}}})(),o})()},e.exports=t()},686:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.api.models.v1.user_details.User",null,i),n.exportSymbol("proto.api.models.v1.user_details.UserLocation",null,i),n.exportSymbol("proto.api.models.v1.user_details.UserName",null,i),n.exportSymbol("proto.api.models.v1.user_details.UserPhone",null,i),proto.api.models.v1.user_details.User=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.models.v1.user_details.User,o.Message),n.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.User.displayName="proto.api.models.v1.user_details.User"),proto.api.models.v1.user_details.UserName=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.models.v1.user_details.UserName,o.Message),n.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserName.displayName="proto.api.models.v1.user_details.UserName"),proto.api.models.v1.user_details.UserPhone=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.models.v1.user_details.UserPhone,o.Message),n.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserPhone.displayName="proto.api.models.v1.user_details.UserPhone"),proto.api.models.v1.user_details.UserLocation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.models.v1.user_details.UserLocation,o.Message),n.DEBUG&&!COMPILED&&(proto.api.models.v1.user_details.UserLocation.displayName="proto.api.models.v1.user_details.UserLocation"),o.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.User.prototype.toObject=function(e){return proto.api.models.v1.user_details.User.toObject(e,this)},proto.api.models.v1.user_details.User.toObject=function(e,t){var r,n={id:o.Message.getFieldWithDefault(t,1,""),username:o.Message.getFieldWithDefault(t,2,""),email:o.Message.getFieldWithDefault(t,3,""),name:(r=t.getName())&&proto.api.models.v1.user_details.UserName.toObject(e,r),date:o.Message.getFieldWithDefault(t,5,""),timezone:o.Message.getFieldWithDefault(t,6,""),trackusage:o.Message.getBooleanFieldWithDefault(t,7,!1),phone:(r=t.getPhone())&&proto.api.models.v1.user_details.UserPhone.toObject(e,r),location:(r=t.getLocation())&&proto.api.models.v1.user_details.UserLocation.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.api.models.v1.user_details.User.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.models.v1.user_details.User;return proto.api.models.v1.user_details.User.deserializeBinaryFromReader(r,t)},proto.api.models.v1.user_details.User.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setId(r);break;case 2:r=t.readString(),e.setUsername(r);break;case 3:r=t.readString(),e.setEmail(r);break;case 4:r=new proto.api.models.v1.user_details.UserName,t.readMessage(r,proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader),e.setName(r);break;case 5:r=t.readString(),e.setDate(r);break;case 6:r=t.readString(),e.setTimezone(r);break;case 7:r=t.readBool(),e.setTrackusage(r);break;case 8:r=new proto.api.models.v1.user_details.UserPhone,t.readMessage(r,proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader),e.setPhone(r);break;case 9:r=new proto.api.models.v1.user_details.UserLocation,t.readMessage(r,proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader),e.setLocation(r);break;default:t.skipField()}return e},proto.api.models.v1.user_details.User.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.models.v1.user_details.User.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.User.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getId()).length>0&&t.writeString(1,r),(r=e.getUsername()).length>0&&t.writeString(2,r),(r=e.getEmail()).length>0&&t.writeString(3,r),null!=(r=e.getName())&&t.writeMessage(4,r,proto.api.models.v1.user_details.UserName.serializeBinaryToWriter),(r=e.getDate()).length>0&&t.writeString(5,r),(r=e.getTimezone()).length>0&&t.writeString(6,r),(r=e.getTrackusage())&&t.writeBool(7,r),null!=(r=e.getPhone())&&t.writeMessage(8,r,proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter),null!=(r=e.getLocation())&&t.writeMessage(9,r,proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter)},proto.api.models.v1.user_details.User.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.User.prototype.setId=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.User.prototype.getUsername=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.User.prototype.setUsername=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.models.v1.user_details.User.prototype.getEmail=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.models.v1.user_details.User.prototype.setEmail=function(e){return o.Message.setProto3StringField(this,3,e)},proto.api.models.v1.user_details.User.prototype.getName=function(){return o.Message.getWrapperField(this,proto.api.models.v1.user_details.UserName,4)},proto.api.models.v1.user_details.User.prototype.setName=function(e){return o.Message.setWrapperField(this,4,e)},proto.api.models.v1.user_details.User.prototype.clearName=function(){return this.setName(void 0)},proto.api.models.v1.user_details.User.prototype.hasName=function(){return null!=o.Message.getField(this,4)},proto.api.models.v1.user_details.User.prototype.getDate=function(){return o.Message.getFieldWithDefault(this,5,"")},proto.api.models.v1.user_details.User.prototype.setDate=function(e){return o.Message.setProto3StringField(this,5,e)},proto.api.models.v1.user_details.User.prototype.getTimezone=function(){return o.Message.getFieldWithDefault(this,6,"")},proto.api.models.v1.user_details.User.prototype.setTimezone=function(e){return o.Message.setProto3StringField(this,6,e)},proto.api.models.v1.user_details.User.prototype.getTrackusage=function(){return o.Message.getBooleanFieldWithDefault(this,7,!1)},proto.api.models.v1.user_details.User.prototype.setTrackusage=function(e){return o.Message.setProto3BooleanField(this,7,e)},proto.api.models.v1.user_details.User.prototype.getPhone=function(){return o.Message.getWrapperField(this,proto.api.models.v1.user_details.UserPhone,8)},proto.api.models.v1.user_details.User.prototype.setPhone=function(e){return o.Message.setWrapperField(this,8,e)},proto.api.models.v1.user_details.User.prototype.clearPhone=function(){return this.setPhone(void 0)},proto.api.models.v1.user_details.User.prototype.hasPhone=function(){return null!=o.Message.getField(this,8)},proto.api.models.v1.user_details.User.prototype.getLocation=function(){return o.Message.getWrapperField(this,proto.api.models.v1.user_details.UserLocation,9)},proto.api.models.v1.user_details.User.prototype.setLocation=function(e){return o.Message.setWrapperField(this,9,e)},proto.api.models.v1.user_details.User.prototype.clearLocation=function(){return this.setLocation(void 0)},proto.api.models.v1.user_details.User.prototype.hasLocation=function(){return null!=o.Message.getField(this,9)},o.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserName.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserName.toObject(e,this)},proto.api.models.v1.user_details.UserName.toObject=function(e,t){var r={firstname:o.Message.getFieldWithDefault(t,1,""),lastname:o.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.api.models.v1.user_details.UserName.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.models.v1.user_details.UserName;return proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader(r,t)},proto.api.models.v1.user_details.UserName.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setFirstname(r);break;case 2:r=t.readString(),e.setLastname(r);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserName.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.models.v1.user_details.UserName.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserName.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getFirstname()).length>0&&t.writeString(1,r),(r=e.getLastname()).length>0&&t.writeString(2,r)},proto.api.models.v1.user_details.UserName.prototype.getFirstname=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserName.prototype.setFirstname=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserName.prototype.getLastname=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserName.prototype.setLastname=function(e){return o.Message.setProto3StringField(this,2,e)},o.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserPhone.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserPhone.toObject(e,this)},proto.api.models.v1.user_details.UserPhone.toObject=function(e,t){var r={countrycode:o.Message.getFieldWithDefault(t,1,""),number:o.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.api.models.v1.user_details.UserPhone.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.models.v1.user_details.UserPhone;return proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader(r,t)},proto.api.models.v1.user_details.UserPhone.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCountrycode(r);break;case 2:r=t.readString(),e.setNumber(r);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserPhone.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserPhone.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCountrycode()).length>0&&t.writeString(1,r),(r=e.getNumber()).length>0&&t.writeString(2,r)},proto.api.models.v1.user_details.UserPhone.prototype.getCountrycode=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserPhone.prototype.setCountrycode=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserPhone.prototype.getNumber=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserPhone.prototype.setNumber=function(e){return o.Message.setProto3StringField(this,2,e)},o.Message.GENERATE_TO_OBJECT&&(proto.api.models.v1.user_details.UserLocation.prototype.toObject=function(e){return proto.api.models.v1.user_details.UserLocation.toObject(e,this)},proto.api.models.v1.user_details.UserLocation.toObject=function(e,t){var r={country:o.Message.getFieldWithDefault(t,1,""),suburb:o.Message.getFieldWithDefault(t,2,""),postcode:o.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.api.models.v1.user_details.UserLocation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.models.v1.user_details.UserLocation;return proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader(r,t)},proto.api.models.v1.user_details.UserLocation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setCountry(r);break;case 2:r=t.readString(),e.setSuburb(r);break;case 3:r=t.readString(),e.setPostcode(r);break;default:t.skipField()}return e},proto.api.models.v1.user_details.UserLocation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.models.v1.user_details.UserLocation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getCountry()).length>0&&t.writeString(1,r),(r=e.getSuburb()).length>0&&t.writeString(2,r),(r=e.getPostcode()).length>0&&t.writeString(3,r)},proto.api.models.v1.user_details.UserLocation.prototype.getCountry=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.models.v1.user_details.UserLocation.prototype.setCountry=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.models.v1.user_details.UserLocation.prototype.getSuburb=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.models.v1.user_details.UserLocation.prototype.setSuburb=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.models.v1.user_details.UserLocation.prototype.getPostcode=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.models.v1.user_details.UserLocation.prototype.setPostcode=function(e){return o.Message.setProto3StringField(this,3,e)},n.object.extend(t,proto.api.models.v1.user_details)},566:(e,t,r)=>{var o=r(469),n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();o.exportSymbol("proto.api.models.v2.ManagedDeviceState",null,n),proto.api.models.v2.ManagedDeviceState={CREATED:0,ENROLMENT_STARTED:1,ENROLLED:2},o.object.extend(t,proto.api.models.v2)},79:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.api.requests.school_manager.WindowUpdate",null,i),n.exportSymbol("proto.api.requests.school_manager.WindowUpdate.BackgroundTab",null,i),n.exportSymbol("proto.api.requests.school_manager.WindowUpdateRequest",null,i),proto.api.requests.school_manager.WindowUpdateRequest=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.requests.school_manager.WindowUpdateRequest,o.Message),n.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdateRequest.displayName="proto.api.requests.school_manager.WindowUpdateRequest"),proto.api.requests.school_manager.WindowUpdate=function(e){o.Message.initialize(this,e,0,-1,proto.api.requests.school_manager.WindowUpdate.repeatedFields_,null)},n.inherits(proto.api.requests.school_manager.WindowUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.displayName="proto.api.requests.school_manager.WindowUpdate"),proto.api.requests.school_manager.WindowUpdate.BackgroundTab=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.requests.school_manager.WindowUpdate.BackgroundTab,o.Message),n.DEBUG&&!COMPILED&&(proto.api.requests.school_manager.WindowUpdate.BackgroundTab.displayName="proto.api.requests.school_manager.WindowUpdate.BackgroundTab"),o.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdateRequest.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdateRequest.toObject(e,this)},proto.api.requests.school_manager.WindowUpdateRequest.toObject=function(e,t){var r,n={windowEndpoint:o.Message.getFieldWithDefault(t,1,""),window:(r=t.getWindow())&&proto.api.requests.school_manager.WindowUpdate.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.requests.school_manager.WindowUpdateRequest;return proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinaryFromReader(r,t)},proto.api.requests.school_manager.WindowUpdateRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setWindowEndpoint(r);break;case 2:r=new proto.api.requests.school_manager.WindowUpdate,t.readMessage(r,proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader),e.setWindow(r);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdateRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.requests.school_manager.WindowUpdateRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdateRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getWindowEndpoint()).length>0&&t.writeString(1,r),null!=(r=e.getWindow())&&t.writeMessage(2,r,proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.getWindowEndpoint=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdateRequest.prototype.setWindowEndpoint=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.getWindow=function(){return o.Message.getWrapperField(this,proto.api.requests.school_manager.WindowUpdate,2)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.setWindow=function(e){return o.Message.setWrapperField(this,2,e)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.clearWindow=function(){return this.setWindow(void 0)},proto.api.requests.school_manager.WindowUpdateRequest.prototype.hasWindow=function(){return null!=o.Message.getField(this,2)},proto.api.requests.school_manager.WindowUpdate.repeatedFields_=[10,12],o.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.toObject=function(e,t){var r,n={title:o.Message.getFieldWithDefault(t,1,""),url:o.Message.getFieldWithDefault(t,2,""),favicon:o.Message.getFieldWithDefault(t,3,""),tabId:o.Message.getFieldWithDefault(t,4,""),chromeId:o.Message.getFieldWithDefault(t,5,""),chromeWindowId:o.Message.getFieldWithDefault(t,6,""),action:o.Message.getFieldWithDefault(t,7,""),email:o.Message.getFieldWithDefault(t,8,""),screenshot:o.Message.getFieldWithDefault(t,9,""),backgroundTabsList:o.Message.toObjectList(t.getBackgroundTabsList(),proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject,e),platformType:o.Message.getFieldWithDefault(t,11,""),teacheridsList:null==(r=o.Message.getRepeatedField(t,12))?void 0:r,inFocus:o.Message.getBooleanFieldWithDefault(t,13,!1)};return e&&(n.$jspbMessageInstance=t),n}),proto.api.requests.school_manager.WindowUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.requests.school_manager.WindowUpdate;return proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader(r,t)},proto.api.requests.school_manager.WindowUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setTitle(r);break;case 2:r=t.readString(),e.setUrl(r);break;case 3:r=t.readString(),e.setFavicon(r);break;case 4:r=t.readString(),e.setTabId(r);break;case 5:r=t.readString(),e.setChromeId(r);break;case 6:r=t.readString(),e.setChromeWindowId(r);break;case 7:r=t.readString(),e.setAction(r);break;case 8:r=t.readString(),e.setEmail(r);break;case 9:r=t.readString(),e.setScreenshot(r);break;case 10:r=new proto.api.requests.school_manager.WindowUpdate.BackgroundTab,t.readMessage(r,proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader),e.addBackgroundTabs(r);break;case 11:r=t.readString(),e.setPlatformType(r);break;case 12:r=t.readString(),e.addTeacherids(r);break;case 13:r=t.readBool(),e.setInFocus(r);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getTitle()).length>0&&t.writeString(1,r),(r=e.getUrl()).length>0&&t.writeString(2,r),(r=e.getFavicon()).length>0&&t.writeString(3,r),(r=e.getTabId()).length>0&&t.writeString(4,r),(r=e.getChromeId()).length>0&&t.writeString(5,r),(r=e.getChromeWindowId()).length>0&&t.writeString(6,r),(r=e.getAction()).length>0&&t.writeString(7,r),(r=e.getEmail()).length>0&&t.writeString(8,r),(r=e.getScreenshot()).length>0&&t.writeString(9,r),(r=e.getBackgroundTabsList()).length>0&&t.writeRepeatedMessage(10,r,proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter),(r=e.getPlatformType()).length>0&&t.writeString(11,r),(r=e.getTeacheridsList()).length>0&&t.writeRepeatedString(12,r),(r=e.getInFocus())&&t.writeBool(13,r)},o.Message.GENERATE_TO_OBJECT&&(proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.toObject=function(e){return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject(e,this)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.toObject=function(e,t){var r={favicon:o.Message.getFieldWithDefault(t,1,""),taburl:o.Message.getFieldWithDefault(t,2,""),title:o.Message.getFieldWithDefault(t,3,""),tabId:o.Message.getFieldWithDefault(t,4,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.requests.school_manager.WindowUpdate.BackgroundTab;return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader(r,t)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setFavicon(r);break;case 2:r=t.readString(),e.setTaburl(r);break;case 3:r=t.readString(),e.setTitle(r);break;case 4:r=t.readString(),e.setTabId(r);break;default:t.skipField()}return e},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getFavicon()).length>0&&t.writeString(1,r),(r=e.getTaburl()).length>0&&t.writeString(2,r),(r=e.getTitle()).length>0&&t.writeString(3,r),(r=e.getTabId()).length>0&&t.writeString(4,r)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getFavicon=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setFavicon=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTaburl=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTaburl=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTitle=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTitle=function(e){return o.Message.setProto3StringField(this,3,e)},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.getTabId=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.api.requests.school_manager.WindowUpdate.BackgroundTab.prototype.setTabId=function(e){return o.Message.setProto3StringField(this,4,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getTitle=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setTitle=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getUrl=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setUrl=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getFavicon=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setFavicon=function(e){return o.Message.setProto3StringField(this,3,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getTabId=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setTabId=function(e){return o.Message.setProto3StringField(this,4,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getChromeId=function(){return o.Message.getFieldWithDefault(this,5,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setChromeId=function(e){return o.Message.setProto3StringField(this,5,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getChromeWindowId=function(){return o.Message.getFieldWithDefault(this,6,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setChromeWindowId=function(e){return o.Message.setProto3StringField(this,6,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getAction=function(){return o.Message.getFieldWithDefault(this,7,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setAction=function(e){return o.Message.setProto3StringField(this,7,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getEmail=function(){return o.Message.getFieldWithDefault(this,8,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setEmail=function(e){return o.Message.setProto3StringField(this,8,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getScreenshot=function(){return o.Message.getFieldWithDefault(this,9,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setScreenshot=function(e){return o.Message.setProto3StringField(this,9,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getBackgroundTabsList=function(){return o.Message.getRepeatedWrapperField(this,proto.api.requests.school_manager.WindowUpdate.BackgroundTab,10)},proto.api.requests.school_manager.WindowUpdate.prototype.setBackgroundTabsList=function(e){return o.Message.setRepeatedWrapperField(this,10,e)},proto.api.requests.school_manager.WindowUpdate.prototype.addBackgroundTabs=function(e,t){return o.Message.addToRepeatedWrapperField(this,10,e,proto.api.requests.school_manager.WindowUpdate.BackgroundTab,t)},proto.api.requests.school_manager.WindowUpdate.prototype.clearBackgroundTabsList=function(){return this.setBackgroundTabsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getPlatformType=function(){return o.Message.getFieldWithDefault(this,11,"")},proto.api.requests.school_manager.WindowUpdate.prototype.setPlatformType=function(e){return o.Message.setProto3StringField(this,11,e)},proto.api.requests.school_manager.WindowUpdate.prototype.getTeacheridsList=function(){return o.Message.getRepeatedField(this,12)},proto.api.requests.school_manager.WindowUpdate.prototype.setTeacheridsList=function(e){return o.Message.setField(this,12,e||[])},proto.api.requests.school_manager.WindowUpdate.prototype.addTeacherids=function(e,t){return o.Message.addToRepeatedField(this,12,e,t)},proto.api.requests.school_manager.WindowUpdate.prototype.clearTeacheridsList=function(){return this.setTeacheridsList([])},proto.api.requests.school_manager.WindowUpdate.prototype.getInFocus=function(){return o.Message.getBooleanFieldWithDefault(this,13,!1)},proto.api.requests.school_manager.WindowUpdate.prototype.setInFocus=function(e){return o.Message.setProto3BooleanField(this,13,e)},n.object.extend(t,proto.api.requests.school_manager)},22:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.api.responses.school_manager.Event",null,i),n.exportSymbol("proto.api.responses.school_manager.EventHeader",null,i),n.exportSymbol("proto.api.responses.school_manager.EventMessage",null,i),n.exportSymbol("proto.api.responses.school_manager.EventType",null,i),n.exportSymbol("proto.api.responses.school_manager.IceMessage",null,i),n.exportSymbol("proto.api.responses.school_manager.IceServers",null,i),n.exportSymbol("proto.api.responses.school_manager.InitP2PEvent",null,i),proto.api.responses.school_manager.EventMessage=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.school_manager.EventMessage,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.EventMessage.displayName="proto.api.responses.school_manager.EventMessage"),proto.api.responses.school_manager.Event=function(e){o.Message.initialize(this,e,0,-1,proto.api.responses.school_manager.Event.repeatedFields_,null)},n.inherits(proto.api.responses.school_manager.Event,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.Event.displayName="proto.api.responses.school_manager.Event"),proto.api.responses.school_manager.InitP2PEvent=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.school_manager.InitP2PEvent,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.InitP2PEvent.displayName="proto.api.responses.school_manager.InitP2PEvent"),proto.api.responses.school_manager.IceServers=function(e){o.Message.initialize(this,e,0,-1,proto.api.responses.school_manager.IceServers.repeatedFields_,null)},n.inherits(proto.api.responses.school_manager.IceServers,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.IceServers.displayName="proto.api.responses.school_manager.IceServers"),proto.api.responses.school_manager.IceMessage=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.school_manager.IceMessage,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.IceMessage.displayName="proto.api.responses.school_manager.IceMessage"),proto.api.responses.school_manager.EventHeader=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.school_manager.EventHeader,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.school_manager.EventHeader.displayName="proto.api.responses.school_manager.EventHeader"),o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.EventMessage.prototype.toObject=function(e){return proto.api.responses.school_manager.EventMessage.toObject(e,this)},proto.api.responses.school_manager.EventMessage.toObject=function(e,t){var r={timestamp:o.Message.getFieldWithDefault(t,1,""),event:o.Message.getFieldWithDefault(t,2,0),value:o.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.api.responses.school_manager.EventMessage.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.school_manager.EventMessage;return proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader(r,t)},proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setTimestamp(r);break;case 2:r=t.readEnum(),e.setEvent(r);break;case 3:r=t.readString(),e.setValue(r);break;default:t.skipField()}return e},proto.api.responses.school_manager.EventMessage.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getTimestamp()).length>0&&t.writeString(1,r),0!==(r=e.getEvent())&&t.writeEnum(2,r),(r=e.getValue()).length>0&&t.writeString(3,r)},proto.api.responses.school_manager.EventMessage.prototype.getTimestamp=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.EventMessage.prototype.setTimestamp=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.EventMessage.prototype.getEvent=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.api.responses.school_manager.EventMessage.prototype.setEvent=function(e){return o.Message.setProto3EnumField(this,2,e)},proto.api.responses.school_manager.EventMessage.prototype.getValue=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.responses.school_manager.EventMessage.prototype.setValue=function(e){return o.Message.setProto3StringField(this,3,e)},proto.api.responses.school_manager.Event.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.Event.prototype.toObject=function(e){return proto.api.responses.school_manager.Event.toObject(e,this)},proto.api.responses.school_manager.Event.toObject=function(e,t){var r={messagesList:o.Message.toObjectList(t.getMessagesList(),proto.api.responses.school_manager.EventMessage.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.api.responses.school_manager.Event.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.school_manager.Event;return proto.api.responses.school_manager.Event.deserializeBinaryFromReader(r,t)},proto.api.responses.school_manager.Event.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.api.responses.school_manager.EventMessage;t.readMessage(r,proto.api.responses.school_manager.EventMessage.deserializeBinaryFromReader),e.addMessages(r)}else t.skipField();return e},proto.api.responses.school_manager.Event.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.school_manager.Event.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.Event.serializeBinaryToWriter=function(e,t){var r;(r=e.getMessagesList()).length>0&&t.writeRepeatedMessage(1,r,proto.api.responses.school_manager.EventMessage.serializeBinaryToWriter)},proto.api.responses.school_manager.Event.prototype.getMessagesList=function(){return o.Message.getRepeatedWrapperField(this,proto.api.responses.school_manager.EventMessage,1)},proto.api.responses.school_manager.Event.prototype.setMessagesList=function(e){return o.Message.setRepeatedWrapperField(this,1,e)},proto.api.responses.school_manager.Event.prototype.addMessages=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.api.responses.school_manager.EventMessage,t)},proto.api.responses.school_manager.Event.prototype.clearMessagesList=function(){return this.setMessagesList([])},o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.InitP2PEvent.prototype.toObject=function(e){return proto.api.responses.school_manager.InitP2PEvent.toObject(e,this)},proto.api.responses.school_manager.InitP2PEvent.toObject=function(e,t){var r,n={header:(r=t.getHeader())&&proto.api.responses.school_manager.EventHeader.toObject(e,r),channel:o.Message.getFieldWithDefault(t,2,""),signalhost:o.Message.getFieldWithDefault(t,3,""),signaltoken:o.Message.getFieldWithDefault(t,4,""),signalexpiryepochseconds:o.Message.getFloatingPointFieldWithDefault(t,5,0),remotepeerid:o.Message.getFieldWithDefault(t,6,""),ice:(r=t.getIce())&&proto.api.responses.school_manager.IceMessage.toObject(e,r),peeragentid:o.Message.getFieldWithDefault(t,8,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.InitP2PEvent.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.school_manager.InitP2PEvent;return proto.api.responses.school_manager.InitP2PEvent.deserializeBinaryFromReader(r,t)},proto.api.responses.school_manager.InitP2PEvent.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.api.responses.school_manager.EventHeader;t.readMessage(r,proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader),e.setHeader(r);break;case 2:r=t.readString(),e.setChannel(r);break;case 3:r=t.readString(),e.setSignalhost(r);break;case 4:r=t.readString(),e.setSignaltoken(r);break;case 5:r=t.readFloat(),e.setSignalexpiryepochseconds(r);break;case 6:r=t.readString(),e.setRemotepeerid(r);break;case 7:r=new proto.api.responses.school_manager.IceMessage,t.readMessage(r,proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader),e.setIce(r);break;case 8:r=t.readString(),e.setPeeragentid(r);break;default:t.skipField()}return e},proto.api.responses.school_manager.InitP2PEvent.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.school_manager.InitP2PEvent.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.InitP2PEvent.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getHeader())&&t.writeMessage(1,r,proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter),(r=e.getChannel()).length>0&&t.writeString(2,r),(r=e.getSignalhost()).length>0&&t.writeString(3,r),(r=e.getSignaltoken()).length>0&&t.writeString(4,r),0!==(r=e.getSignalexpiryepochseconds())&&t.writeFloat(5,r),(r=e.getRemotepeerid()).length>0&&t.writeString(6,r),null!=(r=e.getIce())&&t.writeMessage(7,r,proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter),(r=e.getPeeragentid()).length>0&&t.writeString(8,r)},proto.api.responses.school_manager.InitP2PEvent.prototype.getHeader=function(){return o.Message.getWrapperField(this,proto.api.responses.school_manager.EventHeader,1)},proto.api.responses.school_manager.InitP2PEvent.prototype.setHeader=function(e){return o.Message.setWrapperField(this,1,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.clearHeader=function(){return this.setHeader(void 0)},proto.api.responses.school_manager.InitP2PEvent.prototype.hasHeader=function(){return null!=o.Message.getField(this,1)},proto.api.responses.school_manager.InitP2PEvent.prototype.getChannel=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setChannel=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignalhost=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignalhost=function(e){return o.Message.setProto3StringField(this,3,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignaltoken=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignaltoken=function(e){return o.Message.setProto3StringField(this,4,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getSignalexpiryepochseconds=function(){return o.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.api.responses.school_manager.InitP2PEvent.prototype.setSignalexpiryepochseconds=function(e){return o.Message.setProto3FloatField(this,5,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getRemotepeerid=function(){return o.Message.getFieldWithDefault(this,6,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setRemotepeerid=function(e){return o.Message.setProto3StringField(this,6,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.getIce=function(){return o.Message.getWrapperField(this,proto.api.responses.school_manager.IceMessage,7)},proto.api.responses.school_manager.InitP2PEvent.prototype.setIce=function(e){return o.Message.setWrapperField(this,7,e)},proto.api.responses.school_manager.InitP2PEvent.prototype.clearIce=function(){return this.setIce(void 0)},proto.api.responses.school_manager.InitP2PEvent.prototype.hasIce=function(){return null!=o.Message.getField(this,7)},proto.api.responses.school_manager.InitP2PEvent.prototype.getPeeragentid=function(){return o.Message.getFieldWithDefault(this,8,"")},proto.api.responses.school_manager.InitP2PEvent.prototype.setPeeragentid=function(e){return o.Message.setProto3StringField(this,8,e)},proto.api.responses.school_manager.IceServers.repeatedFields_=[3],o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.IceServers.prototype.toObject=function(e){return proto.api.responses.school_manager.IceServers.toObject(e,this)},proto.api.responses.school_manager.IceServers.toObject=function(e,t){var r,n={username:o.Message.getFieldWithDefault(t,1,""),credential:o.Message.getFieldWithDefault(t,2,""),urlsList:null==(r=o.Message.getRepeatedField(t,3))?void 0:r};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.school_manager.IceServers.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.school_manager.IceServers;return proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader(r,t)},proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setUsername(r);break;case 2:r=t.readString(),e.setCredential(r);break;case 3:r=t.readString(),e.addUrls(r);break;default:t.skipField()}return e},proto.api.responses.school_manager.IceServers.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.school_manager.IceServers.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.IceServers.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getUsername()).length>0&&t.writeString(1,r),(r=e.getCredential()).length>0&&t.writeString(2,r),(r=e.getUrlsList()).length>0&&t.writeRepeatedString(3,r)},proto.api.responses.school_manager.IceServers.prototype.getUsername=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.IceServers.prototype.setUsername=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.IceServers.prototype.getCredential=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.responses.school_manager.IceServers.prototype.setCredential=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.responses.school_manager.IceServers.prototype.getUrlsList=function(){return o.Message.getRepeatedField(this,3)},proto.api.responses.school_manager.IceServers.prototype.setUrlsList=function(e){return o.Message.setField(this,3,e||[])},proto.api.responses.school_manager.IceServers.prototype.addUrls=function(e,t){return o.Message.addToRepeatedField(this,3,e,t)},proto.api.responses.school_manager.IceServers.prototype.clearUrlsList=function(){return this.setUrlsList([])},o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.IceMessage.prototype.toObject=function(e){return proto.api.responses.school_manager.IceMessage.toObject(e,this)},proto.api.responses.school_manager.IceMessage.toObject=function(e,t){var r,o={iceservers:(r=t.getIceservers())&&proto.api.responses.school_manager.IceServers.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.api.responses.school_manager.IceMessage.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.school_manager.IceMessage;return proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader(r,t)},proto.api.responses.school_manager.IceMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.api.responses.school_manager.IceServers;t.readMessage(r,proto.api.responses.school_manager.IceServers.deserializeBinaryFromReader),e.setIceservers(r)}else t.skipField();return e},proto.api.responses.school_manager.IceMessage.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.IceMessage.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getIceservers())&&t.writeMessage(1,r,proto.api.responses.school_manager.IceServers.serializeBinaryToWriter)},proto.api.responses.school_manager.IceMessage.prototype.getIceservers=function(){return o.Message.getWrapperField(this,proto.api.responses.school_manager.IceServers,1)},proto.api.responses.school_manager.IceMessage.prototype.setIceservers=function(e){return o.Message.setWrapperField(this,1,e)},proto.api.responses.school_manager.IceMessage.prototype.clearIceservers=function(){return this.setIceservers(void 0)},proto.api.responses.school_manager.IceMessage.prototype.hasIceservers=function(){return null!=o.Message.getField(this,1)},o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.school_manager.EventHeader.prototype.toObject=function(e){return proto.api.responses.school_manager.EventHeader.toObject(e,this)},proto.api.responses.school_manager.EventHeader.toObject=function(e,t){var r={timestampepochms:o.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.api.responses.school_manager.EventHeader.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.school_manager.EventHeader;return proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader(r,t)},proto.api.responses.school_manager.EventHeader.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readString();e.setTimestampepochms(r)}else t.skipField();return e},proto.api.responses.school_manager.EventHeader.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.school_manager.EventHeader.serializeBinaryToWriter=function(e,t){var r;(r=e.getTimestampepochms()).length>0&&t.writeString(1,r)},proto.api.responses.school_manager.EventHeader.prototype.getTimestampepochms=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.responses.school_manager.EventHeader.prototype.setTimestampepochms=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.responses.school_manager.EventType={MESSAGE:0,OPEN_TAB:1,POLICY_UPDATE:2,CLASS_STARTED:3,INIT_P2P:4,CONFIG_UPDATE:5,CLOSE_TAB:6},n.object.extend(t,proto.api.responses.school_manager)},685:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=r(566);n.object.extend(proto,s),n.exportSymbol("proto.api.responses.v2.AutoEnrolResponse",null,i),n.exportSymbol("proto.api.responses.v2.AutoEnrolmentDetails",null,i),proto.api.responses.v2.AutoEnrolResponse=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.v2.AutoEnrolResponse,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.v2.AutoEnrolResponse.displayName="proto.api.responses.v2.AutoEnrolResponse"),proto.api.responses.v2.AutoEnrolmentDetails=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.v2.AutoEnrolmentDetails,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.v2.AutoEnrolmentDetails.displayName="proto.api.responses.v2.AutoEnrolmentDetails"),o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.AutoEnrolResponse.prototype.toObject=function(e){return proto.api.responses.v2.AutoEnrolResponse.toObject(e,this)},proto.api.responses.v2.AutoEnrolResponse.toObject=function(e,t){var r,n={id:o.Message.getFieldWithDefault(t,1,""),authtoken:o.Message.getFieldWithDefault(t,2,""),state:o.Message.getFieldWithDefault(t,3,0),mac:o.Message.getFieldWithDefault(t,4,""),providerauth:(r=t.getProviderauth())&&proto.api.responses.v2.AutoEnrolmentDetails.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.v2.AutoEnrolResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.v2.AutoEnrolResponse;return proto.api.responses.v2.AutoEnrolResponse.deserializeBinaryFromReader(r,t)},proto.api.responses.v2.AutoEnrolResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setId(r);break;case 2:r=t.readString(),e.setAuthtoken(r);break;case 3:r=t.readEnum(),e.setState(r);break;case 4:r=t.readString(),e.setMac(r);break;case 5:r=new proto.api.responses.v2.AutoEnrolmentDetails,t.readMessage(r,proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader),e.setProviderauth(r);break;default:t.skipField()}return e},proto.api.responses.v2.AutoEnrolResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.v2.AutoEnrolResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.AutoEnrolResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getId()).length>0&&t.writeString(1,r),(r=e.getAuthtoken()).length>0&&t.writeString(2,r),0!==(r=e.getState())&&t.writeEnum(3,r),(r=e.getMac()).length>0&&t.writeString(4,r),null!=(r=e.getProviderauth())&&t.writeMessage(5,r,proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter)},proto.api.responses.v2.AutoEnrolResponse.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setId=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getAuthtoken=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setAuthtoken=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getState=function(){return o.Message.getFieldWithDefault(this,3,0)},proto.api.responses.v2.AutoEnrolResponse.prototype.setState=function(e){return o.Message.setProto3EnumField(this,3,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getMac=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.api.responses.v2.AutoEnrolResponse.prototype.setMac=function(e){return o.Message.setProto3StringField(this,4,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.getProviderauth=function(){return o.Message.getWrapperField(this,proto.api.responses.v2.AutoEnrolmentDetails,5)},proto.api.responses.v2.AutoEnrolResponse.prototype.setProviderauth=function(e){return o.Message.setWrapperField(this,5,e)},proto.api.responses.v2.AutoEnrolResponse.prototype.clearProviderauth=function(){return this.setProviderauth(void 0)},proto.api.responses.v2.AutoEnrolResponse.prototype.hasProviderauth=function(){return null!=o.Message.getField(this,5)},o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.AutoEnrolmentDetails.prototype.toObject=function(e){return proto.api.responses.v2.AutoEnrolmentDetails.toObject(e,this)},proto.api.responses.v2.AutoEnrolmentDetails.toObject=function(e,t){var r={username:o.Message.getFieldWithDefault(t,1,""),providertype:o.Message.getFieldWithDefault(t,2,""),applianceid:o.Message.getFieldWithDefault(t,3,""),region:o.Message.getFieldWithDefault(t,4,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.v2.AutoEnrolmentDetails;return proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader(r,t)},proto.api.responses.v2.AutoEnrolmentDetails.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setUsername(r);break;case 2:r=t.readString(),e.setProvidertype(r);break;case 3:r=t.readString(),e.setApplianceid(r);break;case 4:r=t.readString(),e.setRegion(r);break;default:t.skipField()}return e},proto.api.responses.v2.AutoEnrolmentDetails.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.AutoEnrolmentDetails.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getUsername()).length>0&&t.writeString(1,r),(r=e.getProvidertype()).length>0&&t.writeString(2,r),(r=e.getApplianceid()).length>0&&t.writeString(3,r),(r=e.getRegion()).length>0&&t.writeString(4,r)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getUsername=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setUsername=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getProvidertype=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setProvidertype=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getApplianceid=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setApplianceid=function(e){return o.Message.setProto3StringField(this,3,e)},proto.api.responses.v2.AutoEnrolmentDetails.prototype.getRegion=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.api.responses.v2.AutoEnrolmentDetails.prototype.setRegion=function(e){return o.Message.setProto3StringField(this,4,e)},n.object.extend(t,proto.api.responses.v2)},53:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=r(686);n.object.extend(proto,s);var a=r(566);n.object.extend(proto,a),n.exportSymbol("proto.api.responses.v2.EnrollManagedDeviceResponse",null,i),n.exportSymbol("proto.api.responses.v2.EnrollManagedDeviceResponse.User",null,i),proto.api.responses.v2.EnrollManagedDeviceResponse=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.v2.EnrollManagedDeviceResponse,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.v2.EnrollManagedDeviceResponse.displayName="proto.api.responses.v2.EnrollManagedDeviceResponse"),proto.api.responses.v2.EnrollManagedDeviceResponse.User=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.api.responses.v2.EnrollManagedDeviceResponse.User,o.Message),n.DEBUG&&!COMPILED&&(proto.api.responses.v2.EnrollManagedDeviceResponse.User.displayName="proto.api.responses.v2.EnrollManagedDeviceResponse.User"),o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.toObject=function(e){return proto.api.responses.v2.EnrollManagedDeviceResponse.toObject(e,this)},proto.api.responses.v2.EnrollManagedDeviceResponse.toObject=function(e,t){var r,n={authtoken:o.Message.getFieldWithDefault(t,1,""),status:o.Message.getFieldWithDefault(t,2,0),id:o.Message.getFieldWithDefault(t,3,""),user:(r=t.getUser())&&proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject(e,r),region:o.Message.getFieldWithDefault(t,5,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.v2.EnrollManagedDeviceResponse;return proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinaryFromReader(r,t)},proto.api.responses.v2.EnrollManagedDeviceResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setAuthtoken(r);break;case 2:r=t.readEnum(),e.setStatus(r);break;case 3:r=t.readString(),e.setId(r);break;case 4:r=new proto.api.responses.v2.EnrollManagedDeviceResponse.User,t.readMessage(r,proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader),e.setUser(r);break;case 5:r=t.readString(),e.setRegion(r);break;default:t.skipField()}return e},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.v2.EnrollManagedDeviceResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.EnrollManagedDeviceResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getAuthtoken()).length>0&&t.writeString(1,r),0!==(r=e.getStatus())&&t.writeEnum(2,r),(r=e.getId()).length>0&&t.writeString(3,r),null!=(r=e.getUser())&&t.writeMessage(4,r,proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter),(r=e.getRegion()).length>0&&t.writeString(5,r)},o.Message.GENERATE_TO_OBJECT&&(proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.toObject=function(e){return proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject(e,this)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.toObject=function(e,t){var r,n={id:o.Message.getFieldWithDefault(t,1,""),samaccountid:o.Message.getFieldWithDefault(t,2,""),name:(r=t.getName())&&s.UserName.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.api.responses.v2.EnrollManagedDeviceResponse.User;return proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader(r,t)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setId(r);break;case 2:r=t.readString(),e.setSamaccountid(r);break;case 3:r=new s.UserName,t.readMessage(r,s.UserName.deserializeBinaryFromReader),e.setName(r);break;default:t.skipField()}return e},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.api.responses.v2.EnrollManagedDeviceResponse.User.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getId()).length>0&&t.writeString(1,r),(r=e.getSamaccountid()).length>0&&t.writeString(2,r),null!=(r=e.getName())&&t.writeMessage(3,r,s.UserName.serializeBinaryToWriter)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setId=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getSamaccountid=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setSamaccountid=function(e){return o.Message.setProto3StringField(this,2,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.getName=function(){return o.Message.getWrapperField(this,s.UserName,3)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.setName=function(e){return o.Message.setWrapperField(this,3,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.clearName=function(){return this.setName(void 0)},proto.api.responses.v2.EnrollManagedDeviceResponse.User.prototype.hasName=function(){return null!=o.Message.getField(this,3)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getAuthtoken=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setAuthtoken=function(e){return o.Message.setProto3StringField(this,1,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getStatus=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setStatus=function(e){return o.Message.setProto3EnumField(this,2,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getId=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setId=function(e){return o.Message.setProto3StringField(this,3,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getUser=function(){return o.Message.getWrapperField(this,proto.api.responses.v2.EnrollManagedDeviceResponse.User,4)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setUser=function(e){return o.Message.setWrapperField(this,4,e)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.clearUser=function(){return this.setUser(void 0)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.hasUser=function(){return null!=o.Message.getField(this,4)},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.getRegion=function(){return o.Message.getFieldWithDefault(this,5,"")},proto.api.responses.v2.EnrollManagedDeviceResponse.prototype.setRegion=function(e){return o.Message.setProto3StringField(this,5,e)},n.object.extend(t,proto.api.responses.v2)},572:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=r(22);n.object.extend(proto,s),n.exportSymbol("proto.classwize.ClasswizeEvent",null,i),proto.classwize.ClasswizeEvent=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.classwize.ClasswizeEvent,o.Message),n.DEBUG&&!COMPILED&&(proto.classwize.ClasswizeEvent.displayName="proto.classwize.ClasswizeEvent"),o.Message.GENERATE_TO_OBJECT&&(proto.classwize.ClasswizeEvent.prototype.toObject=function(e){return proto.classwize.ClasswizeEvent.toObject(e,this)},proto.classwize.ClasswizeEvent.toObject=function(e,t){var r,o={messages:(r=t.getMessages())&&s.EventMessage.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.classwize.ClasswizeEvent.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.classwize.ClasswizeEvent;return proto.classwize.ClasswizeEvent.deserializeBinaryFromReader(r,t)},proto.classwize.ClasswizeEvent.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new s.EventMessage;t.readMessage(r,s.EventMessage.deserializeBinaryFromReader),e.setMessages(r)}else t.skipField();return e},proto.classwize.ClasswizeEvent.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.classwize.ClasswizeEvent.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.classwize.ClasswizeEvent.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getMessages())&&t.writeMessage(1,r,s.EventMessage.serializeBinaryToWriter)},proto.classwize.ClasswizeEvent.prototype.getMessages=function(){return o.Message.getWrapperField(this,s.EventMessage,1)},proto.classwize.ClasswizeEvent.prototype.setMessages=function(e){return o.Message.setWrapperField(this,1,e)},proto.classwize.ClasswizeEvent.prototype.clearMessages=function(){return this.setMessages(void 0)},proto.classwize.ClasswizeEvent.prototype.hasMessages=function(){return null!=o.Message.getField(this,1)},n.object.extend(t,proto.classwize)},994:(e,t,r)=>{var o=r(469),n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),i=r(462);o.object.extend(proto,i);var s=r(572);o.object.extend(proto,s);var a=r(79);o.object.extend(proto,a)},201:(e,t,r)=>{r(994);var o=r(462),n=r(572),i=r(79),s=r(329).grpc,a=function(){function e(){}return e.serviceName="classwize.ClasswizeApi",e}();function c(e,t){this.serviceHost=e,this.options=t||{}}a.ReceiveEvents={methodName:"ReceiveEvents",service:a,requestStream:!1,responseStream:!0,requestType:o.Empty,responseType:n.ClasswizeEvent},a.UpdateTabs={methodName:"UpdateTabs",service:a,requestStream:!1,responseStream:!1,requestType:i.WindowUpdate,responseType:o.Empty},t.ClasswizeApi=a,c.prototype.receiveEvents=function(e,t){var r={data:[],end:[],status:[]},o=s.invoke(a.ReceiveEvents,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onMessage:function(e){r.data.forEach((function(t){t(e)}))},onEnd:function(e,t,o){r.status.forEach((function(r){r({code:e,details:t,metadata:o})})),r.end.forEach((function(r){r({code:e,details:t,metadata:o})})),r=null}});return{on:function(e,t){return r[e].push(t),this},cancel:function(){r=null,o.close()}}},c.prototype.updateTabs=function(e,t,r){2===arguments.length&&(r=arguments[1]);var o=s.unary(a.UpdateTabs,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(r)if(e.status!==s.Code.OK){var t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,r(t,null)}else r(null,e.message)}});return{cancel:function(){r=null,o.close()}}},t.ClasswizeApiClient=c},887:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=r(729);n.object.extend(proto,s),n.exportSymbol("proto.companion.CompanionRegistrationRequest",null,i),n.exportSymbol("proto.companion.CompanionRegistrationResponse",null,i),n.exportSymbol("proto.companion.ConsoleLog",null,i),n.exportSymbol("proto.companion.EnrolmentDetails",null,i),n.exportSymbol("proto.companion.Functionality",null,i),proto.companion.CompanionRegistrationRequest=function(e){o.Message.initialize(this,e,0,-1,proto.companion.CompanionRegistrationRequest.repeatedFields_,null)},n.inherits(proto.companion.CompanionRegistrationRequest,o.Message),n.DEBUG&&!COMPILED&&(proto.companion.CompanionRegistrationRequest.displayName="proto.companion.CompanionRegistrationRequest"),proto.companion.EnrolmentDetails=function(e){o.Message.initialize(this,e,0,-1,proto.companion.EnrolmentDetails.repeatedFields_,null)},n.inherits(proto.companion.EnrolmentDetails,o.Message),n.DEBUG&&!COMPILED&&(proto.companion.EnrolmentDetails.displayName="proto.companion.EnrolmentDetails"),proto.companion.CompanionRegistrationResponse=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.companion.CompanionRegistrationResponse,o.Message),n.DEBUG&&!COMPILED&&(proto.companion.CompanionRegistrationResponse.displayName="proto.companion.CompanionRegistrationResponse"),proto.companion.ConsoleLog=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.companion.ConsoleLog,o.Message),n.DEBUG&&!COMPILED&&(proto.companion.ConsoleLog.displayName="proto.companion.ConsoleLog"),proto.companion.CompanionRegistrationRequest.repeatedFields_=[3],o.Message.GENERATE_TO_OBJECT&&(proto.companion.CompanionRegistrationRequest.prototype.toObject=function(e){return proto.companion.CompanionRegistrationRequest.toObject(e,this)},proto.companion.CompanionRegistrationRequest.toObject=function(e,t){var r,n={name:o.Message.getFieldWithDefault(t,1,""),version:o.Message.getFieldWithDefault(t,2,""),functionalityList:null==(r=o.Message.getRepeatedField(t,3))?void 0:r};return e&&(n.$jspbMessageInstance=t),n}),proto.companion.CompanionRegistrationRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.companion.CompanionRegistrationRequest;return proto.companion.CompanionRegistrationRequest.deserializeBinaryFromReader(r,t)},proto.companion.CompanionRegistrationRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setName(r);break;case 2:r=t.readString(),e.setVersion(r);break;case 3:for(var o=t.isDelimited()?t.readPackedEnum():[t.readEnum()],n=0;n<o.length;n++)e.addFunctionality(o[n]);break;default:t.skipField()}return e},proto.companion.CompanionRegistrationRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.companion.CompanionRegistrationRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.CompanionRegistrationRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getName()).length>0&&t.writeString(1,r),(r=e.getVersion()).length>0&&t.writeString(2,r),(r=e.getFunctionalityList()).length>0&&t.writePackedEnum(3,r)},proto.companion.CompanionRegistrationRequest.prototype.getName=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.companion.CompanionRegistrationRequest.prototype.setName=function(e){return o.Message.setProto3StringField(this,1,e)},proto.companion.CompanionRegistrationRequest.prototype.getVersion=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.companion.CompanionRegistrationRequest.prototype.setVersion=function(e){return o.Message.setProto3StringField(this,2,e)},proto.companion.CompanionRegistrationRequest.prototype.getFunctionalityList=function(){return o.Message.getRepeatedField(this,3)},proto.companion.CompanionRegistrationRequest.prototype.setFunctionalityList=function(e){return o.Message.setField(this,3,e||[])},proto.companion.CompanionRegistrationRequest.prototype.addFunctionality=function(e,t){return o.Message.addToRepeatedField(this,3,e,t)},proto.companion.CompanionRegistrationRequest.prototype.clearFunctionalityList=function(){return this.setFunctionalityList([])},proto.companion.EnrolmentDetails.repeatedFields_=[5,7,8,10],o.Message.GENERATE_TO_OBJECT&&(proto.companion.EnrolmentDetails.prototype.toObject=function(e){return proto.companion.EnrolmentDetails.toObject(e,this)},proto.companion.EnrolmentDetails.toObject=function(e,t){var r,n={username:o.Message.getFieldWithDefault(t,1,""),applianceid:o.Message.getFieldWithDefault(t,2,""),region:o.Message.getFieldWithDefault(t,3,""),primaryipaddress:o.Message.getFieldWithDefault(t,4,""),enabledfeaturesList:null==(r=o.Message.getRepeatedField(t,5))?void 0:r,devicetoken:o.Message.getFieldWithDefault(t,6,""),featureflagsList:null==(r=o.Message.getRepeatedField(t,7))?void 0:r,ipaddressesList:null==(r=o.Message.getRepeatedField(t,8))?void 0:r,enrolmentinformation:(r=t.getEnrolmentinformation())&&s.EnrolmentInformation.toObject(e,r),macaddressesList:null==(r=o.Message.getRepeatedField(t,10))?void 0:r};return e&&(n.$jspbMessageInstance=t),n}),proto.companion.EnrolmentDetails.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.companion.EnrolmentDetails;return proto.companion.EnrolmentDetails.deserializeBinaryFromReader(r,t)},proto.companion.EnrolmentDetails.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setUsername(r);break;case 2:r=t.readString(),e.setApplianceid(r);break;case 3:r=t.readString(),e.setRegion(r);break;case 4:r=t.readString(),e.setPrimaryipaddress(r);break;case 5:r=t.readString(),e.addEnabledfeatures(r);break;case 6:r=t.readString(),e.setDevicetoken(r);break;case 7:r=t.readString(),e.addFeatureflags(r);break;case 8:r=t.readString(),e.addIpaddresses(r);break;case 9:r=new s.EnrolmentInformation,t.readMessage(r,s.EnrolmentInformation.deserializeBinaryFromReader),e.setEnrolmentinformation(r);break;case 10:r=t.readString(),e.addMacaddresses(r);break;default:t.skipField()}return e},proto.companion.EnrolmentDetails.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.companion.EnrolmentDetails.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.EnrolmentDetails.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getUsername()).length>0&&t.writeString(1,r),(r=e.getApplianceid()).length>0&&t.writeString(2,r),(r=e.getRegion()).length>0&&t.writeString(3,r),(r=e.getPrimaryipaddress()).length>0&&t.writeString(4,r),(r=e.getEnabledfeaturesList()).length>0&&t.writeRepeatedString(5,r),(r=e.getDevicetoken()).length>0&&t.writeString(6,r),(r=e.getFeatureflagsList()).length>0&&t.writeRepeatedString(7,r),(r=e.getIpaddressesList()).length>0&&t.writeRepeatedString(8,r),null!=(r=e.getEnrolmentinformation())&&t.writeMessage(9,r,s.EnrolmentInformation.serializeBinaryToWriter),(r=e.getMacaddressesList()).length>0&&t.writeRepeatedString(10,r)},proto.companion.EnrolmentDetails.prototype.getUsername=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.companion.EnrolmentDetails.prototype.setUsername=function(e){return o.Message.setProto3StringField(this,1,e)},proto.companion.EnrolmentDetails.prototype.getApplianceid=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.companion.EnrolmentDetails.prototype.setApplianceid=function(e){return o.Message.setProto3StringField(this,2,e)},proto.companion.EnrolmentDetails.prototype.getRegion=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.companion.EnrolmentDetails.prototype.setRegion=function(e){return o.Message.setProto3StringField(this,3,e)},proto.companion.EnrolmentDetails.prototype.getPrimaryipaddress=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.companion.EnrolmentDetails.prototype.setPrimaryipaddress=function(e){return o.Message.setProto3StringField(this,4,e)},proto.companion.EnrolmentDetails.prototype.getEnabledfeaturesList=function(){return o.Message.getRepeatedField(this,5)},proto.companion.EnrolmentDetails.prototype.setEnabledfeaturesList=function(e){return o.Message.setField(this,5,e||[])},proto.companion.EnrolmentDetails.prototype.addEnabledfeatures=function(e,t){return o.Message.addToRepeatedField(this,5,e,t)},proto.companion.EnrolmentDetails.prototype.clearEnabledfeaturesList=function(){return this.setEnabledfeaturesList([])},proto.companion.EnrolmentDetails.prototype.getDevicetoken=function(){return o.Message.getFieldWithDefault(this,6,"")},proto.companion.EnrolmentDetails.prototype.setDevicetoken=function(e){return o.Message.setProto3StringField(this,6,e)},proto.companion.EnrolmentDetails.prototype.getFeatureflagsList=function(){return o.Message.getRepeatedField(this,7)},proto.companion.EnrolmentDetails.prototype.setFeatureflagsList=function(e){return o.Message.setField(this,7,e||[])},proto.companion.EnrolmentDetails.prototype.addFeatureflags=function(e,t){return o.Message.addToRepeatedField(this,7,e,t)},proto.companion.EnrolmentDetails.prototype.clearFeatureflagsList=function(){return this.setFeatureflagsList([])},proto.companion.EnrolmentDetails.prototype.getIpaddressesList=function(){return o.Message.getRepeatedField(this,8)},proto.companion.EnrolmentDetails.prototype.setIpaddressesList=function(e){return o.Message.setField(this,8,e||[])},proto.companion.EnrolmentDetails.prototype.addIpaddresses=function(e,t){return o.Message.addToRepeatedField(this,8,e,t)},proto.companion.EnrolmentDetails.prototype.clearIpaddressesList=function(){return this.setIpaddressesList([])},proto.companion.EnrolmentDetails.prototype.getEnrolmentinformation=function(){return o.Message.getWrapperField(this,s.EnrolmentInformation,9)},proto.companion.EnrolmentDetails.prototype.setEnrolmentinformation=function(e){return o.Message.setWrapperField(this,9,e)},proto.companion.EnrolmentDetails.prototype.clearEnrolmentinformation=function(){return this.setEnrolmentinformation(void 0)},proto.companion.EnrolmentDetails.prototype.hasEnrolmentinformation=function(){return null!=o.Message.getField(this,9)},proto.companion.EnrolmentDetails.prototype.getMacaddressesList=function(){return o.Message.getRepeatedField(this,10)},proto.companion.EnrolmentDetails.prototype.setMacaddressesList=function(e){return o.Message.setField(this,10,e||[])},proto.companion.EnrolmentDetails.prototype.addMacaddresses=function(e,t){return o.Message.addToRepeatedField(this,10,e,t)},proto.companion.EnrolmentDetails.prototype.clearMacaddressesList=function(){return this.setMacaddressesList([])},o.Message.GENERATE_TO_OBJECT&&(proto.companion.CompanionRegistrationResponse.prototype.toObject=function(e){return proto.companion.CompanionRegistrationResponse.toObject(e,this)},proto.companion.CompanionRegistrationResponse.toObject=function(e,t){var r,n={version:o.Message.getFieldWithDefault(t,1,""),enrolmentdetails:(r=t.getEnrolmentdetails())&&proto.companion.EnrolmentDetails.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.companion.CompanionRegistrationResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.companion.CompanionRegistrationResponse;return proto.companion.CompanionRegistrationResponse.deserializeBinaryFromReader(r,t)},proto.companion.CompanionRegistrationResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setVersion(r);break;case 2:r=new proto.companion.EnrolmentDetails,t.readMessage(r,proto.companion.EnrolmentDetails.deserializeBinaryFromReader),e.setEnrolmentdetails(r);break;default:t.skipField()}return e},proto.companion.CompanionRegistrationResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.companion.CompanionRegistrationResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.CompanionRegistrationResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getVersion()).length>0&&t.writeString(1,r),null!=(r=e.getEnrolmentdetails())&&t.writeMessage(2,r,proto.companion.EnrolmentDetails.serializeBinaryToWriter)},proto.companion.CompanionRegistrationResponse.prototype.getVersion=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.companion.CompanionRegistrationResponse.prototype.setVersion=function(e){return o.Message.setProto3StringField(this,1,e)},proto.companion.CompanionRegistrationResponse.prototype.getEnrolmentdetails=function(){return o.Message.getWrapperField(this,proto.companion.EnrolmentDetails,2)},proto.companion.CompanionRegistrationResponse.prototype.setEnrolmentdetails=function(e){return o.Message.setWrapperField(this,2,e)},proto.companion.CompanionRegistrationResponse.prototype.clearEnrolmentdetails=function(){return this.setEnrolmentdetails(void 0)},proto.companion.CompanionRegistrationResponse.prototype.hasEnrolmentdetails=function(){return null!=o.Message.getField(this,2)},o.Message.GENERATE_TO_OBJECT&&(proto.companion.ConsoleLog.prototype.toObject=function(e){return proto.companion.ConsoleLog.toObject(e,this)},proto.companion.ConsoleLog.toObject=function(e,t){var r={log:o.Message.getFieldWithDefault(t,1,""),loglevel:o.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.companion.ConsoleLog.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.companion.ConsoleLog;return proto.companion.ConsoleLog.deserializeBinaryFromReader(r,t)},proto.companion.ConsoleLog.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setLog(r);break;case 2:r=t.readString(),e.setLoglevel(r);break;default:t.skipField()}return e},proto.companion.ConsoleLog.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.companion.ConsoleLog.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.companion.ConsoleLog.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getLog()).length>0&&t.writeString(1,r),(r=e.getLoglevel()).length>0&&t.writeString(2,r)},proto.companion.ConsoleLog.prototype.getLog=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.companion.ConsoleLog.prototype.setLog=function(e){return o.Message.setProto3StringField(this,1,e)},proto.companion.ConsoleLog.prototype.getLoglevel=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.companion.ConsoleLog.prototype.setLoglevel=function(e){return o.Message.setProto3StringField(this,2,e)},proto.companion.Functionality={FILTERING:0,REPORTING:1,CLASSWIZE:2},n.object.extend(t,proto.companion)},284:(e,t,r)=>{var o=r(469),n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==n&&n||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),i=r(887);o.object.extend(proto,i);var s=r(462);o.object.extend(proto,s)},215:(e,t,r)=>{r(284);var o=r(887),n=r(462),i=r(329).grpc,s=function(){function e(){}return e.serviceName="companion.CompanionApi",e}();function a(e,t){this.serviceHost=e,this.options=t||{}}s.RegisterCompanion={methodName:"RegisterCompanion",service:s,requestStream:!1,responseStream:!0,requestType:o.CompanionRegistrationRequest,responseType:o.CompanionRegistrationResponse},s.ConsoleLogStream={methodName:"ConsoleLogStream",service:s,requestStream:!0,responseStream:!1,requestType:o.ConsoleLog,responseType:n.Empty},t.CompanionApi=s,a.prototype.registerCompanion=function(e,t){var r={data:[],end:[],status:[]},o=i.invoke(s.RegisterCompanion,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onMessage:function(e){r.data.forEach((function(t){t(e)}))},onEnd:function(e,t,o){r.status.forEach((function(r){r({code:e,details:t,metadata:o})})),r.end.forEach((function(r){r({code:e,details:t,metadata:o})})),r=null}});return{on:function(e,t){return r[e].push(t),this},cancel:function(){r=null,o.close()}}},a.prototype.consoleLogStream=function(e){var t={end:[],status:[]},r=i.client(s.ConsoleLogStream,{host:this.serviceHost,metadata:e,transport:this.options.transport});return r.onEnd((function(e,r,o){t.status.forEach((function(t){t({code:e,details:r,metadata:o})})),t.end.forEach((function(t){t({code:e,details:r,metadata:o})})),t=null})),{on:function(e,r){return t[e].push(r),this},write:function(t){return r.started||r.start(e),r.send(t),this},end:function(){r.finishSend()},cancel:function(){t=null,r.close()}}},t.CompanionApiClient=a},729:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")(),s=r(53);n.object.extend(proto,s);var a=r(685);n.object.extend(proto,a),n.exportSymbol("proto.configuration.EnrolmentInformation",null,i),n.exportSymbol("proto.configuration.EnrolmentInformation.UserInformation",null,i),n.exportSymbol("proto.configuration.Properties",null,i),n.exportSymbol("proto.configuration.PropertiesDNSSetting",null,i),n.exportSymbol("proto.configuration.PropertiesManagedDevice",null,i),proto.configuration.Properties=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.configuration.Properties,o.Message),n.DEBUG&&!COMPILED&&(proto.configuration.Properties.displayName="proto.configuration.Properties"),proto.configuration.EnrolmentInformation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.configuration.EnrolmentInformation,o.Message),n.DEBUG&&!COMPILED&&(proto.configuration.EnrolmentInformation.displayName="proto.configuration.EnrolmentInformation"),proto.configuration.EnrolmentInformation.UserInformation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.configuration.EnrolmentInformation.UserInformation,o.Message),n.DEBUG&&!COMPILED&&(proto.configuration.EnrolmentInformation.UserInformation.displayName="proto.configuration.EnrolmentInformation.UserInformation"),proto.configuration.PropertiesDNSSetting=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.configuration.PropertiesDNSSetting,o.Message),n.DEBUG&&!COMPILED&&(proto.configuration.PropertiesDNSSetting.displayName="proto.configuration.PropertiesDNSSetting"),proto.configuration.PropertiesManagedDevice=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.configuration.PropertiesManagedDevice,o.Message),n.DEBUG&&!COMPILED&&(proto.configuration.PropertiesManagedDevice.displayName="proto.configuration.PropertiesManagedDevice"),o.Message.GENERATE_TO_OBJECT&&(proto.configuration.Properties.prototype.toObject=function(e){return proto.configuration.Properties.toObject(e,this)},proto.configuration.Properties.toObject=function(e,t){var r,n={loggingLevel:o.Message.getFieldWithDefault(t,1,""),deviceToken:o.Message.getFieldWithDefault(t,2,""),deviceId:o.Message.getFieldWithDefault(t,3,""),dnsSettingsMap:(r=t.getDnsSettingsMap())?r.toObject(e,proto.configuration.PropertiesDNSSetting.toObject):[],managedDevice:(r=t.getManagedDevice())&&proto.configuration.PropertiesManagedDevice.toObject(e,r),autoEnrolmentDetails:(r=t.getAutoEnrolmentDetails())&&a.AutoEnrolmentDetails.toObject(e,r),lastSuccessfulEnrollmentUsername:o.Message.getFieldWithDefault(t,13,""),enrolmentInformation:(r=t.getEnrolmentInformation())&&proto.configuration.EnrolmentInformation.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.configuration.Properties.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.configuration.Properties;return proto.configuration.Properties.deserializeBinaryFromReader(r,t)},proto.configuration.Properties.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setLoggingLevel(r);break;case 2:r=t.readString(),e.setDeviceToken(r);break;case 3:r=t.readString(),e.setDeviceId(r);break;case 10:r=e.getDnsSettingsMap(),t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readString,o.BinaryReader.prototype.readMessage,proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader,"",new proto.configuration.PropertiesDNSSetting)}));break;case 11:r=new proto.configuration.PropertiesManagedDevice,t.readMessage(r,proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader),e.setManagedDevice(r);break;case 12:r=new a.AutoEnrolmentDetails,t.readMessage(r,a.AutoEnrolmentDetails.deserializeBinaryFromReader),e.setAutoEnrolmentDetails(r);break;case 13:r=t.readString(),e.setLastSuccessfulEnrollmentUsername(r);break;case 14:r=new proto.configuration.EnrolmentInformation,t.readMessage(r,proto.configuration.EnrolmentInformation.deserializeBinaryFromReader),e.setEnrolmentInformation(r);break;default:t.skipField()}return e},proto.configuration.Properties.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.configuration.Properties.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.Properties.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getLoggingLevel()).length>0&&t.writeString(1,r),(r=e.getDeviceToken()).length>0&&t.writeString(2,r),(r=e.getDeviceId()).length>0&&t.writeString(3,r),(r=e.getDnsSettingsMap(!0))&&r.getLength()>0&&r.serializeBinary(10,t,o.BinaryWriter.prototype.writeString,o.BinaryWriter.prototype.writeMessage,proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter),null!=(r=e.getManagedDevice())&&t.writeMessage(11,r,proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter),null!=(r=e.getAutoEnrolmentDetails())&&t.writeMessage(12,r,a.AutoEnrolmentDetails.serializeBinaryToWriter),(r=e.getLastSuccessfulEnrollmentUsername()).length>0&&t.writeString(13,r),null!=(r=e.getEnrolmentInformation())&&t.writeMessage(14,r,proto.configuration.EnrolmentInformation.serializeBinaryToWriter)},proto.configuration.Properties.prototype.getLoggingLevel=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.configuration.Properties.prototype.setLoggingLevel=function(e){return o.Message.setProto3StringField(this,1,e)},proto.configuration.Properties.prototype.getDeviceToken=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.configuration.Properties.prototype.setDeviceToken=function(e){return o.Message.setProto3StringField(this,2,e)},proto.configuration.Properties.prototype.getDeviceId=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.configuration.Properties.prototype.setDeviceId=function(e){return o.Message.setProto3StringField(this,3,e)},proto.configuration.Properties.prototype.getDnsSettingsMap=function(e){return o.Message.getMapField(this,10,e,proto.configuration.PropertiesDNSSetting)},proto.configuration.Properties.prototype.clearDnsSettingsMap=function(){return this.getDnsSettingsMap().clear(),this},proto.configuration.Properties.prototype.getManagedDevice=function(){return o.Message.getWrapperField(this,proto.configuration.PropertiesManagedDevice,11)},proto.configuration.Properties.prototype.setManagedDevice=function(e){return o.Message.setWrapperField(this,11,e)},proto.configuration.Properties.prototype.clearManagedDevice=function(){return this.setManagedDevice(void 0)},proto.configuration.Properties.prototype.hasManagedDevice=function(){return null!=o.Message.getField(this,11)},proto.configuration.Properties.prototype.getAutoEnrolmentDetails=function(){return o.Message.getWrapperField(this,a.AutoEnrolmentDetails,12)},proto.configuration.Properties.prototype.setAutoEnrolmentDetails=function(e){return o.Message.setWrapperField(this,12,e)},proto.configuration.Properties.prototype.clearAutoEnrolmentDetails=function(){return this.setAutoEnrolmentDetails(void 0)},proto.configuration.Properties.prototype.hasAutoEnrolmentDetails=function(){return null!=o.Message.getField(this,12)},proto.configuration.Properties.prototype.getLastSuccessfulEnrollmentUsername=function(){return o.Message.getFieldWithDefault(this,13,"")},proto.configuration.Properties.prototype.setLastSuccessfulEnrollmentUsername=function(e){return o.Message.setProto3StringField(this,13,e)},proto.configuration.Properties.prototype.getEnrolmentInformation=function(){return o.Message.getWrapperField(this,proto.configuration.EnrolmentInformation,14)},proto.configuration.Properties.prototype.setEnrolmentInformation=function(e){return o.Message.setWrapperField(this,14,e)},proto.configuration.Properties.prototype.clearEnrolmentInformation=function(){return this.setEnrolmentInformation(void 0)},proto.configuration.Properties.prototype.hasEnrolmentInformation=function(){return null!=o.Message.getField(this,14)},o.Message.GENERATE_TO_OBJECT&&(proto.configuration.EnrolmentInformation.prototype.toObject=function(e){return proto.configuration.EnrolmentInformation.toObject(e,this)},proto.configuration.EnrolmentInformation.toObject=function(e,t){var r,n={provider:o.Message.getFieldWithDefault(t,1,""),apiToken:o.Message.getFieldWithDefault(t,2,""),customerId:o.Message.getFieldWithDefault(t,3,""),tenantId:o.Message.getFieldWithDefault(t,4,""),userInformation:(r=t.getUserInformation())&&proto.configuration.EnrolmentInformation.UserInformation.toObject(e,r),apiRegion:o.Message.getFieldWithDefault(t,6,""),metadataMap:(r=t.getMetadataMap())?r.toObject(e,void 0):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.configuration.EnrolmentInformation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.configuration.EnrolmentInformation;return proto.configuration.EnrolmentInformation.deserializeBinaryFromReader(r,t)},proto.configuration.EnrolmentInformation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setProvider(r);break;case 2:r=t.readString(),e.setApiToken(r);break;case 3:r=t.readString(),e.setCustomerId(r);break;case 4:r=t.readString(),e.setTenantId(r);break;case 5:r=new proto.configuration.EnrolmentInformation.UserInformation,t.readMessage(r,proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader),e.setUserInformation(r);break;case 6:r=t.readString(),e.setApiRegion(r);break;case 10:r=e.getMetadataMap(),t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readString,o.BinaryReader.prototype.readString,null,"","")}));break;default:t.skipField()}return e},proto.configuration.EnrolmentInformation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.configuration.EnrolmentInformation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.EnrolmentInformation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getProvider()).length>0&&t.writeString(1,r),(r=e.getApiToken()).length>0&&t.writeString(2,r),(r=e.getCustomerId()).length>0&&t.writeString(3,r),null!=(r=o.Message.getField(e,4))&&t.writeString(4,r),null!=(r=e.getUserInformation())&&t.writeMessage(5,r,proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter),null!=(r=o.Message.getField(e,6))&&t.writeString(6,r),(r=e.getMetadataMap(!0))&&r.getLength()>0&&r.serializeBinary(10,t,o.BinaryWriter.prototype.writeString,o.BinaryWriter.prototype.writeString)},o.Message.GENERATE_TO_OBJECT&&(proto.configuration.EnrolmentInformation.UserInformation.prototype.toObject=function(e){return proto.configuration.EnrolmentInformation.UserInformation.toObject(e,this)},proto.configuration.EnrolmentInformation.UserInformation.toObject=function(e,t){var r={username:o.Message.getFieldWithDefault(t,1,""),usernameRaw:o.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.configuration.EnrolmentInformation.UserInformation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.configuration.EnrolmentInformation.UserInformation;return proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader(r,t)},proto.configuration.EnrolmentInformation.UserInformation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setUsername(r);break;case 2:r=t.readString(),e.setUsernameRaw(r);break;default:t.skipField()}return e},proto.configuration.EnrolmentInformation.UserInformation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.EnrolmentInformation.UserInformation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getUsername()).length>0&&t.writeString(1,r),(r=e.getUsernameRaw()).length>0&&t.writeString(2,r)},proto.configuration.EnrolmentInformation.UserInformation.prototype.getUsername=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.configuration.EnrolmentInformation.UserInformation.prototype.setUsername=function(e){return o.Message.setProto3StringField(this,1,e)},proto.configuration.EnrolmentInformation.UserInformation.prototype.getUsernameRaw=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.configuration.EnrolmentInformation.UserInformation.prototype.setUsernameRaw=function(e){return o.Message.setProto3StringField(this,2,e)},proto.configuration.EnrolmentInformation.prototype.getProvider=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.configuration.EnrolmentInformation.prototype.setProvider=function(e){return o.Message.setProto3StringField(this,1,e)},proto.configuration.EnrolmentInformation.prototype.getApiToken=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.configuration.EnrolmentInformation.prototype.setApiToken=function(e){return o.Message.setProto3StringField(this,2,e)},proto.configuration.EnrolmentInformation.prototype.getCustomerId=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.configuration.EnrolmentInformation.prototype.setCustomerId=function(e){return o.Message.setProto3StringField(this,3,e)},proto.configuration.EnrolmentInformation.prototype.getTenantId=function(){return o.Message.getFieldWithDefault(this,4,"")},proto.configuration.EnrolmentInformation.prototype.setTenantId=function(e){return o.Message.setField(this,4,e)},proto.configuration.EnrolmentInformation.prototype.clearTenantId=function(){return o.Message.setField(this,4,void 0)},proto.configuration.EnrolmentInformation.prototype.hasTenantId=function(){return null!=o.Message.getField(this,4)},proto.configuration.EnrolmentInformation.prototype.getUserInformation=function(){return o.Message.getWrapperField(this,proto.configuration.EnrolmentInformation.UserInformation,5)},proto.configuration.EnrolmentInformation.prototype.setUserInformation=function(e){return o.Message.setWrapperField(this,5,e)},proto.configuration.EnrolmentInformation.prototype.clearUserInformation=function(){return this.setUserInformation(void 0)},proto.configuration.EnrolmentInformation.prototype.hasUserInformation=function(){return null!=o.Message.getField(this,5)},proto.configuration.EnrolmentInformation.prototype.getApiRegion=function(){return o.Message.getFieldWithDefault(this,6,"")},proto.configuration.EnrolmentInformation.prototype.setApiRegion=function(e){return o.Message.setField(this,6,e)},proto.configuration.EnrolmentInformation.prototype.clearApiRegion=function(){return o.Message.setField(this,6,void 0)},proto.configuration.EnrolmentInformation.prototype.hasApiRegion=function(){return null!=o.Message.getField(this,6)},proto.configuration.EnrolmentInformation.prototype.getMetadataMap=function(e){return o.Message.getMapField(this,10,e,null)},proto.configuration.EnrolmentInformation.prototype.clearMetadataMap=function(){return this.getMetadataMap().clear(),this},o.Message.GENERATE_TO_OBJECT&&(proto.configuration.PropertiesDNSSetting.prototype.toObject=function(e){return proto.configuration.PropertiesDNSSetting.toObject(e,this)},proto.configuration.PropertiesDNSSetting.toObject=function(e,t){var r={pb_static:o.Message.getBooleanFieldWithDefault(t,1,!1),primaryNameServer:o.Message.getFieldWithDefault(t,2,""),secondaryNameServer:o.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.configuration.PropertiesDNSSetting.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.configuration.PropertiesDNSSetting;return proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader(r,t)},proto.configuration.PropertiesDNSSetting.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setStatic(r);break;case 2:r=t.readString(),e.setPrimaryNameServer(r);break;case 3:r=t.readString(),e.setSecondaryNameServer(r);break;default:t.skipField()}return e},proto.configuration.PropertiesDNSSetting.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.PropertiesDNSSetting.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getStatic())&&t.writeBool(1,r),(r=e.getPrimaryNameServer()).length>0&&t.writeString(2,r),(r=e.getSecondaryNameServer()).length>0&&t.writeString(3,r)},proto.configuration.PropertiesDNSSetting.prototype.getStatic=function(){return o.Message.getBooleanFieldWithDefault(this,1,!1)},proto.configuration.PropertiesDNSSetting.prototype.setStatic=function(e){return o.Message.setProto3BooleanField(this,1,e)},proto.configuration.PropertiesDNSSetting.prototype.getPrimaryNameServer=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.configuration.PropertiesDNSSetting.prototype.setPrimaryNameServer=function(e){return o.Message.setProto3StringField(this,2,e)},proto.configuration.PropertiesDNSSetting.prototype.getSecondaryNameServer=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.configuration.PropertiesDNSSetting.prototype.setSecondaryNameServer=function(e){return o.Message.setProto3StringField(this,3,e)},o.Message.GENERATE_TO_OBJECT&&(proto.configuration.PropertiesManagedDevice.prototype.toObject=function(e){return proto.configuration.PropertiesManagedDevice.toObject(e,this)},proto.configuration.PropertiesManagedDevice.toObject=function(e,t){var r,n={applianceId:o.Message.getFieldWithDefault(t,1,""),enrollmentDetails:(r=t.getEnrollmentDetails())&&s.EnrollManagedDeviceResponse.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.configuration.PropertiesManagedDevice.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.configuration.PropertiesManagedDevice;return proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader(r,t)},proto.configuration.PropertiesManagedDevice.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setApplianceId(r);break;case 2:r=new s.EnrollManagedDeviceResponse,t.readMessage(r,s.EnrollManagedDeviceResponse.deserializeBinaryFromReader),e.setEnrollmentDetails(r);break;default:t.skipField()}return e},proto.configuration.PropertiesManagedDevice.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.configuration.PropertiesManagedDevice.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getApplianceId()).length>0&&t.writeString(1,r),null!=(r=e.getEnrollmentDetails())&&t.writeMessage(2,r,s.EnrollManagedDeviceResponse.serializeBinaryToWriter)},proto.configuration.PropertiesManagedDevice.prototype.getApplianceId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.configuration.PropertiesManagedDevice.prototype.setApplianceId=function(e){return o.Message.setProto3StringField(this,1,e)},proto.configuration.PropertiesManagedDevice.prototype.getEnrollmentDetails=function(){return o.Message.getWrapperField(this,s.EnrollManagedDeviceResponse,2)},proto.configuration.PropertiesManagedDevice.prototype.setEnrollmentDetails=function(e){return o.Message.setWrapperField(this,2,e)},proto.configuration.PropertiesManagedDevice.prototype.clearEnrollmentDetails=function(){return this.setEnrollmentDetails(void 0)},proto.configuration.PropertiesManagedDevice.prototype.hasEnrollmentDetails=function(){return null!=o.Message.getField(this,2)},n.object.extend(t,proto.configuration)},558:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.reporting.models.Connection",null,i),n.exportSymbol("proto.reporting.models.ConnectionsReport",null,i),proto.reporting.models.ConnectionsReport=function(e){o.Message.initialize(this,e,0,-1,proto.reporting.models.ConnectionsReport.repeatedFields_,null)},n.inherits(proto.reporting.models.ConnectionsReport,o.Message),n.DEBUG&&!COMPILED&&(proto.reporting.models.ConnectionsReport.displayName="proto.reporting.models.ConnectionsReport"),proto.reporting.models.Connection=function(e){o.Message.initialize(this,e,0,-1,proto.reporting.models.Connection.repeatedFields_,null)},n.inherits(proto.reporting.models.Connection,o.Message),n.DEBUG&&!COMPILED&&(proto.reporting.models.Connection.displayName="proto.reporting.models.Connection"),proto.reporting.models.ConnectionsReport.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.reporting.models.ConnectionsReport.prototype.toObject=function(e){return proto.reporting.models.ConnectionsReport.toObject(e,this)},proto.reporting.models.ConnectionsReport.toObject=function(e,t){var r={itemsList:o.Message.toObjectList(t.getItemsList(),proto.reporting.models.Connection.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.reporting.models.ConnectionsReport.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.reporting.models.ConnectionsReport;return proto.reporting.models.ConnectionsReport.deserializeBinaryFromReader(r,t)},proto.reporting.models.ConnectionsReport.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.reporting.models.Connection;t.readMessage(r,proto.reporting.models.Connection.deserializeBinaryFromReader),e.addItems(r)}else t.skipField();return e},proto.reporting.models.ConnectionsReport.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.reporting.models.ConnectionsReport.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.reporting.models.ConnectionsReport.serializeBinaryToWriter=function(e,t){var r;(r=e.getItemsList()).length>0&&t.writeRepeatedMessage(1,r,proto.reporting.models.Connection.serializeBinaryToWriter)},proto.reporting.models.ConnectionsReport.prototype.getItemsList=function(){return o.Message.getRepeatedWrapperField(this,proto.reporting.models.Connection,1)},proto.reporting.models.ConnectionsReport.prototype.setItemsList=function(e){return o.Message.setRepeatedWrapperField(this,1,e)},proto.reporting.models.ConnectionsReport.prototype.addItems=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.reporting.models.Connection,t)},proto.reporting.models.ConnectionsReport.prototype.clearItemsList=function(){return this.setItemsList([])},proto.reporting.models.Connection.repeatedFields_=[8],o.Message.GENERATE_TO_OBJECT&&(proto.reporting.models.Connection.prototype.toObject=function(e){return proto.reporting.models.Connection.toObject(e,this)},proto.reporting.models.Connection.toObject=function(e,t){var r,n={appFilteringDenied:o.Message.getBooleanFieldWithDefault(t,1,!1),categoryid:o.Message.getFieldWithDefault(t,2,""),destip:o.Message.getFieldWithDefault(t,3,""),destport:o.Message.getFieldWithDefault(t,4,0),download:o.Message.getFieldWithDefault(t,5,0),finalConnectionObject:o.Message.getBooleanFieldWithDefault(t,6,!1),httphost:o.Message.getFieldWithDefault(t,7,""),httpRequestUrisList:null==(r=o.Message.getRepeatedField(t,8))?void 0:r,hwaddress:o.Message.getFieldWithDefault(t,9,""),lifetime:o.Message.getFieldWithDefault(t,10,0),noise:o.Message.getBooleanFieldWithDefault(t,11,!1),packets:o.Message.getFieldWithDefault(t,12,0),protocol:o.Message.getFieldWithDefault(t,13,0),sourceip:o.Message.getFieldWithDefault(t,14,""),subcategoryid:o.Message.getFieldWithDefault(t,15,""),tag:o.Message.getFieldWithDefault(t,16,""),time:o.Message.getFieldWithDefault(t,17,0),upload:o.Message.getFieldWithDefault(t,18,0),user:o.Message.getFieldWithDefault(t,19,""),verdictApplicationRule:o.Message.getFieldWithDefault(t,20,""),reportingtype:o.Message.getFieldWithDefault(t,21,""),extensionconnection:o.Message.getBooleanFieldWithDefault(t,22,!1),hostname:o.Message.getFieldWithDefault(t,23,""),id:o.Message.getFieldWithDefault(t,24,""),agent:o.Message.getFieldWithDefault(t,25,""),hardware:o.Message.getFieldWithDefault(t,26,""),companionModeActive:o.Message.getBooleanFieldWithDefault(t,27,!1),teacherid:o.Message.getFieldWithDefault(t,28,""),resourceType:o.Message.getFieldWithDefault(t,29,""),bypassCode:o.Message.getFieldWithDefault(t,30,""),bypassExpiryTime:o.Message.getFieldWithDefault(t,31,0),htmltitle:o.Message.getFieldWithDefault(t,32,""),filterType:o.Message.getFieldWithDefault(t,33,""),agentInsideNetwork:o.Message.getBooleanFieldWithDefault(t,34,!1),debugChromeVerdictIssued:o.Message.getBooleanFieldWithDefault(t,35,!1),debugChromeRequestid:o.Message.getFieldWithDefault(t,36,"")};return e&&(n.$jspbMessageInstance=t),n}),proto.reporting.models.Connection.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.reporting.models.Connection;return proto.reporting.models.Connection.deserializeBinaryFromReader(r,t)},proto.reporting.models.Connection.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setAppFilteringDenied(r);break;case 2:r=t.readString(),e.setCategoryid(r);break;case 3:r=t.readString(),e.setDestip(r);break;case 4:r=t.readInt32(),e.setDestport(r);break;case 5:r=t.readInt64(),e.setDownload(r);break;case 6:r=t.readBool(),e.setFinalConnectionObject(r);break;case 7:r=t.readString(),e.setHttphost(r);break;case 8:r=t.readString(),e.addHttpRequestUris(r);break;case 9:r=t.readString(),e.setHwaddress(r);break;case 10:r=t.readInt32(),e.setLifetime(r);break;case 11:r=t.readBool(),e.setNoise(r);break;case 12:r=t.readInt32(),e.setPackets(r);break;case 13:r=t.readInt32(),e.setProtocol(r);break;case 14:r=t.readString(),e.setSourceip(r);break;case 15:r=t.readString(),e.setSubcategoryid(r);break;case 16:r=t.readString(),e.setTag(r);break;case 17:r=t.readInt32(),e.setTime(r);break;case 18:r=t.readInt64(),e.setUpload(r);break;case 19:r=t.readString(),e.setUser(r);break;case 20:r=t.readString(),e.setVerdictApplicationRule(r);break;case 21:r=t.readString(),e.setReportingtype(r);break;case 22:r=t.readBool(),e.setExtensionconnection(r);break;case 23:r=t.readString(),e.setHostname(r);break;case 24:r=t.readString(),e.setId(r);break;case 25:r=t.readString(),e.setAgent(r);break;case 26:r=t.readString(),e.setHardware(r);break;case 27:r=t.readBool(),e.setCompanionModeActive(r);break;case 28:r=t.readString(),e.setTeacherid(r);break;case 29:r=t.readString(),e.setResourceType(r);break;case 30:r=t.readString(),e.setBypassCode(r);break;case 31:r=t.readInt64(),e.setBypassExpiryTime(r);break;case 32:r=t.readString(),e.setHtmltitle(r);break;case 33:r=t.readString(),e.setFilterType(r);break;case 34:r=t.readBool(),e.setAgentInsideNetwork(r);break;case 35:r=t.readBool(),e.setDebugChromeVerdictIssued(r);break;case 36:r=t.readString(),e.setDebugChromeRequestid(r);break;default:t.skipField()}return e},proto.reporting.models.Connection.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.reporting.models.Connection.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.reporting.models.Connection.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getAppFilteringDenied())&&t.writeBool(1,r),(r=e.getCategoryid()).length>0&&t.writeString(2,r),(r=e.getDestip()).length>0&&t.writeString(3,r),0!==(r=e.getDestport())&&t.writeInt32(4,r),0!==(r=e.getDownload())&&t.writeInt64(5,r),(r=e.getFinalConnectionObject())&&t.writeBool(6,r),(r=e.getHttphost()).length>0&&t.writeString(7,r),(r=e.getHttpRequestUrisList()).length>0&&t.writeRepeatedString(8,r),(r=e.getHwaddress()).length>0&&t.writeString(9,r),0!==(r=e.getLifetime())&&t.writeInt32(10,r),(r=e.getNoise())&&t.writeBool(11,r),0!==(r=e.getPackets())&&t.writeInt32(12,r),0!==(r=e.getProtocol())&&t.writeInt32(13,r),(r=e.getSourceip()).length>0&&t.writeString(14,r),(r=e.getSubcategoryid()).length>0&&t.writeString(15,r),(r=e.getTag()).length>0&&t.writeString(16,r),0!==(r=e.getTime())&&t.writeInt32(17,r),0!==(r=e.getUpload())&&t.writeInt64(18,r),(r=e.getUser()).length>0&&t.writeString(19,r),(r=e.getVerdictApplicationRule()).length>0&&t.writeString(20,r),(r=e.getReportingtype()).length>0&&t.writeString(21,r),(r=e.getExtensionconnection())&&t.writeBool(22,r),(r=e.getHostname()).length>0&&t.writeString(23,r),(r=e.getId()).length>0&&t.writeString(24,r),(r=e.getAgent()).length>0&&t.writeString(25,r),(r=e.getHardware()).length>0&&t.writeString(26,r),(r=e.getCompanionModeActive())&&t.writeBool(27,r),null!=(r=o.Message.getField(e,28))&&t.writeString(28,r),(r=e.getResourceType()).length>0&&t.writeString(29,r),(r=e.getBypassCode()).length>0&&t.writeString(30,r),0!==(r=e.getBypassExpiryTime())&&t.writeInt64(31,r),(r=e.getHtmltitle()).length>0&&t.writeString(32,r),(r=e.getFilterType()).length>0&&t.writeString(33,r),(r=e.getAgentInsideNetwork())&&t.writeBool(34,r),(r=e.getDebugChromeVerdictIssued())&&t.writeBool(35,r),(r=e.getDebugChromeRequestid()).length>0&&t.writeString(36,r)},proto.reporting.models.Connection.prototype.getAppFilteringDenied=function(){return o.Message.getBooleanFieldWithDefault(this,1,!1)},proto.reporting.models.Connection.prototype.setAppFilteringDenied=function(e){return o.Message.setProto3BooleanField(this,1,e)},proto.reporting.models.Connection.prototype.getCategoryid=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.reporting.models.Connection.prototype.setCategoryid=function(e){return o.Message.setProto3StringField(this,2,e)},proto.reporting.models.Connection.prototype.getDestip=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.reporting.models.Connection.prototype.setDestip=function(e){return o.Message.setProto3StringField(this,3,e)},proto.reporting.models.Connection.prototype.getDestport=function(){return o.Message.getFieldWithDefault(this,4,0)},proto.reporting.models.Connection.prototype.setDestport=function(e){return o.Message.setProto3IntField(this,4,e)},proto.reporting.models.Connection.prototype.getDownload=function(){return o.Message.getFieldWithDefault(this,5,0)},proto.reporting.models.Connection.prototype.setDownload=function(e){return o.Message.setProto3IntField(this,5,e)},proto.reporting.models.Connection.prototype.getFinalConnectionObject=function(){return o.Message.getBooleanFieldWithDefault(this,6,!1)},proto.reporting.models.Connection.prototype.setFinalConnectionObject=function(e){return o.Message.setProto3BooleanField(this,6,e)},proto.reporting.models.Connection.prototype.getHttphost=function(){return o.Message.getFieldWithDefault(this,7,"")},proto.reporting.models.Connection.prototype.setHttphost=function(e){return o.Message.setProto3StringField(this,7,e)},proto.reporting.models.Connection.prototype.getHttpRequestUrisList=function(){return o.Message.getRepeatedField(this,8)},proto.reporting.models.Connection.prototype.setHttpRequestUrisList=function(e){return o.Message.setField(this,8,e||[])},proto.reporting.models.Connection.prototype.addHttpRequestUris=function(e,t){return o.Message.addToRepeatedField(this,8,e,t)},proto.reporting.models.Connection.prototype.clearHttpRequestUrisList=function(){return this.setHttpRequestUrisList([])},proto.reporting.models.Connection.prototype.getHwaddress=function(){return o.Message.getFieldWithDefault(this,9,"")},proto.reporting.models.Connection.prototype.setHwaddress=function(e){return o.Message.setProto3StringField(this,9,e)},proto.reporting.models.Connection.prototype.getLifetime=function(){return o.Message.getFieldWithDefault(this,10,0)},proto.reporting.models.Connection.prototype.setLifetime=function(e){return o.Message.setProto3IntField(this,10,e)},proto.reporting.models.Connection.prototype.getNoise=function(){return o.Message.getBooleanFieldWithDefault(this,11,!1)},proto.reporting.models.Connection.prototype.setNoise=function(e){return o.Message.setProto3BooleanField(this,11,e)},proto.reporting.models.Connection.prototype.getPackets=function(){return o.Message.getFieldWithDefault(this,12,0)},proto.reporting.models.Connection.prototype.setPackets=function(e){return o.Message.setProto3IntField(this,12,e)},proto.reporting.models.Connection.prototype.getProtocol=function(){return o.Message.getFieldWithDefault(this,13,0)},proto.reporting.models.Connection.prototype.setProtocol=function(e){return o.Message.setProto3IntField(this,13,e)},proto.reporting.models.Connection.prototype.getSourceip=function(){return o.Message.getFieldWithDefault(this,14,"")},proto.reporting.models.Connection.prototype.setSourceip=function(e){return o.Message.setProto3StringField(this,14,e)},proto.reporting.models.Connection.prototype.getSubcategoryid=function(){return o.Message.getFieldWithDefault(this,15,"")},proto.reporting.models.Connection.prototype.setSubcategoryid=function(e){return o.Message.setProto3StringField(this,15,e)},proto.reporting.models.Connection.prototype.getTag=function(){return o.Message.getFieldWithDefault(this,16,"")},proto.reporting.models.Connection.prototype.setTag=function(e){return o.Message.setProto3StringField(this,16,e)},proto.reporting.models.Connection.prototype.getTime=function(){return o.Message.getFieldWithDefault(this,17,0)},proto.reporting.models.Connection.prototype.setTime=function(e){return o.Message.setProto3IntField(this,17,e)},proto.reporting.models.Connection.prototype.getUpload=function(){return o.Message.getFieldWithDefault(this,18,0)},proto.reporting.models.Connection.prototype.setUpload=function(e){return o.Message.setProto3IntField(this,18,e)},proto.reporting.models.Connection.prototype.getUser=function(){return o.Message.getFieldWithDefault(this,19,"")},proto.reporting.models.Connection.prototype.setUser=function(e){return o.Message.setProto3StringField(this,19,e)},proto.reporting.models.Connection.prototype.getVerdictApplicationRule=function(){return o.Message.getFieldWithDefault(this,20,"")},proto.reporting.models.Connection.prototype.setVerdictApplicationRule=function(e){return o.Message.setProto3StringField(this,20,e)},proto.reporting.models.Connection.prototype.getReportingtype=function(){return o.Message.getFieldWithDefault(this,21,"")},proto.reporting.models.Connection.prototype.setReportingtype=function(e){return o.Message.setProto3StringField(this,21,e)},proto.reporting.models.Connection.prototype.getExtensionconnection=function(){return o.Message.getBooleanFieldWithDefault(this,22,!1)},proto.reporting.models.Connection.prototype.setExtensionconnection=function(e){return o.Message.setProto3BooleanField(this,22,e)},proto.reporting.models.Connection.prototype.getHostname=function(){return o.Message.getFieldWithDefault(this,23,"")},proto.reporting.models.Connection.prototype.setHostname=function(e){return o.Message.setProto3StringField(this,23,e)},proto.reporting.models.Connection.prototype.getId=function(){return o.Message.getFieldWithDefault(this,24,"")},proto.reporting.models.Connection.prototype.setId=function(e){return o.Message.setProto3StringField(this,24,e)},proto.reporting.models.Connection.prototype.getAgent=function(){return o.Message.getFieldWithDefault(this,25,"")},proto.reporting.models.Connection.prototype.setAgent=function(e){return o.Message.setProto3StringField(this,25,e)},proto.reporting.models.Connection.prototype.getHardware=function(){return o.Message.getFieldWithDefault(this,26,"")},proto.reporting.models.Connection.prototype.setHardware=function(e){return o.Message.setProto3StringField(this,26,e)},proto.reporting.models.Connection.prototype.getCompanionModeActive=function(){return o.Message.getBooleanFieldWithDefault(this,27,!1)},proto.reporting.models.Connection.prototype.setCompanionModeActive=function(e){return o.Message.setProto3BooleanField(this,27,e)},proto.reporting.models.Connection.prototype.getTeacherid=function(){return o.Message.getFieldWithDefault(this,28,"")},proto.reporting.models.Connection.prototype.setTeacherid=function(e){return o.Message.setField(this,28,e)},proto.reporting.models.Connection.prototype.clearTeacherid=function(){return o.Message.setField(this,28,void 0)},proto.reporting.models.Connection.prototype.hasTeacherid=function(){return null!=o.Message.getField(this,28)},proto.reporting.models.Connection.prototype.getResourceType=function(){return o.Message.getFieldWithDefault(this,29,"")},proto.reporting.models.Connection.prototype.setResourceType=function(e){return o.Message.setProto3StringField(this,29,e)},proto.reporting.models.Connection.prototype.getBypassCode=function(){return o.Message.getFieldWithDefault(this,30,"")},proto.reporting.models.Connection.prototype.setBypassCode=function(e){return o.Message.setProto3StringField(this,30,e)},proto.reporting.models.Connection.prototype.getBypassExpiryTime=function(){return o.Message.getFieldWithDefault(this,31,0)},proto.reporting.models.Connection.prototype.setBypassExpiryTime=function(e){return o.Message.setProto3IntField(this,31,e)},proto.reporting.models.Connection.prototype.getHtmltitle=function(){return o.Message.getFieldWithDefault(this,32,"")},proto.reporting.models.Connection.prototype.setHtmltitle=function(e){return o.Message.setProto3StringField(this,32,e)},proto.reporting.models.Connection.prototype.getFilterType=function(){return o.Message.getFieldWithDefault(this,33,"")},proto.reporting.models.Connection.prototype.setFilterType=function(e){return o.Message.setProto3StringField(this,33,e)},proto.reporting.models.Connection.prototype.getAgentInsideNetwork=function(){return o.Message.getBooleanFieldWithDefault(this,34,!1)},proto.reporting.models.Connection.prototype.setAgentInsideNetwork=function(e){return o.Message.setProto3BooleanField(this,34,e)},proto.reporting.models.Connection.prototype.getDebugChromeVerdictIssued=function(){return o.Message.getBooleanFieldWithDefault(this,35,!1)},proto.reporting.models.Connection.prototype.setDebugChromeVerdictIssued=function(e){return o.Message.setProto3BooleanField(this,35,e)},proto.reporting.models.Connection.prototype.getDebugChromeRequestid=function(){return o.Message.getFieldWithDefault(this,36,"")},proto.reporting.models.Connection.prototype.setDebugChromeRequestid=function(e){return o.Message.setProto3StringField(this,36,e)},n.object.extend(t,proto.reporting.models)},329:function(e){var t,r;e.exports=(t={418:function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var r,n=this;this.headersMap={},e&&("undefined"!=typeof Headers&&e instanceof Headers?o.getHeaderKeys(e).forEach((function(r){o.getHeaderValues(e,r).forEach((function(e){t.splitValues?n.append(r,o.splitHeaderValue(e)):n.append(r,e)}))})):"object"==typeof(r=e)&&"object"==typeof r.headersMap&&"function"==typeof r.forEach?e.forEach((function(e,t){n.append(e,t)})):"undefined"!=typeof Map&&e instanceof Map?e.forEach((function(e,t){n.append(t,e)})):"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var r=e[t];Array.isArray(r)?r.forEach((function(e){n.append(t,e)})):n.append(t,r)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),r=0;r<t.length;r++){var o=t[r],n=o.indexOf(":");if(n>0){var i=o.substring(0,n).trim(),s=o.substring(n+1).trim();this.append(i,s)}}},e.prototype.delete=function(e,t){var r=o.normalizeName(e);if(void 0===t)delete this.headersMap[r];else{var n=this.headersMap[r];if(n){var i=n.indexOf(t);i>=0&&n.splice(i,1),0===n.length&&delete this.headersMap[r]}}},e.prototype.append=function(e,t){var r=this,n=o.normalizeName(e);Array.isArray(this.headersMap[n])||(this.headersMap[n]=[]),Array.isArray(t)?t.forEach((function(e){r.headersMap[n].push(o.normalizeValue(e))})):this.headersMap[n].push(o.normalizeValue(t))},e.prototype.set=function(e,t){var r=o.normalizeName(e);if(Array.isArray(t)){var n=[];t.forEach((function(e){n.push(o.normalizeValue(e))})),this.headersMap[r]=n}else this.headersMap[r]=[o.normalizeValue(t)]},e.prototype.has=function(e,t){var r=this.headersMap[o.normalizeName(e)];if(!Array.isArray(r))return!1;if(void 0!==t){var n=o.normalizeValue(t);return r.indexOf(n)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[o.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(r){e(r,t.headersMap[r])}),this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach((function(t,r){r.forEach((function(r){e.append(t,r)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.BrowserHeaders=o.BrowserHeaders},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var r=e[Symbol.iterator](),o=r.next();!o.done;)t(o.value[0]),o=r.next()},t.iterateHeadersKeys=function(e,t){for(var r=e.keys(),o=r.next();!o.done;)t(o.value),o=r.next()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2);t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var r=e;if(r instanceof Headers&&r.getAll)return r.getAll(t);var o=r.get(t);return o&&"string"==typeof o?[o]:o},t.getHeaderKeys=function(e){var t=e,r={},n=[];return t.keys?o.iterateHeadersKeys(t,(function(e){r[e]||(r[e]=!0,n.push(e))})):t.forEach?t.forEach((function(e,t){r[t]||(r[t]=!0,n.push(t))})):o.iterateHeaders(t,(function(e){var t=e[0];r[t]||(r[t]=!0,n.push(t))})),n},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}]))},617:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkParser=t.ChunkType=t.encodeASCII=t.decodeASCII=void 0;var o,n=r(65);function i(e){return 9===(t=e)||10===t||13===t||e>=32&&e<=126;var t}function s(e){for(var t=0;t!==e.length;++t)if(!i(e[t]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function a(e){return 128==(128&e.getUint8(0))}function c(e){return e.getUint32(1,!1)}function l(e,t,r){return e.byteLength-t>=r}function u(e,t,r){if(e.slice)return e.slice(t,r);var o=e.length;void 0!==r&&(o=r);for(var n=new Uint8Array(o-t),i=0,s=t;s<o;s++)n[i++]=e[s];return n}t.decodeASCII=s,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),r=0;r!==e.length;++r){var o=e.charCodeAt(r);if(!i(o))throw new Error("Metadata contains invalid ASCII");t[r]=o}return t},function(e){e[e.MESSAGE=1]="MESSAGE",e[e.TRAILERS=2]="TRAILERS"}(o=t.ChunkType||(t.ChunkType={}));var p=function(){function e(){this.buffer=null,this.position=0}return e.prototype.parse=function(e,t){if(0===e.length&&t)return[];var r,i=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else{var p=this.buffer.byteLength-this.position,g=new Uint8Array(p+e.byteLength),d=u(this.buffer,this.position);g.set(d,0);var f=new Uint8Array(e);g.set(f,p),this.buffer=g,this.position=0}for(;;){if(!l(this.buffer,this.position,5))return i;var h=u(this.buffer,this.position,this.position+5),m=new DataView(h.buffer,h.byteOffset,h.byteLength),y=c(m);if(!l(this.buffer,this.position,5+y))return i;var v=u(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,a(m))return i.push({chunkType:o.TRAILERS,trailers:(r=v,new n.Metadata(s(r)))}),i;i.push({chunkType:o.MESSAGE,data:v})}},e}();t.ChunkParser=p},8:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.httpStatusToCode=t.Code=void 0,function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(r=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return r.Internal;case 200:return r.OK;case 400:return r.InvalidArgument;case 401:return r.Unauthenticated;case 403:return r.PermissionDenied;case 404:return r.NotFound;case 409:return r.Aborted;case 412:return r.FailedPrecondition;case 429:return r.ResourceExhausted;case 499:return r.Canceled;case 500:default:return r.Unknown;case 501:return r.Unimplemented;case 503:return r.Unavailable;case 504:return r.DeadlineExceeded}}},934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;var o=r(65),n=r(617),i=r(8),s=r(346),a=r(57),c=r(882);t.client=function(e,t){return new l(e,t)};var l=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new n.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport()}return e.prototype.createTransport=function(){var e=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t)},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&s.debug("onHeaders",e,t),this.closed)this.props.debug&&s.debug("grpc.onHeaders received after request was closed - ignoring");else if(0===t);else{this.responseHeaders=e,this.props.debug&&s.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var r=u(e);this.props.debug&&s.debug("onHeaders.gRPCStatus",r);var o=r&&r>=0?r:i.httpStatusToCode(t);this.props.debug&&s.debug("onHeaders.code",o);var n=e.get("grpc-message")||[];if(this.props.debug&&s.debug("onHeaders.gRPCMessage",n),this.rawOnHeaders(e),o!==i.Code.OK){var a=this.decodeGRPCStatus(n[0]);this.rawOnError(o,a,e)}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&s.debug("grpc.onChunk received after request was closed - ignoring");else{var r=[];try{r=this.parser.parse(e)}catch(e){return this.props.debug&&s.debug("onChunk.parsing error",e,e.message),void this.rawOnError(i.Code.Internal,"parsing error: "+e.message)}r.forEach((function(e){if(e.chunkType===n.ChunkType.MESSAGE){var r=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(r)}else e.chunkType===n.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new o.Metadata(e.trailers),t.props.debug&&s.debug("onChunk.trailers",t.responseTrailers)):(t.responseHeaders=new o.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)))}))}},e.prototype.onTransportEnd=function(){if(this.props.debug&&s.debug("grpc.onEnd"),this.closed)this.props.debug&&s.debug("grpc.onEnd received after request was closed - ignoring");else if(void 0!==this.responseTrailers){var e=u(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get("grpc-message"),r=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,r,this.responseTrailers)}else this.rawOnError(i.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(void 0===this.responseHeaders)return void this.rawOnError(i.Code.Unknown,"Response closed without headers");var o=u(this.responseHeaders),n=this.responseHeaders.get("grpc-message");if(this.props.debug&&s.debug("grpc.headers only response ",o,n),null===o)return void this.rawOnEnd(i.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var a=this.decodeGRPCStatus(n[0]);this.rawOnEnd(o,a,this.responseHeaders)}},e.prototype.decodeGRPCStatus=function(e){if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,r){var o=this;this.props.debug&&s.debug("rawOnEnd",e,t,r),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(n){if(!o.closed)try{n(e,t,r)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnHeaders=function(e){this.props.debug&&s.debug("rawOnHeaders",e),this.completed||this.onHeadersCallbacks.forEach((function(t){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.rawOnError=function(e,t,r){var n=this;void 0===r&&(r=new o.Metadata),this.props.debug&&s.debug("rawOnError",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(o){if(!n.closed)try{o(e,t,r)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&s.debug("rawOnMessage",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach((function(r){if(!t.closed)try{r(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e)},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e)},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e)},e.prototype.start=function(e){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var t=new o.Metadata(e||{});t.set("content-type","application/grpc-web+proto"),t.set("x-grpc-web","1"),this.transport.start(t)},e.prototype.send=function(e){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var t=c.frameRequest(e);this.transport.sendMessage(t)},e.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},e.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&s.debug("request.abort aborting request"),this.transport.cancel()},e}();function u(e){var t=e.get("grpc-status")||[];if(t.length>0)try{var r=t[0];return parseInt(r,10)}catch(e){return null}return null}},346:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0,t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e)}},607:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grpc=void 0;var o,n=r(418),i=r(57),s=r(229),a=r(540),c=r(210),l=r(859),u=r(8),p=r(938),g=r(35),d=r(934);(o=t.grpc||(t.grpc={})).setDefaultTransport=i.setDefaultTransportFactory,o.CrossBrowserHttpTransport=l.CrossBrowserHttpTransport,o.FetchReadableStreamTransport=s.FetchReadableStreamTransport,o.XhrTransport=c.XhrTransport,o.WebsocketTransport=a.WebsocketTransport,o.Code=u.Code,o.Metadata=n.BrowserHeaders,o.client=function(e,t){return d.client(e,t)},o.invoke=p.invoke,o.unary=g.unary},938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=void 0;var o=r(934);t.invoke=function(e,t){if(e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var r=o.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&r.onHeaders(t.onHeaders),t.onMessage&&r.onMessage(t.onMessage),t.onEnd&&r.onEnd(t.onEnd),r.start(t.metadata),r.send(t.request),r.finishSend(),{close:function(){r.close()}}}},65:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var o=r(418);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return o.BrowserHeaders}})},57:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDefaultTransport=t.setDefaultTransportFactory=void 0;var o=r(859),n=function(e){return o.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){n=e},t.makeDefaultTransport=function(e){return n(e)}},229:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.detectFetchSupport=t.FetchReadableStreamTransport=void 0;var n=r(65),i=r(346);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&i.debug("fetchRequest",e),new s(e,t)}(t,e)}};var s=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t}return e.prototype.pump=function(e,t){var r=this;if(this.reader=e,this.cancelled)return this.options.debug&&i.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch((function(e){r.options.debug&&i.debug("Fetch.pump.reader.cancel exception",e)}));this.reader.read().then((function(e){if(e.done)return r.options.onEnd(),t;r.options.onChunk(e.value),r.pump(r.reader,t)})).catch((function(e){r.cancelled?r.options.debug&&i.debug("Fetch.catch - request cancelled"):(r.cancelled=!0,r.options.debug&&i.debug("Fetch.catch",e.message),r.options.onEnd(e))}))},e.prototype.send=function(e){var t=this;fetch(this.options.url,o(o({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:e,signal:this.controller&&this.controller.signal})).then((function(e){if(t.options.debug&&i.debug("Fetch.response",e),t.options.onHeaders(new n.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e)})).catch((function(e){t.cancelled?t.options.debug&&i.debug("Fetch.catch - request cancelled"):(t.cancelled=!0,t.options.debug&&i.debug("Fetch.catch",e.message),t.options.onEnd(e))}))},e.prototype.sendMessage=function(e){this.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e},e.prototype.cancel=function(){var e=this;this.cancelled?this.options.debug&&i.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&i.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&i.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&i.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch((function(t){e.options.debug&&i.debug("Fetch.cancel.reader.cancel exception",t)}))):this.options.debug&&i.debug("Fetch.cancel before reader"))},e}();t.detectFetchSupport=function(){return"undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof Headers}},859:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossBrowserHttpTransport=void 0;var o=r(229),n=r(210);t.CrossBrowserHttpTransport=function(e){if(o.detectFetchSupport()){var t={credentials:e.withCredentials?"include":"same-origin"};return o.FetchReadableStreamTransport(t)}return n.XhrTransport({withCredentials:e.withCredentials})}},210:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.MozChunkedArrayBufferXHR=t.XHR=t.XhrTransport=void 0;var i=r(65),s=r(346),a=r(849);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new l(t,e);if(a.detectXHROverrideMimeTypeSupport())return new c(t,e);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var c=function(){function e(e,t){this.options=e,this.init=t}return e.prototype.onProgressEvent=function(){this.options.debug&&s.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=p(e);this.options.onChunk(t)},e.prototype.onLoadEvent=function(){this.options.debug&&s.debug("XHR.onLoadEvent"),this.options.onEnd()},e.prototype.onStateChange=function(){this.options.debug&&s.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new i.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},e.prototype.sendMessage=function(e){this.xhr.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var r=new XMLHttpRequest;this.xhr=r,r.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach((function(e,t){r.setRequestHeader(e,t.join(", "))})),r.withCredentials=Boolean(this.init.withCredentials),r.addEventListener("readystatechange",this.onStateChange.bind(this)),r.addEventListener("progress",this.onProgressEvent.bind(this)),r.addEventListener("loadend",this.onLoadEvent.bind(this)),r.addEventListener("error",(function(e){t.options.debug&&s.debug("XHR.error",e),t.options.onEnd(e.error)}))},e.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},e.prototype.cancel=function(){this.options.debug&&s.debug("XHR.abort"),this.xhr.abort()},e}();t.XHR=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.configureXhr=function(){this.options.debug&&s.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&s.debug("MozXHR.onProgressEvent: ",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e))},t}(c);function u(e,t){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){var o=e.charCodeAt(t+1);o>=56320&&o<=57343&&(r=65536+(r-55296<<10)+(o-56320))}return r}function p(e){for(var t=new Uint8Array(e.length),r=0,o=0;o<e.length;o++){var n=String.prototype.codePointAt?e.codePointAt(o):u(e,o);t[r++]=255&n}return t}t.MozChunkedArrayBufferXHR=l,t.stringToArrayBuffer=p},849:function(e,t){"use strict";var r;function o(e){var t=function(){if(void 0!==r)return r;if(XMLHttpRequest){r=new XMLHttpRequest;try{r.open("GET","https://localhost")}catch(e){}}return r}();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.detectXHROverrideMimeTypeSupport=t.detectMozXHRSupport=t.xhrSupportsResponseType=void 0,t.xhrSupportsResponseType=o,t.detectMozXHRSupport=function(){return"undefined"!=typeof XMLHttpRequest&&o("moz-chunked-arraybuffer")},t.detectXHROverrideMimeTypeSupport=function(){return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketTransport=void 0;var o,n=r(346),i=r(617);!function(e){e[e.FINISH_SEND=1]="FINISH_SEND"}(o||(o={}));var s=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&n.debug("websocketRequest",e);var t,r=function(e){if("https://"===e.substr(0,8))return"wss://"+e.substr(8);if("http://"===e.substr(0,7))return"ws://"+e.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(e.url),a=[];function c(e){if(e===o.FINISH_SEND)t.send(s);else{var r=e,n=new Int8Array(r.byteLength+1);n.set(new Uint8Array([0])),n.set(r,1),t.send(n)}}return{sendMessage:function(e){t&&t.readyState!==t.CONNECTING?c(e):a.push(e)},finishSend:function(){t&&t.readyState!==t.CONNECTING?c(o.FINISH_SEND):a.push(o.FINISH_SEND)},start:function(o){(t=new WebSocket(r,["grpc-websockets"])).binaryType="arraybuffer",t.onopen=function(){var r;e.debug&&n.debug("websocketRequest.onopen"),t.send((r="",o.forEach((function(e,t){r+=e+": "+t.join(", ")+"\r\n"})),i.encodeASCII(r))),a.forEach((function(e){c(e)}))},t.onclose=function(t){e.debug&&n.debug("websocketRequest.onclose",t),e.onEnd()},t.onerror=function(t){e.debug&&n.debug("websocketRequest.onerror",t)},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data))}},cancel:function(){e.debug&&n.debug("websocket.abort"),t.close()}}}(e)}}},35:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unary=void 0;var o=r(65),n=r(934);t.unary=function(e,t){if(e.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(e.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var r=null,i=null,s=n.client(e,{host:t.host,transport:t.transport,debug:t.debug});return s.onHeaders((function(e){r=e})),s.onMessage((function(e){i=e})),s.onEnd((function(e,n,s){t.onEnd({status:e,statusMessage:n,headers:r||new o.Metadata,message:i,trailers:s})})),s.start(t.metadata),s.send(t.request),s.finishSend(),{close:function(){s.close()}}}},882:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frameRequest=void 0,t.frameRequest=function(e){var t=e.serializeBinary(),r=new ArrayBuffer(t.byteLength+5);return new DataView(r,1,4).setUint32(0,t.length,!1),new Uint8Array(r,5).set(t),new Uint8Array(r)}}},r={},function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{}};return t[o].call(n.exports,n,n.exports,e),n.exports}(607))},82:function(e){e.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,o){void 0===o&&(o=!1);var n=e.getVersionPrecision(t),i=e.getVersionPrecision(r),s=Math.max(n,i),a=0,c=e.map([t,r],(function(t){var r=s-e.getVersionPrecision(t),o=t+new Array(r+1).join(".0");return e.map(o.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(o&&(a=s-Math.min(n,i)),s-=1;s>=a;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===a)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}},e.map=function(e,t){var r,o=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)o.push(t(e[r]));return o},e.find=function(e,t){var r,o;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,o=e.length;r<o;r+=1){var n=e[r];if(t(n,r))return n}},e.assign=function(e){for(var t,r,o=e,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var a=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){o[t]=e[t]}))};for(t=0,r=i.length;t<r;t+=1)a();return e},e.getBrowserAlias=function(e){return o.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return o.BROWSER_MAP[e]||""},e}();t.default=n,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=(o=r(91))&&o.__esModule?o:{default:o},i=r(18);function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(){}var t,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],null&&s(t.prototype,null),r&&s(t,r),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o=c(r(92)),n=c(r(93)),i=c(r(94)),s=c(r(95)),a=c(r(17));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},o=0,n={},i=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(n[t]=s,i+=1):"object"==typeof s&&(r[t]=s,o+=1)})),o>0){var s=Object.keys(r),c=a.default.find(s,(function(e){return t.isOS(e)}));if(c){var l=this.satisfies(r[c]);if(void 0!==l)return l}var u=a.default.find(s,(function(e){return t.isPlatform(e)}));if(u){var p=this.satisfies(r[u]);if(void 0!==p)return p}}if(i>0){var g=Object.keys(n),d=a.default.find(g,(function(e){return t.isBrowser(e,!0)}));if(void 0!==d)return this.compareVersion(n[d])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),o=e.toLowerCase(),n=a.default.getBrowserTypeByAlias(o);return t&&n&&(o=n.toLowerCase()),o===r},t.compareVersion=function(e){var t=[0],r=e,o=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(o=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(o=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(n,r,o))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=(o=r(17))&&o.__esModule?o:{default:o},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=n.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=n.default.getFirstMatch(i,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=n.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=n.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=(o=r(17))&&o.__esModule?o:{default:o},i=r(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=n.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},r=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=n.default.getMacOSVersionName(t),o={name:i.OS_MAP.MacOS,version:t};return r&&(o.versionName=r),o}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=n.default.getAndroidVersionName(t),o={name:i.OS_MAP.Android,version:t};return r&&(o.versionName=r),o}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:i.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||n.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=(o=r(17))&&o.__esModule?o:{default:o},i=r(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var o,n=(o=r(17))&&o.__esModule?o:{default:o},i=r(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},r=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},r=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},r=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},r=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=s,e.exports=t.default}})},469:function(__unused_webpack_module,exports,__webpack_require__){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var o=e.length,n=0;n<o;n++){var i=e[n];if(t.call(r,i,n,e))return{i:n,v:i}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==__webpack_require__.g&&null!=__webpack_require__.g?__webpack_require__.g:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,r,o){if(t){for(r=$jscomp.global,e=e.split("."),o=0;o<e.length-1;o++){var n=e[o];n in r||(r[n]={}),r=r[n]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var o=e.length;0<o&&0<t;)if(r[--t]!=e[--o])return!1;return 0>=o}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var o=r.length,n=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var i=0;i<n&&t<o;)if(r[t++]!=e[i++])return!1;return i>=n}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||void 0===t?r=r[o]&&r[o]!==Object.prototype[o]?r[o]:r[o]={}:r[o]=t},goog.define=function(e,t){if(!COMPILED){var r=goog.global.CLOSURE_UNCOMPILED_DEFINES,o=goog.global.CLOSURE_DEFINES;r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)?t=r[e]:o&&void 0===o.nodeType&&Object.prototype.hasOwnProperty.call(o,e)&&(t=o[e])}return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&"function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&null!=goog.getObjectByName(e)},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var r=0;r<e.length;r++)if(null==(t=t[e[r]]))return null;return t},goog.globalize=function(e,t){for(var r in t=t||goog.global,e)t[r]=e[r]},goog.addDependency=function(e,t,r,o){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,r,o)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var r=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var o=goog.moduleLoaderState_.moduleName;if("string"!=typeof o||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[o]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,r){var o=goog.global.$jscomp;o||(goog.global.$jscomp=o={});var n=o.transpile;if(!n){var i=goog.basePath+goog.TRANSPILER,s=goog.loadFileSync_(i);if(s){if(function(){(0,eval)(s+"\n//# sourceURL="+i)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,n=(o=goog.global.$jscomp).transpile}}return n||(n=o.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),n(e,t,r)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.cloneObject(e[r]);return t}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,o),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.head.appendChild(r),t.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var r=function(e){return goog.cssNameMapping_[e]||e},o=function(e){e=e.split("-");for(var t=[],o=0;o<e.length;o++)t.push(r(e[o]));return t.join("-")};return o=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:o:function(e){return e},e=t?e+"-"+o(t):o(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t,r){return r&&r.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,r){return null!=t&&r in t?t[r]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,o){for(var n=Array(arguments.length-2),i=2;i<arguments.length;i++)n[i-2]=arguments[i];return t.prototype[r].apply(e,n)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var r=t.constructor,o=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=o&&(o instanceof Function?o(r):goog.defineClass.applyProperties_(r,o)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var r=!goog.defineClass.isUnsealable_(t),o=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===o&&r&&Object.seal instanceof Function&&Object.seal(t),t};return o},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(null!=goog.global.CLOSURE_BASE_PATH&&"string"==typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(t=(e=t?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var r=e[t].src,o=r.lastIndexOf("?");if(o=-1==o?r.length:o,"base.js"==r.substr(o-7,7)){goog.basePath=r.substr(0,o-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,r){e?d[t]=!0:r()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",(function(){return b("[1,].length==1")})),a("es6",(function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')})),a("es7",(function(){return b("2 ** 2 == 4")})),a("es8",(function(){return b("async () => 1, true")})),a("es9",(function(){return b("({...rest} = {}), true")})),a("es_next",(function(){return!1})),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var r=this.createRequiresTranspilation_();this.requiresTranspilation_=r.map,this.transpilationTarget_=this.transpilationTarget_||r.target}if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function r(){o&&(goog.global.setTimeout(o,0),o=null)}var o=t;if(e.length){t=[];for(var n=0;n<e.length;n++){var i=this.getPathFromDeps_(e[n]);if(!i)throw Error("Unregonized namespace: "+e[n]);t.push(this.dependencies_[i])}i=goog.require;var s=0;for(n=0;n<e.length;n++)i(e[n]),t[n].onLoad((function(){++s==e.length&&r()}))}else r()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var t=this,r=[],o=function(e){var n=t.getPathFromDeps_(e);if(!n)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[n]){for(t.written_[n]=!0,e=t.dependencies_[n],n=0;n<e.requires.length;n++)goog.isProvided_(e.requires[n])||o(e.requires[n]);r.push(e)}};o(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(r),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var r=!1,o=e.depsToLoad_.shift(),n=!1;e.loading_(o);var i={pause:function(){if(r)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){r?e.resume_():t=!1},loaded:function(){if(n)throw Error("Double call to loaded.");n=!0,e.loaded_(o)},pending:function(){for(var t=[],r=0;r<e.loadingDeps_.length;r++)t.push(e.loadingDeps_[r]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,r){r&&(goog.loadedModules_[r]={exports:t,type:goog.ModuleType.ES6,moduleId:r||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(r)throw Error("Cannot register with defer after the call to load.");e.defer_(o,t)},areDepsLoaded:function(){return e.areDepsLoaded_(o.requires)}};try{o.load(i)}finally{r=!0}}();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var r=this.getPathFromDeps_(e[t]);if(!r||!(r in this.deferredCallbacks_)&&!goog.isProvided_(e[t]))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,r){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,r,o,n){this.path=e,this.relativePath=t,this.provides=r,this.requires=o,this.loadFlags=n,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&0<=(t=(e=e.substring(t+3)).indexOf("/"))&&(e=e.substring(t+1)),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var r=goog.Dependency.callbackMap_[e],o=[],n=1;n<arguments.length;n++)o.push(arguments[n]);r.apply(void 0,o)},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void e.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var r=goog.Dependency.registerCallback_((function(t){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(r),e.loaded())})),o=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";o='<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+r+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+o+"><\/script>",t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(o):o)}else{var n=t.createElement("script");n.defer=goog.Dependency.defer_,n.async=!1,n.type="text/javascript",(o=goog.getScriptNonce())&&n.setAttribute("nonce",o),goog.DebugLoader_.IS_OLD_IE_?(e.pause(),n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(e.loaded(),e.resume())}):n.onload=function(){n.onload=null,e.loaded()},n.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path,t.head.appendChild(n)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,r,o,n){goog.Dependency.call(this,e,t,r,o,n)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document,r=this;if(goog.isDocumentLoading_()){var o=function(e,r){e=r?'<script type="module" crossorigin>'+r+"<\/script>":'<script type="module" crossorigin src="'+e+'"><\/script>',t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(e):e)};goog.Dependency.defer_=!0}else o=function(e,r){var o=t.createElement("script");o.defer=!0,o.async=!1,o.type="module",o.setAttribute("crossorigin",!0);var n=goog.getScriptNonce();n&&o.setAttribute("nonce",n),r?o.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(r):r:o.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(e):e,t.head.appendChild(o)};var n=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(n),e.setModuleState(goog.ModuleType.ES6)}));o(void 0,'goog.Dependency.callback_("'+n+'")'),o(this.path,void 0);var i=goog.Dependency.registerCallback_((function(t){goog.Dependency.unregisterCallback_(i),e.registerEs6ModuleExports(r.path,t,goog.moduleLoaderState_.moduleName)}));o(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+i+'", m)');var s=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(s),e.clearModuleState(),e.loaded()}));o(void 0,'goog.Dependency.callback_("'+s+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,r,o,n){goog.Dependency.call(this,e,t,r,o,n),this.contents_=null,this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){o.contents_=goog.loadFileSync_(o.path),o.contents_&&(o.contents_=o.transform(o.contents_),o.contents_&&(o.contents_+="\n//# sourceURL="+o.path))}function r(){if(o.lazyFetch_&&t(),o.contents_){n&&e.setModuleState(goog.ModuleType.ES6);try{var r=o.contents_;if(o.contents_=null,goog.globalEval(r),n)var i=goog.moduleLoaderState_.moduleName}finally{n&&e.clearModuleState()}n&&goog.global.$jscomp.require.ensure([o.getPathName()],(function(){e.registerEs6ModuleExports(o.path,goog.global.$jscomp.require(o.getPathName()),i)})),e.loaded()}}var o=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var n=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var i=1<e.pending().length,s=i&&goog.DebugLoader_.IS_OLD_IE_;if(i=goog.Dependency.defer_&&(i||goog.isDocumentLoading_()),s||i)e.defer((function(){r()}));else{var a=goog.global.document;if(s=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,n&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!s){goog.Dependency.defer_=!0,e.pause();var c=a.onreadystatechange;a.onreadystatechange=function(){"interactive"==a.readyState&&(a.onreadystatechange=c,r(),e.resume()),goog.isFunction(c)&&c.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(t),r()})),o='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>";e.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(o):o)}():r()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,r,o,n,i){goog.TransformedDependency.call(this,e,t,r,o,n),this.transpiler=i},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,r,o,n){goog.TransformedDependency.call(this,e,t,r,o,n)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,r,o,n,i,s){goog.TransformedDependency.call(this,e,t,r,o,n),this.needsTranspile_=i,this.transpiler_=s},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,r,o){t=t||[],e=e.replace(/\\/g,"/");var n=goog.normalizePath_(goog.basePath+e);for(o&&"boolean"!=typeof o||(o=o?{module:goog.ModuleType.GOOG}:{}),r=this.factory_.createDependency(n,e,t,r,o,goog.transpiler_.needsTranspile(o.lang||"es3",o.module)),this.dependencies_[n]=r,r=0;r<t.length;r++)this.idToPath_[t[r]]=n;this.idToPath_[e]=n},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,r,o,n,i){return n.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,r,o,n,i,this.transpiler):i?new goog.TranspiledDependency(e,t,r,o,n,this.transpiler):n.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,r,o,n):new goog.Es6ModuleDependency(e,t,r,o,n):new goog.Dependency(e,t,r,o,n)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,r=goog.global.trustedTypes||goog.global.TrustedTypes;if(!r||!r.createPolicy)return t;try{t=r.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,r){for(var o in e)t.call(r,e[o],o,e)},goog.object.filter=function(e,t,r){var o,n={};for(o in e)t.call(r,e[o],o,e)&&(n[o]=e[o]);return n},goog.object.map=function(e,t,r){var o,n={};for(o in e)n[o]=t.call(r,e[o],o,e);return n},goog.object.some=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return!0;return!1},goog.object.every=function(e,t,r){for(var o in e)if(!t.call(r,e[o],o,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],o=0;for(t in e)r[o++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],o=0;for(t in e)r[o++]=t;return r},goog.object.getValueByKeys=function(e,t){var r=goog.isArrayLike(t),o=r?t:arguments;for(r=r?0:1;r<o.length;r++){if(null==e)return;e=e[o[r]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return o},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(var o in t)if(!(o in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.object.unsafeClone(e[r]);return t}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,o,n=1;n<arguments.length;n++){for(r in o=arguments[n])e[r]=o[r];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)r=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},o=0;o<t;o+=2)r[arguments[o]]=arguments[o+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},o=0;o<t;o++)r[arguments[o]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,r){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var o={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||r);){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++)o[n[i]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(o)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(e,t,r,o){var n="Assertion failed";if(r){n+=": "+r;var i=o}else e&&(n+=": "+e,i=t);throw Error(""+n,i||[])},jspb.asserts.assert=function(e,t,r){for(var o=[],n=2;n<arguments.length;++n)o[n-2]=arguments[n];return e||jspb.asserts.doAssertFailure("",null,t,o),e},jspb.asserts.assertString=function(e,t,r){for(var o=[],n=2;n<arguments.length;++n)o[n-2]=arguments[n];return"string"!=typeof e&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(e),e],t,o),e},jspb.asserts.assertArray=function(e,t,r){for(var o=[],n=2;n<arguments.length;++n)o[n-2]=arguments[n];return Array.isArray(e)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(e),e],t,o),e},jspb.asserts.fail=function(e,t){for(var r=[],o=1;o<arguments.length;++o)r[o-1]=arguments[o];throw Error("Failure"+(e?": "+e:""),r)},jspb.asserts.assertInstanceof=function(e,t,r,o){for(var n=[],i=3;i<arguments.length;++i)n[i-3]=arguments[i];return e instanceof t||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(t),jspb.asserts.getType(e)],r,n),e},jspb.asserts.getType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var r="",o=(e=e.split("%s")).length-1,n=0;n<o;n++)r+=e[n]+(n<t.length?t[n]:"%s");return r+e[o]},goog.asserts.doAssertFailure_=function(e,t,r,o){var n="Assertion failed";if(r){n+=": "+r;var i=o}else e&&(n+=": "+e,i=t);e=new goog.asserts.AssertionError(""+n,i||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,r);for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){if(0>(r=null==r?e.length-1:r)&&(r=Math.max(0,e.length+r)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,r);for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var o=e.length,n="string"==typeof e?e.split(""):e,i=0;i<o;i++)i in n&&t.call(r,n[i],i,e)},goog.array.forEachRight=function(e,t,r){var o=e.length,n="string"==typeof e?e.split(""):e;for(--o;0<=o;--o)o in n&&t.call(r,n[o],o,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=[],i=0,s="string"==typeof e?e.split(""):e,a=0;a<o;a++)if(a in s){var c=s[a];t.call(r,c,a,e)&&(n[i++]=c)}return n},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=Array(o),i="string"==typeof e?e.split(""):e,s=0;s<o;s++)s in i&&(n[s]=t.call(r,i[s],s,e));return n},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),o&&(t=goog.bind(t,o)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,o){var n=r;return goog.array.forEach(e,(function(r,i){n=t.call(o,n,r,i,e)})),n},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),o&&(t=goog.bind(t,o)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,o){var n=r;return goog.array.forEachRight(e,(function(r,i){n=t.call(o,n,r,i,e)})),n},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var o=e.length,n="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in n&&t.call(r,n[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var o=e.length,n="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in n&&!t.call(r,n[i],i,e))return!1;return!0},goog.array.count=function(e,t,r){var o=0;return goog.array.forEach(e,(function(e,n,i){t.call(r,e,n,i)&&++o}),r),o},goog.array.find=function(e,t,r){return 0>(t=goog.array.findIndex(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,r){for(var o=e.length,n="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in n&&t.call(r,n[i],i,e))return i;return-1},goog.array.findRight=function(e,t,r){return 0>(t=goog.array.findIndexRight(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,r){var o=e.length,n="string"==typeof e?e.split(""):e;for(--o;0<=o;o--)if(o in n&&t.call(r,n[o],o,e))return o;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!Array.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var o;2==arguments.length||0>(o=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,o)},goog.array.remove=function(e,t){var r;return(r=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),r},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){return 0<=(t=goog.array.findIndex(e,t,r))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,r){var o=0;return goog.array.forEachRight(e,(function(n,i){t.call(r,n,i,e)&&goog.array.removeAt(e,i)&&o++})),o},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),o=0;o<t;o++)r[o]=e[o];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(goog.isArrayLike(o)){var n=e.length||0,i=o.length||0;e.length=n+i;for(var s=0;s<i;s++)e[n+s]=o[s]}else e.push(o)}},goog.array.splice=function(e,t,r,o){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){t=t||e;var o=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||o,o={};for(var n=0,i=0;i<e.length;){var s=e[i++],a=r(s);Object.prototype.hasOwnProperty.call(o,a)||(o[a]=!0,t[n++]=s)}t.length=n},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,o,n){for(var i,s=0,a=e.length;s<a;){var c=s+(a-s>>>1),l=r?t.call(n,e[c],c,e):t(o,e[c]);0<l?s=c+1:(a=c,i=!l)}return i?s:-s-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]={index:o,value:e[o]};var n=t||goog.array.defaultCompare;for(goog.array.sort(r,(function(e,t){return n(e.value,t.value)||e.index-t.index})),o=0;o<e.length;o++)e[o]=r[o].value},goog.array.sortByKey=function(e,t,r){var o=r||goog.array.defaultCompare;goog.array.sort(e,(function(e,r){return o(t(e),t(r))}))},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,(function(e){return e[t]}),r)},goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var o=1;o<e.length;o++){var n=t(e[o-1],e[o]);if(0<n||0==n&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var o=e.length;r=r||goog.array.defaultCompareEquality;for(var n=0;n<o;n++)if(!r(e[n],t[n]))return!1;return!0},goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var o=Math.min(e.length,t.length),n=0;n<o;n++){var i=r(e[n],t[n]);if(0!=i)return i}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){return 0>(r=goog.array.binarySearch(e,t,r))&&(goog.array.insertAt(e,t,-(r+1)),!0)},goog.array.binaryRemove=function(e,t,r){return 0<=(t=goog.array.binarySearch(e,t,r))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,r){for(var o={},n=0;n<e.length;n++){var i=e[n],s=t.call(r,i,n,e);void 0!==s&&(o[s]||(o[s]=[])).push(i)}return o},goog.array.toObject=function(e,t,r){var o={};return goog.array.forEach(e,(function(n,i){o[t.call(r,n,i,e)]=n})),o},goog.array.range=function(e,t,r){var o=[],n=0,i=e;if(void 0!==t&&(n=e,i=t),0>(r=r||1)*(i-n))return[];if(0<r)for(e=n;e<i;e+=r)o.push(e);else for(e=n;e>i;e+=r)o.push(e);return o},goog.array.repeat=function(e,t){for(var r=[],o=0;o<t;o++)r[o]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var o=arguments[r];if(Array.isArray(o))for(var n=0;n<o.length;n+=8192){var i=goog.array.slice(o,n,n+8192);i=goog.array.flatten.apply(null,i);for(var s=0;s<i.length;s++)t.push(i[s])}else t.push(o)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,r,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,o=1;o<arguments.length;o++)arguments[o].length<r&&(r=arguments[o].length);for(o=0;o<r;o++){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i][o]);t.push(n)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var r=e.length-1;0<r;r--){var o=Math.floor(t()*(r+1)),n=e[r];e[r]=e[o],e[o]=n}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,(function(t){r.push(e[t])})),r},goog.array.concatMap=function(e,t,r){return goog.array.concat.apply([],goog.array.map(e,t,r))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,o=0;o<e.length;o++){var n=e.charCodeAt(o);255<n&&(t[r++]=255&n,n>>=8),t[r++]=n}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var o=goog.array.slice(e,r,r+8192);t+=String.fromCharCode.apply(null,o)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,o=0;o<e.length;o++){var n=e.charCodeAt(o);128>n?t[r++]=n:(2048>n?t[r++]=n>>6|192:(55296==(64512&n)&&o+1<e.length&&56320==(64512&e.charCodeAt(o+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++o)),t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,o=0;r<e.length;){var n=e[r++];if(128>n)t[o++]=String.fromCharCode(n);else if(191<n&&224>n){var i=e[r++];t[o++]=String.fromCharCode((31&n)<<6|63&i)}else if(239<n&&365>n){i=e[r++];var s=e[r++];n=((7&n)<<18|(63&i)<<12|(63&s)<<6|63&e[r++])-65536,t[o++]=String.fromCharCode(55296+(n>>10)),t[o++]=String.fromCharCode(56320+(1023&n))}else i=e[r++],s=e[r++],t[o++]=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],o=0;o<e.length;o++)r.push(e[o]^t[o]);return r},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(e);r&&void 0!==r[t]&&(e&&(e instanceof r[t]||!(e instanceof r.Location||e instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,r=t&&(t.defaultView||t.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,r),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(r){return t?e==r:e===r}},goog.functions.compose=function(e,t){var r=arguments,o=r.length;return function(){var e;o&&(e=r[o-1].apply(this,arguments));for(var t=o-2;0<=t;t--)e=r[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,r=t.length;return function(){for(var e,o=0;o<r;o++)e=t[o].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var r=function(){};return r.prototype=e.prototype,r=new r,e.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(t=e(),r=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,r){var o=0;return function(n){goog.global.clearTimeout(o);var i=arguments;o=goog.global.setTimeout((function(){e.apply(r,i)}),t)}},goog.functions.throttle=function(e,t,r){var o=0,n=!1,i=[],s=function(){o=0,n&&(n=!1,a())},a=function(){o=goog.global.setTimeout(s,t),e.apply(r,i)};return function(e){i=arguments,o?n=!0:a()}},goog.functions.rateLimit=function(e,t,r){var o=0,n=function(){o=0};return function(i){o||(o=goog.global.setTimeout(n,t),e.apply(r,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var r=[],o=1;o<arguments.length;o++)r.push(goog.html.SafeScript.stringify_(arguments[o]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(e){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(e){},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.fs.blob={},goog.fs.blob.getBlob=function(e){var t=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==t){t=new t;for(var r=0;r<arguments.length;r++)t.append(arguments[r]);return t.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(e,t,r){var o=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==o){o=new o;for(var n=0;n<e.length;n++)o.append(e[n],r);return o.getBlob(t)}if(void 0!==goog.global.Blob)return o={},t&&(o.type=t),r&&(o.endings=r),new Blob(e,o);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\ud801\ud804-\ud839\ud83c-\udbff豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\ud802-\ud803\ud83a-\ud83bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var r=0,o=0,n=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var i=e[t];goog.i18n.bidi.startsWithRtl(i)?(r++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(i)?n=!0:goog.i18n.bidi.hasAnyLtr(i)?o++:goog.i18n.bidi.hasNumeralsRe_.test(i)&&(n=!0)}return 0==o?n?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var r=goog.html.TrustedResourceUrl.unwrap(this),o=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",o,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,t){var r=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,o){if(!Object.prototype.hasOwnProperty.call(t,o))throw Error('Found marker, "'+o+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[o])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,r,o){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(r,o)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",r=0;r<e.length;r++)t+=goog.string.Const.unwrap(e[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.fromSafeScript=function(e){return e=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(e)],"text/javascript"),e=goog.fs.url.createObjectUrl(e),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,r){if(null==r)return t;if("string"==typeof r)return r?e+encodeURIComponent(r):"";for(var o in r){var n=r[o];n=Array.isArray(n)?n:[n];for(var i=0;i<n.length;i++){var s=n[i];null!=s&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(o)+"="+encodeURIComponent(String(s)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var r=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var o=Math.max(e.length,t.length),n=0;0==r&&n<o;n++){var i=e[n]||"",s=t[n]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;r=0==i[1].length?0:parseInt(i[1],10);var a=0==s[1].length?0:parseInt(s[1],10);r=goog.string.internal.compareElements_(r,a)||goog.string.internal.compareElements_(0==i[2].length,0==s[2].length)||goog.string.internal.compareElements_(i[2],s[2]),i=i[3],s=s[3]}while(0==r)}return r},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SafeUrl.isSafeMimeType(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromMediaSource=function(e){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),e=e instanceof MediaSource?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SafeUrl.isSafeMimeType(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,r){return(e=e.exec(t))?(e=e[1],-1==(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,r="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var o=e[t];null!=o&&(r+=t+":"+(o=Array.isArray(o)?goog.array.map(o,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(o))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,r=!0,o=0;o<e.length;o++){var n=e.charAt(o);"'"==n&&r?t=!t:'"'==n&&t&&(r=!r)}return t&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,r=/^[-_a-zA-Z0-9]$/,o=0;o<e.length;o++){var n=e.charAt(o);if("]"==n){if(t)return!1;t=!0}else if("["==n){if(!t)return!1;t=!1}else if(!t&&!r.test(n))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,r,o){var n="";return r=r.replace(/^(['"])(.*)\1$/,(function(e,t,r){return n=t,r})),e=goog.html.SafeUrl.sanitize(r).getTypedStringValue(),t+n+e+n+o}))},goog.html.SafeStyle.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,r),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var r=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},r=[],o=0;o<e.length;o++){var n=e[o];if(t[n])r.push(t[n]);else if(goog.object.contains(t,n)&&r.pop()!=n)return!1}return 0==r.length},goog.html.SafeStyleSheet.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,o=[];t=r.exec(e);)o.push([t[1],t[2],t[3]||void 0]);return o},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,o),r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var r={};goog.array.forEach(t,(function(e){r[e[0]]=e[1]}));var o=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS","HeadlessChrome"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,r=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(r=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(e){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("\x3c!--"+goog.string.internal.htmlEscape(e)+"--\x3e",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,r){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,r)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,r,o){e&&goog.html.TrustedResourceUrl.unwrap(e);var n={};return n.src=e||null,n.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(n,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.createSandboxIframe=function(e,t,r,o){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var n={};return n.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,n.srcdoc=t||null,n.sandbox="",e=goog.html.SafeHtml.combineAttributes(n,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var r in t){var o=r.toLowerCase();if("language"==o||"src"==o||"text"==o||"type"==o)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+o+'" attribute':"")}for(r="",e=goog.array.concat(e),o=0;o<e.length;o++)r+=goog.html.SafeScript.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var r="";e=goog.array.concat(e);for(var o=0;o<e.length;o++)r+=goog.html.SafeStyleSheet.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");r=goog.html.SafeHtml.getStyleValue_(r)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+r+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if("string"!=typeof r)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.':"");r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert("string"==typeof r||"number"==typeof r,"String or number value expected, got "+typeof r+" with value: "+r),t+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"");return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,r,o){return(t=goog.html.SafeHtml.create(t,r,o)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var r=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),o=[],n=function(e){Array.isArray(e)?goog.array.forEach(e,n):(e=goog.html.SafeHtml.htmlEscape(e),o.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&r!=e&&(r=null))};return goog.array.forEach(t,n),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o.join(goog.html.SafeHtml.unwrap(e)),r)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=e,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,r){var o=null,n="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==r?r=[]:Array.isArray(r)||(r=[r]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+e+"> does not allow content."),n+=">"):(o=goog.html.SafeHtml.concat(r),n+=">"+goog.html.SafeHtml.unwrap(o)+"</"+e+">",o=o.getDirection()),(e=t&&t.dir)&&(o=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,o)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var r="";if(t)for(var o in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(o))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+o+'".':"");var n=t[o];null!=n&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,o,n))}return r},goog.html.SafeHtml.combineAttributes=function(e,t,r){var o,n={};for(o in e)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),n[o]=e[o];for(o in t)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),n[o]=t[o];if(r)for(o in r){var i=o.toLowerCase();if(i in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+i+'" attribute, got "'+o+'" with value "'+r[o]+'"':"");i in t&&delete n[i],n[o]=r[o]}return n},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,r){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,r){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild||(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),t.parentElement))})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,r){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,r,o,n){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t=t||goog.global,r=r instanceof goog.string.Const?goog.string.Const.unwrap(r):r||"",t.open(goog.html.SafeUrl.unwrap(e),r,o,n)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,r){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),r)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var r=e.split("%s"),o="",n=Array.prototype.slice.call(arguments,1);n.length&&1<r.length;)o+=r.shift()+n.shift();return o+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(r),n=t.toLowerCase().match(r),i=Math.min(o.length,n.length),s=0;s<i;s++){r=o[s];var a=n[s];if(r!=a)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t)&&e-t)?e-t:r<a?-1:1}return o.length!=n.length?o.length-n.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},o=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var n=r[e];return n||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(n=String.fromCharCode(t))),n||(goog.dom.safe.setInnerHtml(o,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),n=o.firstChild.nodeValue.slice(0,-1)),r[e]=n)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,o=0;o<r;o++){var n=1==r?t:t.charAt(o);if(e.charAt(0)==n&&e.charAt(e.length-1)==n)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,o){if(r&&(e=goog.string.unescapeEntities(e)),o&&e.length>t){o>t&&(o=t);var n=e.length-o;e=e.substring(0,t-o)+"..."+e.substring(n)}else e.length>t&&(o=Math.floor(t/2),n=e.length-o,e=e.substring(0,o+t%2)+"..."+e.substring(n));return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var o=e.charAt(r),n=o.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[o]||(31<n&&127>n?o:goog.string.escapeChar(o))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var r=e;else 256>t?(r="\\x",(16>t||256<t)&&(r+="0")):(r="\\u",4096>t&&(r+="0")),r+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var o=e;return 0<=t&&t<e.length&&0<r&&(o=e.substr(0,t)+e.substr(t+r,e.length-t-r)),o},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,r){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){return-1==(r=(e=void 0!==r?e.toFixed(r):String(e)).indexOf("."))&&(r=e.length),goog.string.repeat("0",Math.max(0,t-r))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,r){return t+r.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),"string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var o=[];0<r&&e.length;)o.push(e.shift()),r--;return e.length&&o.push(e.join(t)),o},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var r=-1,o=0;o<t.length;o++)if(""!=t[o]){var n=e.lastIndexOf(t[o]);n>r&&(r=n)}return-1==r?e:e.slice(r+1)},goog.string.editDistance=function(e,t){var r=[],o=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var n=0;n<t.length+1;n++)r[n]=n;for(n=0;n<e.length;n++){o[0]=n+1;for(var i=0;i<t.length;i++)o[i+1]=Math.min(o[i]+1,r[i+1]+1,r[i]+Number(e[n]!=t[i]));for(i=0;i<r.length;i++)r[i]=o[i]}return o[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,r=goog.labs.userAgent.engine.getEngineTuple_(e);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):r[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,r,o){return o=o?o(t):t,Object.prototype.hasOwnProperty.call(e,o)?e[o]:e[o]=r(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()||parseInt(goog.userAgent.VERSION,10)||void 0}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(e){return goog.string.contains(goog.crypt.base64.paddingChars_,e)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),void 0===t&&(t=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),t=goog.crypt.base64.byteToCharMaps_[t];for(var r=[],o=0;o<e.length;o+=3){var n=e[o],i=o+1<e.length,s=i?e[o+1]:0,a=o+2<e.length,c=a?e[o+2]:0,l=n>>2;n=(3&n)<<4|s>>4,s=(15&s)<<2|c>>6,c&=63,a||(c=64,i||(s=64)),r.push(t[l],t[n],t[s]||"",t[c]||"")}return r.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){r+=String.fromCharCode(e)})),r},goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){r.push(e)})),r},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,r=3*t/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(e[t-1])&&(r=goog.crypt.base64.isPadding_(e[t-2])?r-2:r-1);var o=new Uint8Array(r),n=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){o[n++]=e})),o.subarray(0,n)},goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;o<e.length;){var r=e.charAt(o++),n=goog.crypt.base64.charToByteMap_[r];if(null!=n)return n;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var o=0;;){var n=r(-1),i=r(0),s=r(64),a=r(64);if(64===a&&-1===n)break;t(n<<2|i>>4),64!=s&&(t(i<<4&240|s>>2),64!=a&&t(s<<6&192|a))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var e=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var o=e.concat(t[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=o;for(var n=0;n<o.length;n++){var i=o[n],s=goog.crypt.base64.charToByteMap_[i];void 0===s?goog.crypt.base64.charToByteMap_[i]=n:goog.asserts.assert(s===n)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,r=(e=Math.abs(e))>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=r,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var r=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-r),16777216<=(e=Math.round(e*jspb.BinaryConstants.TWO_TO_23))&&++r,jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|r+127<<23|8388607&e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);e=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=r>>>0}else{var o=0;if(2<=(r=e))for(;2<=r&&1023>o;)o++,r/=2;else for(;1>r&&-1022<o;)r*=2,o--;e=(r=e*Math.pow(2,-o))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|o+1023<<20|e)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),o=e.charCodeAt(2),n=e.charCodeAt(3),i=e.charCodeAt(4),s=e.charCodeAt(5),a=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(r<<8)+(o<<16)+(n<<24)>>>0,jspb.utils.split64High=i+(s<<8)+(a<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+(e>>>0)},jspb.utils.joinInt64=function(e,t){var r=2147483648&t;return r&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),r?-e:e},jspb.utils.toZigzag64=function(e,t,r){var o=t>>31;return r(e<<1^o,(t<<1|e>>>31)^o)},jspb.utils.joinZigzag64=function(e,t){return jspb.utils.fromZigzag64(e,t,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(e,t,r){var o=-(1&e);return r((e>>>1|t<<31)^o,t>>>1^o)},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var r=e>>>23&255;return e&=8388607,255==r?e?NaN:1/0*t:0==r?t*Math.pow(2,-149)*e:t*Math.pow(2,r-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,o=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==o?e?NaN:1/0*r:0==o?r*Math.pow(2,-1074)*e:r*Math.pow(2,o-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+jspb.utils.joinUint64(e,t);var o=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*o+6710656*(t=t>>16&65535),o+=8147497*t,t*=2,1e7<=e&&(o+=Math.floor(e/1e7),e%=1e7),1e7<=o&&(t+=Math.floor(o/1e7),o%=1e7),r(t,0)+r(o,t)+r(e,1)},jspb.utils.joinSignedDecimalString=function(e,t){var r=2147483648&t;return r&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),r?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,r):jspb.utils.joinUnsignedDecimalString(e,r)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=jspb.utils.hash64ToDecimalString(e[o],t);return r},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++)t=e*o[r]+t,o[r]=255&t,t>>>=8}jspb.asserts.assert(0<e.length);var r=!1;"-"===e[0]&&(r=!0,e=e.slice(1));for(var o=[0,0,0,0,0,0,0,0],n=0;n<e.length;n++)t(10,e.charCodeAt(n)-jspb.utils.ZERO_CHAR_CODE_);return r&&(function(){for(var e=0;8>e;e++)o[e]=255&~o[e]}(),t(1,1)),goog.crypt.byteArrayToString(o)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.toHexDigit_=function(e){return String.fromCharCode(10>e?jspb.utils.ZERO_CHAR_CODE_+e:jspb.utils.A_CHAR_CODE_-10+e)},jspb.utils.fromHexCharCode_=function(e){return e>=jspb.utils.A_CHAR_CODE_?e-jspb.utils.A_CHAR_CODE_+10:e-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var r=0;8>r;r++){var o=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.toHexDigit_(o>>4),t[2*r+3]=jspb.utils.toHexDigit_(15&o)}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),jspb.asserts.assert(18==e.length),jspb.asserts.assert("0"==e[0]),jspb.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++){var o=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+2)),n=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+3));t=String.fromCharCode(16*o+n)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,r):jspb.utils.joinUint64(e,r)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,r){for(var o=0,n=t;n<r;n++)o+=e[n]>>7;return r-t-o},jspb.utils.countVarintFields=function(e,t,r,o){var n=0;if(128>(o=8*o+jspb.BinaryConstants.WireType.VARINT))for(;t<r&&e[t++]==o;)for(n++;;){var i=e[t++];if(0==(128&i))break}else for(;t<r;){for(i=o;128<i;){if(e[t]!=(127&i|128))return n;t++,i>>=7}if(e[t++]!=i)break;for(n++;0!=(128&(i=e[t++])););}return n},jspb.utils.countFixedFields_=function(e,t,r,o,n){var i=0;if(128>o)for(;t<r&&e[t++]==o;)i++,t+=n;else for(;t<r;){for(var s=o;128<s;){if(e[t++]!=(127&s|128))return i;s>>=7}if(e[t++]!=s)break;i++,t+=n}return i},jspb.utils.countFixed32Fields=function(e,t,r,o){return jspb.utils.countFixedFields_(e,t,r,8*o+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,r,o){return jspb.utils.countFixedFields_(e,t,r,8*o+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,r,o){var n=0;for(o=8*o+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var i=o;128<i;){if(e[t++]!=(127&i|128))return n;i>>=7}if(e[t++]!=i)break;n++;for(var s=0,a=1;s+=(127&(i=e[t++]))*a,a*=128,0!=(128&i););t+=s}return n},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return"string"==typeof e?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var o=e.charCodeAt(r);if(255<o)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=o}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(e,t,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var o=jspb.BinaryDecoder.instanceCache_.pop();return e&&o.setBlock(e,t,r),o}return new jspb.BinaryDecoder(e,t,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=void 0!==t?t:0,this.end_=void 0!==r?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(e){for(var t=128,r=0,o=0,n=0;4>n&&128<=t;n++)r|=(127&(t=this.bytes_[this.cursor_++]))<<7*n;if(128<=t&&(r|=(127&(t=this.bytes_[this.cursor_++]))<<28,o|=(127&t)>>4),128<=t)for(n=0;5>n&&128<=t;n++)o|=(127&(t=this.bytes_[this.cursor_++]))<<7*n+3;if(128>t)return e(r>>>0,o>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(e){return this.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(e){var t=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var o=0,n=0,i=r+7;i>=r;i--)o=o<<8|t[i],n=n<<8|t[i+4];return e(o,n)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],r=127&t;return 128>t?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+1]))<<7,128>t?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+2]))<<14,128>t?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+3]))<<21,128>t?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(t=e[this.cursor_+4]))<<28,128>t?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],o=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|o<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],o=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|r<<16|o<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var o=[],n="";r<e;){var i=t[r++];if(128>i)o.push(i);else{if(192>i)continue;if(224>i){var s=t[r++];o.push((31&i)<<6|63&s)}else if(240>i){s=t[r++];var a=t[r++];o.push((15&i)<<12|(63&s)<<6|63&a)}else 248>i&&(i=(7&i)<<18|(63&(s=t[r++]))<<12|(63&(a=t[r++]))<<6|63&t[r++],i-=65536,o.push(55296+(i>>10&1023),56320+(1023&i)))}8192<=o.length&&(n+=String.fromCharCode.apply(null,o),o.length=0)}return n+=goog.crypt.byteArrayToString(o),this.cursor_=r,n},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,jspb.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],o=e[t+1],n=e[t+2],i=e[t+3],s=e[t+4],a=e[t+5],c=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(r,o,n,i,s,a,c,e)},jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var o=jspb.BinaryReader.instanceCache_.pop();return e&&o.decoder_.setBlock(e,t,r),o}return new jspb.BinaryReader(e,t,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){null===this.readCallbacks_&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return jspb.asserts.assert(null!==this.readCallbacks_),e=this.readCallbacks_[e],jspb.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),o=this.decoder_.readUnsignedVarint32();o=this.decoder_.getCursor()+o,this.decoder_.setEnd(o),t(e,this),this.decoder_.setCursor(o),this.decoder_.setEnd(r)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(e,t,r){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==e),r(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(r),e},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(e)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(e){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(e)},jspb.BinaryReader.prototype.readPackedField_=function(e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var r=[];this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(e){var t=this;jspb.utils.splitHash64(e),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(e,r){t.writeSplitVarint64(e>>>0,r>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){jspb.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){jspb.asserts.assert("boolean"==typeof e||"number"==typeof e),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){var t=this.buffer_.length;jspb.asserts.assertString(e);for(var r=0;r<e.length;r++){var o=e.charCodeAt(r);if(128>o)this.buffer_.push(o);else if(2048>o)this.buffer_.push(o>>6|192),this.buffer_.push(63&o|128);else if(65536>o)if(55296<=o&&56319>=o&&r+1<e.length){var n=e.charCodeAt(r+1);56320<=n&&57343>=n&&(o=1024*(o-55296)+n-56320+65536,this.buffer_.push(o>>18|240),this.buffer_.push(o>>12&63|128),this.buffer_.push(o>>6&63|128),this.buffer_.push(63&o|128),r++)}else this.buffer_.push(o>>12|224),this.buffer_.push(o>>6&63|128),this.buffer_.push(63&o|128)}return this.buffer_.length-t},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var r=65535&e,o=65535&t,n=t>>>16;for(t=r*o+65536*(r*n&65535)+65536*((e>>>=16)*o&65535),r=e*n+(r*n>>>16)+(e*o>>>16);4294967296<=t;)t-=4294967296,r+=1;return new jspb.arith.UInt64(t>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var o=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),o=o.leftShift();for(;!o.zero();)0>=e.cmp(r)&&(t=t.add(o),r=r.sub(e)),e=e.rightShift(),o=o.rightShift();return[t,r]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var r=(t=t.div(10))[0];e=t[1].lo+e,t=r}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),o=0;o<e.length;o++){if("0">e[o]||"9"<e[o])return null;var n=parseInt(e[o],10);r.lo=n,t=t.mul(10).add(r)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,jspb.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,o=0,n=0;n<r;n++){var i=t[n];e.set(i,o),o+=i.length}return t=this.encoder_.end(),e.set(t,o),o+=t.length,jspb.asserts.assert(o==e.length),this.blocks_=[e],e},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){jspb.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var o=jspb.BinaryConstants.FieldType;switch(e){case o.DOUBLE:this.writeDouble(t,r);break;case o.FLOAT:this.writeFloat(t,r);break;case o.INT64:this.writeInt64(t,r);break;case o.UINT64:this.writeUint64(t,r);break;case o.INT32:this.writeInt32(t,r);break;case o.FIXED64:this.writeFixed64(t,r);break;case o.FIXED32:this.writeFixed32(t,r);break;case o.BOOL:this.writeBool(t,r);break;case o.STRING:this.writeString(t,r);break;case o.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case o.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case o.BYTES:this.writeBytes(t,r);break;case o.UINT32:this.writeUint32(t,r);break;case o.ENUM:this.writeEnum(t,r);break;case o.SFIXED32:this.writeSfixed32(t,r);break;case o.SFIXED64:this.writeSfixed64(t,r);break;case o.SINT32:this.writeSint32(t,r);break;case o.SINT64:this.writeSint64(t,r);break;case o.FHASH64:this.writeFixedHash64(t,r);break;case o.VHASH64:this.writeVarintHash64(t,r);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(e,t){null!=t&&this.writeZigzagVarintHash64_(e,t)},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&this.writeZigzagVarint64String_(e,t)},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(jspb.asserts.assert("boolean"==typeof t||"number"==typeof t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,r){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),r(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(jspb.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);var o=this.encoder_;jspb.utils.toZigzag64(t,r,(function(e,t){o.writeSplitVarint64(e>>>0,t>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(e,t,r,o){if(null!=t)for(var n=0;n<t.length;n++)this.writeSplitFixed64(e,r(t[n]),o(t[n]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(e,t,r,o){if(null!=t)for(var n=0;n<t.length;n++)this.writeSplitVarint64(e,r(t[n]),o(t[n]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(e,t,r,o){if(null!=t)for(var n=0;n<t.length;n++)this.writeSplitZigzagVarint64(e,r(t[n]),o(t[n]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarintHash64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var o=0;o<t.length;o++){var n=this.beginDelimited_(e);r(t[o],this),this.endDelimited_(n)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var o=0;o<t.length;o++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[o],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSplitFixed64(r(t[n]),o(t[n]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSplitVarint64(r(t[n]),o(t[n]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var n=this.encoder_,i=0;i<t.length;i++)jspb.utils.toZigzag64(r(t[i]),o(t[i]),(function(e,t){n.writeSplitVarint64(e>>>0,t>>>0)}));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var o=jspb.arith.Int64.fromString(t[r]);this.encoder_.writeSplitVarint64(o.lo,o.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var o=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitVarint64(o.lo,o.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint32(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint64(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t[r]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var r=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeEnum(t[r]);this.endDelimited_(e)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeVarintHash64(t[r]);this.endDelimited_(e)}},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var o=this.map_[t[e]];(r=o.valueWrapper)&&r.toArray(),this.arr_.push([o.key,o.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),o=[],n=0;n<r.length;n++){var i=this.map_[r[n][0].toString()];this.wrapEntry_(i);var s=i.valueWrapper;s?(jspb.asserts.assert(t),o.push([i.key,t(e,s)])):o.push([i.key,i.value])}return o},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var o=0;o<e.length;o++){var n=e[o][0],i=r(e[o][1]);t.set(n,i)}return t},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var o=this.map_[t[r]];e.push([o.key,o.value])}return e},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var o=this.map_[t[r]];e.push([o.key,this.wrapEntry_(o)])}return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var o=0;o<r.length;o++){var n=this.map_[r[o]];e.call(t,this.wrapEntry_(n),n.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);return this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t,this.map_[e.toString()]=r,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(e){return e.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(e,t,r,o,n){var i=this.stringKeys_();i.sort();for(var s=0;s<i.length;s++){var a=this.map_[i[s]];t.beginSubMessage(e),r.call(t,1,a.key),this.valueCtor_?o.call(t,2,this.wrapEntry_(a),n):o.call(t,2,a.value),t.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(e,t,r,o,n,i,s){for(;t.nextField()&&!t.isEndGroup();){var a=t.getFieldNumber();1==a?i=r.call(t):2==a&&(e.valueCtor_?(jspb.asserts.assert(n),s||(s=new e.valueCtor_),o.call(t,s,n)):s=o.call(t))}jspb.asserts.assert(null!=i),jspb.asserts.assert(null!=s),e.set(i,s)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,r,o,n){this.fieldIndex=e,this.fieldName=t,this.ctor=r,this.toObjectFn=o,this.isRepeated=n},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(e,t,r,o,n,i){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=r,this.binaryMessageSerializeFn=o,this.binaryMessageDeserializeFn=n,this.isPacked=i},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,r,o,n,i){if(e.wrappers_=null,t||(t=r?[r]:[]),e.messageId_=r?String(r):void 0,e.arrayIndexOffset_=0===r?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,o),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=n),n)for(t=0;t<n.length;t++)(r=n[t])<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(i&&i.length)for(t=0;t<i.length;t++)jspb.Message.computeOneofCase(e,i[t])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:Array.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var r=e.array.length,o=-1;if(r&&(o=r-1,r=e.array[o],jspb.Message.isExtensionObject_(r)))return e.pivot_=jspb.Message.getFieldNumber_(e,o),void(e.extensionObject_=r);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,o+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,r){for(var o=[],n=0;n<e.length;n++)o[n]=t.call(e[n],r,e[n]);return o},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(e,t,r,o,n){for(var i in r){var s=r[i],a=o.call(e,s);if(null!=a){for(var c in s.fieldName)if(s.fieldName.hasOwnProperty(c))break;t[c]=s.toObjectFn?s.isRepeated?jspb.Message.toObjectList(a,s.toObjectFn,n):s.toObjectFn(n,a):a}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(e,t,r,o){for(var n in r){var i=r[n],s=i.fieldInfo;if(!i.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var a=o.call(e,s);if(null!=a)if(s.isMessageType()){if(!i.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");i.binaryWriterFn.call(t,s.fieldIndex,a,i.binaryMessageSerializeFn)}else i.binaryWriterFn.call(t,s.fieldIndex,a)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(e,t,r,o,n){var i=r[t.getFieldNumber()];if(i){if(r=i.fieldInfo,!i.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var s=new r.ctor;i.binaryReaderFn.call(t,s,i.binaryMessageDeserializeFn)}else s=i.binaryReaderFn.call(t);r.isRepeated&&!i.isPacked?(t=o.call(e,r))?t.push(s):n.call(e,r,[s]):n.call(e,r,s)}else t.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var r=e.array[t];return r===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:r}if(e.extensionObject_)return(r=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:r},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var o=0;o<r.length;o++)r[o]=+r[o];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var o=0;o<r.length;o++)r[o]=!!r[o];e.convertedPrimitiveFields_[t]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(e){return null==e||"string"==typeof e?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?goog.crypt.base64.decodeStringToUint8Array(e):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),e.length&&"string"!=typeof e[0]?goog.array.map(e,jspb.Message.bytesAsB64):e},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getBooleanField(e,t))?r:e},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?r:e},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(e,t,r,o){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var n=jspb.Message.getField(e,t);if(!n){if(r)return;n=[],jspb.Message.setField(e,t,n)}return e.wrappers_[t]=new jspb.Map(n,o)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(e,t,r){return jspb.asserts.assertInstanceof(e,jspb.Message),t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r),e},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(e,t,r,o){return jspb.asserts.assertInstanceof(e,jspb.Message),r!==o?jspb.Message.setField(e,t,r):t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(e),delete e.extensionObject_[t]),e},jspb.Message.addToRepeatedField=function(e,t,r,o){return jspb.asserts.assertInstanceof(e,jspb.Message),t=jspb.Message.getRepeatedField(e,t),null!=o?t.splice(o,0,r):t.push(r),e},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(e,t,r,o){return jspb.asserts.assertInstanceof(e,jspb.Message),(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==o&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0)),jspb.Message.setField(e,t,o)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(e,t){for(var r,o,n=0;n<t.length;n++){var i=t[n],s=jspb.Message.getField(e,i);null!=s&&(r=i,o=s,jspb.Message.setField(e,i,void 0))}return r?(jspb.Message.setField(e,r,o),r):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(e,t,r,o){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){var n=jspb.Message.getField(e,r);(o||n)&&(e.wrappers_[r]=new t(n))}return e.wrappers_[r]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(e,t,r){return jspb.Message.wrapRepeatedField_(e,t,r),(t=e.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]),t},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(e,t,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){for(var o=jspb.Message.getRepeatedField(e,r),n=[],i=0;i<o.length;i++)n[i]=new t(o[i]);e.wrappers_[r]=n}},jspb.Message.setWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var o=r?r.toArray():r;return e.wrappers_[t]=r,jspb.Message.setField(e,t,o)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(e,t,r,o){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var n=o?o.toArray():o;return e.wrappers_[t]=o,jspb.Message.setOneofField(e,t,r,n)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(e,t,r){jspb.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={}),r=r||[];for(var o=[],n=0;n<r.length;n++)o[n]=r[n].toArray();return e.wrappers_[t]=r,jspb.Message.setField(e,t,o)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(e,t,r,o,n){jspb.Message.wrapRepeatedField_(e,o,t);var i=e.wrappers_[t];return i||(i=e.wrappers_[t]=[]),r=r||new o,e=jspb.Message.getRepeatedField(e,t),null!=n?(i.splice(n,0,r),e.splice(n,0,r.toArray())):(i.push(r),e.push(r.toArray())),r},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(e,t,r,o){for(var n={},i=0;i<e.length;i++)n[t.call(e[i])]=r?r.call(e[i],o,e[i]):e[i];return n},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray();t=t.toArray();var o=[],n=0,i=r.length>t.length?r.length:t.length;for(e.getJsPbMessageId()&&(o[0]=e.getJsPbMessageId(),n=1);n<i;n++)jspb.Message.compareFields(r[n],t[n])||(o[n]=t[n]);return new e.constructor(o)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var r,o={};for(r in e)o[r]=0;for(r in t)o[r]=0;for(r in o)if(!jspb.Message.compareFields(e[r],t[r]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){var o=void 0,n=void 0,i=Math.max(e.length,t.length);for(r=0;r<i;r++){var s=e[r],a=t[r];if(s&&s.constructor==Object&&(jspb.asserts.assert(void 0===o),jspb.asserts.assert(r===e.length-1),o=s,s=void 0),a&&a.constructor==Object&&(jspb.asserts.assert(void 0===n),jspb.asserts.assert(r===t.length-1),n=a,a=void 0),!jspb.Message.compareFields(s,a))return!1}return!o&&!n||(o=o||{},n=n||{},jspb.Message.compareExtensions(o,n))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assertInstanceof(t,jspb.Message),jspb.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var r=t.toArray(),o=e.toArray(),n=r.length=0;n<o.length;n++)r[n]=o[n];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(e){if(Array.isArray(e)){for(var t=Array(e.length),r=0;r<e.length;r++){var o=e[r];null!=o&&(t[r]="object"==typeof o?jspb.Message.clone_(jspb.asserts.assert(o)):o)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(r in t={},e)null!=(o=e[r])&&(t[r]="object"==typeof o?jspb.Message.clone_(jspb.asserts.assert(o)):o);return t},jspb.Message.registerMessageType=function(e,t){t.messageId=e},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf},462:(e,t,r)=>{var o=r(469),n=o,i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof window&&window||void 0!==i&&i||"undefined"!=typeof self&&self||function(){return this}.call(null)||Function("return this")();n.exportSymbol("proto.google.protobuf.Empty",null,i),proto.google.protobuf.Empty=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.google.protobuf.Empty,o.Message),n.DEBUG&&!COMPILED&&(proto.google.protobuf.Empty.displayName="proto.google.protobuf.Empty"),o.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Empty.prototype.toObject=function(e){return proto.google.protobuf.Empty.toObject(e,this)},proto.google.protobuf.Empty.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.google.protobuf.Empty.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.google.protobuf.Empty;return proto.google.protobuf.Empty.deserializeBinaryFromReader(r,t)},proto.google.protobuf.Empty.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.google.protobuf.Empty.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.google.protobuf.Empty.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.google.protobuf.Empty.serializeBinaryToWriter=function(e,t){},n.object.extend(t,proto.google.protobuf)},31:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{}class o extends r{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class n extends r{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class i extends r{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class s extends r{}class a extends r{constructor(e){super(`Invalid unit ${e}`)}}class c extends r{}class l extends r{constructor(){super("Zone is an abstract class")}}const u="numeric",p="short",g="long",d={year:u,month:u,day:u},f={year:u,month:p,day:u},h={year:u,month:p,day:u,weekday:p},m={year:u,month:g,day:u},y={year:u,month:g,day:u,weekday:g},v={hour:u,minute:u},_={hour:u,minute:u,second:u},b={hour:u,minute:u,second:u,timeZoneName:p},S={hour:u,minute:u,second:u,timeZoneName:g},E={hour:u,minute:u,hourCycle:"h23"},T={hour:u,minute:u,second:u,hourCycle:"h23"},w={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:p},C={hour:u,minute:u,second:u,hourCycle:"h23",timeZoneName:g},M={year:u,month:u,day:u,hour:u,minute:u},R={year:u,month:u,day:u,hour:u,minute:u,second:u},A={year:u,month:p,day:u,hour:u,minute:u},O={year:u,month:p,day:u,hour:u,minute:u,second:u},I={year:u,month:p,day:u,weekday:p,hour:u,minute:u},P={year:u,month:g,day:u,hour:u,minute:u,timeZoneName:p},j={year:u,month:g,day:u,hour:u,minute:u,second:u,timeZoneName:p},D={year:u,month:g,day:u,weekday:g,hour:u,minute:u,timeZoneName:g},N={year:u,month:g,day:u,weekday:g,hour:u,minute:u,second:u,timeZoneName:g};class U{get type(){throw new l}get name(){throw new l}get ianaName(){return this.name}get isUniversal(){throw new l}offsetName(e,t){throw new l}formatOffset(e,t){throw new l}offset(e){throw new l}equals(e){throw new l}get isValid(){throw new l}}let F=null;class L extends U{static get instance(){return null===F&&(F=new L),F}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,t){let{format:r,locale:o}=t;return Oe(e,r,o)}formatOffset(e,t){return De(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let k={};const B={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let x={};class W extends U{static create(e){return x[e]||(x[e]=new W(e)),x[e]}static resetCache(){x={},k={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=W.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,t){let{format:r,locale:o}=t;return Oe(e,r,o,this.name)}formatOffset(e,t){return De(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const r=(o=this.name,k[o]||(k[o]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:o,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),k[o]);var o;let[n,i,s,a,c,l,u]=r.formatToParts?function(e,t){const r=e.formatToParts(t),o=[];for(let e=0;e<r.length;e++){const{type:t,value:n}=r[e],i=B[t];"era"===t?o[i]=n:pe(i)||(o[i]=parseInt(n,10))}return o}(r,t):function(e,t){const r=e.format(t).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,i,s,a,c,l,u]=o;return[s,n,i,a,c,l,u]}(r,t);"BC"===a&&(n=1-Math.abs(n));let p=+t;const g=p%1e3;return p-=g>=0?g:1e3+g,(Me({year:n,month:i,day:s,hour:24===c?0:c,minute:l,second:u,millisecond:0})-p)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let H={},G={};function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=JSON.stringify([e,t]);let o=G[r];return o||(o=new Intl.DateTimeFormat(e,t),G[r]=o),o}let z={},q={},Y=null;function $(e,t,r,o){const n=e.listingMode();return"error"===n?null:"en"===n?r(t):o(t)}class K{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:o,floor:n,...i}=r;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...r};r.padTo>0&&(t.minimumIntegerDigits=r.padTo),this.inf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=JSON.stringify([e,t]);let o=z[r];return o||(o=new Intl.NumberFormat(e,t),z[r]=o),o}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return ve(this.floor?Math.floor(e):Ee(e,3),this.padTo)}}class J{constructor(e,t,r){let o;if(this.opts=r,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,r=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&W.create(r).valid?(o=r,this.dt=e):(o="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,o=e.zone.name):(o="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const n={...this.opts};n.timeZone=n.timeZone||o,this.dtf=V(t,n)}format(){return this.originalZone?this.formatToParts().map((e=>{let{value:t}=e;return t})).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Z{constructor(e,t,r){this.opts={style:"long",...r},!t&&fe()&&(this.rtf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{base:r,...o}=t,n=JSON.stringify([e,o]);let i=q[n];return i||(i=new Intl.RelativeTimeFormat(e,t),q[n]=i),i}(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"always",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===r&&i){const r="days"===e;switch(t){case 1:return r?"tomorrow":`next ${n[e][0]}`;case-1:return r?"yesterday":`last ${n[e][0]}`;case 0:return r?"today":`this ${n[e][0]}`}}const s=Object.is(t,-0)||t<0,a=Math.abs(t),c=1===a,l=n[e],u=o?c?l[1]:l[2]||l[1]:c?n[e][0]:e;return s?`${a} ${u} ago`:`in ${a} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}class X{static fromOpts(e){return X.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=e||ue.defaultLocale,i=n||(o?"en-US":Y||(Y=(new Intl.DateTimeFormat).resolvedOptions().locale,Y)),s=t||ue.defaultNumberingSystem,a=r||ue.defaultOutputCalendar;return new X(i,s,a,n)}static resetCache(){Y=null,G={},z={},q={}}static fromObject(){let{locale:e,numberingSystem:t,outputCalendar:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return X.create(e,t,r)}constructor(e,t,r,o){const[n,i,s]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(-1===r)return[e];{let t,o;try{t=V(e).resolvedOptions(),o=e}catch(n){const i=e.substring(0,r);t=V(i).resolvedOptions(),o=i}const{numberingSystem:n,calendar:i}=t;return[o,n,i]}}(e);this.locale=n,this.numberingSystem=t||i||null,this.outputCalendar=r||s||null,this.intl=function(e,t,r){return r||t?(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?X.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1):this}redefaultToEN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone({...e,defaultToEN:!0})}redefaultToSystem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone({...e,defaultToEN:!1})}months(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $(this,e,ke,(()=>{const r=t?{month:e,day:"numeric"}:{month:e},o=t?"format":"standalone";return this.monthsCache[o][e]||(this.monthsCache[o][e]=function(e){const t=[];for(let r=1;r<=12;r++){const o=Zr.utc(2009,r,1);t.push(e(o))}return t}((e=>this.extract(e,r,"month")))),this.monthsCache[o][e]}))}weekdays(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $(this,e,He,(()=>{const r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},o=t?"format":"standalone";return this.weekdaysCache[o][e]||(this.weekdaysCache[o][e]=function(e){const t=[];for(let r=1;r<=7;r++){const o=Zr.utc(2016,11,13+r);t.push(e(o))}return t}((e=>this.extract(e,r,"weekday")))),this.weekdaysCache[o][e]}))}meridiems(){return $(this,void 0,(()=>Ge),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Zr.utc(2016,11,13,9),Zr.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return $(this,e,Ye,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Zr.utc(-40,1,1),Zr.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,r){const o=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===r));return o?o.value:null}numberFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new K(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new J(e,this.intl,t)}relFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Z(this.intl,this.isEnglish(),e)}listFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=JSON.stringify([e,t]);let o=H[r];return o||(o=new Intl.ListFormat(e,t),H[r]=o),o}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Q=null;class ee extends U{static get utcInstance(){return null===Q&&(Q=new ee(0)),Q}static instance(e){return 0===e?ee.utcInstance:new ee(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ee(Ie(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${De(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${De(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return De(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class te extends U{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function re(e,t){if(pe(e)||null===e)return t;if(e instanceof U)return e;if("string"==typeof e){const r=e.toLowerCase();return"default"===r?t:"local"===r||"system"===r?L.instance:"utc"===r||"gmt"===r?ee.utcInstance:ee.parseSpecifier(r)||W.create(e)}return ge(e)?ee.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new te(e)}let oe,ne=()=>Date.now(),ie="system",se=null,ae=null,ce=null,le=60;class ue{static get now(){return ne}static set now(e){ne=e}static set defaultZone(e){ie=e}static get defaultZone(){return re(ie,L.instance)}static get defaultLocale(){return se}static set defaultLocale(e){se=e}static get defaultNumberingSystem(){return ae}static set defaultNumberingSystem(e){ae=e}static get defaultOutputCalendar(){return ce}static set defaultOutputCalendar(e){ce=e}static get twoDigitCutoffYear(){return le}static set twoDigitCutoffYear(e){le=e%100}static get throwOnInvalid(){return oe}static set throwOnInvalid(e){oe=e}static resetCaches(){X.resetCache(),W.resetCache()}}function pe(e){return void 0===e}function ge(e){return"number"==typeof e}function de(e){return"number"==typeof e&&e%1==0}function fe(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function he(e,t,r){if(0!==e.length)return e.reduce(((e,o)=>{const n=[t(o),o];return e&&r(e[0],n[0])===e[0]?e:n}),null)[1]}function me(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ye(e,t,r){return de(e)&&e>=t&&e<=r}function ve(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t=e<0?"-"+(""+-e).padStart(r,"0"):(""+e).padStart(r,"0"),t}function _e(e){return pe(e)||null===e||""===e?void 0:parseInt(e,10)}function be(e){return pe(e)||null===e||""===e?void 0:parseFloat(e)}function Se(e){if(!pe(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Ee(e,t){const r=10**t;return(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Math.trunc:Math.round)(e*r)/r}function Te(e){return e%4==0&&(e%100!=0||e%400==0)}function we(e){return Te(e)?366:365}function Ce(e,t){const r=(o=t-1)-12*Math.floor(o/12)+1;var o;return 2===r?Te(e+(t-r)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Me(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Re(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,r=e-1,o=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return 4===t||3===o?53:52}function Ae(e){return e>99?e:e>ue.twoDigitCutoffYear?1900+e:2e3+e}function Oe(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(i.timeZone=o);const s={timeZoneName:t,...i},a=new Intl.DateTimeFormat(r,s).formatToParts(n).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function Ie(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const o=parseInt(t,10)||0;return 60*r+(r<0||Object.is(r,-0)?-o:o)}function Pe(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new c(`Invalid unit value ${e}`);return t}function je(e,t){const r={};for(const o in e)if(me(e,o)){const n=e[o];if(null==n)continue;r[t(o)]=Pe(n)}return r}function De(e,t){const r=Math.trunc(Math.abs(e/60)),o=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${ve(r,2)}:${ve(o,2)}`;case"narrow":return`${n}${r}${o>0?`:${o}`:""}`;case"techie":return`${n}${ve(r,2)}${ve(o,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Ne(e){return function(e,t){return["hour","minute","second","millisecond"].reduce(((t,r)=>(t[r]=e[r],t)),{})}(e)}const Ue=["January","February","March","April","May","June","July","August","September","October","November","December"],Fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Le=["J","F","M","A","M","J","J","A","S","O","N","D"];function ke(e){switch(e){case"narrow":return[...Le];case"short":return[...Fe];case"long":return[...Ue];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Be=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],xe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],We=["M","T","W","T","F","S","S"];function He(e){switch(e){case"narrow":return[...We];case"short":return[...xe];case"long":return[...Be];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Ge=["AM","PM"],Ve=["Before Christ","Anno Domini"],ze=["BC","AD"],qe=["B","A"];function Ye(e){switch(e){case"narrow":return[...qe];case"short":return[...ze];case"long":return[...Ve];default:return null}}function $e(e,t){let r="";for(const o of e)o.literal?r+=o.val:r+=t(o.val);return r}const Ke={D:d,DD:f,DDD:m,DDDD:y,t:v,tt:_,ttt:b,tttt:S,T:E,TT:T,TTT:w,TTTT:C,f:M,ff:A,fff:P,ffff:D,F:R,FF:O,FFF:j,FFFF:N};class Je{static create(e){return new Je(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}static parseFormat(e){let t=null,r="",o=!1;const n=[];for(let i=0;i<e.length;i++){const s=e.charAt(i);"'"===s?(r.length>0&&n.push({literal:o||/^\s+$/.test(r),val:r}),t=null,r="",o=!o):o||s===t?r+=s:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=s,t=s)}return r.length>0&&n.push({literal:o||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(e){return Ke[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.opts.forceSimple)return ve(e,t);const r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){const r="en"===this.loc.listingMode(),o=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,n=(t,r)=>this.loc.extract(e,t,r),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",s=(t,o)=>r?function(e,t){return ke(t)[e.month-1]}(e,t):n(o?{month:t}:{month:t,day:"numeric"},"month"),a=(t,o)=>r?function(e,t){return He(t)[e.weekday-1]}(e,t):n(o?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const r=Je.macroTokenToFormatOpts(t);return r?this.formatWithSystemDefault(e,r):t},l=t=>r?function(e,t){return Ye(t)[e.year<0?0:1]}(e,t):n({era:t},"era");return $e(Je.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return r?function(e){return Ge[e.hour<12?0:1]}(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return o?n({day:"numeric"},"day"):this.num(e.day);case"dd":return o?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return o?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return o?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return s("short",!0);case"LLLL":return s("long",!0);case"LLLLL":return s("narrow",!0);case"M":return o?n({month:"numeric"},"month"):this.num(e.month);case"MM":return o?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return s("short",!1);case"MMMM":return s("long",!1);case"MMMMM":return s("narrow",!1);case"y":return o?n({year:"numeric"},"year"):this.num(e.year);case"yy":return o?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return o?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return o?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return l("short");case"GG":return l("long");case"GGGGG":return l("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const r=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},o=Je.parseFormat(t),n=o.reduce(((e,t)=>{let{literal:r,val:o}=t;return r?e:e.concat(o)}),[]);return $e(o,(e=>t=>{const o=r(t);return o?this.num(e.get(o),t.length):t})(e.shiftTo(...n.map(r).filter((e=>e)))))}}class Ze{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Xe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Qe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=t.reduce(((e,t)=>e+t.source),"");return RegExp(`^${o}$`)}function et(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.reduce(((t,r)=>{let[o,n,i]=t;const[s,a,c]=r(e,i);return[{...o,...s},a||n,c]}),[{},null,1]).slice(0,2)}function tt(e){if(null==e)return[null,null];for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];for(const[t,o]of r){const r=t.exec(e);if(r)return o(r)}return[null,null]}function rt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(e,r)=>{const o={};let n;for(n=0;n<t.length;n++)o[t[n]]=_e(e[r+n]);return[o,null,r+n]}}const ot=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,nt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,it=RegExp(`${nt.source}(?:${ot.source}?(?:\\[(${Xe.source})\\])?)?`),st=RegExp(`(?:T${it.source})?`),at=rt("weekYear","weekNumber","weekDay"),ct=rt("year","ordinal"),lt=RegExp(`${nt.source} ?(?:${ot.source}|(${Xe.source}))?`),ut=RegExp(`(?: ${lt.source})?`);function pt(e,t,r){const o=e[t];return pe(o)?r:_e(o)}function gt(e,t){return[{hours:pt(e,t,0),minutes:pt(e,t+1,0),seconds:pt(e,t+2,0),milliseconds:Se(e[t+3])},null,t+4]}function dt(e,t){const r=!e[t]&&!e[t+1],o=Ie(e[t+1],e[t+2]);return[{},r?null:ee.instance(o),t+3]}function ft(e,t){return[{},e[t]?W.create(e[t]):null,t+1]}const ht=RegExp(`^T?${nt.source}$`),mt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function yt(e){const[t,r,o,n,i,s,a,c,l]=e,u="-"===t[0],p=c&&"-"===c[0],g=function(e){return void 0!==e&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||e&&u)?-e:e};return[{years:g(be(r)),months:g(be(o)),weeks:g(be(n)),days:g(be(i)),hours:g(be(s)),minutes:g(be(a)),seconds:g(be(c),"-0"===c),milliseconds:g(Se(l),p)}]}const vt={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _t(e,t,r,o,n,i,s){const a={year:2===t.length?Ae(_e(t)):_e(t),month:Fe.indexOf(r)+1,day:_e(o),hour:_e(n),minute:_e(i)};return s&&(a.second=_e(s)),e&&(a.weekday=e.length>3?Be.indexOf(e)+1:xe.indexOf(e)+1),a}const bt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function St(e){const[,t,r,o,n,i,s,a,c,l,u,p]=e,g=_t(t,n,o,r,i,s,a);let d;return d=c?vt[c]:l?0:Ie(u,p),[g,new ee(d)]}const Et=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Tt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,wt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ct(e){const[,t,r,o,n,i,s,a]=e;return[_t(t,n,o,r,i,s,a),ee.utcInstance]}function Mt(e){const[,t,r,o,n,i,s,a]=e;return[_t(t,a,r,o,n,i,s),ee.utcInstance]}const Rt=Qe(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,st),At=Qe(/(\d{4})-?W(\d\d)(?:-?(\d))?/,st),Ot=Qe(/(\d{4})-?(\d{3})/,st),It=Qe(it),Pt=et((function(e,t){return[{year:pt(e,t),month:pt(e,t+1,1),day:pt(e,t+2,1)},null,t+3]}),gt,dt,ft),jt=et(at,gt,dt,ft),Dt=et(ct,gt,dt,ft),Nt=et(gt,dt,ft),Ut=et(gt),Ft=Qe(/(\d{4})-(\d\d)-(\d\d)/,ut),Lt=Qe(lt),kt=et(gt,dt,ft),Bt="Invalid Duration",xt={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Wt={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...xt},Ht={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...xt},Gt=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Vt=Gt.slice(0).reverse();function zt(e,t){const r={values:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new $t(r)}function qt(e,t){var r;let o=null!=(r=t.milliseconds)?r:0;for(const r of Vt.slice(1))t[r]&&(o+=t[r]*e[r].milliseconds);return o}function Yt(e,t){const r=qt(e,t)<0?-1:1;Gt.reduceRight(((o,n)=>{if(pe(t[n]))return o;if(o){const i=t[o]*r,s=e[n][o],a=Math.floor(i/s);t[n]+=a*r,t[o]-=a*s*r}return n}),null),Gt.reduce(((r,o)=>{if(pe(t[o]))return r;if(r){const n=t[r]%1;t[r]-=n,t[o]+=n*e[r][o]}return o}),null)}class $t{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let r=t?Ht:Wt;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||X.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return $t.fromObject({milliseconds:e},t)}static fromObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||"object"!=typeof e)throw new c("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new $t({values:je(e,$t.normalizeUnit),loc:X.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(ge(e))return $t.fromMillis(e);if($t.isDuration(e))return e;if("object"==typeof e)return $t.fromObject(e);throw new c(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[r]=function(e){return tt(e,[mt,yt])}(e);return r?$t.fromObject(r,t):$t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[r]=function(e){return tt(e,[ht,Ut])}(e);return r?$t.fromObject(r,t):$t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new c("need to specify a reason the Duration is invalid");const r=e instanceof Ze?e:new Ze(e,t);if(ue.throwOnInvalid)throw new i(r);return new $t({invalid:r})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new a(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?Je.create(this.loc,r).formatDurationFromString(this,e):Bt}toHuman(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return Bt;const t=Gt.map((t=>{const r=this.values[t];return pe(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(r)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Ee(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Zr.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?qt(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=$t.fromDurationLike(e),r={};for(const e of Gt)(me(t.values,e)||me(this.values,e))&&(r[e]=t.get(e)+this.get(e));return zt(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const t=$t.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=Pe(e(this.values[r],r));return zt(this,{values:t},!0)}get(e){return this[$t.normalizeUnit(e)]}set(e){return this.isValid?zt(this,{values:{...this.values,...je(e,$t.normalizeUnit)}}):this}reconfigure(){let{locale:e,numberingSystem:t,conversionAccuracy:r,matrix:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return zt(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:o,conversionAccuracy:r})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Yt(this.matrix,e),zt(this,{values:e},!0)}rescale(){return this.isValid?zt(this,{values:function(e){const t={};for(const[r,o]of Object.entries(e))0!==o&&(t[r]=o);return t}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!this.isValid)return this;if(0===t.length)return this;t=t.map((e=>$t.normalizeUnit(e)));const o={},n={},i=this.toObject();let s;for(const e of Gt)if(t.indexOf(e)>=0){s=e;let t=0;for(const r in n)t+=this.matrix[r][e]*n[r],n[r]=0;ge(i[e])&&(t+=i[e]);const r=Math.trunc(t);o[e]=r,n[e]=(1e3*t-1e3*r)/1e3}else ge(i[e])&&(n[e]=i[e]);for(const e in n)0!==n[e]&&(o[s]+=e===s?n[e]:n[e]/this.matrix[s][e]);return Yt(this.matrix,o),zt(this,{values:o},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return zt(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const o of Gt)if(t=this.values[o],r=e.values[o],!(void 0===t||0===t?void 0===r||0===r:t===r))return!1;var t,r;return!0}}const Kt="Invalid Interval";class Jt{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new c("need to specify a reason the Interval is invalid");const r=e instanceof Ze?e:new Ze(e,t);if(ue.throwOnInvalid)throw new n(r);return new Jt({invalid:r})}static fromDateTimes(e,t){const r=Xr(e),o=Xr(t),n=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?Jt.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:Jt.invalid("missing or invalid end"):Jt.invalid("missing or invalid start")}(r,o);return null==n?new Jt({start:r,end:o}):n}static after(e,t){const r=$t.fromDurationLike(t),o=Xr(e);return Jt.fromDateTimes(o,o.plus(r))}static before(e,t){const r=$t.fromDurationLike(t),o=Xr(e);return Jt.fromDateTimes(o.minus(r),o)}static fromISO(e,t){const[r,o]=(e||"").split("/",2);if(r&&o){let e,n,i,s;try{e=Zr.fromISO(r,t),n=e.isValid}catch(o){n=!1}try{i=Zr.fromISO(o,t),s=i.isValid}catch(o){s=!1}if(n&&s)return Jt.fromDateTimes(e,i);if(n){const r=$t.fromISO(o,t);if(r.isValid)return Jt.after(e,r)}else if(s){const e=$t.fromISO(r,t);if(e.isValid)return Jt.before(i,e)}}return Jt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds";return this.isValid?this.toDuration(e).get(e):NaN}count(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds";if(!this.isValid)return NaN;const t=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(t,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set(){let{start:e,end:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?Jt.fromDateTimes(e||this.s,t||this.e):this}splitAt(){if(!this.isValid)return[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const o=t.map(Xr).filter((e=>this.contains(e))).sort(),n=[];let{s:i}=this,s=0;for(;i<this.e;){const e=o[s]||this.e,t=+e>+this.e?this.e:e;n.push(Jt.fromDateTimes(i,t)),i=t,s+=1}return n}splitBy(e){const t=$t.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let r,{s:o}=this,n=1;const i=[];for(;o<this.e;){const e=this.start.plus(t.mapUnits((e=>e*n)));r=+e>+this.e?this.e:e,i.push(Jt.fromDateTimes(o,r)),o=r,n+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:Jt.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Jt.fromDateTimes(t,r)}static merge(e){const[t,r]=e.sort(((e,t)=>e.s-t.s)).reduce(((e,t)=>{let[r,o]=e;return o?o.overlaps(t)||o.abutsStart(t)?[r,o.union(t)]:[r.concat([o]),t]:[r,t]}),[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0;const o=[],n=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),i=Array.prototype.concat(...n).sort(((e,t)=>e.time-t.time));for(const e of i)r+="s"===e.type?1:-1,1===r?t=e.time:(t&&+t!=+e.time&&o.push(Jt.fromDateTimes(t,e.time)),t=null);return Jt.merge(o)}difference(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Jt.xor([this].concat(t)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Kt}toLocaleString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?Je.create(this.s.loc.clone(t),e).formatInterval(this):Kt}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Kt}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Kt}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Kt}toFormat(e){let{separator:t=" – "}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Kt}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):$t.invalid(this.invalidReason)}mapEndpoints(e){return Jt.fromDateTimes(e(this.s),e(this.e))}}class Zt{static hasDST(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue.defaultZone;const t=Zr.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return W.isValidZone(e)}static normalizeZone(e){return re(e,ue.defaultZone)}static months(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:r=null,locObj:o=null,outputCalendar:n="gregory"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(o||X.create(t,r,n)).months(e)}static monthsFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:r=null,locObj:o=null,outputCalendar:n="gregory"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(o||X.create(t,r,n)).months(e,!0)}static weekdays(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:r=null,locObj:o=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(o||X.create(t,r,null)).weekdays(e)}static weekdaysFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",{locale:t=null,numberingSystem:r=null,locObj:o=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(o||X.create(t,r,null)).weekdays(e,!0)}static meridiems(){let{locale:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return X.create(e).meridiems()}static eras(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"short",{locale:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return X.create(t,null,"gregory").eras(e)}static features(){return{relative:fe()}}}function Xt(e,t){const r=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=r(t)-r(e);return Math.floor($t.fromMillis(o).as("days"))}const Qt={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},er={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},tr=Qt.hanidec.replace(/[\[|\]]/g,"").split("");function rr(e){let{numberingSystem:t}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new RegExp(`${Qt[t||"latn"]}${r}`)}function or(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return{regex:e,deser:e=>{let[r]=e;return t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);if(-1!==e[r].search(Qt.hanidec))t+=tr.indexOf(e[r]);else for(const e in er){const[r,n]=er[e];o>=r&&o<=n&&(t+=o-r)}}return parseInt(t,10)}return t}(r))}}}const nr=`[ ${String.fromCharCode(160)}]`,ir=new RegExp(nr,"g");function sr(e){return e.replace(/\./g,"\\.?").replace(ir,nr)}function ar(e){return e.replace(/\./g,"").replace(ir," ").toLowerCase()}function cr(e,t){return null===e?null:{regex:RegExp(e.map(sr).join("|")),deser:r=>{let[o]=r;return e.findIndex((e=>ar(o)===ar(e)))+t}}}function lr(e,t){return{regex:e,deser:e=>{let[,t,r]=e;return Ie(t,r)},groups:t}}function ur(e){return{regex:e,deser:e=>{let[t]=e;return t}}}const pr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let gr=null;function dr(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const r=hr(Je.macroTokenToFormatOpts(e.val),t);return null==r||r.includes(void 0)?e:r}(e,t))))}function fr(e,t,r){const o=dr(Je.parseFormat(r),e),n=o.map((t=>function(e,t){const r=rr(t),o=rr(t,"{2}"),n=rr(t,"{3}"),i=rr(t,"{4}"),s=rr(t,"{6}"),a=rr(t,"{1,2}"),c=rr(t,"{1,3}"),l=rr(t,"{1,6}"),u=rr(t,"{1,9}"),p=rr(t,"{2,4}"),g=rr(t,"{4,6}"),d=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:e=>{let[t]=e;return t},literal:!0};var t},f=(f=>{if(e.literal)return d(f);switch(f.val){case"G":return cr(t.eras("short"),0);case"GG":return cr(t.eras("long"),0);case"y":return or(l);case"yy":case"kk":return or(p,Ae);case"yyyy":case"kkkk":return or(i);case"yyyyy":return or(g);case"yyyyyy":return or(s);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return or(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return or(o);case"MMM":return cr(t.months("short",!0),1);case"MMMM":return cr(t.months("long",!0),1);case"LLL":return cr(t.months("short",!1),1);case"LLLL":return cr(t.months("long",!1),1);case"o":case"S":return or(c);case"ooo":case"SSS":return or(n);case"u":return ur(u);case"uu":return ur(a);case"uuu":case"E":case"c":return or(r);case"a":return cr(t.meridiems(),0);case"EEE":return cr(t.weekdays("short",!1),1);case"EEEE":return cr(t.weekdays("long",!1),1);case"ccc":return cr(t.weekdays("short",!0),1);case"cccc":return cr(t.weekdays("long",!0),1);case"Z":case"ZZ":return lr(new RegExp(`([+-]${a.source})(?::(${o.source}))?`),2);case"ZZZ":return lr(new RegExp(`([+-]${a.source})(${o.source})?`),2);case"z":return ur(/[a-z_+-/]{1,256}?/i);case" ":return ur(/[^\S\n\r]/);default:return d(f)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f}(t,e))),i=n.find((e=>e.invalidReason));if(i)return{input:t,tokens:o,invalidReason:i.invalidReason};{const[e,r]=function(e){return[`^${e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,e]}(n),i=RegExp(e,"i"),[a,c]=function(e,t,r){const o=e.match(t);if(o){const e={};let t=1;for(const n in r)if(me(r,n)){const i=r[n],s=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(o.slice(t,t+s))),t+=s}return[o,e]}return[o,{}]}(t,i,r),[l,u,p]=c?function(e){let t,r=null;return pe(e.z)||(r=W.create(e.z)),pe(e.Z)||(r||(r=new ee(e.Z)),t=e.Z),pe(e.q)||(e.M=3*(e.q-1)+1),pe(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),pe(e.u)||(e.S=Se(e.u)),[Object.keys(e).reduce(((t,r)=>{const o=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(r);return o&&(t[o]=e[r]),t}),{}),r,t]}(c):[null,null,void 0];if(me(c,"a")&&me(c,"H"))throw new s("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:o,regex:i,rawMatches:a,matches:c,result:l,zone:u,specificOffset:p}}}function hr(e,t){if(!e)return null;const r=Je.create(t,e).dtFormatter((gr||(gr=Zr.fromMillis(1555555555555)),gr)),o=r.formatToParts(),n=r.resolvedOptions();return o.map((t=>function(e,t,r){const{type:o,value:n}=e;if("literal"===o){const e=/^\s+$/.test(n);return{literal:!e,val:e?" ":n}}const i=t[o];let s=o;"hour"===o&&(s=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":r.hour12?"hour12":"hour24");let a=pr[s];if("object"==typeof a&&(a=a[i]),a)return{literal:!1,val:a}}(t,e,n)))}const mr=[0,31,59,90,120,151,181,212,243,273,304,334],yr=[0,31,60,91,121,152,182,213,244,274,305,335];function vr(e,t){return new Ze("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function _r(e,t,r){const o=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const n=o.getUTCDay();return 0===n?7:n}function br(e,t,r){return r+(Te(e)?yr:mr)[t-1]}function Sr(e,t){const r=Te(e)?yr:mr,o=r.findIndex((e=>e<t));return{month:o+1,day:t-r[o]}}function Er(e){const{year:t,month:r,day:o}=e,n=br(t,r,o),i=_r(t,r,o);let s,a=Math.floor((n-i+10)/7);return a<1?(s=t-1,a=Re(s)):a>Re(t)?(s=t+1,a=1):s=t,{weekYear:s,weekNumber:a,weekday:i,...Ne(e)}}function Tr(e){const{weekYear:t,weekNumber:r,weekday:o}=e,n=_r(t,1,4),i=we(t);let s,a=7*r+o-n-3;a<1?(s=t-1,a+=we(s)):a>i?(s=t+1,a-=we(t)):s=t;const{month:c,day:l}=Sr(s,a);return{year:s,month:c,day:l,...Ne(e)}}function wr(e){const{year:t,month:r,day:o}=e;return{year:t,ordinal:br(t,r,o),...Ne(e)}}function Cr(e){const{year:t,ordinal:r}=e,{month:o,day:n}=Sr(t,r);return{year:t,month:o,day:n,...Ne(e)}}function Mr(e){const t=de(e.year),r=ye(e.month,1,12),o=ye(e.day,1,Ce(e.year,e.month));return t?r?!o&&vr("day",e.day):vr("month",e.month):vr("year",e.year)}function Rr(e){const{hour:t,minute:r,second:o,millisecond:n}=e,i=ye(t,0,23)||24===t&&0===r&&0===o&&0===n,s=ye(r,0,59),a=ye(o,0,59),c=ye(n,0,999);return i?s?a?!c&&vr("millisecond",n):vr("second",o):vr("minute",r):vr("hour",t)}const Ar="Invalid DateTime",Or=864e13;function Ir(e){return new Ze("unsupported zone",`the zone "${e.name}" is not supported`)}function Pr(e){return null===e.weekData&&(e.weekData=Er(e.c)),e.weekData}function jr(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Zr({...r,...t,old:r})}function Dr(e,t,r){let o=e-60*t*1e3;const n=r.offset(o);if(t===n)return[o,t];o-=60*(n-t)*1e3;const i=r.offset(o);return n===i?[o,n]:[e-60*Math.min(n,i)*1e3,Math.max(n,i)]}function Nr(e,t){const r=new Date(e+=60*t*1e3);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Ur(e,t,r){return Dr(Me(e),t,r)}function Fr(e,t){const r=e.o,o=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:o,month:n,day:Math.min(e.c.day,Ce(o,n))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},s=$t.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Me(i);let[c,l]=Dr(a,r,e.zone);return 0!==s&&(c+=s,l=e.zone.offset(c)),{ts:c,o:l}}function Lr(e,t,r,o,n,i){const{setZone:s,zone:a}=r;if(e&&0!==Object.keys(e).length||t){const o=t||a,n=Zr.fromObject(e,{...r,zone:o,specificOffset:i});return s?n:n.setZone(a)}return Zr.invalid(new Ze("unparsable",`the input "${n}" can't be parsed as ${o}`))}function kr(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.isValid?Je.create(X.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Br(e,t){const r=e.c.year>9999||e.c.year<0;let o="";return r&&e.c.year>=0&&(o+="+"),o+=ve(e.c.year,r?6:4),t?(o+="-",o+=ve(e.c.month),o+="-",o+=ve(e.c.day)):(o+=ve(e.c.month),o+=ve(e.c.day)),o}function xr(e,t,r,o,n,i){let s=ve(e.c.hour);return t?(s+=":",s+=ve(e.c.minute),0===e.c.millisecond&&0===e.c.second&&r||(s+=":")):s+=ve(e.c.minute),0===e.c.millisecond&&0===e.c.second&&r||(s+=ve(e.c.second),0===e.c.millisecond&&o||(s+=".",s+=ve(e.c.millisecond,3))),n&&(e.isOffsetFixed&&0===e.offset&&!i?s+="Z":e.o<0?(s+="-",s+=ve(Math.trunc(-e.o/60)),s+=":",s+=ve(Math.trunc(-e.o%60))):(s+="+",s+=ve(Math.trunc(e.o/60)),s+=":",s+=ve(Math.trunc(e.o%60)))),i&&(s+="["+e.zone.ianaName+"]"),s}const Wr={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Hr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Gr={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Vr=["year","month","day","hour","minute","second","millisecond"],zr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],qr=["year","ordinal","hour","minute","second","millisecond"];function Yr(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new a(e);return t}function $r(e,t){const r=re(t.zone,ue.defaultZone),o=X.fromObject(t),n=ue.now();let i,s;if(pe(e.year))i=n;else{for(const t of Vr)pe(e[t])&&(e[t]=Wr[t]);const t=Mr(e)||Rr(e);if(t)return Zr.invalid(t);const o=r.offset(n);[i,s]=Ur(e,o,r)}return new Zr({ts:i,zone:r,loc:o,o:s})}function Kr(e,t,r){const o=!!pe(r.round)||r.round,n=(e,n)=>(e=Ee(e,o||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(e,n)),i=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(i(r.unit),r.unit);for(const e of r.units){const t=i(e);if(Math.abs(t)>=1)return n(t,e)}return n(e>t?-0:0,r.units[r.units.length-1])}function Jr(e){let t,r={};return e.length>0&&"object"==typeof e[e.length-1]?(r=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[r,t]}class Zr{constructor(e){const t=e.zone||ue.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Ze("invalid input"):null)||(t.isValid?null:Ir(t));this.ts=pe(e.ts)?ue.now():e.ts;let o=null,n=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[o,n]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);o=Nr(this.ts,e),r=Number.isNaN(o.year)?new Ze("invalid input"):null,o=r?null:o,n=r?null:e}this._zone=t,this.loc=e.loc||X.create(),this.invalid=r,this.weekData=null,this.c=o,this.o=n,this.isLuxonDateTime=!0}static now(){return new Zr({})}static local(){const[e,t]=Jr(arguments),[r,o,n,i,s,a,c]=t;return $r({year:r,month:o,day:n,hour:i,minute:s,second:a,millisecond:c},e)}static utc(){const[e,t]=Jr(arguments),[r,o,n,i,s,a,c]=t;return e.zone=ee.utcInstance,$r({year:r,month:o,day:n,hour:i,minute:s,second:a,millisecond:c},e)}static fromJSDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(o=e,"[object Date]"===Object.prototype.toString.call(o)?e.valueOf():NaN);var o;if(Number.isNaN(r))return Zr.invalid("invalid input");const n=re(t.zone,ue.defaultZone);return n.isValid?new Zr({ts:r,zone:n,loc:X.fromObject(t)}):Zr.invalid(Ir(n))}static fromMillis(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ge(e))return e<-Or||e>Or?Zr.invalid("Timestamp out of range"):new Zr({ts:e,zone:re(t.zone,ue.defaultZone),loc:X.fromObject(t)});throw new c(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ge(e))return new Zr({ts:1e3*e,zone:re(t.zone,ue.defaultZone),loc:X.fromObject(t)});throw new c("fromSeconds requires a numerical input")}static fromObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e||{};const r=re(t.zone,ue.defaultZone);if(!r.isValid)return Zr.invalid(Ir(r));const o=ue.now(),n=pe(t.specificOffset)?r.offset(o):t.specificOffset,i=je(e,Yr),a=!pe(i.ordinal),c=!pe(i.year),l=!pe(i.month)||!pe(i.day),u=c||l,p=i.weekYear||i.weekNumber,g=X.fromObject(t);if((u||a)&&p)throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&a)throw new s("Can't mix ordinal dates with month/day");const d=p||i.weekday&&!u;let f,h,m=Nr(o,n);d?(f=zr,h=Hr,m=Er(m)):a?(f=qr,h=Gr,m=wr(m)):(f=Vr,h=Wr);let y=!1;for(const e of f)pe(i[e])?i[e]=y?h[e]:m[e]:y=!0;const v=d?function(e){const t=de(e.weekYear),r=ye(e.weekNumber,1,Re(e.weekYear)),o=ye(e.weekday,1,7);return t?r?!o&&vr("weekday",e.weekday):vr("week",e.week):vr("weekYear",e.weekYear)}(i):a?function(e){const t=de(e.year),r=ye(e.ordinal,1,we(e.year));return t?!r&&vr("ordinal",e.ordinal):vr("year",e.year)}(i):Mr(i),_=v||Rr(i);if(_)return Zr.invalid(_);const b=d?Tr(i):a?Cr(i):i,[S,E]=Ur(b,n,r),T=new Zr({ts:S,zone:r,o:E,loc:g});return i.weekday&&u&&e.weekday!==T.weekday?Zr.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${T.toISO()}`):T}static fromISO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,o]=function(e){return tt(e,[Rt,Pt],[At,jt],[Ot,Dt],[It,Nt])}(e);return Lr(r,o,t,"ISO 8601",e)}static fromRFC2822(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,o]=function(e){return tt(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[bt,St])}(e);return Lr(r,o,t,"RFC 2822",e)}static fromHTTP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,o]=function(e){return tt(e,[Et,Ct],[Tt,Ct],[wt,Mt])}(e);return Lr(r,o,t,"HTTP",t)}static fromFormat(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(pe(e)||pe(t))throw new c("fromFormat requires an input string and a format");const{locale:o=null,numberingSystem:n=null}=r,i=X.fromOpts({locale:o,numberingSystem:n,defaultToEN:!0}),[s,a,l,u]=function(e,t,r){const{result:o,zone:n,specificOffset:i,invalidReason:s}=fr(e,t,r);return[o,n,i,s]}(i,e,t);return u?Zr.invalid(u):Lr(s,a,r,`format ${t}`,e,l)}static fromString(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Zr.fromFormat(e,t,r)}static fromSQL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,o]=function(e){return tt(e,[Ft,Pt],[Lt,kt])}(e);return Lr(r,o,t,"SQL",e)}static invalid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw new c("need to specify a reason the DateTime is invalid");const r=e instanceof Ze?e:new Ze(e,t);if(ue.throwOnInvalid)throw new o(r);return new Zr({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=hr(e,X.fromObject(t));return r?r.map((e=>e?e.val:null)).join(""):null}static expandFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dr(Je.parseFormat(e),X.fromObject(t)).map((e=>e.val)).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Pr(this).weekYear:NaN}get weekNumber(){return this.isValid?Pr(this).weekNumber:NaN}get weekday(){return this.isValid?Pr(this).weekday:NaN}get ordinal(){return this.isValid?wr(this.c).ordinal:NaN}get monthShort(){return this.isValid?Zt.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Zt.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Zt.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Zt.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,r=Me(this.c),o=this.zone.offset(r-e),n=this.zone.offset(r+e),i=this.zone.offset(r-o*t),s=this.zone.offset(r-n*t);if(i===s)return[this];const a=r-i*t,c=r-s*t,l=Nr(a,i),u=Nr(c,s);return l.hour===u.hour&&l.minute===u.minute&&l.second===u.second&&l.millisecond===u.millisecond?[jr(this,{ts:a}),jr(this,{ts:c})]:[this]}get isInLeapYear(){return Te(this.year)}get daysInMonth(){return Ce(this.year,this.month)}get daysInYear(){return this.isValid?we(this.year):NaN}get weeksInWeekYear(){return this.isValid?Re(this.weekYear):NaN}resolvedLocaleOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{locale:t,numberingSystem:r,calendar:o}=Je.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:o}}toUTC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setZone(ee.instance(e),t)}toLocal(){return this.setZone(ue.defaultZone)}setZone(e){let{keepLocalTime:t=!1,keepCalendarTime:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((e=re(e,ue.defaultZone)).equals(this.zone))return this;if(e.isValid){let o=this.ts;if(t||r){const t=e.offset(this.ts),r=this.toObject();[o]=Ur(r,t,e)}return jr(this,{ts:o,zone:e})}return Zr.invalid(Ir(e))}reconfigure(){let{locale:e,numberingSystem:t,outputCalendar:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jr(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=je(e,Yr),r=!pe(t.weekYear)||!pe(t.weekNumber)||!pe(t.weekday),o=!pe(t.ordinal),n=!pe(t.year),i=!pe(t.month)||!pe(t.day),a=n||i,c=t.weekYear||t.weekNumber;if((a||o)&&c)throw new s("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(i&&o)throw new s("Can't mix ordinal dates with month/day");let l;r?l=Tr({...Er(this.c),...t}):pe(t.ordinal)?(l={...this.toObject(),...t},pe(t.day)&&(l.day=Math.min(Ce(l.year,l.month),l.day))):l=Cr({...wr(this.c),...t});const[u,p]=Ur(l,this.o,this.zone);return jr(this,{ts:u,o:p})}plus(e){return this.isValid?jr(this,Fr(this,$t.fromDurationLike(e))):this}minus(e){return this.isValid?jr(this,Fr(this,$t.fromDurationLike(e).negate())):this}startOf(e){if(!this.isValid)return this;const t={},r=$t.normalizeUnit(e);switch(r){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===r&&(t.weekday=1),"quarters"===r){const e=Math.ceil(this.month/3);t.month=3*(e-1)+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?Je.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Ar}toLocaleString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?Je.create(this.loc.clone(t),e).formatDateTime(this):Ar}toLocaleParts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?Je.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO(){let{format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:o=!0,extendedZone:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const i="extended"===e;let s=Br(this,i);return s+="T",s+=xr(this,i,t,r,o,n),s}toISODate(){let{format:e="extended"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?Br(this,"extended"===e):null}toISOWeekDate(){return kr(this,"kkkk-'W'WW-c")}toISOTime(){let{suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:o=!1,extendedZone:n=!1,format:i="extended"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?(o?"T":"")+xr(this,"extended"===i,t,e,r,n):null}toRFC2822(){return kr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return kr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Br(this,!0):null}toSQLTime(){let{includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o="HH:mm:ss.SSS";return(t||e)&&(r&&(o+=" "),t?o+="z":e&&(o+="ZZ")),kr(this,o,!0)}toSQL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Ar}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.isValid||!e.isValid)return $t.invalid("created by diffing an invalid DateTime");const o={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=(a=t,Array.isArray(a)?a:[a]).map($t.normalizeUnit),i=e.valueOf()>this.valueOf(),s=function(e,t,r,o){let[n,i,s,a]=function(e,t,r){const o=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const r=Xt(e,t);return(r-r%7)/7}],["days",Xt]],n={},i=e;let s,a;for(const[c,l]of o)r.indexOf(c)>=0&&(s=c,n[c]=l(e,t),a=i.plus(n),a>t?(n[c]--,(e=i.plus(n))>t&&(a=e,n[c]--,e=i.plus(n))):e=a);return[e,n,a,s]}(e,t,r);const c=t-n,l=r.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===l.length&&(s<t&&(s=n.plus({[a]:1})),s!==n&&(i[a]=(i[a]||0)+c/(s-n)));const u=$t.fromObject(i,o);return l.length>0?$t.fromMillis(c,o).shiftTo(...l).plus(u):u}(i?this:e,i?e:this,n,o);var a;return i?s.negate():s}diffNow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.diff(Zr.now(),e,t)}until(e){return this.isValid?Jt.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;const r=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(t)<=r&&r<=o.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;const t=e.base||Zr.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0;let o=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(o=e.unit,n=void 0),Kr(t,this.plus(r),{...e,numeric:"always",units:o,unit:n})}toRelativeCalendar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?Kr(e.base||Zr.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every(Zr.isDateTime))throw new c("min requires all arguments be DateTimes");return he(t,(e=>e.valueOf()),Math.min)}static max(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every(Zr.isDateTime))throw new c("max requires all arguments be DateTimes");return he(t,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{locale:o=null,numberingSystem:n=null}=r;return fr(X.fromOpts({locale:o,numberingSystem:n,defaultToEN:!0}),e,t)}static fromStringExplain(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Zr.fromFormatExplain(e,t,r)}static get DATE_SHORT(){return d}static get DATE_MED(){return f}static get DATE_MED_WITH_WEEKDAY(){return h}static get DATE_FULL(){return m}static get DATE_HUGE(){return y}static get TIME_SIMPLE(){return v}static get TIME_WITH_SECONDS(){return _}static get TIME_WITH_SHORT_OFFSET(){return b}static get TIME_WITH_LONG_OFFSET(){return S}static get TIME_24_SIMPLE(){return E}static get TIME_24_WITH_SECONDS(){return T}static get TIME_24_WITH_SHORT_OFFSET(){return w}static get TIME_24_WITH_LONG_OFFSET(){return C}static get DATETIME_SHORT(){return M}static get DATETIME_SHORT_WITH_SECONDS(){return R}static get DATETIME_MED(){return A}static get DATETIME_MED_WITH_SECONDS(){return O}static get DATETIME_MED_WITH_WEEKDAY(){return I}static get DATETIME_FULL(){return P}static get DATETIME_FULL_WITH_SECONDS(){return j}static get DATETIME_HUGE(){return D}static get DATETIME_HUGE_WITH_SECONDS(){return N}}function Xr(e){if(Zr.isDateTime(e))return e;if(e&&e.valueOf&&ge(e.valueOf()))return Zr.fromJSDate(e);if(e&&"object"==typeof e)return Zr.fromObject(e);throw new c(`Unknown datetime argument: ${e}, of type ${typeof e}`)}t.DateTime=Zr,t.Duration=$t,t.FixedOffsetZone=ee,t.IANAZone=W,t.Info=Zt,t.Interval=Jt,t.InvalidZone=te,t.Settings=ue,t.SystemZone=L,t.VERSION="3.4.3",t.Zone=U},938:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.convertConnectionObject=t.reloadAllTabs=t.isBrowserWindowOpen=t.getOpenBrowserWindowCount=t.sleep=t.compareUrls=t.asyncRetryWithIncrementalDelay=t.waitForTabToLoad=t.getTabById=t.chromeIdentityGetAuthToken=t.executeScriptWrapper=t.isMv2Build=t.urlHasQueryParameters=t.stringIsEmpty=t.getActiveTab=t.captureScreenshot=t.ScreenshotRateLimitError=t.roughSizeOfObject=t.getStorage=t.configEndUnix=t.periodToNextDate=t.findSoonestStartingPeriod=t.getCurrentTimeForTimezone=t.find_active_period=t.DAY_INT_TO_STR_MAP=t.DAY_STR_TO_INT_MAP=t.getClassOwner=t.getTeacherIds=t.extractRequestUri=t.validURL=t.extractPort=t.extractURLPath=t.nowInSeconds=t.extractHostname=t.extractDomain=t.safeMapGet=t.is_active=t.removeHttp=t.isEmpty=void 0;const i=r(31),s=n(r(241)),a=r(558);t.isEmpty=e=>!e||!Object.keys(e).some((t=>void 0!==e[t])),t.removeHttp=e=>e.replace(/^https?:\/\//,""),t.is_active=(e,t)=>c(e,t),t.safeMapGet=(e,t,r)=>{var o;return null!==(o=e[t])&&void 0!==o?o:r},t.extractDomain=e=>{if(!(0,t.validURL)(e))return;let r=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0];return r=r.split(":")[0],r},t.extractHostname=e=>{if(!(0,t.validURL)(e))return;let r=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0];return r=r.split(":")[0],r=r.split("?")[0],r},t.nowInSeconds=()=>Math.floor(Date.now()/1e3),t.extractURLPath=e=>{if(!(0,t.validURL)(e))return;let r,o;if(e.indexOf("//")>0){const t=e.indexOf("//");o=e.indexOf("/",t+2),o>0&&(r=e.substring(o+1))}else o=e.indexOf("/"),o>0&&(r=e.substring(e.indexOf("/")+1));return o<0&&(r=""),"/"===(null==r?void 0:r.slice(-1))&&(r=r.slice(0,-1)),r},t.extractPort=function(e){if(!(0,t.validURL)(e))return;const r=Number((0,t.extractRequestUri)(e).split("/")[0].replace(":",""));return!isNaN(r)&&r>0?r:e.startsWith("https")?443:e.startsWith("http")?80:e.startsWith("ftp")?21:0},t.validURL=e=>{if((0,t.stringIsEmpty)(e))return!1;try{return new URL(e),!0}catch(t){return console.error(`Invalid URL: ${e}`),!1}},t.extractRequestUri=e=>{if(!(0,t.validURL)(e))return;const r=(0,t.extractHostname)(e);return r?e.substring(e.indexOf(r)+r.length):""};const c=(e,r)=>{const o=(0,t.nowInSeconds)();return 0!==r.timeout&&r.timeout>o||!!(0,t.find_active_period)(e,r.periods)};t.getTeacherIds=e=>{let t=[];const r=e.teachers;return r&&(t=r.map((e=>e.id))),t},t.getClassOwner=e=>{const t=e.teacher_information;return t&&t.id?t.id:null},t.DAY_STR_TO_INT_MAP=(new Map).set("sun",0).set("mon",1).set("tue",2).set("wed",3).set("thur",4).set("fri",5).set("sat",6),t.DAY_INT_TO_STR_MAP=(new Map).set(7,"sun").set(1,"mon").set(2,"tue").set(3,"wed").set(4,"thur").set(5,"fri").set(6,"sat"),t.find_active_period=(e,r)=>{if(r){const o=i.DateTime.now().setZone(e),n=t.DAY_INT_TO_STR_MAP.get(o.weekday),s=100*o.hour+o.minute;for(const e of r)if(e.day===n&&s>=e.startTime&&s<e.endTime)return e}return null},t.getCurrentTimeForTimezone=(e,r=(0,t.nowInSeconds)())=>i.DateTime.fromSeconds(r).setZone(e).toJSDate(),t.findSoonestStartingPeriod=(e,r)=>{if(!r.length)return null;const o=(0,t.getCurrentTimeForTimezone)(e),n=r.filter((e=>!!e));if(0===n.length)return null;let i=n[0],s=(0,t.periodToNextDate)(o,n[0].startTime,n[0].day);return n.forEach((e=>{const r=(0,t.periodToNextDate)(o,e.startTime,e.day);r<s&&(i=e,s=r)})),{soonestPeriod:i,msUntilStart:s.valueOf()-o.valueOf()}},t.periodToNextDate=(e,r,o)=>{const n=i.DateTime.now().toJSDate(),s=Math.floor(r/100),a=r%100;n.setHours(s,a,0,0);const c=e.getDate();let l=e.getDate();if(o){const r=t.DAY_STR_TO_INT_MAP.get(o)-e.getDay();l=r>0?c+r:0===r&&n>e?c:c+7-r}else n<e&&(l=c+1);return n.setDate(l),n},t.configEndUnix=(e,r)=>{let o=r.timeout;const n=(0,t.find_active_period)(e,r.periods);if(n){const t=i.DateTime.now().setZone(e).set({hour:n.endTime/100,minute:n.endTime%100,second:0,millisecond:0}).toUnixInteger();o=Math.max(o,t)}return o},t.getStorage=(e,t)=>{chrome.storage.local.get([e],(e=>{t(e)}))},t.roughSizeOfObject=e=>{const t=[],r=[e];let o=0;for(;r.length;){const e=r.pop();if("boolean"==typeof e)o+=4;else if("string"==typeof e)o+=2*e.length;else if("number"==typeof e)o+=8;else if(e.byteLength>0)o+=e.byteLength;else if("object"==typeof e&&-1===t.indexOf(e)){t.push(e);for(const t in e)r.push(e[t])}}return o};class l extends Error{}t.ScreenshotRateLimitError=l,t.captureScreenshot=(e,t)=>new Promise(((r,o)=>{chrome.tabs.captureVisibleTab(e,{format:"jpeg",quality:t},(t=>{var n;if(chrome.runtime.lastError)return(null===(n=chrome.runtime.lastError.message)||void 0===n?void 0:n.includes("MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND"))?void o(new l("Exceeded MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND")):void o(chrome.runtime.lastError);chrome.tabs.query({active:!0,windowId:e},(e=>{1===e.length?r({image:t,tabId:e[0].id}):r({image:t,tabId:void 0})}))}))})),t.getActiveTab=()=>o(void 0,void 0,void 0,(function*(){return(yield chrome.tabs.query({active:!0,currentWindow:!0}))[0]})),t.stringIsEmpty=e=>!(null==e?void 0:e.trim().length),t.urlHasQueryParameters=e=>-1!==e.indexOf("?"),t.isMv2Build=()=>{var e,t;return(null===(e=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===e?void 0:e.getManifest)&&2===(null===(t=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===t?void 0:t.getManifest().manifest_version)},t.executeScriptWrapper=e=>o(void 0,void 0,void 0,(function*(){var r;try{if(!(0,t.isMv2Build)())return yield chrome.scripting.executeScript(e);if(e.files){let t=[];for(let r=0;r<e.files.length;r++){const o=e.files[r],n=yield chrome.tabs.executeScript(e.target.tabId,{file:o});t=t.concat(n)}return t}if(e.func){const t="lwScriptInjectFunction",r="lwScriptInjectFunctionArgs";let o=`var ${t} = ${e.func.toString()};\n`;return e.args&&(o+=`var ${r} = ${JSON.stringify(e.args)};\n`),o+=`${t}(${e.args?`...${r}`:""});`,yield chrome.tabs.executeScript(e.target.tabId,{code:o})}}catch(e){(null!==(r=null==e?void 0:e.message)&&void 0!==r?r:"").includes("Cannot access a chrome://")||console.error("Failed to execute script:",e.message)}})),t.chromeIdentityGetAuthToken=e=>o(void 0,void 0,void 0,(function*(){return new Promise((t=>chrome.identity.getAuthToken(e,t)))})),t.getTabById=e=>o(void 0,void 0,void 0,(function*(){try{return yield chrome.tabs.get(e)}catch(e){}})),t.waitForTabToLoad=e=>new Promise((r=>{(0,t.getTabById)(e).then((t=>{if("complete"!==(null==t?void 0:t.status)){const t=(o,n)=>{o===e&&"complete"===(null==n?void 0:n.status)&&(chrome.tabs.onUpdated.removeListener(t),r())};chrome.tabs.onUpdated.addListener(t)}else r()}))})),t.asyncRetryWithIncrementalDelay=(e,r=3,n=1e3,i=5e3)=>o(void 0,void 0,void 0,(function*(){let o=0;for(;o<r;)try{const t=e(),r=new Promise(((e,t)=>{setTimeout((()=>t(new Error("Function timed out"))),i)})),n=yield Promise.race([t,r]);if(!n)throw Error("Retry failed:"+o);return n}catch(e){o++,yield(0,t.sleep)(o*n)}throw Error(`Function failed after ${r} retries`)})),t.compareUrls=(e,t,r={stripProtocol:!0})=>(0,s.default)(e,r)===(0,s.default)(t,r),t.sleep=e=>new Promise((t=>setTimeout(t,e))),t.getOpenBrowserWindowCount=()=>o(void 0,void 0,void 0,(function*(){return(yield chrome.windows.getAll()).length})),t.isBrowserWindowOpen=()=>o(void 0,void 0,void 0,(function*(){return(yield(0,t.getOpenBrowserWindowCount)())>0})),t.reloadAllTabs=(e=!1)=>o(void 0,void 0,void 0,(function*(){const t=yield chrome.tabs.query({});for(const r of t)r.id&&chrome.tabs.reload(r.id,{bypassCache:e})})),t.convertConnectionObject=e=>{const t=new a.Connection;return t.setAppFilteringDenied(e.app_filtering_denied),t.setCategoryid(e.categoryId),t.setDestip(e.destIp),t.setDestport(e.destPort),t.setDownload(e.download),t.setFinalConnectionObject(e.final_connection_object),t.setHwaddress(e.hwAddress),t.setHttphost(e.httpHost||""),t.setHttpRequestUrisList(e.http_request_uris),t.setLifetime(e.lifetime),t.setNoise(e.noise),t.setPackets(e.packets),t.setProtocol(e.protocol||0),t.setSourceip(e.sourceIp),t.setSubcategoryid(e.subCategoryId),t.setTag(e.tag),t.setTime(e.time),t.setUpload(e.upload),t.setUser(e.user||""),t.setVerdictApplicationRule(e.verdict_application_rule),t.setReportingtype(e.reportingType),t.setExtensionconnection(e.extensionConnection),t.setHostname(e.htmlTitle||""),t.setId(e.id),t.setAgent(e.agent||""),t.setHardware(String(e.agent_inside_network)),t.setTeacherid(e.teacherId),t.setResourceType(e.resource_type||""),t.setBypassCode(e.bypass_code||""),t.setBypassExpiryTime(e.bypass_expiry_time||0),t.setHtmltitle(e.htmlTitle||""),t.setAgentInsideNetwork(e.agent_inside_network||!1),t.setFilterType(e.filter_type||""),t.setDebugChromeVerdictIssued(e.debug__chrome_verdict_issued||!1),t.setDebugChromeRequestid(e.debug__chrome_requestId||""),t}},379:(e,t)=>{"use strict";var r,o,n,i,s,a,c,l,u,p,g,d,f,h,m,y,v,_;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserTypes=t.youtubeStrictSafesearch=t.companionWebGrpcUrl=t.CompanionFeatures=t.MessageTypes=t.LogLevel=t.LogLevelTypes=t.EventTypes=t.UniqueScheduleIds=t.SchedulesConstants=t.ScreenshotPersisterConstants=t.ConnectionsConstants=t.AuthenticateConstants=t.DelegationReporting=t.DelegationConstants=t.SystemConfigConstants=t.CompanionConstants=t.MainConstants=t.TabsConstants=t.ConfigFetcherConstants=t.ChatConstants=t.ConfigConstants=t.VerdictStoreConstants=t.FilteringConstants=t.UpdaterConstants=void 0,(_=t.UpdaterConstants||(t.UpdaterConstants={})).FcmMessagesCacheId="lw_updater_fcm_messages_cache_id",_.GeneralCacheId="lw_updater_general_cache_id",_.RegistrationCacheId="lw_updater_registration_cache",_.CheckInDevice="lw_check_in_device_for_fleet_management",_[_.CheckInDeviceElapsed_ms=3e5]="CheckInDeviceElapsed_ms",(v=t.FilteringConstants||(t.FilteringConstants={})).HandleVerdictQueueInterval="lw_handle_verdict_queue_interval",v.EvictOldResponsesInterval="lw_evict_old_responses",v.VerdictRawResponseCacheId="lw_verdict_raw_response_cache",v.FallbackVerdictsCacheId="lw_fallback_verdicts_cache",v.VerdictResponseTimeCacheId="verdict_response_time_cache",v.VerdictYoutubeQueryCacheId="verdict_youtube_query_cache",v.VerdictClientFallback="client_fallback",v.CustomHeaderCacheId="lw_custom_header_cache",v.CustomHeaderCacheCleanIntervalId="lw_custom_header_cache_interval_id",v[v.CustomHeaderCacheCleanInterval=3e5]="CustomHeaderCacheCleanInterval",v[v.CustomHeaderCacheExpireTime=36e5]="CustomHeaderCacheExpireTime",(y=t.VerdictStoreConstants||(t.VerdictStoreConstants={})).EvictOldResponsesInterval="lw_evict_old_responses",y.VerdictResponseCacheId="lw_verdict_response_cache",(m=t.ConfigConstants||(t.ConfigConstants={})).ConfigurationCacheId="lw_configuration_cache",m[m.ConfigLoadTimeout_ms=1e4]="ConfigLoadTimeout_ms",(h=t.ChatConstants||(t.ChatConstants={})).ChatDataCacheId="lw_chat_data_cache",h.OpenChatTimeout="lw_open_chat_timeout",(t.ConfigFetcherConstants||(t.ConfigFetcherConstants={})).ClassConfigRefreshTimeout="lw_class_config_refresh",(f=t.TabsConstants||(t.TabsConstants={})).FocusLockCheckTimeout="lw_tabs_focuslock_check",f.ScreenshotUploadInterval="lw_screenshot_upload_interval",f.TabsDataCacheId="lw_tabs_data_cache",(d=t.MainConstants||(t.MainConstants={})).PeriodicLoginInterval="lw_periodic_login",d.WhoamiLoginInterval="lw_whoami_login",d.FzboxPollInterval="lw_fzbox_poll",d.MainDataCacheId="lw_main_data_cache",d.DevDataCacheId="lw_dev_data_cache",d.LoadingConfiKey="lw_loading_config_key",d.RemainingUpdatesKey="lw_remaining_updates_key",d.DevBuildReloadedKey="lw_dev_build_reloaded_key",d[d.ResourceLimitThresholdCheckInterval=72e5]="ResourceLimitThresholdCheckInterval",(g=t.CompanionConstants||(t.CompanionConstants={})).CacheId="lw_companion_cache",g[g.MaxReconnectionAttempts=5]="MaxReconnectionAttempts",g[g.DeltaTimeout=5e3]="DeltaTimeout",g[g.MaxRetryRegistrationInterval_ms=3e4]="MaxRetryRegistrationInterval_ms",(t.SystemConfigConstants||(t.SystemConfigConstants={})).CacheId="lw_system_config_cache",(p=t.DelegationConstants||(t.DelegationConstants={})).CacheId="lw_delegation_config_cache",p.DelegationChangeScheduleId="lw_delegation_change_schedule_id",(u=t.DelegationReporting||(t.DelegationReporting={})).ALL="all",u.BLOCKED="blocked",u.NONE="none",(t.AuthenticateConstants||(t.AuthenticateConstants={})).PartialFailedCacheId="lw_partial_failed_cache",(l=t.ConnectionsConstants||(t.ConnectionsConstants={})).ConnectionsCacheId="lw_connections_cache",l.ConnectionsUploadInterval="lw_Connections_upload_interval",l.TabsCacheId="lw_tabs_cache",l.UploadInfoCacheId="lw_upload_info_cache",l.mainFrameRequestType="main_frame",l.eventTypeSendHeaders="sendHeaders",l.eventTypeBeforeRequest="beforeRequest",l.eventTypeHeadersReceived="headersReceived",l.eventTypeCompleted="completed",(t.ScreenshotPersisterConstants||(t.ScreenshotPersisterConstants={})).LastScreenshotCacheId="last_screenshot_cache",(t.SchedulesConstants||(t.SchedulesConstants={})).SchedulesDataCacheId="lw_schedule_manager_data_cache_id",(c=t.UniqueScheduleIds||(t.UniqueScheduleIds={})).ConfigUpdate="config_update_with_delay",c.CaptureTabAndSend="capture_tab_and_send",c.SendRuntimeMessage="send_runtime_message",c.PrintBlockedMessage="print_blocked_message",c.CreateNewChromeTab="create_new_chrome_tab",(a=t.EventTypes||(t.EventTypes={})).CONFIG_UPDATE="CONFIG_UPDATE",a.OPEN_TAB="OPEN_TAB",a.CLOSE_TAB="CLOSE_TAB",a.MESSAGE="MESSAGE",a.CLASS_STARTED="CLASS_STARTED",a.POLICY_UPDATE="POLICY_UPDATE",a.INIT_P2P="INIT_P2P",(s=t.LogLevelTypes||(t.LogLevelTypes={})).Error="logging__error",s.Warning="logging__warning",s.Message="logging__message",s.Debug="logging__debug",(i=t.LogLevel||(t.LogLevel={})).INFO="INFO",i.WARN="WARN",i.ERROR="ERROR",i.DEBUG="DEBUG",(n=t.MessageTypes||(t.MessageTypes={})).InitOffscreenDocument="init_offscreen_socument_message",n.RegisterExtension="register_extension_with_native_agent",n.UnregisterExtension="unregister_extension_from_native_agent",n.RegisterClasswizeEventFail="register_extension_with_native_agent_classwize_events_fail",n.RegisterClasswizeEventMessage="register_extension_with_native_agent_classwize_events_Message",n.IsExtensionRegistered="is_extension_registered_with_native_agent",n.CompanionMessage="message_from_native_agent",n.CompanionErrorMessage="error_message_from_native_agent",n.RecoverCompanionStream="recover_companion_stream",n.RetryRegistration="retry_registration_with_native_agent",n.IpAddressChangeRoutine="ip_address_change_routine",n.TabsActivated="tabs_activated_message",n.UrlUpdatedInTab="url_updated_in_tab",n.P2PInitSignaler="p2p_init_signaler_message",n.P2PSetCloseTimeouts="p2p_set_close_timeouts_message",n.P2PGetScreenshot="p2p_get_screenshot_message",n.P2PGetTabs="p2p_get_tabs_message",n.UtilLocalIpUpdated="util_local_ip_updated_message",n.UtilResizeAndCompressImage="util_resize_and_compress_image",n.BroadcastWakeUpCall="cachescheduler_broadcast_wakeup_call",n.BroadcastScheduleTime="schedule-time-ee236fce-1426-4975-9d56-2ce4e8becd02",n.ChatBubbleStatus="chat_status",n.ChatInfo="chat_info",n.ChatGetLastMessage="last_chat_message",n.ChatClearLastMessage="clear_last_chat_message",n.UIGetStatus="ui_get_status",n.UIReloadConfig="ui_reload_config",n.UISendLogs="ui_send_logs",n.UpdaterNewMessage="updater_new_message",n.GetSafeguardVerdict="get_safe_guard_verdict",n.RedirectWebPage="redirect_web_page",n.EventMessage="event_service_message",n.InitAutoAuth="init_auto_auth",n.GetAuthCookie="get_auth_cookie",n.UploadLogData="upload_log_data",n.UpdateOffscreenConfig="update_offscreen_config",n.MainConfigUpdated="main_config_updated",n.OffScreenLogMessage="Off_screen_log_message",n.GetManifestInfo="get_manifest_info",n.Token="TOKEN",n.ChatConfigUpdate="CHAT_CONFIG_UPDATE",n.UpdateTotalUnreadCount="UPDATE_TOTAL_UNREAD_COUNT",n.OpenChatClassroom="OPEN_CHAT_CLASSROOM",n.GoogleAuthenticate="GOOGLE_AUTHENTICATE",n.NativeTokenAuthenticate="NATIVE_TOKEN_AUTHENTICATE",n.GetBrowserType="get_browser_type",n.LogMessage="log_message",(o=t.CompanionFeatures||(t.CompanionFeatures={})).companion="companion",o.companionLite="companion_lite",o.proxyFilter="proxy_filter",o.dns_filter="dns_filter",o.classroom="classroom",o.liteModeEnabled="companion-mode-lite-enabled",t.companionWebGrpcUrl="http://127.0.0.1:5769",t.youtubeStrictSafesearch="STRICT",(r=t.BrowserTypes||(t.BrowserTypes={})).chrome="chrome",r.edge="edge"},775:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(201),s=r(462),a=r(22),c=r(115),l=r(379),u=n(r(171)),p=n(r(16));class g extends u.default{connect(){g.isConnected||g.connectToClasswizeStream()}disconnect(e=!1){g.keepReconnecting=e,g.closeStream()}static connectToClasswizeStream(){(0,c.logging__message)("Connecting to Classwize Event Service"),g.eventStream=g.eventClient.receiveEvents(new s.Empty),g.keepReconnecting=!0,g.eventStream.on("data",(e=>{var t;const r=null===(t=e.getMessages())||void 0===t?void 0:t.toObject();if(r){const e=Object.keys(a.EventType).find((e=>a.EventType[e]===r.event));g.handleClasswizeEvent(l.EventTypes[e],r)}})).on("end",(e=>{(0,c.logging__warning)(`end: ${e}`),0!=(null==e?void 0:e.code)&&((0,c.logging__warning)("Classwize Event Service stream has been terminated"),g.keepReconnecting&&g.reconnectToClasswize())})),g.isConnected=!0}static reconnectToClasswize(){return o(this,void 0,void 0,(function*(){g.closeStream(),setTimeout((()=>{1===p.default.getActiveEventServiceType()&&g.connectToClasswizeStream()}),1e3)}))}static closeStream(){g.isConnected&&(g.eventStream.cancel(),g.isConnected=!1)}static handleClasswizeEvent(e,t){let r={};try{r=JSON.parse(t.value)}catch(e){r={}}u.default.sendEventToServiceWorker(e,r)}}t.default=g,g.eventClient=new i.ClasswizeApiClient(l.companionWebGrpcUrl),g.isConnected=!1,g.keepReconnecting=!0},917:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionClient=void 0;const i=r(887),s=r(215),a=r(379),c=r(259),l=n(r(16));class u{static registerExtension(){return o(this,void 0,void 0,(function*(){const e=yield c.OffscreenManager.sendMesage({type:a.MessageTypes.GetManifestInfo});return!!e&&(yield this.registrationHandler(e.name,e.version))}))}static registrationHandler(e,t){return o(this,void 0,void 0,(function*(){if(this.isConnected)return;const r=new i.CompanionRegistrationRequest;return r.setName(e),r.setVersion(t),this.keepReconnecting=!0,this.companionStream=this.companionClient.registerCompanion(r),new Promise((e=>{this.companionStream.on("data",(t=>{var r,o;this.nReconnectionAttempts=0;const n=t.getVersion(),i=null!==(o=null===(r=t.getEnrolmentdetails())||void 0===r?void 0:r.toObject())&&void 0!==o?o:void 0;let s=!1,p=!1;i&&u.isValidEnrolmentDetails(i)&&(s=!0,p=i.enabledfeaturesList.includes(a.CompanionFeatures.companion)),s&&l.default.setActiveEventServiceClient(1),c.OffscreenManager.sendMesage({type:a.MessageTypes.CompanionMessage,nativeAgentVersion:n,enrolmentDetails:i,companionStatus:{companionAvailable:!0,companionEnrolled:s,companionEnabled:p}}),this.isConnected||(this.isConnected=!0,e(!0))})).on("end",(t=>{0!=(null==t?void 0:t.code)&&(c.OffscreenManager.sendMesage({type:a.MessageTypes.CompanionErrorMessage,status:t,extensionIsRegistered:u.isConnected}),l.default.setActiveEventServiceClient(0),this.keepReconnecting&&this.reconnectToNativeAgent(),this.isConnected||e(!1))}))}))}))}static unregisterExtension(e=!1){this.keepReconnecting=e;const t=u.isConnected;this.closeStream(),c.OffscreenManager.sendMesage({type:a.MessageTypes.CompanionErrorMessage,extensionIsRegistered:t}),l.default.setActiveEventServiceClient(-1)}static isValidEnrolmentDetails(e){return!!(e&&e.username&&e.applianceid&&e.devicetoken&&e.region&&e.enabledfeaturesList)}static reconnectToNativeAgent(){return o(this,void 0,void 0,(function*(){this.closeStream(),setTimeout((()=>{this.keepReconnecting&&u.registerExtension()}),u.getReconnectionTimeout())}))}static closeStream(){this.isConnected&&(this.companionStream.cancel(),this.isConnected=!1)}static getReconnectionTimeout(){return this.nReconnectionAttempts>=a.CompanionConstants.MaxReconnectionAttempts?(this.nReconnectionAttempts=0,a.CompanionConstants.MaxRetryRegistrationInterval_ms):(this.nReconnectionAttempts++,this.nReconnectionAttempts*a.CompanionConstants.DeltaTimeout)}static connected(){return this.isConnected}static getCompanionClient(){return this.companionClient}}t.CompanionClient=u,u.companionClient=new s.CompanionApiClient(a.companionWebGrpcUrl),u.isConnected=!1,u.keepReconnecting=!0,u.nReconnectionAttempts=0},606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionModeReportingClient=void 0;const o=r(379),n=r(887),i=r(215);class s{static init(){this.consoleLogStream=new i.CompanionApiClient(o.companionWebGrpcUrl).consoleLogStream(),this.initialised=!0}static sendConsoleLogToNativeAgent(e,t){this.initialised||this.init();const r=new n.ConsoleLog;r.setLog(e),r.setLoglevel(t),this.consoleLogStream.write(r)}}t.CompanionModeReportingClient=s,s.initialised=!1},16:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(r(775)),i=o(r(245)),s=r(115);class a{static getEventClient(e){switch(a.activeEventSourceType=e,e){case 0:return a.eventServiceClient;case 1:return a.classwizeServiceClient;default:return void(0,s.logging__debug)(`No event client available for this type: ${e}`)}}static getActiveEventServiceType(){return a.activeEventSourceType}static reconnectToEventSourceIfneeded(e,t){const r=0===a.activeEventSourceType&&((null==e?void 0:e.user)!==(null==t?void 0:t.user)||(null==e?void 0:e.deviceId)!==(null==t?void 0:t.deviceId)||(null==e?void 0:e.eventServiceUrl)!==(null==t?void 0:t.eventServiceUrl));a.setActiveEventServiceClient(a.getActiveEventServiceType(),r)}static setActiveEventServiceClient(e,t=!1){(a.getActiveEventServiceType()!==e||t)&&(a.activeEventClient&&a.activeEventClient.disconnect(),a.activeEventClient=a.getEventClient(e),a.activeEventClient&&a.activeEventClient.connect())}}t.default=a,a.activeEventSourceType=0,a.eventServiceClient=i.default.generate(),a.classwizeServiceClient=n.default.generate()},245:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(194),s=r(115),a=r(379),c=r(259),l=r(938),u=n(r(171));class p extends u.default{connect(){p.intiateServiceConnection()}disconnect(){p.disconnectFromEventService()}static disconnectFromEventService(){(0,s.logging__message)("Disconnecting from Event V2 Service"),p.eventService&&(p.eventService.close(),p.eventService=void 0)}static intiateServiceConnection(){return o(this,void 0,void 0,(function*(){const e=c.OffscreenManager.getOffscreenConfig();if(!e)return(0,s.logging__warning)("User config does not exist"),void p.disconnectFromEventService();const t=e.user,r=e.deviceId,n=e.eventServiceUrl,u=(0,l.stringIsEmpty)(t),g=(0,l.stringIsEmpty)(r),d=(0,l.stringIsEmpty)(n);if(u||g||d)return(0,s.logging__warning)("User details are not valid"),(0,s.logging__debug)(`Details ==> user: ${t}, device: ${r}, eventServiceUrl: ${n}`),void p.disconnectFromEventService();const f=`${n}/events/v2/appliance/${r}/recipient/${t}?events=${e.isTeacher?"CONFIG_UPDATE":"CONFIG_UPDATE,OPEN_TAB,CLOSE_TAB,MESSAGE,CLASS_STARTED,POLICY_UPDATE,INIT_P2P"}`;void 0===p.eventService?((0,s.logging__message)("Connecting to v2 Event Service"),p.eventService=new EventSource(f,{withCredentials:!0}),p.eventService.onerror=function(e){return o(this,void 0,void 0,(function*(){(0,s.logging__error)("Error with event service",e),p.disconnectFromEventService();const t=yield p.getAuthCookie();if(!p.eventServiceRetriedWithExistingAuth&&t){const e=(0,i.getRandomInt)(0,5);(0,s.logging__message)(`Retrying with existing auth in ${e} seconds`),setTimeout(p.retryEventServiceWithExistingAuth,1e3*e)}else if(p.eventServiceRetriedWithNewAuth)p.retryEventServiceAfterTimeout();else{let e=0;const t=(new Date).toDateString();p.lastAuthAttemptDate&&p.lastAuthAttemptDate===t||(e=(0,i.getRandomInt)(0,5)),p.lastAuthAttemptDate=t,(0,s.logging__message)(`Retrying with new auth in ${e} seconds`),setTimeout(p.retryEventServiceWithNewAuth,1e3*e)}}))},p.eventService.onopen=function(){(0,s.logging__message)("Connected to event-service"),p.eventServiceRetriedWithExistingAuth=!1,p.eventServiceRetriedWithNewAuth=!1,clearTimeout(p.reauthTimeoutId),p.eventServiceRetryTimeoutSeconds=1},p.eventService.addEventListener(a.EventTypes.CONFIG_UPDATE,(function(e){p.handleNewEvent(a.EventTypes.CONFIG_UPDATE,e)}),!1),p.eventService.addEventListener(a.EventTypes.OPEN_TAB,(function(e){p.handleNewEvent(a.EventTypes.OPEN_TAB,e)}),!1),p.eventService.addEventListener(a.EventTypes.CLOSE_TAB,(function(e){p.handleNewEvent(a.EventTypes.CLOSE_TAB,e)}),!1),p.eventService.addEventListener(a.EventTypes.MESSAGE,(function(e){p.handleNewEvent(a.EventTypes.MESSAGE,e)}),!1),p.eventService.addEventListener(a.EventTypes.CLASS_STARTED,(function(e){p.handleNewEvent(a.EventTypes.CLASS_STARTED,e)}),!1),p.eventService.addEventListener(a.EventTypes.POLICY_UPDATE,(function(e){setTimeout((()=>{p.handleNewEvent(a.EventTypes.POLICY_UPDATE,e)}),1e3)}),!1),p.eventService.addEventListener(a.EventTypes.INIT_P2P,(function(e){p.handleNewEvent(a.EventTypes.INIT_P2P,e)}),!1)):(0,s.logging__message)("aborting connection attempt to event service, already connected")}))}static retryEventServiceWithExistingAuth(){return o(this,void 0,void 0,(function*(){try{p.eventServiceRetriedWithExistingAuth=!0,p.intiateServiceConnection()}catch(e){p.retryEventServiceAfterTimeout()}}))}static retryEventServiceWithNewAuth(){return o(this,void 0,void 0,(function*(){try{yield p.initAutoAuth();const e=p.getReauthAllowedTimer();p.reauthTimeoutId=setTimeout((()=>{p.eventServiceRetriedWithNewAuth=!1}),1e3*e+p.getReauthJitterMs()),p.eventServiceRetriedWithNewAuth=!0,p.intiateServiceConnection()}catch(e){(0,s.logging__error)("Failed to authenticate before retrying to connect to event-service, triggering events retry again after timeout"),p.retryEventServiceAfterTimeout()}}))}static retryEventServiceAfterTimeout(){(0,s.logging__warning)("v2 Event service connect error; sleeping for "+p.eventServiceRetryTimeoutSeconds+" seconds"),p.eventServiceRetryTimeoutSeconds*=2,p.eventServiceRetryTimeoutSeconds>=64&&(p.eventServiceRetryTimeoutSeconds=64),setTimeout(p.intiateServiceConnection,1e3*p.eventServiceRetryTimeoutSeconds)}static initAutoAuth(){return o(this,void 0,void 0,(function*(){yield c.OffscreenManager.sendMesage({type:a.MessageTypes.InitAutoAuth})}))}static getAuthCookie(){return o(this,void 0,void 0,(function*(){return c.OffscreenManager.sendMesage({type:a.MessageTypes.GetAuthCookie})}))}static handleNewEvent(e,t){p.eventServiceRetryTimeoutSeconds=1,(0,s.logging__debug)("Event Message Received",t);let r={};try{r=JSON.parse(t.data)}catch(e){r={},(0,s.logging__error)("Error parsing the event data",e)}u.default.sendEventToServiceWorker(e,r)}static getReauthAllowedTimer(){return p.reauthAllowedTimerSeconds||p.REAUTH_ALLOWED_TIMER_SECONDS}static getReauthJitterMs(){return(0,i.getRandomInt)(0,9e4)}}t.default=p,p.REAUTH_ALLOWED_TIMER_SECONDS=600,p.reauthAllowedTimerSeconds=p.REAUTH_ALLOWED_TIMER_SECONDS,p.eventService=void 0,p.eventServiceRetryTimeoutSeconds=1,p.eventServiceRetriedWithExistingAuth=!1,p.eventServiceRetriedWithNewAuth=!1,p.reauthTimeoutId=void 0,p.lastAuthAttemptDate=void 0},171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(379),n=r(259);t.default=class{static generate(){return new this}static sendEventToServiceWorker(e,t){n.OffscreenManager.sendMesage({type:o.MessageTypes.EventMessage,eventType:e,data:t})}}},259:function(e,t,r){"use strict";var o,n,i,s=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OffscreenManager=void 0;const c=r(917),l=r(379),u=a(r(668)),p=r(194),g=a(r(16)),d=a(r(474));class f{static init(e=!1,t){f.initialised||(f.initialised=!0,console.log("Initiating the offscreen doc..."),f.isMv2=e,f.registerEventHandlers(),f.sendMessageCallback=t,u.default.init())}static getOffscreenConfig(){return f.offscreenConfig}static offscreenConfigUpdated(e,t){g.default.reconnectToEventSourceIfneeded(e,t)}static sendLocalIpMessage(e){f.sendMesage({type:l.MessageTypes.UtilLocalIpUpdated,localIpAddress:e})}static registerEventHandlers(){f.isMv2||chrome.runtime.onMessage.addListener(((e,t,r)=>f.handleMesage(e,r)))}static getUserIP(){f.localIpPeerConnection&&(f.localIpPeerConnection.onicecandidate&&(f.localIpPeerConnection.onicecandidate=null),f.localIpPeerConnection=void 0),f.localIpPeerConnection=(0,p.getLocalIpPeerConnection)(f.sendLocalIpMessage)}static handleMesage(e,t){let r=!1;switch(e.type){case l.MessageTypes.InitOffscreenDocument:f.init();break;case l.MessageTypes.RegisterExtension:c.CompanionClient.registerExtension().then(t),r=!0;break;case l.MessageTypes.UnregisterExtension:c.CompanionClient.unregisterExtension();break;case l.MessageTypes.LogMessage:d.default.processLogMessage(e.msg,e.logLevel);break;case l.MessageTypes.UploadLogData:(()=>{s(this,void 0,void 0,(function*(){const r=yield d.default.uploadLogData(e.filename);t(r)}))})(),r=!0;break;case l.MessageTypes.IpAddressChangeRoutine:f.getUserIP();break;case l.MessageTypes.UpdateOffscreenConfig:{const t=f.offscreenConfig;f.offscreenConfig=e.config,f.offscreenConfigUpdated(t,e.config);break}case l.MessageTypes.GetBrowserType:t((0,p.getBrowserType)());break;case l.MessageTypes.P2PInitSignaler:u.default.initSignaler(e.signalToken,e.channelName,e.remotePeerId,e.peerId,e.iceServers);break;case l.MessageTypes.P2PSetCloseTimeouts:u.default.setCloseTimeouts(e.timezone,e.deviceChannelId,e.activeConfigurations);break;case l.MessageTypes.UtilResizeAndCompressImage:(()=>{s(this,void 0,void 0,(function*(){const r=yield(0,p.resizeAndCompressImage)(e.image,e.maxWidth,e.compressQuality);t({processedImage:r})}))})(),r=!0;break;case l.MessageTypes.BroadcastScheduleTime:f.isMv2&&setTimeout((()=>{f.sendMesage({type:l.MessageTypes.BroadcastWakeUpCall})}),e.timeInMs)}return f.isMv2&&!r&&t(),r}static sendMesage(e){return s(this,void 0,void 0,(function*(){return f.isMv2?yield new Promise((t=>{f.sendMessageCallback&&f.sendMessageCallback(e,(e=>t(e)))})):yield chrome.runtime.sendMessage(e)}))}}t.OffscreenManager=f,f.initialised=!1,f.isMv2=!1,(null===(o=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===o?void 0:o.getManifest)&&2===(null===(i=null===(n=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===n?void 0:n.getManifest())||void 0===i?void 0:i.manifest_version)||f.init()},474:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(379),i=r(917),s=r(606),a=r(953);class c{static processLogMessage(e,t){var r,o,l,u,p,g,d;if(c.lastSavedLog=a.LogStorageHandler.insertLogData(e),c.companionConnected!==i.CompanionClient.connected()&&(c.companionConnected=i.CompanionClient.connected(),c.companionConnected))for(;null===(r=c.lastLogWrittenToFile)||void 0===r?void 0:r.nextNode;){c.lastLogWrittenToFile=null!==(l=null===(o=c.lastLogWrittenToFile)||void 0===o?void 0:o.nextNode)&&void 0!==l?l:null;const e=null!==(p=null===(u=c.lastLogWrittenToFile)||void 0===u?void 0:u.data)&&void 0!==p?p:"";e&&s.CompanionModeReportingClient.sendConsoleLogToNativeAgent(e,n.LogLevel.INFO)}c.companionConnected&&(s.CompanionModeReportingClient.sendConsoleLogToNativeAgent(e,t),c.lastLogWrittenToFile=c.lastSavedLog),(null===(g=c.lastLogWrittenToFile)||void 0===g?void 0:g.deleted)&&(c.lastLogWrittenToFile=a.LogStorageHandler.getLogEntriesHead()),(null===(d=c.lastLogUploaded)||void 0===d?void 0:d.deleted)&&(c.lastLogUploaded=a.LogStorageHandler.getLogEntriesHead())}static uploadLogData(e){var t,r;return o(this,void 0,void 0,(function*(){const o=a.LogStorageHandler.uploadLogData(e,null!==(r=null===(t=c.lastLogUploaded)||void 0===t?void 0:t.nextNode)&&void 0!==r?r:null);return c.lastLogUploaded=c.lastSavedLog,o}))}}t.default=c,c.lastSavedLog=null,c.lastLogUploaded=null,c.lastLogWrittenToFile=null,c.companionConnected=!1},953:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogStorageHandler=void 0;const i=r(115),s=n(r(783));class a{static insertLogData(e){return this.logEntries.insert(e)}static uploadLogData(e,t){return o(this,void 0,void 0,(function*(){const r=`https://storage.googleapis.com/upload/storage/v1/b/test-bucket/o?uploadType=media&name=${e}`,o=this.getLogs(t);if(0===o.length)return!0;try{const e=yield fetch(r,{method:"POST",headers:{"Content-Type":"text/plain"},body:o});if(e.ok)return(0,i.logging__message)("Log data uploaded"),this.logEntries.clean(),!0;(0,i.logging__error)("Failed to upload log data",e.status)}catch(e){(0,i.logging__error)("Fetch threw an exception while uploading log data",e)}return!1}))}static storageIsEmpty(){return this.logEntries.empty()}static getLogEntriesHead(){return this.logEntries.getHeadNode()}static getLogs(e=null){return this.logEntries.toString(e)}static clean(){this.logEntries.clean()}}t.LogStorageHandler=a,a.logEntries=new s.default},783:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListNode=void 0;class r{constructor(e){this.nextNode=null,this.data=e,this.nextNode=null,this.deleted=!1}}t.ListNode=r,t.default=class{constructor(){this.head=null,this.tail=null,this.nMaxListEntries=2e3,this.nEntriesToDelete=500,this.linkedListSize=0}insert(e){const t=new r(e);if(0===this.linkedListSize)this.head=this.tail=t;else if(this.tail){if(this.linkedListSize>=this.nMaxListEntries)for(let e=0;e<this.nEntriesToDelete;e++)this.delete();this.tail.nextNode=t,this.tail=t}return this.linkedListSize++,t}clean(){for(;0!==this.linkedListSize;)this.delete()}empty(){return 0===this.linkedListSize}delete(){if(!this.head)return;if(this.head.deleted=!0,1===this.linkedListSize)return this.head=this.tail=null,void this.linkedListSize--;const e=this.head.nextNode;e&&(this.head=e,this.linkedListSize--)}size(){return this.linkedListSize}getHeadNode(){return this.head}toString(e=null){let t=this.head;null===e||e.deleted||(t=e);let r="";for(;t;)r+=t.data+"\n",t=t.nextNode;return r}}},668:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(135),i=o(r(513)),s=o(r(25)),a=r(938);class c{static init(){c.initialised||(c.initialised=!0)}static initSignaler(e,t,r,o,i){if(c.iceServers=i,!c.signalers[t]||["closed","failed"].includes(c.signalers[t].client.connection.state)){const r=new n.Signaler(e);c.signalers[t]=r,r.client.connect(),r.client.connection.once("closed",(()=>{delete c.signalers[t]})),r.client.connection.once("failed",(e=>{delete c.signalers[t],console.error("signaler error",e)})),r.client.connection.on("failed",(e=>{delete c.signalers[t],console.error("signaler error",e)}))}const s=c.signalers[t].channel(t);s.presence.enter(),c.channels[r]=t,s.subscribe(n.P2P_CONNECT_MESSAGE,(e=>{var t;if((null===(t=e.data)||void 0===t?void 0:t.receiver)!==o)return;const r=c.getMessageSender(e),n=c.connect(s,r,e);n.pc.addEventListener("datachannel",(e=>{c.receiveDataChannel(e.channel,n,r)}))})),s.subscribe("disconnect",(e=>{var t;if((null===(t=e.data)||void 0===t?void 0:t.receiver)!==o)return;const r=c.getMessageSender(e);c.disconnect(r),c.closeChannelsWithPeer(r)}))}static receiveDataChannel(e,t,r){var o,n,a,l;const u=e.label;"main"===u&&(c.streamers[r]=new i.default(e,null!==(n=null===(o=t.pc.sctp)||void 0===o?void 0:o.maxMessageSize)&&void 0!==n?n:0),c.streamers[r].startStreaming()),"control"===u&&(e.addEventListener("message",(e=>{const t=JSON.parse(e.data),o=t.windowId,n=t.tabId;c.streamers[r]&&c.streamers[r].switchTab(n),c.tabStreamers[r]&&c.tabStreamers[r].setWindow(o)})),c.tabStreamers[r]=new s.default(e,null!==(l=null===(a=t.pc.sctp)||void 0===a?void 0:a.maxMessageSize)&&void 0!==l?l:0),c.tabStreamers[r].startStreaming()),e.addEventListener("close",(()=>{"main"===u&&c.disconnectSnapshotStreamer(r),"control"===u&&c.disconnectTabStreamer(r),c.disconnect(r),c.closeChannelsWithPeer(r)}))}static connect(e,t,r){c.connections[t]&&c.disconnect(t);const o=new n.PeerConnection(e,c.iceServers,!0);return o.connect(t,r),c.connections[t]=o,o.pc.addEventListener("connectionstatechange",(()=>{switch(o.pc.connectionState){case"failed":case"closed":c.disconnect(t),c.disconnectSnapshotStreamer(t),c.disconnectTabStreamer(t)}})),o}static close(e){for(const[t,r]of Object.entries(c.channels))r===e&&c.closeChannelsWithPeer(t)}static disconnect(e){c.connections[e]&&(c.connections[e].close(),delete c.connections[e])}static disconnectTabStreamer(e){c.tabStreamers[e]&&(c.tabStreamers[e].endStreaming(),delete c.tabStreamers[e])}static disconnectSnapshotStreamer(e){c.streamers[e]&&(c.streamers[e].endStreaming(),delete c.streamers[e])}static closeChannelsWithPeer(e){if(c.channels[e]){const t=c.channels[e],r=c.signalers[t].channel(t);r.unsubscribe(),r.detach(),delete c.channels[e];const o=[];for(const[e,r]of Object.entries(c.channels))r===t&&o.push(e);0===o.length&&c.signalers[t]&&"connected"===c.signalers[t].client.connection.state&&c.signalers[t].client.close()}}static setCloseTimeouts(e,t,r){if(t)for(const o of r){const r=(0,a.configEndUnix)(e,o);if(r>Date.now()/1e3){const e=`${t}/${o.group.replace(/[^a-z0-9]/gi,"-")}`;clearTimeout(c.closeTimeouts[e]),c.closeTimeouts[e]=setTimeout((()=>{c.close(e)}),1e3*r-Date.now())}}}static getMessageSender(e){return e.clientId}static prepareMessage(e){const t=JSON.stringify(Object.assign(Object.assign({},e),{timestamp:(new Date).getTime()}));return new Uint8Array([...c.encoder.encode(t),c.terminatorCharCode,c.terminatorCharCode])}static send(e,t,r){let o=0;for(;o<t.length;){const n=Math.min(r,t.length-o),i=new Uint8Array(t.buffer,o,n);e.send(i),o+=n}}}t.default=c,c.initialised=!1,c.encoder=new TextEncoder,c.terminatorCharCode="\0".charCodeAt(0),c.signalers={},c.channels={},c.connections={},c.streamers={},c.tabStreamers={},c.closeTimeouts={},c.iceServers=void 0},513:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(379),s=n(r(668)),a=r(259);class c{constructor(e,t){this.datachannel=e,this.maxMessageSize=t,this.streamingTab=null,this.lastSendTimeMs=0,this.datachannel.bufferedAmountLowThreshold=c.DC_BUFFER_LOW_MARK_BYTES}startStreaming(){clearInterval(this.streamInterval),this.streamInterval=setInterval((()=>{this.datachannel.bufferedAmount<=this.datachannel.bufferedAmountLowThreshold?this.sendScreenshot():console.log(`DEBUG p2p buffer NOT low, skipping screenshot. Buffered: ${(this.datachannel.bufferedAmount/1e3).toFixed(2)}kb, buffer_low_mark: ${(this.datachannel.bufferedAmountLowThreshold/1e3).toFixed(2)}`)}),1e3)}endStreaming(){clearInterval(this.streamInterval)}switchTab(e){this.streamingTab=e}sendScreenshot(){return o(this,void 0,void 0,(function*(){if(!this.streamingTab)return;const e=yield a.OffscreenManager.sendMesage({type:i.MessageTypes.P2PGetScreenshot,streamingTab:this.streamingTab});e&&this.send(e)}))}send(e){const t=s.default.prepareMessage(e);this.lastSendTimeMs?console.log(`DEBUG p2p sending screenshot. Size: ${(t.length/1e3).toFixed(2)}kb, last send (secs): ${((Date.now()-this.lastSendTimeMs)/1e3).toFixed(2)}`):console.log(`DEBUG p2p sending screenshot. Size: ${(t.length/1e3).toFixed(2)}kb`),this.lastSendTimeMs=Date.now(),s.default.send(this.datachannel,t,this.maxMessageSize)}}t.default=c,c.DC_BUFFER_LOW_MARK_BYTES=0},25:function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(379),s=n(r(668)),a=r(259);t.default=class{constructor(e,t){this.dataChannel=e,this.maxMessageSize=t,this.streamingWindow=null}startStreaming(){clearInterval(this.streamInterval),this.streamInterval=setInterval((()=>{this.sendTabs()}),1e3)}endStreaming(){clearInterval(this.streamInterval)}setWindow(e){this.streamingWindow=e}sendTabs(){return o(this,void 0,void 0,(function*(){if(!this.streamingWindow)return;const e=yield a.OffscreenManager.sendMesage({type:i.MessageTypes.P2PGetTabs}),t=s.default.prepareMessage(e);s.default.send(this.dataChannel,t,this.maxMessageSize)}))}}},115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logging__debug=t.logging__message=t.logging__warning=t.logging__error=void 0;const o=r(259),n=r(379);t.logging__error=(e,...t)=>{i(n.LogLevelTypes.Error,e,t)},t.logging__warning=(e,...t)=>{i(n.LogLevelTypes.Warning,e,t)},t.logging__message=(e,...t)=>{i(n.LogLevelTypes.Message,e,t)},t.logging__debug=(e,...t)=>{i(n.LogLevelTypes.Debug,e,t)};const i=(e,t,...r)=>{o.OffscreenManager.sendMesage({type:n.MessageTypes.OffScreenLogMessage,logLevel:e,message:t,optionalParams:r})}},194:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserType=t.getRandomInt=t.resizeAndCompressImage=t.getLocalIpPeerConnection=void 0;const n=o(r(82)),i=r(379);t.getLocalIpPeerConnection=e=>{const t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),r=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;return t.createDataChannel(""),t.createOffer().then((function(o){var n;null===(n=o.sdp)||void 0===n||n.split("\n").forEach((function(t){if(t.indexOf("candidate")<0)return;const o=t.match(r);let n=o?o[0]:"0.0.0.0";n.startsWith("100.115.92")&&(n="10.255.255.254"),e(n)})),null==t||t.setLocalDescription(o)})).catch((function(){})),t.onicecandidate=function(t){if(t&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.match(r)){const o=t.candidate.candidate.match(r);let n=o?o[0]:"0.0.0.0";n.startsWith("100.115.92")&&(n="10.255.255.254"),e(n)}},t},t.resizeAndCompressImage=(e,t,r)=>new Promise((o=>{const n=new Image;n.onload=function(){const e=t,i=document.createElement("canvas"),s=i.getContext("2d");i.width=n.width,i.height=n.height;const a=n.width>e?e:n.width,c=a*(n.height/n.width);i.width=a,i.height=c,null==s||s.drawImage(n,0,0,a,c),o(r&&r<1?i.toDataURL("image/jpeg",r):i.toDataURL())},n.src=e})),t.getRandomInt=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)),t.getBrowserType=()=>{switch(n.default.getParser(window.navigator.userAgent).getBrowserName()){case"Chrome":default:return i.BrowserTypes.chrome;case"Microsoft Edge":return i.BrowserTypes.edge}}},241:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});const o=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),n=new Set(["https:","http:","file:"]),i=e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!n.has(t)}catch{return!1}},s=(e,t)=>{let{stripHash:r}=t;const o=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!o)throw new Error(`Invalid URL: ${e}`);let{type:n,data:i,hash:s}=o.groups;const a=n.split(";");s=r?"":s;let c=!1;"base64"===a[a.length-1]&&(a.pop(),c=!0);const l=a.shift()?.toLowerCase()??"",u=[...a.map((e=>{let[t,r=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(r=r.toLowerCase(),"us-ascii"===r)?"":`${t}${r?`=${r}`:""}`})).filter(Boolean)];return c&&u.push("base64"),(u.length>0||l&&"text/plain"!==l)&&u.unshift(l),`data:${u.join(";")},${c?i.trim():i}${s?`#${s}`:""}`};function a(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return s(e,t);if(i(e))return e;const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===n.protocol&&(n.protocol="http:"),t.forceHttps&&"http:"===n.protocol&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,r="";for(;;){const o=e.exec(n.pathname);if(!o)break;const i=o[0],s=o.index;r+=n.pathname.slice(t,s).replace(/\/{2,}/g,"/"),r+=i,t=s+i.length}r+=n.pathname.slice(t,n.pathname.length).replace(/\/{2,}/g,"/"),n.pathname=r}if(n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=n.pathname.split("/");const r=e[e.length-1];o(r,t.removeDirectoryIndex)&&(e=e.slice(0,-1),n.pathname=e.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...n.searchParams.keys()])o(e,t.removeQueryParameters)&&n.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(n.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const e of[...n.searchParams.keys()])o(e,t.keepQueryParameters)||n.searchParams.delete(e);if(t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,"")),t.removeExplicitPort&&n.port&&(n.port="");const a=e;return e=n.toString(),t.removeSingleSlash||"/"!==n.pathname||a.endsWith("/")||""!==n.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===n.pathname)&&""===n.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(259)})();